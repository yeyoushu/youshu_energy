import{u as E}from"./useChart-CT9okfMw.js";import{a as $,r as j}from"./chargingstation-BUhS8ji9.js";import{y as b,G as I,k as q,L as G,r as u,J,m as L,o as k,p as e,l,q as t,t as _,u as r,w as M,c as O,z as D,F as H}from"./vendor-BrY8b94Q.js";import{_ as K}from"./index-CWtyz5ej.js";function w(f){if(isNaN(f)||typeof f!="number")throw new Error("必须是一个有效数字");const[c,v]=f.toString().split(".");let o="";for(let p=c.length-1;p>=0;p--)o=c[p]+o,(c.length-p)%3===0&&p!==0&&(o=","+o);return v?`${o}.${v}`:o}const Q=(f,c=10)=>{const v=b(0),o=I({page:1,pageSize:c});return{totals:v,pageInfo:o,handleSizeChange:i=>{o.pageSize=i,f()},handleCurrentChange:i=>{o.page=i,f()},setTotals:i=>{v.value=i},resetPagination:()=>{o.page=1,o.pageSize=c}}},W={class:"title"},X={class:"round"},Y={class:"total mt"},Z={class:"title"},ee={class:"round"},te={class:"total mt"},ae={class:"title"},le={class:"round"},ne={class:"title"},se={class:"round"},oe={class:"total mt"},re={class:"title"},ie={class:"round"},de={class:"total mt"},ue={class:"title"},pe={class:"round"},ce={class:"total mt"},_e=q({__name:"Revenue",setup(f){const c=b(null);E(c,async()=>{const m=I({tooltip:{trigger:"axis"},legend:{data:[]},xAxis:{type:"category",data:["一月","二月","三月","四月","五月","六月","七月"]},yAxis:[{type:"value",name:"销售",position:"left"},{type:"value",name:"访问量",position:"right"}],series:[{name:"",type:"bar",data:[],yAxisIndex:0,itemStyle:{color:"#409eff"}},{name:"",type:"line",data:[],yAxisIndex:1,itemStyle:{color:"#409eff"},smooth:!0}]}),a=await $();m.legend.data=a.data.list.map(n=>n.name);for(let n=0;n<a.data.list.length;n++)m.series[n].name=a.data.list[n].name,m.series[n].data=a.data.list[n].data;return m});const o=b(""),p=b([]),C=b(!1),x=async()=>{C.value=!0;const{data:{list:m,total:a}}=await j({...i,name:o.value});N(a),p.value=m,C.value=!1,p.value=m.map(n=>({...n,day:n.electricity+n.parkingFee+n.serviceFee+n.member}))},{totals:z,pageInfo:i,handleCurrentChange:A,handleSizeChange:F,setTotals:N}=Q(x);return G(()=>{x()}),(m,a)=>{const n=u("Document"),h=u("el-icon"),g=u("el-card"),y=u("el-col"),T=u("el-row"),V=u("el-button"),P=u("el-input"),d=u("el-table-column"),S=u("el-tag"),B=u("el-table"),R=u("el-pagination"),U=J("loading");return k(),L(H,null,[e(T,{gutter:20},{default:l(()=>[e(y,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",W,[t("div",X,[e(h,null,{default:l(()=>[e(n)]),_:1})]),a[3]||(a[3]=t("h4",null,"今日总收入（元）",-1))]),t("div",Y,[t("h2",null,_(r(w)(12239824)),1),a[4]||(a[4]=t("div",{class:"percent"},"-21%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",Z,[t("div",ee,[e(h,null,{default:l(()=>[e(n)]),_:1})]),a[5]||(a[5]=t("h4",null,"本月总收入 (万元)",-1))]),t("div",te,[t("h2",null,_(r(w)(2924)),1),a[6]||(a[6]=t("div",{class:"percent"},"-21%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",ae,[t("div",le,[e(h,null,{default:l(()=>[e(n)]),_:1})]),a[7]||(a[7]=t("h4",null,"会员卡储值金额 (元)",-1))]),a[8]||(a[8]=t("div",{class:"total mt"},[t("h2",null,"239,824"),t("div",{class:"percent"},"-16%")],-1))]),_:1})]),_:1}),e(y,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",ne,[t("div",se,[e(h,null,{default:l(()=>[e(n)]),_:1})]),a[9]||(a[9]=t("h4",null,"服务费总金额 (元)",-1))]),t("div",oe,[t("h2",null,_(r(w)(16824)),1),a[10]||(a[10]=t("div",{class:"percent"},"-7%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",re,[t("div",ie,[e(h,null,{default:l(()=>[e(n)]),_:1})]),a[11]||(a[11]=t("h4",null,"停车费总金额 (元)",-1))]),t("div",de,[t("h2",null,_(r(w)(9687)),1),a[12]||(a[12]=t("div",{class:"percent"},"-4%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",ue,[t("div",pe,[e(h,null,{default:l(()=>[e(n)]),_:1})]),a[13]||(a[13]=t("h4",null,"电费总金额 (元)",-1))]),t("div",ce,[t("h2",null,_(r(w)(223674)),1),a[14]||(a[14]=t("div",{class:"percent"},"-19%",-1))])]),_:1})]),_:1})]),_:1}),e(g,{shadow:"always",class:"mt"},{default:l(()=>[t("div",{ref_key:"chartRef",ref:c,style:{width:"100%",height:"300px"}},null,512)]),_:1}),e(g,{shadow:"always",class:"mt"},{default:l(()=>[e(P,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value=s),style:{"max-width":"400px"},placeholder:"请输入站点名称"},{append:l(()=>[e(V,{icon:"Search",onClick:x})]),_:1},8,["modelValue"]),M((k(),O(B,{data:p.value},{default:l(()=>[e(d,{type:"index",label:"序号",width:"80"}),e(d,{label:"充电站名称",prop:"name"}),e(d,{label:"充电站ID",prop:"id"}),e(d,{label:"所属城市",prop:"city"}),e(d,{label:"充电桩总量(个)",prop:"count"}),e(d,{label:"单日总收入(趋势)",prop:"day"},{default:l(s=>[t("span",null,_(s.row.day),1),e(S,{type:s.row.percent>0?"danger":"success",class:"ml"},{default:l(()=>[D(_(s.row.percent>0?"+"+s.row.percent+"%":s.row.percent+"%"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"月度总收入(万元)",prop:"month",width:"160",sortable:""},{default:l(s=>[t("span",null,_(s.row.month),1),e(S,{type:s.row.mpercent>0?"danger":"success",class:"ml"},{default:l(()=>[D(_(s.row.mpercent>0?"+"+s.row.mpercent+"%":s.row.mpercent+"%"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"电费营收(元)",prop:"electricity"}),e(d,{label:"停车费营收(元)",prop:"parkingFee"}),e(d,{label:"服务费营收(元)",prop:"serviceFee"}),e(d,{label:"会员储值金(元)",prop:"member"})]),_:1},8,["data"])),[[U,C.value]]),e(R,{class:"fr mt mb","current-page":r(i).page,"onUpdate:currentPage":a[1]||(a[1]=s=>r(i).page=s),"page-size":r(i).pageSize,"onUpdate:pageSize":a[2]||(a[2]=s=>r(i).pageSize=s),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total",total:r(z),onSizeChange:r(F),onCurrentChange:r(A),background:""},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1})],64)}}}),he=K(_e,[["__scopeId","data-v-04501748"]]);export{he as default};
