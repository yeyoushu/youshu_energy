import{u as L}from"./useHttp-9hYy3MB2.js";import{_ as H,g as I}from"./AuthModal.vue_vue_type_script_setup_true_lang-owtN9hye.js";import{j as M,r as m,e as o,s as R,c as T,o as z,g as e,w as l,u as s,h as p,v as q,f as G,t as v,F as J}from"./vendor-CHjNVy30.js";import"./index-CulM0VMq.js";const ee=M({__name:"System",setup(O){const i=m({name:"",department:""}),{dataList:k,loading:A,resetPagination:S,loadData:V,totals:x,pageInfo:_,handleCurrentChange:U,handleSizeChange:D}=L("/permissionList",i),g=m(!1),y=m([]),h=m([]),C=m("");function N(f){const t=[];function d(n){n.url&&!n.children&&t.push(n.url),n.children&&n.children.forEach(u=>{d(u)})}return f.forEach(n=>d(n)),t}const B=async(f,t)=>{C.value=t;const{data:{list:d,btn:n}}=await I(f);y.value=N(d),h.value=n,g.value=!0},E=()=>{i.value={name:"",department:""},S()};return(f,t)=>{const d=o("el-input"),n=o("el-col"),u=o("el-option"),K=o("el-select"),c=o("el-button"),P=o("el-row"),w=o("el-card"),r=o("el-table-column"),b=o("el-tag"),$=o("el-table"),j=o("el-pagination"),F=R("loading");return z(),T(J,null,[e(w,null,{default:l(()=>[e(P,{gutter:20},{default:l(()=>[e(n,{span:6},{default:l(()=>[e(d,{modelValue:i.value.name,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value.name=a),modelModifiers:{trim:!0},placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),e(n,{span:6},{default:l(()=>[e(K,{placeholder:"请选择部门",modelValue:i.value.department,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value.department=a)},{default:l(()=>[e(u,{label:"全部",value:""}),e(u,{label:"总裁办",value:"总裁办"}),e(u,{label:"技术部",value:"技术部"}),e(u,{label:"市场部",value:"市场部"}),e(u,{label:"维修部",value:"维修部"}),e(u,{label:"运营部",value:"运营部"}),e(u,{label:"客服部",value:"客服部"})]),_:1},8,["modelValue"])]),_:1}),e(n,{span:6},{default:l(()=>[e(c,{type:"primary",onClick:s(V)},{default:l(()=>[...t[5]||(t[5]=[p("查询",-1)])]),_:1},8,["onClick"]),e(c,{onClick:E},{default:l(()=>[...t[6]||(t[6]=[p("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{class:"mt"},{default:l(()=>[q((z(),G($,{data:s(k)},{default:l(()=>[e(r,{type:"index",label:"序号",width:"80"}),e(r,{prop:"account",label:"账号"}),e(r,{prop:"name",label:"姓名"}),e(r,{prop:"phone",label:"电话"}),e(r,{prop:"idNo",label:"身份证号"}),e(r,{prop:"position",label:"职位"},{default:l(a=>[e(b,{type:"primary"},{default:l(()=>[p(v(a.row.position),1)]),_:2},1024)]),_:1}),e(r,{prop:"department",label:"部门"}),e(r,{prop:"pageAuthority",label:"页面权限"},{default:l(a=>[e(b,{type:"success"},{default:l(()=>[p(v(a.row.pageAuthority),1)]),_:2},1024)]),_:1}),e(r,{prop:"btnAuthority",label:"按钮权限"},{default:l(a=>[e(b,{type:"info"},{default:l(()=>[p(v(a.row.btnAuthority),1)]),_:2},1024)]),_:1}),e(r,{label:"操作",width:"280"},{default:l(a=>[e(c,{type:"primary",size:"small",onClick:Q=>B(a.row.pageAuthority,a.row.account)},{default:l(()=>[...t[7]||(t[7]=[p(" 权限设置 ",-1)])]),_:1},8,["onClick"]),e(c,{type:"danger",size:"small"},{default:l(()=>[...t[8]||(t[8]=[p(" 删除 ",-1)])]),_:1}),e(c,{type:"danger",size:"small"},{default:l(()=>[...t[9]||(t[9]=[p(" 禁用 ",-1)])]),_:1})]),_:1})]),_:1},8,["data"])),[[F,s(A)]]),e(j,{class:"fr mt mb","current-page":s(_).page,"onUpdate:currentPage":t[2]||(t[2]=a=>s(_).page=a),"page-size":s(_).pageSize,"onUpdate:pageSize":t[3]||(t[3]=a=>s(_).pageSize=a),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total",total:s(x),onSizeChange:s(D),onCurrentChange:s(U),background:""},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1}),e(H,{visible:g.value,checkedKeys:y.value,account:C.value,onClose:t[4]||(t[4]=a=>g.value=!1),btnAuth:h.value},null,8,["visible","checkedKeys","account","btnAuth"])],64)}}});export{ee as default};
