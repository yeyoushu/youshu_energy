import{g as G,_ as q}from"./index-CulM0VMq.js";import{y as P,j as T,N as Q,r as A,O as R,a as K,b as W,P as J,Q as X,R as x,e as L,s as Y,c as V,o as y,g as k,v as Z,w as p,l as S,h as C,F as B,n as j,f as O,t as I,u as ee}from"./vendor-CHjNVy30.js";const ne={document:"/document"},te=()=>G(ne.document);var oe=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ae=function(e){return oe.map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase())!==-1},re=function(e,o,n){Object.keys(o).filter(ae).forEach(function(a){var u=o[a];typeof u=="function"&&(a==="onInit"?u(e,n):n.on(a.substring(2),function(i){return u(i,n)}))})},ie=function(e,o,n,a){var u=e.modelEvents?e.modelEvents:null,i=Array.isArray(u)?u.join(" "):u;P(a,function(f,v){n&&typeof f=="string"&&f!==v&&f!==n.getContent({format:e.outputFormat})&&n.setContent(f)}),n.on(i||"change input undo redo",function(){o.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},le=function(e,o,n,a,u,i){a.setContent(i()),n.attrs["onUpdate:modelValue"]&&ie(o,n,a,u),re(e,n.attrs,a)},N=0,$=function(e){var o=Date.now(),n=Math.floor(Math.random()*1e9);return N++,e+"_"+n+N+String(o)},ue=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},z=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},se=function(e,o){return z(e).concat(z(o))},de=function(e){return e==null},F=function(){return{listeners:[],scriptId:$("tiny-script"),scriptLoaded:!1}},ce=function(){var e=F(),o=function(u,i,f,v){var l=i.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=u,l.src=f;var c=function(){l.removeEventListener("load",c),v()};l.addEventListener("load",c),i.head&&i.head.appendChild(l)},n=function(u,i,f){e.scriptLoaded?f():(e.listeners.push(f),u.getElementById(e.scriptId)||o(e.scriptId,u,i,function(){e.listeners.forEach(function(v){return v()}),e.scriptLoaded=!0}))},a=function(){e=F()};return{load:n,reinitialize:a}},ve=ce(),fe=function(){return typeof window<"u"?window:global},h=function(){var e=fe();return e&&e.tinymce?e.tinymce:null},me={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},g=function(){return g=Object.assign||function(e){for(var o,n=1,a=arguments.length;n<a;n++){o=arguments[n];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(e[u]=o[u])}return e},g.apply(this,arguments)},ye=function(e,o,n,a){return e(a||"div",{id:o,ref:n})},pe=function(e,o,n){return e("textarea",{id:o,visibility:"hidden",ref:n})},M={selector:void 0,target:void 0},ge=T({props:me,setup:function(e,o){var n=e.init?g(g({},e.init),M):g({},M),a=Q(e),u=a.disabled,i=a.modelValue,f=a.tagName,v=A(null),l=null,c=e.id||$("tiny-vue"),t=e.init&&e.init.inline||e.inline,b=!!o.attrs["onUpdate:modelValue"],m=!0,D=e.initialValue?e.initialValue:"",E="",U=function(r){return b?function(){return i?.value?i.value:""}:function(){return r?D:E}},_=function(){var r=U(m),d=g(g({},n),{readonly:e.disabled,target:v.value,plugins:se(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:t,setup:function(w){l=w,w.on("init",function(H){return le(H,e,o,w,i,r)}),typeof n.setup=="function"&&n.setup(w)}});ue(v.value)&&(v.value.style.visibility=""),h().init(d),m=!1};P(u,function(r){var d;l!==null&&(typeof((d=l.mode)===null||d===void 0?void 0:d.set)=="function"?l.mode.set(r?"readonly":"design"):l.setMode(r?"readonly":"design"))}),P(f,function(r){var d;b||(E=l.getContent()),(d=h())===null||d===void 0||d.remove(l),R(function(){return _()})}),K(function(){if(h()!==null)_();else if(v.value&&v.value.ownerDocument){var r=e.cloudChannel?e.cloudChannel:"6",d=e.apiKey?e.apiKey:"no-api-key",w=de(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(r,"/tinymce.min.js"):e.tinymceScriptSrc;ve.load(v.value.ownerDocument,w,_)}}),W(function(){h()!==null&&h().remove(l)}),t||(J(function(){m||_()}),X(function(){var r;b||(E=l.getContent()),(r=h())===null||r===void 0||r.remove(l)}));var s=function(r){var d;E=l.getContent(),(d=h())===null||d===void 0||d.remove(l),n=g(g(g({},n),r),M),R(function(){return _()})};return o.expose({rerender:s,getEditor:function(){return l}}),function(){return t?ye(x,c,v,e.tagName):pe(x,c,v)}}});const Ce={class:"mt"},be={class:"mt"},Se={class:"mt"},_e={class:"mt"},ke=T({__name:"Document",setup(e){const o=A({type:[],important:[],publish:[]}),n=A([-1,-1,-1]),a=A([]),u=c=>{a.value=a.value.filter(t=>t.num!==c),n.value[c]=-1},i=(c,t,b)=>{if(n.value[t]=c,c===-1)a.value=a.value.filter(m=>m.num!==t);else{const m=a.value.find(D=>D.num===t);m?m.name=b:a.value.push({name:b,num:t})}};K(async()=>{const{data:c}=await te();o.value=c});const f=A(""),v=()=>{const c=new Blob([f.value],{type:"text/html"}),t=document.createElement("a");t.href=URL.createObjectURL(c),t.download="documnet.html",t.click(),URL.revokeObjectURL(t.href)},l=()=>{console.log(a.value.map(c=>c.name))};return(c,t)=>{const b=L("el-check-tag"),m=L("el-tag"),D=L("el-divider"),E=L("el-card"),U=L("el-button"),_=Y("permission");return y(),V(B,null,[k(E,null,{default:p(()=>[S("div",Ce,[t[5]||(t[5]=S("span",{class:"title"},"文章类型：",-1)),k(b,{type:n.value[0]==-1?"primary":"info",class:"mr",onClick:t[0]||(t[0]=s=>i(-1,0,"")),checked:""},{default:p(()=>[...t[4]||(t[4]=[C("全部",-1)])]),_:1},8,["type"]),(y(!0),V(B,null,j(o.value.type,(s,r)=>(y(),O(m,{type:n.value[0]==r?"primary":"info",class:"mr",key:s,onClick:d=>i(r,0,s)},{default:p(()=>[C(I(s),1)]),_:2},1032,["type","onClick"]))),128))]),S("div",be,[t[7]||(t[7]=S("span",{class:"title"},"重要程度：",-1)),k(m,{type:n.value[1]==-1?"primary":"info",class:"mr",onClick:t[1]||(t[1]=s=>i(-1,1,""))},{default:p(()=>[...t[6]||(t[6]=[C("全部",-1)])]),_:1},8,["type"]),(y(!0),V(B,null,j(o.value.important,(s,r)=>(y(),O(m,{type:n.value[1]==r?"primary":"info",class:"mr",key:s,onClick:d=>i(r,1,s)},{default:p(()=>[C(I(s),1)]),_:2},1032,["type","onClick"]))),128))]),S("div",Se,[t[9]||(t[9]=S("span",{class:"title"},"发布渠道：",-1)),k(m,{type:n.value[2]==-1?"primary":"info",class:"mr",onClick:t[2]||(t[2]=s=>i(-1,2,""))},{default:p(()=>[...t[8]||(t[8]=[C("全部",-1)])]),_:1},8,["type"]),(y(!0),V(B,null,j(o.value.publish,(s,r)=>(y(),O(m,{type:n.value[2]==r?"primary":"info",class:"mr",key:s,onClick:d=>i(r,2,s)},{default:p(()=>[C(I(s),1)]),_:2},1032,["type","onClick"]))),128))]),k(D),S("div",_e,[t[10]||(t[10]=S("span",{class:"title"},"已选:",-1)),(y(!0),V(B,null,j(a.value,(s,r)=>(y(),O(m,{"disable-transitions":"",type:"success",class:"ml",closable:"",key:r,onClose:d=>u(s.num)},{default:p(()=>[C(I(s.name),1)]),_:2},1032,["onClose"]))),128))])]),_:1}),k(U,{type:"primary",class:"mt mb",onClick:v},{default:p(()=>[...t[11]||(t[11]=[C("导出富文本到HTML文件",-1)])]),_:1}),k(ee(ge),{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),"api-key":"xvbamfm2vokka8qoim9r801qtdlldskjschd51yha7zhuusp",init:{language:"zh_CN",plugins:"lists link image table code help wordcount"}},null,8,["modelValue"]),Z((y(),O(U,{type:"primary",onClick:l,class:"mt"},{default:p(()=>[...t[12]||(t[12]=[C("提交文章内容",-1)])]),_:1})),[[_,"user"]])],64)}}}),we=q(ke,[["__scopeId","data-v-9cafdcde"]]);export{we as default};
