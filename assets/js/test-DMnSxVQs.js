const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/request-9yg7YijW.js","assets/js/index-BJQUWR-1.js","assets/js/vendor-CHjNVy30.js","assets/css/index-xCubpQZP.css","assets/js/station-DfQHTTxy.js","assets/js/IdentityManager-Cvzhao3G.js","assets/js/substitute-TajliGxH.js","assets/js/QueueProcessor-kOJ7HYBn.js","assets/js/ElevationLayer-BxiP87fj.js","assets/js/ArcGISCachedService-dyR3n1__.js","assets/js/TileInfoTilemapCache-D3DxJype.js","assets/js/TilemapCache-Dm9iUoFI.js","assets/js/ByteSizeUnit-BsxeN7wM.js","assets/js/LRUCache--7okbBjw.js","assets/js/MemCache-CYsUaMUi.js","assets/js/memoryEstimations-Bf3XeyNh.js","assets/js/ArcGISService-CmgVmE1Y.js","assets/js/WorkerHandle-xst0kFGD.js","assets/js/resourceUtils-CbFcqewb.js","assets/js/layersCreator-DMF8C1el.js","assets/js/loadUtils-CDDahs8e.js","assets/js/fetchService-DaxUVxfS.js","assets/js/associatedFeatureServiceUtils-DqcKWMBa.js","assets/js/lazyLayerLoader-DNOlzJxA.js","assets/js/portalLayers-olaJRqaI.js","assets/js/styleUtils-cPuj9opO.js","assets/js/ElevationQuery-CKb37WwZ.js","assets/js/arcgisLayers-D7vgFMGL.js","assets/js/statsWorker-Bzy18Yge.js","assets/js/utils-yikIE6So.js","assets/js/quantizationUtils-DwvMSTst.js","assets/js/heatmapUtils-PVivGZel.js","assets/js/utils-DY2Sc_K6.js","assets/js/utils-B8wkDuTC.js","assets/js/ClassBreaksDefinition-B7GFRgXT.js","assets/js/geometryEngineWorker-C0Q_IlkF.js","assets/js/geometryEngineJSON-D3TWJXYr.js","assets/js/json-Wa8cmqdu.js","assets/js/operatorsWorker-C3HbbeXC.js","assets/js/CSVSourceWorker-C5iKy1Cl.js","assets/js/date-DCujAECq.js","assets/js/OptimizedFeature-C54A3ei6.js","assets/js/executeQueryForSnapping-C8hmU7Re.js","assets/js/queryUtils-BbHc-bQ7.js","assets/js/QueryEngine-DbTqbZZD.js","assets/js/featureConversionUtils-B6zVmPj5.js","assets/js/OptimizedFeatureSet-BR8EEvDc.js","assets/js/WhereClauseCache-Bh6eqZce.js","assets/js/WhereClause-DZvTkx_p.js","assets/js/TimeOnly-6nuEd6-R.js","assets/js/enum-Dj4NXxC3.js","assets/js/UnknownTimeZone-BTcI1Sc1.js","assets/js/timeSupport-Cc3r-tDz.js","assets/js/QueryEngineCapabilities-CsRUnGk7.js","assets/js/SnappingCandidate-DGkpYqI6.js","assets/js/FixedIntervalBinParameters-y0_TYCdu.js","assets/js/NormalizationBinParametersMixin-BE2oKi81.js","assets/js/FieldsIndex-HhUW4mjA.js","assets/js/FeatureStore-zNfZtDlB.js","assets/js/BoundsStore-b6j4HXSi.js","assets/js/PooledRBush-DagJ475f.js","assets/js/optimizedFeatureQueryEngineAdapter-CKQYXuRy.js","assets/js/number-DfHvDVQ4.js","assets/js/clientSideDefaults-BtCWsW7T.js","assets/js/defaultsJSON-GKolV7NZ.js","assets/js/EdgeProcessingWorker-BJ5bWNRA.js","assets/js/workerHelper-TKzWCAsZ.js","assets/js/InterleavedLayout-K5bAoJD_.js","assets/js/BufferView-CRrbrpVC.js","assets/js/types-BKo2foNY.js","assets/js/edgeProcessing-CsP9OoJn.js","assets/js/deduplicate-D_PrXreV.js","assets/js/Indices-CjrokVvN.js","assets/js/VertexAttribute-BfkzOMLV.js","assets/js/glUtil-BDHmj0I2.js","assets/js/VertexElementDescriptor-BLyltQyJ.js","assets/js/Normals-Dey9OQge.js","assets/js/ElevationSamplerWorker-TWZrSz0Q.js","assets/js/MeshLocalVertexSpace-pp_jQN70.js","assets/js/vertexSpaceConversion-V-RwHtes.js","assets/js/computeTranslationToOriginAndRotation-B5dlshrR.js","assets/js/meshVertexSpaceUtils-C_yYfkz_.js","assets/js/vec3-DKP8VnvX.js","assets/js/vec4-DLWrDfQy.js","assets/js/FeatureServiceSnappingSourceWorker-QXzMtaaz.js","assets/js/symbologySnappingCandidates-Dfg7ChIQ.js","assets/js/pbfQueryUtils-DO8eYVpO.js","assets/js/pbf-C2q1zdMn.js","assets/js/query-WVsuoyMs.js","assets/js/queryZScale-CYbRiGtO.js","assets/js/GeoJSONSourceWorker-WuHGbE6f.js","assets/js/geojson-CIBvYF6q.js","assets/js/sourceUtils-CuIkoHna.js","assets/js/LercWorker-DxAcjVas.js","assets/js/MemorySourceWorker-yRvSmJ7o.js","assets/js/objectIdUtils-BmFjqQA3.js","assets/js/PBFDecoderWorker-XXJcgFS7.js","assets/js/dehydratedFeatures-BQSVsRTn.js","assets/js/FeaturePipelineWorker-CuWt9j3V.js","assets/js/diffUtils-3YJ40hic.js","assets/js/AttributeStore-C5dNIoqU.js","assets/js/Utils-z42kt5DD.js","assets/js/BoundingBox-BjWh8LA9.js","assets/js/UpdateTracking2D-DtrcjM22.js","assets/js/ArcadeExpression-DICBwx3X.js","assets/js/labelUtils-CDaO9w0G.js","assets/js/utils-y48t8Afq.js","assets/js/defaultCIMValues-eS1WuCTt.js","assets/js/enums-DCdj6Lab.js","assets/js/constants-BFLErLYb.js","assets/js/CIMSymbolHelper-zD7d9Mxs.js","assets/js/BidiEngine-QXap_35O.js","assets/js/GeometryUtils-BVOVYLKn.js","assets/js/rasterizingUtils-C0Atwepw.js","assets/js/floatRGBA-BSE9nSch.js","assets/js/Rect-CUzevAry.js","assets/js/defaults-CxYRXl92.js","assets/js/streamLayerUtils-CKwt2uXH.js","assets/js/DictionaryScriptEvaluator-CJ-ldC4v.js","assets/js/MeshWriterRegistry-CNiSsCry.js","assets/js/TechniqueType-pk2C5RYg.js","assets/js/PieChartMeshWriter-Sgh3sL8Z.js","assets/js/libtess-CluHWXiP.js","assets/js/operatorGeodeticDensify-Dg84BN7y.js","assets/js/SimpleGeometryCursor-B92kdZ15.js","assets/js/normalizeUtilsSync-DBjMg87k.js","assets/js/displayFilterUtils-CZXhgfJ1.js","assets/js/ogcFeatureUtils-D2xQr_uZ.js","assets/js/bundle-B2FM5W1M.js","assets/js/CircularArray-CujHzHWW.js","assets/js/createConnection-BXZ5czR6.js","assets/js/PointCloudWorker-B_YAyIz9.js","assets/js/quat-Bl4gg7Oa.js","assets/js/vec3f32-WCVSSNPR.js","assets/js/PointCloudUniqueValueRenderer-tGGRaiQ0.js","assets/js/RendererLegendOptions-DwnCe4OB.js","assets/js/ColorStop-DXxxp7Xk.js","assets/js/I3SBinaryReader-NtP671oc.js","assets/js/orientedBoundingBox-BkX7KmB9.js","assets/js/RasterWorker-DrCeMPhU.js","assets/js/GeographicTransformation-CAOrAq8T.js","assets/js/dataUtils-aEYPoMRG.js","assets/js/RasterSymbolizer-D8oQbVKH.js","assets/js/colorUtils-BIivfTto.js","assets/js/rasterFunctionHelper-C_jSMH0_.js","assets/js/clipUtils-BqiJa36a.js","assets/js/rasterProjectionHelper-C8TQ3K9Q.js","assets/js/colorRamps-CJBsWMSE.js","assets/js/PolynomialTransform-3uIiRvaD.js","assets/js/SceneLayerSnappingSourceWorker-CUJELFfq.js","assets/js/Octree-DaDptjvj.js","assets/js/SceneLayerWorker-CSynk6iY.js","assets/js/I3SUtil-CBo438xu.js","assets/js/edgeUtils-ro11SGFe.js","assets/js/NormalAttribute.glsl-DjSF-sAn.js","assets/js/glsl-Cj7KC756.js","assets/js/ShaderOutput-Bdd80V3g.js","assets/js/BindType-BBwFZqyN.js","assets/js/WFSSourceWorker-DHgNQIwi.js","assets/js/wfsUtils-DeaLCy02.js","assets/js/xmlUtils-CtUoQO7q.js","assets/js/WorkerTileHandler-BUeLMXV6.js","assets/js/constants-BwsikM5h.js","assets/js/config-DHajyIwB.js","assets/js/StyleDefinition-Bk9QDbvE.js","assets/js/SourceLayerData-DxUL0MHL.js","assets/js/StyleRepository-gPWFpVZx.js","assets/js/Lyr3DWorker-DxoWcX7u.js","assets/js/Feature3DPipelineWorker-aWw-CeiR.js","assets/js/jsonUtils-BheKt0Vs.js","assets/js/typeUtils-C6KCJBit.js","assets/js/ClassBreaksRenderer-vhcRb_6K.js","assets/js/commonProperties-DbyQootx.js","assets/js/visualVariableUtils-L08xCRcr.js","assets/js/jsonUtils-8wfeekkP.js","assets/js/defaults3D-BelXX9Kz.js","assets/js/SimpleRenderer-BRmEDfY-.js","assets/js/UniqueValueRenderer-CGaPvNCx.js","assets/js/styleUtils-BLaqcVJr.js","assets/js/dehydratedFeatureUtils-CWDkZZCe.js","assets/js/hydratedFeatures-DSohAZj9.js","assets/js/OutputColorHighlightOID.glsl-CWvEBBaj.js","assets/js/videoUtils-7VrRikc7.js","assets/js/requestImageUtils-BTgDjVnL.js","assets/js/basicInterfaces-N86vRvDz.js","assets/js/TextureFormat-1mYWTFa-.js","assets/js/renderState-206FkoAR.js","assets/js/boundedPlane-Dvf2yxRF.js","assets/js/projectVectorToPoint-B1lB5UOA.js","assets/js/HUDMaterial.glsl-Cbw2Zrx6.js","assets/js/ShaderBuilder-C0_MvlxS.js","assets/js/RealisticTree.glsl-CDMEjm2e.js","assets/js/IntersectorType-gQim6TH1.js","assets/js/DefaultMaterial-BWF4KIbR.js","assets/js/TextureCompressionWorker-DoOb71-3.js","assets/js/Popup-YgQ9HGEY.js","assets/js/unitFormatUtils-DogQArD5.js","assets/js/AttachmentInfo-B2qfHjMI.js","assets/js/labelingInfo-x9rZLFU5.js","assets/js/featureUtils-B4eo8sA2.js","assets/js/utils-C3X7exyA.js","assets/js/cimSymbolUtils-DevxqcTH.js","assets/js/executeQueryJSON-Cr2_rwwd.js","assets/js/FeatureSet-bSdURJbK.js","assets/js/shared-B81Fysc8.js","assets/js/FeatureLayer-GuWe1Dzy.js","assets/js/FeatureLayerBase-DA-vO86T.js","assets/js/LayerFloorInfo-DSub_M9_.js","assets/js/Relationship-BnSDGbHe.js","assets/js/serviceCapabilitiesUtils-4M29g2Nx.js","assets/js/infoFor3D-VMSlSy0z.js","assets/js/editsZScale-COX2mvBz.js","assets/js/APIKeyMixin-BwA3mwUn.js","assets/js/CustomParametersMixin-D2Cn_t_n.js","assets/js/DisplayFilteredLayer-BL2BE1X9.js","assets/js/scaleUtils-CNarsAnF.js","assets/js/EditBusLayer-Bas8QQcN.js","assets/js/FeatureEffectLayer-ClvoUa6c.js","assets/js/FeatureEffect-C3it-67n.js","assets/js/FeatureFilter-D9XFtlUK.js","assets/js/FeatureReductionLayer-DSBGoDde.js","assets/js/FeatureReductionSelection-C6VG7clU.js","assets/js/OrderedLayer-CRdUPHs5.js","assets/js/OrderByInfo-DFCpzBzM.js","assets/js/TemporalLayer-C8vxSxjW.js","assets/js/TimeInfo-BDG3uRT1.js","assets/js/TrackableLayer-BWKH3dLC.js","assets/js/FeatureTemplate-DgG3ObRv.js","assets/js/FeatureType-DnJwgYIO.js","assets/js/fieldProperties-C7eLwcbe.js","assets/js/TitleCreator-C_DJuanC.js","assets/js/versionUtils-BnVMs2XP.js","assets/js/popupUtils-D9e_Xuim.js","assets/js/interfaces-CL2NbQte.js","assets/js/NetworkElement-DcrgyAg_.js","assets/js/ReactiveSet-ChpRben-.js","assets/js/symbolUtils-D8ePKi2q.js","assets/js/layerViewUtils-yeCv-jWE.js","assets/js/arcadeUtils-BM1WYTyw.js","assets/js/arcade-BsrODXHp.js","assets/js/aiServices-Dam0t3mH.js","assets/js/ImmutableArray-BPVd6ESQ.js","assets/js/commonProperties-DHiB1uzW.js","assets/js/unitConversion-DJujv-aL.js","assets/js/batchExec-DQNtBlFN.js","assets/js/webStyleSymbolUtils-Bm8bRxb6.js","assets/js/devEnvironmentUtils-CB8wlU_f.js","assets/js/geometryServiceUtils-DkZfzYkb.js","assets/js/project-C4hgQ0al.js","assets/js/webglDeps-gZHk6Vdq.js","assets/js/VertexArrayObject-_LuaUtOc.js","assets/js/FramebufferObject-CTArVR-t.js","assets/js/ProgramTemplate-V_U9Cecj.js","assets/js/NestedMap-wm1q4thl.js","assets/js/mapViewDeps-yEaSE7Hm.js","assets/js/FeatureCommandQueue-CXCA81a8.js","assets/js/GraphShaderModule-D2kLMRjP.js","assets/js/utils-DDtXMb71.js","assets/js/WGLContainer-CrZ-XYlx.js","assets/js/Container-D1xt9iBh.js","assets/js/SDFHelper-DHNlaMku.js","assets/js/OverrideHelper-CMSF28Z-.js","assets/js/callExpressionWithFeature-CZMTqb1s.js","assets/js/GridShader-CM_4FA5V.js","assets/js/testSVGPremultipliedAlpha-0JeYULgT.js","assets/js/SymbolFader-8n2a4WuF.js","assets/js/RenderingContext-D_6e06RN.js","assets/js/CIMResourceManager-CzLPhhph.js","assets/js/utils-Ds_04Rod.js","assets/js/utils-ehcGqGxa.js","assets/js/projectOperator-D9_yEsmU.js","assets/js/GraphicsView2D-CkNZ5KT_.js","assets/js/GraphicContainer-C2f9SwtH.js","assets/js/AGraphicContainer-HHzbYKYZ.js","assets/js/TechniqueInstance-Bgwkggyi.js","assets/js/TileContainer-DM3juhRy.js","assets/js/gridUtils-BNPdtvAn.js","assets/js/TileLayerView2D-BQnVvIGu.js","assets/js/imageUtils-BHDldd3j.js","assets/js/BitmapTechnique-Wmr6RpmG.js","assets/js/bitmapUtils-D2kG4_VJ.js","assets/js/LayerView2D-NU4wH-7h.js","assets/js/HighlightGraphicContainer-BFfCTPci.js","assets/js/LayerView-_65SRCjZ.js","assets/js/RefreshableLayerView-Dt5pLzQ-.js","assets/js/MapServiceLayerViewHelper-Bgj6iYWa.js","assets/js/floorFilterUtils-n6UOt7ty.js","assets/js/drapedUtils-DDdHT-6u.js","assets/js/sublayerUtils-DniI2t7F.js","assets/js/popupUtils-DnCNqF8K.js","assets/js/FeatureLayerView2D-B4luqZP2.js","assets/js/timeSupport-NWN7qrOE.js","assets/js/AttributeBinsFeatureSet-CLUNaWXG.js","assets/js/AttributeBinsQuery-DE1JMZti.js","assets/js/constants-B4mRqufT.js","assets/js/BaseDynamicLayerView2D-CfqoKkhz.js","assets/js/BitmapContainer-DUGYRNcj.js","assets/js/ExportStrategy-D6Pv-nft.js","assets/js/CatalogLayerView2D-BrTgtWZK.js","assets/js/CatalogDynamicGroupLayerView2D-CyQVTG0q.js","assets/js/CatalogFootprintLayerView2D-CTVKth1f.js","assets/js/GeoRSSLayerView2D-CS2lMqsC.js","assets/js/GraphicsLayerView2D-csyaqQOW.js","assets/js/GroupLayerView2D-DHua09Um.js","assets/js/ImageryLayerView2D-mdggEKlh.js","assets/js/RasterVFDisplayObject-zMUKUE74.js","assets/js/ImageryTileLayerView2D-D5BB95FT.js","assets/js/rasterFieldUtils-Bqxu5ebo.js","assets/js/rasterUtils-Vma19XI8.js","assets/js/RawBlockCache-VXdKZFxb.js","assets/js/KMLLayerView2D-h7KdNcAa.js","assets/js/kmlUtils-DLfjRZQ2.js","assets/js/KnowledgeGraphLayerView2D-DbM-GPr_.js","assets/js/MapImageLayerView2D-BQPdcBRw.js","assets/js/ExportImageParameters-4VzrdOV9.js","assets/js/MapNotesLayerView2D-CiStTG0v.js","assets/js/MediaLayerView2D-n53sO8MA.js","assets/js/mediaLayerUtils-DIa-L6xt.js","assets/js/OverlayContainer-CbYw1lkg.js","assets/js/OGCFeatureLayerView2D-BLbM1jGK.js","assets/js/RouteLayerView2D-Bsef9i5v.js","assets/js/Stop-CMkkmHAH.js","assets/js/networkEnums-wWPfn3N_.js","assets/js/StreamLayerView2D-CnvtHv2P.js","assets/js/SubtypeGroupLayerView2D-BPfA0AVL.js","assets/js/VectorTileLayerView2D-Ct1eZp_Y.js","assets/js/VideoLayerView2D-1sl9Ndxo.js","assets/js/videoUtils-CPknx4Q0.js","assets/js/WMSLayerView2D-CW9qyyjF.js","assets/js/ExportWMSImageParameters-Cr04lBT4.js","assets/js/WMTSLayerView2D-DWF6-EN1.js","assets/js/gif-BJ1QKu12.js","assets/js/apng-GoBU-Pu6.js","assets/js/index-C4yJ4VoZ.js","assets/js/index-BFDbZ9RC.js","assets/js/guid-DlHjpvET.js","assets/js/useT9n-DxfQxTS3.js","assets/js/index-0b532h1y.js","assets/js/index-E0QGyxwP.js","assets/js/dom-BpLKpeVb.js","assets/js/observers-BL3J1voJ.js","assets/js/ref-CLggLXf3.js","assets/js/static-fzdvc6MG.js","assets/js/form-Byc4e9dU.js","assets/js/interactive-BvnVtAqy.js","assets/js/label-CPfD7a8A.js","assets/js/useSetFocus-twL3FMDe.js","assets/js/layersLoader-CtTbsmIn.js","assets/js/jsonContext--JKapB0G.js","assets/js/OperatorGeodeticLength-BLaFLoGF.js","assets/js/Point2D-COgQ1fyf.js","assets/js/OperatorShapePreservingLength-COcYEmIT.js","assets/js/ProjectionTransformation-DUElxxPj.js","assets/js/Envelope2D-Co2MCTM2.js","assets/js/Transformation2D-BGxYmbTi.js","assets/js/OperatorDefinitions-DP7_WWTp.js","assets/js/apiConverter-BUGr88Kj.js","assets/js/jsonConverter-BZ2wfFT6.js","assets/js/SelfSnappingEngine-AqJnRWQK.js","assets/js/GridSnappingEngine-DCp6PsfP.js","assets/js/FeatureSnappingEngine-BaAhnkQs.js","assets/js/editingTools-BJdoOdKd.js","assets/js/SnappingVisualizer2D-D0LmGtng.js","assets/js/SnappingContext-CTLCtWan.js","assets/js/PointSnappingHint-C5HWI0ak.js","assets/js/SketchTooltipInfo-kfKHDTds.js","assets/js/MeshTransform-CXnfAX4N.js","assets/js/axisAngleDegrees-CKN8jXll.js","assets/js/memoize-DmxaQ-k8.js","assets/js/editPlaneUtils-C-xcW7lg.js","assets/js/distanceOperator-Bztn8kx_.js","assets/js/simplifyOperator-cuJNxgiR.js","assets/js/operatorSimplify-3hYUc-ut.js","assets/js/GraphicManipulator-Ike_6Rm7.js","assets/js/drawUtils-CLR1QGY5.js","assets/js/ImageMaterial.glsl--sbqX8pM.js","assets/js/RibbonLine.glsl-Bfh0zgY2.js","assets/js/DefaultLayouts-Blylt__0.js","assets/js/triangulationUtils-DiH_A6V9.js","assets/js/SelectedVertexTooltipInfo-cEsXkzuG.js","assets/js/TranslateTooltipInfo-DHkiYCnO.js","assets/js/ExtentScaleTooltipInfo-C6yl3ZQJ.js","assets/js/LineCallout.glsl-C8pdyOdG.js","assets/js/GraphicMover-8udfKkmn.js","assets/js/Box-BPe9538Y.js","assets/js/settings-CqoCHAAr.js","assets/js/Reshape-VpXCBF59.js"])))=>i.map(i=>d[i]);
var sD=Object.getPrototypeOf;var nD=Reflect.get;var U6=t=>{throw TypeError(t)};var Ov=(t,e,i)=>e.has(t)||U6("Cannot "+i);var Ae=(t,e,i)=>(Ov(t,e,"read from private field"),i?i.call(t):e.get(t)),vn=(t,e,i)=>e.has(t)?U6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),wn=(t,e,i,s)=>(Ov(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),wf=(t,e,i)=>(Ov(t,e,"access private method"),i);var G6=(t,e,i)=>nD(sD(t),i,e);import{a as mt,_ as X9}from"./index-BJQUWR-1.js";import{j as Q9,r as Ly,a5 as oD,a6 as ow,a as aD,T as lD,c as H0,o as vc,e as Rc,F as uD,n as hD,f as cD,w as Ni,l as ll,g as wi,t as B6,h as Qi,a7 as aw,O as pD}from"./vendor-CHjNVy30.js";import{m as fD,i as dD,s as yD}from"./station-DfQHTTxy.js";function _(t,e,i,s){var l,f=arguments.length,y=f<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,e,i,s);else for(var v=t.length-1;v>=0;v--)(l=t[v])&&(y=(f<3?l(y):f>3?l(e,i,y):l(e,i))||y);return f>3&&y&&Object.defineProperty(e,i,y),y}function Rft(t,e){return function(i,s){e(i,s,t)}}function Cft(t,e,i,s){function l(f){return f instanceof i?f:new i((function(y){y(f)}))}return new(i||(i=Promise))((function(f,y){function v(A){try{S(s.next(A))}catch(P){y(P)}}function b(A){try{S(s.throw(A))}catch(P){y(P)}}function S(A){A.done?f(A.value):l(A.value).then(v,b)}S((s=s.apply(t,[])).next())}))}function Nft(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,l;if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose]}if(typeof s!="function")throw new TypeError("Object not disposable.");l&&(s=function(){try{l.call(this)}catch(f){return Promise.reject(f)}}),t.stack.push({value:e,dispose:s,async:i})}return e}var gD=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var s=new Error(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Lft(t){function e(f){t.error=t.hasError?new gD(f,t.error,"An error was suppressed during disposal."):f,t.hasError=!0}var i,s=0;function l(){for(;i=t.stack.pop();)try{if(!i.async&&s===1)return s=0,t.stack.push(i),Promise.resolve().then(l);if(i.dispose){var f=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(f).then(l,(function(y){return e(y),l()}))}else s|=1}catch(y){e(y)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return l()}let Sl;function rt(t){return typeof Sl[t]=="function"?Sl[t]=Sl[t](globalThis):Sl[t]}Sl=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},rt.add=(t,e,i,s)=>{(s||Sl[t]===void 0)&&(Sl[t]=e),i&&rt(t)},rt.cache=Sl,rt.add("big-integer-warning-enabled",!0),rt.add("esri-deprecation-warnings",!0),rt.add("esri-tests-disable-screenshots",!1),rt.add("esri-tests-use-full-window",!1),rt.add("esri-tests-post-to-influx",!0),rt.add("esri-cim-animations-enable-status","enabled"),rt.add("esri-cim-animations-spotlight",!1),rt.add("esri-cim-animations-freeze-time",!1),(()=>{rt.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(rt.add("host-browser",t),rt.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),rt.add("dom",t),rt("host-browser")){const e=navigator,i=e.userAgent,s=e.appVersion,l=parseFloat(s);if(rt.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),rt.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),rt.add("khtml",s.includes("Konqueror")?l:void 0),rt.add("edge",parseFloat(i.split("Edge/")[1])||void 0),rt.add("opr",parseFloat(i.split("OPR/")[1])||void 0),rt.add("webkit",!rt("wp")&&!rt("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),rt.add("chrome",!rt("edge")&&!rt("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),rt.add("android",!rt("wp")&&parseFloat(i.split("Android ")[1])||void 0),rt.add("safari",!s.includes("Safari")||rt("wp")||rt("chrome")||rt("android")||rt("edge")||rt("opr")?void 0:parseFloat(s.split("Version/")[1])),rt.add("mac",s.includes("Macintosh")),!rt("wp")&&/(iPhone|iPod|iPad)/.test(i)){const f=RegExp.$1.replace(/P/,"p"),y=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",v=parseFloat(y.replace(/_/,".").replaceAll("_",""));rt.add(f,v),rt.add("ios",v)}rt("webkit")||(!i.includes("Gecko")||rt("wp")||rt("khtml")||rt("edge")||rt.add("mozilla",l),rt("mozilla")&&rt.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&rt.add("esri-mobile",e),i&&rt.add("esri-iPhone",i),rt.add("esri-geolocation",!!navigator.geolocation)}rt.add("esri-wasm","WebAssembly"in globalThis),rt.add("esri-performance-mode-frames-between-render",20),rt.add("esri-force-performance-mode",!1),rt.add("esri-shared-array-buffer",(()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e})),rt.add("wasm-simd",(()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))})),rt.add("esri-atomics","Atomics"in globalThis),rt.add("esri-workers","Worker"in globalThis),rt.add("web-feat:cache","caches"in globalThis),rt.add("esri-workers-arraybuffer-transfer",!rt("safari")||Number(rt("safari"))>=12),rt.add("workers-pool-size",8),rt.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),rt.add("featurelayer-simplify-payload-size-factors",[1,1,4]),rt.add("featurelayer-fast-triangulation-enabled",!0),rt.add("featurelayer-animation-enabled",!0),rt.add("featurelayer-snapshot-enabled",!0),rt.add("featurelayer-snapshot-initial-tolerance",0),rt.add("featurelayer-snapshot-point-min-threshold",8e4),rt.add("featurelayer-snapshot-point-max-threshold",4e5),rt.add("featurelayer-snapshot-multipoint-min-threshold",2e4),rt.add("featurelayer-snapshot-multipoint-max-threshold",1e5),rt.add("featurelayer-snapshot-polygon-min-threshold",1e3),rt.add("featurelayer-snapshot-polygon-max-threshold",2e3),rt.add("featurelayer-snapshot-polyline-min-threshold",1e3),rt.add("featurelayer-snapshot-polyline-max-threshold",2e3),rt.add("featurelayer-snapshot-max-vertex-count",25e4),rt.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),rt.add("featurelayer-snapshot-concurrency",4),rt.add("featurelayer-snapshot-coverage",.1),rt.add("featurelayer-query-max-depth",4),rt.add("featurelayer-query-pausing-enabled",!1),rt.add("featurelayer-query-tile-concurrency",4),rt.add("featurelayer-query-tile-max-features",6e5),rt.add("featurelayer-advanced-symbols",!1),rt.add("featurelayer-pbf",!0),rt.add("featurelayer-pbf-statistics",!1),rt.add("feature-layers-workers",!0),rt.add("feature-polyline-generalization-factor",1),rt.add("mapview-transitions-duration",200),rt.add("mapview-essential-goto-duration",200),rt.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),rt.add("mapserver-pbf-version-support",10.81),rt.add("mapservice-popup-identify-max-tolerance",20),rt.add("request-queue-concurrency-hosted",16),rt.add("request-queue-concurrency-non-hosted",4),rt.add("curve-densification-coarse-segments",128),rt.add("curve-densification-max-segments",2e3),rt.add("curve-densification-min-segments",3),rt.add("curve-densification-pixel-deviation",.5),rt.add("view-readyState-waiting-delay",1e3),rt.add("gradient-depth-bias",.01),rt.add("gradient-depth-epsilon",1e-8),rt.add("enable-feature:esri-compress-textures",!0),rt("host-webworker")||rt("host-browser")&&(rt.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),rt.add("esri-image-decode",(()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then((()=>{rt.add("esri-image-decode",!0,!0,!0)})).catch((()=>{rt.add("esri-image-decode",!1,!0,!0)}))}return!1})),rt.add("esri-url-encodes-apostrophe",(()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")})))})();function Dft(t){}function mD(t){return()=>t}function jft(t){return t}var is;let vD=(is=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*is._m}getInt(){return this._seed=(is._a*this._seed+is._c)%is._m,this._seed}getFloat(){return this.getInt()/(is._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const s=i-e;return e+this.getInt()/is._m*s}},is._m=2147483647,is._a=48271,is._c=0,is);const wD=1.5,Fft=1/wD,zft=.5;function Uft(t,e){return e?t.filter(((i,s,l)=>l.findIndex(e.bind(null,i))===s)):Array.from(new Set(t))}function bD(t,e,i,s,l,f,y){if(t==null&&s==null)return!0;e=Math.max(0,e),l=Math.max(0,l),i=Math.max(0,i<0?(t?.length??0)+i:i),f=Math.max(0,f<0?(s?.length??0)+f:f);const v=i-e;if(t==null||s==null||v!==f-l)return!1;if(y){for(let b=0;b<v;b++)if(!y(t[e+b],s[l+b]))return!1}else for(let b=0;b<v;b++)if(t[e+b]!==s[l+b])return!1;return!0}function Qd(t,e,i){return bD(t,0,t?.length??0,e,0,e?.length??0,i)}function lw(t,e,i){let s,l;return i?(s=e.filter((f=>!t.some((y=>i(y,f))))),l=t.filter((f=>!e.some((y=>i(y,f)))))):(s=e.filter((f=>!t.includes(f))),l=t.filter((f=>!e.includes(f)))),{added:s,removed:l}}function Gft(t){return t&&typeof t.length=="number"}let iE=class{constructor(){this.last=0}};const rE=new iE;function uw(t,e,i,s){s=s||rE;const l=Math.max(0,s.last-10);for(let y=l;y<i;++y)if(t[y]===e)return s.last=y,y;const f=Math.min(l,i);for(let y=0;y<f;++y)if(t[y]===e)return s.last=y,y;return-1}function _D(t,e,i,s){const l=t.length,f=uw(t,e,l,s);if(f!==-1)return t[f]=t[l-1],t.pop(),e}const bn=new Set;function xD(t,e,i=t.length,s=e.length,l,f){if(s===0||i===0)return i;bn.clear();for(let v=0;v<s;++v)bn.add(e[v]);l=l||rE;const y=Math.max(0,l.last-10);for(let v=y;v<i;++v)if(bn.has(t[v])&&(f?.push(t[v]),bn.delete(t[v]),t[v]=t[i-1],--i,--v,bn.size===0||i===0))return bn.clear(),i;for(let v=0;v<y;++v)if(bn.has(t[v])&&(f?.push(t[v]),bn.delete(t[v]),t[v]=t[i-1],--i,--v,bn.size===0||i===0))return bn.clear(),i;return bn.clear(),i}function qft(t,e,i){const s=t.length;if(e>=s)return t.slice();const l=sE(i),f=new Set,y=[];for(;y.length<e;){const v=Math.floor(l()*s);f.has(v)||(f.add(v),y.push(t[v]))}return y}function sE(t){return t?(q6.seed=t,()=>q6.getFloat()):Math.random}const q6=new vD;function Vft(t,e){if(!t)return t;const i=sE(e);for(let s=t.length-1;s>0;s--){const l=Math.floor(i()*(s+1)),f=t[s];t[s]=t[l],t[l]=f}return t}function t_(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function yh(t,e){return t!=null}const Hft=[];function Wft(t){return t instanceof ArrayBuffer}function e_(t){return t?.constructor?.name==="Int8Array"}function nE(t){return t?.constructor?.name==="Uint8Array"}function oE(t){return t?.constructor?.name==="Uint8ClampedArray"}function i_(t){return t?.constructor?.name==="Int16Array"}function aE(t){return t?.constructor?.name==="Uint16Array"}function r_(t){return t?.constructor?.name==="Int32Array"}function lE(t){return t?.constructor?.name==="Uint32Array"}function SD(t){return t?.constructor?.name==="Float16Array"}function h2(t){return t?.constructor?.name==="Float32Array"}function c2(t){return t?.constructor?.name==="Float64Array"}function TD(t){return"buffer"in t}const uE=1024;function Jft(t){return c2(t)||h2(t)||r_(t)||i_(t)||e_(t)}function Yft(t){return c2(t)||h2(t)}function Kft(t){return c2(t)?179769e303:SD(t)?65504:h2(t)?3402823e32:lE(t)?4294967295:aE(t)?65535:nE(t)||oE(t)?255:r_(t)?2147483647:i_(t)?32767:e_(t)?127:256}const Zft=-32768,Xft=-2147483648;function MD(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function yt(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=pE(t);if(e!=null)return e;if(Fg(t))return t.clone();if(hE(t))return t.map(yt);if(cE(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const s of Object.getOwnPropertyNames(t))i[s]=yt(t[s]);return i}function hw(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=pE(t);if(e!=null)return e;if(hE(t)){let s=!0;const l=t.map((f=>{const y=hw(f);return f!=null&&y==null&&(s=!1),y}));return s?l:null}if(Fg(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(cE(t))return null;const i=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const l=t[s],f=hw(l);if(l!=null&&f==null)return null;i[s]=f}return i}function Fg(t){return typeof t.clone=="function"}function hE(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function cE(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function V6(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function pE(t){if(e_(t)||nE(t)||oE(t)||i_(t)||aE(t)||r_(t)||lE(t)||h2(t)||c2(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,s]of t)e.set(i,yt(s));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(yt(i));return e}return null}function s_(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function fE(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Qd(t,e):t instanceof Set?e instanceof Set&&$D(t,e):t instanceof Map?e instanceof Map&&AD(t,e):!!V6(t)&&V6(e)&&ED(t,e))}function ED(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const s of i)if(t[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1;return!0}function $D(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function AD(t,e){if(t.size!==e.size)return!1;for(const[i,s]of t){const l=e.get(i);if(l!==s||l===void 0&&!e.has(i))return!1}return!0}function ID(t,e,i=!1){return yE(t,e,i)}function p2(t,e){if(e!=null)return e[t]||dE(t.split("."),!1,e)}function Ah(t,e,i){const s=t.split("."),l=s.pop(),f=dE(s,!0,i);f&&l&&(f[l]=e)}function H6(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let s=0;s<t.length;s++)if(H6(t[s],i[s]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(H6(t[i],e[i]))return!0;return!1}return t!==e}function dE(t,e,i){let s=i;for(const l of t){if(s==null)return;if(!(l in s)){if(!e)return;s[l]={}}s=s[l]}return s}function yE(t,e,i){return e?Object.keys(e).reduce(((s,l)=>{if(l==="__proto__")return s;let f=s[l],y=e[l];return f===y?s:f===void 0?(s[l]=yt(y),s):(Array.isArray(y)||Array.isArray(s)?(f=f?Array.isArray(f)?s[l]=f.slice():s[l]=[f]:s[l]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach((v=>{f.includes(v)||f.push(v)})):s[l]=y.slice())):y&&typeof y=="object"?s[l]=yE(f,y,i):s.hasOwnProperty(l)&&!e.hasOwnProperty(l)||(s[l]=y),s)}),t||{}):t}const pe={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(ID(pe,globalThis.esriConfig,!0),delete pe.has),!pe.assetsPath){{const t="4.33";pe.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}pe.defaultAssetsPath=pe.assetsPath}const PD=/\{([^}]+)\}/g;function W6(t){return t??""}function n_(t,e){return e?t.replaceAll(PD,typeof e=="object"?(i,s)=>W6(p2(s,e)):(i,s)=>W6(e(s))):t}function Qft(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(i=>e?.includes(i)?i:`\\${i}`))}function gE(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let J6;function t0t(t){return J6??=new DOMParser,J6.parseFromString(t||"","text/html").body.innerText||""}function e0t(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function i0t(t,...e){let i=t[0];for(let s=0;s<e.length;++s)i+=e[s]+t[s+1];return i}const Y6={info:0,warn:1,error:2,none:3};var $i;let At=($i=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,$i._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=$i.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,$i._loggers.get(e)||new $i({module:e})}_log(e,i,...s){if(this._matchLevel(e)){if(i!=="always"&&!$i._throttlingDisabled){const l=kD(s),f=this._loggedMessages[e].get(l);if(i==="once"&&f!=null||i==="oncePerTick"&&f&&f>=$i._tickCounter)return;this._loggedMessages[e].set(l,$i._tickCounter),$i._scheduleTickCounterIncrement()}for(const l of pe.log.interceptors)if(l(e,this.module,...s))return;this._inheritedWriter()(e,this.module,...s)}}_parentWithMember(e,i){let s=this;for(;s!=null;){const l=s[e];if(l!=null)return l;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",OD)}_matchLevel(e){const i=pe.log.level||"warn";return Y6[this._parentWithMember("level",i)]<=Y6[e]}static _scheduleTickCounterIncrement(){$i._tickCounterScheduled||($i._tickCounterScheduled=!0,Promise.resolve().then((()=>{$i._tickCounter++,$i._tickCounterScheduled=!1})))}},$i._loggers=new Map,$i._tickCounter=0,$i._tickCounterScheduled=!1,$i._throttlingDisabled=!1,$i);function OD(t,e,...i){console[t](`[${e}]`,...i)}function kD(...t){return gE(JSON.stringify(t,(i,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]"))}function RD(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((i,s)=>s===""?"$":(p2(s,e)??"").toString()))}let mE=class{constructor(e,i,s=void 0){this.name=e,this.details=s,this.message=(i&&RD(i,s))??""}toString(){return"["+this.name+"]: "+this.message}},ct=class vE extends mE{constructor(e,i,s){super(e,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return yt(i)}catch{return"[object]"}})))}}catch(e){throw At.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new vE(e.name,e.message,e.details)}};ct.prototype.type="error";function zg(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const CD=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ND={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function K6(t){const e=t?.match(CD);if(!e)return null;const[,i,s,l]=e;if(!i)return null;let f=null,y=null,v=null;const{devext:b,qaext:S,www:A}=ND;if(s)if(f=i,l)switch(l.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:v}=b);break;case"qa":({customBaseUrl:y,portalHostname:v}=S);break;default:return null}else({customBaseUrl:y,portalHostname:v}=A);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:v}=b);break;case"qaext":({customBaseUrl:y,portalHostname:v}=S);break;case"www":({customBaseUrl:y,portalHostname:v}=A);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:v,urlKey:f}}function wE(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function bE(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,s=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):s.test(t)&&(t=t.replace(s,"https://qaext.arcgis.com")),t}function _E(t){const e=atob(t),i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i.buffer}function LD(t){const e=new Uint8Array(t);let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return btoa(i)}const DD=()=>At.getLogger("esri.core.urlUtils"),Bp=pe.request,Z6="esri/config: esriConfig.request.proxyUrl is not set.",xE=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,SE=/^\s*http:/i,jD=/^\s*https:/i,FD=/^\s*file:/i,TE=/:\d+$/,zD=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,UD=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),GD=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let ba=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(UD);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(GD),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const N1={},BD=new ba(pe.applicationUrl);let Mr=BD;const qD=VD();let o_=qD;const a_=()=>Mr,n0t=()=>o_;function VD(){const t=Mr.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Mr.scheme}://${Mr.host}${Mr.port!=null?`:${Mr.port}`:""}`}${e}`}function qr(t){if(!t)return null;const e={path:null,query:null},i=new ba(t),s=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,s),e.query=l_(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function l_(t){const e=t.split("&"),i={};for(const s of e){if(!s)continue;const l=s.indexOf("=");let f,y;l<0?(f=decodeURIComponent(s),y=""):(f=decodeURIComponent(s.slice(0,l)),y=decodeURIComponent(s.slice(l+1)));let v=i[f];typeof v=="string"&&(v=i[f]=[v]),Array.isArray(v)?v.push(y):i[f]=y}return i}function xd(t,e){return t?Object.keys(t).map((i=>{const s=t[i];if(s==null)return"";const l=encodeURIComponent(i)+"=";return Array.isArray(s)?s.map((f=>zg(f)?l+encodeURIComponent(JSON.stringify(f)):l+encodeURIComponent(f))).join("&"):zg(s)?l+encodeURIComponent(JSON.stringify(s)):l+encodeURIComponent(s)})).filter((i=>i)).join("&"):""}function ME(t=!1){let e,i=Bp.proxyUrl;if(typeof t=="string"){e=XD(t);const s=f2(t);s&&(i=s.proxyUrl)}else e=!!t;if(!i)throw DD().warn(Z6),new ct("urlUtils:proxy-not-set",Z6);return e&&pw()&&(i=f_(i)),qr(i)}function o0t(t,e=!1){const i=f2(t);let s,l;if(i){const f=u_(i.proxyUrl);s=f.path,l=f.query?l_(f.query):null}else if(e){const f=ME(t);s=f.path,l=f.query}if(s){const f=qr(t);t=s+"?"+f.path;const y=xd({...l,...f.query});y&&(t=`${t}?${y}`)}return t}const bf={path:"",query:""};function u_(t){const e=t.indexOf("?");return e!==-1?(bf.path=t.slice(0,e),bf.query=t.slice(e+1)):(bf.path=t,bf.query=null),bf}function EE(t){return t=(t=Gg(t=IE(t=u_(t).path),!0)).toLowerCase()}function HD(t){const e={proxyUrl:t.proxyUrl,urlPrefix:EE(t.urlPrefix)},i=Bp.proxyRules,s=e.urlPrefix;let l=i.length;for(let f=0;f<i.length;f++){const y=i[f].urlPrefix;if(s.indexOf(y)===0){if(s.length===y.length)return-1;l=f;break}y.indexOf(s)===0&&(l=f+1)}return i.splice(l,0,e),l}function f2(t){const e=Bp.proxyRules,i=EE(t);for(let s=0;s<e.length;s++)if(i.indexOf(e[s].urlPrefix)===0)return e[s]}function WD(t,e){if(!t||!e)return!1;t=Ug(t),e=Ug(e);const i=K6(t),s=K6(e);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&gh(t,e,!0)}function $E(t,e){return t=Ug(t),e=Ug(e),Gg(t)===Gg(e)}function Ug(t){const e=(t=zn(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function cw(t,e=Bp.interceptors){const i=s=>s instanceof RegExp?s.test(t):typeof s=="string"?t.startsWith(s):s==null;if(e){for(const s of e)if(Array.isArray(s.urls)){if(s.urls.some(i))return s}else if(i(s.urls))return s}return null}function gh(t,e,i=!1){if(!t||!e)return!1;const s=dw(t),l=dw(e);return!(!i&&s.scheme!==l.scheme)&&s.host!=null&&l.host!=null&&s.host.toLowerCase()===l.host.toLowerCase()&&s.port===l.port}function h_(t){if(typeof t=="string"){if(!hs(t))return!0;t=dw(t)}if(gh(t,Mr))return!0;const e=Bp.trustedServers||[];for(let i=0;i<e.length;i++){const s=JD(e[i]);for(let l=0;l<s.length;l++)if(gh(t,s[l]))return!0}return!1}function JD(t){return N1[t]||(p_(t)||qn(t)?N1[t]=[new ba(Xs(t))]:N1[t]=[new ba(`http://${t}`),new ba(`https://${t}`)]),N1[t]}function Xs(t,e=o_,i){return qn(t)?i?.preserveProtocolRelative?t:Mr.scheme==="http"&&Mr.authority===As(t).slice(2)?`http:${t}`:`https:${t}`:p_(t)?t:t1(t[0]==="/"?ij(e):e,t)}function c_(t,e=o_,i){if(t==null||!hs(t))return t;const s=zn(t),l=s.toLowerCase(),f=zn(e).toLowerCase().replace(/\/+$/,""),y=i?zn(i).toLowerCase().replace(/\/+$/,""):null;if(y&&f.indexOf(y)!==0)return t;const v=(P,k,C)=>(C=P.indexOf(k,C))===-1?P.length:C;let b=v(l,"/",l.indexOf("//")+2),S=-1;for(;l.slice(0,b+1)===f.slice(0,b)+"/"&&(S=b+1,b!==l.length);)b=v(l,"/",b+1);if(S===-1||y&&S<y.length)return t;t=s.slice(S);const A=f.slice(S-1).replaceAll(/[^/]+/g,"").length;if(A>0)for(let P=0;P<A;P++)t=`../${t}`;else t=`./${t}`;return t}function zn(t){return t=nj(t=sj(t=rj(t=Xs(t=t.trim()))))}function t1(...t){const e=t.filter(yh);if(!e?.length)return;const i=[];if(hs(e[0])){const l=e[0],f=l.indexOf("//");f!==-1&&(i.push(l.slice(0,f+1)),tj(e[0])&&(i[0]+="/"),e[0]=l.slice(f+2))}else e[0][0]==="/"&&i.push("");const s=e.reduce(((l,f)=>f?l.concat(f.split("/")):l),[]);for(let l=0;l<s.length;l++){const f=s[l];f===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!f&&l===s.length-1||f&&(f!=="."||i.length===0))&&i.push(f)}return i.join("/")}function As(t,e=!1){if(t==null||qp(t)||Ih(t))return null;let i=t.indexOf("://");if(i===-1&&qn(t))i=2;else{if(i===-1)return null;i+=3}const s=t.indexOf("/",i);return s!==-1&&(t=t.slice(0,s)),e&&(t=Gg(t,!0)),t}function hs(t){return qn(t)||p_(t)}function qp(t){return t!=null&&t.slice(0,5)==="blob:"}function Ih(t){return t!=null&&t.slice(0,5)==="data:"}function YD(t){const e=dp(t);return e?.isBase64?_E(e.data):null}function a0t(t){return LD(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const KD=/^data:(.*?)(;base64)?,(.*)$/;function dp(t){const e=t.match(KD);if(!e)return null;const[,i,s,l]=e;return{mediaType:i,isBase64:!!s,data:l}}function AE(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function ZD(t){return(await fetch(t)).blob()}function l0t(t){const e=YD(t);if(!e)return null;const i=dp(t);return new Blob([e],{type:i.mediaType})}function qn(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function p_(t){return t!=null&&xE.test(t)}function XD(t){return t!=null&&jD.test(t)||Mr.scheme==="https"&&qn(t)}function QD(t){return t!=null&&SE.test(t)||Mr.scheme==="http"&&qn(t)}function tj(t){return t!=null&&FD.test(t)}function f_(t){return qn(t)?`https:${t}`:t.replace(SE,"https:")}function ej(){return Mr.scheme==="http"}function pw(){return Mr.scheme==="https"}function Gg(t,e=!1){return qn(t)?t.slice(2):(t=t.replace(xE,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function ij(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function u0t(t){let e=0;if(hs(t)){const s=t.indexOf("//");s!==-1&&(e=s+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function h0t(t,e){if(!t)return"";const i=qr(t).path.replace(/\/+$/,""),s=i.slice(i.lastIndexOf("/")+1);if(!e?.length)return s;const l=new RegExp(`\\.(${e.join("|")})$`,"i");return s.replace(l,"")}function IE(t){return t.endsWith("/")?t:`${t}/`}function PE(t){return t.replace(/\/+$/,"")}function rj(t){if(/^https?:\/\//i.test(t)){const e=u_(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function sj(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function nj(t){const e=Bp.httpsDomains;if(!QD(t))return t;const i=t.indexOf("/",7);let s;if(s=i===-1?t:t.slice(0,i),s=s.toLowerCase().slice(7),TE.test(s)){if(!s.endsWith(":80"))return t;s=s.slice(0,-3),t=t.replace(":80","")}return ej()&&s===Mr.authority&&!zD.test(t)||(pw()&&s===Mr.authority||e&&e.some((l=>s===l||s.endsWith(`.${l}`)))||pw()&&!f2(t))&&(t=f_(t)),t}function fw(t,e,i){if(!(e&&i&&t&&hs(t)))return t;const s=t.indexOf("//"),l=t.indexOf("/",s+2),f=t.indexOf(":",s+2),y=Math.min(l<0?t.length:l,f<0?t.length:f);return t.slice(s+2,y).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,s+2)}${i}${t.slice(y)}`}function oj(t,e){const i=new URL(t);return i.host=e,i.port&&!TE.test(e)&&(i.port=""),i.toString()}function c0t(t){return new URL(t).host}function dw(t){return typeof t=="string"?new ba(Xs(t)):(t.scheme||(t.scheme=Mr.scheme),t)}function p0t(t){return lj.test(t)}function OE(t,e){const i=qr(t),s=Object.keys(i.query||{});return s.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function aj(t,e,i){const s=qr(t),l=s.query||{};return l[e]=String(i),`${s.path}?${xd(l)}`}function kv(t,e){if(!e)return t;const i=qr(t),s=i.query||{};for(const[f,y]of Object.entries(e))y!=null&&(s[f]=y);const l=xd(s);return l?`${i.path}?${l}`:i.path}function kE(t){if(t==null)return null;const e=t.match(RE);return e?e[2]:null}function X6(t){if(t==null)return null;const e=t.match(RE);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function f0t(t){return typeof t=="string"?dp(t)??{data:t}:new Promise(((e,i)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(dp(s.result)),s.onerror=l=>i(l)}))}const RE=/([^.]*)\.([^/]*)$/,lj=/(^data:image\/svg|\.svg$)/i,CE="20250917",NE="2136612b0849a0d597a86ff9f672ef9f9b4016c4";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const uj="4.33";let xe,d_=uj;d_="4.33.14";function d0t(t){xe=t}function y0t(t){const e=xe?.findCredential(t);return e?.token?aj(t,"token",e.token):t}rt("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),rt("host-webworker");function hj(t,e){for(const i of t.values())if(e(i))return!0;return!1}function g0t(t,e){for(const i of t.values())if(e(i))return i;return null}function e1(t,e,i){const s=t.get(e);if(s!==void 0)return s;const l=i();return t.set(e,l),l}function m0t(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const cj={remove:()=>{}};function fe(t){return t?{remove(){t&&(t(),t=void 0)}}:cj}function LE(t){t.forEach((e=>e?.remove()))}function Xn(t){LE(t),t.length=0}function Ph(t){return fe((()=>LE(t)))}function v0t(t){return fe((()=>t()?.remove()))}function w0t(t){return fe((()=>t?.abort()))}function b0t(t){return fe(t!=null?()=>t.destroy():void 0)}function pj(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function _0t(t){pj(t)&&t.remove()}function x0t(t){return{[Symbol.dispose](){t.remove()}}}function fj(t){return{setTimeout:(e,i)=>{const s=t.setTimeout(e,i);return fe((()=>t.clearTimeout(s)))}}}const Vp=fj(globalThis);function d2(t){return dj(t)||DE(t)}function dj(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function DE(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function Hp(t,e,i){if(!d2(t))throw new TypeError("target is not a Evented or EventTarget object");return DE(t)?yj(t,e,i):t.on(e,i)}function yj(t,e,i,s){if(Array.isArray(e)){const l=e.slice();for(const f of l)t.addEventListener(f,i,s);return fe((()=>{for(const f of l)t.removeEventListener(f,i,s)}))}return t.addEventListener(e,i,s),fe((()=>t.removeEventListener(e,i,s)))}function jE(t,e,i){if(!d2(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const s=Hp(t,e,(l=>{s.remove(),i.call(t,l)}));return s}function FE(t,e){if(t==null)throw new Error(e??"value is None")}function ze(t){return t?.destroy(),null}function S0t(t){return t?.dispose(),null}function ri(t){return t?.remove(),null}function _a(t){return t?.abort(),null}function T0t(t){return t?.release(),null}function gj(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function mj(t,e){let i;return t.some(((s,l)=>(i=e(s,l),i!=null))),i??void 0}function Be(t="Aborted"){return new ct("AbortError",t)}function Ce(t,e="Aborted"){if(Os(t))throw Be(e)}function i1(t){return t instanceof AbortSignal?t:t?.signal??void 0}function Os(t){const e=i1(t);return e!=null&&e.aborted}function ul(t){if(kr(t))throw t}function Q6(t){if(!kr(t))throw t}function Vn(t,e){const i=i1(t);if(i!=null){if(!i.aborted)return jE(i,"abort",(()=>e()));e()}}function y_(t,e){const i=i1(t);if(i!=null)return Ce(i),jE(i,"abort",(()=>e(Be())))}function zE(t,e){return i1(e)==null?t:new Promise(((i,s)=>{let l=Vn(e,(()=>s(Be())));const f=()=>{l=ri(l)};t.then(f,f),t.then(i,s)}))}function kr(t){return t?.name==="AbortError"}async function Sd(t){try{return await t}catch(e){if(!kr(e))throw e;return}}async function g_(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),s=i.map((y=>t[y])),l=await g_(s),f={};return i.map(((y,v)=>f[y]=l[v])),f}const e=t;return Promise.allSettled(e).then((i=>Array.from(e,((s,l)=>{const f=i[l];return f.status==="fulfilled"?{promise:s,value:f.value}:{promise:s,error:f.reason}}))))}async function vj(t){return(await Promise.allSettled(t)).filter((e=>e.status==="fulfilled")).map((e=>e.value))}async function M0t(t){return(await Promise.allSettled(t)).filter((e=>e.status==="rejected")).map((e=>e.reason))}function UE(t,e=void 0,i){const s=new AbortController;return Vn(i,(()=>s.abort())),new Promise(((l,f)=>{let y=setTimeout((()=>{y=0,l(e)}),t);Vn(s,(()=>{y&&(clearTimeout(y),f(Be()))}))}))}function E0t(t,e,i,s){const l=i&&"abort"in i?i:null;s!=null||l||(s=i);let f=setTimeout((()=>{f=0,l?.abort()}),e);const y=()=>s||new ct("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then((v=>{if(f===0)throw y();return clearTimeout(f),v}),(v=>{throw clearTimeout(f),f===0?y():v}))}function wj(t,e){const i=new AbortController,s=setTimeout((()=>i.abort()),e);return Vn(t,(()=>{i.abort(),clearTimeout(s)})),{...t,signal:i.signal}}function Oo(t){return t&&typeof t.then=="function"}function yw(t){return Oo(t)?t:Promise.resolve(t)}function GE(t,e=-1){let i,s,l,f,y=null;const v=(...b)=>{if(i){s=b,f&&f.reject(Be()),f=ln();const k=f.promise;if(y){const C=y;y=null,C.abort()}return k}if(l=f||ln(),f=null,e>0){const k=new AbortController;i=yw(t(...b,k.signal));const C=i;UE(e).then((()=>{i===C&&(f?k.abort():y=k)}))}else i=1,i=yw(t(...b));const S=()=>{const k=s;s=l=i=y=null,k!=null&&v(...k)},A=i,P=l;return A.then(S,S),A.then(P.resolve,P.reject),P.promise};return v}function ln(){let t,e;const i=new Promise(((l,f)=>{t=l,e=f})),s=l=>{t(l)};return s.resolve=l=>t(l),s.reject=l=>e(l),s.timeout=(l,f)=>Vp.setTimeout((()=>s.reject(f)),l),s.promise=i,s}function $0t(t,e){e.then(t.resolve,t.reject)}async function t7(t){await Promise.resolve(),Ce(t)}function Wp(t,e){const i=e?.url?.path;if(t&&i&&(t=Xs(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=c_(t,e.portalItem.itemUrl);s!=null&&bj.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return(t=gw(t,e?.portal))&&g2.test(t)?m_(t):t}function yp(t,e,i=gp.YES){if((t=t&&g2.test(t)?HE(t):t)==null)return t;!hs(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let s=Xs(t);if(e){const l=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(l){const f=gw(l,e.portal),y=gw(s,e.portal);s=c_(y,f,f),s!=null&&s!==y&&s!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=VE(s,e?.portal),hs(s)&&(s=zn(s)),e?.resources&&e?.portalItem&&!hs(s)&&!Ih(s)&&i===gp.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(s),compress:!1}),s}function y2(t,e,i){return Wp(t,i)}function mh(t,e,i,s){const l=yp(t,s);l!==void 0&&(e[i]=l)}const g2=/\/items\/([^/]+)\/resources\/(.*)/,bj=/^\.\/resources\//;function BE(t){return(t?.match(g2)??null)?.[1]??null}function qE(t){const e=t?.match(g2)??null;if(e==null)return null;const i=e[2],s=i.lastIndexOf("/");if(s===-1){const{path:y,extension:v}=X6(i);return{prefix:null,filename:y,extension:v}}const{path:l,extension:f}=X6(i.slice(s+1));return{prefix:i.slice(0,s),filename:l,extension:f}}function VE(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?fw(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function gw(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,s=a_();return gh(s,`${s.scheme}://${i}`)?fw(t,e.portalHostname,i):fw(t,i,e.portalHostname)}function m_(t){if(!t)return t||null;let e=t;return e&&xe&&!xe.findCredential(e)&&(e=bE(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function HE(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&xe&&!xe.findCredential(e)&&(e=bE(e)),e}var gp;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(gp||(gp={}));const _j=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return gp},ensureMainOnlineDomain:VE,fromCDNUrl:HE,fromJSON:Wp,itemIdFromResourceUrl:BE,prefixAndFilenameFromResourceUrl:qE,read:y2,toCDNUrl:m_,toJSON:yp,write:mh},Symbol.toStringTag,{value:"Module"})),WE={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},JE=Object.values(WE),YE=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${JE.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),xj=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${JE.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Sj=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function A0t(t){return YE.test(t)}function r1(t){if(t==null)return null;const e=qr(t),i=e?.path.match(YE)||e?.path.match(xj);if(!i)return null;const[,s,l,f,y]=i,v=l.indexOf("/");return{title:KE(v!==-1?l.slice(v+1):l),serverType:WE[f.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:s}}}function Tj(t){const e=qr(t).path.match(Sj);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function KE(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function I0t(t,e){const i=[];if(t){const s=r1(t);s!=null&&s.title&&i.push(s.title)}if(e){const s=KE(e);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function e7(t){let e=As(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function P0t(t,e){return t&&PE(OE(t,e))}function O0t(t){let{url:e}=t;if(!e)return{url:e};e=OE(e,t.logger);const i=qr(e),s=r1(i.path);let l;if(s!=null)s.sublayer!=null&&t.layer.layerId==null&&(l=s.sublayer),e=s.url.path;else if(t.nonStandardUrlAllowed){const f=Tj(i.path);f!=null&&(e=f.serviceUrl,l=f.sublayerId)}return{url:PE(e),layerId:l}}function k0t(t,e,i,s,l){mh(e,s,"url",l),s.url&&t.layerId!=null&&(s.url=t1(s.url,i,t.layerId.toString()))}function R0t(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),s=e.includes("/mapserver/wmsserver"),l=e.includes("/imageserver/wmsserver"),f=e.includes("/wmsserver");return i&&(s||l||f)}const Mj=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function v_(t){if(!w_(t))return null;const e=s=>s instanceof RegExp?s.test(t):typeof s=="string"&&t.startsWith(s),i=pe.apiKeys;if(Array.isArray(i.scopes)){for(const s of i.scopes)if(Array.isArray(s.urls)){if(s.urls.some(e))return s.token}else if(e(s.urls))return s.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:pe.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?pe.apiKey:null}function mw(){return pe.apiKey!=null||pe.apiKeys.basemapStyles!=null}function Ej(t,e){return e?w_(t):v_(t)!=null}function w_(t){const e=As(t,!0);return!!e&&!Mj.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function $j(t,e,i=!1,s){return new Promise(((l,f)=>{if(Os(s))return void f(i7());let y=()=>{S(),f(new Error(`Unable to load ${e}`))},v=()=>{const A=t;S(),l(A)},b=()=>{if(!t)return;const A=t;S(),A.src="",f(i7())};const S=()=>{rt("esri-image-decode")||(t.removeEventListener("error",y),t.removeEventListener("load",v)),y=null,v=null,t=null,s?.removeEventListener("abort",b),b=null,i&&URL.revokeObjectURL(e)};s?.addEventListener("abort",b),rt("esri-image-decode")?t.decode().then(v,y):(t.addEventListener("error",y),t.addEventListener("load",v))}))}function i7(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const ZE="Timeout exceeded";function Aj(){return new Error(ZE)}function C0t(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===ZE}function Ij(t){pe.request.crossOriginNoCorsDomains||(pe.request.crossOriginNoCorsDomains={});const e=pe.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[As(i)??""]=0:(e[As("http://"+i)??""]=0,e[As("https://"+i)??""]=0)}function Pj(t){const e=pe.request.crossOriginNoCorsDomains;if(e){let i=As(t);if(i)return i=i.toLowerCase(),!gh(i,a_())&&e[i]<Date.now()-36e5}return!1}async function Oj(t){const e=qr(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=pe.request.crossOriginNoCorsDomains,s=As(t);i&&s&&(i[s.toLowerCase()]=Date.now())}const vw=new Map;function kj(t,e){const i=e?.preferredHost;if(!i||gh(t,`https://${i}`,!0))return;const s=r1(t);if(!s||s.serverType!=="FeatureServer"||wE(t))return;const l=s.url.path.toLowerCase();vw.has(l)||vw.set(l,i)}function r7(t){const e=r1(t)?.url.path.toLowerCase();if(!e)return t;const i=vw.get(e);return i?oj(t,i):t}async function ii(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=l_(e.query.toString().replaceAll("+"," ")));const i=Ih(t),s=qp(t);s||i||(t=zn(t));const l={url:t,requestOptions:{...e}},f=C=>({data:C,getAllHeaders:mp,getHeader:mp,httpStatus:200,requestOptions:l.requestOptions,url:l.url}),y=cw(t,Ys.internalInterceptors);if(y){const C=await n7(y,l);if(C!=null)return f(C)}let v=cw(t);if(v){const C=await n7(v,l);if(C!=null)return f(C);v.after||v.error||(v=null)}if(t=l.url,(e=l.requestOptions).responseType==="image"&&(rt("host-webworker")||rt("host-node")))throw Un("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),l);if(e.method==="head"){if(e.body)throw Un("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),l);if(i||s)throw Un("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),l)}if(await Dj(),Bg)return Bg.execute(t,e);const b=new AbortController,S=Vn(e,(()=>b.abort())),A={controller:b,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:v,params:l,redoRequest:!1,useIdentity:Ys.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},P=e.useRequestQueue?Gj(A):bw(A),k=await P.finally((()=>S?.remove()));return v?.after?.(k),k}let Bg,XE=!1;const Ys=pe.request,QE="FormData"in globalThis,Rj=new Set([499,498,403,401]),Cj=new Set(["COM_0056","COM_0057","SB_0008"]),Nj=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],mp=()=>null,qg=Symbol();function Lj(t){const e=As(t);e&&!ii._corsServers.includes(e)&&ii._corsServers.push(e)}function s7(t){const e=As(t);return!e||e.endsWith(".arcgis.com")||ii._corsServers.includes(e)||h_(e)}function Un(t,e,i,s){let l;const f={url:i.url,requestOptions:i.requestOptions,getAllHeaders:mp,getHeader:mp,ssl:!1};if(e instanceof ct)return e.details?(e.details=yt(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=f,e;if(e){const y=s&&(()=>Array.from(s.headers)),v=s&&(A=>s.headers.get(A)),b=s?.status,S=e.message;S&&(l=S),y&&v&&(f.getAllHeaders=y,f.getHeader=v),f.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||b||0,f.subCode=e.subcode,f.messageCode=e.messageCode,typeof e.details=="string"?(f.messages=[e.details],l??=e.details):(f.messages=e.details,l??=f.messages?.[0]),f.raw=qg in e?e[qg]:e}return l??="Error",kr(e)?Be():new ct(t,l,f)}async function Dj(){rt("host-webworker")&&(!Bg&&globalThis.invokeStaticMessage?Bg=await mt(()=>import("./request-9yg7YijW.js"),__vite__mapDeps([0,1,2,3,4])):XE=!0)}async function ww(){xe||await mt(()=>import("./IdentityManager-Cvzhao3G.js"),__vite__mapDeps([5,1,2,3,6,4]))}async function jj(t){const e=t.params.url,i=t.params.requestOptions,s=t.controller.signal,l=i.body;let f=null,y=null;if(QE&&"HTMLFormElement"in globalThis&&(l instanceof FormData?f=l:l instanceof HTMLFormElement&&(f=new FormData(l))),typeof l=="string"&&(y=l),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ys.priority,redirect:"follow",signal:s},(f||y)&&(t.fetchOptions.body=f||y),(XE||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||f?.get("token")),!t.hasToken){const v=v_(e);v&&(i.query??={},i.query.token=v,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!t$(e)&&!Os(s)){let v;i.authMode==="immediate"?(await ww(),v=await xe.getCredential(e,{signal:s})):i.authMode==="no-prompt"?(await ww(),v=await xe.getCredential(e,{prompt:!1,signal:s}).catch((()=>{}))):xe&&(v=xe.findCredential(e)),v&&(t.credential=v,t.credentialToken=v.token,t.useSSL=!!v.ssl)}}function t$(t){return Nj.some((e=>e.test(t)))}async function Fj(t){let e=t.params.url,i=r7(e);const s=t.params.requestOptions,l=t.fetchOptions??{},f=qp(e)||Ih(e),y=s.responseType||"json",v=f?0:s.timeout!=null?s.timeout:Ys.timeout;let b=!1;if(!f){t.useSSL&&(e=f_(e));let C={...s.query};t.credentialToken&&(C.token=t.credentialToken);let L=xd(C);rt("esri-url-encodes-apostrophe")&&(L=L.replaceAll("'","%27"));const F=i.length+1+L.length;let q;b=s.method==="delete"||s.method==="post"||s.method==="put"||!!s.body||F>Ys.maxUrlLength;const H=s.useProxy||!!f2(e);if(H){const J=ME(e);q=J.path,!b&&q.length+1+F>Ys.maxUrlLength&&(b=!0),J.query&&(C={...J.query,...C})}if(l.method==="HEAD"&&(b||H)){if(b)throw F>Ys.maxUrlLength?Un("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Un("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(H)throw Un("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}b?(l.method=s.method==="delete"?"DELETE":s.method==="put"?"PUT":"POST",s.body?e=kv(e,C):(l.body=xd(C),l.headers||(l.headers={}),l.headers["Content-Type"]="application/x-www-form-urlencoded")):e=kv(e,C),H&&(t.useProxy=!0,e=`${q}?${e}`),C.token&&QE&&l.body instanceof FormData&&!wE(e)&&l.body.set("token",C.token),s.hasOwnProperty("withCredentials")?t.withCredentials=s.withCredentials:gh(e,a_())||(h_(e)||xe&&xe.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(l.credentials="include",Pj(e)&&await Oj(b?kv(e,C):e)),i=r7(e)}let S,A,P=0,k=!1;v>0&&(P=setTimeout((()=>{k=!0,t.controller.abort()}),v));try{if(s.responseType==="native-request-init")A=l,A.url=i,s.signal?A.signal=s.signal:delete A.signal;else if(s.responseType!=="image"||l.cache!=="default"||l.method!=="GET"||b||zj(s.headers)||!f&&!t.useProxy&&Ys.proxyUrl&&!s7(e)){if(ii._beforeFetch&&await ii._beforeFetch(e,l),S=await fetch(i,l),ii._afterFetch&&await ii._afterFetch(S),t.useProxy||Lj(e),s.responseType==="native")A=S;else if(l.method!=="HEAD")if(S.ok){switch(y){case"array-buffer":A=await S.arrayBuffer();break;case"blob":case"image":A=await S.blob();break;default:A=await S.text()}if(P&&(clearTimeout(P),P=0),y==="json"||y==="xml"||y==="document")if(A)switch(y){case"json":A=JSON.parse(A);break;case"xml":A=o7(A,"application/xml");break;case"document":A=o7(A,"text/html")}else A=null;if(A){if(y==="array-buffer"||y==="blob"){const C=S.headers.get("Content-Type");if(C&&/application\/json|text\/plain/i.test(C)&&A[y==="blob"?"size":"byteLength"]<=750)try{const L=await new Response(A).json();L.error&&(A=L)}catch{}}y==="image"&&A instanceof Blob&&(A=await a7(URL.createObjectURL(A),t,!0))}}else{A=await S.text();try{A=JSON.parse(A)}catch{}}}else A=await a7(i,t)}catch(C){if(C.name==="AbortError")throw k?Aj():Be("Request canceled");if(!(!S&&C instanceof TypeError&&Ys.proxyUrl)||s.body||s.method==="delete"||s.method==="head"||s.method==="post"||s.method==="put"||t.useProxy||s7(e))throw C;t.redoRequest=!0,HD({proxyUrl:Ys.proxyUrl,urlPrefix:As(e)??""})}finally{P&&clearTimeout(P)}return[S,A]}async function n7(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,s;try{s=await t.before(e)}catch(l){i=Un("request:interceptor",l,e)}if((s instanceof Error||s instanceof ct)&&(i=Un("request:interceptor",s,e)),i)throw t.error&&t.error(i),i;return s}}function zj(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function o7(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}ii._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ii._beforeFetch=void 0,ii._afterFetch=void 0;const Uj=new Map;async function Gj(t){const e=qj(t.params.url);if(!e)return bw(t);const{QueueProcessor:i}=await mt(()=>import("./QueueProcessor-kOJ7HYBn.js"),__vite__mapDeps([7,1,2,3,4]));return e1(Uj,e.origin,(()=>{const l=e.isHosted?rt("request-queue-concurrency-hosted"):rt("request-queue-concurrency-non-hosted");return new i({concurrency:l,process:f=>{if(Os(f.params.requestOptions))throw Un("",Be("Request canceled"),f.params);return bw(f)}})})).push(t)}async function bw(t){let e,i;await jj(t);try{do[e,i]=await Fj(t);while(!await Bj(t,e,i))}catch(f){const y=Un("request:server",f,t.params,e);throw y.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(y),y}const s=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!h_(s)){const f=As(s,!0);f&&Ys.trustedServers.push(f)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Ij(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&kj(s,i);const l=t.credential;if(l&&xe){let y=xe.findServerInfo(l.server)?.owningSystemUrl;if(y){y=y.replace(/\/?$/,"/sharing");const v=xe.findCredential(y,l.userId);v&&xe._getIdenticalSvcIdx(y,v)===-1&&v.resources.unshift(y)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):mp,getHeader:e?f=>e.headers.get(f):mp,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function Bj(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const s=t.params.requestOptions;if(!e||s.responseType==="native"||s.responseType==="native-request-init")return!0;let l,f;if(i&&(i.error&&typeof i.error=="object"?l=i.error:i.status==="error"&&Array.isArray(i.messages)&&(l={...i},l[qg]=i,l.details=i.messages)),!l&&!e.ok)throw l=new Error(`Unable to load ${e.url} status: ${e.status}`),l[qg]=i,l;let y,v=null;l&&(f=Number(l.code),v=l.hasOwnProperty("subcode")?Number(l.subcode):null,y=l.messageCode,y=y?.toUpperCase());const b=s.authMode;if(f===403&&(v===4||l.message?.toLowerCase().includes("ssl")&&!l.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(b!=="no-prompt"||f===498)&&f!==void 0&&Rj.has(f)&&!t$(t.params.url)&&(f!==403||(!y||!Cj.has(y))&&(v==null||v===2&&t.credentialToken))){await ww();try{const S=await xe.getCredential(t.params.url,{error:Un("request:server",l,t.params),credential:t.credential,prompt:b!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=S,t.credentialToken=S.token,t.useSSL=t.useSSL||S.ssl,!1}catch(S){if(b==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;l=S}}if(l)throw l;return!0}function a7(t,e,i=!1){const s=e.controller.signal,l=new Image;return e.withCredentials?l.crossOrigin="use-credentials":l.crossOrigin="anonymous",l.alt="",l.fetchPriority=Ys.priority,l.src=t,$j(l,t,i,s)}function qj(t){let e,i;return typeof t=="string"?(e=As(t,!0),i=e7(t)):(e=t.origin,i=e7(t.toString())),e==null?null:{origin:e,isHosted:i}}function Vj(t){return t?.release&&typeof t.release=="function"}function Hj(t){return t?.acquire&&typeof t.acquire=="function"}var zl;let Jp=(zl=class{constructor(e,i,s,l=1,f=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=l,this._pool=new Array(f),this._initialSize=f;for(let y=0;y<f;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(l,1)}destroy(){this.prune(0)}acquire(...e){let i;if(zl.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let l=0;l<s;l++)this._pool[l]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):Hj(i)&&i.acquire(...e),i}release(e){e&&!zl.test.disabled&&(this._releaseFunction?this._releaseFunction(e):Vj(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},zl.test={disabled:!1},zl);function Wj(t){t.length=0}let zr=class{constructor(e=50,i=50){this._pool=new Jp(Array,void 0,Wj,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Rv.acquire()}static release(e){return Rv.release(e)}static prune(){Rv.prune()}};const Rv=new zr(100),l7=new WeakMap;function Jj(t,e,i=!1){const s=` DEPRECATED - ${e}`;if(!i)return void t.warn(s);let l=l7.get(t);l||(l=new Set,l7.set(t,l)),l.has(e)||(l.add(e),t.warn(s))}const Vg="https://www.esriurl.com/";function Yj(t,e,i,s={}){rt("esri-deprecation-warnings")&&Gl(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${Vg}${i}/`,`Esri's move to web components: ${Vg}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...s})}function Kj(t,e,i,s={}){rt("esri-deprecation-warnings")&&Gl(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${Vg}${i}/`,`Esri's move to web components: ${Vg}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...s})}function L0t(t,e,i={}){rt("esri-deprecation-warnings")&&Gl(t,`Module: ${e}`,i)}function e$(t,e,i={}){if(rt("esri-deprecation-warnings")){const{moduleName:s}=i;Gl(t,`Function: ${(s?s+"::":"")+e+"()"}`,i)}}function i$(t,e,i={}){if(rt("esri-deprecation-warnings")){const{moduleName:s}=i;Gl(t,`Property: ${(s?s+"::":"")+e}`,i)}}function Zj(t,e,i={}){rt("esri-deprecation-warnings")&&Gl(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function Gl(t,e,i={}){if(rt("esri-deprecation-warnings")){const{replacement:s,version:l,see:f,warnOnce:y}=i;let v=e;if(s&&(v+=`
	 Replacement: ${s}`),l&&(v+=`
	 Version: ${l}`),f)if(Array.isArray(f)){v+=`
	 See for more details:`;for(const b of f)v+=`
		${b}`}else v+=`
	 See ${f} for more details.`;Jj(t,v,y)}}function D0t(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function Xj(t,e){for(const i of t)if(i!=null&&e(i))return i}function Hg(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Yp=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((i=>{e+=i.length})),e}add(e,i){if(Hg(e)){const s=this._getOrCreateGroup(i);for(const l of e)h7(l)&&s.push(l)}else h7(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach((s=>s.forEach(e)));else{const s=this._getGroup(e);s&&i&&s.forEach(i)}}has(e){return this._groups.has(L1(e))}remove(e){if(typeof e!="string"&&Hg(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(u7(this._getGroup(e)),this._groups.delete(L1(e)),this):this}removeAll(){return this._groups.forEach(u7),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(L1(e),i),i}_getGroup(e){return this._groups.get(L1(e))}};function L1(t){return t||"_default_"}function u7(t){for(const e of t)e instanceof Yp?e.removeAll():e.remove()}function h7(t){return t!=null&&(!!t.remove||t instanceof Yp)}const r$=Symbol("Accessor-beforeDestroy");function cs(t){return t.__accessor__??null}function Qj(t,e){return t?.metadata?.[e]!=null}function Dy(t,e,i){return i?Wg(t,e,{policy:i,path:""}):Wg(t,e,null)}function Wg(t,e,i){return e?Object.keys(e).reduce(((s,l)=>{const f=l;if(f==="__proto__")return s;let y=null,v="merge";if(i&&(y=i.path?`${i.path}.${l}`:l,v=i.policy(y)),v==="replace"||v==="replace-arrays"&&Array.isArray(s[f]))return s[f]=e[f],s;if(s[f]===void 0)return s[f]=yt(e[f]),s;let b=s[f],S=e[f];if(b===S)return s;if(Array.isArray(S)||Array.isArray(s))b=b?Array.isArray(b)?s[f]=b.slice():s[f]=[b]:s[f]=[],S&&(Array.isArray(S)||(S=[S]),S.forEach((A=>{b.includes(A)||b.push(A)})));else if(S&&typeof S=="object")if(i){const A=i.path;i.path=y,s[f]=Wg(b,S,i),i.path=A}else s[f]=Wg(b,S,null);else s.hasOwnProperty(l)&&!e.hasOwnProperty(l)||(s[f]=S);return s}),t||{}):t}function s$(t){return Array.isArray(t)?t:t.split(".")}function c7(t){return t.includes(",")?t.split(",").map((e=>e.trim())):[t.trim()]}function tF(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...c7(i));return e}return c7(t)}function n$(t,e,i,s){const l=tF(e);if(l.length!==1){const f=l.map((y=>s(t,y,i)));return Ph(f)}return s(t,l[0],i)}function o$(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const l=parseInt(i,10);if(!isNaN(l))return Array.isArray(e)?e[l]:e.at(l)}const s=cs(e);return Qj(s,i)?s.get(i):e[i]}function a$(t,e,i){if(t==null)return t;const s=o$(e[i],t);return!s&&i<e.length-1?void 0:i===e.length-1?s:a$(s,e,i+1)}function s1(t,e,i=0){return typeof e!="string"||e.includes(".")?a$(t,s$(e),i):o$(e,t)}function Ln(t,e){return s1(t,e)}function p7(t,e){return s1(e,t)!==void 0}const Ss={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function n1(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const s in e)e[s]=yt(e[s]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function o1(t,e){const i=n1(t);let s=i[e];return s||(s=i[e]={}),s}function eF(t,e){return Dy(t,e,rF)}const iF=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function rF(t){return iF.test(t)?"replace":"merge"}let sF=class{constructor(e,i){this._observers=e,this._observer=i}remove(){t_(this._observers,this._observer)}},l$=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return nF;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,l=!1;const f=i.length;for(let y=0;y<f;++y){const v=i[y];if(v.destroyed)l=!0;else if(v===e){s=!0;break}}return s||(i.push(e),l&&this._removeDestroyedObservers()),new sF(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let s=0;for(let l=0;l<i;++l){for(;l+s<i&&e[l+s].destroyed;)++s;if(s>0){if(!(l+s<i))break;e[l]=e[l+s]}}e.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const nF=fe();var se;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(se||(se={}));const _w=se.USER+1;function wa(t){switch(t){case"defaults":return se.DEFAULTS;case"service":return se.SERVICE;case"portal-item":return se.PORTAL_ITEM;case"web-scene":return se.WEB_SCENE;case"web-map":return se.WEB_MAP;case"link-chart":return se.LINK_CHART;case"user":return se.USER;default:return null}}function Jg(t){switch(t){case se.DEFAULTS:return"defaults";case se.SERVICE:return"service";case se.PORTAL_ITEM:return"portal-item";case se.WEB_SCENE:return"web-scene";case se.WEB_MAP:return"web-map";case se.LINK_CHART:return"link-chart";case se.USER:return"user"}}function oF(t){return Jg(t)}const Qe={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let m2=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((e=>{this._handles.push(e.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const Yg=new m2,Zf=[];let W0=Yg;function Ft(t){W0.onAccessed(t)}let jy=!1,Fy=!1;function Ma(t,e,i){if(jy)return b_(t,e,i);let s=null;return u$(t),s=e.call(i),h$(),s}function aF(t,e){return Ma(Yg,t,e)}function b_(t,e,i){const s=jy;jy=!0,u$(t);let l=null;try{l=e.call(i)}catch(f){Fy&&At.getLogger("esri.core.accessorSupport.tracking").error(f)}return h$(),jy=s,l}function u$(t){W0=t,Zf.push(t)}function h$(){const t=Zf.length;if(t>1){const e=Zf.pop();W0=Zf[t-2],e.onTrackingEnd()}else if(t===1){const e=Zf.pop();W0=Yg,e.onTrackingEnd()}else W0=Yg}function c$(t,e){if(e.flags&Qe.DepTrackingInitialized)return;e.flags|=Qe.DepTrackingInitialized;const i=Fy;Fy=!1,e.flags&Qe.AutoTracked?b_(e.trackingTarget,e.metadata.get,t):p$(t,e),Fy=i}const lF=[];function p$(t,e){e.flags&Qe.ExplicitlyTracking||(e.flags|=Qe.ExplicitlyTracking,b_(e.trackingTarget,(()=>{const i=e.metadata.dependsOn||lF;for(const s of i)if(typeof s!="string"||s.includes(".")){const l=s$(s);for(let f=0,y=t;f<l.length&&y!=null&&typeof y=="object";++f)y=f7(y,l[f],f!==l.length-1)}else f7(t,s,!1)})),e.flags&=-129)}function f7(t,e,i){const s=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const f=parseInt(s,10);if(!isNaN(f))return Array.isArray(t)?t[f]:t.at(f)}const l=cs(t);if(l){const f=l.propertiesByName.get(s);f&&(Ft(f),c$(t,f))}return i?t[s]:void 0}let d7=class extends l${constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new m2(this),this.flags=0,this.flags=Qe.Dirty|(i.nonNullable?Qe.NonNullable:0)|(i.hasOwnProperty("value")?Qe.HasDefaultValue:0)|(i.get===void 0?Qe.DepTrackingInitialized:0)|(i.dependsOn===void 0?Qe.AutoTracked:0)}destroy(){this.flags&Qe.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Ft(this);const i=e.store,s=this.propertyName,l=this.flags,f=i.get(s);if(l&Qe.Computing||~l&Qe.Dirty&&i.has(s))return f;this.flags|=Qe.Computing;const y=e.host;let v;l&Qe.AutoTracked?v=Ma(this.trackingTarget,this.metadata.get,y):(p$(y,this),v=this.metadata.get.call(y)),this.flags|=Qe.DepTrackingInitialized,i.set(s,v,se.COMPUTED);const b=i.get(s);return b===f?this.flags&=-2:aF(this.commit,this),this.flags&=-5,b}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Qe.Overridden&&(this.flags|=Qe.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onCommitted()}}},uF=class f${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new f$;return this._values.forEach(((s,l)=>{e&&e.has(l)||i.set(l,yt(s))})),i}get(e){return this._values.get(e)}originOf(){return se.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function jh(t,e,i){return t!==void 0}function y7(t,e,i,s){return t!==void 0&&(!(i==null&&t.flags&Qe.NonNullable)||(s.lifecycle,!1))}let hF=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Ss.INITIALIZING,this.store=new uF,this.mutable=!0,this._origin=se.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const l=new d7(s,i[s]);this.propertiesByName.set(s,l)}this.metadata=i}initialize(){this.lifecycle=Ss.CONSTRUCTING}constructed(){this.lifecycle=Ss.CONSTRUCTED}destroy(){this.lifecycle=Ss.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==Ss.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!jh(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Ft(i);const s=this.store;return s.has(e)?s.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const s=this.propertiesByName.get(e);if(s!==void 0&&s.flags&Qe.HasDefaultValue)return"defaults"}return Jg(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(jh(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const s=this.propertiesByName.get(e);jh(s)&&this._internalSet(s,i)}getDependsInfo(e,i,s){const l=this.propertiesByName.get(i);if(!jh(l))return"";const f=new m2,y=Ma(f,(()=>l.metadata.get?.call(e)));let v=`${s}${e.declaredClass.split(".").pop()}.${i}: ${y}
`;const b=f.accessed??new Set;if(b.size===0)return v;s+="  ";for(const S of b)S instanceof d7&&(v+=`${s}${S.propertyName}: undefined
`);return v}setAtOrigin(e,i,s){const l=this.propertiesByName.get(e);if(jh(l))return this._setAtOrigin(l,i,s)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Qe.Overridden)}clearOrigin(e,i){const s=this.store,l=this.propertiesByName.get(e);if(!jh(l))return;const f=s.isAtOrigin(e,i)&&!(l.flags&Qe.Overridden);s.delete(e,i),f&&l.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Qe.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const s=this.propertiesByName.get(e);if(!y7(s,e,i,this))return;const l=s.metadata.cast;if(l){const f=this._cast(l,i),{valid:y,value:v}=f;if(Cv.release(f),!y)return;i=v}s.flags|=Qe.Overridden,this._internalSet(s,i)}set(e,i){const s=this.propertiesByName.get(e);if(!y7(s,e,i,this))return;const l=s.metadata.cast;if(l){const y=this._cast(l,i),{valid:v,value:b}=y;if(Cv.release(y),!v)return;i=b}const f=s.metadata.set;f?f.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(e){this._origin=wa(e)}getDefaultOrigin(){return Jg(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const s=this.lifecycle!==Ss.INITIALIZING?this._origin:se.DEFAULTS;this._setAtOrigin(e,i,s)}_setAtOrigin(e,i,s){const l=this.store,f=e.propertyName;if(l.isAtOrigin(f,s)&&s_(i,l.get(f))&&~e.flags&Qe.Overridden)return;const y=l.isBelowOrigin(f,s)||l.isAtOrigin(f,s);y&&e.invalidate(),l.set(f,i,s),y&&e.commit(),c$(this.host,e)}_cast(e,i){const s=Cv.acquire();return s.valid=!0,s.value=i,e&&(s.value=e.call(this.host,i,s)),s}},cF=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Cv=new Jp(cF);function Kg(t,e,i){if(t&&e)if(typeof e=="object")for(const s of Object.getOwnPropertyNames(e))Kg(t,s,e[s]);else{if(e.includes(".")){const l=e.split("."),f=l.splice(-1,1)[0];return void Kg(Ln(t,l),f,i)}const s=t.__accessor__;s!=null&&pF(e,s),t[e]=i}}function pF(t,e){if(rt("esri-unknown-property-errors")&&!fF(t,e))throw new ct("set:unknown-property",dF(t,e))}function fF(t,e){return e.metadata[t]!=null}function dF(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let yF;function gF(){return yF}var g7;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(g7||(g7={}));let d$=class extends Jp{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const D1=[];function vp(t){D1.push(t),D1.length===1&&queueMicrotask((()=>{const e=D1.slice();D1.length=0;for(const i of e)i()}))}let J0=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,i)=>e-i))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,i)=>e+i),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var xw;(function(t){const e=(f,y,v,b)=>{let S=y,A=y;const P=v>>>1,k=f[S-1];for(;A<=P;){A=S<<1,A<v&&b(f[A-1],f[A])<0&&++A;const C=f[A-1];if(b(C,k)<=0)break;f[S-1]=C,S=A}f[S-1]=k},i=(f,y)=>f<y?-1:f>y?1:0;function s(f,y,v,b){y===void 0&&(y=0),v===void 0&&(v=f.length),b===void 0&&(b=i);for(let A=v>>>1;A>y;A--)e(f,A,v,b);const S=y+1;for(let A=v-1;A>y;A--){const P=f[y];f[y]=f[A],f[A]=P,e(f,S,A,b)}}function*l(f,y,v,b){y===void 0&&(y=0),v===void 0&&(v=f.length),b===void 0&&(b=i);for(let A=v>>>1;A>y;A--)e(f,A,v,b),yield;const S=y+1;for(let A=v-1;A>y;A--){const P=f[y];f[y]=f[A],f[A]=P,e(f,S,A,b),yield}}t.sort=s,t.iterableSort=l})(xw||(xw={}));const m7=xw,mF=1.5,vF=1.1;let Y0=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new iE,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>v7(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let s=0;s<this._length;s++){const l=this.data[s];e(l)&&i.push(l)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const s=this.data.indexOf(e,i);return s!==-1&&s<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let s=0;s<i;s++)this.data[this._length++]=e[s]}fill(e,i){for(let s=0;s<i;s++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,v7(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=uw(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(uw(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,s){this.length=xD(this.data,e,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const s=this.data[e];this.data[e]=this.data[i],this.data[i]=s}sort(e){m7.sort(this.data,0,this.length,e)}iterableSort(e){return m7.iterableSort(this.data,0,this.length,e)}some(e,i){for(let s=0;s<this.length;++s)if(e.call(i,this.data[s],s,this.data))return!0;return!1}find(e,i){const{data:s,length:l}=this;for(let f=0;f<l;++f)if(e.call(i,s[f]))return s[f]}filterInPlace(e,i){let s=0;for(let l=0;l<this._length;++l){const f=this.data[l];e.call(i,f,l,this.data)&&(this.data[l]=this.data[s],this.data[s]=f,s++)}if(this._deallocator)for(let l=s;l<this._length;l++)this.data[l]=this._deallocator(this.data[l]);return this._length=s,this._shrink(),this}forAll(e,i){const{data:s,length:l}=this;for(let f=0;f<l;++f)e.call(i,s[f],f,s)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const s=new Array(this.length);for(let l=0;l<this.length;++l)s[l]=e.call(i,this.data[l],l,this.data);return s}reduce(e,i){let s=i;for(let l=0;l<this.length;++l)s=e(s,this.data[l],l,this.data);return s}has(e){const i=this.length,s=this.data;for(let l=0;l<i;++l)if(s[l]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function v7(t){t.data.length>mF*t.length&&(t.data.length=Math.floor(t.length*vF))}function J0t(t){return t}function wF(t){return 1e3*t}function Y0t(t){return t}function K0t(t){return .001*t}let bF=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},_F=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},Sw=0;const _f={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Tw=["prepare","preRender","render","postRender","update","finish"],Mw=[],vh=new Y0;let xF=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,y$()}};function SF(){Xu!=null&&(cancelAnimationFrame(Xu),Xu=requestAnimationFrame(__))}function y$(){Xu==null&&(Sw=performance.now(),Xu=requestAnimationFrame(__))}const Zg={frameTasks:vh,willDispatch:!1,clearFrameTasks:TF,dispatch:m$,executeFrameTasks:MF,reschedule:SF};function a1(t){const e=new _F(t);return Mw.push(e),Zg.willDispatch||(Zg.willDispatch=!0,vp(m$)),e}function wp(t){const e=new bF(t);return vh.push(e),y$(),new xF(e)}let Xu=null;function TF(t=!1){vh.forAll((e=>{e.removed=!0})),t&&g$()}function __(){const t=performance.now();Xu=null,Xu=vh.some((i=>!i.paused&&!i.removed))?requestAnimationFrame(__):null,Zg.executeFrameTasks(t)}function MF(t){const e=t-Sw;Sw=t;const i=1e3/60,s=Math.max(0,e-i);_f.time=t,_f.frameDuration=i-s;for(let l=0;l<Tw.length;l++){const f=performance.now(),y=Tw[l];vh.forAll((v=>{v.paused||v.removed||(l===0&&v.ticks++,v.phases[y]&&(_f.elapsedFrameTime=performance.now()-t,_f.deltaTime=v.ticks===0?0:e,v.phases[y]?.call(v,_f)))})),IF[l].push(performance.now()-f)}g$(),PF.push(performance.now()-t)}const j1=new Y0;function g$(){vh.forAll((t=>{t.removed&&j1.push(t)})),vh.removeUnorderedMany(j1.data,j1.length),j1.clear()}function m$(){for(;Mw.length;){const t=Mw.shift();t.isActive&&t.callback()}Zg.willDispatch=!1}function EF(t=1,e){const i=ln(),s=()=>{Os(e)?i.reject(Be()):t===0?i():(--t,vp((()=>s())))};return s(),i.promise}function $F(t){return EF(1,t)}async function AF(t){await $F(t),await new Promise((e=>requestAnimationFrame((()=>{t?.aborted||e()}))))}const IF=Tw.map((t=>new J0(t))),PF=new J0("total");function v$(t,e){for(const i of t.values())if(e(i))return!0;return!1}function w7(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function tdt(t,e){return e!=null&&t.add(e),t}function x_(t,e){const i=new Set;return w7(i,t),w7(i,e),i}function w$(t,e){const i=new Set;for(const s of e)t.has(s)&&i.add(s);return i}function edt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function idt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function OF(t,e){const i=new Set(t);for(const s of e)i.delete(s);return i}function kF(t,e){return OF(x_(t,e),w$(t,e))}let RF=0;function zy(){return++RF}let v2=class extends m2{constructor(e){super(new CF(e)),this._observer&&b7.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&b7.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},CF=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=NF}};const b7=new FinalizationRegistry((t=>{t.deref()?.destroy()}));function NF(){}let Cc=!1;const Xg=[];function b$(t,e){let i=new v2(f),s=null,l=!1;function f(){if(!i||l)return;if(Cc)return void S$(f);const v=s;i.clear(),Cc=!0,l=!0,s=Ma(i,t),l=!1,Cc=!1,e(s,v),T$()}function y(){i&&(i.destroy(),i=null,s=null)}return l=!0,s=Ma(i,t),l=!1,fe(y)}function _$(t,e){let i=new v2(l),s=null;function l(){e(s,y)}function f(){i&&(i.destroy(),i=null),s=null}function y(){return i?(i.clear(),s=Ma(i,t),s):null}return y(),fe(f)}function x$(t,e){let i=!1,s=!1;const l=!!e?.sync;let f=new v2((()=>{i||s||(s=!0,l?y():queueMicrotask(y))}));function y(){s=!1,f&&!i&&(Cc?S$(y):(f.clear(),Cc=!0,i=!0,Ma(f,t),i=!1,Cc=!1,T$()))}function v(){f&&(f.destroy(),f=null)}return i=!0,Ma(f,t),i=!1,fe(v)}function S$(t){Xg.includes(t)||Xg.unshift(t)}function T$(){for(;Xg.length;)Xg.pop()()}var K0;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(K0||(K0={}));var lh;let S_=(lh=class{constructor(){this.uid=zy(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,s,l,f){return this.pool.acquire(K0.Untracked,e,i,s,l,f,s_)}static acquireTracked(e,i,s,l){return this.pool.acquire(K0.Tracked,e,i,s,null,null,l)}notify(e,i){this.type===K0.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,s,l,f,y,v){this.uid=zy(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=s,this.getValue=l,this.target=f,this.path=y,this.equals=v}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=zy(),this.removed=!0}},lh.pool=new d$(lh),lh);const Uy=new zr,xa=new Set;let Qg;function tm(t){xa.delete(t),xa.add(t),Qg||(Qg=a1(jF))}function LF(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function DF(t){for(const e of xa.values())e.target===t&&(e.removed=!0)}function jF(){let t=10;for(;Qg&&t--;){Qg=null;const e=FF(),i=Uy.acquire();for(const s of e){const l=s.uid;LF(s),l===s.uid&&s.removed&&i.push(s)}for(const s of xa)s.removed&&(i.push(s),xa.delete(s));for(const s of i)S_.pool.release(s);Uy.release(i),Uy.release(e),Ew.forEach((s=>s()))}}function FF(){const t=Uy.acquire();t.length=xa.size;let e=0;for(const i of xa)t[e]=i,++e;return xa.clear(),t}const Ew=new Set;function zF(t){return Ew.add(t),fe((()=>Ew.delete(t)))}function UF(t,e,i){let s=n$(t,e,i,((l,f,y)=>{let v,b,S=_$((()=>s1(l,f)),((A,P)=>{l.__accessor__?.lifecycle===Ss.DESTROYED||v&&v.uid!==b?s.remove():(v||(v=S_.acquireUntracked(A,y,P,l,f),b=v.uid),tm(v))}));return fe((()=>{S.remove(),v&&(v.uid!==b||v.removed||(v.removed=!0,tm(v)),v=null),s=S=null}))}));return s}function GF(t,e,i){const s=n$(t,e,i,((l,f,y)=>{let v=!1;return b$((()=>s1(l,f)),((b,S)=>{l.__accessor__.lifecycle!==Ss.DESTROYED?v||(v=!0,s_(S,b)||y.call(l,b,S,f,l),v=!1):s.remove()}))}));return s}function BF(t,e,i,s=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Ss.DESTROYED?s?GF(t,e,i):UF(t,e,i):fe()}function qF(t,e,i){let s,l,f=_$(t,((y,v)=>{s&&s.uid!==l?f.remove():(s||(s=S_.acquireTracked(y,e,v,i),l=s.uid),tm(s))}));return fe((()=>{f.remove(),s&&(s.uid!==l||s.removed||(s.removed=!0,tm(s)),s=null),f=null}))}function VF(t,e,i){let s=!1;return b$(t,((l,f)=>{s||(s=!0,i(f,l)||e(l,f),s=!1)}))}function HF(t,e,i=!1,s=fE){return i?VF(t,e,s):qF(t,e,s)}function _7(t){return v$(xa,(e=>e.oldValue===t))}const Qu=()=>At.getLogger("esri.core.accessorSupport.ensureTypes");function WF(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Qu().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function JF(t){return t==null?t:!!t}function YF(t){return t==null?t:t.toString()}function Ts(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function T_(t){return t==null?t:Math.round(parseFloat(t))}function KF(t){return null}function ZF(t,e){return i=>{let s=t(i);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function M$(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function em(t,e){return e!=null&&t&&!(e instanceof t)}function E$(t){return t&&"isCollection"in t}function x7(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function XF(t,e){if(!e?.constructor||!E$(e.constructor))return $w(t,e)?e:new t(e);const i=x7(t.prototype.itemType),s=x7(e.constructor.prototype.itemType);return i?s?i===s?e:i.prototype.isPrototypeOf(s.prototype)?new t(e):($w(t,e),e):new t(e):e}function $w(t,e){return!!M$(e)&&(Qu().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+w2(t)+"'"),!0)}function Kp(t,e){return e==null?e:E$(t)?XF(t,e):em(t,e)?$w(t,e)?e:new t(e):e}function w2(t){return t?.prototype?.declaredClass||"unknown"}const QF=new WeakMap;function tz(t){switch(t){case Number:return e=>Ts(e);case Re:return T_;case Boolean:return JF;case String:return YF;case Date:return WF;case b2:return KF;default:return e1(QF,t,(()=>Kp.bind(null,t)))}}function Vr(t,e){const i=tz(t);return arguments.length===1?i:i(e)}function Td(t,e,i){return arguments.length===1?Td.bind(null,t):e&&(Array.isArray(e)?e.map((s=>t(s,i))):[t(e,i)])}function ez(t,e){return arguments.length===1?Td((i=>Vr(t,i))):Td((i=>Vr(t,i)),e)}function $$(t,e,i){return e!==0&&Array.isArray(i)?i.map((s=>$$(t,e-1,s))):t(i)}function im(t,e,i){if(arguments.length===2)return f=>im(t,e,f);if(!i)return i;i=$$(t,e,i);let s=e,l=i;for(;s>0&&Array.isArray(l);)s--,l=l[0];if(l!==void 0)for(let f=0;f<s;f++)i=[i];return i}function iz(t,e,i){return arguments.length===2?im((s=>Vr(t,s)),e):im((s=>Vr(t,s)),e,i)}function A$(t){return!!Array.isArray(t)&&!t.some((e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)}))}function Aw(t,e){if(arguments.length===2)return Aw(t).call(null,e);const i=new Set,s=t.filter((v=>typeof v!="function")),l=t.filter((v=>typeof v=="function"));for(const v of t)typeof v!="string"&&typeof v!="number"||i.add(v);let f=null,y=null;return(v,b)=>{if(v==null)return v;const S=typeof v,A=S==="string"||S==="number";return A&&(i.has(v)||l.some((P=>S==="string"&&P===String||S==="number"&&P===Number)))||S==="object"&&l.some((P=>!em(v,P)))?v:(A&&s.length?(f||(f=s.map((P=>typeof P=="string"?`'${P}'`:`${P}`)).join(", ")),Qu().error("Accessor#set",`'${v}' is not a valid value for this property, only the following values are valid: ${f}`)):typeof v=="object"&&l.length?(y||(y=l.map((P=>w2(P))).join(", ")),Qu().error("Accessor#set",`'${v}' is not a valid value for this property, value must be one of ${y}`)):Qu().error("Accessor#set",`'${v}' is not a valid value for this property`),b&&(b.valid=!1),null)}}function Bl(t,e){if(arguments.length===2)return Bl(t).call(null,e);const i={},s=[],l=[];for(const b in t.typeMap){const S=t.typeMap[b];i[b]=Vr(S),s.push(w2(S)),l.push(b)}const f=()=>`'${s.join("', '")}'`,y=()=>`'${l.join("', '")}'`,v=typeof t.key=="string"?b=>b[t.key]:t.key;return b=>{if(t.base&&!em(t.base,b)||b==null)return b;const S=v(b)||t.defaultKeyValue,A=i[S];if(!A)return Qu().error("Accessor#set",`Invalid property value, value needs to be one of ${f()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!em(t.typeMap[S],b))return b;if(typeof t.key=="string"&&!M$(b)){const P={};for(const k in b)k!==t.key&&(P[k]=b[k]);return A(P)}return A(b)}}let Re=class{},b2=class{};const adt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function rz(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function I$(t){switch(t.type){case"native":return Vr(t.value);case"array":return Td(I$(t.value));case"one-of":return sz(t);default:return null}}function sz(t){let e=null;return(i,s)=>Pw(i,t)?i:(e==null&&(e=Iw(t)),Qu().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),s&&(s.valid=!1),null)}function Iw(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Re:return"integer";case Date:return"date";case b2:return"null";default:return w2(t.value)}case"array":return`array of ${Iw(t.value)}`;case"one-of":{const e=t.values.map((i=>Iw(i)));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function Pw(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Re:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case b2:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some((i=>!Pw(i,e.value)));case"one-of":return e.values.some((i=>Pw(t,i)))}}function E(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(e,i),l=o1(e,i);s&&(s.get||s.set?(l.get=s.get||l.get,l.set=s.set||l.set):"value"in s&&("value"in t&&At.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),l.value=t.value=s.value)),t.readOnly!=null&&(l.readOnly=t.readOnly);const f=t.aliasOf;if(f){const b=typeof f=="string"?f:f.source,S=typeof f=="string"?null:f.overridable===!0;let A;l.dependsOn=[b],l.get=function(){let P=Ln(this,b);if(typeof P=="function"){A||(A=b.split(".").slice(0,-1).join("."));const k=Ln(this,A);k&&(P=P.bind(k))}return P},l.readOnly||(l.set=S?function(P){this._override(i,P)}:function(P){Kg(this,b,P)})}const y=t.type,v=t.types;if(!l.cast){let b;y?b=nz(y):v&&(b=Array.isArray(v)?Td(Bl(v[0])):Bl(v)),t.cast=oz(t.cast,b)}eF(l,t),t.range&&(l.cast=ZF(l.cast,t.range))}}function M_(t,e,i){const s=o1(t,i);s.json||(s.json={});let l=s.json;return e!==void 0&&(l.origins||(l.origins={}),l.origins[e]||(l.origins[e]={}),l=l.origins[e]),l}function nz(t){let e=0,i=t;if(rz(t))return I$(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const s=i;if(A$(s))return e===0?Aw(s):im(Aw(s),e);if(e===1)return ez(s);if(e>1)return iz(s,e);const l=t;return l.from?l.from:Vr(l)}function oz(t,e){if(t||e)return t?e?(i,s)=>e(t(i,s),s):t:e}function az(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(e[s]){const l=e[s];i[s].forEach((f=>{e[f]=l})),delete e[s]}}}let Mo=class extends mE{constructor(e,i,s){super(e,i,s)}};Mo.prototype.type="warning";function P$(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Ow=()=>At.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function S7(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||hz(t)&&Ah("read.reader",E_(t),e))}function E_(t){const e=t.ndimArray??0;if(e>1)return uz(t);if(e===1)return T7(t);if("type"in t&&k$(t.type)){const i=t.type.prototype?.itemType?.Type,s=T7(typeof i=="function"?{type:i}:{types:i});return(l,f,y)=>{const v=s(l,f,y);return v&&new t.type(v)}}return $_(t)}function $_(t){return"type"in t?lz(t.type):cz(t.types)}function lz(t){return t.prototype.read?(e,i,s)=>{if(e==null)return e;const l=typeof e;if(l!=="object")return void Ow().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${l}'`);const f=new t;return f.read(e,s),f}:t.fromJSON}function O$(t,e,i,s){return s!==0&&Array.isArray(e)?e.map((l=>O$(t,l,i,s-1))):t(e,void 0,i)}function uz(t){const e=$_(t),i=O$.bind(null,e),s=t.ndimArray??0;return(l,f,y)=>{if(l==null)return l;l=i(l,y,s);let v=s,b=l;for(;v>0&&Array.isArray(b);)v--,b=b[0];if(b!==void 0)for(let S=0;S<v;S++)l=[l];return l}}function T7(t){const e=$_(t);return(i,s,l)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const v of i){const b=e(v,void 0,l);b!==void 0&&y.push(b)}return y}const f=e(i,void 0,l);return f!==void 0?[f]:void 0}}function k$(t){if(!P$(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?A_(e.Type):R$(e.Type))}function hz(t){return"types"in t?R$(t.types):A_(t.type)}function A_(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||k$(t))}function R$(t){for(const e in t.typeMap)if(!A_(t.typeMap[e]))return!1;return!0}function cz(t){let e=null;const i=t.errorContext??"type",s=t.validate;return(l,f,y)=>{if(l==null)return l;const v=typeof l;if(v!=="object")return void Ow().error(`Expected JSON value of type 'object' to deserialize, but got '${v}'`);e||(e=pz(t));const b=t.key;if(typeof b!="string")return;const S=l[b],A=S?e[S]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!A){const k=`Type '${S||"unknown"}' is not supported`;return y?.messages&&l&&y.messages.push(new Mo(`${i}:unsupported`,k,{definition:l,context:y})),void Ow().error(k)}const P=new A;return P.read(l,y),s?s(P):P}}function pz(t){const e={};for(const i in t.typeMap){const s=t.typeMap[i],l=n1(s.prototype);if(typeof t.key=="function")continue;const f=l[t.key];if(!f)continue;if(f.json?.type&&Array.isArray(f.json.type)&&f.json.type.length===1&&typeof f.json.type[0]=="string"){e[f.json.type[0]]=s;continue}const y=f.json?.write;if(!y?.writer){e[i]=s;continue}const v=y.target,b=typeof v=="string"?v:t.key,S={};y.writer(i,S,b),S[b]&&(e[S[b]]=s)}return e}function fz(t){if(t.json||(t.json={}),E7(t.json),$7(t.json),M7(t.json),t.json.origins)for(const e in t.json.origins)E7(t.json.origins[e]),$7(t.json.origins[e]),M7(t.json.origins[e]);return!0}function M7(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function E7(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function $7(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function A7(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&P$(t.type))?e.write.writer=gz:i>1?e.write.writer=mz(i):e.types?Array.isArray(e.types)?e.write.writer=yz(e.types[0]):e.write.writer=dz(e.types):e.write.writer=Md}function dz(t){return(e,i,s,l)=>e?C$(e,t,l)?Md(e,i,s,l):void 0:Md(e,i,s,l)}function C$(t,e,i){for(const s in e.typeMap)if(t instanceof e.typeMap[s])return!0;if(i?.messages){const s=e.errorContext??"type",l=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ct(`${s}:unsupported`,l,{definition:t,context:i})),At.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(l)}return!1}function yz(t){return(e,i,s,l)=>!e||!Array.isArray(e)?Md(e,i,s,l):Md(e.filter((f=>C$(f,t,l))),i,s,l)}function Md(t,e,i,s){Ah(i,rm(t,s),e)}function rm(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?sm(t):t}function sm(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function gz(t,e,i,s){let l;t===null?l=null:t&&typeof t.map=="function"?(l=t.map((f=>rm(f,s))),typeof l.toArray=="function"&&(l=l.toArray())):l=[rm(t,s)],Ah(i,l,e)}function N$(t,e,i){return i!==0&&Array.isArray(t)?t.map((s=>N$(s,e,i-1))):rm(t,e)}function mz(t){return(e,i,s,l)=>{let f;if(e===null)f=null;else{f=N$(e,l,t);let y=t,v=f;for(;y>0&&Array.isArray(v);)y--,v=v[0];if(v!==void 0)for(let b=0;b<y;b++)f=[f]}Ah(s,f,i)}}function vz(t,e){return I_(t,"any",e?.origin)}function kw(t,e){return I_(t,"read",e?.origin)}function L$(t,e){return I_(t,"write",e?.origin)}function I_(t,e,i){let s=t?.json;if(s?.origins&&i){let l;l=i==="link-chart"?s.origins[i]&&(e==="any"||e in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],l&&(e==="any"||e in l)&&(s=l)}return s}function wz(t){const e=bz(t);if(t.json.origins)for(const i in t.json.origins){const s=t.json.origins[i],l=s.types?_z(s):e;S7(l,s,!1),s.types&&!s.write&&t.json.write?.enabled&&(s.write={...t.json.write}),A7(l,s)}S7(e,t.json,!0),A7(e,t.json)}function bz(t){return t.json.types?Rw(t.json):t.type?D$(t):Rw(t)}function _z(t){return t.type?D$(t):Rw(t)}function D$(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!A$(i);)i=i[0],e++;return{type:i,ndimArray:e}}function Rw(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function xz(t){fz(t)&&(az(t),wz(t))}const Nv=new Set,Lv=new Set;function Y(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,Tz(e);const i=[],s=[];let l=e.prototype;for(;l;)l.hasOwnProperty("initialize")&&!Nv.has(l.initialize)&&(Nv.add(l.initialize),i.push(l.initialize)),l.hasOwnProperty("destroy")&&!Lv.has(l.destroy)&&(Lv.add(l.destroy),s.push(l.destroy)),l=Object.getPrototypeOf(l);Nv.clear(),Lv.clear();const f=class extends e{constructor(...v){if(super(...v),this.constructor===f&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let b=i.length-1;b>=0;b--)i[b].call(this)}}),s.length){let b=!1;const S=this[r$];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!b){this.__accessor__.lifecycle=Ss.DESTROYING,b=!0,S.call(this);for(let A=0;A<s.length;A++)s[A].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};f.__accessorMetadata__=n1(e.prototype),f.prototype.declaredClass=t;const y=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(f,"name",{value:y,configurable:!0}),f}}function Sz(t,e){return e.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s===void 0)return;i.mutable&&Ft(s);const l=i.store;return l.has(t)?l.get(t):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s!==void 0)return s.getComputed(i)}}function Tz(t){const e=t.prototype,i=n1(e),s={};for(const l of Object.getOwnPropertyNames(i)){const f=i[l];xz(f),s[l]={enumerable:!0,configurable:!0,get:Sz(l,f),set(y){const v=this.__accessor__;if(v!==void 0){if(v.mutable)return v.initialized&&f.readOnly?I7("read-only",l):v.lifecycle===Ss.CONSTRUCTED&&f.constructOnly?I7("construct-only",l):void v.set(l,y)}else Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(t.prototype,s)}const I7=(t,e)=>{At.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var P7,O7;function Mz(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Na=Symbol("Accessor-Handles"),Dv=Symbol("Accessor-Initialized");var Ul;let Ot=(Ul=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:l}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const f=this;class y extends f{constructor(...b){super(...b),this.inherited=null,l&&l.apply(this,b)}}n1(y.prototype);for(const v in e){const b=e[v];y.prototype[v]=typeof b=="function"?function(...S){const A=this.inherited;let P;this.inherited=function(...k){if(f.prototype[v])return f.prototype[v].apply(this,k)};try{P=b.apply(this,S)}catch(k){throw this.inherited=A,k}return this.inherited=A,P}:e[v]}for(const v in i){const b=Mz(i[v]);E(b)(y.prototype,v)}return Y(s)(y)}static freeze(e){return e instanceof Ul?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Ul?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[P7]=null,this[O7]=!1,this.constructor===Ul)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new hF(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[Dv]=!0}initialize(){}[r$](){this[Na]=ze(this[Na])}destroy(){this.destroyed||(DF(this),this.__accessor__.destroy(),gF()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Dv]}get destroyed(){return this.__accessor__?.lifecycle===Ss.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===Ss.DESTROYING||!1}commitProperty(e){Ln(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return Kg(this,e,i),this}watch(e,i,s){return e$(At.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),BF(this,e,i,s)}addHandles(e,i){if(this.destroyed){const s=Array.isArray(e)?e:[e];for(const l of s)l.remove();return}(this[Na]??=new Yp).add(e,i)}removeHandles(e){this[Na]?.remove(e)}removeAllHandles(){this[Na]?.removeAll()}removeHandlesReference(e){this[Na]?.removeReference(e)}hasHandles(e){return this[Na]?.has(e)===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},P7=Na,O7=Dv,Ul),Gy=class j${constructor(){this._emitter=new j$.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(l=null){this._target=l,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(l,f){let y=this._listenersMap?.get(l);if(!y)return!1;const v=this._target||this;let b=!1;for(const S of y.slice()){const A="deref"in S?S.deref():S;A?A?.call(v,f):b=!0}return b&&(y=y.filter((S=>!("deref"in S)||S.deref()!=null)),this._listenersMap.set(l,y)),y.length>0}on(l,f){if(Array.isArray(l)){const v=l.map((b=>this.on(b,f)));return Ph(v)}if(l.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const y=this._listenersMap.get(l)||[];return y.push(f),this._listenersMap.set(l,y),fe((()=>{const v=this._listenersMap?.get(l),b=v?.indexOf(f)??-1;b>=0&&v.splice(b,1)}))}once(l,f){const y=this.on(l,(v=>{y.remove(),("deref"in f?f.deref():f)?.call(null,v)}));return y}hasEventListener(l){const f=this._listenersMap?.get(l);return f!=null&&f.length>0}}t.EventEmitter=e,t.EventedMixin=s=>{let l=class extends s{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(f,y){return this._emitter.emit(f,y)}on(f,y){return this._emitter.on(f,y)}once(f,y){return this._emitter.once(f,y)}hasEventListener(f){return this._emitter.hasEventListener(f)}};return l=_([Y("esri.core.Evented")],l),l};let i=class extends Ot{constructor(){super(...arguments),this._emitter=new Gy.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,l){return this._emitter.emit(s,l)}on(s,l){return this._emitter.on(s,l)}once(s,l){return this._emitter.once(s,l)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=_([Y("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(Gy||(Gy={}));const fn=Gy;var _e;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(_e||(_e={}));function F$(t){return(e,i)=>{e[i]=t}}let l1=class extends l${notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}};var Bo;let Ez=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},$z=class{constructor(e,i,s,l,f){this.target=e,this.added=i,this.removed=s,this.start=l,this.deleteCount=f}};const js=new Jp(Ez,void 0,(t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}));function k7(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function jv(t){return t?t instanceof hl?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Fv(t){if(t?.length)return t[0]}function Az(t,e,i,s){const l=Math.min(t.length-i,e.length-s);let f=0;for(;f<l&&t[i+f]===e[s+f];)f++;return f}function z$(t,e,i,s){e&&e.forEach(((l,f,y)=>{t.push(l),z$(t,i.call(s,l,f,y),i,s)}))}const La=new Set,Da=new Set,ja=new Set,zv=new Map;let Iz=0;var uh;let hl=(uh=class extends fn.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Bo}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new l1,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Iz++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Bo?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ft(this._observable),this._items}set items(e){this._emitBeforeChanges(_e.ADD)||(this._splice(0,this.length,jv(e)),this._emitAfterChanges(_e.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,i){if(this.destroyed)return fe();if(e==="change"){const s=this._chgListeners,l={removed:!1,callback:i};return s.push(l),this._notifications&&this._notifications.push({listeners:s.slice(),items:this._items.slice(),changes:[]}),fe((()=>{l.removed=!0,s.splice(s.indexOf(l),1)}))}return this._emitter.on(e,i)}once(e,i){const s="deref"in i?()=>i.deref():()=>i,l=this.on(e,(f=>{s()?.call(null,f),l.remove()}));return l}add(e,i){if(Ft(this._observable),this._emitBeforeChanges(_e.ADD))return this;const s=this.getNextIndex(i??null);return this._splice(s,0,[e]),this._emitAfterChanges(_e.ADD),this}addMany(e,i=this._items.length){if(Ft(this._observable),!e?.length)return this;if(this._emitBeforeChanges(_e.ADD))return this;const s=this.getNextIndex(i);return this._splice(s,0,jv(e)),this._emitAfterChanges(_e.ADD),this}at(e){if(Ft(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Ft(this._observable),!this.length||this._emitBeforeChanges(_e.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(_e.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ft(this._observable),this._createNewInstance({items:this._items.map(yt)})}concat(...e){Ft(this._observable);const i=e.map(jv);return this._createNewInstance({items:this._items.concat(...i)})}drain(e,i){if(Ft(this._observable),!this.length||this._emitBeforeChanges(_e.REMOVE))return;const s=this._splice(0,this.length),l=s.length;for(let f=0;f<l;f++)e.call(i,s[f],f,s);this._emitAfterChanges(_e.REMOVE)}destroyAll(){this.drain(k7)}destroyMany(e){const i=this.removeMany(e);return i.forEach(k7),i}every(e,i){return Ft(this._observable),this._items.every(e,i)}filter(e,i){Ft(this._observable);const s=arguments.length===2?this._items.filter(e,i):this._items.filter(e);return this._createNewInstance({items:s})}find(e,i){return Ft(this._observable),this._items.find(e,i)}findIndex(e,i){return Ft(this._observable),this._items.findIndex(e,i)}flatten(e,i){Ft(this._observable);const s=[];return z$(s,this,e,i),new Bo(s)}forEach(e,i){return Ft(this._observable),this._items.forEach(e,i)}getItemAt(e){return Ft(this._observable),this._items[e]}getNextIndex(e){Ft(this._observable);const i=this.length;return(e=e??i)<0?e=0:e>i&&(e=i),e}includes(e,i=0){return Ft(this._observable),this._items.includes(e,i)}indexOf(e,i=0){return Ft(this._observable),this._items.indexOf(e,i)}join(e=","){return Ft(this._observable),this._items.join(e)}lastIndexOf(e,i=this.length-1){return Ft(this._observable),this._items.lastIndexOf(e,i)}map(e,i){Ft(this._observable);const s=this._items.map(e,i);return new Bo({items:s})}reorder(e,i=this.length-1){Ft(this._observable);const s=this.indexOf(e);if(s!==-1){if(i<0?i=0:i>=this.length&&(i=this.length-1),s!==i){if(this._emitBeforeChanges(_e.MOVE))return e;this._splice(s,1),this._splice(i,0,[e]),this._emitAfterChanges(_e.MOVE)}return e}}pop(){if(Ft(this._observable),!this.length||this._emitBeforeChanges(_e.REMOVE))return;const e=Fv(this._splice(this.length-1,1));return this._emitAfterChanges(_e.REMOVE),e}push(...e){return Ft(this._observable),this._emitBeforeChanges(_e.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(_e.ADD)),this.length}reduce(e,i){Ft(this._observable);const s=this._items;return arguments.length===2?s.reduce(e,i):s.reduce(e)}reduceRight(e,i){Ft(this._observable);const s=this._items;return arguments.length===2?s.reduceRight(e,i):s.reduceRight(e)}remove(e){return Ft(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Ft(this._observable),e<0||e>=this.length||this._emitBeforeChanges(_e.REMOVE))return;const i=Fv(this._splice(e,1));return this._emitAfterChanges(_e.REMOVE),i}removeMany(e){if(Ft(this._observable),!e?.length||this._emitBeforeChanges(_e.REMOVE))return[];const i=e instanceof Bo?e.toArray():e,s=this._items,l=[],f=i.length;for(let y=0;y<f;y++){const v=i[y],b=s.indexOf(v);if(b>-1){const S=1+Az(i,s,y+1,b+1),A=this._splice(b,S);A&&A.length>0&&l.push.apply(l,A),y+=S-1}}return this._emitAfterChanges(_e.REMOVE),l}reverse(){if(Ft(this._observable),this._emitBeforeChanges(_e.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(_e.MOVE),this}shift(){if(Ft(this._observable),!this.length||this._emitBeforeChanges(_e.REMOVE))return;const e=Fv(this._splice(0,1));return this._emitAfterChanges(_e.REMOVE),e}slice(e=0,i=this.length){return Ft(this._observable),this._createNewInstance({items:this._items.slice(e,i)})}some(e,i){return Ft(this._observable),this._items.some(e,i)}sort(e){if(Ft(this._observable),!this.length||this._emitBeforeChanges(_e.MOVE)||!this._requiresSort(e))return this;const i=this._splice(0,this.length);return arguments.length?i.sort(e):i.sort(),this._splice(0,0,i),this._emitAfterChanges(_e.MOVE),this}_requiresSort(e=(i,s)=>i===s?0:i<s?-1:1){const i=this.length-1;for(let s=0;s<i;s++)if(e(this.items[s],this.items[s+1])>0)return!0;return!1}splice(e,i,...s){Ft(this._observable),arguments.length===1&&(i=this.length),i??=0;const l=(i?_e.REMOVE:0)|(s.length?_e.ADD:0);if(this._emitBeforeChanges(l))return[];const f=this._splice(e,i,s)||[];return this._emitAfterChanges(l),f}toArray(){return Ft(this._observable),this._items.slice()}toJSON(e){return Ft(this._observable),this.toArray().map((i=>zg(i)?i.toJSON(e):i))}toLocaleString(){return Ft(this._observable),this._items.toLocaleString()}toString(){return Ft(this._observable),this._items.toString()}unshift(...e){return Ft(this._observable),!e.length||this._emitBeforeChanges(_e.ADD)||(this._splice(0,0,e),this._emitAfterChanges(_e.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,i,s){const l=this._items,f=this.itemType;let y,v;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=a1((()=>this._dispatchChange()))),e<0&&(e+=this.length),i){if(v=l.splice(e,i),this.hasEventListener("before-remove")){const b=js.acquire();b.target=this,b.cancellable=!0;for(let S=0,A=v.length;S<A;S++)y=v[S],b.reset(y),this.emit("before-remove",b),b.defaultPrevented&&(v.splice(S,1),l.splice(e,0,y),e+=1,S-=1,A-=1);js.release(b)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const b=js.acquire();b.target=this,b.cancellable=!1;const S=v.length;for(let A=0;A<S;A++)b.reset(v[A]),this.emit("after-remove",b);js.release(b)}}if(s?.length){if(f){const P=[];for(const k of s){const C=f.ensureType(k);C==null&&k!=null||P.push(C)}s=P}const b=this.hasEventListener("before-add"),S=this.hasEventListener("after-add"),A=e===this.length;if(b||S){const P=js.acquire();P.target=this,P.cancellable=!0;const k=js.acquire();k.target=this,k.cancellable=!1;for(const C of s)b?(P.reset(C),this.emit("before-add",P),P.defaultPrevented||(A?l.push(C):l.splice(e++,0,C),this._set("length",l.length),S&&(k.reset(C),this.emit("after-add",k)))):(A?l.push(C):l.splice(e++,0,C),this._set("length",l.length),k.reset(C),this.emit("after-add",k));js.release(k),js.release(P)}else{if(A)for(const P of s)l.push(P);else l.splice(e,0,...s);this._set("length",l.length)}}if((s?.length||v?.length)&&this._notifyChangeEvent(s,v),this.hasEventListener("after-splice")){const b=new $z(this,s,v,e,i);this.emit("after-splice",b)}return v}_emitBeforeChanges(e){let i=!1;if(this.hasEventListener("before-changes")){const s=js.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit("before-changes",s),i=s.defaultPrevented,js.release(s)}return i}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const i=js.acquire();i.target=this,i.cancellable=!1,i.type=e,this.emit("after-changes",i),js.release(i)}this._observable.notify()}_notifyChangeEvent(e,i){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:i})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const i of e){const s=i.changes;La.clear(),Da.clear(),ja.clear();for(const{added:S,removed:A}of s){if(S)if(ja.size===0&&Da.size===0)for(const P of S)La.add(P);else for(const P of S)Da.has(P)?(ja.add(P),Da.delete(P)):ja.has(P)||La.add(P);if(A)if(ja.size===0&&La.size===0)for(const P of A)Da.add(P);else for(const P of A)La.has(P)?La.delete(P):(ja.delete(P),Da.add(P))}const l=zr.acquire();La.forEach((S=>{l.push(S)}));const f=zr.acquire();Da.forEach((S=>{f.push(S)}));const y=this._items,v=i.items,b=zr.acquire();if(ja.forEach((S=>{v.indexOf(S)!==y.indexOf(S)&&b.push(S)})),i.listeners&&(l.length||f.length||b.length)){const S={target:this,added:l,removed:f,moved:b},A=i.listeners.length;for(let P=0;P<A;P++){const k=i.listeners[P];k.removed||k.callback.call(this,S)}}zr.release(l),zr.release(f),zr.release(b)}La.clear(),Da.clear(),ja.clear()}},Bo=uh,uh.ofType=e=>{if(!e)return Bo;if(zv.has(e))return zv.get(e);let i=null;if(typeof e=="function")i=e.prototype.declaredClass;else if(e.base)i=e.base.prototype.declaredClass;else for(const l in e.typeMap){const f=e.typeMap[l].prototype.declaredClass;i?i+=` | ${f}`:i=f}let s=class extends Bo{};return _([F$({Type:e,ensureType:typeof e=="function"?Vr(e):Bl(e)})],s.prototype,"itemType",void 0),s=_([Y(`esri.core.Collection<${i}>`)],s),zv.set(e,s),s},uh);_([E()],hl.prototype,"_updating",void 0),_([E()],hl.prototype,"length",void 0),_([E()],hl.prototype,"items",null),_([E({readOnly:!0})],hl.prototype,"updating",null),hl=Bo=_([Y("esri.core.Collection")],hl);const kt=hl;function Ea(t,e,i=kt){return e||(e=new i),e===t||(e.removeAll(),Pz(t)?e.addMany(t):t&&e.add(t)),e}function U$(t){return t}function Pz(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let Oz=class G${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new G$;return this._values.forEach(((s,l)=>{e&&e.has(l)||i.set(l,yt(s.value),s.origin)})),i}get(e,i){i=this._normalizeOrigin(i);const s=this._values.get(e);return i==null||s?.origin===i?s?.value:void 0}originOf(e){return this._values.get(e)?.origin??se.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter((s=>this._values.get(s)?.origin===e))}set(e,i,s){if((s=this._normalizeOrigin(s))===se.DEFAULTS){const l=this._values.get(e);if(l?.origin!=null&&l.origin>s)return}this._values.set(e,new kz(i,s))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach((({value:i},s)=>e(i,s)))}_normalizeOrigin(e){if(e!=null)return e===se.DEFAULTS?e:se.USER}},kz=class{constructor(e,i){this.value=e,this.origin=i}};function B$(t,e,i){e.keys().forEach((l=>{i.set(l,e.get(l),se.DEFAULTS)}));const s=t.metadata;Object.keys(s).forEach((l=>{t.internalGet(l)&&i.set(l,t.internalGet(l),se.DEFAULTS)}))}function Rz(t,e,i){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const s=t.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&p7(s,i))return!0}else for(const l of s)if(l===e||l.includes(".")&&l.indexOf(e)===0&&p7(l,i))return!0;return!1}function Cz(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Nz(t,e,i,s,l){let f=kw(e[i],l);Cz(f)&&(t[i]=!0);for(const y of Object.getOwnPropertyNames(e))f=kw(e[y],l),Rz(f,i,s)&&(t[y]=!0)}function Lz(t,e,i,s){const l=i.metadata,f=vz(l[e],s),y=f?.default;if(y===void 0)return;const v=typeof y=="function"?y.call(t,e,s):y;v!==void 0&&i.set(e,v)}const q$={origin:"service"};function V$(t,e,i=q$){if(!e||typeof e!="object")return;const s=cs(t),l=s.metadata,f={};for(const y of Object.getOwnPropertyNames(e))Nz(f,l,y,e,i);s.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(f)){const v=kw(l[y],i).read,b=v?.source;let S;S=b&&typeof b=="string"?s1(e,b):e[y],v?.reader&&(S=v.reader.call(t,S,e,i)),S!==void 0&&s.set(y,S)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(l))f[y]||Lz(t,y,s,i)}s.setDefaultOrigin("user")}function Dz(t,e,i,s=q$){const l={...s,messages:[]};i(l),l.messages?.forEach((f=>{f.type!=="warning"||t.loaded?s?.messages&&s.messages.push(f):t.loadWarnings.push(f)}))}function jz(t,e,i,s,l){const f={};return e.write?.writer?.call(t,s,f,i,l),f}function H$(t,e,i,s,l,f){if(!s?.write)return!1;const y=Ln(t,i);if(!l&&s.write.overridePolicy){const v=s.write.overridePolicy.call(t,y,i,f??void 0);v!==void 0&&(l=v)}if(l||(l=s.write),!l||l.enabled===!1||l.layerContainerTypes&&f?.layerContainerType&&!l.layerContainerTypes.includes(f.layerContainerType))return!1;if((y===null&&!l.allowNull&&!l.writerEnsuresNonNull||y===void 0)&&l.isRequired){const v=new ct("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return v&&f?.messages?f.messages.push(v):v&&!f&&At.getLogger("esri.core.accessorSupport.write").error(v.name,v.message),!1}return!(y===void 0||y===null&&!l.allowNull&&!l.writerEnsuresNonNull||!l.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===se.DEFAULTS)&&Fz(t,i,f,s,y)||!l.ignoreOrigin&&f?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<wa(f.origin))}function Fz(t,e,i,s,l){const f=s.default;if(f===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(l);if(typeof f=="function"){if(Array.isArray(l)){const y=f.call(t,e,i??void 0);return Qd(y,l)}return!1}return f===l}function zz(t,e,i,s){const l=cs(t),f=l.metadata,y=L$(f[e],s);return!!y&&H$(t,l,e,y,i,s)}function W$(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return Dy(e,t.toJSON(i));const s=cs(t),l=s.metadata;for(const f in l){const y=L$(l[f],i);if(!H$(t,s,f,y,void 0,i))continue;const v=Ln(t,f),b=jz(t,y,y.write&&typeof y.write.target=="string"?y.write.target:f,v,i);Object.keys(b).length>0&&(e=Dy(e,b),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then((()=>Dy(e,b,(()=>"replace-arrays"))))),i?.writtenProperties&&i.writtenProperties.push({target:t,propName:f,oldOrigin:oF(s.store.originOf(f)),newOrigin:i.origin}))}return e}const J$=t=>{let e=class extends t{constructor(...i){super(...i);const s=cs(this),l=s.store,f=new Oz;s.store=f,B$(s,l,f)}read(i,s){V$(this,i,s)}write(i,s){return W$(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return Uz.call(this,i,s)}};return e=_([Y("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Uz(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let Xf=class extends J$(Ot){};Xf=_([Y("esri.core.JSONSupport")],Xf),(function(t){t.JSONSupportMixin=J$})(Xf||(Xf={}));const It=Xf;var cl;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(cl||(cl={}));let Gz=class{constructor(){this._resolver=ln(),this._status=cl.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=cl.RESOLVED,this._cleanUp()}),(()=>{this._status=cl.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===cl.RESOLVED}isRejected(){return this._status===cl.REJECTED}isFulfilled(){return this._status!==cl.PENDING}abort(){this._resolver.reject(Be())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=ln(),i=[...this._resolvingPromises,e.promise],s=this._allPromise=Promise.all(i);s.then((()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()}),(l=>{this.isFulfilled()||this._allPromise!==s||kr(l)||this._resolver.reject(l)})),e.resolve()}};const Y$=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new Gz,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then((()=>this)).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=_([Y("esri.core.Promise")],e),e};let Tl=class extends Y$(Ot){};Tl=_([Y("esri.core.Promise")],Tl),(function(t){t.EsriPromiseMixin=Y$})(Tl||(Tl={}));const Bz="not-loaded",qz="loading",Vz="failed",R7="loaded",K$=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((s=>{const l=this.load.bind(this);this.load=f=>{const y=new Promise(((v,b)=>{const S=y_(f,b);this.destroyed&&b(new ct("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(v,b).finally((()=>{S&&S.remove()}))}));if(this.loadStatus===Bz){this._set("loadStatus",qz);const v=this._loadController=new AbortController;l({signal:v.signal})}return s(),y}}))),this.when((()=>{this._set("loadStatus",R7),this._loadController=null}),(s=>{this._set("loadStatus",Vz),this._set("loadError",s),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=_a(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===R7}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new ct("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return _([E({readOnly:!0})],e.prototype,"loaded",null),_([E({readOnly:!0})],e.prototype,"loadError",void 0),_([E({clonable:!1})],e.prototype,"loadStatus",void 0),_([E({type:[Mo],readOnly:!0})],e.prototype,"loadWarnings",null),e=_([Y("esri.core.Loadable")],e),e};let tn=class extends K$(Tl){};tn=_([Y("esri.core.Loadable")],tn),(function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=K$,t.isLoadable=e})(tn||(tn={}));function mdt(t,e,i){return g_(t.map(((s,l)=>e.apply(i,[s,l]))))}async function Hz(t,e,i){return(await g_(t.map(((s,l)=>e.apply(i,[s,l]))))).map((s=>s.value))}function P_(t){return{ok:!0,value:t}}function O_(t){return{ok:!1,error:t}}function Wz(t){return t!=null&&t.ok===!0?t.value:null}function Jz(t){return t!=null&&t.ok===!1?t.error:null}async function k_(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return P_(await t)}catch(e){return O_(e)}}async function vdt(t){try{return P_(await t)}catch(e){return ul(e),O_(e)}}function _2(t,e){return new Wa(t,e)}let Wa=class extends Ot{get value(){return Wz(this._result)}get error(){return Jz(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=_a(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:s}=this._abortController;this.promise=e(s),this.promise.then((l=>{this._result=P_(l),this._cleanup()}),(l=>{this._result=O_(l),this._cleanup()})),this._abortHandle=Vn(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ri(this._abortHandle),this._abortController=null}};_([E()],Wa.prototype,"value",null),_([E()],Wa.prototype,"error",null),_([E()],Wa.prototype,"finished",null),_([E()],Wa.prototype,"promise",void 0),_([E()],Wa.prototype,"_result",void 0),Wa=_([Y("esri.core.asyncUtils.ReactiveTask")],Wa);async function Z$(t,e){return await t.load(),Yz(t,e)}async function Yz(t,e){const i=[],s=(...f)=>{for(const y of f)y!=null&&(Array.isArray(y)?s(...y):kt.isCollection(y)?y.forEach((v=>s(v))):tn.isLoadable(y)&&i.push(y))};e(s);let l=null;if(await Hz(i,(async f=>{const y=await k_(Kz(f)?f.loadAll():f.load());y.ok!==!1||l||(l=y)})),l)throw l.error;return t}function Kz(t){return"loadAll"in t&&typeof t.loadAll=="function"}function Xt(t,e,i){let s,l;return e===void 0?(l=t,s=[void 0]):typeof e!="string"?(l=t,s=[void 0],i=e):(l=e,s=Array.isArray(t)?t:[t]),(f,y)=>{const v=f.constructor.prototype;for(const b of s){const S=M_(f,b,l);S.write&&typeof S.write=="object"||(S.write={}),i&&(S.write.target=i),S.write.writer=v[y]}}}let Bi=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Zz(e),this.apiValues=C7(this._apiToJSON),this.jsonValues=C7(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,l,f)=>{const y=this.toJSON(s);y!==void 0&&Ah(f,y,l)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function Zz(t){const e={};for(const i in t)e[t[i]]=i;return e}function C7(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Hr(){return function(t,e){return new Bi(t,{ignoreUnknown:!0,...e})}}let R_=class{constructor(e,i,s,l,f,y){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=s,this.atmosphereHeight=l,this.scaleHeight=f;const v=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*v,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=y||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const fi=new R_(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),bo=new R_(3396190,1/169.8944472236118,23e4,6e4,.111),ql=new R_(1737400,0,0,0,0);function _i(t){if(!pe.assetsPath)throw At.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ct("assets:path-not-set","config.assetsPath is not set");return t1(pe.assetsPath,t)}let Uv,X=null;function x2(){return!!X}function Xz(){return!!rt("esri-wasm")}function C_(){return Uv||(Uv=mt(()=>import("./pe-wasm-DzdsRf4N.js"),[]).then((({default:t})=>t({locateFile:e=>_i(`esri/geometry/support/${e}`)}))).then((t=>{tA(t)})),Uv)}var Cw,ti;(function(t){function e(f,y,v){X.ensureCache.prepare();const b=ju(v),S=v===b,A=X.ensureFloat64(b),P=X._pe_geog_to_proj(X.getPointer(f),y,A);return P&&vl(v,y,A,S),P}function i(f,y,v,b){switch(b){case ti.PE_TRANSFORM_P_TO_G:return s(f,y,v);case ti.PE_TRANSFORM_G_TO_P:return e(f,y,v)}return 0}function s(f,y,v){return l(f,y,v,0)}function l(f,y,v,b){X.ensureCache.prepare();const S=ju(v),A=v===S,P=X.ensureFloat64(S),k=X._pe_proj_to_geog_center(X.getPointer(f),y,P,b);return k&&vl(v,y,P,A),k}t.geogToProj=e,t.projGeog=i,t.projToGeog=s,t.projToGeogCenter=l})(Cw||(Cw={})),(function(t){function e(){t.PE_BUFFER_MAX=X.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=X.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=X.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=X.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=X.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=X.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=X.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=X.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=X.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=X.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=X.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=X.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=X.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=X.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=X.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=X.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=X.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=X.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=X.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=X.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=X.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=X.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=X.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=X.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=X.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=X.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=X.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=X.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=X.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=X.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=X.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=X.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e})(ti||(ti={}));let X$=null;var Nw;(function(t){const e={},i={},s=C=>{const L=C.getType();switch(L){case ti.PE_TYPE_GEOGCS:C=X.castObject(C,X.PeGeogcs);break;case ti.PE_TYPE_PROJCS:C=X.castObject(C,X.PeProjcs);break;case ti.PE_TYPE_GEOGTRAN:C=X.castObject(C,X.PeGeogtran);break;default:L&ti.PE_TYPE_UNIT&&(C=X.castObject(C,X.PeUnit))}return C};function l(){X.PeFactory.prototype.initialize(null)}function f(C){return y(ti.PE_TYPE_COORDSYS,C)}function y(C,L){let F=null,q=e[C];if(q||(q={},e[C]=q),q.hasOwnProperty(String(L))&&(F=q[L],X.compare(F,X.NULL)&&(F=null)),!F){const H=X.PeFactory.prototype.factoryByType(C,L);X.compare(H,X.NULL)||(F=s(H),q[L]=F)}return F}function v(C,L){let F=null,q=i[C];if(q||(q={},i[C]=q),q.hasOwnProperty(L)&&(F=q[L],X.compare(F,X.NULL)&&(F=null)),!F){const H=X.PeFactory.prototype.fromString(C,L);X.compare(H,X.NULL)||(F=s(H),q[L]=F)}return F}function b(C){return y(ti.PE_TYPE_GEOGCS,C)}function S(C){return y(ti.PE_TYPE_GEOGTRAN,C)}function A(C){return X.PeFactory.prototype.getCode(C)}function P(C){return y(ti.PE_TYPE_PROJCS,C)}function k(C){return y(ti.PE_TYPE_UNIT,C)}t.initialize=l,t.coordsys=f,t.factoryByType=y,t.fromString=v,t.geogcs=b,t.geogtran=S,t.getCode=A,t.projcs=P,t.unit=k})(Nw||(Nw={}));let Q$=null;var nm,Lw,Dw,jw,Fw,zw,om,Uw,am,lm,Gw;function tA(t){function e(f,y,v){f[y]=v(f[y])}X=t,ti.init(),nm.init(),om.init(),am.init(),lm.init(),X$=class extends X.PeDouble{constructor(f=NaN){super(f)}destroy(){X.destroy(this)}[Symbol.dispose](){this.destroy()}},Q$=class extends X.PeGCSExtent{destroy(){X.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[X.PeAngunit,X.PeDatum,X.PeGeogcs,X.PeGeogtran,X.PeObject,X.PeParameter,X.PePrimem,X.PeProjcs,X.PeSpheroid,X.PeUnit];for(const f of i)e(f.prototype,"getName",(y=>function(){return y.call(this,new Array(ti.PE_NAME_MAX))}));for(const f of[X.PeGeogtran,X.PeProjcs])e(f.prototype,"getParameters",(y=>function(){const v=new Array(ti.PE_PARM_MAX);let b=y.call(this);for(let S=0;S<v.length;S++){const A=X.getValue(b,"*");v[S]=A?X.wrapPointer(A,X.PeParameter):null,b+=Int32Array.BYTES_PER_ELEMENT}return v}));e(X.PeHorizon.prototype,"getCoord",(f=>function(y=!1){const v=this.getSize();if(!v)return null;const b=[];return vl(b,v,f.call(this),y),b})),e(X.PeGTlistExtendedEntry.prototype,"getEntries",(f=>{const y=X._pe_getPeGTlistExtendedGTsSize();return function(){let v=null;const b=f.call(this);if(!X.compare(b,X.NULL)){v=[b];const S=this.getSteps();if(S>1){const A=X.getPointer(b);for(let P=1;P<S;P++)v.push(X.wrapPointer(A+y*P,X.PeGTlistExtendedGTs))}}return v}}));const s=X._pe_getPeHorizonSize(),l=f=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(f))return y.get(f);let v=null;const b=f.call(this);if(!X.compare(b,X.NULL)){v=[b];const S=b.getNump();if(S>1){const A=X.getPointer(b);for(let P=1;P<S;P++)v.push(X.wrapPointer(A+s*P,X.PeHorizon))}}return y.set(f,v),v};e(X.PeProjcs.prototype,"horizonGcsGenerate",l),e(X.PeProjcs.prototype,"horizonPcsGenerate",l),X.PeObject.prototype.toString=function(f=ti.PE_STR_OPTS_NONE){X.ensureCache.prepare();const y=X.getPointer(this),v=X.ensureInt8(new Array(ti.PE_BUFFER_MAX));return X.UTF8ToString(X._pe_object_to_string_ext(y,f,v))},X.PeGeogcs.prototype.destroy=function(){this.Delete(),On(this),this.ptr=0},X.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},X.PeProjcs.prototype.destroy=function(){this.Delete(),On(this),this.ptr=0},X.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function On(t){if(!t)return;const e=X.getClass(t);if(!e)return;const i=X.getCache(e);if(!i)return;const s=X.getPointer(t);s&&delete i[s]}function F1(t,e){const i=[],s=new Array(e);for(let l=0;l<t;l++)i.push(X.ensureInt8(s));return i}function ju(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function vl(t,e,i,s=!1){if(s)for(let l=0;l<2*e;l++)t[l]=X.getValue(i+l*Float64Array.BYTES_PER_ELEMENT,"double");else{const l=t.length===0;for(let f=0;f<e;f++)l&&(t[f]=new Array(2)),t[f][0]=X.getValue(i,"double"),t[f][1]=X.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=X.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=X._pe_getPeGTlistExtendedEntrySize()}function s(l,f,y,v,b,S){let A=null;const P=new X.PeInteger(S);try{const k=X.PeGTlistExtended.prototype.getGTlist(l,f,y,v,b,P);if((S=P.val)&&(A=[k],S>1)){const C=X.getPointer(k);for(let L=1;L<S;L++)A.push(X.wrapPointer(C+e*L,X.PeGTlistExtendedEntry))}}finally{X.destroy(P)}return A}t.init=i,t.getGTlist=s})(nm||(nm={})),(function(t){function e(i){if(i?.length){for(const s of i)On(s),s.getEntries().forEach((l=>{On(l);const f=l.getGeogtran();On(f),f.getParameters().forEach(On),[f.getGeogcs1(),f.getGeogcs2()].forEach((y=>{On(y);const v=y.getDatum();On(v),On(v.getSpheroid()),On(y.getPrimem()),On(y.getUnit())}))}));X.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e})(Lw||(Lw={})),(function(t){function e(i,s,l,f,y){X.ensureCache.prepare();const v=ju(l),b=l===v,S=X.ensureFloat64(v);let A=0;f&&(A=X.ensureFloat64(f));const P=X._pe_geog_to_geog(X.getPointer(i),s,S,A,y);return P&&vl(l,s,S,b),P}t.geogToGeog=e})(Dw||(Dw={})),(function(t){function e(f,y,v,b,S,A,P,k){X.PeLineType.prototype.geodesic_coordinate(f,y,v,b,S,A,P,k)}function i(f,y,v,b,S,A,P,k,C){X.PeLineType.prototype.geodetic_coordinate(f,y,v,b,S,A,P,k,C)}function s(f,y,v,b,S,A,P,k,C,L){X.PeLineType.prototype.geodetic_distance(f,y,v,b,S,A,P,k,C,L)}function l(f,y,v,b,S,A,P,k,C){X.PeLineType.prototype.great_elliptic_distance(f,y,v,b,S,A,P,k,C)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=s,t.greatEllipticDistance=l})(jw||(jw={})),(function(t){function e(y,v){return X.PeMath.prototype.phi_to_eta(y,v)}function i(y,v){return X.PeMath.prototype.eta_to_phi(y,v)}function s(y,v){return X.PeMath.prototype.phi_to_phig(y,v)}function l(y,v,b){return X.PeMath.prototype.q(y,v,b)}function f(y,v){return X.PeMath.prototype.q90(y,v)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=s,t.q=l,t.q90=f})(Fw||(Fw={})),(function(t){const e=(S,A,P,k,C,L)=>{let F,q;switch(X.ensureCache.prepare(),S){case"dd":F=X._pe_geog_to_dd,q=ti.PE_DD_MAX;break;case"ddm":F=X._pe_geog_to_ddm,q=ti.PE_DDM_MAX;break;case"dms":F=X._pe_geog_to_dms,q=ti.PE_DMS_MAX}let H=0;A&&(H=X.getPointer(A));const J=ju(k),Q=X.ensureFloat64(J),tt=F1(P,q),et=F(H,P,Q,C,X.ensureInt32(tt));if(et)for(let nt=0;nt<P;nt++)L[nt]=X.UTF8ToString(tt[nt]);return et},i=(S,A,P,k,C)=>{let L;switch(X.ensureCache.prepare(),S){case"dd":L=X._pe_dd_to_geog;break;case"ddm":L=X._pe_ddm_to_geog;break;case"dms":L=X._pe_dms_to_geog}let F=0;A&&(F=X.getPointer(A));const q=k.map((tt=>X.ensureString(tt))),H=X.ensureInt32(q),J=X.ensureFloat64(new Array(2*P)),Q=L(F,P,H,J);return Q&&vl(C,P,J),Q};function s(S,A,P,k,C){return e("dms",S,A,P,k,C)}function l(S,A,P,k){return i("dms",S,A,P,k)}function f(S,A,P,k,C){return e("ddm",S,A,P,k,C)}function y(S,A,P,k){return i("ddm",S,A,P,k)}function v(S,A,P,k,C){return e("dd",S,A,P,k,C)}function b(S,A,P,k){return i("dd",S,A,P,k)}t.geogToDms=s,t.dmsToGeog=l,t.geogToDdm=f,t.ddmToGeog=y,t.geogToDd=v,t.ddToGeog=b})(zw||(zw={})),(function(t){function e(){t.PE_MGRS_STYLE_NEW=X.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=X.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=X.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=X.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=X.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(l,f,y,v,b,S,A){X.ensureCache.prepare();let P=0;l&&(P=X.getPointer(l));const k=ju(y),C=X.ensureFloat64(k),L=F1(f,ti.PE_MGRS_MAX),F=X.ensureInt32(L),q=X._pe_geog_to_mgrs_extended(P,f,C,v,b,S,F);if(q)for(let H=0;H<f;H++)A[H]=X.UTF8ToString(L[H]);return q}function s(l,f,y,v,b){X.ensureCache.prepare();let S=0;l&&(S=X.getPointer(l));const A=y.map((L=>X.ensureString(L))),P=X.ensureInt32(A),k=X.ensureFloat64(new Array(2*f)),C=X._pe_mgrs_to_geog_extended(S,f,P,v,k);return C&&vl(b,f,k),C}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=s})(om||(om={})),(function(t){function e(s,l,f,y,v,b,S){X.ensureCache.prepare();let A=0;s&&(A=X.getPointer(s));const P=ju(f),k=X.ensureFloat64(P),C=F1(l,ti.PE_MGRS_MAX),L=X.ensureInt32(C),F=X._pe_geog_to_usng(A,l,k,y,v,b,L);if(F)for(let q=0;q<l;q++)S[q]=X.UTF8ToString(C[q]);return F}function i(s,l,f,y){X.ensureCache.prepare();let v=0;s&&(v=X.getPointer(s));const b=f.map((k=>X.ensureString(k))),S=X.ensureInt32(b),A=X.ensureFloat64(new Array(2*l)),P=X._pe_usng_to_geog(v,l,S,A);return P&&vl(y,l,A),P}t.geogToUsng=e,t.usngToGeog=i})(Uw||(Uw={})),(function(t){function e(){t.PE_UTM_OPTS_NONE=X.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=X.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=X.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(l,f,y,v,b){X.ensureCache.prepare();let S=0;l&&(S=X.getPointer(l));const A=ju(y),P=X.ensureFloat64(A),k=F1(f,ti.PE_UTM_MAX),C=X.ensureInt32(k),L=X._pe_geog_to_utm(S,f,P,v,C);if(L)for(let F=0;F<f;F++)b[F]=X.UTF8ToString(k[F]);return L}function s(l,f,y,v,b){X.ensureCache.prepare();let S=0;l&&(S=X.getPointer(l));const A=y.map((L=>X.ensureString(L))),P=X.ensureInt32(A),k=X.ensureFloat64(new Array(2*f)),C=X._pe_utm_to_geog(S,f,P,v,k);return C&&vl(b,f,k),C}t.init=e,t.geogToUtm=i,t.utmToGeog=s})(am||(am={})),(function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=X.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=X.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=X.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=X.PePCSInfo.prototype.PE_POLE_POINT}function s(l,f=t.PE_PCSINFO_OPTION_DOMAIN){let y=null,v=null;return e.has(l)&&(v=e.get(l),v[f]&&(y=v[f])),y||(y=X.PePCSInfo.prototype.generate(l,f),v||(v=[],e.set(l,v)),v[f]=y),y}t.init=i,t.generate=s})(lm||(lm={})),(function(t){function e(){return X.PeVersion.prototype.version_string()}t.versionString=e})(Gw||(Gw={}));const eA=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Cw},get PeDefs(){return ti},get PeDouble(){return X$},get PeFactory(){return Nw},get PeGCSExtent(){return Q$},get PeGTTransformations(){return Dw},get PeGTlistExtended(){return nm},get PeGTlistExtendedEntry(){return Lw},get PeLineType(){return jw},get PeMath(){return Fw},get PeNotationDms(){return zw},get PeNotationMgrs(){return om},get PeNotationUsng(){return Uw},get PeNotationUtm(){return am},get PePCSInfo(){return lm},get PeVersion(){return Gw},_init:tA,get _pe(){return X},isLoaded:x2,isSupported:Xz,load:C_},Symbol.toStringTag,{value:"Module"}));var wh;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(wh||(wh={}));let T;const G={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(T=2e3;T<=2045;T++)G[T]=0;for(T=2056;T<=2065;T++)G[T]=0;for(T=2067;T<=2135;T++)G[T]=0;for(T=2137;T<=2154;T++)G[T]=0;for(T=2161;T<=2170;T++)G[T]=0;for(T=2172;T<=2193;T++)G[T]=0;for(T=2195;T<=2198;T++)G[T]=0;for(T=2200;T<=2203;T++)G[T]=0;for(T=2205;T<=2217;T++)G[T]=0;for(T=2222;T<=2224;T++)G[T]=1;for(T=2225;T<=2250;T++)G[T]=2;for(T=2251;T<=2253;T++)G[T]=1;for(T=2257;T<=2264;T++)G[T]=2;for(T=2274;T<=2279;T++)G[T]=2;for(T=2280;T<=2282;T++)G[T]=1;for(T=2283;T<=2289;T++)G[T]=2;for(T=2290;T<=2292;T++)G[T]=0;for(T=2308;T<=2313;T++)G[T]=0;for(T=2315;T<=2491;T++)G[T]=0;for(T=2494;T<=2866;T++)G[T]=0;for(T=2867;T<=2869;T++)G[T]=1;for(T=2870;T<=2888;T++)G[T]=2;for(T=2891;T<=2895;T++)G[T]=2;for(T=2896;T<=2898;T++)G[T]=1;for(T=2902;T<=2908;T++)G[T]=2;for(T=2915;T<=2920;T++)G[T]=2;for(T=2921;T<=2923;T++)G[T]=1;for(T=2924;T<=2930;T++)G[T]=2;for(T=2931;T<=2962;T++)G[T]=0;for(T=2964;T<=2968;T++)G[T]=2;for(T=2969;T<=2973;T++)G[T]=0;for(T=2975;T<=2991;T++)G[T]=0;for(T=2995;T<=3051;T++)G[T]=0;for(T=3054;T<=3079;T++)G[T]=0;for(T=3081;T<=3088;T++)G[T]=0;for(T=3092;T<=3101;T++)G[T]=0;for(T=3106;T<=3138;T++)G[T]=0;for(T=3146;T<=3151;T++)G[T]=0;for(T=3153;T<=3166;T++)G[T]=0;for(T=3168;T<=3172;T++)G[T]=0;for(T=3174;T<=3203;T++)G[T]=0;for(T=3294;T<=3358;T++)G[T]=0;for(T=3367;T<=3403;T++)G[T]=0;for(T=3408;T<=3416;T++)G[T]=0;for(T=3417;T<=3438;T++)G[T]=2;for(T=3441;T<=3446;T++)G[T]=2;for(T=3447;T<=3450;T++)G[T]=0;for(T=3451;T<=3459;T++)G[T]=2;for(T=3460;T<=3478;T++)G[T]=0;for(T=3554;T<=3559;T++)G[T]=0;for(T=3560;T<=3570;T++)G[T]=2;for(T=3571;T<=3581;T++)G[T]=0;for(T=3594;T<=3597;T++)G[T]=0;for(T=3601;T<=3604;T++)G[T]=0;for(T=3637;T<=3639;T++)G[T]=0;for(T=3665;T<=3667;T++)G[T]=0;for(T=3693;T<=3695;T++)G[T]=0;for(T=3701;T<=3727;T++)G[T]=0;for(T=3728;T<=3739;T++)G[T]=2;for(T=3740;T<=3751;T++)G[T]=0;for(T=3753;T<=3760;T++)G[T]=2;for(T=3761;T<=3773;T++)G[T]=0;for(T=3775;T<=3777;T++)G[T]=0;for(T=3779;T<=3781;T++)G[T]=0;for(T=3783;T<=3785;T++)G[T]=0;for(T=3788;T<=3791;T++)G[T]=0;for(T=3797;T<=3802;T++)G[T]=0;for(T=3814;T<=3816;T++)G[T]=0;for(T=3825;T<=3829;T++)G[T]=0;for(T=3832;T<=3841;T++)G[T]=0;for(T=3844;T<=3852;T++)G[T]=0;for(T=3873;T<=3885;T++)G[T]=0;for(T=3890;T<=3893;T++)G[T]=0;for(T=3907;T<=3912;T++)G[T]=0;for(T=3942;T<=3950;T++)G[T]=0;for(T=3968;T<=3970;T++)G[T]=0;for(T=3973;T<=3976;T++)G[T]=0;for(T=3986;T<=3989;T++)G[T]=0;for(T=3994;T<=3997;T++)G[T]=0;for(T=4048;T<=4051;T++)G[T]=0;for(T=4056;T<=4063;T++)G[T]=0;for(T=4093;T<=4096;T++)G[T]=0;for(T=4390;T<=4398;T++)G[T]=0;for(T=4399;T<=4413;T++)G[T]=2;for(T=4418;T<=4433;T++)G[T]=2;for(T=4455;T<=4457;T++)G[T]=2;for(T=4484;T<=4489;T++)G[T]=0;for(T=4491;T<=4554;T++)G[T]=0;for(T=4568;T<=4589;T++)G[T]=0;for(T=4652;T<=4656;T++)G[T]=0;for(T=4766;T<=4800;T++)G[T]=0;for(T=5014;T<=5016;T++)G[T]=0;for(T=5069;T<=5072;T++)G[T]=0;for(T=5105;T<=5130;T++)G[T]=0;for(T=5167;T<=5188;T++)G[T]=0;for(T=5253;T<=5259;T++)G[T]=0;for(T=5269;T<=5275;T++)G[T]=0;for(T=5292;T<=5311;T++)G[T]=0;for(T=5329;T<=5331;T++)G[T]=0;for(T=5343;T<=5349;T++)G[T]=0;for(T=5355;T<=5357;T++)G[T]=0;for(T=5387;T<=5389;T++)G[T]=0;for(T=5459;T<=5463;T++)G[T]=0;for(T=5479;T<=5482;T++)G[T]=0;for(T=5518;T<=5520;T++)G[T]=0;for(T=5530;T<=5539;T++)G[T]=0;for(T=5550;T<=5552;T++)G[T]=0;for(T=5562;T<=5583;T++)G[T]=0;for(T=5623;T<=5625;T++)G[T]=2;for(T=5631;T<=5639;T++)G[T]=0;for(T=5649;T<=5653;T++)G[T]=0;for(T=5663;T<=5680;T++)G[T]=0;for(T=5682;T<=5685;T++)G[T]=0;for(T=5875;T<=5877;T++)G[T]=0;for(T=5896;T<=5899;T++)G[T]=0;for(T=5921;T<=5940;T++)G[T]=0;for(T=6050;T<=6125;T++)G[T]=0;for(T=6244;T<=6275;T++)G[T]=0;for(T=6328;T<=6348;T++)G[T]=0;for(T=6350;T<=6356;T++)G[T]=0;for(T=6366;T<=6372;T++)G[T]=0;for(T=6381;T<=6387;T++)G[T]=0;for(T=6393;T<=6404;T++)G[T]=0;for(T=6480;T<=6483;T++)G[T]=0;for(T=6511;T<=6514;T++)G[T]=0;for(T=6579;T<=6581;T++)G[T]=0;for(T=6619;T<=6624;T++)G[T]=0;for(T=6625;T<=6627;T++)G[T]=2;for(T=6628;T<=6632;T++)G[T]=0;for(T=6634;T<=6637;T++)G[T]=0;for(T=6669;T<=6692;T++)G[T]=0;for(T=6707;T<=6709;T++)G[T]=0;for(T=6720;T<=6723;T++)G[T]=0;for(T=6732;T<=6738;T++)G[T]=0;for(T=6931;T<=6933;T++)G[T]=0;for(T=6956;T<=6959;T++)G[T]=0;for(T=7005;T<=7007;T++)G[T]=0;for(T=7057;T<=7070;T++)G[T]=2;for(T=7074;T<=7082;T++)G[T]=0;for(T=7109;T<=7118;T++)G[T]=0;for(T=7119;T<=7127;T++)G[T]=1;for(T=7374;T<=7376;T++)G[T]=0;for(T=7528;T<=7586;T++)G[T]=0;for(T=7587;T<=7645;T++)G[T]=2;for(T=7692;T<=7696;T++)G[T]=0;for(T=7755;T<=7787;T++)G[T]=0;for(T=7791;T<=7795;T++)G[T]=0;for(T=7799;T<=7801;T++)G[T]=0;for(T=7803;T<=7805;T++)G[T]=0;for(T=7825;T<=7831;T++)G[T]=0;for(T=7845;T<=7859;T++)G[T]=0;for(T=8013;T<=8032;T++)G[T]=0;for(T=8065;T<=8068;T++)G[T]=1;for(T=8518;T<=8529;T++)G[T]=2;for(T=8533;T<=8536;T++)G[T]=2;for(T=8538;T<=8540;T++)G[T]=2;for(T=8677;T<=8679;T++)G[T]=0;for(T=8836;T<=8840;T++)G[T]=0;for(T=8857;T<=8859;T++)G[T]=0;for(T=8908;T<=8910;T++)G[T]=0;for(T=9154;T<=9159;T++)G[T]=0;for(T=9205;T<=9218;T++)G[T]=0;for(T=9271;T<=9273;T++)G[T]=0;for(T=9295;T<=9297;T++)G[T]=0;for(T=9356;T<=9360;T++)G[T]=0;for(T=9404;T<=9407;T++)G[T]=0;for(T=9476;T<=9482;T++)G[T]=0;for(T=9487;T<=9494;T++)G[T]=0;for(T=9697;T<=9699;T++)G[T]=0;for(T=9821;T<=9865;T++)G[T]=0;for(T=10285;T<=10291;T++)G[T]=0;for(T=10314;T<=10317;T++)G[T]=0;for(T=10448;T<=10465;T++)G[T]=0;for(T=10726;T<=10729;T++)G[T]=0;for(T=10731;T<=10733;T++)G[T]=0;for(T=11114;T<=11118;T++)G[T]=0;for(T=20004;T<=20032;T++)G[T]=0;for(T=20047;T<=20049;T++)G[T]=0;for(T=20062;T<=20092;T++)G[T]=0;for(T=20135;T<=20138;T++)G[T]=0;for(T=20248;T<=20258;T++)G[T]=0;for(T=20348;T<=20358;T++)G[T]=0;for(T=20436;T<=20440;T++)G[T]=0;for(T=20822;T<=20824;T++)G[T]=0;for(T=20904;T<=20932;T++)G[T]=0;for(T=20934;T<=20936;T++)G[T]=0;for(T=21004;T<=21032;T++)G[T]=0;for(T=21035;T<=21037;T++)G[T]=0;for(T=21095;T<=21097;T++)G[T]=0;for(T=21148;T<=21150;T++)G[T]=0;for(T=21207;T<=21264;T++)G[T]=0;for(T=21307;T<=21364;T++)G[T]=0;for(T=21413;T<=21423;T++)G[T]=0;for(T=21453;T<=21463;T++)G[T]=0;for(T=21473;T<=21483;T++)G[T]=0;for(T=21780;T<=21782;T++)G[T]=0;for(T=21891;T<=21894;T++)G[T]=0;for(T=21896;T<=21899;T++)G[T]=0;for(T=22171;T<=22177;T++)G[T]=0;for(T=22181;T<=22187;T++)G[T]=0;for(T=22191;T<=22197;T++)G[T]=0;for(T=22207;T<=22222;T++)G[T]=0;for(T=22229;T<=22232;T++)G[T]=0;for(T=22234;T<=22236;T++)G[T]=0;for(T=22243;T<=22250;T++)G[T]=0;for(T=22262;T<=22265;T++)G[T]=0;for(T=22307;T<=22322;T++)G[T]=0;for(T=22348;T<=22357;T++)G[T]=0;for(T=22407;T<=22422;T++)G[T]=0;for(T=22462;T<=22465;T++)G[T]=0;for(T=22521;T<=22525;T++)G[T]=0;for(T=22607;T<=22622;T++)G[T]=0;for(T=22641;T<=22646;T++)G[T]=0;for(T=22648;T<=22657;T++)G[T]=0;for(T=22707;T<=22722;T++)G[T]=0;for(T=22762;T<=22765;T++)G[T]=0;for(T=22807;T<=22822;T++)G[T]=0;for(T=22991;T<=22994;T++)G[T]=0;for(T=23028;T<=23038;T++)G[T]=0;for(T=23301;T<=23333;T++)G[T]=2;for(T=23830;T<=23853;T++)G[T]=0;for(T=23866;T<=23872;T++)G[T]=0;for(T=23877;T<=23884;T++)G[T]=0;for(T=23886;T<=23894;T++)G[T]=0;for(T=23946;T<=23948;T++)G[T]=0;for(T=24311;T<=24313;T++)G[T]=0;for(T=24342;T<=24347;T++)G[T]=0;for(T=24370;T<=24374;T++)G[T]=10;for(T=24375;T<=24381;T++)G[T]=0;for(T=24718;T<=24721;T++)G[T]=0;for(T=24817;T<=24821;T++)G[T]=0;for(T=24877;T<=24882;T++)G[T]=0;for(T=24891;T<=24893;T++)G[T]=0;for(T=25391;T<=25395;T++)G[T]=0;for(T=25828;T<=25838;T++)G[T]=0;for(T=26191;T<=26195;T++)G[T]=0;for(T=26391;T<=26393;T++)G[T]=0;for(T=26701;T<=26722;T++)G[T]=0;for(T=26729;T<=26799;T++)G[T]=2;for(T=26801;T<=26803;T++)G[T]=2;for(T=26811;T<=26813;T++)G[T]=2;for(T=26847;T<=26870;T++)G[T]=2;for(T=26891;T<=26899;T++)G[T]=0;for(T=26901;T<=26923;T++)G[T]=0;for(T=26929;T<=26946;T++)G[T]=0;for(T=26948;T<=26998;T++)G[T]=0;for(T=27037;T<=27040;T++)G[T]=0;for(T=27205;T<=27232;T++)G[T]=0;for(T=27258;T<=27260;T++)G[T]=0;for(T=27391;T<=27398;T++)G[T]=0;for(T=27561;T<=27564;T++)G[T]=0;for(T=27571;T<=27574;T++)G[T]=0;for(T=27581;T<=27584;T++)G[T]=0;for(T=27591;T<=27594;T++)G[T]=0;for(T=27700;T<=27707;T++)G[T]=0;for(T=28191;T<=28193;T++)G[T]=0;for(T=28348;T<=28358;T++)G[T]=0;for(T=28402;T<=28432;T++)G[T]=0;for(T=28462;T<=28492;T++)G[T]=0;for(T=29118;T<=29122;T++)G[T]=0;for(T=29168;T<=29172;T++)G[T]=0;for(T=29177;T<=29185;T++)G[T]=0;for(T=29187;T<=29195;T++)G[T]=0;for(T=29900;T<=29903;T++)G[T]=0;for(T=30161;T<=30179;T++)G[T]=0;for(T=30491;T<=30494;T++)G[T]=0;for(T=30729;T<=30732;T++)G[T]=0;for(T=31251;T<=31259;T++)G[T]=0;for(T=31265;T<=31268;T++)G[T]=0;for(T=31275;T<=31279;T++)G[T]=0;for(T=31281;T<=31297;T++)G[T]=0;for(T=31461;T<=31469;T++)G[T]=0;for(T=31491;T<=31495;T++)G[T]=0;for(T=31917;T<=31922;T++)G[T]=0;for(T=31965;T<=32e3;T++)G[T]=0;for(T=32001;T<=32003;T++)G[T]=2;for(T=32005;T<=32031;T++)G[T]=2;for(T=32033;T<=32060;T++)G[T]=2;for(T=32064;T<=32067;T++)G[T]=2;for(T=32074;T<=32077;T++)G[T]=2;for(T=32081;T<=32086;T++)G[T]=0;for(T=32107;T<=32130;T++)G[T]=0;for(T=32133;T<=32159;T++)G[T]=0;for(T=32164;T<=32167;T++)G[T]=2;for(T=32180;T<=32199;T++)G[T]=0;for(T=32201;T<=32260;T++)G[T]=0;for(T=32301;T<=32360;T++)G[T]=0;for(T=32401;T<=32460;T++)G[T]=0;for(T=32501;T<=32560;T++)G[T]=0;for(T=32601;T<=32662;T++)G[T]=0;for(T=32664;T<=32667;T++)G[T]=2;for(T=32701;T<=32761;T++)G[T]=0;for(T=53001;T<=53004;T++)G[T]=0;for(T=53008;T<=53019;T++)G[T]=0;for(T=53021;T<=53032;T++)G[T]=0;for(T=53034;T<=53037;T++)G[T]=0;for(T=53042;T<=53046;T++)G[T]=0;for(T=53074;T<=53080;T++)G[T]=0;for(T=54001;T<=54004;T++)G[T]=0;for(T=54008;T<=54019;T++)G[T]=0;for(T=54021;T<=54032;T++)G[T]=0;for(T=54034;T<=54037;T++)G[T]=0;for(T=54042;T<=54046;T++)G[T]=0;for(T=54048;T<=54053;T++)G[T]=0;for(T=54074;T<=54080;T++)G[T]=0;for(T=54090;T<=54096;T++)G[T]=0;for(T=54098;T<=54101;T++)G[T]=0;for(T=65161;T<=65163;T++)G[T]=0;for(T=102001;T<=102040;T++)G[T]=0;for(T=102042;T<=102063;T++)G[T]=0;for(T=102065;T<=102067;T++)G[T]=0;for(T=102070;T<=102117;T++)G[T]=0;for(T=102122;T<=102216;T++)G[T]=0;for(T=102221;T<=102377;T++)G[T]=0;for(T=102382;T<=102388;T++)G[T]=0;for(T=102389;T<=102398;T++)G[T]=2;for(T=102399;T<=102444;T++)G[T]=0;for(T=102445;T<=102447;T++)G[T]=2;for(T=102448;T<=102458;T++)G[T]=0;for(T=102459;T<=102468;T++)G[T]=2;for(T=102469;T<=102499;T++)G[T]=0;for(T=102500;T<=102519;T++)G[T]=1;for(T=102520;T<=102524;T++)G[T]=0;for(T=102525;T<=102529;T++)G[T]=2;for(T=102530;T<=102588;T++)G[T]=0;for(T=102590;T<=102598;T++)G[T]=0;for(T=102601;T<=102603;T++)G[T]=0;for(T=102605;T<=102628;T++)G[T]=0;for(T=102629;T<=102646;T++)G[T]=2;for(T=102648;T<=102700;T++)G[T]=2;for(T=102701;T<=102703;T++)G[T]=0;for(T=102707;T<=102730;T++)G[T]=2;for(T=102733;T<=102758;T++)G[T]=2;for(T=102767;T<=102900;T++)G[T]=0;for(T=102901;T<=102933;T++)G[T]=2;for(T=102934;T<=102950;T++)G[T]=13;for(T=102951;T<=102963;T++)G[T]=0;for(T=102965;T<=102969;T++)G[T]=0;for(T=102971;T<=102973;T++)G[T]=0;for(T=102975;T<=102989;T++)G[T]=0;for(T=102990;T<=102992;T++)G[T]=1;for(T=102997;T<=103002;T++)G[T]=0;for(T=103003;T<=103008;T++)G[T]=2;for(T=103009;T<=103011;T++)G[T]=0;for(T=103012;T<=103014;T++)G[T]=2;for(T=103019;T<=103021;T++)G[T]=0;for(T=103022;T<=103024;T++)G[T]=2;for(T=103029;T<=103031;T++)G[T]=0;for(T=103032;T<=103034;T++)G[T]=2;for(T=103065;T<=103068;T++)G[T]=0;for(T=103074;T<=103076;T++)G[T]=0;for(T=103077;T<=103079;T++)G[T]=1;for(T=103080;T<=103082;T++)G[T]=0;for(T=103083;T<=103085;T++)G[T]=2;for(T=103090;T<=103093;T++)G[T]=0;for(T=103097;T<=103099;T++)G[T]=0;for(T=103100;T<=103102;T++)G[T]=2;for(T=103107;T<=103109;T++)G[T]=0;for(T=103110;T<=103112;T++)G[T]=2;for(T=103113;T<=103116;T++)G[T]=0;for(T=103117;T<=103120;T++)G[T]=2;for(T=103153;T<=103157;T++)G[T]=0;for(T=103158;T<=103162;T++)G[T]=2;for(T=103163;T<=103165;T++)G[T]=0;for(T=103166;T<=103168;T++)G[T]=1;for(T=103169;T<=103171;T++)G[T]=2;for(T=103186;T<=103188;T++)G[T]=0;for(T=103189;T<=103191;T++)G[T]=2;for(T=103192;T<=103195;T++)G[T]=0;for(T=103196;T<=103199;T++)G[T]=2;for(T=103200;T<=103224;T++)G[T]=0;for(T=103225;T<=103227;T++)G[T]=1;for(T=103232;T<=103237;T++)G[T]=0;for(T=103238;T<=103243;T++)G[T]=2;for(T=103244;T<=103246;T++)G[T]=0;for(T=103247;T<=103249;T++)G[T]=2;for(T=103254;T<=103256;T++)G[T]=0;for(T=103257;T<=103259;T++)G[T]=2;for(T=103264;T<=103266;T++)G[T]=0;for(T=103267;T<=103269;T++)G[T]=2;for(T=103300;T<=103375;T++)G[T]=0;for(T=103381;T<=103383;T++)G[T]=0;for(T=103384;T<=103386;T++)G[T]=1;for(T=103387;T<=103389;T++)G[T]=0;for(T=103390;T<=103392;T++)G[T]=2;for(T=103397;T<=103399;T++)G[T]=0;for(T=103400;T<=103471;T++)G[T]=2;for(T=103476;T<=103478;T++)G[T]=0;for(T=103479;T<=103481;T++)G[T]=2;for(T=103486;T<=103488;T++)G[T]=0;for(T=103489;T<=103491;T++)G[T]=2;for(T=103492;T<=103495;T++)G[T]=0;for(T=103496;T<=103499;T++)G[T]=2;for(T=103528;T<=103543;T++)G[T]=0;for(T=103544;T<=103548;T++)G[T]=2;for(T=103549;T<=103551;T++)G[T]=0;for(T=103552;T<=103554;T++)G[T]=1;for(T=103555;T<=103557;T++)G[T]=2;for(T=103558;T<=103560;T++)G[T]=0;for(T=103571;T<=103573;T++)G[T]=0;for(T=103574;T<=103576;T++)G[T]=2;for(T=103577;T<=103580;T++)G[T]=0;for(T=103581;T<=103583;T++)G[T]=2;for(T=103595;T<=103694;T++)G[T]=0;for(T=103696;T<=103699;T++)G[T]=0;for(T=103700;T<=103793;T++)G[T]=2;for(T=103794;T<=103890;T++)G[T]=0;for(T=103891;T<=103896;T++)G[T]=2;for(T=103900;T<=103971;T++)G[T]=2;for(T=103972;T<=103977;T++)G[T]=0;for(T=112e3;T<=112101;T++)G[T]=0;const iA=[102100,102113,3857,3785,900913],Qz=[104905,104971],tU=[4326,...iA,...Qz],Ed=[-20037508342788905e-9,20037508342788905e-9],Bw=[-20037508342787e-6,20037508342787e-6],Gv={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Ed,origin:Bw,dx:1e-5},rA={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Ed,origin:Bw,dx:1e-5},102100:Gv,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Ed,origin:Bw,dx:1e-5},3857:Gv,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Gv};function di(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,s=e.wkid;if(i!=null||s!=null){if(i===s||ks(t)&&ks(e))return!0;const y=t.latestWkid;if(y!=null&&s===y)return!0;const v=e.latestWkid;return v!=null&&i===v}let l,f;return t.wkt2&&e.wkt2?(l=t.wkt2,f=e.wkt2):t.wkt&&e.wkt&&(l=t.wkt,f=e.wkt),!(!l||!f)&&l.toUpperCase()===f.toUpperCase()}function Br(t){const e=t?.wkid;return e!=null&&e>=2e3&&rA[e]||null}function sA(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const s=t.wkt||t.wkt2;return JSON.stringify(s?i?{wkt:s,vcsWkid:i}:{wkt:s}:{})}function Oh(t){if(!Es(t))return!1;const{wkid:e}=t;if(e)return G[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function nA(t){return!(oA(t)||aA(t))}function Vl(t){return t?.wkid===4326}function xdt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function qw(t){return t?.wkid===wh.CGCS2000}function ks(t){const e=t?.wkid;return e!=null&&e>=2e3&&iA.includes(e)}function eU(t){return t?.wkid===32662}function bp(t){return t===wh.GCSMARS2000||t===wh.GCSMARS2000_SPHERE}function oA(t){return bp(t?.wkid)}function _p(t){return t===wh.GCSMOON2000}function aA(t){return _p(t?.wkid)}function iU(t){const e=t?.wkid;return e!=null&&e>=2e3&&tU.includes(e)}function Es(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const lA={wkid:4326,wkt:n_(rA[4326].wkTemplate,{Central_Meridian:"0.0"})},uA={wkid:102100,latestWkid:3857},rU={wkid:32662};function N_(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const hA=N_(fi),S2=N_(bo),T2=N_(ql),cA={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${fi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},sU=S2.wkt.toUpperCase(),nU=T2.wkt.toUpperCase();function pA(t){if(t!=null&&Es(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(bp(e))return bo;const s=i?.toUpperCase();if(i&&s===sU)return bo;if(_p(e)||s&&s===nU)return ql}return fi}function Sdt(t){return bp(t)?bo:_p(t)?ql:fi}function $d(t){return di(t,hA)}function Hl(t){return $d(t)||di(t,S2)||di(t,T2)}const Tdt=39.37,oU=fi.radius*Math.PI/200,fA=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,xp=G,dA=/UNIT\[([^\]]+)]/i,aU=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),lU=Hr()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),_n=t=>t*t,Fa=t=>t*t*t,Ad={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:_n(.001)},"square-centimeters":{inBaseUnits:_n(.01)},"square-decimeters":{inBaseUnits:_n(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:_n(1e3)},"square-inches":{inBaseUnits:_n(.0254)},"square-feet":{inBaseUnits:_n(.3048)},"square-yards":{inBaseUnits:_n(.9144)},"square-miles":{inBaseUnits:_n(1609.344)},"square-nautical-miles":{inBaseUnits:_n(1852)},"square-us-feet":{inBaseUnits:_n(1200/3937)},acres:{inBaseUnits:.0015625*_n(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Fa(.001)},"cubic-centimeters":{inBaseUnits:1e3*Fa(.01)},"cubic-decimeters":{inBaseUnits:1e3*Fa(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Fa(1e3)},"cubic-inches":{inBaseUnits:1e3*Fa(.0254)},"cubic-feet":{inBaseUnits:1e3*Fa(.3048)},"cubic-yards":{inBaseUnits:1e3*Fa(.9144)},"cubic-miles":{inBaseUnits:1e3*Fa(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},uU=(()=>{const t={};for(const e in Ad)for(const i in Ad[e].units)t[i]=e;return t})();function hU(t,e,i){return t*Ad[i].units[e].inBaseUnits}function cU(t,e,i){return t/Ad[i].units[e].inBaseUnits}const pU=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],fU=["metric","imperial"],yA=[...fU,...pU],dU=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function bh(t){const e=uU[t];if(!e)throw new Error("unknown type");return e}function N7(t,e=null){return e=e||bh(t),Ad[e].baseUnit===t}function Te(t,e,i){if(e===i)return t;const s=bh(e);if(s!==bh(i))throw new Error("incompatible units");const l=N7(e,s)?t:hU(t,e,s);return N7(i,s)?l:cU(l,i,s)}function Mdt(t,e,i,s=!1){if(!s&&Oh(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const l=kh(e);return l!==i&&(t=l?Te(t,l,i):Te(t*=ko(e),"meters",i)),t}function Edt(t,e,i,s=!1){if(!s&&Oh(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const l=kh(i);return e!==l&&(t=l?Te(t,e,l):Te(t,e,"meters")/ko(i)),t}function yU(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function $dt(t){return yU(t)}function Adt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Idt(t,e){const i=Te(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Pdt(t,e){const i=Te(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Odt(t,e){const i=Te(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function kdt(t,e){const i=Te(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Rdt(t,e){const i=Te(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Cdt(t,e){const i=Te(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function gU(t,e,i){return Te(t,e,"meters")/(i*Math.PI/180)}function L_(t){return lU.fromJSON(t.toLowerCase())||null}function L7(t){if(t!=null&&!nA(t))return 1;const e=ko(t);return e>1e5?1:e}function gA(t){return ko(t)>=pA(t).metersPerDegree?"meters":kh(t)}function ko(t,e=fi.metersPerDegree){return mU(t,!0)??e}function mU(t,e=!1){const i=t?.wkid??null,s=t?.wkt2??t?.wkt??null;let l=null;if(i){if(bp(i))return bo.metersPerDegree;if(_p(i))return ql.metersPerDegree;l=xp.values[xp[i]],!l&&e&&aU.has(i)&&(l=oU)}else s&&(_A(s)?l=D7(fA.exec(s),l):bA(s)&&(l=D7(dA.exec(s),l)));return l}function Ndt(t){return Oh(t)?1:ko(t)}function D7(t,e){return t?.[1]?mA(t[1]):e}function mA(t){return parseFloat(t.split(",")[1])}function kh(t){const e=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let s=null;if(e)s=xp.units[xp[e]];else if(i){const l=_A(i)?fA:bA(i)?dA:null;if(l){const f=l.exec(i);f?.[1]&&(s=bU(f[1]))}}return s!=null?L_(s):null}function vA(t){const e=kh(t);return e!=null&&yA.includes(e)?e:null}function wA(t){const e=gA(t);return e!=null&&yA.includes(e)?e:null}function vU(t){const e=kh(t);return e==null?null:dU.get(e)}function bA(t){return/^GEOCCS/i.test(t)}function _A(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const wU=1e-7;function bU(t){let i=/[\\"']{1}([^\\"']+)/.exec(t)?.[1];if(!i||!L_(i)){const s=mA(t);i=null;const l=xp.values;for(let f=0;f<l.length;++f)if(Math.abs(s-l[f])<wU){i=xp.units[f];break}}return i}function Ldt(t){const e=kh(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const _U={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},xU={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},SU={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Ddt=Hr()(_U),jdt=Hr()(xU),Fdt=Hr()(SU);var to,vo;let Et=(vo=class extends It{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return to.WebMercator;if(e?.wkid===4326)return to.WGS84;const i=new to;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Vl(this)}get isWebMercator(){return ks(this)}get isGeographic(){return Oh(this)}get isWrappable(){return iU(this)}get metersPerUnit(){return ko(this)}get unit(){return kh(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===to.WGS84)return new to(lA);if(this===to.WebMercator)return new to(uA);const e=new to;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=yt(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:s}=e.imageCoordinateSystem,{geodataXform:l}=e.imageCoordinateSystem,f=this.imageCoordinateSystem;return i==null||l?JSON.stringify(f)===JSON.stringify(e.imageCoordinateSystem):s?f.id===i&&f.referenceServiceName===s:f.id===i}return di(this,e)}toJSON(e){return this.write(void 0,e)}},to=vo,vo.GCS_NAD_1927=null,vo.WGS84=null,vo.WebMercator=null,vo.PlateCarree=null,vo);_([E({readOnly:!0})],Et.prototype,"isWGS84",null),_([E({readOnly:!0})],Et.prototype,"isWebMercator",null),_([E({readOnly:!0})],Et.prototype,"isGeographic",null),_([E({readOnly:!0})],Et.prototype,"isWrappable",null),_([E({type:Re,json:{write:!0}})],Et.prototype,"latestWkid",void 0),_([E({readOnly:!0})],Et.prototype,"metersPerUnit",null),_([E({readOnly:!0})],Et.prototype,"unit",null),_([E({type:Re,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Et.prototype,"wkid",void 0),_([E({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Et.prototype,"wkt",void 0),_([Xt("wkt"),Xt("web-scene","wkt")],Et.prototype,"writeWkt",null),_([E({type:String,json:{write:!1}})],Et.prototype,"wkt2",void 0),_([E({type:Re,json:{write:!0}})],Et.prototype,"vcsWkid",void 0),_([E({type:Re,json:{write:!0}})],Et.prototype,"latestVcsWkid",void 0),_([E()],Et.prototype,"imageCoordinateSystem",void 0),Et=to=_([Y("esri.geometry.SpatialReference")],Et),Et.prototype.toJSON.isDefaultToJSON=!0,Et.GCS_NAD_1927=Ot.freeze(new Et({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Et.WGS84=Ot.freeze(new Et(lA)),Et.WebMercator=Ot.freeze(new Et(uA)),Et.PlateCarree=Ot.freeze(new Et(rU));function ae(t,e,i){let s,l;return e===void 0||Array.isArray(e)?(l=t,i=e,s=[void 0]):(l=e,s=Array.isArray(t)?t:[t]),(f,y)=>{const v=f.constructor.prototype;s.forEach((b=>{const S=M_(f,b,l);S.read&&typeof S.read=="object"||(S.read={}),S.read.reader=v[y],i&&(S.read.source=(S.read.source||[]).concat(i))}))}}let ir=class extends It{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Et.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Et)return e;if(e!=null){const s=new Et;return s.read(e,i),s}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};_([E()],ir.prototype,"type",void 0),_([E({readOnly:!0})],ir.prototype,"cache",null),_([E({readOnly:!0})],ir.prototype,"extent",null),_([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ir.prototype,"hasM",void 0),_([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ir.prototype,"hasZ",void 0),_([E({type:Et,json:{write:!0},value:Et.WGS84})],ir.prototype,"spatialReference",void 0),_([ae("spatialReference")],ir.prototype,"readSpatialReference",null),ir=_([Y("esri.geometry.Geometry")],ir);const TU=Object.prototype.toString;function MU(t){const e="__accessorMetadata__"in t?Vr(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return EU.apply(this,i)}}function EU(t,e,i,s){o1(t,e).cast=s}function $U(t){return(e,i)=>{o1(e,t).cast=e[i]}}function Ui(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&TU.call(t[0])==="[object Function]"?MU(t[0]):t.length===1&&typeof t[0]=="string"?$U(t[0]):void 0}function ee(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new ct("internal:mesh","Mesh geometries are not supported for this operation")}function AU(t){t.forEach(ee)}const IU=57.29577951308232,PU=.017453292519943;function j7(t){return t*IU}function F7(t){return t*PU}function Udt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/fi.radius))}function Vw(t){return t.wkid!=null||t.wkt!=null}const Bv=[0,0];function um(t,e,i,s,l){const f=t,y=l;if(y.spatialReference=i,"x"in f&&"x"in y)[y.x,y.y]=e(f.x,f.y,Bv,s);else if("xmin"in f&&"xmin"in y)[y.xmin,y.ymin]=e(f.xmin,f.ymin,Bv,s),[y.xmax,y.ymax]=e(f.xmax,f.ymax,Bv,s);else if("paths"in f&&"paths"in y||"rings"in f&&"rings"in y){const v="paths"in f?f.paths:f.rings,b=[];let S;for(let A=0;A<v.length;A++){const P=v[A];S=[],b.push(S);for(let k=0;k<P.length;k++)S.push(e(P[k][0],P[k][1],[0,0],s)),P[k].length>2&&S[k].push(P[k][2]),P[k].length>3&&S[k].push(P[k][3])}"paths"in y?y.paths=b:y.rings=b}else if("points"in f&&"points"in y){const v=f.points,b=[];for(let S=0;S<v.length;S++)b[S]=e(v[S][0],v[S][1],[0,0],s),v[S].length>2&&b[S].push(v[S][2]),v[S].length>3&&b[S].push(v[S][3]);y.points=b}return l}function By(t,e){const i=t&&(Vw(t)?t:t.spatialReference),s=e&&(Vw(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!s)&&(!!di(s,i)||ks(s)&&Vl(i)||ks(i)&&Vl(s))}function M2(t,e){if(t==null)return null;const i=t.spatialReference,s=e&&(Vw(e)?e:e.spatialReference);return By(i,s)?di(i,s)?yt(t):ks(s)?um(t,wc,Et.WebMercator,!1,yt(t)):Vl(s)?um(t,E2,Et.WGS84,!1,yt(t)):null:null}function wc(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const s=F7(e);return i[0]=F7(t)*fi.radius,i[1]=fi.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function E2(t,e,i=[0,0],s=!1){if(t===Ed[0])i[0]=-180;else if(t===Ed[1])i[0]=180;else{const l=j7(t/fi.radius);i[0]=s?l:l-360*Math.floor((l+180)/360)}return i[1]=j7(Math.PI/2-2*Math.atan(Math.exp(-e/fi.radius))),i}function th(t,e=!1,i=yt(t)){return ee(t),ee(i),um(t,wc,Et.WebMercator,e,i)}function bc(t,e=!1,i=yt(t)){return ee(t),ee(i),um(t,E2,Et.WGS84,e,i)}function xA(t,e){const i=t.x-e.x,s=t.y-e.y,l=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+s*s+l*l)}function OU(t){return SA(t,TA)?.[0]??null}function kU(t){return SA(t,TA)?.[1]??null}function SA({x:t,y:e,spatialReference:i},s=[0,0]){if(i){if(ks(i))return E2(t,e,s);if(Oh(i))return s[0]=t,s[1]=e,s}return null}const TA=[0,0];var qy;const qv=[0,0];function z7(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Ct=qy=class extends ir{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Ot.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,s,l){let f;if(Array.isArray(t))f=t,l=e,t=f[0],e=f[1],i=f[2],s=f[3];else if(t&&typeof t=="object"){if(f=t,t=f.x!=null?f.x:f.longitude,e=f.y!=null?f.y:f.latitude,i=f.z,s=f.m,(l=f.spatialReference)&&l.declaredClass!=="esri.geometry.SpatialReference"&&(l=new Et(l)),f.longitude!=null||f.latitude!=null){if(f.longitude==null)At.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(f.latitude==null)At.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!f.declaredClass&&l?.isWebMercator){const v=wc(f.longitude,f.latitude,qv);t=v[0],e=v[1]}}}else z7(i)?(l=i,i=null):z7(s)&&(l=s,s=null);const y={x:t,y:e};return y.x==null&&y.y!=null?At.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&At.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),l!=null&&(y.spatialReference=l),i!=null&&(y.z=i),s!=null&&(y.m=s),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return kU(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",wc(i,t,qv)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return OU(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",wc(t,e,qv)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new qy;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return qy.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:s,m:l,spatialReference:f}=this,{z:y,m:v}=t;let{x:b,y:S,spatialReference:A}=t;if(!f.equals(A))if(f.isWebMercator&&A.isWGS84)[b,S]=wc(b,S),A=f;else{if(!f.isWGS84||!A.isWebMercator)return!1;[b,S]=E2(b,S),A=f}return e===b&&i===S&&s===y&&l===v&&f.wkid===A.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Br(this.spatialReference);if(!t)return this;let e=this.x;const[i,s]=t.valid,l=2*s;let f;return e>s?(f=Math.ceil(Math.abs(e-s)/l),e-=f*l):e<i&&(f=Math.ceil(Math.abs(e-i)/l),e+=f*l),this._set("x",e),this}distance(t){return xA(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};_([E({readOnly:!0})],Ct.prototype,"cache",null),_([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ct.prototype,"hasM",null),_([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ct.prototype,"hasZ",null),_([E({type:Number})],Ct.prototype,"latitude",null),_([E({type:Number})],Ct.prototype,"longitude",null),_([E({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ui((t=>isNaN(t)?t:Ts(t)))],Ct.prototype,"x",void 0),_([Xt("x")],Ct.prototype,"writeX",null),_([ae("x")],Ct.prototype,"readX",null),_([E({type:Number,json:{write:!0}})],Ct.prototype,"y",void 0),_([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ct.prototype,"z",void 0),_([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ct.prototype,"m",void 0),Ct=qy=_([Y("esri.geometry.Point")],Ct),Ct.prototype.toJSON.isDefaultToJSON=!0;const Vv=[0,0];function u1(t,e){return e!=null&&Dr(t,e.x,e.y,e.z)}function Gdt(t,e){if(!e.points?.length)return!1;for(const i of e.points)if(!Sp(t,i))return!1;return!0}function RU(t,e){const{xmin:i,ymin:s,zmin:l,xmax:f,ymax:y,zmax:v}=e;return t.hasZ&&e.hasZ?Dr(t,i,s,l)&&Dr(t,i,y,l)&&Dr(t,f,y,l)&&Dr(t,f,s,l)&&Dr(t,i,s,v)&&Dr(t,i,y,v)&&Dr(t,f,y,v)&&Dr(t,f,s,v):Dr(t,i,s)&&Dr(t,i,y)&&Dr(t,f,y)&&Dr(t,f,s)}function Sp(t,e){return Dr(t,e[0],e[1])}function CU(t,e){return Dr(t,e[0],e[1],e[2])}function Dr(t,e,i,s){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function D_(t,e){return Vv[1]=e.y,Vv[0]=e.x,NU(t,Vv)}function NU(t,e){return j_(t.rings,e)}function j_(t,e){if(!t)return!1;if(LU(t))return U7(!1,t,e);let i=!1;for(let s=0,l=t.length;s<l;s++)i=U7(i,t[s],e);return i}function LU(t){return!Array.isArray(t[0][0])}function U7(t,e,i){const[s,l]=i;let f=t,y=0;for(let v=0,b=e.length;v<b;v++){y++,y===b&&(y=0);const[S,A]=e[v],[P,k]=e[y];(A<l&&k>=l||k<l&&A>=l)&&S+(l-A)/(k-A)*(P-S)<s&&(f=!f)}return f}function DU(t,e){return u1(t,e)}function jU(t,e){const i=t.hasZ&&e.hasZ;let s,l,f;if(t.xmin<=e.xmin){if(s=e.xmin,t.xmax<s)return!1}else if(s=t.xmin,e.xmax<s)return!1;if(t.ymin<=e.ymin){if(l=e.ymin,t.ymax<l)return!1}else if(l=t.ymin,e.ymax<l)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(f=e.zmin,t.zmax<f)return!1}else if(f=t.zmin,e.zmax<f)return!1}return!0}function FU(t,e){const{points:i,hasZ:s}=e,l=s?CU:Sp;for(const f of i)if(l(t,f))return!0;return!1}const _h=[0,0],xh=[0,0],Sh=[0,0],Th=[0,0],zU=[_h,xh,Sh,Th],MA=[[Sh,_h],[_h,xh],[xh,Th],[Th,Sh]];function UU(t,e){return GU(t,e.rings)}function GU(t,e){_h[0]=t.xmin,_h[1]=t.ymax,xh[0]=t.xmax,xh[1]=t.ymax,Sh[0]=t.xmin,Sh[1]=t.ymin,Th[0]=t.xmax,Th[1]=t.ymin;for(const i of zU)if(j_(e,i))return!0;for(const i of e){if(!i.length)continue;let s=i[0];if(Sp(t,s))return!0;for(let l=1;l<i.length;l++){const f=i[l];if(Sp(t,f)||EA(s,f,MA))return!0;s=f}}return!1}function BU(t,e){_h[0]=t.xmin,_h[1]=t.ymax,xh[0]=t.xmax,xh[1]=t.ymax,Sh[0]=t.xmin,Sh[1]=t.ymin,Th[0]=t.xmax,Th[1]=t.ymin;const i=e.paths;for(const s of i){if(!i.length)continue;let l=s[0];if(Sp(t,l))return!0;for(let f=1;f<s.length;f++){const y=s[f];if(Sp(t,y)||EA(l,y,MA))return!0;l=y}}return!1}const Zi=[0,0];function qU(t){for(let e=0;e<t.length;e++){const i=t[e];for(let l=0;l<i.length-1;l++){const f=i[l],y=i[l+1];for(let v=e+1;v<t.length;v++)for(let b=0;b<t[v].length-1;b++){const S=t[v][b],A=t[v][b+1];if(Hw(f,y,S,A,Zi)&&!(Zi[0]===f[0]&&Zi[1]===f[1]||Zi[0]===S[0]&&Zi[1]===S[1]||Zi[0]===y[0]&&Zi[1]===y[1]||Zi[0]===A[0]&&Zi[1]===A[1]))return!0}}const s=i.length;if(!(s<=4))for(let l=0;l<s-3;l++){let f=s-1;l===0&&(f=s-2);const y=i[l],v=i[l+1];for(let b=l+2;b<f;b++){const S=i[b],A=i[b+1];if(Hw(y,v,S,A,Zi)&&!(Zi[0]===y[0]&&Zi[1]===y[1]||Zi[0]===S[0]&&Zi[1]===S[1]||Zi[0]===v[0]&&Zi[1]===v[1]||Zi[0]===A[0]&&Zi[1]===A[1]))return!0}}}return!1}function EA(t,e,i){for(let s=0;s<i.length;s++)if(Hw(t,e,i[s][0],i[s][1]))return!0;return!1}function Hw(t,e,i,s,l){const[f,y]=t,[v,b]=e,[S,A]=i,[P,k]=s,C=P-S,L=f-S,F=v-f,q=k-A,H=y-A,J=b-y,Q=q*F-C*J;if(Q===0)return!1;const tt=(C*H-q*L)/Q,et=(F*H-J*L)/Q;return tt>=0&&tt<=1&&et>=0&&et<=1&&(l&&(l[0]=f+tt*(v-f),l[1]=y+tt*(b-y)),!0)}function VU(t){switch(t){case"esriGeometryEnvelope":case"extent":return jU;case"esriGeometryMultipoint":case"multipoint":return FU;case"esriGeometryPoint":case"point":return DU;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return UU;case"esriGeometryPolyline":case"polyline":return BU}}var $n;function HU(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function za(t,e,i){return e==null?i:i==null?e:t(e,i)}let Zt=$n=class extends ir{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,s,l){return HU(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Et.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:s,spatialReference:l??Et.WGS84}}static fromPoint(t){return new $n({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ct({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new $n;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&By(e,i)&&(t=e.isWebMercator?th(t):bc(t,!0)),t.type==="point"?u1(this,t):t.type==="extent"&&RU(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&By(e,i)&&(t=e.isWebMercator?th(t):bc(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,s=this.height*e;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const l=(this.zmax-this.zmin)*e;this.zmin+=l,this.zmax-=l}if(this.hasM){const l=(this.mmax-this.mmin)*e;this.mmin+=l,this.mmax-=l}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!di(e,i)&&By(e,i)&&(t=e.isWebMercator?th(t):bc(t,!0)),VU(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=za(Math.min,this.zmin,t.zmin),this.zmax=za(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=za(Math.min,this.mmin,t.mmin),this.mmax=za(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=za(Math.max,this.zmin,t.zmin),this.zmax=za(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=za(Math.max,this.mmin,t.mmin),this.mmax=za(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Br(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const s=e.isWebMercator?bc(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(s.x=Hv(s.x,t).x),this.spatialReference=new Et(n_((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let e=null;const[i,s]=t.valid,l=this.xmin,f=this.xmax;return l>=i&&l<=s&&f>=i&&f<=s||(e=this.center),e}_normalize(t,e,i){const s=this.spatialReference;if(!s)return this;const l=i??Br(s);if(l==null)return this;const f=this._getParts(l).map((b=>b.extent));if(f.length<2)return f[0]||this;if(f.length>2)return t?this._shiftCM(l):this.set({xmin:l.valid[0],xmax:l.valid[1]});if(t)return this._shiftCM(l);if(e)return f;let y=!0,v=!0;return f.forEach((b=>{b.hasZ||(y=!1),b.hasM||(v=!1)})),{rings:f.map((b=>{const S=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(y){const A=(b.zmax-b.zmin)/2;for(let P=0;P<S.length;P++)S[P].push(A)}if(v){const A=(b.mmax-b.mmin)/2;for(let P=0;P<S.length;P++)S[P].push(A)}return S})),hasZ:y,hasM:v,spatialReference:s}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:l,ymax:f,spatialReference:y}=this,v=this.width,b=this.xmin,S=this.xmax;let A;t=t||Br(y);const[P,k]=t.valid;A=Hv(this.xmin,t);const C=A.x,L=A.frameId;A=Hv(this.xmax,t);const F=A.x,q=A.frameId,H=C===F&&v>0;if(v>2*k){const J=new $n(b<S?C:F,l,k,f,y),Q=new $n(P,l,b<S?F:C,f,y),tt=new $n(0,l,k,f,y),et=new $n(P,l,0,f,y),nt=[],vt=[];J.contains(tt)&&nt.push(L),J.contains(et)&&vt.push(L),Q.contains(tt)&&nt.push(q),Q.contains(et)&&vt.push(q);for(let Tt=L+1;Tt<q;Tt++)nt.push(Tt),vt.push(Tt);e.push({extent:J,frameIds:[L]},{extent:Q,frameIds:[q]},{extent:tt,frameIds:nt},{extent:et,frameIds:vt})}else C>F||H?e.push({extent:new $n(C,l,k,f,y),frameIds:[L]},{extent:new $n(P,l,F,f,y),frameIds:[q]}):e.push({extent:new $n(C,l,F,f,y),frameIds:[L]});this.cache._parts=e}const i=this.hasZ,s=this.hasM;if(i||s){const l={};i&&(l.zmin=this.zmin,l.zmax=this.zmax),s&&(l.mmin=this.mmin,l.mmax=this.mmax);for(let f=0;f<e.length;f++)e[f].extent.set(l)}return e}};function Hv(t,e){const[i,s]=e.valid,l=2*s;let f,y=0;return t>s?(f=Math.ceil(Math.abs(t-s)/l),t-=f*l,y=f):t<i&&(f=Math.ceil(Math.abs(t-i)/l),t+=f*l,y=-f),{x:t,frameId:y}}_([E({readOnly:!0})],Zt.prototype,"cache",null),_([E({readOnly:!0})],Zt.prototype,"center",null),_([E({readOnly:!0})],Zt.prototype,"extent",null),_([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zt.prototype,"hasM",null),_([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zt.prototype,"hasZ",null),_([E({readOnly:!0})],Zt.prototype,"height",null),_([E({readOnly:!0})],Zt.prototype,"width",null),_([E({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Zt.prototype,"xmin",void 0),_([E({type:Number,json:{write:!0}})],Zt.prototype,"ymin",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zt.prototype,"mmin",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zt.prototype,"zmin",void 0),_([E({type:Number,json:{write:!0}})],Zt.prototype,"xmax",void 0),_([E({type:Number,json:{write:!0}})],Zt.prototype,"ymax",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zt.prototype,"mmax",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zt.prototype,"zmax",void 0),Zt=$n=_([Y("esri.geometry.Extent")],Zt),Zt.prototype.toJSON.isDefaultToJSON=!0;let Z0;const WU=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,Ww=globalThis.document?.documentElement;function $A(){const t=Ww?.getAttribute("lang"),e=globalThis.navigator?.language;return WU??t??e??"en"}function on(){return Z0===void 0&&(Z0=$A()),Z0}const JU=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function F_(t=on()){return JU.exec(t)?.groups}const Vy=[];function AA(t){return Vy.push(t),fe((()=>{Vy.splice(Vy.indexOf(t),1)}))}const Hy=[];function z_(t){return Hy.push(t),fe((()=>Hy.splice(Hy.indexOf(t),1)))}function G7(){const t=$A();Z0!==t&&([...Hy].forEach((e=>e(t))),Z0=t,[...Vy].forEach((e=>e(t))))}globalThis.addEventListener?.("languagechange",G7),Ww&&new MutationObserver((()=>{G7()})).observe(Ww,{attributeFilter:["lang"]});let z1;function YU(t){return z1&&!z1.destroyed||(z1=t()),z1}var Jw;const KU=new Bi({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ai=Jw=class extends Ot{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Jw({categories:this.categories?yt(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map((y=>Array.isArray(y)?JSON.stringify(y):y)));let s="";if(this.extent){const y=M2(this.extent,Et.WGS84);y!=null&&(s=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let l=this.query;!this.disableExtraQuery&&t.extraQuery&&(l="("+l+")"+t.extraQuery);const f={categories:i,bbox:s,q:l,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(f.sortField=this.sortField.split(",").map((y=>KU.toJSON(y.trim()))).join(","),f.sortOrder=this.sortOrder),{query:{...e,...f}}}};_([E()],Ai.prototype,"categories",void 0),_([E()],Ai.prototype,"disableExtraQuery",void 0),_([E({type:Zt})],Ai.prototype,"extent",void 0),_([E()],Ai.prototype,"filter",void 0),_([E()],Ai.prototype,"num",void 0),_([E()],Ai.prototype,"query",void 0),_([E()],Ai.prototype,"sortField",void 0),_([E()],Ai.prototype,"sortOrder",null),_([E()],Ai.prototype,"start",void 0),Ai=Jw=_([Y("esri.portal.PortalQueryParams")],Ai);var Yw;let bi=Yw=class extends It{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then((e=>{const i=e.categorySchema||[];return i.some((s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",t):i}))}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ct("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Yw({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Vr(Ai,t);const s=this.portal;return parseFloat(s.currentVersion)>5?(i=i||new Ai,s.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Ai,i.query="group:"+this.id+(i.query?" "+i.query:""),s.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then((s=>{const l=s.contentCategorySetsGroupQuery;if(l){const f=new Ai({disableExtraQuery:!0,num:1,query:l});return i.queryGroups(f,e)}throw new ct("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((s=>{if(s.total){const l=s.results[0],f=new Ai({num:1,query:`typekeywords:"${t}"`});return l.queryItems(f,e)}throw new ct("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((s=>s.total?s.results[0].fetchData("json",e).then((l=>{const f=l?.categorySchema;return f?.length?f:[]})):[]))}};_([E()],bi.prototype,"access",void 0),_([E({type:Date})],bi.prototype,"created",void 0),_([E()],bi.prototype,"description",void 0),_([E()],bi.prototype,"id",void 0),_([E()],bi.prototype,"isInvitationOnly",void 0),_([E({type:Date})],bi.prototype,"modified",void 0),_([E()],bi.prototype,"owner",void 0),_([E()],bi.prototype,"portal",void 0),_([E()],bi.prototype,"snippet",void 0),_([E()],bi.prototype,"sortField",void 0),_([E()],bi.prototype,"sortOrder",void 0),_([E()],bi.prototype,"sourceJSON",void 0),_([E()],bi.prototype,"tags",void 0),_([E()],bi.prototype,"thumbnail",void 0),_([E({readOnly:!0})],bi.prototype,"thumbnailUrl",null),_([E()],bi.prototype,"title",void 0),_([E({readOnly:!0})],bi.prototype,"url",null),bi=Yw=_([Y("esri.portal.PortalGroup")],bi);let gu=class extends Ot{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};_([E()],gu.prototype,"nextQueryParams",void 0),_([E()],gu.prototype,"queryParams",void 0),_([E()],gu.prototype,"results",void 0),_([E()],gu.prototype,"total",void 0),gu=_([Y("esri.portal.PortalQueryResult")],gu);let qo=class extends It{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ct("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};_([E({type:Date})],qo.prototype,"created",void 0),_([E()],qo.prototype,"id",void 0),_([E()],qo.prototype,"portal",void 0),_([E()],qo.prototype,"title",void 0),_([E({readOnly:!0})],qo.prototype,"url",null),_([E()],qo.prototype,"username",void 0),qo=_([Y("esri.portal.PortalFolder")],qo);var Kw;let Ie=Kw=class extends It{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t?.data,s=t?.folder,l={method:"post"};e&&(l.query=e.createPostQuery(),i!=null&&(typeof i=="string"?l.query.text=i:typeof i=="object"&&(l.query.text=JSON.stringify(i))));let f=this.userContentUrl;return s&&(f+="/"+(typeof s=="string"?s:s.id)),this.portal.request(f+"/addItem",l).then((y=>(e.id=y.id,e.portal=this.portal,e.loaded?e.reload():e.load())))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const s=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:s}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",s=[],l=t.map((f=>f.id));if(l.length){const f={method:"post",query:{items:l.join(","),permanentDelete:e}},y=await this.portal.request(i,f);for(const v of y.results){const b=t.find((P=>v.itemId===P.id)),S=v.success;let A=null;S?(b.id=null,b.portal=null):v.error&&(A=new ct("portal:delete-item-failed",v.error.message,v.error)),s.push({item:b,success:S,error:A})}}return s}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then((e=>{let i;return i=e&&e.folders?e.folders.map((s=>{const l=qo.fromJSON(s);return l.portal=this.portal,l})):[],i}))}fetchGroups(){return this.portal.request(this.url??"").then((t=>{let e;return e=t&&t.groups?t.groups.map((i=>{const s=bi.fromJSON(i);return s.portal=this.portal,s})):[],e}))}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await mt(()=>Promise.resolve().then(()=>IA),void 0),s={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},l=await this.portal.request(e,{query:s});let f;return l?.items?(f=l.items.map((y=>{const v=i.fromJSON(y);return v.portal=this.portal,v})),await Promise.all(f.map((y=>y.load()))),{items:f,nextStart:l.nextStart,total:l.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new bi({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ct("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,s=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:s})}toJSON(){throw new ct("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Kw({sourceJSON:t});return e.read(t),e}};_([E()],Ie.prototype,"access",void 0),_([E({type:Date})],Ie.prototype,"created",void 0),_([E()],Ie.prototype,"culture",void 0),_([E()],Ie.prototype,"description",void 0),_([E()],Ie.prototype,"email",void 0),_([E()],Ie.prototype,"favGroupId",void 0),_([E()],Ie.prototype,"fullName",void 0),_([E()],Ie.prototype,"id",void 0),_([E({type:Date})],Ie.prototype,"modified",void 0),_([E()],Ie.prototype,"orgId",void 0),_([E()],Ie.prototype,"portal",void 0),_([E()],Ie.prototype,"preferredView",void 0),_([E()],Ie.prototype,"privileges",void 0),_([E()],Ie.prototype,"region",void 0),_([E()],Ie.prototype,"role",void 0),_([E()],Ie.prototype,"roleId",void 0),_([E()],Ie.prototype,"sourceJSON",void 0),_([E()],Ie.prototype,"thumbnail",void 0),_([E({readOnly:!0})],Ie.prototype,"thumbnailUrl",null),_([E()],Ie.prototype,"units",void 0),_([E({readOnly:!0})],Ie.prototype,"userContentUrl",null),_([E({readOnly:!0})],Ie.prototype,"url",null),_([E()],Ie.prototype,"username",void 0),_([E()],Ie.prototype,"userLicenseTypeId",void 0),_([E()],Ie.prototype,"userType",void 0),Ie=Kw=_([Y("esri.portal.PortalUser")],Ie);var gs;let xf;const B7={PortalGroup:()=>Promise.resolve({default:bi}),PortalItem:()=>mt(()=>Promise.resolve().then(()=>IA),void 0),PortalUser:()=>Promise.resolve({default:Ie})};var wo;let wt=(wo=class extends It.JSONSupportMixin(tn){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=pe.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){q7.unregister(this),this.defaultBasemap=ze(this.defaultBasemap),this.defaultDevBasemap=ze(this.defaultDevBasemap),this.defaultVectorBasemap=ze(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ri(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)pe.request.trustedServers.includes(i)||pe.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return Ej(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=Ie.fromJSON(e),i.portal=this),i}load(e){const i=mt(()=>Promise.resolve().then(()=>Wq),void 0).then((({default:s})=>{Ce(e),xf=s})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e))).then((s=>{if(!this.hasAPIKey&&xe){const l=xe;this.credential=l.findCredential(this.restUrl),this.credential||this.authMode!==gs.AUTH_MODE_AUTO&&this.authMode!==gs.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=l.on("credential-create",ZU(new WeakRef(this))),q7.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=s,this.read(s)}));return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await mt(async()=>{const{default:s}=await import("./ElevationLayer-BxiP87fj.js");return{default:s}},__vite__mapDeps([8,1,2,3,9,10,11,12,13,14,15,16,17,4]))).default;return e?e.map((s=>new i({id:s.id,url:s.url}))):[]}async fetchBasemaps(e,i){const s=await this._fetchBasemaps(e,i);if(i?.include3d===!0&&this.use3dBasemaps!==!1){const l=await this._fetchBasemaps3D(e,i);s.unshift(...l)}return s}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new Ai;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const s=(await this.queryItems(i,e)).results.find((l=>l.type==="Web Scene"));return s?new xf({portalItem:s}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then((i=>i.categorySchema)):Os(e)?Promise.reject(Be()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then((i=>i.classificationSchema)):null}fetchFeaturedGroups(e){const i=this.featuredGroups,s=new Ai({num:100,sortField:"title"});if(i?.length){const l=[];for(const f of i)l.push(`(title:"${f.title}" AND owner:${f.owner})`);return s.query=l.join(" OR "),this.queryGroups(s,e).then((f=>f.results))}return Os(e)?Promise.reject(Be()):Promise.resolve([])}fetchRegions(e){const i=this.user?.culture||this.culture||on();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){const i=this.user?.culture||this.culture||on();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return YU((()=>new gs))}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,s){const l=this.restUrl+"/portals/self",f={authMode:e,query:{culture:on().toLowerCase()},withCredentials:!0,...s};return f.authMode==="auto"&&(f.authMode="no-prompt"),i&&(f.query.default=!0),this.request(l,f)}queryPortal(e,i,s,l){const f=Vr(Ai,i),y=v=>this.request(this.restUrl+e,{...f.toRequestOptions(this),...l}).then((b=>{const S=f.clone();return S.start=b.nextStart,new gu({nextQueryParams:S,queryParams:f,total:b.total,results:gs._resultsToTypedArray(v,{portal:this},b,l)})})).then((b=>Promise.all(b.results.map((S=>typeof S.when=="function"?S.when():b))).then((()=>b),(S=>(ul(S),b)))));return s&&B7[s]?B7[s]().then((({default:v})=>(Ce(l),y(v)))):y()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new ct("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===gs.AUTH_MODE_ANONYMOUS||this.authMode===gs.AUTH_MODE_NO_PROMPT&&!xe)return Promise.reject(new ct("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate")))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate")))).then((s=>{s&&(this.sourceJSON=s,this.read(s))}));return xe?xe.getCredential(this.restUrl,{prompt:this.authMode!==gs.AUTH_MODE_NO_PROMPT}).then((i=>e(i))):e(this.credential)}normalizeUrl(e){const i=this.credential?.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,s){return this.request(e,i).then((l=>{const f=gs._resultsToTypedArray(s,{portal:this},l);return Promise.all(f.map((y=>typeof y.when=="function"?y.when():l))).then((()=>f),(()=>f))}))}request(e,i={}){const s={f:"json",...i.query},{authMode:l=this.authMode===gs.AUTH_MODE_ANONYMOUS||this.authMode===gs.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:f=null,cacheBust:y=!1,method:v="auto",responseType:b="json",signal:S}=i,A={authMode:l,body:f,cacheBust:y,method:v,query:s,responseType:b,timeout:0,signal:S};return i.withCredentials&&(A.withCredentials=!0),ii(this._normalizeSSL(e),A).then((P=>P.data))}toJSON(){throw new ct("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new gs({sourceJSON:e})}_getHelperService(e){const i=this.helperServices&&this.helperServices[e];if(!i)throw new ct("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const s=new Ai;s.query=e||(mw()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),s.disableExtraQuery=!0;const l=await this.queryGroups(s,i);if(!l.total)return[];const f=l.results[0];s.num=100,s.query='type:"Web Map" -type:"Web Application"',s.sortField=f.sortField||"name",s.sortOrder=f.sortOrder||"desc";const y=await f.queryItems(s,i);return y.total?y.results.filter((v=>v.type==="Web Map")).map((v=>new xf({portalItem:v}))):[]}async _fetchBasemaps3D(e,i){const s=e||this.basemapGalleryGroupQuery3D;if(!s)return[];if(mw())return[];const l=new Ai({query:s,disableExtraQuery:!0}),f=await this.queryGroups(l,i);if(!f.total)return[];const y=f.results[0];l.num=100,l.query='type:"Web Scene"',l.sortField=y.sortField||"name",l.sortOrder=y.sortOrder||"desc";const v=await y.queryItems(l,i);return v.total?v.results.filter((b=>b.type==="Web Scene")).map((b=>new xf({portalItem:b}))):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=xf.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,s,l){let f;if(s){const y=l!=null?l.signal:null;f=s.listings||s.notifications||s.userInvitations||s.tags||s.items||s.groups||s.comments||s.provisions||s.results||s.relatedItems||s,(e||i)&&(f=f.map((v=>{const b=Object.assign(e?e.fromJSON(v):v,i);return typeof b.load=="function"&&b.load(y),b})))}else f=[];return f}},gs=wo,wo.AUTH_MODE_ANONYMOUS="anonymous",wo.AUTH_MODE_AUTO="auto",wo.AUTH_MODE_IMMEDIATE="immediate",wo.AUTH_MODE_NO_PROMPT="no-prompt",wo);_([E()],wt.prototype,"access",void 0),_([E()],wt.prototype,"allSSL",void 0),_([E()],wt.prototype,"authMode",void 0),_([E()],wt.prototype,"authorizedCrossOriginDomains",void 0),_([ae("authorizedCrossOriginDomains")],wt.prototype,"readAuthorizedCrossOriginDomains",null),_([E()],wt.prototype,"basemapGalleryGroupQuery",void 0),_([E({json:{name:"3DBasemapGalleryGroupQuery"}})],wt.prototype,"basemapGalleryGroupQuery3D",void 0),_([E()],wt.prototype,"bingKey",void 0),_([E()],wt.prototype,"canListApps",void 0),_([E()],wt.prototype,"canListData",void 0),_([E()],wt.prototype,"canListPreProvisionedItems",void 0),_([E()],wt.prototype,"canProvisionDirectPurchase",void 0),_([E()],wt.prototype,"canSearchPublic",void 0),_([E()],wt.prototype,"canShareBingPublic",void 0),_([E()],wt.prototype,"canSharePublic",void 0),_([E()],wt.prototype,"canSignInArcGIS",void 0),_([E()],wt.prototype,"canSignInIDP",void 0),_([E()],wt.prototype,"colorSetsGroupQuery",void 0),_([E()],wt.prototype,"commentsEnabled",void 0),_([E({type:Date})],wt.prototype,"created",void 0),_([E()],wt.prototype,"credential",void 0),_([E()],wt.prototype,"culture",void 0),_([E()],wt.prototype,"currentVersion",void 0),_([E()],wt.prototype,"customBaseUrl",void 0),_([E()],wt.prototype,"default3DBasemapQuery",void 0),_([E()],wt.prototype,"defaultBasemap",void 0),_([ae("defaultBasemap")],wt.prototype,"readDefaultBasemap",null),_([E()],wt.prototype,"defaultDevBasemap",void 0),_([ae("defaultDevBasemap")],wt.prototype,"readDefaultDevBasemap",null),_([E({type:Zt})],wt.prototype,"defaultExtent",void 0),_([E()],wt.prototype,"defaultVectorBasemap",void 0),_([ae("defaultVectorBasemap")],wt.prototype,"readDefaultVectorBasemap",null),_([E()],wt.prototype,"description",void 0),_([E()],wt.prototype,"devBasemapGalleryGroupQuery",void 0),_([E()],wt.prototype,"eueiEnabled",void 0),_([E({readOnly:!0})],wt.prototype,"extraQuery",null),_([E()],wt.prototype,"featuredGroups",void 0),_([E()],wt.prototype,"featuredItemsGroupQuery",void 0),_([E()],wt.prototype,"galleryTemplatesGroupQuery",void 0),_([E()],wt.prototype,"layoutGroupQuery",void 0),_([E()],wt.prototype,"livingAtlasGroupQuery",void 0),_([E({readOnly:!0})],wt.prototype,"hasAPIKey",null),_([E()],wt.prototype,"hasCategorySchema",void 0),_([E()],wt.prototype,"hasClassificationSchema",void 0),_([E()],wt.prototype,"helpBase",void 0),_([E()],wt.prototype,"helperServices",void 0),_([E()],wt.prototype,"helpMap",void 0),_([E()],wt.prototype,"homePageFeaturedContent",void 0),_([E()],wt.prototype,"homePageFeaturedContentCount",void 0),_([E()],wt.prototype,"httpPort",void 0),_([E()],wt.prototype,"httpsPort",void 0),_([E()],wt.prototype,"id",void 0),_([E()],wt.prototype,"ipCntryCode",void 0),_([E({readOnly:!0})],wt.prototype,"isOrganization",null),_([E()],wt.prototype,"isPortal",void 0),_([E()],wt.prototype,"isReadOnly",void 0),_([E({readOnly:!0})],wt.prototype,"itemPageUrl",null),_([E()],wt.prototype,"layerTemplatesGroupQuery",void 0),_([E()],wt.prototype,"maxTokenExpirationMinutes",void 0),_([E({type:Date})],wt.prototype,"modified",void 0),_([E()],wt.prototype,"name",void 0),_([E()],wt.prototype,"portalHostname",void 0),_([E()],wt.prototype,"portalMode",void 0),_([E()],wt.prototype,"portalProperties",void 0),_([E()],wt.prototype,"region",void 0),_([E()],wt.prototype,"recycleBinEnabled",void 0),_([E({readOnly:!0})],wt.prototype,"restUrl",null),_([E()],wt.prototype,"rotatorPanels",void 0),_([E()],wt.prototype,"showHomePageDescription",void 0),_([E()],wt.prototype,"sourceJSON",void 0),_([E()],wt.prototype,"staticImagesUrl",void 0),_([E({json:{name:"2DStylesGroupQuery"}})],wt.prototype,"stylesGroupQuery2d",void 0),_([E({json:{name:"stylesGroupQuery"}})],wt.prototype,"stylesGroupQuery3d",void 0),_([E()],wt.prototype,"supportsHostedServices",void 0),_([E()],wt.prototype,"symbolSetsGroupQuery",void 0),_([E()],wt.prototype,"templatesGroupQuery",void 0),_([E()],wt.prototype,"thumbnail",void 0),_([E({readOnly:!0})],wt.prototype,"thumbnailUrl",null),_([E()],wt.prototype,"units",void 0),_([E()],wt.prototype,"url",void 0),_([E()],wt.prototype,"urlKey",void 0),_([ae("urlKey")],wt.prototype,"readUrlKey",null),_([E()],wt.prototype,"user",void 0),_([ae("user")],wt.prototype,"readUser",null),_([E()],wt.prototype,"use3dBasemaps",void 0),_([E()],wt.prototype,"useDefault3dBasemap",void 0),_([E()],wt.prototype,"useStandardizedQuery",void 0),_([E()],wt.prototype,"useVectorBasemaps",void 0),_([E()],wt.prototype,"vectorBasemapGalleryGroupQuery",void 0),wt=gs=_([Y("esri.portal.Portal")],wt);const q7=new FinalizationRegistry((t=>{t.remove()}));function ZU(t){const e=xe;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch((()=>{}))}}let Vo=class extends Ot{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:V7(e.path,e.portalItem)}:e}set path(e){e!=null&&hs(e)?At.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return V7(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const s=this.cdnUrl;if(s==null)throw new ct("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(e,i){const{addOrUpdateResources:s}=await mt(()=>import("./resourceUtils-CbFcqewb.js"),__vite__mapDeps([18,1,2,3,4]));return await s(this.portalItem,[{resource:this,content:e,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function V7(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&hs(t)&&(t=c_(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}_([E()],Vo.prototype,"portalItem",void 0),_([E({type:String,value:null})],Vo.prototype,"path",null),_([Ui("path")],Vo.prototype,"_castPath",null),_([E({type:String,readOnly:!0})],Vo.prototype,"url",null),_([E({type:String,readOnly:!0})],Vo.prototype,"cdnUrl",null),_([E({type:String,readOnly:!0})],Vo.prototype,"itemRelativeUrl",null),Vo=_([Y("esri.portal.PortalItemResource")],Vo);let qu=class extends Ot{constructor(e){super(e),this.created=null,this.rating=null}};_([E({type:Date})],qu.prototype,"created",void 0),_([E()],qu.prototype,"rating",void 0),qu=_([Y("esri.portal.PortalRating")],qu);var mu;const XU=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),QU=new Set(["KML","GeoJson","CSV"]);let Ht=mu=class extends It.JSONSupportMixin(tn){static from(t){return Kp(mu,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Zt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",s="16";let l,f=!1,y=!1,v=!1,b=!1,S=!1,A=!1,P=!1,k=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(f=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(y=e.includes("Table"),v=e.includes("Route Layer"),b=e.includes("Markup"),S=e.includes("Spatiotemporal"),A=e.includes("UtilityNetwork"),l=S&&y?"spatiotemporaltable":y?"table":v?"routelayer":b?"markup":S?"spatiotemporal":A?"utilitynetwork":f?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(S=e.includes("Spatiotemporal"),P=e.includes("Relational"),l=S||P?"mapimages":f||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):l=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?l="maps":t==="web scene"?l=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?l="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?l="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?l="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?l="datafiles":t==="360 vr experience"?l="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?l="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?l="addindesktop":t==="pdf"?l="pdf":t==="microsoft word"?l="word":t==="microsoft excel"?l="excel":t==="microsoft powerpoint"?l="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?l="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?l="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?l="layersgray":t==="analysis model"?l="analysismodel":t==="scene package"?l="scenepackage":t==="3dtiles package"?l="3dtileslayerpackage":t==="3dtiles service"?l="3dtileslayer":t==="mobile scene package"?l="mobilescenepackage":t==="tile package"||t==="compact tile package"?l="tilepackage":t==="task file"?l="taskfile":t==="report template"?l="report-template":t==="statistical data collection"?l="statisticaldatacollection":t==="insights workbook"?l="workbook":t==="insights model"?l="insightsmodel":t==="insights page"?l="insightspage":t==="insights theme"?l="insightstheme":t==="hub initiative"?l="hubinitiative":t==="hub page"?l="hubpage":t==="hub site application"?l="hubsite":t==="hub event"?l="hubevent":t==="hub project"?l="hubproject":t==="relational database connection"?l="relationaldatabaseconnection":t==="big data file share"?l="datastorecollection":t==="image collection"?l="imagecollection":t==="desktop style"?l="desktopstyle":t==="style"?l=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?l="dashboard":t==="raster function template"?l="rasterprocessingtemplate":t==="vector tile package"?l="vectortilepackage":t==="ortho mapping project"?l="orthomappingproject":t==="ortho mapping template"?l="orthomappingtemplate":t==="solution"?l="solutions":t==="geopackage"?l="geopackage":t==="deep learning package"?l="deeplearningpackage":t==="real time analytic"?l="realtimeanalytics":t==="reality mapping project"?l="realitymappingproject":t==="big data analytic"?l="bigdataanalytics":t==="feed"?l="feed":t==="excalibur imagery project"?l="excaliburimageryproject":t==="notebook"?l="notebook":t==="storymap"?l="storymap":t==="survey123 add in"?l="survey123addin":t==="mission"?l="mission":t==="mission report"?l="missionreport":t==="mission template"?l="missiontemplate":t==="quickcapture project"?l="quickcaptureproject":t==="pro report"?l="proreport":t==="pro report template"?l="proreporttemplate":t==="urban model"?l="urbanmodel":t==="urban project"?l="urbanproject":t==="web experience"?l="experiencebuilder":t==="web experience template"?l="webexperiencetemplate":t==="experience builder widget"?l="experiencebuilderwidget":t==="experience builder widget package"?l="experiencebuilderwidgetpackage":t==="workflow"?l="workflow":t==="kernel gateway connection"?l="kernelgatewayconnection":t==="insights script"?l="insightsscript":t==="hub initiative template"?l="hubinitiativetemplate":t==="storymap theme"?l="storymaptheme":t==="knowledge graph"?l="knowledgegraph":t==="knowledge graph layer"?l="knowledgegraphlayer":t==="knowledge studio project"?l="knowledgestudio":t==="native application"?l="nativeapp":t==="native application installer"?l="nativeappinstaller":t==="web link chart"?l="linkchart":t==="knowledge graph web investigation"?l="investigation":t==="ogcfeatureserver"?l="features":t==="pro presentation"?l="propresentation":t==="pro project"?l="proproject":t==="insights workbook package"?l="insightsworkbookpackage":t==="apache parquet"?l="apacheparquet":t==="notebook code snippet library"?l="notebookcodesnippets":t==="suitability model"?l="suitabilitymodel":t==="esri classifier definition"?l="classifierdefinition":t==="esri classification schema"?l="classificationschema":t==="insights data engineering workbook"?l="dataengineeringworkbook":t==="insights data engineering model"?l="dataengineeringmodel":t==="deep learning studio project"?l="deeplearningproject":t==="discussion"?l="discussion":t==="allsource project"?l="allsourceproject":t==="api key"?l="apikey":t==="data pipeline"?l="datapipelines":t==="group layer"?(k=e.includes("Map"),l=k?"layergroup2d":"layergroup"):l=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",l?_i(i+l+s+".png"):null}get isLayer(){return this.type!=null&&XU.has(this.type)}get itemCdnUrl(){return m_(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=wt.getDefault()),i=e.load(t).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{})).then((s=>{this.sourceJSON=s,this.read(s)}));return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof qu?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new qu({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:yt(this.applicationProxies),avgRating:this.avgRating,categories:yt(this.categories),classification:yt(this.classification),created:yt(this.created),culture:this.culture,description:this.description,extent:yt(this.extent),groupCategories:yt(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:yt(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:yt(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:yt(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:yt(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new mu({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const i=t[e];i&&(t[e]=JSON.stringify(i))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new qu(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},mu)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this)))}update(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t?.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new ct("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ct("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:s,folder:l,tags:f,title:y}=t||{},v={method:"post",query:{copyPrivateResources:s==="all",folder:typeof l=="string"?l:l?.id,includeResources:!!s,tags:f?.join(","),title:y}},{itemId:b}=await e.request(`${i}/copy`,v);return new mu({id:b,portal:e})}updateThumbnail(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t.thumbnail,i=t.filename,s={method:"post"};if(typeof e=="string")Ih(e)?s.query={data:e}:s.query={url:Xs(e)},i!=null&&(s.query.filename=i);else{const l=new FormData;i!=null?l.append("file",e,i):l.append("file",e),s.body=l}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then((()=>this.reload()))})):Promise.reject(new ct("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await mt(()=>import("./resourceUtils-CbFcqewb.js"),__vite__mapDeps([18,1,2,3,4]));return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:s}=await mt(()=>import("./resourceUtils-CbFcqewb.js"),__vite__mapDeps([18,1,2,3,4]));return t.portalItem=this,await s(this,[{resource:t,content:e,compress:i?.compress,access:i?.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await mt(()=>import("./resourceUtils-CbFcqewb.js"),__vite__mapDeps([18,1,2,3,4]));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ct("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await mt(()=>import("./resourceUtils-CbFcqewb.js"),__vite__mapDeps([18,1,2,3,4]));return e(this,t)}resourceFromPath(t){return new Vo({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:yt(this.categories),classification:yt(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:yt(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:yt(this.typeKeywords),url:this.url};return MD(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new mu({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};_([E({type:["private","shared","org","public"]})],Ht.prototype,"access",void 0),_([E()],Ht.prototype,"accessInformation",void 0),_([E({type:String})],Ht.prototype,"apiKey",void 0),_([E({json:{read:{source:"appProxies"}}})],Ht.prototype,"applicationProxies",void 0),_([E()],Ht.prototype,"avgRating",void 0),_([E()],Ht.prototype,"categories",void 0),_([E()],Ht.prototype,"classification",void 0),_([E({type:Date})],Ht.prototype,"created",void 0),_([E()],Ht.prototype,"culture",void 0),_([E()],Ht.prototype,"description",void 0),_([E({readOnly:!0})],Ht.prototype,"displayName",null),_([E({type:Zt})],Ht.prototype,"extent",void 0),_([ae("extent")],Ht.prototype,"readExtent",null),_([E()],Ht.prototype,"groupCategories",void 0),_([E({readOnly:!0})],Ht.prototype,"iconUrl",null),_([E()],Ht.prototype,"id",void 0),_([E({readOnly:!0})],Ht.prototype,"isLayer",null),_([E({type:Boolean,readOnly:!0})],Ht.prototype,"isOrgItem",void 0),_([E()],Ht.prototype,"itemControl",void 0),_([E({readOnly:!0})],Ht.prototype,"itemPageUrl",null),_([E({readOnly:!0})],Ht.prototype,"itemUrl",null),_([E()],Ht.prototype,"licenseInfo",void 0),_([E({type:Date})],Ht.prototype,"modified",void 0),_([E()],Ht.prototype,"name",void 0),_([E()],Ht.prototype,"numComments",void 0),_([E()],Ht.prototype,"numRatings",void 0),_([E()],Ht.prototype,"numViews",void 0),_([E()],Ht.prototype,"owner",void 0),_([E()],Ht.prototype,"ownerFolder",void 0),_([E({type:wt})],Ht.prototype,"portal",void 0),_([E()],Ht.prototype,"screenshots",void 0),_([E()],Ht.prototype,"size",void 0),_([E()],Ht.prototype,"snippet",void 0),_([E()],Ht.prototype,"sourceJSON",void 0),_([E({type:String})],Ht.prototype,"sourceUrl",void 0),_([E({type:String})],Ht.prototype,"spatialReference",void 0),_([E()],Ht.prototype,"tags",void 0),_([E()],Ht.prototype,"thumbnail",void 0),_([E({readOnly:!0})],Ht.prototype,"thumbnailUrl",null),_([E()],Ht.prototype,"title",void 0),_([E()],Ht.prototype,"type",void 0),_([E()],Ht.prototype,"typeKeywords",void 0),_([E({type:String,json:{read(t,e){if(QU.has(e.type)){const i=this.portal?.restUrl;t||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return t}}})],Ht.prototype,"url",void 0),_([E({readOnly:!0})],Ht.prototype,"userItemUrl",null),Ht=mu=_([Y("esri.portal.PortalItem")],Ht);const IA=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ht}},Symbol.toStringTag,{value:"Module"})),PA={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function tG(t){return t in PA}function H7(t){if(tG(t)){const e=PA[t];return e===!0?t:e}return null}const Qf=[],Nc=new Map;function W7(t){for(const e of Nc.keys())RA(t.pattern,e)&&Nc.delete(e)}function eG(t){return Qf.includes(t)||(W7(t),Qf.unshift(t)),fe((()=>{const e=Qf.indexOf(t);e>-1&&(Qf.splice(e,1),W7(t))}))}async function OA(t){const e=on();Nc.has(t)||Nc.set(t,iG(t,e));const i=Nc.get(t);return i&&await rG.add(i),i}function kA(t){const e=F_(t);return e?H7(t)??H7(e.language):null}async function iG(t,e){const i=[];for(const s of Qf)if(RA(s.pattern,t))try{return await s.fetchMessageBundle(t,e)}catch(l){i.push(l)}throw i.length?new ct("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ct("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function RA(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}z_((()=>{Nc.clear()}));const rG=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ln())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function sG(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await OA("esri/t9n/basemaps");return i[t]||i[e]}const Zw={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return _i("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return _i("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return _i("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return _i("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return _i("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return _i("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},Eo="system",U_="unknown",Id="UTC",nG=Intl.DateTimeFormat().resolvedOptions().timeZone,J7=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Rh extends Error{}class oG extends Rh{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class aG extends Rh{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class lG extends Rh{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class _c extends Rh{}class CA extends Rh{constructor(e){super(`Invalid unit ${e}`)}}class xr extends Rh{}class Ua extends Rh{constructor(){super("Zone is an abstract class")}}const Pt="numeric",Hn="short",Is="long",hm={year:Pt,month:Pt,day:Pt},NA={year:Pt,month:Hn,day:Pt},uG={year:Pt,month:Hn,day:Pt,weekday:Hn},LA={year:Pt,month:Is,day:Pt},DA={year:Pt,month:Is,day:Pt,weekday:Is},jA={hour:Pt,minute:Pt},FA={hour:Pt,minute:Pt,second:Pt},zA={hour:Pt,minute:Pt,second:Pt,timeZoneName:Hn},UA={hour:Pt,minute:Pt,second:Pt,timeZoneName:Is},GA={hour:Pt,minute:Pt,hourCycle:"h23"},BA={hour:Pt,minute:Pt,second:Pt,hourCycle:"h23"},qA={hour:Pt,minute:Pt,second:Pt,hourCycle:"h23",timeZoneName:Hn},VA={hour:Pt,minute:Pt,second:Pt,hourCycle:"h23",timeZoneName:Is},HA={year:Pt,month:Pt,day:Pt,hour:Pt,minute:Pt},WA={year:Pt,month:Pt,day:Pt,hour:Pt,minute:Pt,second:Pt},JA={year:Pt,month:Hn,day:Pt,hour:Pt,minute:Pt},YA={year:Pt,month:Hn,day:Pt,hour:Pt,minute:Pt,second:Pt},hG={year:Pt,month:Hn,day:Pt,weekday:Hn,hour:Pt,minute:Pt},KA={year:Pt,month:Is,day:Pt,hour:Pt,minute:Pt,timeZoneName:Hn},ZA={year:Pt,month:Is,day:Pt,hour:Pt,minute:Pt,second:Pt,timeZoneName:Hn},XA={year:Pt,month:Is,day:Pt,weekday:Is,hour:Pt,minute:Pt,timeZoneName:Is},QA={year:Pt,month:Is,day:Pt,weekday:Is,hour:Pt,minute:Pt,second:Pt,timeZoneName:Is};class h1{get type(){throw new Ua}get name(){throw new Ua}get ianaName(){return this.name}get isUniversal(){throw new Ua}offsetName(e,i){throw new Ua}formatOffset(e,i){throw new Ua}offset(e){throw new Ua}equals(e){throw new Ua}get isValid(){throw new Ua}}let Wv=null;class $2 extends h1{static get instance(){return Wv===null&&(Wv=new $2),Wv}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return hI(e,i,s)}formatOffset(e,i){return X0(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Xw=new Map;function cG(t){let e=Xw.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Xw.set(t,e)),e}const pG={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function fG(t,e){const i=t.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,l,f,y,v,b,S,A]=s;return[y,l,f,v,b,S,A]}function dG(t,e){const i=t.formatToParts(e),s=[];for(let l=0;l<i.length;l++){const{type:f,value:y}=i[l],v=pG[f];f==="era"?s[v]=y:Kt(v)||(s[v]=parseInt(y,10))}return s}const Jv=new Map;class Wn extends h1{static create(e){let i=Jv.get(e);return i===void 0&&Jv.set(e,i=new Wn(e)),i}static resetCache(){Jv.clear(),Xw.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Wn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return hI(e,i,s,this.name)}formatOffset(e,i){return X0(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const s=cG(this.name);let[l,f,y,v,b,S,A]=s.formatToParts?dG(s,i):fG(s,i);v==="BC"&&(l=-Math.abs(l)+1);const k=I2({year:l,month:f,day:y,hour:b===24?0:b,minute:S,second:A,millisecond:0});let C=+i;const L=C%1e3;return C-=L>=0?L:1e3+L,(k-C)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Y7={};function yG(t,e={}){const i=JSON.stringify([t,e]);let s=Y7[i];return s||(s=new Intl.ListFormat(t,e),Y7[i]=s),s}const Qw=new Map;function tb(t,e={}){const i=JSON.stringify([t,e]);let s=Qw.get(i);return s===void 0&&(s=new Intl.DateTimeFormat(t,e),Qw.set(i,s)),s}const eb=new Map;function gG(t,e={}){const i=JSON.stringify([t,e]);let s=eb.get(i);return s===void 0&&(s=new Intl.NumberFormat(t,e),eb.set(i,s)),s}const ib=new Map;function mG(t,e={}){const{base:i,...s}=e,l=JSON.stringify([t,s]);let f=ib.get(l);return f===void 0&&(f=new Intl.RelativeTimeFormat(t,e),ib.set(l,f)),f}let t0=null;function vG(){return t0||(t0=new Intl.DateTimeFormat().resolvedOptions().locale,t0)}const rb=new Map;function tI(t){let e=rb.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),rb.set(t,e)),e}const sb=new Map;function wG(t){let e=sb.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...eI,...e}),sb.set(t,e)}return e}function bG(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let s,l;try{s=tb(t).resolvedOptions(),l=t}catch{const b=t.substring(0,i);s=tb(b).resolvedOptions(),l=b}const{numberingSystem:f,calendar:y}=s;return[l,f,y]}}function _G(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function xG(t){const e=[];for(let i=1;i<=12;i++){const s=Bt.utc(2009,i,1);e.push(t(s))}return e}function SG(t){const e=[];for(let i=1;i<=7;i++){const s=Bt.utc(2016,11,13+i);e.push(t(s))}return e}function U1(t,e,i,s){const l=t.listingMode();return l==="error"?null:l==="en"?i(e):s(e)}function TG(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||tI(t.locale).numberingSystem==="latn"}class MG{constructor(e,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:f,...y}=s;if(!i||Object.keys(y).length>0){const v={useGrouping:!1,...s};s.padTo>0&&(v.minimumIntegerDigits=s.padTo),this.inf=gG(e,v)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):H_(e,3);return ji(i,this.padTo)}}}class EG{constructor(e,i,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const y=-1*(e.offset/60),v=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;e.offset!==0&&Wn.create(v).valid?(l=v,this.dt=e):(l="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,l=e.zone.name):(l="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const f={...this.opts};f.timeZone=f.timeZone||l,this.dtf=tb(i,f)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class $G{constructor(e,i,s){this.opts={style:"long",...s},!i&&lI()&&(this.rtf=mG(e,s))}format(e,i){return this.rtf?this.rtf.format(e,i):YG(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const eI={firstDay:1,minimalDays:4,weekend:[6,7]};class Oe{static fromOpts(e){return Oe.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,s,l,f=!1){const y=e||Si.defaultLocale,v=y||(f?"en-US":vG()),b=i||Si.defaultNumberingSystem,S=s||Si.defaultOutputCalendar,A=ob(l)||Si.defaultWeekSettings;return new Oe(v,b,S,A,y)}static resetCache(){t0=null,Qw.clear(),eb.clear(),ib.clear(),rb.clear(),sb.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:s,weekSettings:l}={}){return Oe.create(e,i,s,l)}constructor(e,i,s,l,f){const[y,v,b]=bG(e);this.locale=y,this.numberingSystem=i||v||null,this.outputCalendar=s||b||null,this.weekSettings=l,this.intl=_G(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=f,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=TG(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Oe.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ob(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return U1(this,e,fI,()=>{const s=i?{month:e,day:"numeric"}:{month:e},l=i?"format":"standalone";return this.monthsCache[l][e]||(this.monthsCache[l][e]=xG(f=>this.extract(f,s,"month"))),this.monthsCache[l][e]})}weekdays(e,i=!1){return U1(this,e,gI,()=>{const s=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},l=i?"format":"standalone";return this.weekdaysCache[l][e]||(this.weekdaysCache[l][e]=SG(f=>this.extract(f,s,"weekday"))),this.weekdaysCache[l][e]})}meridiems(){return U1(this,void 0,()=>mI,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Bt.utc(2016,11,13,9),Bt.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return U1(this,e,vI,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Bt.utc(-40,1,1),Bt.utc(2017,1,1)].map(s=>this.extract(s,i,"era"))),this.eraCache[e]})}extract(e,i,s){const l=this.dtFormatter(e,i),f=l.formatToParts(),y=f.find(v=>v.type.toLowerCase()===s);return y?y.value:null}numberFormatter(e={}){return new MG(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new EG(e,this.intl,i)}relFormatter(e={}){return new $G(this.intl,this.isEnglish(),e)}listFormatter(e={}){return yG(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||tI(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:uI()?wG(this.locale):eI}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Yv=null;class $r extends h1{static get utcInstance(){return Yv===null&&(Yv=new $r(0)),Yv}static instance(e){return e===0?$r.utcInstance:new $r(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new $r(P2(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${X0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${X0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return X0(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class AG extends h1{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function wl(t,e){if(Kt(t)||t===null)return e;if(t instanceof h1)return t;if(CG(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?$2.instance:i==="utc"||i==="gmt"?$r.utcInstance:$r.parseSpecifier(i)||Wn.create(t)}else return Cl(t)?$r.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new AG(t)}const G_={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},K7={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},IG=G_.hanidec.replace(/[\[|\]]/g,"").split("");function PG(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);if(t[i].search(G_.hanidec)!==-1)e+=IG.indexOf(t[i]);else for(const l in K7){const[f,y]=K7[l];s>=f&&s<=y&&(e+=s-f)}}return parseInt(e,10)}else return e}const nb=new Map;function OG(){nb.clear()}function xn({numberingSystem:t},e=""){const i=t||"latn";let s=nb.get(i);s===void 0&&(s=new Map,nb.set(i,s));let l=s.get(e);return l===void 0&&(l=new RegExp(`${G_[i]}${e}`),s.set(e,l)),l}let Z7=()=>Date.now(),X7="system",Q7=null,t8=null,e8=null,i8=60,r8,s8=null;class Si{static get now(){return Z7}static set now(e){Z7=e}static set defaultZone(e){X7=e}static get defaultZone(){return wl(X7,$2.instance)}static get defaultLocale(){return Q7}static set defaultLocale(e){Q7=e}static get defaultNumberingSystem(){return t8}static set defaultNumberingSystem(e){t8=e}static get defaultOutputCalendar(){return e8}static set defaultOutputCalendar(e){e8=e}static get defaultWeekSettings(){return s8}static set defaultWeekSettings(e){s8=ob(e)}static get twoDigitCutoffYear(){return i8}static set twoDigitCutoffYear(e){i8=e%100}static get throwOnInvalid(){return r8}static set throwOnInvalid(e){r8=e}static resetCaches(){Oe.resetCache(),Wn.resetCache(),Bt.resetCache(),OG()}}class Dn{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const iI=[0,31,59,90,120,151,181,212,243,273,304,334],rI=[0,31,60,91,121,152,182,213,244,274,305,335];function en(t,e){return new Dn("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function B_(t,e,i){const s=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function sI(t,e,i){return i+(c1(t)?rI:iI)[e-1]}function nI(t,e){const i=c1(t)?rI:iI,s=i.findIndex(f=>f<e),l=e-i[s];return{month:s+1,day:l}}function q_(t,e){return(t-e+7)%7+1}function cm(t,e=4,i=1){const{year:s,month:l,day:f}=t,y=sI(s,l,f),v=q_(B_(s,l,f),i);let b=Math.floor((y-v+14-e)/7),S;return b<1?(S=s-1,b=Pd(S,e,i)):b>Pd(s,e,i)?(S=s+1,b=1):S=s,{weekYear:S,weekNumber:b,weekday:v,...O2(t)}}function n8(t,e=4,i=1){const{weekYear:s,weekNumber:l,weekday:f}=t,y=q_(B_(s,1,e),i),v=Lc(s);let b=l*7+f-y-7+e,S;b<1?(S=s-1,b+=Lc(S)):b>v?(S=s+1,b-=Lc(s)):S=s;const{month:A,day:P}=nI(S,b);return{year:S,month:A,day:P,...O2(t)}}function Kv(t){const{year:e,month:i,day:s}=t,l=sI(e,i,s);return{year:e,ordinal:l,...O2(t)}}function o8(t){const{year:e,ordinal:i}=t,{month:s,day:l}=nI(e,i);return{year:e,month:s,day:l,...O2(t)}}function a8(t,e){if(!Kt(t.localWeekday)||!Kt(t.localWeekNumber)||!Kt(t.localWeekYear)){if(!Kt(t.weekday)||!Kt(t.weekNumber)||!Kt(t.weekYear))throw new _c("Cannot mix locale-based week fields with ISO-based week fields");return Kt(t.localWeekday)||(t.weekday=t.localWeekday),Kt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Kt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function kG(t,e=4,i=1){const s=A2(t.weekYear),l=rn(t.weekNumber,1,Pd(t.weekYear,e,i)),f=rn(t.weekday,1,7);return s?l?f?!1:en("weekday",t.weekday):en("week",t.weekNumber):en("weekYear",t.weekYear)}function RG(t){const e=A2(t.year),i=rn(t.ordinal,1,Lc(t.year));return e?i?!1:en("ordinal",t.ordinal):en("year",t.year)}function oI(t){const e=A2(t.year),i=rn(t.month,1,12),s=rn(t.day,1,pm(t.year,t.month));return e?i?s?!1:en("day",t.day):en("month",t.month):en("year",t.year)}function aI(t){const{hour:e,minute:i,second:s,millisecond:l}=t,f=rn(e,0,23)||e===24&&i===0&&s===0&&l===0,y=rn(i,0,59),v=rn(s,0,59),b=rn(l,0,999);return f?y?v?b?!1:en("millisecond",l):en("second",s):en("minute",i):en("hour",e)}function Kt(t){return typeof t>"u"}function Cl(t){return typeof t=="number"}function A2(t){return typeof t=="number"&&t%1===0}function CG(t){return typeof t=="string"}function NG(t){return Object.prototype.toString.call(t)==="[object Date]"}function lI(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function uI(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function LG(t){return Array.isArray(t)?t:[t]}function l8(t,e,i){if(t.length!==0)return t.reduce((s,l)=>{const f=[e(l),l];return s&&i(s[0],f[0])===s[0]?s:f},null)[1]}function DG(t,e){return e.reduce((i,s)=>(i[s]=t[s],i),{})}function Tp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ob(t){if(t==null)return null;if(typeof t!="object")throw new xr("Week settings must be an object");if(!rn(t.firstDay,1,7)||!rn(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!rn(e,1,7)))throw new xr("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function rn(t,e,i){return A2(t)&&t>=e&&t<=i}function jG(t,e){return t-e*Math.floor(t/e)}function ji(t,e=2){const i=t<0;let s;return i?s="-"+(""+-t).padStart(e,"0"):s=(""+t).padStart(e,"0"),s}function pl(t){if(!(Kt(t)||t===null||t===""))return parseInt(t,10)}function ou(t){if(!(Kt(t)||t===null||t===""))return parseFloat(t)}function V_(t){if(!(Kt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function H_(t,e,i=!1){const s=10**e;return(i?Math.trunc:Math.round)(t*s)/s}function c1(t){return t%4===0&&(t%100!==0||t%400===0)}function Lc(t){return c1(t)?366:365}function pm(t,e){const i=jG(e-1,12)+1,s=t+(e-i)/12;return i===2?c1(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function I2(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function u8(t,e,i){return-q_(B_(t,1,e),i)+e-1}function Pd(t,e=4,i=1){const s=u8(t,e,i),l=u8(t+1,e,i);return(Lc(t)-s+l)/7}function ab(t){return t>99?t:t>Si.twoDigitCutoffYear?1900+t:2e3+t}function hI(t,e,i,s=null){const l=new Date(t),f={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(f.timeZone=s);const y={timeZoneName:e,...f},v=new Intl.DateTimeFormat(i,y).formatToParts(l).find(b=>b.type.toLowerCase()==="timezonename");return v?v.value:null}function P2(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const s=parseInt(e,10)||0,l=i<0||Object.is(i,-0)?-s:s;return i*60+l}function cI(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new xr(`Invalid unit value ${t}`);return e}function fm(t,e){const i={};for(const s in t)if(Tp(t,s)){const l=t[s];if(l==null)continue;i[e(s)]=cI(l)}return i}function X0(t,e){const i=Math.trunc(Math.abs(t/60)),s=Math.trunc(Math.abs(t%60)),l=t>=0?"+":"-";switch(e){case"short":return`${l}${ji(i,2)}:${ji(s,2)}`;case"narrow":return`${l}${i}${s>0?`:${s}`:""}`;case"techie":return`${l}${ji(i,2)}${ji(s,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function O2(t){return DG(t,["hour","minute","second","millisecond"])}const FG=["January","February","March","April","May","June","July","August","September","October","November","December"],pI=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zG=["J","F","M","A","M","J","J","A","S","O","N","D"];function fI(t){switch(t){case"narrow":return[...zG];case"short":return[...pI];case"long":return[...FG];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dI=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],yI=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],UG=["M","T","W","T","F","S","S"];function gI(t){switch(t){case"narrow":return[...UG];case"short":return[...yI];case"long":return[...dI];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const mI=["AM","PM"],GG=["Before Christ","Anno Domini"],BG=["BC","AD"],qG=["B","A"];function vI(t){switch(t){case"narrow":return[...qG];case"short":return[...BG];case"long":return[...GG];default:return null}}function VG(t){return mI[t.hour<12?0:1]}function HG(t,e){return gI(e)[t.weekday-1]}function WG(t,e){return fI(e)[t.month-1]}function JG(t,e){return vI(e)[t.year<0?0:1]}function YG(t,e,i="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},f=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&f){const P=t==="days";switch(e){case 1:return P?"tomorrow":`next ${l[t][0]}`;case-1:return P?"yesterday":`last ${l[t][0]}`;case 0:return P?"today":`this ${l[t][0]}`}}const y=Object.is(e,-0)||e<0,v=Math.abs(e),b=v===1,S=l[t],A=s?b?S[1]:S[2]||S[1]:b?l[t][0]:t;return y?`${v} ${A} ago`:`in ${v} ${A}`}function h8(t,e){let i="";for(const s of t)s.literal?i+=s.val:i+=e(s.val);return i}const KG={D:hm,DD:NA,DDD:LA,DDDD:DA,t:jA,tt:FA,ttt:zA,tttt:UA,T:GA,TT:BA,TTT:qA,TTTT:VA,f:HA,ff:JA,fff:KA,ffff:XA,F:WA,FF:YA,FFF:ZA,FFFF:QA};class Er{static create(e,i={}){return new Er(e,i)}static parseFormat(e){let i=null,s="",l=!1;const f=[];for(let y=0;y<e.length;y++){const v=e.charAt(y);v==="'"?(s.length>0&&f.push({literal:l||/^\s+$/.test(s),val:s}),i=null,s="",l=!l):l||v===i?s+=v:(s.length>0&&f.push({literal:/^\s+$/.test(s),val:s}),s=v,i=v)}return s.length>0&&f.push({literal:l||/^\s+$/.test(s),val:s}),f}static macroTokenToFormatOpts(e){return KG[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return ji(e,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",f=(C,L)=>this.loc.extract(e,C,L),y=C=>e.isOffsetFixed&&e.offset===0&&C.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,C.format):"",v=()=>s?VG(e):f({hour:"numeric",hourCycle:"h12"},"dayperiod"),b=(C,L)=>s?WG(e,C):f(L?{month:C}:{month:C,day:"numeric"},"month"),S=(C,L)=>s?HG(e,C):f(L?{weekday:C}:{weekday:C,month:"long",day:"numeric"},"weekday"),A=C=>{const L=Er.macroTokenToFormatOpts(C);return L?this.formatWithSystemDefault(e,L):C},P=C=>s?JG(e,C):f({era:C},"era"),k=C=>{switch(C){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return v();case"d":return l?f({day:"numeric"},"day"):this.num(e.day);case"dd":return l?f({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return l?f({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return l?f({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return b("short",!0);case"LLLL":return b("long",!0);case"LLLLL":return b("narrow",!0);case"M":return l?f({month:"numeric"},"month"):this.num(e.month);case"MM":return l?f({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return b("short",!1);case"MMMM":return b("long",!1);case"MMMMM":return b("narrow",!1);case"y":return l?f({year:"numeric"},"year"):this.num(e.year);case"yy":return l?f({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return l?f({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return l?f({year:"numeric"},"year"):this.num(e.year,6);case"G":return P("short");case"GG":return P("long");case"GGGGG":return P("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return A(C)}};return h8(Er.parseFormat(i),k)}formatDurationFromString(e,i){const s=b=>{switch(b[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},l=b=>S=>{const A=s(S);return A?this.num(b.get(A),S.length):S},f=Er.parseFormat(i),y=f.reduce((b,{literal:S,val:A})=>S?b:b.concat(A),[]),v=e.shiftTo(...y.map(s).filter(b=>b));return h8(f,l(v))}}const wI=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Zp(...t){const e=t.reduce((i,s)=>i+s.source,"");return RegExp(`^${e}$`)}function Xp(...t){return e=>t.reduce(([i,s,l],f)=>{const[y,v,b]=f(e,l);return[{...i,...y},v||s,b]},[{},null,1]).slice(0,2)}function Qp(t,...e){if(t==null)return[null,null];for(const[i,s]of e){const l=i.exec(t);if(l)return s(l)}return[null,null]}function bI(...t){return(e,i)=>{const s={};let l;for(l=0;l<t.length;l++)s[t[l]]=pl(e[i+l]);return[s,null,i+l]}}const _I=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ZG=`(?:${_I.source}?(?:\\[(${wI.source})\\])?)?`,W_=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,xI=RegExp(`${W_.source}${ZG}`),J_=RegExp(`(?:T${xI.source})?`),XG=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,QG=/(\d{4})-?W(\d\d)(?:-?(\d))?/,tB=/(\d{4})-?(\d{3})/,eB=bI("weekYear","weekNumber","weekDay"),iB=bI("year","ordinal"),rB=/(\d{4})-(\d\d)-(\d\d)/,SI=RegExp(`${W_.source} ?(?:${_I.source}|(${wI.source}))?`),sB=RegExp(`(?: ${SI.source})?`);function Dc(t,e,i){const s=t[e];return Kt(s)?i:pl(s)}function nB(t,e){return[{year:Dc(t,e),month:Dc(t,e+1,1),day:Dc(t,e+2,1)},null,e+3]}function tf(t,e){return[{hours:Dc(t,e,0),minutes:Dc(t,e+1,0),seconds:Dc(t,e+2,0),milliseconds:V_(t[e+3])},null,e+4]}function p1(t,e){const i=!t[e]&&!t[e+1],s=P2(t[e+1],t[e+2]),l=i?null:$r.instance(s);return[{},l,e+3]}function f1(t,e){const i=t[e]?Wn.create(t[e]):null;return[{},i,e+1]}const oB=RegExp(`^T?${W_.source}$`),aB=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function lB(t){const[e,i,s,l,f,y,v,b,S]=t,A=e[0]==="-",P=b&&b[0]==="-",k=(C,L=!1)=>C!==void 0&&(L||C&&A)?-C:C;return[{years:k(ou(i)),months:k(ou(s)),weeks:k(ou(l)),days:k(ou(f)),hours:k(ou(y)),minutes:k(ou(v)),seconds:k(ou(b),b==="-0"),milliseconds:k(V_(S),P)}]}const uB={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Y_(t,e,i,s,l,f,y){const v={year:e.length===2?ab(pl(e)):pl(e),month:pI.indexOf(i)+1,day:pl(s),hour:pl(l),minute:pl(f)};return y&&(v.second=pl(y)),t&&(v.weekday=t.length>3?dI.indexOf(t)+1:yI.indexOf(t)+1),v}const hB=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function cB(t){const[,e,i,s,l,f,y,v,b,S,A,P]=t,k=Y_(e,l,s,i,f,y,v);let C;return b?C=uB[b]:S?C=0:C=P2(A,P),[k,new $r(C)]}function pB(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const fB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,dB=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function c8(t){const[,e,i,s,l,f,y,v]=t;return[Y_(e,l,s,i,f,y,v),$r.utcInstance]}function gB(t){const[,e,i,s,l,f,y,v]=t;return[Y_(e,v,i,s,l,f,y),$r.utcInstance]}const mB=Zp(XG,J_),vB=Zp(QG,J_),wB=Zp(tB,J_),bB=Zp(xI),TI=Xp(nB,tf,p1,f1),_B=Xp(eB,tf,p1,f1),xB=Xp(iB,tf,p1,f1),SB=Xp(tf,p1,f1);function TB(t){return Qp(t,[mB,TI],[vB,_B],[wB,xB],[bB,SB])}function MB(t){return Qp(pB(t),[hB,cB])}function EB(t){return Qp(t,[fB,c8],[dB,c8],[yB,gB])}function $B(t){return Qp(t,[aB,lB])}const AB=Xp(tf);function IB(t){return Qp(t,[oB,AB])}const PB=Zp(rB,sB),OB=Zp(SI),kB=Xp(tf,p1,f1);function RB(t){return Qp(t,[PB,TI],[OB,kB])}const p8="Invalid Duration",MI={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},CB={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...MI},Fs=146097/400,Fh=146097/4800,NB={years:{quarters:4,months:12,weeks:Fs/7,days:Fs,hours:Fs*24,minutes:Fs*24*60,seconds:Fs*24*60*60,milliseconds:Fs*24*60*60*1e3},quarters:{months:3,weeks:Fs/28,days:Fs/4,hours:Fs*24/4,minutes:Fs*24*60/4,seconds:Fs*24*60*60/4,milliseconds:Fs*24*60*60*1e3/4},months:{weeks:Fh/7,days:Fh,hours:Fh*24,minutes:Fh*24*60,seconds:Fh*24*60*60,milliseconds:Fh*24*60*60*1e3},...MI},Vu=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],LB=Vu.slice(0).reverse();function Ga(t,e,i=!1){const s={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new we(s)}function EI(t,e){let i=e.milliseconds??0;for(const s of LB.slice(1))e[s]&&(i+=e[s]*t[s].milliseconds);return i}function f8(t,e){const i=EI(t,e)<0?-1:1;Vu.reduceRight((s,l)=>{if(Kt(e[l]))return s;if(s){const f=e[s]*i,y=t[l][s],v=Math.floor(f/y);e[l]+=v*i,e[s]-=v*y*i}return l},null),Vu.reduce((s,l)=>{if(Kt(e[l]))return s;if(s){const f=e[s]%1;e[s]-=f,e[l]+=f*t[s][l]}return l},null)}function DB(t){const e={};for(const[i,s]of Object.entries(t))s!==0&&(e[i]=s);return e}class we{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let s=i?NB:CB;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||Oe.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,i){return we.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new xr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new we({values:fm(e,we.normalizeUnit),loc:Oe.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Cl(e))return we.fromMillis(e);if(we.isDuration(e))return e;if(typeof e=="object")return we.fromObject(e);throw new xr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[s]=$B(e);return s?we.fromObject(s,i):we.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[s]=IB(e);return s?we.fromObject(s,i):we.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new xr("need to specify a reason the Duration is invalid");const s=e instanceof Dn?e:new Dn(e,i);if(Si.throwOnInvalid)throw new lG(s);return new we({invalid:s})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new CA(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Er.create(this.loc,s).formatDurationFromString(this,e):p8}toHuman(e={}){if(!this.isValid)return p8;const i=Vu.map(s=>{const l=this.values[s];return Kt(l)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(l)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=H_(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Bt.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?EI(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e),s={};for(const l of Vu)(Tp(i.values,l)||Tp(this.values,l))&&(s[l]=i.get(l)+this.get(l));return Ga(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=cI(e(this.values[s],s));return Ga(this,{values:i},!0)}get(e){return this[we.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...fm(e,we.normalizeUnit)};return Ga(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:s,matrix:l}={}){const y={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:l,conversionAccuracy:s};return Ga(this,y)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return f8(this.matrix,e),Ga(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=DB(this.normalize().shiftToAll().toObject());return Ga(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(y=>we.normalizeUnit(y));const i={},s={},l=this.toObject();let f;for(const y of Vu)if(e.indexOf(y)>=0){f=y;let v=0;for(const S in s)v+=this.matrix[S][y]*s[S],s[S]=0;Cl(l[y])&&(v+=l[y]);const b=Math.trunc(v);i[y]=b,s[y]=(v*1e3-b*1e3)/1e3}else Cl(l[y])&&(s[y]=l[y]);for(const y in s)s[y]!==0&&(i[f]+=y===f?s[y]:s[y]/this.matrix[f][y]);return f8(this.matrix,i),Ga(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Ga(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of Vu)if(!i(this.values[s],e.values[s]))return!1;return!0}}const zh="Invalid Interval";function jB(t,e){return!t||!t.isValid?xi.invalid("missing or invalid start"):!e||!e.isValid?xi.invalid("missing or invalid end"):e<t?xi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class xi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new xr("need to specify a reason the Interval is invalid");const s=e instanceof Dn?e:new Dn(e,i);if(Si.throwOnInvalid)throw new aG(s);return new xi({invalid:s})}static fromDateTimes(e,i){const s=Sf(e),l=Sf(i),f=jB(s,l);return f??new xi({start:s,end:l})}static after(e,i){const s=we.fromDurationLike(i),l=Sf(e);return xi.fromDateTimes(l,l.plus(s))}static before(e,i){const s=we.fromDurationLike(i),l=Sf(e);return xi.fromDateTimes(l.minus(s),l)}static fromISO(e,i){const[s,l]=(e||"").split("/",2);if(s&&l){let f,y;try{f=Bt.fromISO(s,i),y=f.isValid}catch{y=!1}let v,b;try{v=Bt.fromISO(l,i),b=v.isValid}catch{b=!1}if(y&&b)return xi.fromDateTimes(f,v);if(y){const S=we.fromISO(l,i);if(S.isValid)return xi.after(f,S)}else if(b){const S=we.fromISO(s,i);if(S.isValid)return xi.before(v,S)}}return xi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const s=this.start.startOf(e,i);let l;return i?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(e,i),Math.floor(l.diff(s,e).get(e))+(l.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?xi.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Sf).filter(y=>this.contains(y)).sort((y,v)=>y.toMillis()-v.toMillis()),s=[];let{s:l}=this,f=0;for(;l<this.e;){const y=i[f]||this.e,v=+y>+this.e?this.e:y;s.push(xi.fromDateTimes(l,v)),l=v,f+=1}return s}splitBy(e){const i=we.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,l=1,f;const y=[];for(;s<this.e;){const v=this.start.plus(i.mapUnits(b=>b*l));f=+v>+this.e?this.e:v,y.push(xi.fromDateTimes(s,f)),s=f,l+=1}return y}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return i>=s?null:xi.fromDateTimes(i,s)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return xi.fromDateTimes(i,s)}static merge(e){const[i,s]=e.sort((l,f)=>l.s-f.s).reduce(([l,f],y)=>f?f.overlaps(y)||f.abutsStart(y)?[l,f.union(y)]:[l.concat([f]),y]:[l,y],[[],null]);return s&&i.push(s),i}static xor(e){let i=null,s=0;const l=[],f=e.map(b=>[{time:b.s,type:"s"},{time:b.e,type:"e"}]),y=Array.prototype.concat(...f),v=y.sort((b,S)=>b.time-S.time);for(const b of v)s+=b.type==="s"?1:-1,s===1?i=b.time:(i&&+i!=+b.time&&l.push(xi.fromDateTimes(i,b.time)),i=null);return xi.merge(l)}difference(...e){return xi.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:zh}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=hm,i={}){return this.isValid?Er.create(this.s.loc.clone(i),e).formatInterval(this):zh}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:zh}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:zh}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:zh}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:zh}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):we.invalid(this.invalidReason)}mapEndpoints(e){return xi.fromDateTimes(e(this.s),e(this.e))}}class G1{static hasDST(e=Si.defaultZone){const i=Bt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Wn.isValidZone(e)}static normalizeZone(e){return wl(e,Si.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Oe.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Oe.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Oe.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:s=null,locObj:l=null,outputCalendar:f="gregory"}={}){return(l||Oe.create(i,s,f)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:l=null,outputCalendar:f="gregory"}={}){return(l||Oe.create(i,s,f)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Oe.create(i,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Oe.create(i,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Oe.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Oe.create(i,null,"gregory").eras(e)}static features(){return{relative:lI(),localeWeek:uI()}}}function d8(t,e){const i=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(e)-i(t);return Math.floor(we.fromMillis(s).as("days"))}function FB(t,e,i){const s=[["years",(b,S)=>S.year-b.year],["quarters",(b,S)=>S.quarter-b.quarter+(S.year-b.year)*4],["months",(b,S)=>S.month-b.month+(S.year-b.year)*12],["weeks",(b,S)=>{const A=d8(b,S);return(A-A%7)/7}],["days",d8]],l={},f=t;let y,v;for(const[b,S]of s)i.indexOf(b)>=0&&(y=b,l[b]=S(t,e),v=f.plus(l),v>e?(l[b]--,t=f.plus(l),t>e&&(v=t,l[b]--,t=f.plus(l))):t=v);return[t,l,v,y]}function zB(t,e,i,s){let[l,f,y,v]=FB(t,e,i);const b=e-l,S=i.filter(P=>["hours","minutes","seconds","milliseconds"].indexOf(P)>=0);S.length===0&&(y<e&&(y=l.plus({[v]:1})),y!==l&&(f[v]=(f[v]||0)+b/(y-l)));const A=we.fromObject(f,s);return S.length>0?we.fromMillis(b,s).shiftTo(...S).plus(A):A}const UB="missing Intl.DateTimeFormat.formatToParts support";function Se(t,e=i=>i){return{regex:t,deser:([i])=>e(PG(i))}}const GB="",$I=`[ ${GB}]`,AI=new RegExp($I,"g");function BB(t){return t.replace(/\./g,"\\.?").replace(AI,$I)}function y8(t){return t.replace(/\./g,"").replace(AI," ").toLowerCase()}function Sn(t,e){return t===null?null:{regex:RegExp(t.map(BB).join("|")),deser:([i])=>t.findIndex(s=>y8(i)===y8(s))+e}}function g8(t,e){return{regex:t,deser:([,i,s])=>P2(i,s),groups:e}}function B1(t){return{regex:t,deser:([e])=>e}}function qB(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function VB(t,e){const i=xn(e),s=xn(e,"{2}"),l=xn(e,"{3}"),f=xn(e,"{4}"),y=xn(e,"{6}"),v=xn(e,"{1,2}"),b=xn(e,"{1,3}"),S=xn(e,"{1,6}"),A=xn(e,"{1,9}"),P=xn(e,"{2,4}"),k=xn(e,"{4,6}"),C=q=>({regex:RegExp(qB(q.val)),deser:([H])=>H,literal:!0}),F=(q=>{if(t.literal)return C(q);switch(q.val){case"G":return Sn(e.eras("short"),0);case"GG":return Sn(e.eras("long"),0);case"y":return Se(S);case"yy":return Se(P,ab);case"yyyy":return Se(f);case"yyyyy":return Se(k);case"yyyyyy":return Se(y);case"M":return Se(v);case"MM":return Se(s);case"MMM":return Sn(e.months("short",!0),1);case"MMMM":return Sn(e.months("long",!0),1);case"L":return Se(v);case"LL":return Se(s);case"LLL":return Sn(e.months("short",!1),1);case"LLLL":return Sn(e.months("long",!1),1);case"d":return Se(v);case"dd":return Se(s);case"o":return Se(b);case"ooo":return Se(l);case"HH":return Se(s);case"H":return Se(v);case"hh":return Se(s);case"h":return Se(v);case"mm":return Se(s);case"m":return Se(v);case"q":return Se(v);case"qq":return Se(s);case"s":return Se(v);case"ss":return Se(s);case"S":return Se(b);case"SSS":return Se(l);case"u":return B1(A);case"uu":return B1(v);case"uuu":return Se(i);case"a":return Sn(e.meridiems(),0);case"kkkk":return Se(f);case"kk":return Se(P,ab);case"W":return Se(v);case"WW":return Se(s);case"E":case"c":return Se(i);case"EEE":return Sn(e.weekdays("short",!1),1);case"EEEE":return Sn(e.weekdays("long",!1),1);case"ccc":return Sn(e.weekdays("short",!0),1);case"cccc":return Sn(e.weekdays("long",!0),1);case"Z":case"ZZ":return g8(new RegExp(`([+-]${v.source})(?::(${s.source}))?`),2);case"ZZZ":return g8(new RegExp(`([+-]${v.source})(${s.source})?`),2);case"z":return B1(/[a-z_+-/]{1,256}?/i);case" ":return B1(/[^\S\n\r]/);default:return C(q)}})(t)||{invalidReason:UB};return F.token=t,F}const HB={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function WB(t,e,i){const{type:s,value:l}=t;if(s==="literal"){const b=/^\s+$/.test(l);return{literal:!b,val:b?" ":l}}const f=e[s];let y=s;s==="hour"&&(e.hour12!=null?y=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?y="hour12":y="hour24":y=i.hour12?"hour12":"hour24");let v=HB[y];if(typeof v=="object"&&(v=v[f]),v)return{literal:!1,val:v}}function JB(t){return[`^${t.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,t]}function YB(t,e,i){const s=t.match(e);if(s){const l={};let f=1;for(const y in i)if(Tp(i,y)){const v=i[y],b=v.groups?v.groups+1:1;!v.literal&&v.token&&(l[v.token.val[0]]=v.deser(s.slice(f,f+b))),f+=b}return[s,l]}else return[s,{}]}function KB(t){const e=f=>{switch(f){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return Kt(t.z)||(i=Wn.create(t.z)),Kt(t.Z)||(i||(i=new $r(t.Z)),s=t.Z),Kt(t.q)||(t.M=(t.q-1)*3+1),Kt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Kt(t.u)||(t.S=V_(t.u)),[Object.keys(t).reduce((f,y)=>{const v=e(y);return v&&(f[v]=t[y]),f},{}),i,s]}let Zv=null;function ZB(){return Zv||(Zv=Bt.fromMillis(1555555555555)),Zv}function XB(t,e){if(t.literal)return t;const i=Er.macroTokenToFormatOpts(t.val),s=kI(i,e);return s==null||s.includes(void 0)?t:s}function II(t,e){return Array.prototype.concat(...t.map(i=>XB(i,e)))}class PI{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=II(Er.parseFormat(i),e),this.units=this.tokens.map(s=>VB(s,e)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=JB(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(e){if(this.isValid){const[i,s]=YB(e,this.regex,this.handlers),[l,f,y]=s?KB(s):[null,null,void 0];if(Tp(s,"a")&&Tp(s,"H"))throw new _c("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:s,result:l,zone:f,specificOffset:y}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function OI(t,e,i){return new PI(t,i).explainFromTokens(e)}function QB(t,e,i){const{result:s,zone:l,specificOffset:f,invalidReason:y}=OI(t,e,i);return[s,l,f,y]}function kI(t,e){if(!t)return null;const s=Er.create(e,t).dtFormatter(ZB()),l=s.formatToParts(),f=s.resolvedOptions();return l.map(y=>WB(y,t,f))}const Xv="Invalid DateTime",m8=864e13;function e0(t){return new Dn("unsupported zone",`the zone "${t.name}" is not supported`)}function Qv(t){return t.weekData===null&&(t.weekData=cm(t.c)),t.weekData}function t3(t){return t.localWeekData===null&&(t.localWeekData=cm(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function au(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Bt({...i,...e,old:i})}function RI(t,e,i){let s=t-e*60*1e3;const l=i.offset(s);if(e===l)return[s,e];s-=(l-e)*60*1e3;const f=i.offset(s);return l===f?[s,l]:[t-Math.min(l,f)*60*1e3,Math.max(l,f)]}function q1(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Wy(t,e,i){return RI(I2(t),e,i)}function v8(t,e){const i=t.o,s=t.c.year+Math.trunc(e.years),l=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,f={...t.c,year:s,month:l,day:Math.min(t.c.day,pm(s,l))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},y=we.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),v=I2(f);let[b,S]=RI(v,i,t.zone);return y!==0&&(b+=y,S=t.zone.offset(b)),{ts:b,o:S}}function Uh(t,e,i,s,l,f){const{setZone:y,zone:v}=i;if(t&&Object.keys(t).length!==0||e){const b=e||v,S=Bt.fromObject(t,{...i,zone:b,specificOffset:f});return y?S:S.setZone(v)}else return Bt.invalid(new Dn("unparsable",`the input "${l}" can't be parsed as ${s}`))}function V1(t,e,i=!0){return t.isValid?Er.create(Oe.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function e3(t,e){const i=t.c.year>9999||t.c.year<0;let s="";return i&&t.c.year>=0&&(s+="+"),s+=ji(t.c.year,i?6:4),e?(s+="-",s+=ji(t.c.month),s+="-",s+=ji(t.c.day)):(s+=ji(t.c.month),s+=ji(t.c.day)),s}function w8(t,e,i,s,l,f){let y=ji(t.c.hour);return e?(y+=":",y+=ji(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(y+=":")):y+=ji(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(y+=ji(t.c.second),(t.c.millisecond!==0||!s)&&(y+=".",y+=ji(t.c.millisecond,3))),l&&(t.isOffsetFixed&&t.offset===0&&!f?y+="Z":t.o<0?(y+="-",y+=ji(Math.trunc(-t.o/60)),y+=":",y+=ji(Math.trunc(-t.o%60))):(y+="+",y+=ji(Math.trunc(t.o/60)),y+=":",y+=ji(Math.trunc(t.o%60)))),f&&(y+="["+t.zone.ianaName+"]"),y}const CI={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},tq={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},eq={ordinal:1,hour:0,minute:0,second:0,millisecond:0},NI=["year","month","day","hour","minute","second","millisecond"],iq=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],rq=["year","ordinal","hour","minute","second","millisecond"];function sq(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new CA(t);return e}function b8(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return sq(t)}}function nq(t){if(i0===void 0&&(i0=Si.now()),t.type!=="iana")return t.offset(i0);const e=t.name;let i=lb.get(e);return i===void 0&&(i=t.offset(i0),lb.set(e,i)),i}function _8(t,e){const i=wl(e.zone,Si.defaultZone);if(!i.isValid)return Bt.invalid(e0(i));const s=Oe.fromObject(e);let l,f;if(Kt(t.year))l=Si.now();else{for(const b of NI)Kt(t[b])&&(t[b]=CI[b]);const y=oI(t)||aI(t);if(y)return Bt.invalid(y);const v=nq(i);[l,f]=Wy(t,v,i)}return new Bt({ts:l,zone:i,loc:s,o:f})}function x8(t,e,i){const s=Kt(i.round)?!0:i.round,l=(y,v)=>(y=H_(y,s||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(y,v)),f=y=>i.calendary?e.hasSame(t,y)?0:e.startOf(y).diff(t.startOf(y),y).get(y):e.diff(t,y).get(y);if(i.unit)return l(f(i.unit),i.unit);for(const y of i.units){const v=f(y);if(Math.abs(v)>=1)return l(v,y)}return l(t>e?-0:0,i.units[i.units.length-1])}function S8(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let i0;const lb=new Map;class Bt{constructor(e){const i=e.zone||Si.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new Dn("invalid input"):null)||(i.isValid?null:e0(i));this.ts=Kt(e.ts)?Si.now():e.ts;let l=null,f=null;if(!s)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[l,f]=[e.old.c,e.old.o];else{const v=Cl(e.o)&&!e.old?e.o:i.offset(this.ts);l=q1(this.ts,v),s=Number.isNaN(l.year)?new Dn("invalid input"):null,l=s?null:l,f=s?null:v}this._zone=i,this.loc=e.loc||Oe.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=f,this.isLuxonDateTime=!0}static now(){return new Bt({})}static local(){const[e,i]=S8(arguments),[s,l,f,y,v,b,S]=i;return _8({year:s,month:l,day:f,hour:y,minute:v,second:b,millisecond:S},e)}static utc(){const[e,i]=S8(arguments),[s,l,f,y,v,b,S]=i;return e.zone=$r.utcInstance,_8({year:s,month:l,day:f,hour:y,minute:v,second:b,millisecond:S},e)}static fromJSDate(e,i={}){const s=NG(e)?e.valueOf():NaN;if(Number.isNaN(s))return Bt.invalid("invalid input");const l=wl(i.zone,Si.defaultZone);return l.isValid?new Bt({ts:s,zone:l,loc:Oe.fromObject(i)}):Bt.invalid(e0(l))}static fromMillis(e,i={}){if(Cl(e))return e<-m8||e>m8?Bt.invalid("Timestamp out of range"):new Bt({ts:e,zone:wl(i.zone,Si.defaultZone),loc:Oe.fromObject(i)});throw new xr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Cl(e))return new Bt({ts:e*1e3,zone:wl(i.zone,Si.defaultZone),loc:Oe.fromObject(i)});throw new xr("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const s=wl(i.zone,Si.defaultZone);if(!s.isValid)return Bt.invalid(e0(s));const l=Oe.fromObject(i),f=fm(e,b8),{minDaysInFirstWeek:y,startOfWeek:v}=a8(f,l),b=Si.now(),S=Kt(i.specificOffset)?s.offset(b):i.specificOffset,A=!Kt(f.ordinal),P=!Kt(f.year),k=!Kt(f.month)||!Kt(f.day),C=P||k,L=f.weekYear||f.weekNumber;if((C||A)&&L)throw new _c("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(k&&A)throw new _c("Can't mix ordinal dates with month/day");const F=L||f.weekday&&!C;let q,H,J=q1(b,S);F?(q=iq,H=tq,J=cm(J,y,v)):A?(q=rq,H=eq,J=Kv(J)):(q=NI,H=CI);let Q=!1;for(const pt of q){const ht=f[pt];Kt(ht)?Q?f[pt]=H[pt]:f[pt]=J[pt]:Q=!0}const tt=F?kG(f,y,v):A?RG(f):oI(f),et=tt||aI(f);if(et)return Bt.invalid(et);const nt=F?n8(f,y,v):A?o8(f):f,[vt,Tt]=Wy(nt,S,s),St=new Bt({ts:vt,zone:s,o:Tt,loc:l});return f.weekday&&C&&e.weekday!==St.weekday?Bt.invalid("mismatched weekday",`you can't specify both a weekday of ${f.weekday} and a date of ${St.toISO()}`):St.isValid?St:Bt.invalid(St.invalid)}static fromISO(e,i={}){const[s,l]=TB(e);return Uh(s,l,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[s,l]=MB(e);return Uh(s,l,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[s,l]=EB(e);return Uh(s,l,i,"HTTP",i)}static fromFormat(e,i,s={}){if(Kt(e)||Kt(i))throw new xr("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:f=null}=s,y=Oe.fromOpts({locale:l,numberingSystem:f,defaultToEN:!0}),[v,b,S,A]=QB(y,e,i);return A?Bt.invalid(A):Uh(v,b,s,`format ${i}`,e,S)}static fromString(e,i,s={}){return Bt.fromFormat(e,i,s)}static fromSQL(e,i={}){const[s,l]=RB(e);return Uh(s,l,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new xr("need to specify a reason the DateTime is invalid");const s=e instanceof Dn?e:new Dn(e,i);if(Si.throwOnInvalid)throw new oG(s);return new Bt({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const s=kI(e,Oe.fromObject(i));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(e,i={}){return II(Er.parseFormat(e),Oe.fromObject(i)).map(l=>l.val).join("")}static resetCache(){i0=void 0,lb.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Qv(this).weekYear:NaN}get weekNumber(){return this.isValid?Qv(this).weekNumber:NaN}get weekday(){return this.isValid?Qv(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?t3(this).weekday:NaN}get localWeekNumber(){return this.isValid?t3(this).weekNumber:NaN}get localWeekYear(){return this.isValid?t3(this).weekYear:NaN}get ordinal(){return this.isValid?Kv(this.c).ordinal:NaN}get monthShort(){return this.isValid?G1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?G1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?G1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?G1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,s=I2(this.c),l=this.zone.offset(s-e),f=this.zone.offset(s+e),y=this.zone.offset(s-l*i),v=this.zone.offset(s-f*i);if(y===v)return[this];const b=s-y*i,S=s-v*i,A=q1(b,y),P=q1(S,v);return A.hour===P.hour&&A.minute===P.minute&&A.second===P.second&&A.millisecond===P.millisecond?[au(this,{ts:b}),au(this,{ts:S})]:[this]}get isInLeapYear(){return c1(this.year)}get daysInMonth(){return pm(this.year,this.month)}get daysInYear(){return this.isValid?Lc(this.year):NaN}get weeksInWeekYear(){return this.isValid?Pd(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Pd(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:s,calendar:l}=Er.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:l}}toUTC(e=0,i={}){return this.setZone($r.instance(e),i)}toLocal(){return this.setZone(Si.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(e=wl(e,Si.defaultZone),e.equals(this.zone))return this;if(e.isValid){let l=this.ts;if(i||s){const f=e.offset(this.ts),y=this.toObject();[l]=Wy(y,f,e)}return au(this,{ts:l,zone:e})}else return Bt.invalid(e0(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:s}={}){const l=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:s});return au(this,{loc:l})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=fm(e,b8),{minDaysInFirstWeek:s,startOfWeek:l}=a8(i,this.loc),f=!Kt(i.weekYear)||!Kt(i.weekNumber)||!Kt(i.weekday),y=!Kt(i.ordinal),v=!Kt(i.year),b=!Kt(i.month)||!Kt(i.day),S=v||b,A=i.weekYear||i.weekNumber;if((S||y)&&A)throw new _c("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&y)throw new _c("Can't mix ordinal dates with month/day");let P;f?P=n8({...cm(this.c,s,l),...i},s,l):Kt(i.ordinal)?(P={...this.toObject(),...i},Kt(i.day)&&(P.day=Math.min(pm(P.year,P.month),P.day))):P=o8({...Kv(this.c),...i});const[k,C]=Wy(P,this.o,this.zone);return au(this,{ts:k,o:C})}plus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e);return au(this,v8(this,i))}minus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e).negate();return au(this,v8(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const s={},l=we.normalizeUnit(e);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(i){const f=this.loc.getStartOfWeek(),{weekday:y}=this;y<f&&(s.weekNumber=this.weekNumber-1),s.weekday=f}else s.weekday=1;if(l==="quarters"){const f=Math.ceil(this.month/3);s.month=(f-1)*3+1}return this.set(s)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Er.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):Xv}toLocaleString(e=hm,i={}){return this.isValid?Er.create(this.loc.clone(i),e).formatDateTime(this):Xv}toLocaleParts(e={}){return this.isValid?Er.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:f=!1}={}){if(!this.isValid)return null;const y=e==="extended";let v=e3(this,y);return v+="T",v+=w8(this,y,i,s,l,f),v}toISODate({format:e="extended"}={}){return this.isValid?e3(this,e==="extended"):null}toISOWeekDate(){return V1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:f=!1,format:y="extended"}={}){return this.isValid?(l?"T":"")+w8(this,y==="extended",i,e,s,f):null}toRFC2822(){return V1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return V1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?e3(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(i||e)&&(s&&(l+=" "),i?l+="z":e&&(l+="ZZ")),V1(this,l,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Xv}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",s={}){if(!this.isValid||!e.isValid)return we.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},f=LG(i).map(we.normalizeUnit),y=e.valueOf()>this.valueOf(),v=y?this:e,b=y?e:this,S=zB(v,b,f,l);return y?S.negate():S}diffNow(e="milliseconds",i={}){return this.diff(Bt.now(),e,i)}until(e){return this.isValid?xi.fromDateTimes(this,e):this}hasSame(e,i,s){if(!this.isValid)return!1;const l=e.valueOf(),f=this.setZone(e.zone,{keepLocalTime:!0});return f.startOf(i,s)<=l&&l<=f.endOf(i,s)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Bt.fromObject({},{zone:this.zone}),s=e.padding?this<i?-e.padding:e.padding:0;let l=["years","months","days","hours","minutes","seconds"],f=e.unit;return Array.isArray(e.unit)&&(l=e.unit,f=void 0),x8(i,this.plus(s),{...e,numeric:"always",units:l,unit:f})}toRelativeCalendar(e={}){return this.isValid?x8(e.base||Bt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Bt.isDateTime))throw new xr("min requires all arguments be DateTimes");return l8(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Bt.isDateTime))throw new xr("max requires all arguments be DateTimes");return l8(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,s={}){const{locale:l=null,numberingSystem:f=null}=s,y=Oe.fromOpts({locale:l,numberingSystem:f,defaultToEN:!0});return OI(y,e,i)}static fromStringExplain(e,i,s={}){return Bt.fromFormatExplain(e,i,s)}static buildFormatParser(e,i={}){const{locale:s=null,numberingSystem:l=null}=i,f=Oe.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new PI(f,e)}static fromFormatParser(e,i,s={}){if(Kt(e)||Kt(i))throw new xr("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:f=null}=s,y=Oe.fromOpts({locale:l,numberingSystem:f,defaultToEN:!0});if(!y.equals(i.locale))throw new xr(`fromFormatParser called with a locale of ${y}, but the format parser was created for ${i.locale}`);const{result:v,zone:b,specificOffset:S,invalidReason:A}=i.explainFromTokens(e);return A?Bt.invalid(A):Uh(v,b,s,`format ${i.format}`,e,S)}static get DATE_SHORT(){return hm}static get DATE_MED(){return NA}static get DATE_MED_WITH_WEEKDAY(){return uG}static get DATE_FULL(){return LA}static get DATE_HUGE(){return DA}static get TIME_SIMPLE(){return jA}static get TIME_WITH_SECONDS(){return FA}static get TIME_WITH_SHORT_OFFSET(){return zA}static get TIME_WITH_LONG_OFFSET(){return UA}static get TIME_24_SIMPLE(){return GA}static get TIME_24_WITH_SECONDS(){return BA}static get TIME_24_WITH_SHORT_OFFSET(){return qA}static get TIME_24_WITH_LONG_OFFSET(){return VA}static get DATETIME_SHORT(){return HA}static get DATETIME_SHORT_WITH_SECONDS(){return WA}static get DATETIME_MED(){return JA}static get DATETIME_MED_WITH_SECONDS(){return YA}static get DATETIME_MED_WITH_WEEKDAY(){return hG}static get DATETIME_FULL(){return KA}static get DATETIME_FULL_WITH_SECONDS(){return ZA}static get DATETIME_HUGE(){return XA}static get DATETIME_HUGE_WITH_SECONDS(){return QA}}function Sf(t){if(Bt.isDateTime(t))return t;if(t&&t.valueOf&&Cl(t.valueOf()))return Bt.fromJSDate(t);if(t&&typeof t=="object")return Bt.fromObject(t);throw new xr(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const oq="shortOffset";function aq(t){return"timeZoneIANA"in t}function lq(t){return t.startsWith("UTC")}function Wdt(t,e=!1){return{json:{read:{source:t,reader:(i,s)=>s[t]?uq(s[t]):null},write:!!e&&{allowNull:!0,writer(i,s){s[t]=i?hq(i):null}}}}}function uq(t,e=Eo){return t?aq(t)?t.timeZoneIANA:cq(t,e):e}function hq(t){return{timeZoneIANA:t}}function cq(t,e=Eo){if(!t||!J7.has(t.timeZone))return e;const i=J7.get(t.timeZone);return lq(t.timeZone)||t.respectsDaylightSaving?i:pq(i)}function pq(t){const e=Bt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${$r.instance(-i).formatOffset(0,"narrow")}`}function Jdt(t,e,i,s,l){if(e&&l==="date")return{timeZone:Id,timeZoneName:void 0};const f=s.timeStyle||s.hour,y=i===U_;return{timeZone:y?l==="timestamp-offset"?void 0:t??Id:i,timeZoneName:y&&f?oq:void 0}}function fq(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map((s=>s.toLowerCase())));return t===Eo||t===U_||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const dq={year:void 0,month:void 0,day:void 0,weekday:void 0},yq={hour:void 0,minute:void 0,second:void 0},LI={timeZone:Id},Qn={year:"numeric",month:"numeric",day:"numeric"},Tf={year:"numeric",month:"long",day:"numeric"},Mf={year:"numeric",month:"short",day:"numeric"},Ef={year:"numeric",month:"long",weekday:"long",day:"numeric"},fl={hour:"numeric",minute:"numeric"},vu={...fl,second:"numeric"},DI={hourCycle:"h23"},$f={...fl,...DI},Af={...vu,...DI},jI={"short-date":Qn,"short-date-short-time":{...Qn,...fl},"short-date-short-time-24":{...Qn,...$f},"short-date-long-time":{...Qn,...vu},"short-date-long-time-24":{...Qn,...Af},"short-date-le":Qn,"short-date-le-short-time":{...Qn,...fl},"short-date-le-short-time-24":{...Qn,...$f},"short-date-le-long-time":{...Qn,...vu},"short-date-le-long-time-24":{...Qn,...Af},"long-month-day-year":Tf,"long-month-day-year-short-time":{...Tf,...fl},"long-month-day-year-short-time-24":{...Tf,...$f},"long-month-day-year-long-time":{...Tf,...vu},"long-month-day-year-long-time-24":{...Tf,...Af},"day-short-month-year":Mf,"day-short-month-year-short-time":{...Mf,...fl},"day-short-month-year-short-time-24":{...Mf,...$f},"day-short-month-year-long-time":{...Mf,...vu},"day-short-month-year-long-time-24":{...Mf,...Af},"long-date":Ef,"long-date-short-time":{...Ef,...fl},"long-date-short-time-24":{...Ef,...$f},"long-date-long-time":{...Ef,...vu},"long-date-long-time-24":{...Ef,...Af},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":fl,"long-time":vu},gq=Hr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),FI={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},mq=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),vq=mq.find((({type:t})=>t==="month"))?.value.toLowerCase();function zI(){const t=on(),e=F_(t)?.language;return(e&&FI[e])??t}vq!=="mart"&&(FI.bs="sr-Latn-CS");let ub=new WeakMap;const k2=jI["short-date-short-time"];function wq(t){let e=ub.get(t);if(!e){const i=zI(),s=Z_(t.timeZone??Eo),l={...t,timeZone:s};e=new Intl.DateTimeFormat(i,l),ub.set(t,e)}return e}function Ydt(t){return jI[t]}function K_(t,e=k2){return wq(e).format(t)}function Kdt(t,e=k2){return K_(new Date(t),{...e,...LI,...yq})}function Zdt(t,e=k2){return K_(new Date(`1970-01-01T${t}Z`),{...e,...LI,...dq})}function Xdt(t,e=k2){if(e.timeZone)return K_(new Date(t),e);const i=Bt.fromISO(t,{setZone:!0}),s=i.offset===0?Id:e.timeZone,l={...e,timeZone:s};return i.toLocaleString(l,{locale:zI()})}function Z_(t){switch(t){case Eo:return nG;case U_:return Id;default:return t}}z_((()=>{ub=new WeakMap}));const bq={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let Jy=new WeakMap,UI={};function hb(t){const e=t||UI;if(!Jy.has(e)){const i=on(),s=F_(i)?.language,l=s&&bq[s]||i;Jy.set(e,new Intl.NumberFormat(l,t))}return Jy.get(e)}function Qdt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function t1t(t,e){return Object.is(t,-0)&&(t=0),hb(e).format(t)}function e1t(t,e=on()){if(!t)return null;let i=T8.get(e);if(!i){const s=hb().formatToParts(12345.6),l=[...hb({useGrouping:!1}).format(9876543210)].reverse(),f=new Map(l.map(((P,k)=>[P,k]))),y=new RegExp(`[${s.find((P=>P.type==="group"))?.value}]`,"g"),v=new RegExp(`[${s.find((P=>P.type==="decimal"))?.value}]`),b=new RegExp(`[${l.join("")}]`,"g"),S=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,A=/[-\u2212\u2013\u2014\u2015]/g;i=P=>{if((P=P.trim().replaceAll(y,"").replace(v,".").replace(b,(C=>String(f.get(C)))).replaceAll(S,"").replaceAll(A,"-"))==="")return null;const k=Number(P);return isNaN(k)?null:k},T8.set(e,i)}return i(t)}z_((()=>{Jy=new WeakMap,UI={}}));const T8=new Map;async function _q(t,e,i,s){const l=e.exec(i);if(!l)throw new ct("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const f=l[1]?`${l[1]}/`:"",y=l[2],v=kA(s),b=`${f}${y}.json`,S=v?`${f}${y}_${v}.json`:b;let A;try{A=await M8(t(S))}catch(P){if(S===b)throw new ct("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P});try{A=await M8(t(b))}catch(k){throw new ct("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:k})}}return A}async function M8(t){if(E8.fetchBundleAsset!=null)return E8.fetchBundleAsset(t);const e=await ii(t,{responseType:"text"});return JSON.parse(e.data)}let xq=class{constructor({base:e="",pattern:i,location:s=new URL(window.location.href)}){let l;l=typeof s=="string"?f=>new URL(f,new URL(s,window.location.href)).href:s instanceof URL?f=>new URL(f,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=l,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return _q(this.getAssetUrl,this.matcher,e,i)}};function Sq(t){return new xq(t)}const E8={};eG(Sq({pattern:"esri/",location:_i}));let Ho=class extends Ot{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:kA(e??on())??"global";return i=i==="no"?"nb":i,i}};_([E()],Ho.prototype,"apiKey",void 0),_([E()],Ho.prototype,"id",void 0),_([E()],Ho.prototype,"language",void 0),_([E()],Ho.prototype,"places",void 0),_([E()],Ho.prototype,"serviceUrl",void 0),_([E()],Ho.prototype,"worldview",void 0),Ho=_([Y("esri.support.BasemapStyle")],Ho);const Tq=Ho;function zt(t,e,i={}){return X_(t,e,i,GI)}function Rs(t,e,i={}){return X_(t,e,i,BI)}function X_(t,e,i={},s){let l=null;const f=i.once?(y,v)=>{s(y)&&(ri(l),e(y,v))}:(y,v)=>{s(y)&&e(y,v)};if(l=HF(t,f,i.sync,i.equals),i.initial){const y=t();f(y,y)}return l}function $a(t,e,i,s={}){let l=null,f=null,y=null;function v(){l&&f&&(f.remove(),s.onListenerRemove?.(l),l=null,f=null)}function b(A){s.once&&s.once&&ri(y),i(A)}const S=zt(t,((A,P)=>{v(),d2(A)&&(l=A,f=Hp(A,e,b),s.onListenerAdd?.(A))}),{sync:s.sync,initial:!0});return y=fe((()=>{S.remove(),v()})),y}function Od(t,e){return Mq(t,BI,e)}function Mq(t,e,i){if(Os(i))return Promise.reject(Be());const s=t();if(e?.(s))return Promise.resolve(s);let l=null;function f(){l=ri(l)}return new Promise(((y,v)=>{l=Ph([Vn(i,(()=>{f(),v(Be())})),X_(t,(b=>{f(),y(b)}),{sync:!1,once:!0},e??GI)])}))}function GI(t){return!0}function BI(t){return!!t}function s1t(t,e,i={}){let s=!1;const l=zt(t,((f,y)=>{s||e(f,y)}),i);return{remove(){l.remove()},pause(){s=!0},resume(){s=!1}}}const $o={sync:!0},Pr={initial:!0},zi={sync:!0,initial:!0},H1=new WeakMap;function qI(t){return!t.destroyed&&(H1.has(t)||t.addHandles([zt((()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||qI(e))}),(e=>H1.set(t,e)),zi),fe((()=>H1.delete(t)))]),H1.get(t))}function n1t(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function Eq(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function $q(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function Aq(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function Iq(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function $8(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Fu(t){return t?.type==="subtype-sublayer"}const o1t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function a1t(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Pq(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function R2(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function l1t(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}async function Oq(t,e){const i=xe?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const s=t.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const l=`${t.slice(0,s)}/rest/info`,f=e!=null?e.signal:null,{data:y}=await ii(l,{query:{f:"json"},responseType:"json",signal:f});return y?.owningSystemUrl||null}function kq(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Rq(t){return kq(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Cq(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Nq(t){return!!Cq(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Lq(t,e){return null}function u1t(t){return null}function Dq(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function h1t(t,e){!e||!Dq(t)||Lq(t.url)}const jq=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),VI=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Fq=new Set([...VI,"link-chart"]);function zq(t){switch(t.layerContainerType){case"basemap":return jq;case"operational-layers":return t.origin==="link-chart"?Fq:VI;default:return null}}function Uq(t,e){if(e.restrictedWebMapWriting){const i=zq(e);return i==null||i.has(t.type)&&!R2(t)}return!0}function Gq(t,e){if(e)if(R2(t)){const i=p2("featureCollection.layers",e),s=i?.[0]?.layerDefinition;s&&A8(t,s)}else t.type!=="group"&&A8(t,e)}function A8(t,e){"maxScale"in t&&(e.maxScale=sm(t.maxScale)??void 0),"minScale"in t&&(e.minScale=sm(t.minScale)??void 0)}function Bq(t,e){if(Gq(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=sm(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(R2(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function I8(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i?.messages&&i.messages.push(new ct("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(R2(t)&&!t.isTable)e=t.resourceInfo;else if(Uq(t,i)){const s={};return t.write(s,i)?s:null}return e!=null&&Bq(t,e=yt(e)),e}var r0;let qq=0,ms=r0=class extends It.JSONSupportMixin(tn){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+qq++,this.baseLayers=new kt,this.referenceLayers=new kt;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&At.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.addHandles([this.baseLayers.on("after-add",(s=>e(s.item))),this.referenceLayers.on("after-add",(s=>e(s.item))),this.baseLayers.on("after-remove",(s=>i(s.item))),this.referenceLayers.on("after-remove",(s=>i(s.item)))])}initialize(){this.when().catch((t=>{At.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=ze(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Ea(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const s=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((l=>{const f=I8(l,i.webmap?i.webmap.getLayerJSONFromResourceInfo(l):null,i);f!=null&&s.push(f)})),this.referenceLayers.forEach((l=>{const f=I8(l,i.webmap?i.webmap.getLayerJSONFromResourceInfo(l):null,i);f!=null&&(l.type!=="scene"&&(f.isReference=!0),s.push(f))}))),e.baseMapLayers=s}set referenceLayers(t){this._set("referenceLayers",Ea(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Z$(this,(t=>{t(this.baseLayers,this.referenceLayers)}))}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((e=>Fg(e)?e.clone():e)),referenceLayers:this.referenceLayers.map((e=>Fg(e)?e.clone():e))};return this.loaded&&(t.loadStatus="loaded"),new r0({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e?.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((i=>{const s=yt(i);return s.url&&qn(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&qn(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s}))),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:s}=this;Ce(t);const l=[];if(e){const f=e.context?e.context.url:null;if(l.push(this._loadLayersFromJSON(e.data,f,t)),e.data.id&&!e.data.title){const y=e.data.id;l.push(sG(y).then((v=>{v&&this.read({title:v},e.context)})))}}else i?l.push(this._loadFromItem(i,t)):s&&l.push(this._loadFromStylesService(s,t));await Promise.all(l)}async _loadLayersFromJSON(t,e,i){const s=this.resourceInfo?.context,l=this.portalItem?.portal||s?.portal||null,f=Hq[s?.origin||""]??"web-map",{populateOperationalLayers:y}=await mt(async()=>{const{populateOperationalLayers:b}=await import("./layersCreator-DMF8C1el.js");return{populateOperationalLayers:b}},__vite__mapDeps([19,20,21,22,23,1,2,3,24,4,25])),v=[];if(Ce(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const b={context:{...s,origin:f,url:e,portal:l,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},S=k=>f==="web-scene"&&k.layerType==="ArcGISSceneServiceLayer"||k.isReference,A=y(this.baseLayers,t.baseMapLayers.filter((k=>!S(k))),b);v.push(A);const P=y(this.referenceLayers,t.baseMapLayers.filter(S),b);v.push(P)}await Promise.allSettled(v)}async _loadFromItem(t,e){const i=await t.load(e),s=await i.fetchData("json",e),l=qr(t.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:Vq[t.type||""]??"web-map",portal:t.portal||wt.getDefault(),url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||wt.getDefault(),url:l}),this._loadLayersFromJSON(this.resourceInfo.data,l,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,s=`${i}/styles/${t.id}/self`,l=`${i}/webmaps/${t.id}`,f=t.apiKey??pe.apiKeys.basemapStyles,[y,v]=await Promise.all([(await ii(s,{query:{token:f},signal:e?.signal})).data,(await ii(l,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:f},signal:e?.signal})).data]);this.thumbnailUrl??=y.thumbnailUrl;const b=qr(l);if(this._set("resourceInfo",{data:v.baseMap??{},context:{origin:"web-map",url:b}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:v.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,b,e),f)for(const S of[...this.baseLayers,...this.referenceLayers])"apiKey"in S&&(S.apiKey=f)}static fromId(t){const e=Zw[t];return e?e.itemId?new r0({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):r0.fromJSON(e,e.is3d?{origin:"web-scene",portal:new wt({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};_([E({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,s){this._writeBaseLayers(t,e,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:kt}},writer(t,e,i,s){this._writeBaseLayers(t,e,s)}}}}}})],ms.prototype,"baseLayers",null),_([E({type:String,json:{origins:{"web-scene":{write:!0}}}})],ms.prototype,"id",void 0),_([E({type:Ht})],ms.prototype,"portalItem",void 0),_([E()],ms.prototype,"referenceLayers",null),_([E({readOnly:!0})],ms.prototype,"resourceInfo",void 0),_([E({type:Et})],ms.prototype,"spatialReference",void 0),_([E({type:Tq})],ms.prototype,"style",void 0),_([E()],ms.prototype,"thumbnailUrl",void 0),_([E({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ms.prototype,"title",void 0),_([Xt("title")],ms.prototype,"writeTitle",null),ms=r0=_([Y("esri.Basemap")],ms);const Vq={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Hq={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Q0=ms,Wq=Object.freeze(Object.defineProperty({__proto__:null,default:Q0},Symbol.toStringTag,{value:"Module"})),dm={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function HI(t){return!!dm[t]||!!dm[t.toLowerCase()]}function Q_(t){return dm[t]??dm[t.toLowerCase()]}function Jq(t){return[...Q_(t)]}function i3(t,e,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?t+(e-t)*s:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function WI(t,e,i,s=1){const l=(t%360+360)%360/360,f=i<=.5?i*(e+1):i+e-i*e,y=2*i-f;return[Math.round(255*i3(y,f,l+1/3)),Math.round(255*i3(y,f,l)),Math.round(255*i3(y,f,l-1/3)),s]}function Yq(t){const e=t.length>5,i=e?8:4,s=(1<<i)-1,l=e?1:17,f=e?t.length===9:t.length===5;let y=+("0x"+t.slice(1));if(isNaN(y))return null;const v=[0,0,0,1];let b;return f&&(b=y&s,y>>=i,v[3]=l*b/255),b=y&s,y>>=i,v[2]=l*b,b=y&s,y>>=i,v[1]=l*b,b=y&s,y>>=i,v[0]=l*b,v}function JI(t){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),s=parseInt(t.slice(3,4),16),l=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,s+16*s,(l+16*l)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function YI(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),s=e[1];if(s==="rgb"&&i.length===3||s==="rgba"&&i.length===4){const l=i[0];if(l.charAt(l.length-1)==="%"){const f=i.map((y=>2.56*parseFloat(y)));return i.length===4&&(f[3]=parseFloat(i[3])),P8(f)}return P8(i.map((f=>parseFloat(f))))}if(s==="hsl"&&i.length===3||s==="hsla"&&i.length===4)return WI(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function P8(t){return t[0]=jc(t[0]),t[1]=jc(t[1]),t[2]=jc(t[2]),t[3]=t.length===4?ZI(t[3]):1,t}function KI(t){let e=HI(t)?Q_(t):null;return e??=YI(t),e??=JI(t),e}function c1t(t){const e=KI(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function ZI(t){return XI(t,0,1)}function jc(t){return Math.round(XI(t,0,255))}function XI(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const p1t=2.2,O8=new Float32Array(1);function f1t(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Rr(t,e,i){return Math.min(Math.max(t,e),i)}function d1t(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function s0(t,e,i){return t+(e-t)*i}function y1t(t,e,i,s,l){return s0(s,l,(t-e)/(i-e))}function d1(t){return t*Math.PI/180}function QI(t){return 180*t/Math.PI}function g1t(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function t4(t){return Math.acos(Rr(t,-1,1))}function e4(t){return Math.asin(Rr(t,-1,1))}function eh(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function m1t(t,e,i=1e-6){return!eh(t,e,i)&&t>e}function v1t(t,e,i=1e-6){return!eh(t,e,i)&&t<e}function w1t(t,e,i=1e-6){return eh(t,e,i)||t>e}const ym=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function cb(t){return ym.setFloat64(0,t),ym.getBigInt64(0)}function Kq(t){return ym.setBigInt64(0,t),ym.getFloat64(0)}const Yy=BigInt("1000000"),Zq=tP(1);function tP(t){const e=cb(t=Math.abs(t)),i=Kq(e<=Yy?Yy:e-Yy);return Math.abs(t-i)}function b1t(t,e,i=Zq){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&tP(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const s=cb(t),l=cb(e);return s<0!=l<0?!1:!((s<l?l-s:s-l)>Yy)}function _1t(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const s=Math.abs(t-e),l=Math.abs(t),f=Math.abs(e);if(t===0||e===0||l<1e-12&&f<1e-12){if(s>.01*i)return!1}else if(s/(l+f)>i)return!1;return!0}function x1t(t){return eP(Math.max(-k8,Math.min(t,k8)))}function eP(t){return O8[0]=t,O8[0]}function S1t(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],s=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(eh(e,1)&&eh(i,1)&&eh(s,1))}const k8=eP(34028234663852886e22);function T1t(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let s=e.toString().split("e");return s=(e=Math[t](+(s[0]+"e"+(s[1]?+s[1]-i:-i)))).toString().split("e"),+(s[0]+"e"+(s[1]?+s[1]+i:i))}function W1(t){return Rr(T_(t),0,255)}function J1(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let Ky=class Jr{static blendColors(e,i,s,l=new Jr){return l.r=Math.round(e.r+(i.r-e.r)*s),l.g=Math.round(e.g+(i.g-e.g)*s),l.b=Math.round(e.b+(i.b-e.b)*s),l.a=e.a+(i.a-e.a)*s,l._sanitize()}static fromRgb(e,i){const s=YI(e);return s?Jr.fromArray(s,i):null}static fromHex(e,i=new Jr){const s=JI(e);return s?Jr.fromArray(s,i):null}static fromArray(e,i=new Jr){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const s=KI(e);return s?Jr.fromArray(s,i):null}static fromJSON(e){return e!=null?new Jr([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Jr.fromString(e,this):Array.isArray(e)?Jr.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Jr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=e?.capitalize??!1,s=e?.digits??6,l=s===3||s===4,f=s===4||s===8,y=`#${J1(this.r,l)}${J1(this.g,l)}${J1(this.b,l)}${f?J1(Math.round(255*this.a),l):""}`;return i?y.toUpperCase():y}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Jr.AlphaMode.ALWAYS){const i=W1(this.r),s=W1(this.g),l=W1(this.b);return e===Jr.AlphaMode.ALWAYS||this.a!==1?[i,s,l,W1(255*this.a)]:[i,s,l]}clone(){return new Jr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=jc(this.r),this.g=jc(this.g),this.b=jc(this.b),this.a=ZI(this.a),this}_set(e,i,s,l){this.r=e,this.g=i,this.b=s,this.a=l}};Ky.prototype.declaredClass="esri.Color",(function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(Ky||(Ky={}));const ie=Ky;function Wt(t,e={}){const i=t instanceof Bi?t:new Bi(t,e),{alwaysWriteDefaults:s,default:l,ignoreUnknown:f=!0,name:y,nonNullable:v,readOnly:b=!1}=e;return E({type:f?i.apiValues:String,json:{type:i.jsonValues,default:l,name:y,read:!b&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:s}},nonNullable:v,readOnly:b})}var pb;let Zy=pb=class extends It{constructor(t){super(t),this.type="none"}clone(){return new pb({type:this.type})}};_([Wt({none:"none",stayAbove:"stay-above"}),E({json:{write:{isRequired:!0}}})],Zy.prototype,"type",void 0),Zy=pb=_([Y("esri.ground.NavigationConstraint")],Zy);const Xq=Symbol("GroundInstance");function iP(t){const e=T_(100*(1-t));return Math.max(0,Math.min(e,100))}function gm(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var R8,fb,eE;let Wo=fb=(eE=class extends It.JSONSupportMixin(tn){constructor(t){super(t),this[R8]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new kt;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&At.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.addHandles([this.layers.on("after-add",(s=>e(s.item))),this.layers.on("after-remove",(s=>i(s.item)))])}initialize(){this.when().catch((t=>{kr(t)||At.getLogger(this).error("#load()","Failed to load ground",t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)ze(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",Ea(t,this._get("layers")))}writeLayers(t,e,i,s){const l=[];t&&(s={...s,layerContainerType:"ground"},t.forEach((f=>{if("write"in f){const y={};mD(f)().write(y,s)&&l.push(y)}else s?.messages&&s.messages.push(new ct("layer:unsupported",`Layers (${f.title}, ${f.id}) of type '${f.declaredClass}' cannot be persisted in the ground`,{layer:f}))}))),e.layers=l}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Z$(this,(t=>{t(this.layers)}))}async queryElevation(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await mt(()=>import("./ElevationQuery-CKb37WwZ.js"),__vite__mapDeps([26,1,2,3,4]));Ce(e);const s=new i,l=this.layers.filter(C8).toArray();return s.queryAll(l,t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await mt(()=>import("./ElevationQuery-CKb37WwZ.js"),__vite__mapDeps([26,1,2,3,4]));Ce(e);const s=new i,l=this.layers.filter(C8).toArray();return s.createSamplerAll(l,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:yt(this.surfaceColor),navigationConstraint:yt(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new fb({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const s=e?.origin||"web-scene",l=e?.portal||null,f=e?.url||null,{populateOperationalLayers:y}=await mt(async()=>{const{populateOperationalLayers:b}=await import("./layersCreator-DMF8C1el.js");return{populateOperationalLayers:b}},__vite__mapDeps([19,20,21,22,23,1,2,3,24,4,25]));Ce(i);const v=[];if(t.layers&&Array.isArray(t.layers)){const b={context:{origin:s,url:f,portal:l,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};v.push(y(this.layers,t.layers,b))}await Promise.allSettled(v)}},R8=Xq,eE);function Qq(t){return t&&"createElevationSampler"in t}function C8(t){return t.type==="elevation"||Qq(t)}_([E({json:{read:!1,write:{isRequired:!0}}})],Wo.prototype,"layers",null),_([Xt("layers")],Wo.prototype,"writeLayers",null),_([E({readOnly:!0})],Wo.prototype,"resourceInfo",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Re,read:{reader:gm,source:"transparency"},write:{writer:(t,e)=>{e.transparency=iP(t)},target:"transparency"}}})],Wo.prototype,"opacity",void 0),_([E({type:ie,json:{type:[Re],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Wo.prototype,"surfaceColor",void 0),_([E({type:Zy,json:{write:!0}})],Wo.prototype,"navigationConstraint",void 0),Wo=fb=_([Y("esri.Ground")],Wo);const mm=Wo;let mo=class extends kt{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(x$((()=>this._refresh()),$o))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const s of e)s!=null&&(i=this._processCollection(i,s));this.splice(i)}_createNewInstance(e){return new kt(e)}_processCollection(e,i){if(!i)return e;const s=this.itemFilterFunction??(l=>!!l);for(const l of i)if(l){if(s(l)){const f=this.indexOf(l,e);f>=0?f!==e&&this.reorder(l,e):this.add(l,e),++e}if(this.getChildrenFunction){const f=this.getChildrenFunction(l);if(Array.isArray(f))for(const y of f)e=this._processCollection(e,y);else e=this._processCollection(e,f)}}return e}};_([E()],mo.prototype,"getCollections",void 0),_([E()],mo.prototype,"getChildrenFunction",void 0),_([E()],mo.prototype,"itemFilterFunction",void 0),mo=_([Y("esri.core.CollectionFlattener")],mo);const rP=t=>{let e=class extends t{clone(){const i=cs(this);FE(i,"unable to clone instance of non-accessor class");const s=i.metadata,l=i.store,f={},y=new Map;for(const b in s){const S=s[b],A=l?.originOf(b),P=S.clonable;if(S.readOnly||P===!1||A!==se.USER&&A!==se.DEFAULTS&&A!==se.WEB_MAP&&A!==se.WEB_SCENE)continue;const k=this[b];let C=null;C=typeof P=="function"?P(k):P==="reference"?k:hw(k),k!=null&&C==null||(A===se.DEFAULTS?y.set(b,C):f[b]=C)}const v=new(Object.getPrototypeOf(this)).constructor(f);if(y.size){const b=cs(v)?.store;if(b)for(const[S,A]of y)b.set(S,A,se.DEFAULTS)}return v}};return e=_([Y("esri.core.Clonable")],e),e};let n0=class extends rP(Ot){};n0=_([Y("esri.core.Clonable")],n0),(function(t){t.ClonableMixin=rP})(n0||(n0={}));const Ei=n0,tV="randomUUID"in crypto;function y1(){if(tV)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function $1t(){return`{${y1().toUpperCase()}}`}function A1t(){return`{${y1()}}`}function I1t(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const Gh={Base64:0,Hex:1,String:2,Raw:3},Fc=8,sP=(1<<Fc)-1;function Ml(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function eV(t){const e=[];for(let i=0,s=t.length*Fc;i<s;i+=Fc)e[i>>5]|=(t.charCodeAt(i/Fc)&sP)<<i%32;return e}function iV(t){const e=[];for(let i=0,s=32*t.length;i<s;i+=Fc)e.push(String.fromCharCode(t[i>>5]>>>i%32&sP));return e.join("")}function rV(t){const e="0123456789abcdef",i=[];for(let s=0,l=4*t.length;s<l;s++)i.push(e.charAt(t[s>>2]>>s%4*8+4&15)+e.charAt(t[s>>2]>>s%4*8&15));return i.join("")}function sV(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];for(let l=0,f=4*t.length;l<f;l+=3){const y=(t[l>>2]>>l%4*8&255)<<16|(t[l+1>>2]>>(l+1)%4*8&255)<<8|t[l+2>>2]>>(l+2)%4*8&255;for(let v=0;v<4;v++)8*l+6*v>32*t.length?s.push("="):s.push(i.charAt(y>>6*(3-v)&63))}return s.join("")}function nV(t,e){return t<<e|t>>>32-e}function C2(t,e,i,s,l,f){return Ml(nV(Ml(Ml(e,t),Ml(s,f)),l),i)}function dr(t,e,i,s,l,f,y){return C2(e&i|~e&s,t,e,l,f,y)}function yr(t,e,i,s,l,f,y){return C2(e&s|i&~s,t,e,l,f,y)}function gr(t,e,i,s,l,f,y){return C2(e^i^s,t,e,l,f,y)}function mr(t,e,i,s,l,f,y){return C2(i^(e|~s),t,e,l,f,y)}function oV(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,s=-271733879,l=-1732584194,f=271733878;for(let y=0;y<t.length;y+=16){const v=i,b=s,S=l,A=f;i=dr(i,s,l,f,t[y],7,-680876936),f=dr(f,i,s,l,t[y+1],12,-389564586),l=dr(l,f,i,s,t[y+2],17,606105819),s=dr(s,l,f,i,t[y+3],22,-1044525330),i=dr(i,s,l,f,t[y+4],7,-176418897),f=dr(f,i,s,l,t[y+5],12,1200080426),l=dr(l,f,i,s,t[y+6],17,-1473231341),s=dr(s,l,f,i,t[y+7],22,-45705983),i=dr(i,s,l,f,t[y+8],7,1770035416),f=dr(f,i,s,l,t[y+9],12,-1958414417),l=dr(l,f,i,s,t[y+10],17,-42063),s=dr(s,l,f,i,t[y+11],22,-1990404162),i=dr(i,s,l,f,t[y+12],7,1804603682),f=dr(f,i,s,l,t[y+13],12,-40341101),l=dr(l,f,i,s,t[y+14],17,-1502002290),s=dr(s,l,f,i,t[y+15],22,1236535329),i=yr(i,s,l,f,t[y+1],5,-165796510),f=yr(f,i,s,l,t[y+6],9,-1069501632),l=yr(l,f,i,s,t[y+11],14,643717713),s=yr(s,l,f,i,t[y],20,-373897302),i=yr(i,s,l,f,t[y+5],5,-701558691),f=yr(f,i,s,l,t[y+10],9,38016083),l=yr(l,f,i,s,t[y+15],14,-660478335),s=yr(s,l,f,i,t[y+4],20,-405537848),i=yr(i,s,l,f,t[y+9],5,568446438),f=yr(f,i,s,l,t[y+14],9,-1019803690),l=yr(l,f,i,s,t[y+3],14,-187363961),s=yr(s,l,f,i,t[y+8],20,1163531501),i=yr(i,s,l,f,t[y+13],5,-1444681467),f=yr(f,i,s,l,t[y+2],9,-51403784),l=yr(l,f,i,s,t[y+7],14,1735328473),s=yr(s,l,f,i,t[y+12],20,-1926607734),i=gr(i,s,l,f,t[y+5],4,-378558),f=gr(f,i,s,l,t[y+8],11,-2022574463),l=gr(l,f,i,s,t[y+11],16,1839030562),s=gr(s,l,f,i,t[y+14],23,-35309556),i=gr(i,s,l,f,t[y+1],4,-1530992060),f=gr(f,i,s,l,t[y+4],11,1272893353),l=gr(l,f,i,s,t[y+7],16,-155497632),s=gr(s,l,f,i,t[y+10],23,-1094730640),i=gr(i,s,l,f,t[y+13],4,681279174),f=gr(f,i,s,l,t[y],11,-358537222),l=gr(l,f,i,s,t[y+3],16,-722521979),s=gr(s,l,f,i,t[y+6],23,76029189),i=gr(i,s,l,f,t[y+9],4,-640364487),f=gr(f,i,s,l,t[y+12],11,-421815835),l=gr(l,f,i,s,t[y+15],16,530742520),s=gr(s,l,f,i,t[y+2],23,-995338651),i=mr(i,s,l,f,t[y],6,-198630844),f=mr(f,i,s,l,t[y+7],10,1126891415),l=mr(l,f,i,s,t[y+14],15,-1416354905),s=mr(s,l,f,i,t[y+5],21,-57434055),i=mr(i,s,l,f,t[y+12],6,1700485571),f=mr(f,i,s,l,t[y+3],10,-1894986606),l=mr(l,f,i,s,t[y+10],15,-1051523),s=mr(s,l,f,i,t[y+1],21,-2054922799),i=mr(i,s,l,f,t[y+8],6,1873313359),f=mr(f,i,s,l,t[y+15],10,-30611744),l=mr(l,f,i,s,t[y+6],15,-1560198380),s=mr(s,l,f,i,t[y+13],21,1309151649),i=mr(i,s,l,f,t[y+4],6,-145523070),f=mr(f,i,s,l,t[y+11],10,-1120210379),l=mr(l,f,i,s,t[y+2],15,718787259),s=mr(s,l,f,i,t[y+9],21,-343485551),i=Ml(i,v),s=Ml(s,b),l=Ml(l,S),f=Ml(f,A)}return[i,s,l,f]}function aV(t,e=Gh.Hex){const i=e||Gh.Base64,s=oV(eV(t),t.length*Fc);switch(i){case Gh.Raw:return s;case Gh.Hex:return rV(s);case Gh.String:return iV(s);case Gh.Base64:return sV(s)}}function lV(t){return t&&"getAtOrigin"in t&&"originOf"in t}function db(t){return i4[uV(t)]||cV}function uV(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:hV(t.url)}function hV(t){const e=kE(t);return yb[e]||nP}const i4={},nP="text/plain",cV=i4[nP],yb={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in yb)i4[yb[t]]=t;function pV(t){const e=t?.origins??[void 0];return(i,s)=>{const l=fV(t,i,s);for(const f of e){const y=M_(i,f,s);for(const v in l)y[v]=l[v]}}}function fV(t,e,i){if(t?.type==="resource")return dV(t,e,i);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:s,write:l}=_j;return{read:s,write:l}}}}function dV(t,e,i){const s=o1(e,i);return{type:String,read:(l,f,y)=>{const v=y2(l,f,y);return s.type===String?v:typeof s.type=="function"?new s.type({url:v}):void 0},write:{isRequired:s.json?.write?.isRequired,writer(l,f,y,v){if(!v?.resources)return typeof l=="string"?void(f[y]=yp(l,v)):void(f[y]=l.write({},v));const b=mV(l),S=yp(b,{...v,verifyItemRelativeUrls:v?.verifyItemRelativeUrls?{writtenUrls:v.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},gp.NO),A=s.type!==String&&(!lV(this)||v?.origin&&this.originIdOf(i)>wa(v.origin)),P={object:this,propertyName:i,value:l,targetUrl:S,dest:f,targetPropertyName:y,context:v,params:t};v?.portalItem&&S&&!hs(S)?A&&t?.contentAddressed?gb(P):A?yV(P):gV(P):v?.portalItem&&(S==null||BE(S)!=null||qp(S)||A)?gb(P):f[y]=S}}}}function gb(t){const{targetUrl:e,params:i,value:s,context:l,dest:f,targetPropertyName:y}=t;if(!l.portalItem)return;const v=qE(e),b=aP(s,e,l);if(i?.contentAddressed&&b.type!=="json")return void l.messages?.push(new ct("persistable:contentAddressingUnsupported",`Property "${y}" is trying to serializing a resource with content of type ${b.type} with content addressing. Content addressing is only supported for json resources.`,{content:b}));const S=i?.contentAddressed&&b.type==="json"?aV(b.jsonString):v?.filename??y1(),A=t1(i?.prefix??v?.prefix,S),P=`${A}.${db(b)}`;if(i?.contentAddressed&&l.resources&&b.type==="json"){const L=l.resources.toKeep.find((({resource:F})=>F.path===P))??l.resources.toAdd.find((({resource:F})=>F.path===P));if(L)return void(f[y]=L.resource.itemRelativeUrl)}const k=l.portalItem.resourceFromPath(P);qp(e)&&l.resources&&l.resources.pendingOperations.push(ZD(e).then((L=>{k.path=`${A}.${db({type:"blob",blob:L})}`,f[y]=k.itemRelativeUrl})).catch((()=>{})));const C=i?.compress??!1;l.resources&&oP({...t,resource:k,content:b,compress:C,updates:l.resources.toAdd}),f[y]=k.itemRelativeUrl}function yV(t){const{context:e,targetUrl:i,params:s,value:l,dest:f,targetPropertyName:y}=t;if(!e.portalItem)return;const v=e.portalItem.resourceFromPath(i),b=aP(l,i,e),S=db(b),A=kE(v.path),P=s?.compress??!1;S===A?(e.resources&&oP({...t,resource:v,content:b,compress:P,updates:e.resources.toUpdate}),f[y]=i):gb(t)}function gV({context:t,targetUrl:e,dest:i,targetPropertyName:s}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[s]=e)}function oP({object:t,propertyName:e,updates:i,resource:s,content:l,compress:f}){const y=v=>{vV(t,e,v)};i.push({resource:s,content:l,compress:f,finish:y})}function aP(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function mV(t){return t==null?null:typeof t=="string"?t:t.url}function vV(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let Xy=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.color=null}};_([E({type:ie,json:{type:[Re],write:!0}})],Xy.prototype,"color",void 0),Xy=_([Y("esri.effects.FocusAreaOutline")],Xy);const wV=Xy;function O1t(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function bV(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var Nl;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(Nl||(Nl={}));function N8(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const s=t.clone().normalize();if(!s)return null;let l=!1,f=!1;return s.forEach((y=>{y.hasZ&&(l=!0),y.hasM&&(f=!0)})),s.map((y=>{const v=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(l&&y.hasZ){const b=.5*(y.zmax-y.zmin);for(let S=0;S<v.length;S++)v[S].push(b)}if(f&&y.hasM){const b=.5*(y.mmax-y.mmin);for(let S=0;S<v.length;S++)v[S].push(b)}return v}))}return null}function N2(t,e){const i=e[0]-t[0],s=e[1]-t[1];if(t.length>2&&e.length>2){const l=t[2]-e[2];return Math.sqrt(i*i+s*s+l*l)}return Math.sqrt(i*i+s*s)}function lP(t,e,i){const s=t[0]+i*(e[0]-t[0]),l=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[s,l,t[2]+i*(e[2]-t[2])]:[s,l]}function _V(t,e,i,s){return xV(t,e,i[s],i[s+1])}function xV(t,e,i,s){const[l,f]=e,[y,v]=i,[b,S]=s,A=b-y,P=S-v,k=A*A+P*P,C=(l-y)*A+(f-v)*P,L=Math.min(1,Math.max(0,C/k));return t[0]=y+A*L,t[1]=v+P*L,t}function k1t(t,e,i,s,l,f){let y=i,v=s,b=l-y,S=f-v;if(b!==0||S!==0){const A=((t-y)*b+(e-v)*S)/(b*b+S*S);A>1?(y=l,v=f):A>0&&(y+=b*A,v+=S*A)}return b=t-y,S=e-v,b*b+S*S}function uP(t,e){return lP(t,e,.5)}function R1t(t){const e=t.length;let i=0;for(let s=0;s<e-1;++s)i+=N2(t[s],t[s+1]);return i}function C1t(t,e){if(e<=0)return t[0];const i=t.length;let s=0;for(let l=0;l<i-1;++l){const f=N2(t[l],t[l+1]);if(e-s<f){const y=(e-s)/f;return lP(t[l],t[l+1],y)}s+=f}return t[i-1]}function hP(t,e=Nl.X,i=Nl.Y){let s=0;const l=t.length;let f=t[0];for(let y=1;y<l;y++){const v=t[y];s+=(v[e]-f[e])*(v[i]+f[i]),f=v}if(cP(t)){const y=t[0];s+=(y[e]-f[e])*(y[i]+f[i])}return s>=0}function cP(t){const e=t.length;return e>0&&!Qd(t[0],t[e-1])}function N1t(t){"rings"in t&&(SV(t),TV(t))}function SV(t){if("rings"in t)for(const e of t.rings)cP(e)&&e.push(e[0].slice())}function TV(t){if(!("rings"in t)||t.rings.length===0||hP(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function L1t(t){return t.type!=="polygon"&&t.type!=="polyline"||MV(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function MV(t,e){const i=Br(e);if(!i)return;const s=i.valid[0],l=i.valid[1],f=l-s;for(const y of t){let v=1/0,b=-1/0;for(const A of y){const P=EV(A[0],s,l);v=Math.min(v,P),b=Math.max(b,P),A[0]=P}const S=b-v;f-S<S&&y.forEach((A=>{A[0]<0&&(A[0]+=f)}))}}function EV(t,e,i){const s=i-e;return t<e?i-(e-t)%s:t>i?e+(t-e)%s:t}function D1t(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,s]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===s.length&&i.every(((l,f)=>l.length===s[f].length))}function j1t(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function $V(t){return t?AV(t.rings,t.hasZ??!1):null}function AV(t,e){if(!t?.length)return null;const i=[],s=[],l=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let f=0,y=t.length;f<y;f++){const v=pP(t[f],e,l);v&&s.push(v)}if(s.sort(((f,y)=>{let v=f[2]-y[2];return v===0&&e&&(v=f[4]-y[4]),v})),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<l[0]||i[0]>l[1]||i[1]<l[2]||i[1]>l[3]||e&&(i[2]<l[4]||i[2]>l[5]))&&(i.length=0)),!i.length){const f=t[0]&&t[0].length?IV(t[0],e):null;if(!f)return null;i[0]=f[0],i[1]=f[1],e&&f.length>2&&(i[2]=f[2])}return i}function pP(t,e,i){let s=0,l=0,f=0,y=0,v=0;const b=t.length?t[0][0]:0,S=t.length?t[0][1]:0,A=t.length&&e?t[0][2]:0;for(let k=0;k<t.length;k++){const C=t[k],L=t[(k+1)%t.length],[F,q,H]=C,J=F-b,Q=q-S,[tt,et,nt]=L,vt=tt-b,Tt=et-S,St=J*Tt-vt*Q;if(y+=St,s+=(J+vt)*St,l+=(Q+Tt)*St,e&&C.length>2&&L.length>2){const pt=H-A,ht=nt-A,_t=J*ht-vt*pt;f+=(pt+ht)*_t,v+=_t}F<i[0]&&(i[0]=F),F>i[1]&&(i[1]=F),q<i[2]&&(i[2]=q),q>i[3]&&(i[3]=q),e&&(H<i[4]&&(i[4]=H),H>i[5]&&(i[5]=H))}if(y>0&&(y*=-1),v>0&&(v*=-1),!y)return null;y*=.5,v*=.5;const P=[s/(6*y)+b,l/(6*y)+S,y];return e&&(i[4]===i[5]||v===0?(P[3]=(i[4]+i[5])/2,P[4]=0):(P[3]=f/(6*v)+A,P[4]=v)),P}function F1t(t,e){let i=0,s=0,l=0;t.nextPoint();const f=t.pathSize?t.x:0,y=t.pathSize?t.y:0;for(let v=0;v<t.pathSize;v++){t.seekInPath(v);const b=[t.x,t.y];t.seekInPath((v+1)%t.pathSize);const S=[t.x,t.y],[A,P]=b,k=A-f,C=P-y,[L,F]=S,q=L-f,H=F-y,J=k*H-q*C;l+=J,i+=(k+q)*J,s+=(C+H)*J,A<e[0]&&(e[0]=A),A>e[1]&&(e[1]=A),P<e[2]&&(e[2]=P),P>e[3]&&(e[3]=P)}return l>0&&(l*=-1),l?(l*=.5,[i/(6*l)+f,s/(6*l)+y,l]):null}function IV(t,e){const i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let l=0,f=0,y=0,v=0;for(let b=0,S=t.length;b<S-1;b++){const A=t[b],P=t[b+1];if(A&&P){i[0]=A[0],i[1]=A[1],s[0]=P[0],s[1]=P[1],e&&A.length>2&&P.length>2&&(i[2]=A[2],s[2]=P[2]);const k=N2(i,s);if(k){l+=k;const C=uP(A,P);f+=k*C[0],y+=k*C[1],e&&C.length>2&&(v+=k*C[2])}}}return l>0?e?[f/l,y/l,v/l]:[f/l,y/l]:t.length?t[0]:null}function PV(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const s=[],l=[],f=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const y=pP(bV(t),t.hasZ,f);y&&l.push(y)}if(l.sort(((y,v)=>{let b=y[2]-v[2];return b===0&&e&&(b=y[4]-v[4]),b})),l.length&&(s[0]=l[0][0],s[1]=l[0][1],e&&(s[2]=l[0][3]),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||e&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)),!s.length){t.reset(),t.nextPath();const y=t.pathSize?OV(t):null;if(!y)return null;s[0]=y[0],s[1]=y[1],e&&y.length>2&&(s[2]=y[2])}return s}function OV(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let l=0,f=0,y=0,v=0;if(t.nextPoint()){let b=t.x,S=t.y,A=t.z;for(;t.nextPoint();){const P=t.x,k=t.y,C=t.z;i[0]=b,i[1]=S,s[0]=P,s[1]=k,e&&(i[2]=A,s[2]=C);const L=N2(i,s);if(L){l+=L;const F=uP(i,s);f+=L*F[0],y+=L*F[1],e&&F.length>2&&(v+=L*F[2])}b=P,S=k,A=C}}return l>0?e?[f/l,y/l,v/l]:[f/l,y/l]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const kV=1e-6;function z1t(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<kV){const l=PV(t);return l?[l[0],l[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const s=[t.x,t.y];for(t.reset();t.nextPath();)CV(i,s,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=s[0],i[1]+=s[1],i}const RV=1/3;function CV(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const s=i.x,l=i.y;i.nextPoint();let f,y=i.x-s,v=i.y-l,b=0,S=0;for(;i.nextPoint();)b=i.x-s,S=i.y-l,f=.5*RV*(b*v-S*y),t[0]+=f*(y+b),t[1]+=f*(v+S),y=b,v=S;const A=i.getCurrentRingArea(),P=[s,l];return P[0]-=e[0],P[1]-=e[1],P[0]*=A,P[1]*=A,t[0]+=P[0],t[1]+=P[1],t}function Gr(t=jV){return[t[0],t[1],t[2],t[3]]}function fP(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function U1t(t,e,i,s,l=Gr()){return l[0]=t,l[1]=e,l[2]=i,l[3]=s,l}function G1t(t,e=Gr()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function NV(t,e,i=new Zt){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function B1t(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function q1t(t,e,i){if(e!=null)if("length"in e)mb(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else fP(i,t)}function V1t(t,e,i=t){const s=e.length;let l=t[0],f=t[1],y=t[2],v=t[3];for(let b=0;b<s;b++){const S=e[b];l=Math.min(l,S[0]),f=Math.min(f,S[1]),y=Math.max(y,S[0]),v=Math.max(v,S[1])}return i[0]=l,i[1]=f,i[2]=y,i[3]=v,i}function H1t(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function r4(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function s4(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function W1t(t){return r4(t)*s4(t)}function J1t(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function Y1t(t){const e=r4(t),i=s4(t);return Math.sqrt(e*e+i*i)}function K1t(t,e){return LV(t,e.x,e.y)}function LV(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function Z1t(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function X1t(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function DV(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Q1t(t,e,i,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+e,s[3]=t[3]+i,s}function tyt(t){return t?fP(t,L8):Gr(L8)}function mb(t){return t!=null&&t.length===4}function eyt(t,e){return mb(t)&&mb(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const L8=[1/0,1/0,-1/0,-1/0],jV=[0,0,0,0];function dP(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function yP(t){return t.points!==void 0}function gP(t){return t.x!==void 0&&t.y!==void 0}function mP(t){return t.paths!==void 0}function vP(t){return t.rings!==void 0}function wP(t){function e(i,s){return i==null?s:s==null?i:t(i,s)}return e}const El=wP(Math.min),$l=wP(Math.max);function iyt(t,e){return mP(e)?Mp(t,e.paths,!1,!1):vP(e)?Mp(t,e.rings,!1,!1):yP(e)?n4(t,e.points,!1,!1,!1,!1):dP(e)?bP(t,e):(gP(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function ryt(t){let e,i,s,l;for(t.reset(),e=s=1/0,i=l=-1/0;t.nextPath();){const f=FV(t);e=Math.min(f[0],e),s=Math.min(f[1],s),i=Math.max(f[2],i),l=Math.max(f[3],l)}return Gr([e,s,i,l])}function FV(t){let e,i,s,l;for(e=s=1/0,i=l=-1/0;t.nextPoint();)e=Math.min(t.x,e),s=Math.min(t.y,s),i=Math.max(t.x,i),l=Math.max(t.y,l);return Gr([e,s,i,l])}function syt(t,e){return mP(e)?Mp(t,e.paths,!0,!1):vP(e)?Mp(t,e.rings,!0,!1):yP(e)?n4(t,e.points,!0,!1,!0,!1):dP(e)?bP(t,e,!0,!1,!0,!1):(gP(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Mp(t,e,i,s){const l=i?3:2;if(!e.length||!e[0].length)return null;let f,y,v,b,[S,A]=e[0][0],[P,k]=e[0][0];for(let C=0;C<e.length;C++){const L=e[C];for(let F=0;F<L.length;F++){const q=L[F],[H,J]=q;if(S=El(S,H),A=El(A,J),P=$l(P,H),k=$l(k,J),i&&q.length>2){const Q=q[2];f=El(f,Q),y=$l(y,Q)}if(s&&q.length>l){const Q=q[l];v=El(f,Q),b=$l(y,Q)}}}return i?s?(t[0]=S,t[1]=A,t[2]=f,t[3]=v,t[4]=P,t[5]=k,t[6]=y,t[7]=b,t.length=8,t):(t[0]=S,t[1]=A,t[2]=f,t[3]=P,t[4]=k,t[5]=y,t.length=6,t):s?(t[0]=S,t[1]=A,t[2]=v,t[3]=P,t[4]=k,t[5]=b,t.length=6,t):(t[0]=S,t[1]=A,t[2]=P,t[3]=k,t.length=4,t)}function bP(t,e,i,s,l,f){const y=e.xmin,v=e.xmax,b=e.ymin,S=e.ymax;let A=e.zmin,P=e.zmax,k=e.mmin,C=e.mmax;return l?(A=A||0,P=P||0,f?(k=k||0,C=C||0,t[0]=y,t[1]=b,t[2]=A,t[3]=k,t[4]=v,t[5]=S,t[6]=P,t[7]=C,t):(t[0]=y,t[1]=b,t[2]=A,t[3]=v,t[4]=S,t[5]=P,t)):f?(k=k||0,C=C||0,t[0]=y,t[1]=b,t[2]=k,t[3]=v,t[4]=S,t[5]=C,t):(t[0]=y,t[1]=b,t[2]=v,t[3]=S,t)}function n4(t,e,i,s,l,f){const y=i?3:2,v=s&&f,b=i&&l;if(!e.length||!e[0].length)return null;let S,A,P,k,[C,L]=e[0],[F,q]=e[0];for(let H=0;H<e.length;H++){const J=e[H],[Q,tt]=J;if(C=El(C,Q),L=El(L,tt),F=$l(F,Q),q=$l(q,tt),b&&J.length>2){const et=J[2];S=El(S,et),A=$l(A,et)}if(v&&J.length>y){const et=J[y];P=El(S,et),k=$l(A,et)}}return l?(S=S||0,A=A||0,f?(P=P||0,k=k||0,t[0]=C,t[1]=L,t[2]=S,t[3]=P,t[4]=F,t[5]=q,t[6]=A,t[7]=k,t):(t[0]=C,t[1]=L,t[2]=S,t[3]=F,t[4]=q,t[5]=A,t)):f?(P=P||0,k=k||0,t[0]=C,t[1]=L,t[2]=P,t[3]=F,t[4]=q,t[5]=k,t):(t[0]=C,t[1]=L,t[2]=F,t[3]=q,t)}function zV(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function UV(t){return t.points!==void 0}function GV(t){return t.x!==void 0&&t.y!==void 0}function BV(t){return t.paths!==void 0}function qV(t){return t.rings!==void 0}const o4=[];function _P(t,e,i,s){return{xmin:t,ymin:e,xmax:i,ymax:s}}function xP(t,e,i,s,l,f){return{xmin:t,ymin:e,zmin:i,xmax:s,ymax:l,zmax:f}}function SP(t,e,i,s,l,f){return{xmin:t,ymin:e,mmin:i,xmax:s,ymax:l,mmax:f}}function TP(t,e,i,s,l,f,y,v){return{xmin:t,ymin:e,zmin:i,mmin:s,xmax:l,ymax:f,zmax:y,mmax:v}}function a4(t,e=!1,i=!1){return e?i?TP(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):xP(t[0],t[1],t[2],t[3],t[4],t[5]):i?SP(t[0],t[1],t[2],t[3],t[4],t[5]):_P(t[0],t[1],t[2],t[3])}function nyt(t){return t?zV(t)?t:GV(t)?HV(t):qV(t)?MP(t):BV(t)?EP(t):UV(t)?VV(t):null:null}function VV(t){const{hasZ:e,hasM:i,points:s}=t;return a4(n4(o4,s,e??!1,i??!1),e,i)}function HV(t){const{x:e,y:i,z:s,m:l}=t,f=l!=null;return s!=null?f?TP(e,i,s,l,e,i,s,l):xP(e,i,s,e,i,s):f?SP(e,i,l,e,i,l):_P(e,i,e,i)}function MP(t){const{hasZ:e,hasM:i,rings:s}=t,l=Mp(o4,s,e??!1,i??!1);return l?a4(l,e,i):null}function EP(t){const{hasZ:e,hasM:i,paths:s}=t,l=Mp(o4,s,e??!1,i??!1);return l?a4(l,e,i):null}function Ep(t,e,i=!1){let{hasM:s,hasZ:l}=t;Array.isArray(e)?e.length!==4||s||l?e.length===3&&i&&!s?(l=!0,s=!1):e.length===3&&s&&l&&(s=!1,l=!1):(s=!0,l=!0):(l=!l&&e.hasZ&&(!s||e.hasM),s=!s&&e.hasM&&(!l||e.hasZ)),t.hasZ=l,t.hasM=s}var Qy;function D8(t){return!Array.isArray(t[0])}function WV(t){return typeof t[0]?.[0]=="number"}function JV(t){if(!t)return;let{rings:e,hasM:i,hasZ:s,spatialReference:l}=t;switch(e??=[],WV(e)&&(e=[e]),e[0]?.[0]?.length){case 4:s??=!0,i??=!0;break;case 3:s??=i!==!0,i??=!s;break;default:s??=!1,i??=!1}return l??=Et.WGS84,{...t,hasM:i,hasZ:s,rings:e,spatialReference:l}}let Fe=Qy=class extends ir{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let s=!1,l=!1;for(const y of e)y.hasZ&&(s=!0),y.hasM&&(l=!0);const f={rings:e.map((y=>{const v=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const b=y.zmin+.5*(y.zmax-y.zmin);for(let S=0;S<v.length;S++)v[S].push(b)}if(l&&y.hasM){const b=y.mmin+.5*(y.mmax-y.mmin);for(let S=0;S<v.length;S++)v[S].push(b)}return v})),spatialReference:i};return s&&(f.hasZ=!0),l&&(f.hasM=!0),new Qy(f)}constructor(t){super(JV(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=$V(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ct;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=yt(t)}get extent(){const t=MP(this),{spatialReference:e}=this;return t?new Zt({...t,spatialReference:e}):null}get isSelfIntersecting(){return i$(At.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),qU(this.rings)}writeRings(t,e){e.rings=yt(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(D8(t)){const s=[];for(let l=0,f=t.length;l<f;l++)s[l]=t[l].toArray();e[i]=s}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new Qy;return t.spatialReference=this.spatialReference,t.rings=yt(this.rings),t.curveRings=yt(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const s=([l,f,y,v],[b,S,A,P])=>l===b&&f===S&&(y==null&&A==null||y===A)&&(v==null&&P==null||v===P);for(let l=0;l<this.rings.length;l++){const f=this.rings[l],y=t.rings[l];if(!Qd(f,y,s))return!1}return!0}contains(t){if(!t)return!1;const e=M2(t,this.spatialReference);return D_(this,e??t)}isClockwise(t){const e=D8(t)?t.map((i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y])):t;return hP(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],s=this.hasZ,l=this.hasM;return s&&!l?new Ct(i[0],i[1],i[2],void 0,this.spatialReference):l&&!s?new Ct(i[0],i[1],void 0,i[2],this.spatialReference):s&&l?new Ct(i[0],i[1],i[2],i[3],this.spatialReference):new Ct(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Ep(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ct(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,s=e.map((l=>new Ct(l,i)));return this.notifyChange("rings"),s}setPoint(t,e,i){return this._validateInputs(t,e)?(Ep(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const s=this.rings[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([E({readOnly:!0})],Fe.prototype,"cache",null),_([E({readOnly:!0})],Fe.prototype,"centroid",null),_([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Fe.prototype,"curveRings",void 0),_([Xt("curveRings")],Fe.prototype,"writeCurveRings",null),_([E({readOnly:!0})],Fe.prototype,"extent",null),_([E({readOnly:!0})],Fe.prototype,"isSelfIntersecting",null),_([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],Fe.prototype,"rings",void 0),_([Xt("rings")],Fe.prototype,"writeRings",null),Fe=Qy=_([Y("esri.geometry.Polygon")],Fe),Fe.prototype.toJSON.isDefaultToJSON=!0;function Mt(){return[0,0,0]}function Or(t){return[t[0],t[1],t[2]]}function Ao(t,e,i){return[t,e,i]}function YV(t,e,i){return[t,e,i]}function KV(t,e=Mt()){const i=Math.min(3,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function $P(){return Mt()}function AP(){return Ao(1,1,1)}function IP(){return Ao(1,0,0)}function PP(){return Ao(0,1,0)}function OP(){return Ao(0,0,1)}const ZV=$P(),XV=AP(),QV=IP(),tH=PP(),kP=OP();Object.freeze(Object.defineProperty({__proto__:null,ONES:XV,UNIT_X:QV,UNIT_Y:tH,UNIT_Z:kP,ZEROS:ZV,clone:Or,create:Mt,freeze:YV,fromArray:KV,fromValues:Ao,ones:AP,unitX:IP,unitY:PP,unitZ:OP,zeros:$P},Symbol.toStringTag,{value:"Module"}));var vb;function j8(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function eH(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Ks=vb=class extends ir{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):eH(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const s=i.points?.[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Zt,i=this.hasZ,s=this.hasM,l=i?3:2,f=t[0],y=j8(Math.min),v=j8(Math.max);let b,S,A,P,[k,C]=f,[L,F]=f;for(let q=0,H=t.length;q<H;q++){const J=t[q],[Q,tt]=J;if(k=y(k,Q),C=y(C,tt),L=v(L,Q),F=v(F,tt),i&&J.length>2){const et=J[2];b=y(b,et),A=v(A,et)}if(s&&J.length>l){const et=J[l];S=y(S,et),P=v(P,et)}}return e.xmin=k,e.ymin=C,e.xmax=L,e.ymax=F,e.spatialReference=this.spatialReference,i?(e.zmin=b,e.zmax=A):(e.zmin=void 0,e.zmax=void 0),s?(e.mmin=S,e.mmax=P):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=yt(this.points)}addPoint(t){return Ep(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:yt(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new vb(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=e[2],s=3),this.hasM&&(i.m=e[s]),new Ct(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ct(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Ep(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};_([E({readOnly:!0})],Ks.prototype,"cache",null),_([E()],Ks.prototype,"extent",null),_([E({type:[[Number]],json:{write:{isRequired:!0}}})],Ks.prototype,"points",void 0),_([Xt("points")],Ks.prototype,"writePoints",null),Ks=vb=_([Y("esri.geometry.Multipoint")],Ks),Ks.prototype.toJSON.isDefaultToJSON=!0;var wb;function iH(t){return!Array.isArray(t[0])}function rH(t){return typeof t[0]?.[0]=="number"}function sH(t){if(!t)return;let{paths:e,hasM:i,hasZ:s,spatialReference:l}=t;switch(e??=[],rH(e)&&(e=[e]),e[0]?.[0]?.length){case 4:s??=!0,i??=!0;break;case 3:s??=i!==!0,i??=!s;break;default:s??=!1,i??=!1}return l??=Et.WGS84,{...t,hasM:i,hasZ:s,paths:e,spatialReference:l}}let ei=wb=class extends ir{constructor(t){super(sH(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=yt(t)}get extent(){const t=EP(this),{spatialReference:e}=this;return t?new Zt({...t,spatialReference:e}):null}writePaths(t,e){e.paths=yt(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(iH(t)){const s=[];for(let l=0,f=t.length;l<f;l++)s[l]=t[l].toArray();e[i]=s}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new wb;return t.spatialReference=this.spatialReference,t.paths=yt(this.paths),t.curvePaths=yt(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],s=this.hasZ,l=this.hasM;return s&&!l?new Ct(i[0],i[1],i[2],void 0,this.spatialReference):l&&!s?new Ct(i[0],i[1],void 0,i[2],this.spatialReference):s&&l?new Ct(i[0],i[1],i[2],i[3],this.spatialReference):new Ct(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Ep(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,s=e.map((l=>new Ct(l,i)));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ct(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Ep(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const s=this.paths[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([E({readOnly:!0})],ei.prototype,"cache",null),_([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],ei.prototype,"curvePaths",void 0),_([Xt("curvePaths")],ei.prototype,"writeCurvePaths",null),_([E({readOnly:!0})],ei.prototype,"extent",null),_([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],ei.prototype,"paths",void 0),_([Xt("paths")],ei.prototype,"writePaths",null),ei=wb=_([Y("esri.geometry.Polyline")],ei),ei.prototype.toJSON.isDefaultToJSON=!0;const Fr=Math.PI/180,nH=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Ba=fi.radius,Tn=fi.eccentricitySquared,oH={a1:Ba*Tn,a2:Ba*Tn*Ba*Tn,a3:Ba*Tn*Tn/2,a4:Ba*Tn*Ba*Tn*2.5,a5:Ba*Tn+Ba*Tn*Tn/2,a6:1-Tn},aH={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:fi.radius,f:fi.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:ql.radius,f:ql.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:bo.radius,f:bo.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:bo.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var st;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(st||(st={}));const lH={[st.WGS84]:{[st.CGCS2000]:Ze,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:Ze,[st.SPHERICAL_ECEF]:ed,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:zc,[st.PLATE_CARREE]:Uc,[st.WGS84]:Ze,[st.WGS84_ECEF]:qc},[st.CGCS2000]:{[st.CGCS2000]:Ze,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:Ze,[st.SPHERICAL_ECEF]:ed,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:zc,[st.PLATE_CARREE]:Uc,[st.WGS84]:Ze,[st.WGS84_ECEF]:qc},[st.GCSMARS2000]:{[st.CGCS2000]:null,[st.GCSMARS2000]:Ze,[st.GCSMOON2000]:null,[st.LON_LAT]:Ze,[st.SPHERICAL_ECEF]:null,[st.SPHERICAL_MARS_PCPF]:U8,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:null,[st.PLATE_CARREE]:null,[st.WGS84]:null,[st.WGS84_ECEF]:null},[st.GCSMOON2000]:{[st.CGCS2000]:null,[st.GCSMARS2000]:null,[st.GCSMOON2000]:Ze,[st.LON_LAT]:Ze,[st.SPHERICAL_ECEF]:null,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:z8,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:null,[st.PLATE_CARREE]:null,[st.WGS84]:null,[st.WGS84_ECEF]:null},[st.WEB_MERCATOR]:{[st.CGCS2000]:td,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:td,[st.SPHERICAL_ECEF]:hH,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:Ze,[st.PLATE_CARREE]:fH,[st.WGS84]:td,[st.WGS84_ECEF]:cH},[st.WGS84_ECEF]:{[st.CGCS2000]:Vc,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:Vc,[st.SPHERICAL_ECEF]:xH,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:SH,[st.PLATE_CARREE]:dH,[st.WGS84]:Vc,[st.WGS84_ECEF]:Ze},[st.SPHERICAL_ECEF]:{[st.CGCS2000]:Bc,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:Bc,[st.SPHERICAL_ECEF]:Ze,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:wH,[st.PLATE_CARREE]:yH,[st.WGS84]:Bc,[st.WGS84_ECEF]:bH},[st.SPHERICAL_MARS_PCPF]:{[st.CGCS2000]:null,[st.GCSMARS2000]:B8,[st.GCSMOON2000]:null,[st.LON_LAT]:B8,[st.SPHERICAL_ECEF]:null,[st.SPHERICAL_MARS_PCPF]:Ze,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:null,[st.PLATE_CARREE]:null,[st.WGS84]:null,[st.WGS84_ECEF]:null},[st.SPHERICAL_MOON_PCPF]:{[st.CGCS2000]:null,[st.GCSMARS2000]:null,[st.GCSMOON2000]:G8,[st.LON_LAT]:G8,[st.SPHERICAL_ECEF]:null,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:Ze,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:null,[st.PLATE_CARREE]:null,[st.WGS84]:null,[st.WGS84_ECEF]:null},[st.UNKNOWN]:{[st.CGCS2000]:null,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:null,[st.SPHERICAL_ECEF]:null,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:Ze,[st.WEB_MERCATOR]:null,[st.PLATE_CARREE]:null,[st.WGS84]:null,[st.WGS84_ECEF]:null},[st.LON_LAT]:{[st.CGCS2000]:Ze,[st.GCSMARS2000]:Ze,[st.GCSMOON2000]:Ze,[st.LON_LAT]:Ze,[st.SPHERICAL_ECEF]:ed,[st.SPHERICAL_MARS_PCPF]:U8,[st.SPHERICAL_MOON_PCPF]:z8,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:zc,[st.PLATE_CARREE]:Uc,[st.WGS84]:Ze,[st.WGS84_ECEF]:qc},[st.PLATE_CARREE]:{[st.CGCS2000]:Gc,[st.GCSMARS2000]:null,[st.GCSMOON2000]:null,[st.LON_LAT]:Gc,[st.SPHERICAL_ECEF]:gH,[st.SPHERICAL_MARS_PCPF]:null,[st.SPHERICAL_MOON_PCPF]:null,[st.UNKNOWN]:null,[st.WEB_MERCATOR]:mH,[st.PLATE_CARREE]:Ze,[st.WGS84]:Gc,[st.WGS84_ECEF]:vH}};function RP(t,e){return uH(t,e)?.projector}function uH(t,e){if(t==null||e==null)return null;if(Lo.source.spatialReference===t&&Lo.dest.spatialReference===e)return Lo;const i=F8(t,Lo.source),s=F8(e,Lo.dest);return i===st.UNKNOWN&&s===st.UNKNOWN?di(t,e)?Lo.projector=Ze:Lo.projector=null:Lo.projector=lH[i][s],Lo}function F8(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=ko(t,1)),$d(t)?e.spatialReferenceId=st.SPHERICAL_ECEF:Vl(t)?e.spatialReferenceId=st.WGS84:ks(t)?e.spatialReferenceId=st.WEB_MERCATOR:eU(t)?e.spatialReferenceId=st.PLATE_CARREE:t.wkt===cA.wkt?e.spatialReferenceId=st.WGS84_ECEF:t.wkid===wh.CGCS2000?e.spatialReferenceId=st.CGCS2000:t.wkt===S2.wkt?e.spatialReferenceId=st.SPHERICAL_MARS_PCPF:t.wkt===T2.wkt?e.spatialReferenceId=st.SPHERICAL_MOON_PCPF:oA(t)?e.spatialReferenceId=st.GCSMARS2000:aA(t)?e.spatialReferenceId=st.GCSMOON2000:e.spatialReferenceId=st.UNKNOWN):st.UNKNOWN}function Ze(t,e,i,s){t!==i&&(i[s++]=t[e++],i[s++]=t[e++],i[s]=t[e])}function td(t,e,i,s){i[s]=Ap*(t[e]/ih),i[s+1]=Ap*(CP-2*Math.atan(Math.exp(-t[e+1]/ih))),i[s+2]=t[e+2]}function hH(t,e,i,s){const l=t[e]/ih,f=CP-2*Math.atan(Math.exp(-t[e+1]/ih)),y=ih+t[e+2],v=Math.cos(f)*y;i[s]=Math.cos(l)*v,i[s+1]=Math.sin(l)*v,i[s+2]=Math.sin(f)*y}function cH(t,e,i,s){td(t,e,i,s),qc(i,s,i,s)}function pH(t,e,i,s,l){const f=.4999999*Math.PI,y=Rr($p*t[e+1],-f,f),v=Math.sin(y);i[s++]=$p*t[e]*l.radius,i[s++]=l.halfSemiMajorAxis*Math.log((1+v)/(1-v)),i[s]=t[e+2]}function zc(t,e,i,s){pH(t,e,i,s,fi)}function Uc(t,e,i,s){i[s]=t[e]*q8,i[s+1]=t[e+1]*q8,i[s+2]=t[e+2]}function Gc(t,e,i,s){i[s]=t[e]*V8,i[s+1]=t[e+1]*V8,i[s+2]=t[e+2]}function fH(t,e,i,s){td(t,e,i,s),Uc(i,s,i,s)}function dH(t,e,i,s){Vc(t,e,i,s),Uc(i,s,i,s)}function yH(t,e,i,s){Bc(t,e,i,s),Uc(i,s,i,s)}function gH(t,e,i,s){Gc(t,e,i,s),ed(i,s,i,s)}function mH(t,e,i,s){Gc(t,e,i,s),zc(i,s,i,s)}function vH(t,e,i,s){Gc(t,e,i,s),qc(i,s,i,s)}function l4(t,e,i,s,l){const f=l+t[e+2],y=$p*t[e+1],v=$p*t[e],b=Math.cos(y)*f;i[s]=Math.cos(v)*b,i[s+1]=Math.sin(v)*b,i[s+2]=Math.sin(y)*f}function z8(t,e,i,s){l4(t,e,i,s,ql.radius)}function U8(t,e,i,s){l4(t,e,i,s,bo.radius)}function ed(t,e,i,s){l4(t,e,i,s,fi.radius)}function u4(t,e,i,s,l){const f=t[e],y=t[e+1],v=t[e+2],b=Math.sqrt(f*f+y*y+v*v),S=e4(v/(b===0?1:b)),A=Math.atan2(y,f);i[s++]=Ap*A,i[s++]=Ap*S,i[s]=b-l}function G8(t,e,i,s){u4(t,e,i,s,ql.radius)}function B8(t,e,i,s){u4(t,e,i,s,bo.radius)}function Bc(t,e,i,s){u4(t,e,i,s,fi.radius)}function wH(t,e,i,s){Bc(t,e,i,s),zc(i,s,i,s)}function bH(t,e,i,s){Bc(t,e,i,s),qc(i,s,i,s)}function _H(t,e,i,s,l){const f=$p*t[e],y=$p*t[e+1],v=t[e+2],b=Math.sin(y),S=Math.cos(y),A=l.radius/Math.sqrt(1-l.eccentricitySquared*b*b);i[s++]=(A+v)*S*Math.cos(f),i[s++]=(A+v)*S*Math.sin(f),i[s++]=(A*(1-l.eccentricitySquared)+v)*b}function qc(t,e,i,s){_H(t,e,i,s,fi)}function Vc(t,e,i,s){const l=oH,f=t[e],y=t[e+1],v=t[e+2];let b,S,A,P,k,C,L,F,q,H,J,Q,tt,et,nt,vt,Tt,St,pt,ht,_t;b=Math.abs(v),S=f*f+y*y,A=Math.sqrt(S),P=S+v*v,k=Math.sqrt(P),ht=Math.atan2(y,f),C=v*v/P,L=S/P,et=l.a2/k,nt=l.a3-l.a4/k,L>.3?(F=b/k*(1+L*(l.a1+et+C*nt)/k),pt=Math.asin(F),H=F*F,q=Math.sqrt(1-H)):(q=A/k*(1-C*(l.a5-et-L*nt)/k),pt=Math.acos(q),H=1-q*q,F=Math.sqrt(H)),J=1-fi.eccentricitySquared*H,Q=fi.radius/Math.sqrt(J),tt=l.a6*Q,et=A-Q*q,nt=b-tt*F,Tt=q*et+F*nt,vt=q*nt-F*et,St=vt/(tt/J+Tt),pt+=St,_t=Tt+vt*St/2,v<0&&(pt=-pt),i[s++]=Ap*ht,i[s++]=Ap*pt,i[s]=_t}function xH(t,e,i,s){Vc(t,e,i,s),ed(i,s,i,s)}function SH(t,e,i,s){Vc(t,e,i,s),zc(i,s,i,s)}const Lo={source:{spatialReference:null,spatialReferenceId:st.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:st.UNKNOWN,metersPerUnit:1},projector:Ze},$p=d1(1),Ap=QI(1),CP=.5*Math.PI,ih=fi.radius,q8=ih*Math.PI/180,V8=180/(ih*Math.PI);function ef(t,e,i,s,l,f,y=Math.floor(t.length/3)){const v=RP(e,l);if(v==null)return!1;if(v===Ze){if(t===s&&i===f)return!0;const S=i+3*y;for(let A=i,P=f;A<S;A++,P++)s[P]=t[A];return!0}const b=i+3*y;for(let S=i,A=f;S<b;S+=3,A+=3)v(t,S,s,A);return!0}const oyt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:ef},Symbol.toStringTag,{value:"Module"}));function H8(t,e,i,s,l,f){return Y1[0]=t,Y1[1]=e,Y1[2]=i,ef(Y1,s,0,l,f,0)}const Y1=Mt();let K1=0,r3=class bb{static fromGE(e){const i=new bb;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=K1++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=K1++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=K1++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=K1++}getInverse(){const e=new bb;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},vm=class o0{static cacheKey(e,i){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",i.wkid?.toString()??"-1",i.wkt?.toString()??"",i.wkt2?.toString()??""].join()}static fromGE(e){const i=new o0;let s="";for(const l of e.steps){const f=r3.fromGE(l);i.steps.push(f),s+=f.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const i of e.steps)i instanceof r3?this.steps.push(i):this.steps.push(new r3({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new o0;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,s){this._cachedProjection[o0.cacheKey(e,i)]=s}getCachedGeTransformation(e,i){let s="";for(const f of this.steps)s+=f.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const l=this._cachedProjection[o0.cacheKey(e,i)];return l===void 0?null:l}};function TH(t,e,i){if(e==null||i==null||i.vcsWkid||di(e,i)||Hl(e)||Hl(i))return null;const s=L7(e)/L7(i);if(s===1)return null;switch(t){case"point":case"esriGeometryPoint":return l=>MH(l,s);case"polyline":case"esriGeometryPolyline":return l=>$H(l,s);case"polygon":case"esriGeometryPolygon":return l=>EH(l,s);case"multipoint":case"esriGeometryMultipoint":return l=>AH(l,s);case"extent":case"esriGeometryEnvelope":return l=>IH(l,s);default:return null}}function MH(t,e){t?.z!=null&&(t.z*=e)}function EH(t,e){if(t)for(const i of t.rings)for(const s of i)s.length>2&&(s[2]*=e)}function $H(t,e){if(t)for(const i of t.paths)for(const s of i)s.length>2&&(s[2]*=e)}function AH(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function IH(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Gn=null,Wl=null,id=null,tg={};const h4=new l1;function ka(){return!!Gn&&x2()}function NP(){return!!ka()||(Ft(h4),Aa(),!1)}function LP(t,e){return!t||!e||Cs(t,e)||NP()}function PH(t,e){return!Cs(t,e)&&!ka()}function Aa(t){return id==null&&(id=Promise.all([C_(),mt(()=>Promise.resolve().then(()=>kpt),void 0).then((e=>e.g)),mt(()=>Promise.resolve().then(()=>Fpt),void 0)])),id.then((([,e,{hydratedAdapter:i}])=>{Ce(t),Wl=i,Gn=e.default,Gn._enableProjection(eA),h4.notify()}))}function Jn(t,e,i=null,s=null){return Array.isArray(t)?t.length===0?[]:(AU(t),_b(Wl,t,t[0].spatialReference,e,i,s)):(ee(t),_b(Wl,[t],t.spatialReference,e,i,s)[0])}function _b(t,e,i,s,l=null,f=null){if(i==null||s==null)return e;if(Cs(i,s,l))return e.map((y=>eg(y,i,s)));if(l==null&&$d(i))return e.map((y=>eg(y,i,Et.WGS84))).map((y=>Ip(y,s)));if(l==null&&$d(s))return e.map((y=>Ip(y,Et.WGS84))).map((y=>eg(y,Et.WGS84,s)));if(l==null){const y=vm.cacheKey(i,s);tg[y]!==void 0?l=tg[y]:((l=jP(i,s,void 0))==null&&(l=new vm),tg[y]=l)}if(Gn==null||t==null)throw new L2;return f!=null?Gn._project(t,e,i,s,l,f):Gn._project(t,e,i,s,l)}function OH(t,e){const i=DP([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function DP(t,e){if(!ka()){for(const i of t)if(i!=null&&!di(i.spatialReference,e)&&Es(i.spatialReference)&&Es(e)&&!Cs(i.spatialReference,e))return Ft(h4),{pending:Aa(),geometries:null}}return{pending:null,geometries:t.map((i=>i==null?null:di(i.spatialReference,e)?i:Es(i.spatialReference)&&Es(e)?Ip(i,e):null))}}function jP(t,e,i=null){if(t==null||e==null)return null;if(Gn==null||Wl==null)throw new L2;const s=Gn._getTransformation(Wl,t,e,i,i?.spatialReference);return s!==null?vm.fromGE(s):null}function kH(t,e,i=null){if(Gn==null||Wl==null)throw new L2;const s=Gn._getTransformationBySuitability(Wl,t,e,i,i?.spatialReference);if(s!==null){const l=[];for(const f of s)l.push(vm.fromGE(f));return l}return[]}let L2=class extends ct{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function RH(){Gn=null,Wl=null,id=null,tg={}}const CH={get loadPromise(){return id}};function Ip(t,e){try{const i=Jn(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const s=TH(i.type,t.spatialReference,e);return s?.(i),i}catch(i){if(!(i instanceof L2))throw i;return null}}async function FP(t,e,i){const s=t.spatialReference;return s!=null&&e!=null&&await g1(s,e,null,i),Ip(t,e)}function Cs(t,e,i){return!i&&(!!di(t,e)||Es(t)&&Es(e)&&!!RP(t,e))}function NH(t,e){if(di(t,e))return!0;if(!Es(t)||!Es(e))return!1;const i=Vl(t)||ks(t)||qw(t),s=Vl(e)||ks(e)||qw(e);return i&&s}async function g1(t,e,i,s){if(ka())return t7(s);if(Array.isArray(t)){for(const{source:l,dest:f,geographicTransformation:y}of t)if(l&&f&&!Cs(l,f,y))return Aa(s)}else if(t&&e&&!Cs(t,e,i))return Aa(s);return t7(s)}function eg(t,e,i){return t?"x"in t?zP(t,e,new Ct,i,0):"xmin"in t?VP(t,e,new Zt,i,0):"rings"in t?qP(t,e,new Fe,i,0):"paths"in t?GP(t,e,new ei,i,0):"points"in t?UP(t,e,new Ks,i,0):null:null}function LH(t,e,i=e.spatialReference,s=0){return i!=null&&t.spatialReference!=null&&zP(t,t.spatialReference,e,i,s)!=null}function zP(t,e,i,s,l){Sr[0]=t.x,Sr[1]=t.y;const f=t.z;return Sr[2]=f!==void 0?f:l,ef(Sr,e,0,Sr,s,0)?(i.x=Sr[0],i.y=Sr[1],i.spatialReference=s,f!==void 0||Hl(s)?(i.z=Sr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function DH(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&UP(t,t.spatialReference,e,i,s)!=null}function UP(t,e,i,s,l){const{points:f,hasZ:y,hasM:v}=t,b=[],S=f.length,A=[];for(const k of f)A.push(k[0],k[1],y?k[2]:l);if(!ef(A,e,0,A,s,0,S))return null;const P=y||Hl(s);for(let k=0;k<S;++k){const C=3*k,L=A[C],F=A[C+1];P&&v?b.push([L,F,A[C+2],f[k][3]]):P?b.push([L,F,A[C+2]]):v?b.push([L,F,f[k][2]]):b.push([L,F])}return i.points=b,i.spatialReference=s,i.hasZ=y,i.hasM=v,i}function jH(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&GP(t,t.spatialReference,e,i,s)!=null}function GP(t,e,i,s,l){const{paths:f,hasZ:y,hasM:v}=t,b=[];if(!HP(f,y??!1,v??!1,e,b,s,l))return null;const S=y||Hl(s);return i.paths=b,i.spatialReference=s,i.hasZ=S,i.hasM=v,i}function BP(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&qP(t,t.spatialReference,e,i,s)!=null}function qP(t,e,i,s,l){const{rings:f,hasZ:y,hasM:v}=t,b=[];if(!HP(f,y??!1,v??!1,e,b,s,l))return null;const S=y||Hl(s);return i.rings=b,i.spatialReference=s,i.hasZ=S,i.hasM=v,i}function FH(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&VP(t,t.spatialReference,e,i,s)!=null}function VP(t,e,i,s,l){const{xmin:f,ymin:y,xmax:v,ymax:b,hasZ:S,hasM:A}=t,P=S?t.zmin:l;if(!H8(f,y,P,e,Sr,s))return null;const k=S||Hl(s);i.xmin=Sr[0],i.ymin=Sr[1],k&&(i.zmin=Sr[2]);const C=S?t.zmax:l;return H8(v,b,C,e,Sr,s)?(i.xmax=Sr[0],i.ymax=Sr[1],k&&(i.zmax=Sr[2]),A&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=s,i):null}function HP(t,e,i,s,l,f,y=0){const v=new Array;for(const A of t)for(const P of A)v.push(P[0],P[1],e?P[2]:y);if(!ef(v,s,0,v,f,0))return!1;let b=0;l.length=0;const S=e||Hl(f);for(const A of t){const P=new Array;for(const k of A)S&&i?P.push([v[b++],v[b++],v[b++],k[3]]):S?P.push([v[b++],v[b++],v[b++]]):i?(P.push([v[b++],v[b++],k[2]]),b++):(P.push([v[b++],v[b++]]),b++);l.push(P)}return!0}const Sr=Mt(),lyt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Cs,getTransformation:jP,getTransformations:kH,initializeProjection:g1,isEqualBaseGCS:NH,isLoaded:ka,isLoadedOrLoad:NP,isLoadedOrLoadFor:LP,load:Aa,project:Jn,projectExtent:FH,projectMany:_b,projectMultipoint:DH,projectOrLoad:OH,projectOrLoadMany:DP,projectPoint:LH,projectPolygon:BP,projectPolyline:jH,projectWithZConversion:FP,projectWithoutEngine:eg,requiresLoad:PH,test:CH,tryProjectWithZConversion:Ip,unload:RH},Symbol.toStringTag,{value:"Module"}));var ig;let xb=ig=class extends It.JSONSupportMixin(kt.ofType(Fe)){constructor(t){super(t)}clone(){return new ig(this.items.map((t=>t.clone())))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map((i=>{if(!e.equals(i.spatialReference)){if(!Cs(i.spatialReference,e))return t?.messages?.push(new Mo("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const l=new Fe;BP(i,l,e),i=l}const s=i.toJSON(t);return delete s.spatialReference,s})).filter((i=>i!=null)):this.toArray().map((i=>i.toJSON(t)))}static fromJSON(t,e){const i=new ig;return t.forEach((s=>i.add(Fe.fromJSON(s,e)))),i}};xb=ig=_([Y("esri.layers.support.PolygonCollection")],xb);const rd=xb;let Jo=class extends It.JSONSupportMixin(Ei){constructor(e){super(e),this.id=`focusarea-${y1()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new rd}readGeometries(e,i,s){Array.isArray(e)?this.geometries=rd.fromJSON(e,s):s.hooks?.onAfterLoad?.((()=>this._loadGeometries(Wp(e,s),s)))}async _loadGeometries(e,i){const s=await ii(e,{responseType:"json"});this.geometries=rd.fromJSON(s.data,i)}};_([E({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),E()],Jo.prototype,"id",void 0),_([E({type:String,json:{write:!0}})],Jo.prototype,"title",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Jo.prototype,"enabled",void 0),_([E({type:wV,json:{write:!0}})],Jo.prototype,"outline",void 0),_([E({type:rd,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new rd(t.items.map((e=>e.clone())))}),pV({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Jo.prototype,"geometries",void 0),_([ae(["web-scene","portal-item"],"geometries")],Jo.prototype,"readGeometries",null),Jo=_([Y("esri.effects.FocusArea")],Jo);const zH=Jo;let a0=class extends It.JSONSupportMixin(Ei){constructor(e){super(e),this.areas=new kt,this.style="bright"}};_([E({type:kt.ofType(zH),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new kt(t.items.map((e=>e.clone())))})],a0.prototype,"areas",void 0),_([E({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],a0.prototype,"style",void 0),a0=_([Y("esri.effects.FocusAreas")],a0);const WP=a0;function UH(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function JP(t){return!(!UH(t)||!Rq(t)?.operations?.supportsEditing||"editingEnabled"in t&&!Nq(t)||qI(t))}const GH=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,BH="screenUtils.toPt: input not recognized!",YP=96;function cyt(t){return t?t/72*YP:0}function Jl(t){return t?72*t/YP:0}function ai(t){if(typeof t=="string"){const e=t.match(GH);if(e){const i=Number(e[1]),s=e[3]&&e[3].toLowerCase(),l=t.charAt(0)==="-",f=s==="px"?Jl(i):i;return l?-f:f}return console.warn(BH),null}return t}function Yi(t=0,e=0){return{x:t,y:e}}function pyt(t){return t?Yi(t.x,t.y):null}function qH(t=0,e=0){return[t,e]}function fyt(t=0,e=0,i=0){return[t,e,i]}function dyt(t){return t}function yyt(t){return t}function gyt(t){return t}function myt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function D2(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function VH(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function HH(t,e,i,s,l,f,y,v,b,S,A,P,k,C,L,F){const q=new Float32Array(16);return q[0]=t,q[1]=e,q[2]=i,q[3]=s,q[4]=l,q[5]=f,q[6]=y,q[7]=v,q[8]=b,q[9]=S,q[10]=A,q[11]=P,q[12]=k,q[13]=C,q[14]=L,q[15]=F,q}const WH=D2();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:WH,clone:VH,create:D2,fromValues:HH},Symbol.toStringTag,{value:"Module"}));let c4=1e-6;function Oi(){return c4}function JH(t){c4=t}const j2=Math.random,YH=Math.PI/180,KH=180/Math.PI;function p4(t){return t*YH}function ZH(t){return t*KH}function XH(t,e){return Math.abs(t-e)<=c4*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:j2,equals:XH,getEpsilon:Oi,setEpsilon:JH,toDegree:ZH,toRadian:p4},Symbol.toStringTag,{value:"Module"}));function KP(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ql(t,e,i,s,l,f,y,v,b,S,A,P,k,C,L,F,q){return t[0]=e,t[1]=i,t[2]=s,t[3]=l,t[4]=f,t[5]=y,t[6]=v,t[7]=b,t[8]=S,t[9]=A,t[10]=P,t[11]=k,t[12]=C,t[13]=L,t[14]=F,t[15]=q,t}function F2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tu(t,e){if(t===e){const i=e[1],s=e[2],l=e[3],f=e[6],y=e[7],v=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=f,t[11]=e[14],t[12]=l,t[13]=y,t[14]=v}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function QH(t,e){return ZP(t,e)||F2(t),t}function ZP(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=e[4],v=e[5],b=e[6],S=e[7],A=e[8],P=e[9],k=e[10],C=e[11],L=e[12],F=e[13],q=e[14],H=e[15],J=i*v-s*y,Q=i*b-l*y,tt=i*S-f*y,et=s*b-l*v,nt=s*S-f*v,vt=l*S-f*b,Tt=A*F-P*L,St=A*q-k*L,pt=A*H-C*L,ht=P*q-k*F,_t=P*H-C*F,gt=k*H-C*q;let at=J*gt-Q*_t+tt*ht+et*pt-nt*St+vt*Tt;return at?(at=1/at,t[0]=(v*gt-b*_t+S*ht)*at,t[1]=(l*_t-s*gt-f*ht)*at,t[2]=(F*vt-q*nt+H*et)*at,t[3]=(k*nt-P*vt-C*et)*at,t[4]=(b*pt-y*gt-S*St)*at,t[5]=(i*gt-l*pt+f*St)*at,t[6]=(q*tt-L*vt-H*Q)*at,t[7]=(A*vt-k*tt+C*Q)*at,t[8]=(y*_t-v*pt+S*Tt)*at,t[9]=(s*pt-i*_t-f*Tt)*at,t[10]=(L*nt-F*tt+H*J)*at,t[11]=(P*tt-A*nt-C*J)*at,t[12]=(v*St-y*ht-b*Tt)*at,t[13]=(i*ht-s*St+l*Tt)*at,t[14]=(F*Q-L*et-q*J)*at,t[15]=(A*et-P*Q+k*J)*at,t):null}function tW(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=e[4],v=e[5],b=e[6],S=e[7],A=e[8],P=e[9],k=e[10],C=e[11],L=e[12],F=e[13],q=e[14],H=e[15];return t[0]=v*(k*H-C*q)-P*(b*H-S*q)+F*(b*C-S*k),t[1]=-(s*(k*H-C*q)-P*(l*H-f*q)+F*(l*C-f*k)),t[2]=s*(b*H-S*q)-v*(l*H-f*q)+F*(l*S-f*b),t[3]=-(s*(b*C-S*k)-v*(l*C-f*k)+P*(l*S-f*b)),t[4]=-(y*(k*H-C*q)-A*(b*H-S*q)+L*(b*C-S*k)),t[5]=i*(k*H-C*q)-A*(l*H-f*q)+L*(l*C-f*k),t[6]=-(i*(b*H-S*q)-y*(l*H-f*q)+L*(l*S-f*b)),t[7]=i*(b*C-S*k)-y*(l*C-f*k)+A*(l*S-f*b),t[8]=y*(P*H-C*F)-A*(v*H-S*F)+L*(v*C-S*P),t[9]=-(i*(P*H-C*F)-A*(s*H-f*F)+L*(s*C-f*P)),t[10]=i*(v*H-S*F)-y*(s*H-f*F)+L*(s*S-f*v),t[11]=-(i*(v*C-S*P)-y*(s*C-f*P)+A*(s*S-f*v)),t[12]=-(y*(P*q-k*F)-A*(v*q-b*F)+L*(v*k-b*P)),t[13]=i*(P*q-k*F)-A*(s*q-l*F)+L*(s*k-l*P),t[14]=-(i*(v*q-b*F)-y*(s*q-l*F)+L*(s*b-l*v)),t[15]=i*(v*k-b*P)-y*(s*k-l*P)+A*(s*b-l*v),t}function eW(t){const e=t[0],i=t[1],s=t[2],l=t[3],f=t[4],y=t[5],v=t[6],b=t[7],S=t[8],A=t[9],P=t[10],k=t[11],C=t[12],L=t[13],F=t[14],q=t[15];return(e*y-i*f)*(P*q-k*F)-(e*v-s*f)*(A*q-k*L)+(e*b-l*f)*(A*F-P*L)+(i*v-s*y)*(S*q-k*C)-(i*b-l*y)*(S*F-P*C)+(s*b-l*v)*(S*L-A*C)}function XP(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=e[6],A=e[7],P=e[8],k=e[9],C=e[10],L=e[11],F=e[12],q=e[13],H=e[14],J=e[15];let Q=i[0],tt=i[1],et=i[2],nt=i[3];return t[0]=Q*s+tt*v+et*P+nt*F,t[1]=Q*l+tt*b+et*k+nt*q,t[2]=Q*f+tt*S+et*C+nt*H,t[3]=Q*y+tt*A+et*L+nt*J,Q=i[4],tt=i[5],et=i[6],nt=i[7],t[4]=Q*s+tt*v+et*P+nt*F,t[5]=Q*l+tt*b+et*k+nt*q,t[6]=Q*f+tt*S+et*C+nt*H,t[7]=Q*y+tt*A+et*L+nt*J,Q=i[8],tt=i[9],et=i[10],nt=i[11],t[8]=Q*s+tt*v+et*P+nt*F,t[9]=Q*l+tt*b+et*k+nt*q,t[10]=Q*f+tt*S+et*C+nt*H,t[11]=Q*y+tt*A+et*L+nt*J,Q=i[12],tt=i[13],et=i[14],nt=i[15],t[12]=Q*s+tt*v+et*P+nt*F,t[13]=Q*l+tt*b+et*k+nt*q,t[14]=Q*f+tt*S+et*C+nt*H,t[15]=Q*y+tt*A+et*L+nt*J,t}function iW(t,e,i){const s=i[0],l=i[1],f=i[2];if(e===t)t[12]=e[0]*s+e[4]*l+e[8]*f+e[12],t[13]=e[1]*s+e[5]*l+e[9]*f+e[13],t[14]=e[2]*s+e[6]*l+e[10]*f+e[14],t[15]=e[3]*s+e[7]*l+e[11]*f+e[15];else{const y=e[0],v=e[1],b=e[2],S=e[3],A=e[4],P=e[5],k=e[6],C=e[7],L=e[8],F=e[9],q=e[10],H=e[11];t[0]=y,t[1]=v,t[2]=b,t[3]=S,t[4]=A,t[5]=P,t[6]=k,t[7]=C,t[8]=L,t[9]=F,t[10]=q,t[11]=H,t[12]=y*s+A*l+L*f+e[12],t[13]=v*s+P*l+F*f+e[13],t[14]=b*s+k*l+q*f+e[14],t[15]=S*s+C*l+H*f+e[15]}return t}function rW(t,e,i){const s=i[0],l=i[1],f=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*l,t[5]=e[5]*l,t[6]=e[6]*l,t[7]=e[7]*l,t[8]=e[8]*f,t[9]=e[9]*f,t[10]=e[10]*f,t[11]=e[11]*f,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sW(t,e,i,s){let l=s[0],f=s[1],y=s[2],v=Math.sqrt(l*l+f*f+y*y);if(v<=Oi())return void KP(t,e);v=1/v,l*=v,f*=v,y*=v;const b=Math.sin(i),S=Math.cos(i),A=1-S,P=e[0],k=e[1],C=e[2],L=e[3],F=e[4],q=e[5],H=e[6],J=e[7],Q=e[8],tt=e[9],et=e[10],nt=e[11],vt=l*l*A+S,Tt=f*l*A+y*b,St=y*l*A-f*b,pt=l*f*A-y*b,ht=f*f*A+S,_t=y*f*A+l*b,gt=l*y*A+f*b,at=f*y*A-l*b,Lt=y*y*A+S;t[0]=P*vt+F*Tt+Q*St,t[1]=k*vt+q*Tt+tt*St,t[2]=C*vt+H*Tt+et*St,t[3]=L*vt+J*Tt+nt*St,t[4]=P*pt+F*ht+Q*_t,t[5]=k*pt+q*ht+tt*_t,t[6]=C*pt+H*ht+et*_t,t[7]=L*pt+J*ht+nt*_t,t[8]=P*gt+F*at+Q*Lt,t[9]=k*gt+q*at+tt*Lt,t[10]=C*gt+H*at+et*Lt,t[11]=L*gt+J*at+nt*Lt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function nW(t,e,i){const s=Math.sin(i),l=Math.cos(i),f=e[4],y=e[5],v=e[6],b=e[7],S=e[8],A=e[9],P=e[10],k=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=f*l+S*s,t[5]=y*l+A*s,t[6]=v*l+P*s,t[7]=b*l+k*s,t[8]=S*l-f*s,t[9]=A*l-y*s,t[10]=P*l-v*s,t[11]=k*l-b*s,t}function oW(t,e,i){const s=Math.sin(i),l=Math.cos(i),f=e[0],y=e[1],v=e[2],b=e[3],S=e[8],A=e[9],P=e[10],k=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=f*l-S*s,t[1]=y*l-A*s,t[2]=v*l-P*s,t[3]=b*l-k*s,t[8]=f*s+S*l,t[9]=y*s+A*l,t[10]=v*s+P*l,t[11]=b*s+k*l,t}function aW(t,e,i){const s=Math.sin(i),l=Math.cos(i),f=e[0],y=e[1],v=e[2],b=e[3],S=e[4],A=e[5],P=e[6],k=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=f*l+S*s,t[1]=y*l+A*s,t[2]=v*l+P*s,t[3]=b*l+k*s,t[4]=S*l-f*s,t[5]=A*l-y*s,t[6]=P*l-v*s,t[7]=k*l-b*s,t}function lW(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function uW(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QP(t,e,i){if(e===0)return F2(t);let s=i[0],l=i[1],f=i[2],y=Math.sqrt(s*s+l*l+f*f);if(y<=Oi())return null;y=1/y,s*=y,l*=y,f*=y;const v=Math.sin(e),b=Math.cos(e),S=1-b;return t[0]=s*s*S+b,t[1]=l*s*S+f*v,t[2]=f*s*S-l*v,t[3]=0,t[4]=s*l*S-f*v,t[5]=l*l*S+b,t[6]=f*l*S+s*v,t[7]=0,t[8]=s*f*S+l*v,t[9]=l*f*S-s*v,t[10]=f*f*S+b,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hW(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cW(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pW(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tO(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=s+s,b=l+l,S=f+f,A=s*v,P=s*b,k=s*S,C=l*b,L=l*S,F=f*S,q=y*v,H=y*b,J=y*S;return t[0]=1-(C+F),t[1]=P+J,t[2]=k-H,t[3]=0,t[4]=P-J,t[5]=1-(A+F),t[6]=L+q,t[7]=0,t[8]=k+H,t[9]=L-q,t[10]=1-(A+C),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function fW(t,e){const i=dW,s=-e[0],l=-e[1],f=-e[2],y=e[3],v=e[4],b=e[5],S=e[6],A=e[7],P=s*s+l*l+f*f+y*y;return P>0?(i[0]=2*(v*y+A*s+b*f-S*l)/P,i[1]=2*(b*y+A*l+S*s-v*f)/P,i[2]=2*(S*y+A*f+v*l-b*s)/P):(i[0]=2*(v*y+A*s+b*f-S*l),i[1]=2*(b*y+A*l+S*s-v*f),i[2]=2*(S*y+A*f+v*l-b*s)),tO(t,e,i),t}const dW=Mt();function yW(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function gW(t,e){const i=e[0],s=e[1],l=e[2],f=e[4],y=e[5],v=e[6],b=e[8],S=e[9],A=e[10];return t[0]=Math.sqrt(i*i+s*s+l*l),t[1]=Math.sqrt(f*f+y*y+v*v),t[2]=Math.sqrt(b*b+S*S+A*A),t}function mW(t,e){const i=e[0]+e[5]+e[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t}function vW(t,e,i,s){const l=e[0],f=e[1],y=e[2],v=e[3],b=l+l,S=f+f,A=y+y,P=l*b,k=l*S,C=l*A,L=f*S,F=f*A,q=y*A,H=v*b,J=v*S,Q=v*A,tt=s[0],et=s[1],nt=s[2];return t[0]=(1-(L+q))*tt,t[1]=(k+Q)*tt,t[2]=(C-J)*tt,t[3]=0,t[4]=(k-Q)*et,t[5]=(1-(P+q))*et,t[6]=(F+H)*et,t[7]=0,t[8]=(C+J)*nt,t[9]=(F-H)*nt,t[10]=(1-(P+L))*nt,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function wW(t,e,i,s,l){const f=e[0],y=e[1],v=e[2],b=e[3],S=f+f,A=y+y,P=v+v,k=f*S,C=f*A,L=f*P,F=y*A,q=y*P,H=v*P,J=b*S,Q=b*A,tt=b*P,et=s[0],nt=s[1],vt=s[2],Tt=l[0],St=l[1],pt=l[2],ht=(1-(F+H))*et,_t=(C+tt)*et,gt=(L-Q)*et,at=(C-tt)*nt,Lt=(1-(k+H))*nt,Yt=(q+J)*nt,Dt=(L+Q)*vt,Jt=(q-J)*vt,ui=(1-(k+F))*vt;return t[0]=ht,t[1]=_t,t[2]=gt,t[3]=0,t[4]=at,t[5]=Lt,t[6]=Yt,t[7]=0,t[8]=Dt,t[9]=Jt,t[10]=ui,t[11]=0,t[12]=i[0]+Tt-(ht*Tt+at*St+Dt*pt),t[13]=i[1]+St-(_t*Tt+Lt*St+Jt*pt),t[14]=i[2]+pt-(gt*Tt+Yt*St+ui*pt),t[15]=1,t}function bW(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=i+i,v=s+s,b=l+l,S=i*y,A=s*y,P=s*v,k=l*y,C=l*v,L=l*b,F=f*y,q=f*v,H=f*b;return t[0]=1-P-L,t[1]=A+H,t[2]=k-q,t[3]=0,t[4]=A-H,t[5]=1-S-L,t[6]=C+F,t[7]=0,t[8]=k+q,t[9]=C-F,t[10]=1-S-P,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _W(t,e,i,s,l,f,y){const v=1/(i-e),b=1/(l-s),S=1/(f-y);return t[0]=2*f*v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*f*b,t[6]=0,t[7]=0,t[8]=(i+e)*v,t[9]=(l+s)*b,t[10]=(y+f)*S,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*f*2*S,t[15]=0,t}function xW(t,e,i,s,l){const f=1/Math.tan(e/2);let y;return t[0]=f/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,l!=null&&l!==1/0?(y=1/(s-l),t[10]=(l+s)*y,t[14]=2*l*s*y):(t[10]=-1,t[14]=-2*s),t}function SW(t,e,i,s){const l=Math.tan(e.upDegrees*Math.PI/180),f=Math.tan(e.downDegrees*Math.PI/180),y=Math.tan(e.leftDegrees*Math.PI/180),v=Math.tan(e.rightDegrees*Math.PI/180),b=2/(y+v),S=2/(l+f);return t[0]=b,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=S,t[6]=0,t[7]=0,t[8]=-(y-v)*b*.5,t[9]=(l-f)*S*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t}function TW(t,e,i,s,l,f,y){const v=1/(e-i),b=1/(s-l),S=1/(f-y);return t[0]=-2*v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*b,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*S,t[11]=0,t[12]=(e+i)*v,t[13]=(l+s)*b,t[14]=(y+f)*S,t[15]=1,t}function MW(t,e,i,s){const l=e[0],f=e[1],y=e[2];let v=l-i[0],b=f-i[1],S=y-i[2];const A=Oi();if(Math.abs(v)<A&&Math.abs(b)<A&&Math.abs(S)<A)return void F2(t);let P=1/Math.sqrt(v*v+b*b+S*S);v*=P,b*=P,S*=P;const k=s[0],C=s[1],L=s[2];let F=C*S-L*b,q=L*v-k*S,H=k*b-C*v;P=Math.sqrt(F*F+q*q+H*H),P?(P=1/P,F*=P,q*=P,H*=P):(F=0,q=0,H=0);let J=b*H-S*q,Q=S*F-v*H,tt=v*q-b*F;P=Math.sqrt(J*J+Q*Q+tt*tt),P?(P=1/P,J*=P,Q*=P,tt*=P):(J=0,Q=0,tt=0),t[0]=F,t[1]=J,t[2]=v,t[3]=0,t[4]=q,t[5]=Q,t[6]=b,t[7]=0,t[8]=H,t[9]=tt,t[10]=S,t[11]=0,t[12]=-(F*l+q*f+H*y),t[13]=-(J*l+Q*f+tt*y),t[14]=-(v*l+b*f+S*y),t[15]=1}function EW(t,e,i,s){const l=e[0],f=e[1],y=e[2],v=s[0],b=s[1],S=s[2];let A=l-i[0],P=f-i[1],k=y-i[2],C=A*A+P*P+k*k;C>0&&(C=1/Math.sqrt(C),A*=C,P*=C,k*=C);let L=b*k-S*P,F=S*A-v*k,q=v*P-b*A;return C=L*L+F*F+q*q,C>0&&(C=1/Math.sqrt(C),L*=C,F*=C,q*=C),t[0]=L,t[1]=F,t[2]=q,t[3]=0,t[4]=P*q-k*F,t[5]=k*L-A*q,t[6]=A*F-P*L,t[7]=0,t[8]=A,t[9]=P,t[10]=k,t[11]=0,t[12]=l,t[13]=f,t[14]=y,t[15]=1,t}function $W(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function AW(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function IW(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function eO(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function PW(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function OW(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t}function kW(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function RW(t,e){if(t===e)return!0;const i=t[0],s=t[1],l=t[2],f=t[3],y=t[4],v=t[5],b=t[6],S=t[7],A=t[8],P=t[9],k=t[10],C=t[11],L=t[12],F=t[13],q=t[14],H=t[15],J=e[0],Q=e[1],tt=e[2],et=e[3],nt=e[4],vt=e[5],Tt=e[6],St=e[7],pt=e[8],ht=e[9],_t=e[10],gt=e[11],at=e[12],Lt=e[13],Yt=e[14],Dt=e[15],Jt=Oi();return Math.abs(i-J)<=Jt*Math.max(1,Math.abs(i),Math.abs(J))&&Math.abs(s-Q)<=Jt*Math.max(1,Math.abs(s),Math.abs(Q))&&Math.abs(l-tt)<=Jt*Math.max(1,Math.abs(l),Math.abs(tt))&&Math.abs(f-et)<=Jt*Math.max(1,Math.abs(f),Math.abs(et))&&Math.abs(y-nt)<=Jt*Math.max(1,Math.abs(y),Math.abs(nt))&&Math.abs(v-vt)<=Jt*Math.max(1,Math.abs(v),Math.abs(vt))&&Math.abs(b-Tt)<=Jt*Math.max(1,Math.abs(b),Math.abs(Tt))&&Math.abs(S-St)<=Jt*Math.max(1,Math.abs(S),Math.abs(St))&&Math.abs(A-pt)<=Jt*Math.max(1,Math.abs(A),Math.abs(pt))&&Math.abs(P-ht)<=Jt*Math.max(1,Math.abs(P),Math.abs(ht))&&Math.abs(k-_t)<=Jt*Math.max(1,Math.abs(k),Math.abs(_t))&&Math.abs(C-gt)<=Jt*Math.max(1,Math.abs(C),Math.abs(gt))&&Math.abs(L-at)<=Jt*Math.max(1,Math.abs(L),Math.abs(at))&&Math.abs(F-Lt)<=Jt*Math.max(1,Math.abs(F),Math.abs(Lt))&&Math.abs(q-Yt)<=Jt*Math.max(1,Math.abs(q),Math.abs(Yt))&&Math.abs(H-Dt)<=Jt*Math.max(1,Math.abs(H),Math.abs(Dt))}function CW(t){const e=Oi(),i=t[0],s=t[1],l=t[2],f=t[4],y=t[5],v=t[6],b=t[8],S=t[9],A=t[10];return Math.abs(1-(i*i+f*f+b*b))<=e&&Math.abs(1-(s*s+y*y+S*S))<=e&&Math.abs(1-(l*l+v*v+A*A))<=e}function NW(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const LW=XP,DW=eO;Object.freeze(Object.defineProperty({__proto__:null,add:IW,adjoint:tW,copy:KP,determinant:eW,equals:RW,exactEquals:kW,frob:AW,fromQuat:bW,fromQuat2:fW,fromRotation:QP,fromRotationTranslation:tO,fromRotationTranslationScale:vW,fromRotationTranslationScaleOrigin:wW,fromScaling:uW,fromTranslation:lW,fromXRotation:hW,fromYRotation:cW,fromZRotation:pW,frustum:_W,getRotation:mW,getScale:gW,getTranslation:yW,hasIdentityRotation:NW,identity:F2,invert:ZP,invertOrIdentity:QH,isOrthoNormal:CW,lookAt:MW,mul:LW,multiply:XP,multiplyScalar:PW,multiplyScalarAndAdd:OW,ortho:TW,perspective:xW,perspectiveFromFieldOfView:SW,rotate:sW,rotateX:nW,rotateY:oW,rotateZ:aW,scale:rW,set:Ql,str:$W,sub:DW,subtract:eO,targetTo:EW,translate:iW,transpose:tu},Symbol.toStringTag,{value:"Module"}));const jW=(t,e)=>{const i=Ql(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return tu(i,i)},FW=(t,e)=>{const i=Ql(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return tu(i,i)},zW=(t,e)=>{const i=1-e,s=Ql(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return tu(s,s)},UW=(t,e)=>{const i=Math.sin(e*Math.PI/180),s=Math.cos(e*Math.PI/180),l=Ql(t,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return tu(l,l)},GW=(t,e)=>{const i=1-2*e,s=Ql(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return tu(s,s)},BW=(t,e)=>{const i=Ql(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return tu(i,i)},qW=(t,e)=>{const i=1-e,s=Ql(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return tu(s,s)};let iO=class rO{constructor(e,i,s){this.strength=e,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(e,i,s){this.strength=ns(e.strength,i.strength,s),this.radius=ns(e.radius,i.radius,s),this.threshold=ns(e.threshold,i.threshold,s)}clone(){return new rO(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:sd(this.radius),strength:this.strength,threshold:this.threshold}}},sO=class nO{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,s){this.radius=Math.round(ns(e.radius,i.radius,s))}clone(){return new nO(this.radius)}toJSON(){return{type:"blur",radius:sd(this.radius)}}},Sb=class oO{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.amount=ns(e.amount,i.amount,s),this._updateMatrix()}clone(){return new oO(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||D2();switch(this.type){case"brightness":this._colorMatrix=jW(e,this.amount);break;case"contrast":this._colorMatrix=FW(e,this.amount);break;case"grayscale":this._colorMatrix=zW(e,this.amount);break;case"invert":this._colorMatrix=GW(e,this.amount);break;case"saturate":this._colorMatrix=BW(e,this.amount);break;case"sepia":this._colorMatrix=qW(e,this.amount)}}},aO=class lO{constructor(e,i,s,l){this.offsetX=e,this.offsetY=i,this.blurRadius=s,this.color=l,this.type="drop-shadow"}interpolate(e,i,s){this.offsetX=ns(e.offsetX,i.offsetX,s),this.offsetY=ns(e.offsetY,i.offsetY,s),this.blurRadius=ns(e.blurRadius,i.blurRadius,s),this.color[0]=Math.round(ns(e.color[0],i.color[0],s)),this.color[1]=Math.round(ns(e.color[1],i.color[1],s)),this.color[2]=Math.round(ns(e.color[2],i.color[2],s)),this.color[3]=ns(e.color[3],i.color[3],s)}clone(){return new lO(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:sd(this.offsetX),yoffset:sd(this.offsetY),blurRadius:sd(this.blurRadius),color:e}}},uO=class hO{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.angle=ns(e.angle,i.angle,s),this._updateMatrix()}clone(){return new hO(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||D2();this._colorMatrix=UW(e,this.angle)}},cO=class pO{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,s){this.amount=ns(e.amount,i.amount,s)}clone(){return new pO(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function ns(t,e,i){return t+(e-t)*i}function sd(t){return Math.round(1e3*Jl(t))/1e3}function VW(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new Sb(t.type,0);case"saturate":case"brightness":case"contrast":return new Sb(t.type,1);case"opacity":return new cO(1);case"hue-rotate":return new uO(0);case"blur":return new sO(0);case"drop-shadow":return new aO(0,0,0,[...Q_("transparent")]);case"bloom":return new iO(0,0,1)}}function HW(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every(((s,l)=>s.type===i[l].type))}function WW(t,e){const i=t.length>e.length?t:e,s=t.length>e.length?e:t;for(let l=s.length;l<i.length;l++)s.push(VW(i[l]))}function JW(t){const e=t[0];return!!e&&"type"in e}const s3=()=>At.getLogger("esri.support.basemapUtils");function YW(){return{}}function KW(t){for(const e in t){const i=t[e];ze(i),delete t[e]}}function ZW(t,e){let i;if(typeof t=="string"){const s=t in Zw,l=!s&&t.includes("/");if(!s&&!l){if(mw())s3().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const f=Object.entries(Zw).filter((([y,v])=>v.classic||v.is3d)).map((([y])=>`"${y}"`)).sort().join(", ");s3().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${f}`)}return null}e&&(i=e[t]),i||(i=s?Q0.fromId(t):new Q0({style:{id:t}}),e&&(e[t]=i))}else i=Vr(Q0,t);return i?.destroyed&&(s3().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function XW(t){return new mo({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function n3(t){for(const e of t.values())e?.destroy();t.clear()}const W8={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function QW(t){let e=null;if(typeof t=="string")if(t in W8){const i=W8[t];e=new mm({resourceInfo:{data:{layers:[i]}}})}else At.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Vr(mm,t);return e}let fO=0;const dO=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+fO++})}};return e=_([Y("esri.core.Identifiable")],e),e},tJ=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:fO++})}};return e=_([Y("esri.core.Identifiable.NumericIdentifiable")],e),e};let l0=class extends dO(class{}){};l0=_([Y("esri.core.Identifiable")],l0),(function(t){t.IdentifiableMixin=dO,t.NumericIdentifiableMixin=tJ})(l0||(l0={}));const m1=l0;async function eJ(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await mt(async()=>{const{fromItem:s}=await import("./portalLayers-olaJRqaI.js");return{fromItem:s}},__vite__mapDeps([24,22,21,20,23,1,2,3,4]));try{return await i(e)}catch(s){const l=e?.portalItem,f=l?.id||"unset",y=l?.portal?.url||pe.portalUrl;throw At.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+f+"')",s),s}}const J8={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function o3(t,e,i,s=Eo){const l=new Wn(Z_(s)),f=Bt.fromJSDate(t,{zone:l}),y=i==="decades"||i==="centuries"?"year":yO(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),f.plus({[y]:e}).toJSDate()}function wyt(t,e,i="milliseconds"){const s=t.getTime(),l=iJ(e,i,"milliseconds");return new Date(s+l)}function Y8(t,e,i=Eo){const s=new Wn(Z_(i)),l=Bt.fromJSDate(t,{zone:s});if(e==="decades"||e==="centuries"){const y=l.startOf("year"),{year:v}=y,b=v-v%(e==="decades"?10:100);return y.set({year:b}).toJSDate()}const f=yO(e);return l.startOf(f).toJSDate()}function iJ(t,e,i){return t===0?0:t*J8[e]/J8[i]}function rJ(t,e){return t&&e?t.intersection(e):t||e}function yO(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var zs,Jc;let ur=(Jc=class extends It{static get allTime(){return K8}static get empty(){return sJ}static fromArray(e){return new zs({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=e?.getTime()??null}get isAllTime(){return this.equals(zs.allTime)}get isEmpty(){return this.equals(zs.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=e?.getTime()??null}clone(){return new zs({end:this.end,start:this.start})}equals(e){if(!e)return!1;const i=this.start?.getTime()??this.start,s=this.end?.getTime()??this.end,l=e.start?.getTime()??e.start,f=e.end?.getTime()??e.end;return i===l&&s===f}expandTo(e,i=Eo){if(this.isEmpty||this.isAllTime)return this.clone();let s=this.start;s&&(s=Y8(s,e,i));let l=this.end;if(l){const f=Y8(l,e,i);l=l.getTime()===f.getTime()?f:o3(f,1,e,i)}return new zs({start:s,end:l})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return zs.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=this.start?.getTime()??-1/0,s=this.end?.getTime()??1/0,l=e.start?.getTime()??-1/0,f=e.end?.getTime()??1/0;let y,v;return l>=i&&l<=s?y=l:i>=l&&i<=f&&(y=i),s>=l&&s<=f?v=s:f>=i&&f<=s&&(v=f),y==null||v==null||isNaN(y)||isNaN(v)?zs.empty:new zs({start:y===-1/0?null:new Date(y),end:v===1/0?null:new Date(v)})}offset(e,i,s=Eo){if(this.isEmpty||this.isAllTime)return this.clone();const l=new zs,{start:f,end:y}=this;return f!=null&&(l.start=o3(f,e,i,s)),y!=null&&(l.end=o3(y,e,i,s)),l}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return K8.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,s=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new zs({start:i,end:s})}},zs=Jc,Jc);_([E({type:Date,json:{write:{allowNull:!0}}})],ur.prototype,"end",void 0),_([ae("end")],ur.prototype,"readEnd",null),_([Xt("end")],ur.prototype,"writeEnd",null),_([E({readOnly:!0,json:{read:!1}})],ur.prototype,"isAllTime",null),_([E({readOnly:!0,json:{read:!1}})],ur.prototype,"isEmpty",null),_([E({type:Date,json:{write:{allowNull:!0}}})],ur.prototype,"start",void 0),_([ae("start")],ur.prototype,"readStart",null),_([Xt("start")],ur.prototype,"writeStart",null),ur=zs=_([Y("esri.time.TimeExtent")],ur);const K8=new ur,sJ=new ur({start:void 0,end:void 0});let nJ=0,Xe=class extends fn.EventedMixin(m1.IdentifiableMixin(tn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Zt(-180,-90,180,90,Et.WGS84),this.id=Date.now().toString(16)+"-layer-"+nJ++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Et.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await mt(async()=>{const{fromUrl:s}=await import("./arcgisLayers-D7vgFMGL.js");return{fromUrl:s}},__vite__mapDeps([27,1,2,3,22,21,23,4]))).fromUrl(i)}static fromPortalItem(e){return eJ(e)}initialize(){this.when().catch((e=>{kr(e)||At.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&(e&&=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return qr(this.url)}createLayerView(e,i){return Promise.reject(new ct("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ii(e,{query:{f:"json"},responseType:"json"})).data;throw new ct("layer:no-attribution-data","Layer does not have attribution data")}};_([E({type:String})],Xe.prototype,"attributionDataUrl",void 0),_([E({readOnly:!0})],Xe.prototype,"effectiveVisible",null),_([E({type:Zt})],Xe.prototype,"fullExtent",void 0),_([E({readOnly:!0})],Xe.prototype,"hasAttributionData",null),_([E({type:String,clonable:!1})],Xe.prototype,"id",void 0),_([E({type:Boolean,nonNullable:!0})],Xe.prototype,"legendEnabled",void 0),_([E({type:["show","hide","hide-children"]})],Xe.prototype,"listMode",void 0),_([E({type:Number,range:{min:0,max:1},nonNullable:!0})],Xe.prototype,"opacity",void 0),_([E({clonable:!1})],Xe.prototype,"parent",void 0),_([E({readOnly:!0})],Xe.prototype,"parsedUrl",null),_([E({type:Boolean,readOnly:!0})],Xe.prototype,"persistenceEnabled",void 0),_([E({type:Boolean})],Xe.prototype,"popupEnabled",void 0),_([E({type:Boolean})],Xe.prototype,"attributionVisible",void 0),_([E({type:Et})],Xe.prototype,"spatialReference",void 0),_([E({type:String})],Xe.prototype,"title",void 0),_([E({readOnly:!0,json:{read:!1}})],Xe.prototype,"type",void 0),_([E()],Xe.prototype,"url",void 0),_([E({type:ur})],Xe.prototype,"visibilityTimeExtent",void 0),_([E({type:Boolean,nonNullable:!0})],Xe.prototype,"visible",void 0),Xe=_([Y("esri.layers.Layer")],Xe);function Tb(t,e,i){let s,l;if(t)for(let f=0,y=t.length;f<y;f++){if(s=t.at(f),s?.[e]===i)return s;if(s?.type==="group"&&(l=Tb(s.layers,e,i),l))return l}}const oJ=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new kt;const s=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},l=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||At.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},f=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",(y=>{if(y.item===this)return y.preventDefault(),void At.getLogger(this).error("#add()","Cannot add layer to itself.");s(y.item)})),this.layers.on("after-add",(y=>l(y.item))),this.layers.on("after-remove",(y=>f(y.item)))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",Ea(i,this._get("layers")))}add(i,s){const l=this.layers;if(s=l.getNextIndex(s),i instanceof Xe){const f=i;f.parent===this?this.reorder(f,s):l.add(f,s)}else Oo(i)?i.then((f=>{this.destroyed||this.add(f,s)})):At.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const l=this.layers;let f=l.getNextIndex(s);i.slice().forEach((y=>{y.parent!==this?(l.add(y,f),f+=1):this.reorder(y,f)}))}findLayerById(i){return Tb(this.layers,"id",i)}findLayerByUid(i){return Tb(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return _([E()],e.prototype,"layers",null),e=_([Y("esri.support.LayersMixin")],e),e},aJ=new Set(["feature","subtype-group"]);function Mb(t,e,i){if(t)for(let s=0,l=t.length;s<l;s++){const f=t.at(s);if(f[e]===i)return f;if(f?.type==="group"){const y=Mb(f.tables,e,i);if(y)return y}}}const lJ=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new kt,this.addHandles([this.tables.on("after-add",(s=>{const l=s.item;l.parent&&l.parent!==this&&"tables"in l.parent&&l.parent.tables.remove(l),l.parent=this,aJ.has(l.type)||At.getLogger(this).error(`Layer 'title:${l.title}, id:${l.id}' of type '${l.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(s=>{s.item.parent=null}))])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",Ea(i,this._get("tables")))}findTableById(i){return Mb(this.tables,"id",i)}findTableByUid(i){return Mb(this.tables,"uid",i)}};return _([E()],e.prototype,"tables",null),e=_([Y("esri.support.TablesMixin")],e),e};let Us=class extends lJ(oJ(fn.EventedMixin(Ot))){constructor(e){super(e),this.allLayers=new mo({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new WP,this.allTables=XW(this),this.basemap=null,this.editableLayers=new mo({getCollections:()=>[this.allLayers],itemFilterFunction:JP}),this.ground=new mm,this._basemapCache=YW()}destroy(){KW(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=ze(this.basemap),ze(this.ground),this._set("ground",null)}castBasemap(e){return ZW(e,this._basemapCache)}castGround(e){return QW(e)??this._get("ground")}findLayerById(e){return this.allLayers.find((i=>i.id===e))}findTableById(e){return this.allTables.find((i=>i.id===e))}};_([E({readOnly:!0,dependsOn:[]})],Us.prototype,"allLayers",void 0),_([E({type:WP,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Us.prototype,"focusAreas",void 0),_([E({readOnly:!0})],Us.prototype,"allTables",void 0),_([E({type:Q0,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Us.prototype,"basemap",void 0),_([Ui("basemap")],Us.prototype,"castBasemap",null),_([E({readOnly:!0})],Us.prototype,"editableLayers",void 0),_([E({type:mm,nonNullable:!0})],Us.prototype,"ground",void 0),_([Ui("ground")],Us.prototype,"castGround",null),_([E()],Us.prototype,"undoRedo",void 0),Us=_([Y("esri.Map")],Us);const gO=Us;let wu=class extends Ei{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wu.prototype,"row",void 0),_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wu.prototype,"column",void 0),_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wu.prototype,"rows",void 0),_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],wu.prototype,"columns",void 0),wu=_([Y("esri.CameraLayout")],wu);const mO=wu;let z2=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,s=!1){return Z8(this.range,this.min,this.max,e,i,s)}clamp(e,i=0){return Rr(e-i,this.min,this.max)+i}monotonic(e,i,s){return e<i?i:i+Eb(this.range,e-i,s)}minimalMonotonic(e,i,s){return Z8(this.range,e,e+this.range,i,s)}center(e,i,s){return i=this.monotonic(e,i,s),this.normalize((e+i)/2,s)}diff(e,i,s){return this.monotonic(e,i,s)-e}shortestSignedDiff(e,i){e=this.normalize(e);const s=(i=this.normalize(i))-e,l=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(s)<Math.abs(l)?s:l}contains(e,i,s){return i=this.minimalMonotonic(e,i),(s=this.minimalMonotonic(e,s))>e&&s<i}};function Z8(t,e,i,s,l=0,f=!1){return(s-=l)<e?s+=Eb(t,e-s):s>i&&(s-=Eb(t,s-i)),f&&s===i&&(s=e),s+l}function Eb(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const Tyt=new z2(0,2*Math.PI),Myt=new z2(-Math.PI,Math.PI),vO=new z2(0,360);let eo=class extends Ei.ClonableMixin(It){constructor(...e){super(...e),this.position=new Ct([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new mO}normalizeCtorArgs(e,i,s,l){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const f={position:e};return i!=null&&(f.heading=i),s!=null&&(f.tilt=s),l!=null&&(f.fov=l),f}return e}writePosition(e,i,s,l){const f=e.clone();f.x=Ts(e.x||0),f.y=Ts(e.y||0),f.z=e.hasZ?Ts(e.z||0):e.z,i[s]=f.write({},l)}readPosition(e,i){const s=new Ct;return s.read(e,i),s.x=Ts(s.x||0),s.y=Ts(s.y||0),s.z=s.hasZ?Ts(s.z||0):s.z,s}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};_([E({type:Ct,json:{write:{isRequired:!0}}})],eo.prototype,"position",void 0),_([Xt("position")],eo.prototype,"writePosition",null),_([ae("position")],eo.prototype,"readPosition",null),_([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ui((t=>vO.normalize(Ts(t))))],eo.prototype,"heading",void 0),_([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ui((t=>Rr(Ts(t),-180,180)))],eo.prototype,"tilt",void 0),_([E({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ui((t=>Rr(Ts(t,55),1,170)))],eo.prototype,"fov",void 0),_([E({type:mO,nonNullable:!0,json:{read:!1,write:!1}})],eo.prototype,"layout",void 0),eo=_([Y("esri.Camera")],eo);const uJ=eo;function wO(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function bO(t){return t.points!==void 0}function _O(t){return t.x!==void 0&&t.y!==void 0}function xO(t){return t.paths!==void 0||t.curvePaths!==void 0}function f4(t){return t.rings!==void 0||t.curveRings!==void 0}function Pp(t){return t==null?null:t instanceof ir?t:_O(t)?Ct.fromJSON(t):xO(t)?ei.fromJSON(t):f4(t)?Fe.fromJSON(t):bO(t)?Ks.fromJSON(t):wO(t)?Zt.fromJSON(t):null}function d4(t){return t?_O(t)?"esriGeometryPoint":xO(t)?"esriGeometryPolyline":f4(t)?"esriGeometryPolygon":wO(t)?"esriGeometryEnvelope":bO(t)?"esriGeometryMultipoint":null:null}const hJ={esriGeometryPoint:Ct,esriGeometryPolyline:ei,esriGeometryPolygon:Fe,esriGeometryEnvelope:Zt,esriGeometryMultipoint:Ks,esriGeometryMultiPatch:Fe};function cJ(t){return t&&hJ[t]||null}const pJ=Hr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),$yt=Hr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),y4={base:ir,key:"type",typeMap:{extent:Zt,multipoint:Ks,point:Ct,polyline:ei,polygon:Fe}};var $b;let Ja=$b=class extends It{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new $b({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};_([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:a3}}}}})],Ja.prototype,"rotation",void 0),_([Ui("rotation")],Ja.prototype,"castRotation",null),_([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:a3}}}}})],Ja.prototype,"scale",void 0),_([E({types:y4,json:{read:Pp,write:!0,origins:{"web-scene":{read:Pp,write:{overridePolicy:a3}}}}})],Ja.prototype,"targetGeometry",void 0),_([E({type:uJ,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Ja.prototype,"camera",void 0),Ja=$b=_([Y("esri.Viewpoint")],Ja);const an=Ja;function a3(){return{enabled:!this.camera}}let kd=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new l1,this._items=new Set}get length(){return Ft(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ft(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach((s=>{e(s)||this._items.delete(s)})),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ft(this._observable),yield*this._items}};const SO=new FinalizationRegistry((t=>{t.close()}));function fJ(t,e){SO.register(t,e,e)}function dJ(t){SO.unregister(t)}function TO(t,e){return new Proxy({},{get:(i,s,l)=>(...f)=>{let y,v;const b=f[f.length-1];return yJ(b)&&(y=b.signal,v=b.transferList,f.pop()),t.apply(e?`${e}.${s.toString()}`:s.toString(),f,{transferList:v,signal:y})}})}function yJ(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const gJ={statsWorker:()=>mt(()=>import("./statsWorker-Bzy18Yge.js"),__vite__mapDeps([28,29,30,31,32,33,34,1,2,3,4])),geometryEngineWorker:()=>mt(()=>import("./geometryEngineWorker-C0Q_IlkF.js"),__vite__mapDeps([35,36,37,1,2,3,4])),arcadeGeometryOperatorsWorker:()=>mt(()=>import("./operatorsWorker-C3HbbeXC.js"),__vite__mapDeps([38,1,2,3,4])),CSVSourceWorker:()=>mt(()=>import("./CSVSourceWorker-C5iKy1Cl.js"),__vite__mapDeps([39,40,37,41,15,42,43,1,2,3,44,45,46,47,13,14,48,49,50,51,4,52,53,30,29,31,32,33,34,54,55,56,57,58,59,60,61,62,63,64])),EdgeProcessingWorker:()=>mt(()=>import("./EdgeProcessingWorker-BJ5bWNRA.js"),__vite__mapDeps([65,66,67,68,69,70,71,72,73,74,75,76,1,2,3,4])),ElevationSamplerWorker:()=>mt(()=>import("./ElevationSamplerWorker-TWZrSz0Q.js"),__vite__mapDeps([77,60,78,79,80,81,82,68,83,1,2,3,4])),FeatureServiceSnappingSourceWorker:()=>mt(()=>import("./FeatureServiceSnappingSourceWorker-QXzMtaaz.js"),__vite__mapDeps([84,42,43,1,2,3,37,44,45,41,15,46,47,13,14,48,49,50,51,4,52,53,30,29,31,32,33,34,54,55,56,57,58,59,60,61,85,86,87,88,89,12])),GeoJSONSourceWorker:()=>mt(()=>import("./GeoJSONSourceWorker-WuHGbE6f.js"),__vite__mapDeps([90,45,41,15,46,42,43,1,2,3,37,44,47,13,14,48,49,50,51,4,52,53,30,29,31,32,33,34,54,55,56,57,58,59,60,61,91,40,63,64,92])),LercWorker:()=>mt(()=>import("./LercWorker-DxAcjVas.js"),__vite__mapDeps([93,1,2,3,4])),MemorySourceWorker:()=>mt(()=>import("./MemorySourceWorker-yRvSmJ7o.js"),__vite__mapDeps([94,45,41,15,46,95,42,43,1,2,3,37,44,47,13,14,48,49,50,51,4,52,53,30,29,31,32,33,34,54,55,56,57,58,59,60,61,63,64,92,40])),PBFDecoderWorker:()=>mt(()=>import("./PBFDecoderWorker-XXJcgFS7.js"),__vite__mapDeps([96,97,15,45,41,46,86,87,1,2,3,4])),FeaturePipelineWorker:()=>mt(()=>import("./FeaturePipelineWorker-CuWt9j3V.js"),__vite__mapDeps([98,99,100,101,102,75,103,104,49,50,51,57,105,106,1,2,3,107,108,109,43,37,52,45,41,15,46,110,111,112,113,114,115,116,64,30,117,118,119,120,121,122,7,4,61,44,47,13,14,48,53,29,31,32,33,34,54,55,56,123,124,125,88,86,87,89,126,127,91,40,63,92,128,129,130])),PointCloudWorker:()=>mt(()=>import("./PointCloudWorker-B_YAyIz9.js"),__vite__mapDeps([131,132,133,134,135,136,137,73,138,80,1,2,3,4])),RasterWorker:()=>mt(()=>import("./RasterWorker-DrCeMPhU.js"),__vite__mapDeps([139,140,141,142,1,2,3,143,144,145,146,147,148,4])),SceneLayerSnappingSourceWorker:()=>mt(()=>import("./SceneLayerSnappingSourceWorker-CUJELFfq.js"),__vite__mapDeps([149,150,68,70,71,72,67,69,73,74,75,76,1,2,3,4])),SceneLayerWorker:()=>mt(()=>import("./SceneLayerWorker-CSynk6iY.js"),__vite__mapDeps([151,1,2,3,78,82,152,137,73,153,114,154,155,156,157,138,132,80,4])),WFSSourceWorker:()=>mt(()=>import("./WFSSourceWorker-DHgNQIwi.js"),__vite__mapDeps([158,45,41,15,46,42,43,1,2,3,37,44,47,13,14,48,49,50,51,4,52,53,30,29,31,32,33,34,54,55,56,57,58,59,60,61,91,40,92,159,160])),WorkerTileHandler:()=>mt(()=>import("./WorkerTileHandler-BUeLMXV6.js"),__vite__mapDeps([161,162,112,115,163,164,108,87,15,122,1,2,3,165,166,75,143,111,4])),Lyr3DWorker:()=>mt(()=>import("./Lyr3DWorker-DxoWcX7u.js"),__vite__mapDeps([167,1,2,3,4])),Feature3DPipelineWorker:()=>mt(()=>import("./Feature3DPipelineWorker-aWw-CeiR.js"),__vite__mapDeps([168,44,45,41,15,46,47,13,14,48,49,50,51,1,2,3,4,52,43,37,53,30,29,31,32,33,34,54,55,56,57,169,170,171,172,147,136,173,174,175,116,64,135,118,104,106,107,108,176,177,99,178,179,155,81,78,180,133,181,182,183,184,185,68,72,73,157,156,186,138,132,80,187,188,189,114,67,69,190,191,192,193,154,60,88,86,87,89])),TextureCompressionWorker:()=>mt(()=>import("./TextureCompressionWorker-DoOb71-3.js"),__vite__mapDeps([194,1,2,3,185,4]))},MO="worker:port-closed";var sr;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(sr||(sr={}));let mJ=0;function EO(){return mJ++}function vJ(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function Rd(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function g4(t,e,i,s){if(e.type===sr.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==sr.INVOKE&&e.type!==sr.RESPONSE)return void t.postMessage(e);let l;if(vJ(i)?(l=X8(i.transferList),e.data=i.result):(l=X8(s),e.data=i),l){if(rt("ff")){for(const f of l)if("byteLength"in f&&f.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case sr.INVOKE:throw y;case sr.RESPONSE:return void g4(t,{type:sr.RESPONSE,jobId:e.jobId,error:Rd(y)})}}}t.postMessage(e,l)}else t.postMessage(e)}function Cd(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function X8(t){if(!t?.length)return null;if(rt("esri-workers-arraybuffer-transfer"))return t;const e=t.filter((i=>!wJ(i)));return e.length?e:null}function wJ(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function Iyt(t){try{return await t}catch(e){const i=e?.name===MO;if(!(kr(e)||i))throw e;return}}const{CLOSE:Q8,ABORT:tx,INVOKE:ex,RESPONSE:If,OPEN_PORT:ix,ON:bJ}=sr,_J=2;let xJ=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===sr.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Zs;let Op=(Zs=class{static connect(e,i){const s=new MessageChannel;let l;l=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const f=new Zs(s.port1,{channel:s,client:l,schedule:i});return typeof l=="object"&&"remoteClient"in l&&(l.remoteClient=f),Zs.clients.set(f,l),s.port2}static loadWorker(e){const i=gJ[e];return i?i():Promise.resolve(null)}constructor(e,i,s,l){this._port=e,this._jobQueue=s,this._lowPriorityJobQueue=l,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new xJ((f=>this._onInvokeMessage(f))),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:Q8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,s){return this.apply(e,[i],s)}apply(e,i,s){const l=s?.signal,f=s?.transferList;if(!this._port)return Promise.reject(new ct(MO,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const y=EO();return new Promise(((v,b)=>{if(Os(l))return this._processWork(),void b(Be());const S=Vn(l,(()=>{const P=this._outJobs.get(y);P&&(this._outJobs.delete(y),this._processWork(),ri(P.abortHandle),this._post({type:tx,jobId:y}),b(Be()))})),A={resolve:v,reject:b,abortHandle:S,debugInfo:e};this._outJobs.set(y,A),this._post({type:ex,jobId:y,methodName:e,abortable:l!=null},i,f)}))}createInvokeProxy(e){return TO(this,e)}on(e,i){const s=new MessageChannel;function l(f){i(f.data)}return this._port.postMessage({type:sr.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",l),s.port1.start(),fe((()=>{s.port1.postMessage({type:sr.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",l)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:ix,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=_J)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:i,data:s,invokeOptions:l,resolver:f}=e;this.apply(i,s,l).then((y=>f.resolve(y))).catch((y=>f.reject(y)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{ri(e.abortHandle),e.reject(Be(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule((()=>this._processMessage(e,!0))):this._processMessage(e,!1)}_processMessage(e,i){const s=Cd(e);if(s)switch(s.type){case If:this._onResponseMessage(s);break;case ex:i?this._onInvokeMessage(s):this._invokeQueue.push(s);break;case tx:this._onAbortMessage(s);break;case Q8:this._onCloseMessage();break;case ix:this._onOpenPortMessage(s);break;case bJ:this._onOnMessage(s)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,l=i.get(s);this._invokeQueue.push(e),l&&(l.controller&&l.controller.abort(),i.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Zs.clients.get(this)===e&&e.destroy(),Zs.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:s,data:l=[],abortable:f}=e,y=f?new AbortController:null,v=this._inJobs;let b,S=this._client,A=S[i];try{if(!A&&i&&i.includes(".")){const P=i.split(".");for(let k=0;k<P.length-1;k++)S=S[P[k]],A=S[P[k+1]]}if(typeof A!="function")throw new TypeError(`${i} is not a function`);l.push({client:this,signal:y?y.signal:null}),b=A.apply(S,l)}catch(P){return void this._post({type:If,jobId:s,error:Rd(P)})}Oo(b)?(v.set(s,{controller:y,promise:b}),b.then((P=>{v.has(s)&&(v.delete(s),this._post({type:If,jobId:s},P))}),(P=>{v.has(s)&&(v.delete(s),kr(P)||this._post({type:If,jobId:s,error:Rd(P||{message:`Error encountered at method ${i}`})}))}))):this._post({type:If,jobId:s},b)}_onOpenPortMessage(e){new Zs(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,s=this._client.on(e.eventType,(f=>{i.postMessage(f)})),l=Hp(e.port,"message",(f=>{Cd(f)?.type===sr.CLOSE&&(l.remove(),s.remove(),i.close())}))}_onResponseMessage(e){const{jobId:i,error:s,data:l}=e,f=this._outJobs;if(!f.has(i))return;const y=f.get(i);f.delete(i),this._processWork(),ri(y.abortHandle),s?y.reject(ct.fromJSON(JSON.parse(s))):y.resolve(l)}_post(e,i,s){return g4(this._port,e,i,s)}},Zs.kernelInfo={buildDate:CE,fullVersion:d_,revision:NE},Zs.clients=new Map,Zs),SJ=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new kd,this._ongoingLowPriorityJobsQueue=new kd}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,i){return new Promise(((s,l)=>{let f=!0;const y=v=>{Ce(i.signal),f&&(f=!1,v())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let v=0;v<e.length;++v){const b=e[v];Oo(b)?this._clientPromises[v]=b.then((S=>(this._clients[v]=new Op(S,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),y(s),this._clients[v])),(()=>(y(l),null))):(this._clients[v]=new Op(b,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[v]=Promise.resolve(this._clients[v]),y(s))}}))}broadcast(e,i,s){const l=new Array(this._clientPromises.length);for(let f=0;f<this._clientPromises.length;++f){const y=this._clientPromises[f];l[f]=y.then((v=>v?.invoke(e,i,s)))}return l}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Be(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Be(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then((s=>s?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,dJ(this)}invoke(e,i,s){return this.apply(e,[i],s)}apply(e,i,s){const l=ln();(s?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:s,resolver:l});for(let f=0;f<this._clientPromises.length;f++){const y=this._clients[f];y?y.jobAdded():this._clientPromises[f].then((v=>v?.jobAdded()))}return l.promise}createInvokeProxy(e){return TO(this,e)}on(e,i){return Promise.all(this._clientPromises).then((()=>Ph(this._clients.map((s=>s.on(e,i))))))}openPorts(){return new Promise((e=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let l=0;l<this._clientPromises.length;++l)this._clientPromises[l].then((f=>{f&&(i[l]=f.openPort()),--s===0&&e(i)}))}))}get test(){}};const TJ={async request(t,e){const i=t.options,s=i.responseType;i.signal=e?.signal,i.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&cw(t.url)?.after?s:"array-buffer";const l=await ii(t.url,i),f={data:l.data,httpStatus:l.httpStatus,ssl:l.ssl};switch(l.requestOptions?.responseType){case"native-request-init":return delete f.data.signal,f;case"blob":f.data=await f.data.arrayBuffer();break;case"json":f.data=new TextEncoder().encode(JSON.stringify(f.data)).buffer;break;case"text":f.data=new TextEncoder().encode(f.data).buffer}return{result:f,transferList:[f.data]}}},rx={};function MJ(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...rx.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=rx.baseUrl),e}let EJ=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((i=>{this[i]=(...s)=>e[i](...s)}))}},rg=class{constructor(){this._dispatcher=new EJ,this._workerPostMessage({type:sr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){vp((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,s){this._dispatcher.addEventListener(e,i,s)}removeEventListener(e,i,s){this._dispatcher.removeEventListener(e,i,s)}_workerPostMessage(e){vp((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const i=Cd(e);if(i&&i.type===sr.OPEN){const{modulePath:s,jobId:l}=i;let f=await Op.loadWorker(s);f||(f=await import(s));const y=Op.connect(f);this._workerPostMessage({type:sr.OPENED,jobId:l,data:y})}}};const Ab=()=>At.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:$J}=sr,AJ='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Z1,X1;const sx="Failed to create Worker. Fallback to execute module in main thread";async function IJ(){if(!rt("esri-workers"))return nx(new rg);if(!Z1&&!X1)try{const e=AJ.split("{CONFIGURATION}").join(PJ());Z1=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){X1=e||{}}let t;if(Z1)try{t=new Worker(Z1,{name:"esri-worker-"+OJ++})}catch{Ab().warn(sx,X1),t=new rg}else Ab().warn(sx,X1),t=new rg;return nx(t)}async function nx(t){return new Promise((e=>{function i(l){const f=Cd(l);f&&f.type===$J&&(t.removeEventListener("message",i),t.removeEventListener("error",s),e(t))}function s(l){l.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",s),Ab().warn("Failed to create Worker. Fallback to execute module in main thread",l),(t=new rg).addEventListener("message",i),t.addEventListener("error",s)}t.addEventListener("message",i),t.addEventListener("error",s)}))}function PJ(){let t;if(pe.default!=null){const l={...pe};delete l.default,t=JSON.parse(JSON.stringify(l))}else t=JSON.parse(JSON.stringify(pe));t.assetsPath=Xs(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Xs(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=on(),t.has={"esri-csp-restrictions":rt("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":rt("esri-2d-update-debug"),"esri-2d-log-updating":rt("esri-2d-log-updating"),"featurelayer-pbf":rt("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":rt("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":rt("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":rt("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":rt("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":rt("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":rt("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":rt("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":rt("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":rt("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":rt("featurelayer-snapshot-enabled"),"esri-atomics":rt("esri-atomics"),"esri-shared-array-buffer":rt("esri-shared-array-buffer"),"esri-tiles-debug":rt("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":rt("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":rt("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Xs(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Xs(t.workers.workerPath):t.workers.workerPath=Xs(_i("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=pe.workers.loaderConfig,i=MJ({baseUrl:e?.baseUrl,locale:on(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:CE,fullVersion:d_,revision:NE}})}let OJ=0;const{ABORT:ox,INVOKE:kJ,OPEN:RJ,OPENED:CJ,RESPONSE:Pf}=sr;let NJ=class $O{static async create(e){const i=await IJ();return new $O(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(s=>{s.preventDefault(),At.getLogger("esri.core.workers.WorkerOwner").error(s)}))}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:s}=i,l=EO();return new Promise(((f,y)=>{const v={resolve:f,reject:y,abortHandle:y_(s,(()=>{this._outJobs.delete(l),this._post({type:ox,jobId:l})}))};this._outJobs.set(l,v),this._post({type:RJ,jobId:l,modulePath:e})}))}_onMessage(e){const i=Cd(e);if(i)switch(i.type){case CJ:this._onOpenedMessage(i);break;case Pf:this._onResponseMessage(i);break;case ox:this._onAbortMessage(i);break;case kJ:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,l=i.get(s);l&&(l.controller&&l.controller.abort(),i.delete(s))}_onInvokeMessage(e){const{methodName:i,jobId:s,data:l,abortable:f}=e,y=f?new AbortController:null,v=this._inJobs,b=TJ[i];let S;try{if(typeof b!="function")throw new TypeError(`${i} is not a function`);S=b.call(null,l,{signal:y?y.signal:null})}catch(A){return void this._post({type:Pf,jobId:s,error:Rd(A)})}Oo(S)?(v.set(s,{controller:y,promise:S}),S.then((A=>{v.has(s)&&(v.delete(s),this._post({type:Pf,jobId:s},A))}),(A=>{v.has(s)&&(v.delete(s),A||(A={message:"Error encountered at method"+i}),kr(A)||this._post({type:Pf,jobId:s,error:Rd(A||{message:`Error encountered at method ${i}`})}))}))):this._post({type:Pf,jobId:s},S)}_onOpenedMessage(e){const{jobId:i,data:s}=e,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),ri(l.abortHandle),l.resolve(s))}_onResponseMessage(e){const{jobId:i,error:s,data:l}=e,f=this._outJobs.get(i);f&&(this._outJobs.delete(i),ri(f.abortHandle),s?f.reject(ct.fromJSON(JSON.parse(s))):f.resolve(l))}_post(e,i,s){return g4(this.worker,e,i,s)}};const ax=rt("host-browser")?Math.min(navigator.hardwareConcurrency-1,rt("workers-pool-size")??8):0;let Hu=rt("esri-mobile")?Math.min(ax,3):ax;Hu||(Hu=rt("safari")&&rt("mac")?7:2);let lx=0;const sg=[];function LJ(){AO()}async function Q1(t,e){const i=new SJ,{registryTarget:s,...l}=e;return await i.open(t,l),s&&fJ(s,i),i}async function Cyt(t,e={}){if(typeof t!="string")throw new ct("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(rt("host-webworker")&&!rt("esri-workers")&&(i="local"),i==="local"){let s=await Op.loadWorker(t);s||(s=await import(t)),Ce(e.signal);const l=e.client||s;return Q1([Op.connect(s,e.schedule)],{...e,client:l})}if(await AO(),Ce(e.signal),i==="dedicated"){const s=lx++%Hu;return Q1([await sg[s].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const s=Math.min(e.maxNumWorkers,Hu);if(s<Hu){const l=new Array(s);for(let f=0;f<s;++f){const y=lx++%Hu;l[f]=sg[y].open(t,e)}return Q1(l,e)}}return Q1(sg.map((s=>s.open(t,e))),e)}let ty=null;async function AO(){if(ty)return ty;new AbortController;const t=[];for(let e=0;e<Hu;e++){const i=NJ.create(e).then((s=>(sg[e]=s,s)));t.push(i)}return ty=Promise.all(t),ty}var Ib,Yc;let re=(Yc=class extends It{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Ib({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},Ib=Yc,Yc);_([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],re.prototype,"cols",void 0),_([E({type:Re,json:{write:!0}})],re.prototype,"level",void 0),_([E({type:String,json:{write:!0}})],re.prototype,"levelValue",void 0),_([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],re.prototype,"origin",void 0),_([E({type:Number,json:{write:!0}})],re.prototype,"resolution",void 0),_([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],re.prototype,"rows",void 0),_([E({type:Number,json:{write:!0}})],re.prototype,"scale",void 0),re=Ib=_([Y("esri.layers.support.LOD")],re);let DJ=class{constructor(e,i,s,l,f=void 0){this.id=e,this.level=i,this.row=s,this.col=l,this.extent=f}};var Ya;const ux=new Bi({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var Kc;let Vi=(Kc=class extends It{static create(e={}){const{resolutionFactor:i=1,scales:s,size:l=256,spatialReference:f=Et.WebMercator,numLODs:y=24}=e;if(!Es(f)){const k=[];if(s)for(let C=0;C<s.length;C++){const L=s[C];k.push(new re({level:C,scale:L,resolution:L}))}else{let C=5e-4;for(let L=y-1;L>=0;L--)k.unshift(new re({level:L,scale:C,resolution:C})),C*=2}return new Ya({dpi:96,lods:k,origin:new Ct(0,0,f),size:[l,l],spatialReference:f})}const v=Br(f),b=e.origin?new Ct({x:e.origin.x,y:e.origin.y,spatialReference:f}):new Ct(v?{x:v.origin[0],y:v.origin[1],spatialReference:f}:{x:0,y:0,spatialReference:f}),S=96,A=1/(ko(f)*39.37*S),P=[];if(s)for(let k=0;k<s.length;k++){const C=s[k],L=C*A;P.push(new re({level:k,scale:C,resolution:L}))}else{let k=Oh(f)?512/l*5916575275917094e-7:256/l*591657527591555e-6;const C=Math.ceil(y/i);P.push(new re({level:0,scale:k,resolution:k*A}));for(let L=1;L<C;L++){const F=k/2**i,q=F*A;P.push(new re({level:L,scale:F,resolution:q})),k=F}}return new Ya({dpi:S,lods:P,origin:b,size:[l,l],spatialReference:f})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const s=Br(e);return e.isWrappable&&!!s&&Math.abs(s.origin[0]-i.x)<=s.dx}return!1}readOrigin(e,i){return Ct.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,s=0;const l=[],f=this._levelToLOD={};e&&(i=-1/0,s=1/0,e.forEach((y=>{l.push(y.scale),i=y.scale>i?y.scale:i,s=y.scale<s?y.scale:s,f[y.level]=y}))),this._set("scales",l),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const s=Math.floor(e),l=s+1;return i[s]/(i[s]/i[l])**(e-s)}scaleToZoom(e){const i=this.scales,s=i.length-1;let l=0;for(;l<s;l++){const f=i[l],y=i[l+1];if(f<=e)return l;if(y===e)return l+1;if(f>e&&y<e)return l+Math.log(f/e)/Math.log(f/y)}return l}tileAt(e,i,s,l){const f=this.lodAt(e);if(!f)return null;let y,v;if(typeof i=="number")y=i,v=s;else if(di(i.spatialReference,this.spatialReference))y=i.x,v=i.y,l=s;else{const A=M2(i,this.spatialReference);if(A==null)return null;y=A.x,v=A.y,l=s}const b=f.resolution*this.size[0],S=f.resolution*this.size[1];return l||(l=new DJ(null,0,0,0,Gr())),l.level=e,l.row=Math.floor((this.origin.y-v)/S+.001),l.col=Math.floor((y-this.origin.x)/b+.001),this.updateTileInfo(l),l}updateTileInfo(e,i=Ya.ExtrapolateOptions.NONE){let s=this.lodAt(e.level);if(!s&&i===Ya.ExtrapolateOptions.POWER_OF_TWO){const v=this.lods[this.lods.length-1];v.level<e.level&&(s=v)}if(!s)return;const l=e.level-s.level,f=s.resolution*this.size[0]/2**l,y=s.resolution*this.size[1]/2**l;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Gr()),e.extent[0]=this.origin.x+e.col*f,e.extent[1]=this.origin.y-(e.row+1)*y,e.extent[2]=e.extent[0]+f,e.extent[3]=e.extent[1]+y}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const s=this.lodAt(i.level);if(s==null)return null;const{resolution:l}=s,f=l*this.size[0],y=l*this.size[1];return e[0]=this.origin.x+i.col*f,e[1]=this.origin.y-(i.row+1)*y,e[2]=e[0]+f,e[3]=e[1]+y,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Ya.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const s=[],l=this.lods.length-i;for(let f=0;f<l;f++){const y=f+i,{scale:v,resolution:b}=y>=0?this.lods[y]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};s.push(new re({level:f,scale:v,resolution:b}))}return new Ya({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:s})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let s=0;s<e.length;s++){const l=e[s];this._upsampleLevels[l.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/l.resolution:0},i=l}}},Ya=Kc,Kc);_([E({type:Number,json:{write:!0}})],Vi.prototype,"compressionQuality",void 0),_([E({type:Number,json:{write:!0}})],Vi.prototype,"dpi",void 0),_([E({type:String,json:{read:ux.read,write:ux.write,origins:{"web-scene":{read:!1,write:!1}}}})],Vi.prototype,"format",void 0),_([E({readOnly:!0})],Vi.prototype,"isWrappable",null),_([E({type:Ct,json:{write:!0}})],Vi.prototype,"origin",void 0),_([ae("origin")],Vi.prototype,"readOrigin",null),_([E({type:[re],value:null,json:{write:!0}})],Vi.prototype,"lods",null),_([E({readOnly:!0})],Vi.prototype,"scales",void 0),_([E({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Vi.prototype,"size",void 0),_([ae("size",["rows","cols"])],Vi.prototype,"readSize",null),_([Xt("size",{cols:{type:Re},rows:{type:Re}})],Vi.prototype,"writeSize",null),_([E({type:Et,json:{write:!0}})],Vi.prototype,"spatialReference",void 0),Vi=Ya=_([Y("esri.layers.support.TileInfo")],Vi),(function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"})(Vi||(Vi={}));const ng={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],s=e[1],l=this.values;return s>=i?l.portrait:l.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},l3={xsmall:544,small:768,medium:992,large:1200};function jJ(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function u3(t,e){return e?ng[t].valueToClassName[e].split(" "):[]}const FJ=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=l3}initialize(){this.addHandles(zt((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),Pr))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!jJ(i)){const s=JSON.stringify(l3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),i=l3}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=zr.acquire(),s=zr.acquire();let l,f=!1;for(l in ng){const y=this[l],v=ng[l].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==v&&(f=!0,this[l]=v,u3(l,y).forEach((b=>s.push(b))),u3(l,v).forEach((b=>i.push(b))))}f&&(this._applyClassNameChanges(i,s),zr.release(i),zr.release(s))}_applyClassNameChanges(i,s){const l=this.container;l&&(s.forEach((f=>l.classList.remove(f))),i.forEach((f=>l.classList.add(f))))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in ng)u3(s,this[s]).forEach((l=>i.classList.remove(l)))}};return _([E()],e.prototype,"breakpoints",null),_([E()],e.prototype,"orientation",void 0),_([E()],e.prototype,"widthBreakpoint",void 0),_([E()],e.prototype,"heightBreakpoint",void 0),e=_([Y("esri.views.BreakpointsOwner")],e),e};function m4(t){return typeof t=="string"?document.getElementById(t):t??null}function hx(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Ll=class extends Ot{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,s={}){return this._installWatch(e,i,s,zt)}addWhen(e,i,s={}){return this._installWatch(e,i,s,Rs)}addOnCollectionChange(e,i,{initial:s=!1,final:l=!1}={}){const f=++this._handleId;return this.addHandles([$a(e,"after-changes",this._createSyncUpdatingCallback(),$o),$a(e,"change",i,{onListenerAdd:s?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:l?y=>i({added:[],removed:y.toArray()}):void 0})],f),fe((()=>this.removeHandles(f)))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(fe((()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(ey)||this._set("updating",!1))})),i),this._pendingPromises.add(e),this._set("updating",!0);const s=()=>this.removeHandles(i);return e.then(s,s),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,s={},l){const f=++this._handleId;s.sync||this._installSyncUpdatingWatch(e,f);const y=l(e,i,s);return this.addHandles(y,f),fe((()=>this.removeHandles(f)))}_installSyncUpdatingWatch(e,i){const s=this._createSyncUpdatingCallback(),l=zt(e,s,{sync:!0,equals:()=>!1});return this.addHandles(l,i),l}_createSyncUpdatingCallback(){return()=>{this.removeHandles(ey),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(a1((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(ey))})),ey)}}};_([E({readOnly:!0})],Ll.prototype,"updating",void 0),Ll=_([Y("esri.core.support.UpdatingHandles")],Ll);const ey=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wm=function(){return wm=Object.assign||function(e){for(var i,s=1,l=arguments.length;s<l;s++){i=arguments[s];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(e[f]=i[f])}return e},wm.apply(this,arguments)},Pb={exports:{}},yi={},Ob={exports:{}},Ch={};function IO(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function zJ(t,e,i){}function UJ(t,e,i){}var GJ=/javascript\s*\:/img;function BJ(t,e){return GJ.test(e)?"":e}Ch.whiteList=IO();Ch.getDefaultWhiteList=IO;Ch.onAttr=zJ;Ch.onIgnoreAttr=UJ;Ch.safeAttrValue=BJ;var qJ={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,l;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,l=t.length;s<l;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Of=qJ;function VJ(t,e){t=Of.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,s=!1,l=0,f=0,y="";function v(){if(!s){var A=Of.trim(t.slice(l,f)),P=A.indexOf(":");if(P!==-1){var k=Of.trim(A.slice(0,P)),C=Of.trim(A.slice(P+1));if(k){var L=e(l,y.length,k,C,A);L&&(y+=L+"; ")}}}l=f+1}for(;f<i;f++){var b=t[f];if(b==="/"&&t[f+1]==="*"){var S=t.indexOf("*/",f+2);if(S===-1)break;f=S+1,l=f+1,s=!1}else b==="("?s=!0:b===")"?s=!1:b===";"?s||v():b===`
`&&v()}return Of.trim(y)}var HJ=VJ,iy=Ch,WJ=HJ;function cx(t){return t==null}function JJ(t){var e={};for(var i in t)e[i]=t[i];return e}function PO(t){t=JJ(t||{}),t.whiteList=t.whiteList||iy.whiteList,t.onAttr=t.onAttr||iy.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||iy.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||iy.safeAttrValue,this.options=t}PO.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,l=i.onAttr,f=i.onIgnoreAttr,y=i.safeAttrValue,v=WJ(t,function(b,S,A,P,k){var C=s[A],L=!1;if(C===!0?L=C:typeof C=="function"?L=C(P):C instanceof RegExp&&(L=C.test(P)),L!==!0&&(L=!1),P=y(A,P),!!P){var F={position:S,sourcePosition:b,source:k,isWhite:L};if(L){var q=l(A,P,F);return cx(q)?A+":"+P:q}else{var q=f(A,P,F);if(!cx(q))return q}}});return v};var YJ=PO;(function(t,e){var i=Ch,s=YJ;function l(y,v){var b=new s(v);return b.process(y)}e=t.exports=l,e.FilterCSS=s;for(var f in i)e[f]=i[f]})(Ob,Ob.exports);var v4=Ob.exports,w4={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,l;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,l=t.length;s<l;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},KJ=v4.FilterCSS,ZJ=v4.getDefaultWhiteList,bm=w4;function OO(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var kO=new KJ;function XJ(t,e,i){}function QJ(t,e,i){}function tY(t,e,i){}function eY(t,e,i){}function RO(t){return t.replace(rY,"&lt;").replace(sY,"&gt;")}function iY(t,e,i,s){if(i=FO(i),e==="href"||e==="src"){if(i=bm.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(ry.lastIndex=0,ry.test(i))return""}else if(e==="style"){if(px.lastIndex=0,px.test(i)||(fx.lastIndex=0,fx.test(i)&&(ry.lastIndex=0,ry.test(i))))return"";s!==!1&&(s=s||kO,i=s.process(i))}return i=zO(i),i}var rY=/</g,sY=/>/g,nY=/"/g,oY=/&quot;/g,aY=/&#([a-zA-Z0-9]*);?/gim,lY=/&colon;?/gim,uY=/&newline;?/gim,ry=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,px=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,fx=/u\s*r\s*l\s*\(.*/gi;function CO(t){return t.replace(nY,"&quot;")}function NO(t){return t.replace(oY,'"')}function LO(t){return t.replace(aY,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function DO(t){return t.replace(lY,":").replace(uY," ")}function jO(t){for(var e="",i=0,s=t.length;i<s;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return bm.trim(e)}function FO(t){return t=NO(t),t=LO(t),t=DO(t),t=jO(t),t}function zO(t){return t=CO(t),t=RO(t),t}function hY(){return""}function cY(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function s(y){return i?!0:bm.indexOf(t,y)!==-1}var l=[],f=!1;return{onIgnoreTag:function(y,v,b){if(s(y))if(b.isClosing){var S="[/removed]",A=b.position+S.length;return l.push([f!==!1?f:b.position,A]),f=!1,S}else return f||(f=b.position),"[removed]";else return e(y,v,b)},remove:function(y){var v="",b=0;return bm.forEach(l,function(S){v+=y.slice(b,S[0]),b=S[1]}),v+=y.slice(b),v}}}function pY(t){for(var e="",i=0;i<t.length;){var s=t.indexOf("<!--",i);if(s===-1){e+=t.slice(i);break}e+=t.slice(i,s);var l=t.indexOf("-->",s);if(l===-1)break;i=l+3}return e}function fY(t){var e=t.split("");return e=e.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),e.join("")}yi.whiteList=OO();yi.getDefaultWhiteList=OO;yi.onTag=XJ;yi.onIgnoreTag=QJ;yi.onTagAttr=tY;yi.onIgnoreTagAttr=eY;yi.safeAttrValue=iY;yi.escapeHtml=RO;yi.escapeQuote=CO;yi.unescapeQuote=NO;yi.escapeHtmlEntities=LO;yi.escapeDangerHtml5Entities=DO;yi.clearNonPrintableCharacter=jO;yi.friendlyAttrValue=FO;yi.escapeAttrValue=zO;yi.onIgnoreTagStripAll=hY;yi.StripTagBody=cY;yi.stripCommentTag=pY;yi.stripBlankChar=fY;yi.cssFilter=kO;yi.getDefaultCSSWhiteList=ZJ;var U2={},dl=w4;function dY(t){var e=dl.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=dl.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function yY(t){return t.slice(0,2)==="</"}function gY(t,e,i){var s="",l=0,f=!1,y=!1,v=0,b=t.length,S="",A="";t:for(v=0;v<b;v++){var P=t.charAt(v);if(f===!1){if(P==="<"){f=v;continue}}else if(y===!1){if(P==="<"){s+=i(t.slice(l,v)),f=v,l=v;continue}if(P===">"){s+=i(t.slice(l,f)),A=t.slice(f,v+1),S=dY(A),s+=e(f,s.length,S,A,yY(A)),l=v+1,f=!1;continue}if(P==='"'||P==="'")for(var k=1,C=t.charAt(v-k);C.trim()===""||C==="=";){if(C==="="){y=P;continue t}C=t.charAt(v-++k)}}else if(P===y){y=!1;continue}}return l<t.length&&(s+=i(t.substr(l))),s}var mY=/[^a-zA-Z0-9\\_:.-]/gim;function vY(t,e){var i=0,s=0,l=[],f=!1,y=t.length;function v(k,C){if(k=dl.trim(k),k=k.replace(mY,"").toLowerCase(),!(k.length<1)){var L=e(k,C||"");L&&l.push(L)}}for(var b=0;b<y;b++){var S=t.charAt(b),A,P;if(f===!1&&S==="="){f=t.slice(i,b),i=b+1,s=t.charAt(i)==='"'||t.charAt(i)==="'"?i:bY(t,b+1);continue}if(f!==!1&&b===s){if(P=t.indexOf(S,b+1),P===-1)break;A=dl.trim(t.slice(s+1,P)),v(f,A),f=!1,b=P,i=b+1;continue}if(/\s|\n|\t/.test(S))if(t=t.replace(/\s|\n|\t/g," "),f===!1)if(P=wY(t,b),P===-1){A=dl.trim(t.slice(i,b)),v(A),f=!1,i=b+1;continue}else{b=P-1;continue}else if(P=_Y(t,b-1),P===-1){A=dl.trim(t.slice(i,b)),A=dx(A),v(f,A),f=!1,i=b+1;continue}else continue}return i<t.length&&(f===!1?v(t.slice(i)):v(f,dx(dl.trim(t.slice(i))))),dl.trim(l.join(" "))}function wY(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function bY(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function _Y(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function xY(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function dx(t){return xY(t)?t.substr(1,t.length-2):t}U2.parseTag=gY;U2.parseAttr=vY;var SY=v4.FilterCSS,Cn=yi,UO=U2,TY=UO.parseTag,MY=UO.parseAttr,og=w4;function sy(t){return t==null}function EY(t){var e=og.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=og.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=og.trim(t.slice(0,-1))),{html:t,closing:i}}function $Y(t){var e={};for(var i in t)e[i]=t[i];return e}function AY(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(s){return s.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function GO(t){t=$Y(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Cn.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=AY(t.whiteList||t.allowList):t.whiteList=Cn.whiteList,t.onTag=t.onTag||Cn.onTag,t.onTagAttr=t.onTagAttr||Cn.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Cn.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Cn.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Cn.safeAttrValue,t.escapeHtml=t.escapeHtml||Cn.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new SY(t.css))}GO.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,l=i.onTag,f=i.onIgnoreTag,y=i.onTagAttr,v=i.onIgnoreTagAttr,b=i.safeAttrValue,S=i.escapeHtml,A=e.cssFilter;i.stripBlankChar&&(t=Cn.stripBlankChar(t)),i.allowCommentTag||(t=Cn.stripCommentTag(t));var P=!1;i.stripIgnoreTagBody&&(P=Cn.StripTagBody(i.stripIgnoreTagBody,f),f=P.onIgnoreTag);var k=TY(t,function(C,L,F,q,H){var J={sourcePosition:C,position:L,isClosing:H,isWhite:Object.prototype.hasOwnProperty.call(s,F)},Q=l(F,q,J);if(!sy(Q))return Q;if(J.isWhite){if(J.isClosing)return"</"+F+">";var tt=EY(q),et=s[F],nt=MY(tt.html,function(vt,Tt){var St=og.indexOf(et,vt)!==-1,pt=y(F,vt,Tt,St);return sy(pt)?St?(Tt=b(F,vt,Tt,A),Tt?vt+'="'+Tt+'"':vt):(pt=v(F,vt,Tt,St),sy(pt)?void 0:pt):pt});return q="<"+F,nt&&(q+=" "+nt),tt.closing&&(q+=" /"),q+=">",q}else return Q=f(F,q,J),sy(Q)?S(q):Q},S);return P&&(k=P.remove(k)),k};var IY=GO;(function(t,e){var i=yi,s=U2,l=IY;function f(v,b){var S=new l(b);return S.process(v)}e=t.exports=f,e.filterXSS=f,e.FilterXSS=l,(function(){for(var v in i)e[v]=i[v];for(var b in s)e[b]=s[b]})();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=t.exports)})(Pb,Pb.exports);var Bh=Pb.exports,PY=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},OY=(function(){function t(e,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=wm(wm({},Bh.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(f,y,v,b){return f==="a"&&y==="href"||(f==="img"||f==="source")&&y==="src"?s.sanitizeUrl(v):Bh.safeAttrValue(f,y,v,b)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var l;e&&!i?l=e:e&&i?(l=Object.create(this.arcgisFilterOptions),l.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(f){if(f==="whiteList")l.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,e.whiteList||{}]);else if(f==="css"){var y=e.css.whiteList;y!=null&&e.css instanceof Object&&Object.keys(y).forEach(function(v){return l.css.whiteList[v]=y[v]})}else l[f]=e[f]})):(l=Object.create(this.arcgisFilterOptions),l.whiteList=this.arcgisWhiteList,l.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=l,this._xssFilter=new Bh.FilterXSS(l)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var s=(i??{}).isProtocolRequired,l=s===void 0?!0:s,f=this._trim(e.substring(0,e.indexOf(":"))),y=e==="/",v=/^#/.test(e),b=f&&this.allowedProtocols.indexOf(f.toLowerCase())>-1;return y||v||b?Bh.escapeAttrValue(e):!f&&!l?Bh.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,s,l){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,s,l):Bh.safeAttrValue(e,i,s,l)},t.prototype.validate=function(e,i){i===void 0&&(i={});var s=this.sanitize(e,i);return{isValid:e===s,sanitized:s}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(s,l){return i.test(s)?s:"&#x".concat(Number(e.charCodeAt(l)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(s){Object.keys(s).forEach(function(l){Array.isArray(s[l])&&Array.isArray(i[l])?i[l]=i[l].concat(s[l]):i[l]=s[l]})}),i},t.prototype._iterateOverObject=function(e,i){var s=this;i===void 0&&(i={});try{var l=!1,f=void 0;if(Array.isArray(e))f=e.reduce(function(v,b){var S=s.validate(b,i);return S.isValid?v.concat([b]):(l=!0,v.concat([S.sanitized]))},[]);else if(PY(e)){var y=Object.keys(e);f=y.reduce(function(v,b){var S=e[b],A=s.validate(S,i);return A.isValid?v[b]=S:(l=!0,v[b]=A.sanitized),v},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return l?f:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const kY=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],RY=kY.reduce(((t,e)=>(t[e]=[],t)),{}),CY=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],BO=new OY({whiteList:RY,onTagAttr:(t,e,i)=>{const s=`${e}="${i}"`;if(CY.includes(e))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),qO="http://www.w3.org/",G2=`${qO}2000/svg`,VO=`${qO}1999/xlink`;let yx=[],b4=(t,e)=>{let i={};return Object.keys(t).forEach((s=>{i[s]=t[s]})),e&&Object.keys(e).forEach((s=>{i[s]=e[s]})),i},_4=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),HO=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},NY=(t,e,i)=>{if(e.vnodeSelector!==""){for(let s=i;s<t.length;s++)if(_4(t[s],e))return s}return-1},h3=(t,e,i,s)=>{let l=t[e];if(l.vnodeSelector==="")return;let f=l.properties;if(!(f&&(f.key===void 0?f.bind:f.key))){for(let y=0;y<t.length;y++)if(y!==e){let v=t[y];if(_4(v,l))throw new Error(`${i.vnodeSelector} had a ${l.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},LY=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},kb=[],Rb=!1,WO=t=>{(t.children||[]).forEach(WO),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},gx=()=>{Rb=!1,kb.forEach(WO),kb.length=0},mx=t=>{kb.push(t),Rb||(Rb=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(gx,{timeout:16}):setTimeout(gx,16))},vx=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),mx(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),mx(t))},DY=(t,e,i)=>{if(!e)return;let s=i.eventHandlerInterceptor,l=Object.keys(e),f=l.length;for(let y=0;y<f;y++){let v=l[y],b=e[v];if(v==="className")throw new Error('Property "className" is not supported, use "class".');if(v==="class")Nb(t,b,!0);else if(v==="classes"){let S=Object.keys(b),A=S.length;for(let P=0;P<A;P++){let k=S[P];b[k]&&t.classList.add(k)}}else if(v==="styles"){let S=Object.keys(b),A=S.length;for(let P=0;P<A;P++){let k=S[P],C=b[k];C&&(HO(C),i.styleApplyer(t,k,C))}}else if(v!=="key"&&b!=null){let S=typeof b;S==="function"?(v.lastIndexOf("on",0)===0&&(s&&(b=s(v,b,t,e)),v==="oninput"&&(function(){let A=b;b=function(P){A.apply(this,[P]),P.target["oninput-value"]=P.target.value}})()),t[v]=b):i.namespace===G2?v==="href"?t.setAttributeNS(VO,v,b):t.setAttribute(v,b):S==="string"&&v!=="value"?v==="innerHTML"?t[v]=BO.sanitize(b):Cb(t)&&v in t?t[v]=b:t.setAttribute(v,b):t[v]=b}}};function Cb(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let _m,jY=(t,e,i)=>{if(e)for(let s of e)nd(s,t,void 0,i)},JO=(t,e,i)=>{jY(t,e.children,i),e.text&&(t.textContent=e.text),DY(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},nd=(t,e,i,s)=>{let l,f=0,y=t.vnodeSelector,v=e.ownerDocument;if(y==="")l=t.domNode=v.createTextNode(t.text),i!==void 0?e.insertBefore(l,i):e.appendChild(l);else{for(let b=0;b<=y.length;++b){let S=y.charAt(b);if(b===y.length||S==="."||S==="#"){let A=y.charAt(f-1),P=y.slice(f,b);A==="."?l.classList.add(P):A==="#"?l.id=P:(P==="svg"&&(s=b4(s,{namespace:G2})),s.namespace!==void 0?l=t.domNode=v.createElementNS(s.namespace,P):(l=t.domNode=t.domNode||v.createElement(P),P==="input"&&t.properties&&t.properties.type!==void 0&&l.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(l,i):l.parentNode!==e&&e.appendChild(l)),f=b+1}}JO(l,t,s)}},Nb=(t,e,i)=>{e&&e.split(" ").forEach((s=>{s&&t.classList.toggle(s,i)}))},FY=(t,e,i,s)=>{if(!i)return;let l=!1,f=Object.keys(i),y=f.length;for(let v=0;v<y;v++){let b=f[v],S=i[b],A=e[b];if(b==="class")A!==S&&(Nb(t,A,!1),Nb(t,S,!0));else if(b==="classes"){let P=t.classList,k=Object.keys(S),C=k.length;for(let L=0;L<C;L++){let F=k[L],q=!!S[F];q!==!!A[F]&&(l=!0,q?P.add(F):P.remove(F))}}else if(b==="styles"){let P=Object.keys(S),k=P.length;for(let C=0;C<k;C++){let L=P[C],F=S[L];F!==A[L]&&(l=!0,F?(HO(F),s.styleApplyer(t,L,F)):s.styleApplyer(t,L,""))}}else if(S||typeof A!="string"||(S=""),b!=="value"||Cb(t)){if(S!==A){let P=typeof S;P==="function"&&s.eventHandlerInterceptor||(s.namespace===G2?b==="href"?t.setAttributeNS(VO,b,S):t.setAttribute(b,S):P==="string"?b==="innerHTML"?t[b]=BO.sanitize(S):b==="role"&&S===""?t.removeAttribute(b):Cb(t)&&b in t?t[b]=S:t.setAttribute(b,S):t[b]!==S&&(t[b]=S),l=!0)}}else{let P=t[b];P!==S&&(t["oninput-value"]?P===t["oninput-value"]:S!==A)&&(t[b]=S,t["oninput-value"]=void 0),S!==A&&(l=!0)}}return l},zY=(t,e,i,s,l)=>{if(i===s)return!1;s=s||yx;let f,y=(i=i||yx).length,v=s.length,b=0,S=0,A=!1;for(;S<v;){let P=b<y?i[b]:void 0,k=s[S];if(P!==void 0&&_4(P,k))A=_m(P,k,l)||A,b++;else{let C=NY(i,k,b+1);if(C>=0){for(f=b;f<C;f++)vx(i[f]),h3(i,f,t,"removed");A=_m(i[C],k,l)||A,b=C+1}else nd(k,e,b<y?i[b].domNode:void 0,l),LY(k),h3(s,S,t,"added")}S++}if(y>b)for(f=b;f<y;f++)vx(i[f]),h3(i,f,t,"removed");return A};_m=(t,e,i)=>{let s=t.domNode,l=!1;if(t===e)return!1;let f=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let y=s.ownerDocument.createTextNode(e.text);return s.parentNode.replaceChild(y,s),e.domNode=y,l=!0,l}e.domNode=s}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=b4(i,{namespace:G2})),t.text!==e.text&&(f=!0,e.text===void 0?s.removeChild(s.firstChild):s.textContent=e.text),e.domNode=s,f=zY(e,s,t.children,e.children,i)||f,f=FY(s,t.properties,e.properties,i)||f,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[s,i,e.vnodeSelector,e.properties,e.children]);return f&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(s,e.properties,t.properties),l};let ny=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=t;t=i,_m(s,i,e)},domNode:t.domNode});const UY={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let u0=t=>b4(UY,t),Al={append:(t,e,i)=>(i=u0(i),nd(e,t,void 0,i),ny(e,i)),insertBefore:(t,e,i)=>(i=u0(i),nd(e,t.parentNode,t,i),ny(e,i)),merge:(t,e,i)=>(i=u0(i),e.domNode=t,JO(t,e,i),ny(e,i)),replace:(t,e,i)=>(i=u0(i),nd(e,t.parentNode,t,i),t.parentNode.removeChild(t),ny(e,i))},YO,GY=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};YO=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let BY=(t,e)=>{let i=t;return e.forEach((s=>{i=i&&i.children?YO(i.children,(l=>l.domNode===s)):void 0})),i},qY=(t,e,i)=>{let s=function(l){i("domEvent",l);let f=e(),y=GY(l.currentTarget,f.domNode);y.reverse();let v,b=BY(f.getLastRender(),y);return t.scheduleRender(),b&&(v=b.properties[`on${l.type}`].apply(b.properties.bind||this,arguments)),i("domEventProcessed",l),v};return(l,f,y,v)=>s},wx=t=>{let e,i,s=u0(t),l=s.performanceLogger,f=!0,y=!1,v=[],b=[],S=(P,k,C)=>{let L,F=()=>L;s.eventHandlerInterceptor=qY(e,F,l),L=P(k,C(),s),v.push(L),b.push(C)},A=()=>{if(i=void 0,f){f=!1,l("renderStart",void 0);for(let P=0;P<v.length;P++){let k=b[P]();l("rendered",void 0),v[P].update(k),l("patched",void 0)}l("renderDone",void 0),f=!0}};return e={renderNow:A,scheduleRender:()=>{i||y||(i=requestAnimationFrame(A))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,f=!0,e.scheduleRender()},append:(P,k)=>{S(Al.append,P,k)},insertBefore:(P,k)=>{S(Al.insertBefore,P,k)},merge:(P,k)=>{S(Al.merge,P,k)},replace:(P,k)=>{S(Al.replace,P,k)},detach:P=>{for(let k=0;k<b.length;k++)if(b[k]===P)return b.splice(k,1),v.splice(k,1)[0];throw new Error("renderFunction was not found")}},e},Ka=class extends Ot{constructor(){super(...arguments),this.items=new kt,this._watchUpdatingTracking=new Ll,this._callbacks=new Map,this._projector=wx(),this._hiddenProjector=wx()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(i=>{for(const s of i.added){const l=()=>s.render();this._callbacks.set(s,l),this._projector.append(this.surface,l)}for(const s of i.removed){const l=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(l.domNode),this._callbacks.delete(s)}}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,s=this._hiddenProjector;let l;const f=()=>(l=e.render(),l);s.append(i,f),s.renderNow();const y={left:0,top:0,right:0,bottom:0};if(l?.domNode){const v=l.domNode.getBoundingClientRect();y.left=v.left,y.top=v.top,y.right=v.right,y.bottom=v.bottom}for(s.detach(f);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(e,i){const s=this.computeBoundingRect(e),l=this.computeBoundingRect(i);return Math.max(s.left,l.left)<=Math.min(s.right,l.right)&&Math.max(s.top,l.top)<=Math.min(s.bottom,l.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(e,i){const s=!!i?.disableDecorations;if(!this.items.some((f=>f.visible&&!(s&&f.isDecoration))))return;const l=e.getContext("2d");l.save(),l.font=this._fontString(),this.items.forEach((f=>{s&&f.isDecoration||(l.save(),f.renderCanvas(l),l.restore())})),l.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};_([E({readOnly:!0})],Ka.prototype,"surface",void 0),_([E({readOnly:!0})],Ka.prototype,"items",void 0),_([E({readOnly:!0})],Ka.prototype,"needsRender",null),_([E({readOnly:!0})],Ka.prototype,"_watchUpdatingTracking",void 0),_([E({readOnly:!0})],Ka.prototype,"updating",null),Ka=_([Y("esri.views.overlay.ViewOverlay")],Ka);const bx=Ka,c3=[0,0];function VY(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return c3[0]=i.left+(e?.pageXOffset??0),c3[1]=i.top+(e?.pageYOffset??0),c3}function _x(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function HY(t){const e=document.createElement("div");return t.appendChild(e),e}const qh=16,kf=750,WY=512,JY=2,YY=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:qh,time:kf},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([zt((()=>this.cursor),(s=>{const{surface:l}=this;l&&l.setAttribute("data-cursor",s)})),zt((()=>this.navigating),(s=>{const{surface:l}=this;l&&l.setAttribute("data-navigating",s.toString())}))])}initialize(){this.addHandles([zt((()=>this.ui),((i,s)=>this._handleUIChange(i,s)),Pr),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),l=m4(i);if(l||typeof i!="string"||At.getLogger(this).error("#container",`element with id '${i}' not found`),s===l)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(_x(this.root),this._set("root",null)),this.userContent&&(hx(this.userContent,s),_x(this.userContent),this._set("userContent",null))),!l)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);l.classList.add("esri-view");const f=document.createElement("div");f.className="esri-view-user-storage",hx(l,f),l.appendChild(f),this._set("userContent",f);const y=document.createElement("div");y.className="esri-view-root",l.insertBefore(y,l.firstChild),this._set("root",y);const v=document.createElement("div");v.className="esri-view-surface",v.setAttribute("role","application"),v.tabIndex=0,y.appendChild(v),this._set("surface",v);const b=new bx;y.appendChild(b.surface),this._set("overlay",b),this.addHandles(zt((()=>b.needsRender),(S=>{S&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=wp({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=ri(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",l),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const s=this._get("ui");s!==i&&s?.destroy(),this._set("ui",i)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(i,s,l){const f=this.position;return i-=f?f[0]:0,s-=f?f[1]:0,l?(l[0]=i,l[1]=s):l=[i,s],l}containerToPage(i,s,l){const f=this.position;return i+=f?f[0]:0,s+=f?f[1]:0,l?(l[0]=i,l[1]=s):l=[i,s],l}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(zt((()=>this.root),(l=>{i.container=l?HY(l):null}),Pr),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=qh,i.time=kf;const s=wp({prepare:y=>{const v=this._measure(),b=this._freqInfo;if(b.time+=y.deltaTime,v&&(b.freq=qh,this._get("resizing")||this._set("resizing",!0)),b.time<b.freq)return;b.time=0;const S=this._position();b.freq=S||v?qh:Math.min(kf,b.freq*JY),!v&&b.freq>=WY&&(s.pause(),this._get("resizing")&&this._set("resizing",!1))}}),l=new ResizeObserver((y=>{i.freq=qh,i.time=kf,s.resume()}));this.container!=null&&l.observe(this.container);const f=fe((()=>l.disconnect()));this.addHandles([Hp(window,"resize",(()=>{i.freq=qh,i.time=kf,s.resume()})),f,s],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,l=i?i.clientHeight:0;if(s===0||l===0)return this.suspended||this._set("suspended",!0),!1;const f=this.width,y=this.height;return s===f&&l===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",l),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:f,oldHeight:y,width:s,height:l}),!0)}_position(){const i=this.container,s=this.position,l=i&&VY(i);return!!l&&(!s||l[0]!==s[0]||l[1]!==s[1])&&(this._set("position",[l[0],l[1]]),!0)}forceDOMReadyCycle(){}};return _([E()],e.prototype,"container",null),_([E({readOnly:!0})],e.prototype,"focused",null),_([E({readOnly:!0})],e.prototype,"height",void 0),_([E()],e.prototype,"messagesCommon",void 0),_([E({type:bx})],e.prototype,"overlay",void 0),_([E({readOnly:!0})],e.prototype,"position",void 0),_([E({readOnly:!0})],e.prototype,"resizing",void 0),_([E({readOnly:!0})],e.prototype,"root",void 0),_([E({value:null,readOnly:!0})],e.prototype,"size",null),_([E({readOnly:!0})],e.prototype,"surface",void 0),_([E({readOnly:!0})],e.prototype,"suspended",void 0),_([E({nonNullable:!0})],e.prototype,"ui",null),_([E({readOnly:!0})],e.prototype,"userContent",void 0),_([E({readOnly:!0})],e.prototype,"width",void 0),_([E()],e.prototype,"widthBreakpoint",void 0),e=_([Y("esri.views.DOMContainer")],e),e},KO=rt("mac")?"Meta":"Control",KY=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),ZY=t=>KY.has(t);let XY=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}},Ki=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback((i=>this._handleEvent(i))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,i,s){let l;typeof i=="function"?(s=i,l=[]):l=i||[];const f=typeof e=="string"?new XY(e,l):e,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},v=A=>{const P=this._incoming[A.match.eventType];if(P){const k=P.indexOf(A);P.splice(k,1),y(),this._manager&&this._manager.updateDependencies()}},b=new QY(f,s,{onPause:v,onRemove:v,onResume:A=>{const P=this._incoming[A.match.eventType];P&&!P.includes(A)&&(P.push(A),y(),this._manager&&this._manager.updateDependencies())}});let S=this._incoming[f.eventType];return S||(S=[],this._incoming[f.eventType]=S),S.push(b),y(),this._manager&&this._manager.updateDependencies(),b}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new tK(e,{onEmit:(s,l,f,y)=>{this._manager?.emit(s.eventType,l,f,y)},onRemove:s=>{delete this._outgoing[s.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const s of i)if(s.match.matches(e)&&(s.callback?.(e),e.shouldStopPropagation()))break}}},QY=class{constructor(e,i,s){this.match=e,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},tK=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,s){this._removed||this._handler.onEmit(this,e,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},eK=class extends Ki{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(i=>this._update(i.data)))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:l}=e;i===this._value&&this._x===s&&this._y===l||(this._value=i,this._x=s,this._y=l,this._onChange(i,s,l))}},iK=class{constructor(e,i){this._observable=new l1,this._value=e,this._equalityFunction=i}get value(){return Ft(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function kp(t,e=fE){return new iK(t,e)}let rK=class extends Ki{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=kp(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},sK=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in e){const l=e[s],f=new d$(l,void 0,void 0,2,2);this._properties[s]={pool:f,acquired:[]}}this._afterDispatchHandle=zF((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const s of i.acquired)_7(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),s=this._properties[e];let l=s.pool.acquire();for(s.acquired.push(l);l===i;)s.acquired.push(l),l=s.pool.acquire();return l}_release(){for(const e in this._properties){const i=this._properties[e];let s=0;for(const l of i.acquired)_7(l)?i.acquired[s++]=l:i.pool.release(l);i.acquired.length=s}}},Gs=class extends Ot{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=KO,this._latestPointerType="mouse",this._propertiesPool=new sK({latestPointerLocation:aK},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,s=Le.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const l={name:e,handlers:i.map((f=>({handler:f,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=l;for(let f=l.handlers.length-1;f>=0;f--){const y=l.handlers[f];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(v,b,S,A,P)=>{this._emitInputEvent(y.priorityIndex+1,v,b,S,P,A)},setPointerCapture:(v,b)=>{this._setPointerCapture(l,y,v,b)},setEventCallback:v=>{y.eventCallback=v},setUninstallCallback:v=>{y.uninstallCallback=v},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach((s=>{s.removed=!0,s.uninstallCallback?.()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):At.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const l=this._handlers[s];l.priorityIndex=s,this._handlersPriority.push(l)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const l=this._handlersPriority[s];l.priorityIndex=s;let f=l.handler.hasSideEffects;if(!f){for(const y of l.handler.outgoingEventTypes)if(e.has(y)){f=!0;break}}if(f)for(const y of l.handler.incomingEventMatches){e.add(y.eventType);for(const v of y.keyModifiers)ZY(v)||i.add(v)}l.active=f}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,s){this._latestPointerType=e;const l=this._get("latestPointerLocation");if(l==null||l.x!==i||l.y!==s){const f=this._propertiesPool.get("latestPointerLocation");f.x=i,f.y=s,this._set("latestPointerLocation",f)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const f=i;this._pointerCaptures.delete(f.native.pointerId)}this._updateKeyModifiers(e,i);const s=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,l=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,s,l)}_updateKeyModifiers(e,i){if(!i)return;let s=!1;const l=()=>{s||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),s=!0)},f=(v,b)=>{b&&!this._activeKeyModifiers.has(v)?(l(),this._activeKeyModifiers.add(v)):!b&&this._activeKeyModifiers.has(v)&&(l(),this._activeKeyModifiers.delete(v))};if(e==="key-down"||e==="key-up"){const v=i.key;this._keyModifiers.has(v)&&f(v,e==="key-down")}const y=i.native;f("Alt",!!y?.altKey),f("Control",!!y?.ctrlKey),f("Ctrl",!!y?.ctrlKey),f("Shift",!!y?.shiftKey),f("Meta",!!y?.metaKey),f("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new eK(((e,i,s)=>this._setLatestPointer(e,i,s))),this._multiTouchHandler=new rK,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Le.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Le.INTERNAL)}_setPointerCapture(e,i,s,l){const f=e.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,y),l?(y.add(f),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):y.has(f)&&(y.delete(f),y.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,i,s,l){this._emitInputEvent(0,e,i,s,l)}_emitInputEvent(e,i,s,l,f,y){const v=l!==void 0?l:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),b=f!==void 0&&f,S={event:new nK(i,s,v,y||this._activeKeyModifiers,b),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(S):this._doNewPropagation(S)}_doNewPropagation(e){this._currentPropagation={events:new kd,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:i,priorityIndex:s}=e.events.pop(),l=i.data?.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(i.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new kd;i.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)i.push(s.events.pop());s.events=i,s.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const l of i.handler.incomingEventMatches){if(s.eventType!==l.eventType)continue;const f=s.keyModifiers.filter((y=>l.keyModifiers.includes(y)));if(f.length===s.keyModifiers.length!=(f.length===l.keyModifiers.length))return s.keyModifiers.length>l.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const s of e){let l=0;for(;l<i.length&&this._compareHandlerPriority(s,i[l])>=0;)l++;i.splice(l,0,s)}return i}get debug(){const e=i=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=s};return{injectEvent:(i,s)=>{e((()=>this._onEventReceived(i,s)))},disablePointerCapture:e}}};_([E({readOnly:!0})],Gs.prototype,"hasPendingInputs",null),_([E({constructOnly:!0})],Gs.prototype,"eventSource",void 0),_([E({constructOnly:!0})],Gs.prototype,"recognizers",void 0),_([E()],Gs.prototype,"_latestPointerType",void 0),_([E()],Gs.prototype,"latestPointerType",null),_([E()],Gs.prototype,"multiTouchActive",null),_([E({readOnly:!0})],Gs.prototype,"latestPointerLocation",void 0),_([E()],Gs.prototype,"_paused",void 0),_([E({readOnly:!0})],Gs.prototype,"updating",null),Gs=_([Y("esri.views.input.InputManager")],Gs);let nK=class{constructor(e,i,s,l,f){this.type=e,this.data=i,this.timestamp=s,this.modifiers=l,this.cancelable=f,this._propagationState=yl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=yl.STOPPED}shouldStopPropagation(){return(this._propagationState&yl.STOPPED)!==0}defer(e){this._propagationState|=yl.PAUSED;const i=(s,l)=>{this._propagationState&=~yl.PAUSED;const f=this._resumeCallback;if(this._resumeCallback=null,f&&f(),l)throw s;return s};return(typeof e=="function"?e():e).then((s=>i(s,!1)),(s=>i(s,!0)))}shouldPausePropagation(e){return!!(this._propagationState&yl.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var yl;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(yl||(yl={}));const Le={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let oK=class{};const aK=oK;function qa(t){return t!=null&&"open"in t&&"declaredClass"in t}function xx(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const lK=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([zt((()=>[this.ui,this.popup]),(([i,s],l)=>{const f="popup",y="manual";if(l){const[v,b]=l;v&&qa(b)&&(b.view=null,xx(b)&&(v.remove(b,f),b!==s&&s&&b.destroy()))}i&&qa(s)&&(s.view=this,xx(s)&&i.add(s,{key:f,position:y,internal:!0}))}),zi),this.on("click",(i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(qa(this.popup)?this.popup.viewModel.handleViewClick(i):i.defer((async()=>{await this.setupPopup(),qa(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))}),Le.WIDGET)]),Od((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{mt(()=>import("./Popup-YgQ9HGEY.js").then(i=>i.P),__vite__mapDeps([195,1,2,3,6,196,12,197,198,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,199,32,4,200,201,106,107,108,13,14,170,171,118,57,51,104,49,50,31,202,88,86,87,15,41,46,89,203,204,205,206,207,208,209,210,211,212,16,213,214,215,126,216,217,218,219,220,221,169,222,223,224,225,226,227,228,229,230,231,25,232,233,234,235,236,143,237]))}))}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(qa(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void At.getLogger(this).error(new ct("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){this._popupSetupTask?.abort(),qa(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,s),s)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!qa(this.popup))return this._popupSetupTask=_2((async i=>{const{default:s}=await mt(()=>import("./Popup-YgQ9HGEY.js").then(f=>f.P),__vite__mapDeps([195,1,2,3,6,196,12,197,198,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,199,32,4,200,201,106,107,108,13,14,170,171,118,57,51,104,49,50,31,202,88,86,87,15,41,46,89,203,204,205,206,207,208,209,210,211,212,16,213,214,215,126,216,217,218,219,220,221,169,222,223,224,225,226,227,228,229,230,231,25,232,233,234,235,236,143,237]));if(Ce(i),!this.popup||qa(this.popup))return;const l=this.popup;delete l.open,delete l.close,this.popup=new s(l)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:s},l){const f=[],y=[];let v=!1;const b=wj(l,rt("popup-view-fetch-timeout")??hK),S=k=>{const C=new uK(k);return y.push(C),f.push(C.promise),C},A=k=>{const C=y.at(-1);return C&&C.layerView===k&&!v?C:S(k)};for(const k of s)"graphic"in k?(A(k.layerView).graphics.push(k.graphic),v=!1):(f.push(k.layerView.fetchPopupFeaturesAtLocation(k.mapPoint,b)),v=!0);y.map((k=>k.resolve(b)));const P=vj(f).then((k=>k.filter((C=>!!C)).flat()));return{pendingFeatures:f,allGraphicsPromise:P,location:i}}async _getPopupHits(i,s){const{hits:l,location:f}=await this.popupHitTest(i);Ce(s);const y=[];for(const v of l)if("graphic"in v){if(this._isValidPopupGraphic(v.graphic,s)){const b=this._isValidPopupGraphicsLayerView(v.layerView)?v.layerView:void 0;y.push({graphic:v.graphic,layerView:b})}}else this._isValidPopupLocationLayerView(v.layerView)&&y.push({mapPoint:v.mapPoint,layerView:v.layerView});return{hits:y,location:f}}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return _([E()],e.prototype,"popup",void 0),_([E()],e.prototype,"popupEnabled",void 0),e=_([Y("esri.views.PopupView")],e),e};let uK=class{constructor(e){this.layerView=e,this._resolver=ln(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:s,_resolver:l}=this;if(!i)return l.resolve(s),l.promise;let f;return i.fetchPopupFeaturesFromGraphics(s,e).catch((y=>(f=y,null))).then((y=>{y?l.resolve(y):l.reject(f)})),l.promise}};const hK=5e3;let od=class extends kt{constructor(e){super(e),this.addHandles([this.on("before-add",(i=>{i.item==null&&i.preventDefault()})),this.on("after-add",(i=>this._own(i.item))),this.on("after-remove",(i=>this._release(i.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(kt.ofType(this.itemType.Type))(e):new kt(e)}};function Lb(t,e){return{type:t,cast:U$,set(i){const s=Ea(i,this._get(e),t);s.owner=this,this._set(e,s)}}}_([E()],od.prototype,"owner",null),od=_([Y("esri.core.support.OwningCollection")],od);var h0;const xm=Hr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),ZO=xm.jsonValues.slice();_D(ZO,"orthometric");const ad=Hr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Xr=h0=class extends It{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return xm.write(t,e,i)}readHeightModel(t,e,i){return xm.read(t)||(i?.messages&&i.messages.push(cK(t,{context:i})),null)}readHeightUnit(t,e,i){return ad.read(t)||(i?.messages&&i.messages.push(Sx(t,{context:i})),null)}readHeightUnitService(t,e,i){return L_(t)||ad.read(t)||(i?.messages&&i.messages.push(Sx(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new h0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=gA(e);return new h0({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new h0;return e.read(t,{origin:"web-scene"}),e}};function Sx(t,e){return new Mo("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function cK(t,e){return new Mo("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}_([E({type:xm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:ZO,default:"ellipsoidal",write:{isRequired:!0}}}}})],Xr.prototype,"heightModel",void 0),_([Xt("web-scene","heightModel")],Xr.prototype,"writeHeightModel",null),_([ae(["web-scene","service"],"heightModel")],Xr.prototype,"readHeightModel",null),_([E({type:ad.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:ad.jsonValues,write:{writer:ad.write,isRequired:!0}}}}})],Xr.prototype,"heightUnit",void 0),_([ae("web-scene","heightUnit")],Xr.prototype,"readHeightUnit",null),_([ae("service","heightUnit")],Xr.prototype,"readHeightUnitService",null),_([E({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Xr.prototype,"vertCRS",void 0),_([ae("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Xr.prototype,"readVertCRS",null),Xr=h0=_([Y("esri.geometry.HeightModelInfo")],Xr);let Sm=class extends od{constructor(e){super(e),this.addHandles(this.on("before-add",(i=>{i.item!=null&&i.item.parent===this.owner&&(At.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Sm=_([Y("esri.support.AnalysesCollection")],Sm);let p3;async function pK(){return p3==null&&(p3=mt(()=>import("./WhereClauseCache-Bh6eqZce.js"),__vite__mapDeps([47,13,14,48,49,50,51,1,2,3,4])).then((t=>new t.WhereClauseCache(500,500)))),p3}async function fK(t,e){const i=await pK(),s=i.get(t,e);if(s==null)throw i.getError(t,e);return s}function dK(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function Xyt(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function Qyt(t,e){return e.length===0?null:`${t} IN (${yK(e)})`}function yK(t){return t.map((e=>typeof e=="string"?gK(e):e)).join(",")}function gK(t){return`'${t.replaceAll("'","''")}'`}function tgt(t){return typeof t=="number"}function egt(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function igt(t){return typeof t=="boolean"}function v1(t){return typeof t=="string"||t instanceof String}function mK(t){return t==null||v1(t)}function rgt(t){return Array.isArray(t)}function sgt(t){return t?.declaredClass==="esri.Graphic"}function ngt(t){return t instanceof Date}const vK="HH:mm",wK="HH:mm:ss",bK="HH:mm:ss.SSS",_K=[bK,wK,vK,"TT"],xK="yyyy-MM-dd";function Tx(t){if(!t||!v1(t))return null;const e=Bt.fromFormat(t,xK);return e.isValid?e:null}function Mx(t){return t&&v1(t)?mj(_K,(e=>{const i=Bt.fromFormat(t,e);return i.isValid?i:null}))??null:null}function Ex(t){if(!t||!v1(t))return null;const e=Bt.fromISO(t);return e.isValid?e:null}var Tm;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Tm||(Tm={}));const XO=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function SK(t){return t!=null&&XO.has(t.type)}function QO(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function tk(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function ek(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const TK=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);x_(XO,TK);function ogt(t,e){const i=t?.domain;if(!i||i.type!=="range")return;const s="range"in i?i.range[0]:i.minValue,l="range"in i?i.range[1]:i.maxValue,f=SK(t);return QO(t)||ek(t)||tk(t)?{...MK(t,l,s),isInteger:f}:{min:s!=null&&typeof s=="number"?s:null,max:l!=null&&typeof l=="number"?l:null,rawMin:s,rawMax:l,isInteger:f}}function MK(t,e,i){return QO(t)?{min:Tx(i)?.toMillis(),max:Tx(e)?.toMillis(),rawMin:i,rawMax:e}:ek(t)?{min:Mx(i)?.toMillis(),max:Mx(e)?.toMillis(),rawMin:i,rawMax:e}:tk(t)?{min:Ex(i)?.toMillis(),max:Ex(e)?.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function EK(t){if(!t)return;const e=t.match($K);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const $K=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function agt(t){return t.match(AK)?.[1]?.replace(/\\'/g,"'")??null}const AK=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let f3;function IK(){return f3||(f3=(async()=>{const[t,e,i]=await Promise.all([mt(()=>import("./arcadeUtils-BM1WYTyw.js"),__vite__mapDeps([238,239,1,2,3,240,50,49,51,241,204,62,242,45,41,15,46,57,48,243,4])),mt(()=>import("./batchExec-DQNtBlFN.js"),__vite__mapDeps([244,7,1,2,3,4])),mt(()=>import("./aiServices-Dam0t3mH.js").then(s=>s.ag),__vite__mapDeps([240,50,49,51,241,204,62,242]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),f3}const PK=/^([0-9_])/,OK=/[^a-z0-9_\u0080-\uffff]+/gi;function lgt(t){return t==null?null:t.trim().replaceAll(OK,"_").replace(PK,"F$1")||null}const kK=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],RK=["field","normalizationField"];function ugt(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if($x(kK,i,e),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)$x(RK,s,e)}}function $x(t,e,i){if(t)for(const s of t){const l=p2(s,e),f=l&&typeof l!="function"&&i.get(l);f&&Ah(s,f.name,e)}}function hgt(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),s=e.get(t.endField);t.startField=i?.name??null,t.endField=s?.name??null}else{const i=e.get(t.startTimeField),s=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=s?.name??null}}const d3=new Set;function x4(t,e){return t&&e?(d3.clear(),Nd(d3,t,e),Array.from(d3).sort()):[]}function Nd(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:s}of e.fields)t.add(s);else for(const s of i)B2(t,e,s);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const s of i)s!=null&&t.add(s)}}function B2(t,e,i){if(typeof i=="string")if(e){const s=e.get(i);s&&t.add(s.name)}else t.add(i)}function cgt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map((i=>i.name)):e}function pgt(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const s=x4(t,e);return s.length/t.fields.length>=i?["*"]:s}async function Yl(t,e,i){if(!i)return;let s;const l=EK(i);if(l)s=[l];else{const{arcadeUtils:f}=await IK();s=f.extractFieldNames(i,e?.fields?.map((y=>y.name)))}for(const f of s)B2(t,e,f)}async function S4(t,e,i){if(i&&i!=="1=1"){const s=await fK(i,e);if(!s.isStandardized)throw new ct("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Nd(t,e,s.fieldNames)}}function fgt({displayField:t,fields:e}){return t||(e?.length?y3(e,"name-or-title")||y3(e,"unique-identifier")||y3(e,"type-or-category")||CK(e):null)}function CK(t){for(const e of t){if(!e?.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function y3(t,e){for(const i of t)if(i?.valueType&&i.valueType===e)return i.name;return null}async function dgt(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function NK(t,e,i){i.onStatisticExpression?Yl(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function ygt(t,e,i){if(!e||!i||!("fields"in i))return;const s=[],l=i.popupTemplate;s.push(ik(t,e,l)),i.fields&&s.push(...i.fields.map((async f=>NK(t,e.fieldsIndex,f)))),await Promise.all(s)}async function ggt(t,e){const{fieldsIndex:i,trackInfo:s}=e;if(!e||!s||!i)return;const l=[s.latestObservations.renderer?.collectRequiredFields(t,i),s.previousObservations.renderer?.collectRequiredFields(t,i),s.trackLines.renderer?.collectRequiredFields(t,i)];s.popupTemplate&&l.push(ik(t,e,s.popupTemplate));for(const f of[s.latestObservations.labelingInfo,s.previousObservations.labelingInfo,s.trackLines.labelingInfo])if(f)for(const y of f)l.push(nk(t,i,y));await Promise.all(l)}async function ik(t,e,i){const s=[];i?.expressionInfos&&s.push(...i.expressionInfos.map((f=>Yl(t,e.fieldsIndex,f.expression))));const l=i?.content;if(Array.isArray(l))for(const f of l)f.type==="expression"&&f.expressionInfo&&s.push(Yl(t,e.fieldsIndex,f.expressionInfo.expression));await Promise.all(s)}async function mgt(t,e,i){e&&(e.timeInfo&&i?.timeExtent&&Nd(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Nd(t,e.fieldsIndex,[e.floorInfo.floorField]),i?.where!=null&&await S4(t,e.fieldsIndex,i.where))}async function vgt(t,e,i){e&&i&&await Promise.all(i.map((s=>LK(t,e,s))))}async function LK(t,e,i){e&&i&&(i.valueExpression?await Yl(t,e.fieldsIndex,i.valueExpression):i.field&&B2(t,e.fieldsIndex,i.field))}function wgt(t){return t?x4(t.fieldsIndex,rk(t)):[]}function DK(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?x4(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function bgt(t,e,i){if(!e||!i)return;const s=e.fieldsIndex;await Promise.all(i.filters.map((l=>S4(t,s,l.where))))}const jK=new Set(["oid","global-id","guid"]),FK=new Set(["oid","global-id"]),zK=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function UK(t){const e=new Set;sk(t).forEach((s=>e.add(s))),DK(t).forEach((s=>e.add(s.toLowerCase())));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach((s=>e.add(s.toLowerCase()))),Object.values(i.transformFieldRoles).forEach((s=>e.add(s.toLowerCase())))),Array.from(e)}function rk(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:s,editDateField:l,editorField:f}=e;return[i,s,l,f].filter(Boolean)}function sk(t){return rk(t).map((e=>e.toLowerCase()))}function _gt(t,e){return t.editable&&!jK.has(t.type)&&!sk(e).includes(t.name?.toLowerCase()??"")}function xgt(t,e){const i=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&i===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&i===e.globalIdField.toLowerCase()||UK(e).includes(i)||FK.has(t.type)||zK.some((s=>s.test(i))))}async function Sgt(t,e){const{labelingInfo:i,fieldsIndex:s}=e;i?.length&&await Promise.all(i.map((l=>nk(t,s,l))))}async function nk(t,e,i){if(!i)return;const s=i.getLabelExpression(),l=i.where;if(s.type==="arcade")await Yl(t,e,s.expression);else{const f=s.expression.match(/{[^}]*}/g);f&&f.forEach((y=>{B2(t,e,y.slice(1,-1))}))}await S4(t,e,l)}function Tgt(t){const e=t.defaultValue;return e!==void 0&&ak(t,e)?e:t.nullable?null:void 0}function Mgt(t){const e=typeof t=="string"?{type:t}:t;return XK(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function ok(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function GK(t){return t===null||ok(t)}function BK(t){return t===null||Number.isInteger(t)}function qK(){return!0}function ak(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?BK:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?GK:ok;break;case"string":case"esriFieldTypeString":i=t.nullable?mK:v1;break;default:i=qK}return arguments.length===1?i:i(e)}const VK=["integer","small-integer","big-integer","long"],HK=["single","double"],WK=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],JK=["esriFieldTypeSingle","esriFieldTypeDouble"],lk=new Set([...VK,...WK]),YK=new Set([...HK,...JK]),KK=x_(lk,YK);function Egt(t){return t!=null&&lk.has(t.type)}function ZK(t){return t!=null&&KK.has(t.type)}function XK(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function $gt(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Agt(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Igt(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Pgt(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function Ogt(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function kgt(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function Rgt(t,e){return QK(t,e)===null}var Mm,Em;function Cgt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function QK(t,e){return t==null||t.nullable&&e===null?null:ak(t,e)?ZK(t)&&!tZ(t.type,Number(e))?Mm.OUT_OF_RANGE:null:Em.INVALID_TYPE}function tZ(t,e){const i=typeof t=="string"?uk(t):t;if(!i)return!1;const s=i.min,l=i.max;return i.isInteger?Number.isInteger(e)&&e>=s&&e<=l:e>=s&&e<=l}function uk(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return eZ;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return iZ;case"esriFieldTypeBigInteger":case"big-integer":return rZ;case"esriFieldTypeSingle":case"single":return sZ;case"esriFieldTypeDouble":case"double":return nZ}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Mm||(Mm={})),(function(t){t.INVALID_TYPE="type-validation-error::invalid-type"})(Em||(Em={}));const eZ={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},iZ={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},rZ={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},sZ={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},nZ={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Ngt(t,e,i){switch(t){case Tm.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Tm.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Em.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case Mm.OUT_OF_RANGE:{const{min:s,max:l}=uk(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${s} to ${l}`}}}function Lgt(t,e){return!oZ(t,e,null)}function oZ(t,e,i){if(!t?.attributes||!e)return!0;const s=new Set(Object.keys(t.attributes));let l=!1;for(const f of e)if(!s.has(f)&&(l=!0,i==null))break;return l}function Dgt(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some((e=>t.toLowerCase().startsWith(e)))}function aZ(t){const e=t?.match(/{[^}]+}/g);return e?e.map((i=>i.slice(1,-1).split(":")[0].trim())):[]}let ag=class extends It{constructor(e){super(e),this.type=null}};_([E({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],ag.prototype,"type",void 0),ag=_([Y("esri.popup.content.Content")],ag);const Ra=ag,oy=new Bi({asc:"ascending",desc:"descending"});let c0=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.field=null,this.order="ascending"}};_([E({type:String,json:{write:!0}})],c0.prototype,"field",void 0),_([E({type:oy.apiValues,json:{type:oy.jsonValues,read:oy.read,write:oy.write}})],c0.prototype,"order",void 0),c0=_([Y("esri.popup.support.AttachmentsOrderByInfo")],c0);const lZ=c0;let Za=class extends Ei.ClonableMixin(Ra){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};_([E({type:String,json:{write:!0}})],Za.prototype,"description",void 0),_([E({type:["auto","preview","list"],json:{write:!0}})],Za.prototype,"displayType",void 0),_([E({type:[lZ],json:{write:!0}})],Za.prototype,"orderByFields",void 0),_([E({type:String,json:{write:!0}})],Za.prototype,"title",void 0),_([E({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Za.prototype,"type",void 0),Za=_([Y("esri.popup.content.AttachmentsContent")],Za);const Ld=Za;var Db;let bu=Db=class extends Ra{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Db({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?yt(this.outFields):null})}};_([E()],bu.prototype,"creator",void 0),_([E()],bu.prototype,"destroyer",void 0),_([E()],bu.prototype,"outFields",void 0),_([E({type:["custom"],readOnly:!0})],bu.prototype,"type",void 0),bu=Db=_([Y("esri.popup.content.CustomContent")],bu);const uZ=bu;var jb;let Qh=jb=class extends It{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new jb({title:this.title,expression:this.expression})}};_([E({type:String,json:{write:!0}})],Qh.prototype,"title",void 0),_([E({type:String,json:{write:!0}})],Qh.prototype,"expression",void 0),_([E({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Qh.prototype,"returnType",void 0),Qh=jb=_([Y("esri.popup.ElementExpressionInfo")],Qh);const hZ=Qh;var Fb;let p0=Fb=class extends Ra{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new Fb({expressionInfo:this.expressionInfo?.clone()})}};_([E({type:hZ,json:{write:!0}})],p0.prototype,"expressionInfo",void 0),_([E({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],p0.prototype,"type",void 0),p0=Fb=_([Y("esri.popup.content.ExpressionContent")],p0);const q2=p0;let tc=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};_([Wt(gq)],tc.prototype,"dateFormat",void 0),_([E({type:Boolean,json:{write:!0}})],tc.prototype,"digitSeparator",void 0),_([E({type:Re,json:{write:!0}})],tc.prototype,"places",void 0),tc=_([Y("esri.popup.support.FieldInfoFormat")],tc);const cZ=tc;var zb;let An=zb=class extends It{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new zb({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};_([E({type:String,json:{write:!0}})],An.prototype,"fieldName",void 0),_([E({type:cZ,json:{write:!0}})],An.prototype,"format",void 0),_([E({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],An.prototype,"isEditable",void 0),_([E({type:String,json:{write:!0}})],An.prototype,"label",void 0),_([Wt(new Bi({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],An.prototype,"stringFieldOption",void 0),_([E({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],An.prototype,"statisticType",void 0),_([E({type:String,json:{write:!0}})],An.prototype,"tooltip",void 0),_([E({type:Boolean,json:{write:!0}})],An.prototype,"visible",void 0),An=zb=_([Y("esri.popup.FieldInfo")],An);const hk=An;var Ub;let Yo=Ub=class extends Ra{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map((i=>i.toJSON()))}clone(){return new Ub(yt({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};_([E({type:Object,json:{write:!0}})],Yo.prototype,"attributes",void 0),_([E({type:String,json:{write:!0}})],Yo.prototype,"description",void 0),_([E({type:[hk]})],Yo.prototype,"fieldInfos",void 0),_([Xt("fieldInfos")],Yo.prototype,"writeFieldInfos",null),_([E({type:String,json:{write:!0}})],Yo.prototype,"title",void 0),_([E({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Yo.prototype,"type",void 0),Yo=Ub=_([Y("esri.popup.content.FieldsContent")],Yo);const Dd=Yo;let _u=class extends It{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};_([E({type:String,json:{write:!0}})],_u.prototype,"altText",void 0),_([E({type:String,json:{write:!0}})],_u.prototype,"caption",void 0),_([E({type:String,json:{write:!0}})],_u.prototype,"title",void 0),_([E({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=_([Y("esri.popup.content.mixins.MediaInfo")],_u);const T4=_u;var Gb;let xu=Gb=class extends Ot{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new Gb({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};_([E()],xu.prototype,"color",void 0),_([E()],xu.prototype,"fieldName",void 0),_([E()],xu.prototype,"tooltip",void 0),_([E()],xu.prototype,"value",void 0),xu=Gb=_([Y("esri.popup.content.support.ChartMediaInfoValueSeries")],xu);const pZ=xu;var Bb;let Xa=Bb=class extends It{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Bb({colors:yt(this.colors),fields:yt(this.fields),normalizeField:this.normalizeField,series:yt(this.series),tooltipField:this.tooltipField})}};_([E({type:[ie],json:{type:[[Re]],write:!0}})],Xa.prototype,"colors",void 0),_([E({type:[String],json:{write:{isRequired:!0}}})],Xa.prototype,"fields",void 0),_([E({type:String,json:{write:!0}})],Xa.prototype,"normalizeField",void 0),_([E({type:[pZ],json:{read:!1}})],Xa.prototype,"series",void 0),_([E({type:String,json:{write:!0}})],Xa.prototype,"tooltipField",void 0),Xa=Bb=_([Y("esri.popup.content.support.ChartMediaInfoValue")],Xa);const fZ=Xa;let f0=class extends T4{constructor(e){super(e),this.type=null,this.value=void 0}};_([E({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],f0.prototype,"type",void 0),_([E({type:fZ,json:{write:{isRequired:!0}}})],f0.prototype,"value",void 0),f0=_([Y("esri.popup.content.mixins.ChartMediaInfo")],f0);const V2=f0,H2=Hr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var qb;let lg=qb=class extends V2{constructor(t){super(t),this.type="bar-chart"}clone(){return new qb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:H2.write,isRequired:!0}}})],lg.prototype,"type",void 0),lg=qb=_([Y("esri.popup.content.BarChartMediaInfo")],lg);const ck=lg;var Vb;let ug=Vb=class extends V2{constructor(t){super(t),this.type="column-chart"}clone(){return new Vb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:H2.write,isRequired:!0}}})],ug.prototype,"type",void 0),ug=Vb=_([Y("esri.popup.content.ColumnChartMediaInfo")],ug);const pk=ug;var Hb;let d0=Hb=class extends It{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new Hb({linkURL:this.linkURL,sourceURL:this.sourceURL})}};_([E({type:String,json:{write:!0}})],d0.prototype,"linkURL",void 0),_([E({type:String,json:{write:{isRequired:!0}}})],d0.prototype,"sourceURL",void 0),d0=Hb=_([Y("esri.popup.content.support.ImageMediaInfoValue")],d0);const dZ=d0;var Wb;let ec=Wb=class extends T4{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new Wb({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};_([E({type:Number,json:{write:!0}})],ec.prototype,"refreshInterval",void 0),_([E({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ec.prototype,"type",void 0),_([E({type:dZ,json:{write:{isRequired:!0}}})],ec.prototype,"value",void 0),ec=Wb=_([Y("esri.popup.content.ImageMediaInfo")],ec);const fk=ec;var Jb;let hg=Jb=class extends V2{constructor(t){super(t),this.type="line-chart"}clone(){return new Jb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:H2.write,isRequired:!0}}})],hg.prototype,"type",void 0),hg=Jb=_([Y("esri.popup.content.LineChartMediaInfo")],hg);const dk=hg;var Yb;let cg=Yb=class extends V2{constructor(t){super(t),this.type="pie-chart"}clone(){return new Yb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:H2.write,isRequired:!0}}})],cg.prototype,"type",void 0),cg=Yb=_([Y("esri.popup.content.PieChartMediaInfo")],cg);const yk=cg,Kb={base:T4,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":ck,"column-chart":pk,"line-chart":dk,"pie-chart":yk,image:fk}};var Zb;let In=Zb=class extends Ra{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map((e=>e.type==="image"?fk.fromJSON(e):e.type==="barchart"?ck.fromJSON(e):e.type==="columnchart"?pk.fromJSON(e):e.type==="linechart"?dk.fromJSON(e):e.type==="piechart"?yk.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map((i=>i.toJSON()))}clone(){return new Zb(yt({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};_([E()],In.prototype,"activeMediaInfoIndex",void 0),_([E({type:Object,json:{write:!0}})],In.prototype,"attributes",void 0),_([E({type:String,json:{write:!0}})],In.prototype,"description",void 0),_([E({types:[Kb]})],In.prototype,"mediaInfos",void 0),_([ae("mediaInfos")],In.prototype,"readMediaInfos",null),_([Xt("mediaInfos")],In.prototype,"writeMediaInfos",null),_([E({type:String,json:{write:!0}})],In.prototype,"title",void 0),_([E({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],In.prototype,"type",void 0),In=Zb=_([Y("esri.popup.content.MediaContent")],In);const jd=In;var Xb;let y0=Xb=class extends It{constructor(t){super(t),this.field=null,this.order=null}clone(){return new Xb({field:this.field,order:this.order})}};_([E({type:String,json:{write:!0}})],y0.prototype,"field",void 0),_([E({type:["asc","desc"],json:{write:!0}})],y0.prototype,"order",void 0),y0=Xb=_([Y("esri.popup.support.RelatedRecordsInfoFieldOrder")],y0);const gk=y0;let io=class extends Ei.ClonableMixin(Ra){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};_([E({type:String,json:{write:!0}})],io.prototype,"description",void 0),_([E({type:Number,json:{type:Re,write:!0}})],io.prototype,"displayCount",void 0),_([E({type:["list"],json:{write:{isRequired:!0}}})],io.prototype,"displayType",void 0),_([E({type:[gk],json:{write:!0}})],io.prototype,"orderByFields",void 0),_([E({type:Number,json:{type:Re,write:{isRequired:!0}}})],io.prototype,"relationshipId",void 0),_([E({type:String,json:{write:!0}})],io.prototype,"title",void 0),_([E({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],io.prototype,"type",void 0),io=_([Y("esri.popup.content.RelationshipContent")],io);const Fd=io;var Qb;let g0=Qb=class extends Ra{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new Qb({text:this.text})}};_([E({type:String,json:{write:!0}})],g0.prototype,"text",void 0),_([E({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],g0.prototype,"type",void 0),g0=Qb=_([Y("esri.popup.content.TextContent")],g0);const zd=g0;let Ko=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};_([E({type:String,json:{write:!0}})],Ko.prototype,"title",void 0),_([E({type:String,json:{write:!0}})],Ko.prototype,"description",void 0),_([E({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Ko.prototype,"type",void 0),_([E({type:Number,json:{type:Re,write:!0}})],Ko.prototype,"associatedNetworkSourceId",void 0),_([E({type:Number,json:{type:Re,write:!0}})],Ko.prototype,"associatedAssetGroup",void 0),_([E({type:Number,json:{type:Re,write:!0}})],Ko.prototype,"associatedAssetType",void 0),Ko=_([Y("esri.popup.support.UtilityNetworkAssociationType")],Ko);const yZ=Ko;let Qa=class extends Ei.ClonableMixin(Ra){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};_([E({type:String,json:{write:!0}})],Qa.prototype,"description",void 0),_([E({type:Number,json:{type:Re,write:!0}})],Qa.prototype,"displayCount",void 0),_([E({type:String,json:{write:!0}})],Qa.prototype,"title",void 0),_([E({type:[yZ],json:{write:!0}})],Qa.prototype,"associationTypes",void 0),_([Wt({utilityNetworkAssociations:"utility-network-associations"})],Qa.prototype,"type",void 0),Qa=_([Y("esri.popup.content.UtilityNetworkAssociationsContent")],Qa);const M4=Qa,gZ={base:null,key:"type",typeMap:{attachment:Ld,media:jd,text:zd,expression:q2,field:Dd,relationship:Fd,utilityNetworkAssociations:M4}},mZ={base:null,key:"type",typeMap:{attachment:Ld,media:jd,text:zd,expression:q2,field:Dd,relationship:Fd}};var t5;let Su=t5=class extends It{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new t5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};_([E({type:String,json:{write:!0}})],Su.prototype,"name",void 0),_([E({type:String,json:{write:!0}})],Su.prototype,"title",void 0),_([E({type:String,json:{write:!0}})],Su.prototype,"expression",void 0),_([E({type:["string","number"],json:{write:!0}})],Su.prototype,"returnType",void 0),Su=t5=_([Y("esri.popup.ExpressionInfo")],Su);const vZ=Su;var e5;let m0=e5=class extends It{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new e5({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};_([E({type:Boolean,json:{write:!0}})],m0.prototype,"returnTopmostRaster",void 0),_([E({type:Boolean,json:{write:!0}})],m0.prototype,"showNoDataRecords",void 0),m0=e5=_([Y("esri.popup.LayerOptions")],m0);const wZ=m0;var i5;let v0=i5=class extends It{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new i5({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?yt(this.orderByFields):null})}};_([E({type:Boolean,json:{write:!0}})],v0.prototype,"showRelatedRecords",void 0),_([E({type:[gk],json:{write:!0}})],v0.prototype,"orderByFields",void 0),v0=i5=_([Y("esri.popup.RelatedRecordsInfo")],v0);const Ax=v0;var r5;let Bs=r5=class extends m1.IdentifiableMixin(Ot){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new r5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};_([E()],Bs.prototype,"active",void 0),_([E()],Bs.prototype,"className",void 0),_([E()],Bs.prototype,"disabled",void 0),_([E()],Bs.prototype,"icon",void 0),_([E()],Bs.prototype,"id",void 0),_([E()],Bs.prototype,"indicator",void 0),_([E()],Bs.prototype,"title",void 0),_([E()],Bs.prototype,"type",void 0),_([E()],Bs.prototype,"visible",void 0),Bs=r5=_([Y("esri.support.actions.ActionBase")],Bs);const E4=Bs;var s5;let pg=s5=class extends E4{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new s5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};_([E()],pg.prototype,"image",void 0),pg=s5=_([Y("esri.support.actions.ActionButton")],pg);const bZ=pg;var n5;let w0=n5=class extends E4{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new n5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};_([E()],w0.prototype,"image",void 0),_([E()],w0.prototype,"value",void 0),w0=n5=_([Y("esri.support.actions.ActionToggle")],w0);const _Z=w0,Rf="relationships/",Ix="expression/",xZ=kt.ofType({key:"type",defaultKeyValue:"button",base:E4,typeMap:{button:bZ,toggle:_Z}}),SZ={base:Ra,key:"type",typeMap:{media:jd,custom:uZ,text:zd,attachments:Ld,fields:Dd,expression:q2,relationship:Fd,utilityNetworkAssociations:M4}},mk=new Set(["attachments","fields","media","text","expression","relationship"]),TZ=new Set([...mk,"utility-network-associations"]);let Ci=class extends Ei.ClonableMixin(It){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map((i=>Bl(SZ,i))):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Oo(e)?e:(At.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:s}=i;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,s):this._readPopupInfo(i)}writeWebSceneContent(e,i,s,l){this._writePopupTemplateContent(e,i,l)}writeWebMapContent(e,i,s,l){this._writePopupTemplateContent(e,i,l)}writeFieldInfos(e,i,s,l){const{content:f}=this,y=Array.isArray(f)?f:null;if(e){const v=y?y.filter((S=>S.type==="fields")):[],b=v.length&&v.every((S=>S.fieldInfos?.length));i.fieldInfos=e.filter(Boolean).map((S=>{const A=S.toJSON(l);return b&&(A.visible=!1),A}))}if(y)for(const v of y)v.type==="fields"&&this._writeFieldsContent(v,i)}writeLayerOptions(e,i,s,l){i[s]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(l)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...s,...this._getContentExpressionInfos(this.content,s)]),Nd(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,s){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter((l=>s?.origin==="web-scene"?mk.has(l.type):TZ.has(l.type))).map((l=>l?.toJSON(s))),i.popupElements.forEach((l=>{l.type==="attachments"?this._writeAttachmentContent(i):l.type==="media"?this._writeMediaContent(l,i):l.type==="text"?this._writeTextContent(l,i):l.type==="relationship"&&this._writeRelationshipContent(l,i)}))):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const s=yt(e.fieldInfos);Array.isArray(i.fieldInfos)?s.forEach((l=>{const f=i.fieldInfos.find((y=>y.fieldName?.toLowerCase()===l.fieldName?.toLowerCase()));f?f.visible=!0:i.fieldInfos.push(l)})):i.fieldInfos=s}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const s=e.orderByFields?.map((f=>this._toFieldOrderJSON(f,e.relationshipId)))||[],l=[...i.relatedRecordsInfo?.orderByFields||[],...s];i.relatedRecordsInfo={showRelatedRecords:!0,...l?.length&&{orderByFields:l}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const s=yt(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...s]:i.mediaInfos=s}_readPopupInfoElements(e,i,s){const l={description:!1,mediaInfos:!1};return s.map((f=>f.type==="media"?(f.mediaInfos||!i||l.mediaInfos||(f.mediaInfos=i,l.mediaInfos=!0),jd.fromJSON(f)):f.type==="text"?(f.text||!e||l.description||(f.text=e,l.description=!0),zd.fromJSON(f)):f.type==="attachments"?Ld.fromJSON(f):f.type==="fields"?Dd.fromJSON(f):f.type==="expression"?q2.fromJSON(f):f.type==="relationship"?Fd.fromJSON(f):f.type==="utilityNetworkAssociations"?M4.fromJSON(f):void 0)).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:s}=e;if(!i?.startsWith(Rf))return null;const l=i.replace(Rf,"").split("/");if(l.length!==2)return null;const f=parseInt(l[0],10),y=l[1];return!Number.isNaN(f)&&y?Fd.fromJSON({relationshipId:f,orderByFields:[{field:y,order:s}]}):null}_toFieldOrderJSON(e,i){const{order:s,field:l}=e;return{field:`${Rf}${i}/${l}`,order:s}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:s,relatedRecordsInfo:l={showRelatedRecords:!1}}){const f=[];e?f.push(new zd({text:e})):f.push(new Dd),Array.isArray(i)&&i.length&&f.push(jd.fromJSON({mediaInfos:i})),s&&f.push(Ld.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:v}=l;return y&&v?.length&&v.forEach((b=>{const S=this._toRelationshipContent(b);S&&f.push(S)})),f.length?f:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const s=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...s.reduce(((l,f)=>[...l,...this._getMediaInfoFields(f)]),[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:s,value:l}=e,f=l||{},{fields:y,normalizeField:v,tooltipField:b,sourceURL:S,linkURL:A}=f,P=[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(S),...this._extractFieldNames(A),...y??[]];return v&&P.push(v),b&&P.push(b),P}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce(((s,l)=>[...s,...l.type==="expression"&&l.expressionInfo?[l.expressionInfo]:[]]),i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((i,s)=>[...i,...this._getContentElementFields(s)]),[]):[]}async _collectExpressionInfoFields(e,i,s){s&&await Promise.all(s.map((l=>Yl(e,i,l.expression))))}_getFieldInfoFields(e){return e?e.filter((({fieldName:i,visible:s})=>!(s!==void 0&&!s||!i||i.startsWith(Rf)||i.startsWith(Ix)))).map((i=>i.fieldName)):[]}_getActionsFields(e){return e?e.toArray().reduce(((i,s)=>[...i,...this._getActionFields(s)]),[]):[]}_getActionFields(e){const{className:i,title:s,type:l}=e,f=l==="button"||l==="toggle"?e.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(f)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return aZ(e).filter((i=>!(i.indexOf(Rf)===0||i.indexOf(Ix)===0)))}};_([E({type:xZ})],Ci.prototype,"actions",void 0),_([E()],Ci.prototype,"content",void 0),_([Ui("content")],Ci.prototype,"castContent",null),_([ae("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ci.prototype,"readContent",null),_([Xt("web-scene","content",{popupElements:{type:kt.ofType(mZ)},showAttachments:{type:Boolean},mediaInfos:{type:kt.ofType(Kb)},description:{type:String},relatedRecordsInfo:{type:Ax}})],Ci.prototype,"writeWebSceneContent",null),_([Xt("content",{popupElements:{type:kt.ofType(gZ)},showAttachments:{type:Boolean},mediaInfos:{type:kt.ofType(Kb)},description:{type:String},relatedRecordsInfo:{type:Ax}})],Ci.prototype,"writeWebMapContent",null),_([E({type:[vZ],json:{write:!0}})],Ci.prototype,"expressionInfos",void 0),_([E({type:[hk]})],Ci.prototype,"fieldInfos",void 0),_([Xt("fieldInfos")],Ci.prototype,"writeFieldInfos",null),_([E({type:wZ})],Ci.prototype,"layerOptions",void 0),_([Xt("layerOptions")],Ci.prototype,"writeLayerOptions",null),_([E({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ci.prototype,"lastEditInfoEnabled",void 0),_([E()],Ci.prototype,"outFields",void 0),_([E()],Ci.prototype,"overwriteActions",void 0),_([E()],Ci.prototype,"returnGeometry",void 0),_([E({json:{type:String}})],Ci.prototype,"title",void 0),_([Xt("title")],Ci.prototype,"writeTitle",null),Ci=_([Y("esri.PopupTemplate")],Ci);const vk=Ci;function Jgt(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const s of e.fieldNames)i.push(t.attributes[s]??null);return JSON.stringify(i)}}}function MZ(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const i=e.uniqueIdFields.map((s=>t.attributes?.[s]));return JSON.stringify(i)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const Px=new Bi({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let EZ=0,Pi=class extends It{constructor(e){super(e),this.id="sym"+EZ++,this.type=null,this.color=new ie([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};_([E({type:Px.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Px.write,isRequired:!0}}})],Pi.prototype,"type",void 0),_([E({type:ie,json:{write:{allowNull:!0}}})],Pi.prototype,"color",void 0),_([ae("color")],Pi.prototype,"readColor",null),Pi=_([Y("esri.symbols.Symbol")],Pi);var o5;let os=o5=class extends Pi{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map((l=>{const f=l.valueExpressionInfo;return f?Yl(t,e,f.expression):null}));await Promise.all(s)}}}clone(){return new o5({data:yt(this.data)})}hash(){return gE(JSON.stringify(this.data)).toString()}};_([E({json:{write:!1}})],os.prototype,"color",void 0),_([E({json:{write:!0}})],os.prototype,"data",void 0),_([ae("data",["symbol"])],os.prototype,"readData",null),_([Xt("data",{})],os.prototype,"writeData",null),_([Wt({CIMSymbolReference:"cim"},{readOnly:!0})],os.prototype,"type",void 0),os=o5=_([Y("esri.symbols.CIMSymbol")],os);let Ur=class extends It{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,s){e||(i[s]=e)}};_([E({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Ur.prototype,"enabled",void 0),_([Xt("enabled")],Ur.prototype,"writeEnabled",null),_([E({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Ur.prototype,"type",void 0),Ur=_([Y("esri.symbols.Symbol3DLayer")],Ur);function $Z(t,e){const i=e.transparency!=null?gm(e.transparency):1,s=e.color;return s&&Array.isArray(s)?new ie([s[0]||0,s[1]||0,s[2]||0,i]):null}function AZ(t,e){e.color=t.toJSON().slice(0,3);const i=iP(t.a);i!==0&&(e.transparency=i)}function eu(t){return{type:ie,nonNullable:t?.nonNullable,json:{type:[Re],default:null,read:{source:["color","transparency"],reader:$Z},write:{target:{color:{type:[Re],isRequired:t?.colorRequiredOnWrite},transparency:{type:Re}},writer:AZ}}}}const Io={type:Number,cast:ai,json:{write:!0}};var $m;function Zgt(t){return t==="emissive"?$m.Emissive:$m.Color}(function(t){t[t.Emissive=0]="Emissive",t[t.Color=1]="Color"})($m||($m={}));let Tu=class extends It{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.extensionLength=0,this.size=Jl(1)}clone(){}cloneProperties(){return{color:yt(this.color),size:this.size,extensionLength:this.extensionLength}}};_([E({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Tu.prototype,"type",void 0),_([E(eu({colorRequiredOnWrite:!0}))],Tu.prototype,"color",void 0),_([E({...Io,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Tu.prototype,"extensionLength",void 0),_([E(Io)],Tu.prototype,"size",void 0),Tu=_([Y("esri.symbols.edges.Edges3D")],Tu);const $4=Tu;var a5;let fg=a5=class extends $4{constructor(t){super(t),this.type="sketch"}clone(){return new a5(this.cloneProperties())}};_([Wt({sketch:"sketch"},{readOnly:!0})],fg.prototype,"type",void 0),fg=a5=_([Y("esri.symbols.edges.SketchEdges3D")],fg);const IZ=fg;var l5;let dg=l5=class extends $4{constructor(t){super(t),this.type="solid"}clone(){return new l5(this.cloneProperties())}};_([Wt({solid:"solid"},{readOnly:!0})],dg.prototype,"type",void 0),dg=l5=_([Y("esri.symbols.edges.SolidEdges3D")],dg);const PZ=dg,wk={types:{key:"type",base:$4,typeMap:{solid:PZ,sketch:IZ}},json:{write:!0}};var u5;let xc=u5=class extends It{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new u5(t)}};_([E({json:{write:!1}})],xc.prototype,"strength",void 0),_([E({json:{write:!1}})],xc.prototype,"source",void 0),xc=u5=_([Y("esri.symbols.support.Symbol3DEmissive")],xc);var h5;let $s=h5=class extends It{constructor(t){super(t),this.color=null,this.emissive=new xc({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new h5(t)}};_([E(eu())],$s.prototype,"color",void 0),_([E({type:xc,json:{write:!1}})],$s.prototype,"emissive",void 0),$s=h5=_([Y("esri.symbols.support.Symbol3DMaterial")],$s);var c5,Zc;let aa=(Zc=class extends Ur{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new c5({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},c5=Zc,Zc);_([Wt({Extrude:"extrude"},{readOnly:!0})],aa.prototype,"type",void 0),_([E({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],aa.prototype,"size",void 0),_([E({type:$s,json:{write:!0}})],aa.prototype,"material",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],aa.prototype,"castShadows",void 0),_([E(wk)],aa.prototype,"edges",void 0),aa=c5=_([Y("esri.symbols.ExtrudeSymbol3DLayer")],aa);let ld=class extends It{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};_([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ld.prototype,"type",void 0),ld=_([Y("esri.symbols.patterns.LinePattern3D")],ld);const OZ=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var p5;const kZ=Hr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Wu=p5=class extends ld{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new p5(t)}};_([E({type:["style"],json:{write:{isRequired:!0}}})],Wu.prototype,"type",void 0),_([Wt(kZ),E({type:OZ,json:{write:{isRequired:!0}}})],Wu.prototype,"style",void 0),Wu=p5=_([Y("esri.symbols.patterns.LineStylePattern3D")],Wu);let ud=class extends It{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};_([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ud.prototype,"type",void 0),ud=_([Y("esri.symbols.patterns.Pattern3D")],ud);const RZ=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var f5;let Sc=f5=class extends ud{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new f5({style:this.style})}};_([E({type:["style"],json:{write:{isRequired:!0}}})],Sc.prototype,"type",void 0),_([E({type:RZ,json:{read:!0,write:{isRequired:!0}}})],Sc.prototype,"style",void 0),Sc=f5=_([Y("esri.symbols.patterns.StylePattern3D")],Sc);const CZ={types:{key:"type",base:ud,typeMap:{style:Sc}},json:{write:!0}},bk={types:{key:"type",base:ld,typeMap:{style:Wu}},json:{write:!0}},hd=new ie("white"),NZ=new ie([255,255,255,0]);function LZ(t){return t.r===0&&t.g===0&&t.b===0}var d5;let cd=d5=class extends $s{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new d5(t)}};_([Wt({multiply:"multiply",replace:"replace",tint:"tint"})],cd.prototype,"colorMixMode",void 0),cd=d5=_([Y("esri.symbols.support.Symbol3DFillMaterial")],cd);function DZ(t,e=!1){return t<=uE?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function emt(t){return(TD(t)?t.byteLength/8:t.length)<=uE?Array.from(t):new Float64Array(t)}function imt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function w1(t=UZ){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function A4(t,e,i,s,l,f,y=w1()){return y[0]=t,y[1]=e,y[2]=i,y[3]=s,y[4]=l,y[5]=f,y}function rmt(t,e=w1()){return jZ(t,0,t.length/3,e)}function jZ(t,e,i,s=w1()){return _k(s,y5),FZ(s,t,e,i),s}function smt(t,e=DZ(24)){const[i,s,l,f,y,v]=t;return e[0]=i,e[1]=s,e[2]=l,e[3]=i,e[4]=s,e[5]=v,e[6]=i,e[7]=y,e[8]=l,e[9]=i,e[10]=y,e[11]=v,e[12]=f,e[13]=s,e[14]=l,e[15]=f,e[16]=s,e[17]=v,e[18]=f,e[19]=y,e[20]=l,e[21]=f,e[22]=y,e[23]=v,e}function nmt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Zt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function omt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function amt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function lmt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function FZ(t,e,i=0,s=e.length/3){let l=t[0],f=t[1],y=t[2],v=t[3],b=t[4],S=t[5];for(let A=0;A<s;A++)l=Math.min(l,e[i+3*A]),f=Math.min(f,e[i+3*A+1]),y=Math.min(y,e[i+3*A+2]),v=Math.max(v,e[i+3*A]),b=Math.max(b,e[i+3*A+1]),S=Math.max(S,e[i+3*A+2]);t[0]=l,t[1]=f,t[2]=y,t[3]=v,t[4]=b,t[5]=S}function umt(t,e,i){const s=e.length;let l=t[0],f=t[1],y=t[2],v=t[3],b=t[4],S=t[5];if(i)for(let A=0;A<s;A++){const P=e[A];l=Math.min(l,P[0]),f=Math.min(f,P[1]),y=Math.min(y,P[2]),v=Math.max(v,P[0]),b=Math.max(b,P[1]),S=Math.max(S,P[2])}else for(let A=0;A<s;A++){const P=e[A];l=Math.min(l,P[0]),f=Math.min(f,P[1]),v=Math.max(v,P[0]),b=Math.max(b,P[1])}t[0]=l,t[1]=f,t[2]=y,t[3]=v,t[4]=b,t[5]=S}function hmt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function b1(t){return t[0]>=t[3]?0:t[3]-t[0]}function _1(t){return t[1]>=t[4]?0:t[4]-t[1]}function x1(t){return t[2]>=t[5]?0:t[5]-t[2]}function cmt(t){const e=b1(t),i=x1(t),s=_1(t);return Math.sqrt(e*e+i*i+s*s)}function pmt(t,e=[0,0,0]){return e[0]=t[0]+b1(t)/2,e[1]=t[1]+_1(t)/2,e[2]=t[2]+x1(t)/2,e}function fmt(t,e=[0,0,0]){return e[0]=b1(t),e[1]=_1(t),e[2]=x1(t),e}function dmt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function zZ(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function ymt(t,e){return e==null||zZ(t,e)}function gmt(t,e,i,s,l=t){return l[0]=t[0]+e,l[1]=t[1]+i,l[2]=t[2]+s,l[3]=t[3]+e,l[4]=t[4]+i,l[5]=t[5]+s,l}function mmt(t,e,i=t){const s=t[0]+b1(t)/2,l=t[1]+_1(t)/2,f=t[2]+x1(t)/2;return i[0]=s+(t[0]-s)*e,i[1]=l+(t[1]-l)*e,i[2]=f+(t[2]-f)*e,i[3]=s+(t[3]-s)*e,i[4]=l+(t[4]-l)*e,i[5]=f+(t[5]-f)*e,i}function vmt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function wmt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function bmt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function _k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function _mt(t){return t?_k(t,y5):w1(y5)}function xmt(t,e){return e||(e=Gr()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Smt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Tmt(t,e,i,s,l){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=s,t[4]=l,t[5]=Number.POSITIVE_INFINITY,t}function Ox(t){return t.length===6}function Mmt(t){return b1(t)===0&&_1(t)===0&&x1(t)===0}function Emt(t,e,i){if(t==null||e==null)return t===e;if(!Ox(t)||!Ox(e))return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}const y5=[1/0,1/0,1/0,-1/0,-1/0,-1/0],UZ=[0,0,0,0,0,0];w1();function $mt(t,{isPrimitive:e,width:i,depth:s,height:l}){const f=e?10:1;if(i==null&&l==null&&s==null)return[f*t[0],f*t[1],f*t[2]];const y=Ao(i,s,l);let v;for(let b=0;b<3;b++){const S=y[b];if(S!=null){v=S/t[b];break}}for(let b=0;b<3;b++)y[b]==null&&(y[b]=t[b]*v);return y}const GZ=A4(-.5,-.5,-.5,.5,.5,.5),BZ=A4(-.5,-.5,0,.5,.5,1),qZ=A4(-.5,-.5,0,.5,.5,.5);function Amt(t){switch(t){case"sphere":case"cube":case"diamond":return GZ;case"cylinder":case"cone":case"inverted-cone":return BZ;case"tetrahedron":return qZ;default:return}}const I4=["butt","square","round"],VZ=[...I4,"none"],xk=["miter","bevel","round"];var g5;let Mu=g5=class extends It{constructor(t){super(t),this.color=new ie([0,0,0,1]),this.size=Jl(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new g5(t)}};_([E(eu({colorRequiredOnWrite:!0}))],Mu.prototype,"color",void 0),_([E({...Io,json:{write:{isRequired:!0}}})],Mu.prototype,"size",void 0),_([E(bk)],Mu.prototype,"pattern",void 0),_([E({type:I4,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Mu.prototype,"patternCap",void 0),Mu=g5=_([Y("esri.symbols.support.Symbol3DOutline")],Mu);var yg,Xc;let rs=(Xc=class extends Ur{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new yg(e)}static fromSimpleFillSymbol(e){const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Wu({style:e.outline.style}):null,s={size:e.outline?.width??0,color:(e.outline?.color??hd).clone(),pattern:i};return i&&e.outline?.cap&&(s.patternCap=e.outline.cap),new yg({material:new cd({color:(e.color??NZ).clone()}),pattern:e.style&&e.style!=="solid"?new Sc({style:e.style}):null,outline:s})}},yg=Xc,Xc);_([Wt({Fill:"fill"},{readOnly:!0})],rs.prototype,"type",void 0),_([E({type:cd,json:{write:!0}})],rs.prototype,"material",void 0),_([E(CZ)],rs.prototype,"pattern",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rs.prototype,"castShadows",void 0),_([E({type:Mu,json:{write:!0}})],rs.prototype,"outline",void 0),_([E(wk)],rs.prototype,"edges",void 0),rs=yg=_([Y("esri.symbols.FillSymbol3DLayer")],rs);var m5;const HZ=Hr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Eu=m5=class extends It{constructor(t){super(t)}readHref(t,e,i){return t?Wp(t,i):e.dataURI}writeHref(t,e,i,s){t&&(Ih(t)?e.dataURI=t:(e.href=yp(t,s),hs(e.href)&&(e.href=zn(e.href))))}clone(){return new m5({href:this.href,primitive:this.primitive})}};_([E({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Eu.prototype,"href",void 0),_([ae("href")],Eu.prototype,"readHref",null),_([Xt("href",{href:{type:String},dataURI:{type:String}})],Eu.prototype,"writeHref",null),_([Wt(HZ)],Eu.prototype,"primitive",void 0),Eu=m5=_([Y("esri.symbols.support.IconSymbol3DLayerResource")],Eu);const Imt="circle";var v5;let Tc=v5=class extends Ot{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new v5({x:this.x,y:this.y})}};_([E({type:Number})],Tc.prototype,"x",void 0),_([E({type:Number})],Tc.prototype,"y",void 0),Tc=v5=_([Y("esri.symbols.support.Symbol3DAnchorPosition2D")],Tc);var w5;let b0=w5=class extends It{constructor(t){super(t),this.color=new ie([0,0,0,1]),this.size=Jl(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new w5(t)}};_([E(eu({colorRequiredOnWrite:!0}))],b0.prototype,"color",void 0),_([E({...Io,json:{write:{isRequired:!0}}})],b0.prototype,"size",void 0),b0=w5=_([Y("esri.symbols.support.Symbol3DIconOutline")],b0);var ic,Qc;let hr=(Qc=class extends Ur{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new ic({anchor:this.anchor,anchorPosition:yt(this.anchorPosition),enabled:this.enabled,material:yt(this.material),outline:yt(this.outline),resource:yt(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const i=e.color||hd,s=kx(e),l=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||hd).clone()}:null;return new ic({size:e.size,angle:e.angle,resource:{primitive:JZ((()=>At.getLogger(this.prototype)),e.style)},material:{color:i},outline:l,anchor:s?"relative":void 0,anchorPosition:s})}static fromPictureMarkerSymbol(e){const i=!e.color||LZ(e.color)?hd:e.color,s=kx(e);return new ic({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:s?"relative":void 0,anchorPosition:s})}static fromCIMSymbol(e){return new ic({resource:{href:AE({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},ic=Qc,Qc);function kx(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,s=Rx(t.xoffset),l=Rx(t.yoffset);return(s||l)&&e&&i?{x:-s/e,y:l/i}:null}function Rx(t){return isFinite(t)?t:0}_([E({type:$s,json:{write:!0}})],hr.prototype,"material",void 0),_([E({type:Eu,json:{write:!0}})],hr.prototype,"resource",void 0),_([Wt({Icon:"icon"},{readOnly:!0})],hr.prototype,"type",void 0),_([E({...Io,json:{write:{isRequired:!0}}})],hr.prototype,"size",void 0),_([Wt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],hr.prototype,"anchor",void 0),_([E({type:Tc,json:{type:[Number],read:{reader:t=>new Tc({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],hr.prototype,"anchorPosition",void 0),_([E({type:b0,json:{write:!0}})],hr.prototype,"outline",void 0),_([E({type:Number,json:{write:!0,default:0}})],hr.prototype,"angle",void 0),hr=ic=_([Y("esri.symbols.IconSymbol3DLayer")],hr);const WZ={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function JZ(t,e){return WZ[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const YZ=["begin","end","begin-end"],Sk=["arrow","circle","square","diamond","cross","x"];let da=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};_([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],da.prototype,"type",void 0),_([E({type:YZ,json:{default:"begin-end",write:!0}})],da.prototype,"placement",void 0),_([E({type:Sk,json:{default:"arrow",write:!0}})],da.prototype,"style",void 0),_([E({type:ie,json:{type:[Re],default:null,write:!0}})],da.prototype,"color",void 0),da=_([Y("esri.symbols.LineStyleMarker3D")],da);var gg,tp;let ts=(tp=class extends Ur{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Jl(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new gg(e)}static fromSimpleLineSymbol(e){const i={enabled:!0,size:e.width??Jl(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Wu({style:e.style}):null,material:new $s({color:(e.color||hd).clone()}),marker:e.marker?new da({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new gg(i)}},gg=tp,tp);_([E({type:$s,json:{write:!0}})],ts.prototype,"material",void 0),_([Wt({Line:"line"},{readOnly:!0})],ts.prototype,"type",void 0),_([E({type:xk,json:{write:!0,default:"miter"}})],ts.prototype,"join",void 0),_([E({type:I4,json:{write:!0,default:"butt"}})],ts.prototype,"cap",void 0),_([E({...Io,json:{write:{isRequired:!0}}})],ts.prototype,"size",void 0),_([E(bk)],ts.prototype,"pattern",void 0),_([E({types:{key:"type",base:da,typeMap:{style:da}},json:{write:!0}})],ts.prototype,"marker",void 0),ts=gg=_([Y("esri.symbols.LineSymbol3DLayer")],ts);var b5;const KZ=Hr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let _0=b5=class extends It{clone(){return new b5({href:this.href,primitive:this.primitive})}};_([E({type:String,json:{read:y2,write:mh}})],_0.prototype,"href",void 0),_([Wt(KZ)],_0.prototype,"primitive",void 0),_0=b5=_([Y("esri.symbols.support.ObjectSymbol3DLayerResource")],_0);const Omt="sphere";var _5;let zu=_5=class extends Ot{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new _5({x:this.x,y:this.y,z:this.z})}};_([E({type:Number})],zu.prototype,"x",void 0),_([E({type:Number})],zu.prototype,"y",void 0),_([E({type:Number})],zu.prototype,"z",void 0),zu=_5=_([Y("esri.symbols.support.Symbol3DAnchorPosition3D")],zu);var x5,ep;let tr=(ep=class extends Ur{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new x5({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},x5=ep,ep);_([E({type:$s,json:{write:!0}})],tr.prototype,"material",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],tr.prototype,"castShadows",void 0),_([E({type:_0,json:{write:!0}})],tr.prototype,"resource",void 0),_([Wt({Object:"object"},{readOnly:!0})],tr.prototype,"type",void 0),_([E({type:Number,json:{write:!0}})],tr.prototype,"width",void 0),_([E({type:Number,json:{write:!0}})],tr.prototype,"height",void 0),_([E({type:Number,json:{write:!0}})],tr.prototype,"depth",void 0),_([Wt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],tr.prototype,"anchor",void 0),_([E({type:zu,json:{type:[Number],read:{reader:t=>new zu({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],tr.prototype,"anchorPosition",void 0),_([E({type:Number,json:{write:!0}})],tr.prototype,"heading",void 0),_([E({type:Number,json:{write:!0}})],tr.prototype,"tilt",void 0),_([E({type:Number,json:{write:!0}})],tr.prototype,"roll",void 0),_([E({readOnly:!0})],tr.prototype,"isPrimitive",null),tr=x5=_([Y("esri.symbols.ObjectSymbol3DLayer")],tr);var S5,ip;let lr=(ip=class extends Ur{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new S5({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},S5=ip,ip);_([E({type:$s,json:{write:!0}})],lr.prototype,"material",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],lr.prototype,"castShadows",void 0),_([Wt({Path:"path"},{readOnly:!0})],lr.prototype,"type",void 0),_([E({type:["circle","quad"],json:{write:!0,default:"circle"}})],lr.prototype,"profile",void 0),_([E({type:xk,json:{write:!0,default:"miter"}})],lr.prototype,"join",void 0),_([E({type:VZ,json:{write:!0,default:"butt"}})],lr.prototype,"cap",void 0),_([E({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],lr.prototype,"width",void 0),_([ae("width",["width","size","height"])],lr.prototype,"readWidth",null),_([E({type:Number,json:{write:!0}})],lr.prototype,"height",void 0),_([ae("height",["height","size","width"])],lr.prototype,"readHeight",null),_([E({type:["center","bottom","top"],json:{write:!0,default:"center"}})],lr.prototype,"anchor",void 0),_([E({type:["heading","all"],json:{write:!0,default:"all"}})],lr.prototype,"profileRotation",void 0),lr=S5=_([Y("esri.symbols.PathSymbol3DLayer")],lr);const ZZ=["none","underline","line-through"],XZ=["normal","italic","oblique"],QZ=["normal","lighter","bold","bolder"],Tk={type:Number,cast:t=>{const e=Ts(t);return e===0?1:Rr(e,.1,4)},nonNullable:!0},tX=["left","right","center"],eX=["baseline","top","middle","bottom"],Mk={type:tX,nonNullable:!0},Ek={type:eX,nonNullable:!0},kmt=8;var T5;let Ws=T5=class extends It{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return ai(t)}clone(){return new T5({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};_([E({type:ZZ,json:{default:"none",write:!0}})],Ws.prototype,"decoration",void 0),_([E({type:String,json:{write:!0}})],Ws.prototype,"family",void 0),_([E({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Ws.prototype,"size",void 0),_([Ui("size")],Ws.prototype,"castSize",null),_([E({type:XZ,json:{default:"normal",write:!0}})],Ws.prototype,"style",void 0),_([E({type:QZ,json:{default:"normal",write:!0}})],Ws.prototype,"weight",void 0),Ws=T5=_([Y("esri.symbols.Font")],Ws);var M5;let Mc=M5=class extends It{constructor(){super(...arguments),this.color=new ie([0,0,0,1]),this.size=0}clone(){const t={color:yt(this.color),size:this.size};return new M5(t)}};_([E(eu())],Mc.prototype,"color",void 0),_([E(Io)],Mc.prototype,"size",void 0),Mc=M5=_([Y("esri.symbols.support.Symbol3DHalo")],Mc);let pd=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.color=null}};_([E(eu())],pd.prototype,"color",void 0),pd=_([Y("esri.symbols.support.Symbol3DTextBackground")],pd);var mg,rp;let Hi=(rp=class extends Ur{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,s,l){const f={...l,textSymbol3D:!0};i.font=e.write({},f),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new mg({enabled:this.enabled,font:this.font&&yt(this.font),halo:this.halo&&yt(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:yt(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new mg({font:e.font!=null?e.font.clone():new Ws,halo:iX(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new $s({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new pd({color:e.backgroundColor.clone()}):null})}},mg=rp,rp);function iX(t,e){return t&&e!=null&&e>0?new Mc({color:yt(t),size:e}):null}_([E({type:Ws,json:{write:!0}})],Hi.prototype,"font",null),_([Xt("font")],Hi.prototype,"writeFont",null),_([E({type:Mc,json:{write:!0}})],Hi.prototype,"halo",void 0),_([E({...Mk,json:{default:"center",write:!0}})],Hi.prototype,"horizontalAlignment",void 0),_([E({...Tk,json:{default:1,write:!0}})],Hi.prototype,"lineHeight",void 0),_([E({type:$s,json:{write:!0}})],Hi.prototype,"material",void 0),_([E({type:pd,json:{write:!0}})],Hi.prototype,"background",void 0),_([E(Io)],Hi.prototype,"size",null),_([E({type:String,json:{write:!0}})],Hi.prototype,"text",void 0),_([Wt({Text:"text"},{readOnly:!0})],Hi.prototype,"type",void 0),_([E({...Ek,json:{default:"baseline",write:!0}})],Hi.prototype,"verticalAlignment",void 0),Hi=mg=_([Y("esri.symbols.TextSymbol3DLayer")],Hi);var E5,sp;let la=(sp=class extends Ur{constructor(e){super(e),this.color=$5.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new E5({color:yt(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},E5=sp,sp);_([E({type:ie,nonNullable:!0,json:{type:[Re],write:(t,e,i)=>e[i]=t.toArray(ie.AlphaMode.UNLESS_OPAQUE),default:()=>$5.clone(),defaultEquals:t=>t.toCss(!0)===$5.toCss(!0)}})],la.prototype,"color",void 0),_([Wt({Water:"water"},{readOnly:!0})],la.prototype,"type",void 0),_([E({type:["small","medium","large"],json:{write:!0,default:"medium"}})],la.prototype,"waterbodySize",void 0),_([E({type:Number,json:{write:!0,default:null}})],la.prototype,"waveDirection",void 0),_([E({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],la.prototype,"waveStrength",void 0),la=E5=_([Y("esri.symbols.WaterSymbol3DLayer")],la);const $5=new ie([0,119,190]);var A5;let ya=A5=class extends Ot{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new A5({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};_([E({type:String})],ya.prototype,"name",void 0),_([E({type:String})],ya.prototype,"styleUrl",void 0),_([E({type:String})],ya.prototype,"styleName",void 0),_([E({type:wt})],ya.prototype,"portal",void 0),ya=A5=_([Y("esri.symbols.support.StyleOrigin")],ya);var I5;let fd=I5=class extends Ot{constructor(){super(...arguments),this.url=""}clone(){return new I5({url:this.url})}};_([E({type:String})],fd.prototype,"url",void 0),fd=I5=_([Y("esri.symbols.support.Thumbnail")],fd);const $k={icon:hr,object:tr,line:ts,path:lr,fill:rs,extrude:aa,text:Hi,water:la},rX=kt.ofType({base:Ur,key:"type",typeMap:$k,errorContext:"symbol-layer"});let es=class extends Pi{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,s=i?.type,l=s||kt;this._set("symbolLayers",new l)}get color(){return null}set color(e){this.constructed&&At.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Ea(e,this._get("symbolLayers"))}readStyleOrigin(e,i,s){if(e.styleUrl&&e.name){const l=Wp(e.styleUrl,s);return new ya({styleUrl:l,name:e.name})}if(e.styleName&&e.name)return new ya({portal:s?.portal||wt.getDefault(),styleName:e.styleName,name:e.name});s?.messages&&s.messages.push(new Mo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:e}))}writeStyleOrigin(e,i,s,l){if(e.styleUrl&&e.name){let f=yp(e.styleUrl,l);hs(f)&&(f=zn(f)),i.styleOrigin={styleUrl:f,name:e.name}}else e.styleName&&e.name&&(e.portal&&l?.portal&&!$E(e.portal.restUrl,l.portal.restUrl)?l?.messages&&l.messages.push(new Mo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ur||e&&$k[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};_([E({json:{read:!1,write:!1}})],es.prototype,"color",null),_([E({type:rX,nonNullable:!0,json:{write:!0}}),Ui(U$)],es.prototype,"symbolLayers",null),_([E({type:ya})],es.prototype,"styleOrigin",void 0),_([ae("styleOrigin")],es.prototype,"readStyleOrigin",null),_([Xt("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],es.prototype,"writeStyleOrigin",null),_([E({type:fd,json:{read:!1}})],es.prototype,"thumbnail",void 0),_([E({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],es.prototype,"type",void 0),es=_([Y("esri.symbols.Symbol3D")],es);let Ec=class extends It{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};_([E({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Ec.prototype,"type",void 0),_([E({readOnly:!0})],Ec.prototype,"visible",void 0),Ec=_([Y("esri.symbols.callouts.Callout3D")],Ec);var P5;let vg=P5=class extends It{constructor(t){super(t),this.color=new ie("white")}clone(){return new P5({color:yt(this.color)})}};_([E(eu({colorRequiredOnWrite:!0}))],vg.prototype,"color",void 0),vg=P5=_([Y("esri.symbols.callouts.LineCallout3DBorder")],vg);const sX=vg;var O5;let ua=O5=class extends Ec{constructor(t){super(t),this.type="line",this.color=new ie([0,0,0,1]),this.size=Jl(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new O5({color:yt(this.color),size:this.size,border:yt(this.border)})}};_([Wt({line:"line"})],ua.prototype,"type",void 0),_([E(eu({colorRequiredOnWrite:!0}))],ua.prototype,"color",void 0),_([E({...Io,json:{write:{isRequired:!0}}})],ua.prototype,"size",void 0),_([E({type:sX,json:{write:!0}})],ua.prototype,"border",void 0),_([E({readOnly:!0})],ua.prototype,"visible",null),ua=O5=_([Y("esri.symbols.callouts.LineCallout3D")],ua);function P4(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Ak(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!P4(t)}function Lmt(t){return t.type==="point-3d"||t.type==="label-3d"}function Dmt(t){return t.horizontalAlignment==="center"}const Ik={types:{key:"type",base:Ec,typeMap:{line:ua}},json:{write:!0}};var k5;let bl=k5=class extends It{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new k5({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};_([E({...Io,json:{write:{isRequired:!0}}})],bl.prototype,"screenLength",void 0),_([E({type:Number,nonNullable:!0,json:{write:!0,default:0}})],bl.prototype,"minWorldLength",void 0),_([E({type:Number,json:{write:!0}})],bl.prototype,"maxWorldLength",void 0),bl=k5=_([Y("esri.symbols.support.Symbol3DVerticalOffset")],bl);var wg;const Pk=kt.ofType({base:null,key:"type",typeMap:{text:Hi}});let co=wg=class extends es{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Pk,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Ak(this)}hasVisibleVerticalOffset(){return P4(this)}clone(){return new wg({styleOrigin:yt(this.styleOrigin),symbolLayers:yt(this.symbolLayers),thumbnail:yt(this.thumbnail),callout:yt(this.callout),verticalOffset:yt(this.verticalOffset)})}static fromTextSymbol(t){return new wg({symbolLayers:new kt([Hi.fromTextSymbol(t)])})}};_([E({type:bl,json:{write:!0}})],co.prototype,"verticalOffset",void 0),_([E(Ik)],co.prototype,"callout",void 0),_([E({json:{read:!1,write:!1}})],co.prototype,"styleOrigin",void 0),_([E({type:Pk})],co.prototype,"symbolLayers",void 0),_([Wt({LabelSymbol3D:"label-3d"},{readOnly:!0})],co.prototype,"type",void 0),co=wg=_([Y("esri.symbols.LabelSymbol3D")],co);var bg;const Ok=kt.ofType({base:null,key:"type",typeMap:{line:ts,path:lr}}),nX=kt.ofType({base:null,key:"type",typeMap:{line:ts,path:lr}});let Il=bg=class extends es{constructor(t){super(t),this.symbolLayers=new Ok,this.type="line-3d"}clone(){return new bg({styleOrigin:yt(this.styleOrigin),symbolLayers:yt(this.symbolLayers),thumbnail:yt(this.thumbnail)})}static fromSimpleLineSymbol(t){return new bg({symbolLayers:new kt([ts.fromSimpleLineSymbol(t)])})}};_([E({type:Ok,json:{type:nX}})],Il.prototype,"symbolLayers",void 0),_([Wt({LineSymbol3D:"line-3d"},{readOnly:!0})],Il.prototype,"type",void 0),Il=bg=_([Y("esri.symbols.LineSymbol3D")],Il);var _g;const kk=kt.ofType({base:null,key:"type",typeMap:{fill:rs}});let Pl=_g=class extends es{constructor(t){super(t),this.symbolLayers=new kk,this.type="mesh-3d"}clone(){return new _g({styleOrigin:yt(this.styleOrigin),symbolLayers:yt(this.symbolLayers),thumbnail:yt(this.thumbnail)})}static fromSimpleFillSymbol(t){return new _g({symbolLayers:new kt([rs.fromSimpleFillSymbol(t)])})}};_([E({type:kk})],Pl.prototype,"symbolLayers",void 0),_([Wt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Pl.prototype,"type",void 0),Pl=_g=_([Y("esri.symbols.MeshSymbol3D")],Pl);let x0=class extends Pi{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};_([Wt({esriSLS:"simple-line"},{readOnly:!0})],x0.prototype,"type",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],x0.prototype,"width",void 0),x0=_([Y("esri.symbols.LineSymbol")],x0);var R5;let ro=R5=class extends It{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,s){e[i]=s?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,s){s?.origin==="web-map"||(e[i]=t)}clone(){return new R5({color:yt(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};_([E({type:["begin","end","begin-end"],json:{write:!0}})],ro.prototype,"placement",void 0),_([Wt({"line-marker":"line-marker"},{readOnly:!0}),E({json:{origins:{"web-map":{write:!1}}}})],ro.prototype,"type",void 0),_([E({type:Sk})],ro.prototype,"style",void 0),_([Xt("style")],ro.prototype,"writeStyle",null),_([E({type:ie,value:null,json:{write:{allowNull:!0}}})],ro.prototype,"color",null),_([ae("color")],ro.prototype,"readColor",null),_([Xt("color")],ro.prototype,"writeColor",null),ro=R5=_([Y("esri.symbols.LineSymbolMarker")],ro);const oX=ro;var C5;const g3=new Bi({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Wi=C5=class extends x0{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,s,l,f){if(t&&typeof t!="string")return t;const y={};return t!=null&&(y.style=t),e!=null&&(y.color=e),i!=null&&(y.width=ai(i)),s!=null&&(y.cap=s),l!=null&&(y.join=l),f!=null&&(y.miterLimit=ai(f)),y}clone(){return new C5({color:yt(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};_([Wt({esriSLS:"simple-line"},{readOnly:!0})],Wi.prototype,"type",void 0),_([E({type:g3.apiValues,json:{read:g3.read,write:g3.write}})],Wi.prototype,"style",void 0),_([E({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],Wi.prototype,"cap",void 0),_([E({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],Wi.prototype,"join",void 0),_([E({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":oX}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wi.prototype,"marker",void 0),_([E({type:Number,json:{read:!1,write:!1}})],Wi.prototype,"miterLimit",void 0),Wi=C5=_([Y("esri.symbols.SimpleLineSymbol")],Wi);let $c=class extends Pi{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};_([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Wi}},json:{default:null,write:!0}})],$c.prototype,"outline",void 0),_([E({type:["simple-fill","picture-fill"],readOnly:!0})],$c.prototype,"type",void 0),$c=_([Y("esri.symbols.FillSymbol")],$c);function aX(t,e,i){return e.imageData?AE({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Rk(e.url,i)}function Rk(t,e){if(!hs(t)){const i=uX(e);if(i)return t1(i,"images",t)}return Wp(t,e)}function lX(t,e,i,s){if(Ih(t)){const l=dp(t);if(!l)return;e.contentType=l.mediaType,e.imageData=l.data,i&&i.imageData===e.imageData&&i.url&&mh(i.url,e,"url",s)}else mh(t,e,"url",s)}const Ck={json:{read:{source:["imageData","url"],reader:aX},write:{writer(t,e,i,s){lX(t,e,this.source,s)}}}},Nk={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const s={};return e.imageData&&(s.imageData=e.imageData),e.contentType&&(s.contentType=e.contentType),e.url&&(s.url=Rk(e.url,i)),s}}}};function uX(t){if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const s=i?.type;return s==="feature"||s==="stream"?i.parsedUrl?.path:s==="map-image"||s==="tile"?t.url?.path:null}var N5;let Kr=N5=class extends $c{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string"&&t.imageData==null)return t;const l={};return t&&(l.url=t),e&&(l.outline=e),i!=null&&(l.width=ai(i)),s!=null&&(l.height=ai(s)),l}clone(){const t=new N5({color:yt(this.color),height:this.height,outline:yt(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",yt(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};_([Wt({esriPFS:"picture-fill"},{readOnly:!0})],Kr.prototype,"type",void 0),_([E(Ck)],Kr.prototype,"url",void 0),_([E({type:Number,json:{write:!0}})],Kr.prototype,"xscale",void 0),_([E({type:Number,json:{write:!0}})],Kr.prototype,"yscale",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Kr.prototype,"width",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Kr.prototype,"height",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Kr.prototype,"xoffset",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Kr.prototype,"yoffset",void 0),_([E(Nk)],Kr.prototype,"source",void 0),Kr=N5=_([Y("esri.symbols.PictureFillSymbol")],Kr);let ha=class extends Pi{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};_([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],ha.prototype,"angle",void 0),_([E({type:["simple-marker","picture-marker"],readOnly:!0})],ha.prototype,"type",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],ha.prototype,"xoffset",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],ha.prototype,"yoffset",void 0),_([E({cast:t=>t==="auto"?t:Ts(ai(t)),json:{write:!0}})],ha.prototype,"size",void 0),ha=_([Y("esri.symbols.MarkerSymbol")],ha);var L5;let jr=L5=class extends ha{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e!=null&&(s.width=ai(e)),i!=null&&(s.height=ai(i)),s}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new L5({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",yt(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};_([E({json:{write:!1}})],jr.prototype,"color",void 0),_([Wt({esriPMS:"picture-marker"},{readOnly:!0})],jr.prototype,"type",void 0),_([E(Ck)],jr.prototype,"url",void 0),_([E(Nk)],jr.prototype,"source",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],jr.prototype,"height",void 0),_([ae("height",["height","size"])],jr.prototype,"readHeight",null),_([E({type:Number,cast:ai,json:{write:!0}})],jr.prototype,"width",void 0),_([E({json:{write:!1}})],jr.prototype,"size",void 0),jr=L5=_([Y("esri.symbols.PictureMarkerSymbol")],jr);var $u;const Lk=kt.ofType({base:null,key:"type",typeMap:{icon:hr,object:tr,text:Hi}});let fo=$u=class extends es{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Lk,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Ak(this)}hasVisibleVerticalOffset(){return P4(this)}clone(){return new $u({verticalOffset:yt(this.verticalOffset),callout:yt(this.callout),styleOrigin:yt(this.styleOrigin),symbolLayers:yt(this.symbolLayers),thumbnail:yt(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new $u({symbolLayers:new kt([hr.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new $u({symbolLayers:new kt([hr.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new $u(i?.callout?{symbolLayers:new kt([hr.fromCIMSymbol(t)]),callout:new ua({size:.5,color:new ie([0,0,0])}),verticalOffset:new bl({screenLength:40})}:{symbolLayers:new kt([hr.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new $u({symbolLayers:new kt([Hi.fromTextSymbol(t)])})}};_([E({type:bl,json:{write:!0}})],fo.prototype,"verticalOffset",void 0),_([E(Ik)],fo.prototype,"callout",void 0),_([E({type:Lk,json:{origins:{"web-scene":{write:!0}}}})],fo.prototype,"symbolLayers",void 0),_([Wt({PointSymbol3D:"point-3d"},{readOnly:!0})],fo.prototype,"type",void 0),fo=$u=_([Y("esri.symbols.PointSymbol3D")],fo);var S0;const Dk=kt.ofType({base:null,key:"type",typeMap:{extrude:aa,fill:rs,icon:hr,line:ts,object:tr,text:Hi,water:la}});let Ol=S0=class extends es{constructor(t){super(t),this.symbolLayers=new Dk,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Gl(At.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Gl(At.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles($a((()=>this.symbolLayers),"after-add",(({item:e})=>t(e)),$o))}clone(){return new S0({styleOrigin:yt(this.styleOrigin),symbolLayers:yt(this.symbolLayers),thumbnail:yt(this.thumbnail)})}static fromJSON(t){const e=new S0;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new S0({symbolLayers:new kt([rs.fromSimpleFillSymbol(t)])})}};_([E({type:Dk,json:{write:!0}})],Ol.prototype,"symbolLayers",void 0),_([Wt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ol.prototype,"type",void 0),Ol=S0=_([Y("esri.symbols.PolygonSymbol3D")],Ol);var D5;const m3=new Bi({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Ms=D5=class extends $c{constructor(...t){super(...t),this.color=new ie([0,0,0,.25]),this.outline=new Wi,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e&&(s.outline=e),i&&(s.color=i),s}clone(){return new D5({color:yt(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};_([E()],Ms.prototype,"color",void 0),_([E()],Ms.prototype,"outline",void 0),_([Wt({esriSFS:"simple-fill"},{readOnly:!0})],Ms.prototype,"type",void 0),_([E({type:m3.apiValues,json:{read:m3.read,write:m3.write}})],Ms.prototype,"style",void 0),Ms=D5=_([Y("esri.symbols.SimpleFillSymbol")],Ms);var j5;const v3=new Bi({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let rr=j5=class extends ha{constructor(...t){super(...t),this.color=new ie([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Wi}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string")return t;const l={};return t&&(l.style=t),e!=null&&(l.size=ai(e)),i&&(l.outline=i),s&&(l.color=s),l}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new j5({angle:this.angle,color:yt(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};_([E()],rr.prototype,"color",void 0),_([Xt("color")],rr.prototype,"writeColor",null),_([Wt({esriSMS:"simple-marker"},{readOnly:!0})],rr.prototype,"type",void 0),_([E()],rr.prototype,"size",void 0),_([E({type:v3.apiValues,json:{read:v3.read,write:v3.write}})],rr.prototype,"style",void 0),_([E({type:String,json:{write:!0}})],rr.prototype,"path",null),_([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Wi}},json:{default:null,write:!0}})],rr.prototype,"outline",void 0),rr=j5=_([Y("esri.symbols.SimpleMarkerSymbol")],rr);var F5;let Pe=F5=class extends Pi{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Ws,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.text=t),e&&(s.font=e),i&&(s.color=i),s}writeLineWidth(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}castLineWidth(t){return ai(t)}writeLineHeight(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}clone(){return new F5({angle:this.angle,backgroundColor:yt(this.backgroundColor),borderLineColor:yt(this.borderLineColor),borderLineSize:this.borderLineSize,color:yt(this.color),font:this.font&&this.font.clone(),haloColor:yt(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};_([E({type:ie,json:{write:!0}})],Pe.prototype,"backgroundColor",void 0),_([E({type:ie,json:{write:!0}})],Pe.prototype,"borderLineColor",void 0),_([E({type:Number,json:{write:!0},cast:ai})],Pe.prototype,"borderLineSize",void 0),_([E({type:Ws,json:{write:!0}})],Pe.prototype,"font",void 0),_([E({...Mk,json:{write:!0}})],Pe.prototype,"horizontalAlignment",void 0),_([E({type:Boolean,json:{write:!0}})],Pe.prototype,"kerning",void 0),_([E({type:ie,json:{write:!0}})],Pe.prototype,"haloColor",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Pe.prototype,"haloSize",void 0),_([E({type:Boolean,json:{write:!0}})],Pe.prototype,"rightToLeft",void 0),_([E({type:Boolean,json:{write:!0}})],Pe.prototype,"rotated",void 0),_([E({type:String,json:{write:!0}})],Pe.prototype,"text",void 0),_([Wt({esriTS:"text"},{readOnly:!0})],Pe.prototype,"type",void 0),_([E({...Ek,json:{write:!0}})],Pe.prototype,"verticalAlignment",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Pe.prototype,"xoffset",void 0),_([E({type:Number,cast:ai,json:{write:!0}})],Pe.prototype,"yoffset",void 0),_([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Pe.prototype,"angle",void 0),_([E({type:Number,json:{write:!0}})],Pe.prototype,"width",void 0),_([E({type:Number})],Pe.prototype,"lineWidth",void 0),_([Xt("lineWidth")],Pe.prototype,"writeLineWidth",null),_([Ui("lineWidth")],Pe.prototype,"castLineWidth",null),_([E(Tk)],Pe.prototype,"lineHeight",void 0),_([Xt("lineHeight")],Pe.prototype,"writeLineHeight",null),Pe=F5=_([Y("esri.symbols.TextSymbol")],Pe);var z5;let Qr=z5=class extends Pi{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:wt.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new z5({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){e$(At.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new ct("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const y=i&&e.get(i);if(y)return y.clone()}const{resolveWebStyleSymbol:s}=await mt(()=>import("./webStyleSymbolUtils-Bm8bRxb6.js"),__vite__mapDeps([245,246,174,175,116,64,178,1,2,3,4]));Ce(t);const l=s(this,{portal:this.portal},t);l.catch((y=>{At.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",y)}));const f=await l;return e?.set(i,f.clone()),f}};_([E({json:{write:!1}})],Qr.prototype,"color",void 0),_([E({type:String,json:{write:!0}})],Qr.prototype,"styleName",void 0),_([E({type:wt,json:{write:!1}})],Qr.prototype,"portal",void 0),_([E({type:String,json:{read:y2,write:mh}})],Qr.prototype,"styleUrl",void 0),_([E({type:fd,json:{read:!1}})],Qr.prototype,"thumbnail",void 0),_([E({type:String,json:{write:!0}})],Qr.prototype,"name",void 0),_([Wt({styleSymbolReference:"web-style"},{readOnly:!0})],Qr.prototype,"type",void 0),_([E()],Qr.prototype,"_fetchCacheKey",null),Qr=z5=_([Y("esri.symbols.WebStyleSymbol")],Qr);function Umt(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Gmt(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const _l={base:Pi,key:"type",typeMap:{"simple-fill":Ms,"picture-fill":Kr,"picture-marker":jr,"simple-line":Wi,"simple-marker":rr,text:Pe,"label-3d":co,"line-3d":Il,"mesh-3d":Pl,"point-3d":fo,"polygon-3d":Ol,"web-style":Qr,cim:os},errorContext:"symbol"},Bmt={base:Pi,key:"type",typeMap:{"picture-marker":jr,"simple-marker":rr,"point-3d":fo,cim:os},errorContext:"symbol"},qmt={base:Pi,key:"type",typeMap:{"simple-line":Wi,"line-3d":Il,cim:os},errorContext:"symbol"},Vmt={base:Pi,key:"type",typeMap:{"simple-fill":Ms,"picture-fill":Kr,"polygon-3d":Ol,cim:os},errorContext:"symbol"},Hmt={base:Pi,key:"type",typeMap:{"picture-marker":jr,"simple-marker":rr,text:Pe,"web-style":Qr,cim:os},errorContext:"symbol"},Wmt=E_({types:_l}),Jmt={base:Pi,key:"type",typeMap:{"simple-fill":Ms,"picture-fill":Kr,"picture-marker":jr,"simple-line":Wi,"simple-marker":rr,text:Pe,"line-3d":Il,"mesh-3d":Pl,"point-3d":fo,"polygon-3d":Ol,"web-style":Qr,cim:os},errorContext:"symbol"},Ymt={base:Pi,key:"type",typeMap:{text:Pe,"label-3d":co},errorContext:"symbol"},Kmt={base:Pi,key:"type",typeMap:{"line-3d":Il,"mesh-3d":Pl,"point-3d":fo,"polygon-3d":Ol,"web-style":Qr,cim:os},errorContext:"symbol"},Zmt={base:Pi,key:"type",typeMap:{"label-3d":co},errorContext:"symbol"},Xmt=Bl(_l);var U5;function hX(t){if(!t)return null;const e={};for(const i in t){const s=Pp(t[i]);s&&(e[i]=s)}return Object.keys(e).length!==0?e:null}function cX(t){if(t==null)return null;const e={};for(const i in t){const s=t[i];s&&(e[i]=s.toJSON())}return Object.keys(e).length!==0?e:null}var np;let oi=(np=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:zy(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Zj(At.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new U5({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const s of[i,this.sourceLayer,this.layer])if(s){if("popupTemplate"in s&&s.popupTemplate)return s.popupTemplate;if(e&&"defaultPopupTemplate"in s&&s.defaultPopupTemplate!=null)return s.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const s=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",s,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=this.sourceLayer??this.layer;return e?MZ(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){return{aggregateGeometries:cX(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:zg(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if(i?.type==="mesh"){const s={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",s,s,e.action)}}_notifyLayer(e,i,s,l){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const f={graphic:this,property:e,oldValue:i,newValue:s};e==="origin-transform"&&(f.action=l),e==="attributes"&&(f.attributeName=l),this.layer.graphicChanged(f)}_watchMeshGeometryChanges(){this.addHandles([Rs((()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0),(({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())})),Rs((()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0),(()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(e,i)=>e===i,sync:!0})])}},U5=np,np);_([E({value:null,json:{read:hX}})],oi.prototype,"aggregateGeometries",null),_([E({value:null})],oi.prototype,"attributes",null),_([E({value:null,types:y4,json:{read:Pp}})],oi.prototype,"geometry",null),_([E({type:Boolean})],oi.prototype,"isAggregate",void 0),_([E({clonable:!1})],oi.prototype,"layer",void 0),_([E({clonable:"reference"})],oi.prototype,"origin",void 0),_([E({type:vk,value:null})],oi.prototype,"popupTemplate",null),_([E({clonable:"reference"})],oi.prototype,"sourceLayer",void 0),_([E({value:null,types:_l})],oi.prototype,"symbol",null),_([E({clonable:!1,json:{read:!1,write:!1}})],oi.prototype,"_version",void 0),_([E({type:Boolean,value:!0})],oi.prototype,"visible",null),oi=U5=_([Y("esri.Graphic")],oi);let rh=class extends od{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};_([F$({Type:oi,ensureType:Vr(oi)})],rh.prototype,"itemType",void 0),rh=_([Y("esri.support.GraphicsCollection")],rh);let tl=class extends Ot{constructor(e){super(e),this.view=null,this.baseLayerViews=new kt,this.referenceLayerViews=new kt,this._loadingHandle=zt((()=>this.view?.map?.basemap),(i=>{i&&i.load().catch((()=>{}))}),Pr)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some((i=>i.updating))||this.referenceLayerViews.some((i=>i.updating)))}};_([E({constructOnly:!0})],tl.prototype,"view",void 0),_([E({readOnly:!0})],tl.prototype,"baseLayerViews",void 0),_([E({readOnly:!0})],tl.prototype,"referenceLayerViews",void 0),_([E({readOnly:!0})],tl.prototype,"suspended",null),_([E({type:Boolean,readOnly:!0})],tl.prototype,"updating",null),tl=_([Y("esri.views.BasemapView")],tl);const pX=tl;let vs=class extends Ot{constructor(e){super(e),this.factor=1.5,this.offset=Yi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};_([E({type:Number})],vs.prototype,"factor",void 0),_([E({nonNullable:!0})],vs.prototype,"offset",void 0),_([E()],vs.prototype,"position",void 0),_([E({type:Number,range:{min:0}})],vs.prototype,"size",void 0),_([E()],vs.prototype,"maskUrl",void 0),_([E()],vs.prototype,"maskEnabled",void 0),_([E()],vs.prototype,"overlayUrl",void 0),_([E()],vs.prototype,"overlayEnabled",void 0),_([E({readOnly:!0})],vs.prototype,"version",null),_([E({type:Boolean})],vs.prototype,"visible",void 0),vs=_([Y("esri.views.Magnifier")],vs);const jk=vs;let xg=class{constructor(e){this._observable=new l1,this._map=new Map(e)}get size(){return Ft(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Ft(this._observable),this._map.entries()}forEach(e,i){Ft(this._observable),this._map.forEach(((s,l)=>e.call(i,s,l,this)),i)}get(e){return Ft(this._observable),this._map.get(e)}has(e){return Ft(this._observable),this._map.has(e)}keys(){return Ft(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Ft(this._observable),this._map.values()}[Symbol.iterator](){return Ft(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var G5;let T0=G5=class extends It{constructor(t){super(t),this.name=null,this.code=null}clone(){return new G5({name:this.name,code:this.code})}};_([E({type:String,json:{write:{isRequired:!0}}})],T0.prototype,"name",void 0),_([E({type:[String,Number],json:{write:{isRequired:!0}}})],T0.prototype,"code",void 0),T0=G5=_([Y("esri.layers.support.CodedValue")],T0);const fX=new Bi({inherited:"inherited",codedValue:"coded-value",range:"range"});let kl=class extends It{constructor(e){super(e),this.name=null,this.type=null}};_([E({type:String,json:{write:!0}})],kl.prototype,"name",void 0),_([Wt(fX),E({json:{write:{isRequired:!0}}})],kl.prototype,"type",void 0),kl=_([Y("esri.layers.support.Domain")],kl);var B5,op;let Ac=(op=class extends kl{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const s=String(e);this.codedValues.some((l=>(String(l.code)===s&&(i=l.name),!!i)))}return i}clone(){return new B5({codedValues:yt(this.codedValues),name:this.name})}},B5=op,op);_([E({type:[T0],json:{write:{isRequired:!0}}})],Ac.prototype,"codedValues",void 0),_([Wt({codedValue:"coded-value"})],Ac.prototype,"type",void 0),Ac=B5=_([Y("esri.layers.support.CodedValueDomain")],Ac);var q5,ap;let dd=(ap=class extends kl{constructor(e){super(e),this.type="inherited"}clone(){return new q5}},q5=ap,ap);_([Wt({inherited:"inherited"})],dd.prototype,"type",void 0),dd=q5=_([Y("esri.layers.support.InheritedDomain")],dd);var V5,lp;let Uu=(lp=class extends kl{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new V5({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},V5=lp,lp);_([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],Uu.prototype,"maxValue",void 0),_([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],Uu.prototype,"minValue",void 0),_([Wt({range:"range"})],Uu.prototype,"type",void 0),Uu=V5=_([Y("esri.layers.support.RangeDomain")],Uu);const dX={key:"type",base:kl,typeMap:{range:Uu,"coded-value":Ac,inherited:dd}};function yX(t){if(!t?.type)return null;switch(t.type){case"range":return Uu.fromJSON(t);case"codedValue":return Ac.fromJSON(t);case"inherited":return dd.fromJSON(t)}return null}const gX=new Bi({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var H5;const mX=new Bi({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var up;let vr=(up=class extends It{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let s=null;try{s=i?JSON.parse(i):null}catch{}return s?.value??null}readValueType(e,{description:i}){let s=null;try{s=i?JSON.parse(i):null}catch{}return s?mX.fromJSON(s.fieldValueType):null}clone(){return new H5({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},H5=up,up);_([E({type:String,json:{write:!0}})],vr.prototype,"alias",void 0),_([E({type:[String,Number],json:{write:{allowNull:!0}}})],vr.prototype,"defaultValue",void 0),_([E()],vr.prototype,"description",void 0),_([ae("description")],vr.prototype,"readDescription",null),_([E({types:dX,json:{read:{reader:yX},write:!0}})],vr.prototype,"domain",void 0),_([E({type:Boolean,json:{write:!0}})],vr.prototype,"editable",void 0),_([E({type:Re,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],vr.prototype,"length",void 0),_([E({type:String,json:{write:!0}})],vr.prototype,"name",void 0),_([E({type:Boolean,json:{write:!0}})],vr.prototype,"nullable",void 0),_([Wt(gX)],vr.prototype,"type",void 0),_([E()],vr.prototype,"valueType",void 0),_([ae("valueType",["description"])],vr.prototype,"readValueType",null),_([E({type:Boolean,json:{read:!1}})],vr.prototype,"visible",void 0),vr=H5=_([Y("esri.layers.support.Field")],vr);var W5;let rc=W5=class extends It{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new W5({mapLayerId:t,gdbVersion:e})}};_([Wt({mapLayer:"map-layer"}),E({json:{write:{isRequired:!0}}})],rc.prototype,"type",void 0),_([E({type:Re,json:{write:{isRequired:!0}}})],rc.prototype,"mapLayerId",void 0),_([E({type:String,json:{write:!0}})],rc.prototype,"gdbVersion",void 0),rc=W5=_([Y("esri.layers.support.source.MapLayerSource")],rc);var J5;let Zo=J5=class extends It{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:s,geometryType:l}=this,f={workspaceId:t,query:e,oidFields:i,spatialReference:s?.clone()??void 0,geometryType:l};return new J5(f)}};_([Wt({queryTable:"query-table"}),E({json:{write:{isRequired:!0}}})],Zo.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],Zo.prototype,"workspaceId",void 0),_([E({type:String,json:{write:!0}})],Zo.prototype,"query",void 0),_([E({type:String,json:{write:!0}})],Zo.prototype,"oidFields",void 0),_([E({type:Et,json:{write:!0}})],Zo.prototype,"spatialReference",void 0),_([Wt(pJ)],Zo.prototype,"geometryType",void 0),Zo=J5=_([Y("esri.layers.support.source.QueryTableDataSource")],Zo);var Y5;let sc=Y5=class extends It{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new Y5({workspaceId:t,dataSourceName:e})}};_([Wt({raster:"raster"}),E({json:{write:{isRequired:!0}}})],sc.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],sc.prototype,"dataSourceName",void 0),_([E({type:String,json:{write:!0}})],sc.prototype,"workspaceId",void 0),sc=Y5=_([Y("esri.layers.support.source.RasterDataSource")],sc);var K5;let Au=K5=class extends It{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new K5({workspaceId:t,gdbVersion:e,dataSourceName:i})}};_([Wt({table:"table"}),E({json:{write:{isRequired:!0}}})],Au.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],Au.prototype,"workspaceId",void 0),_([E({type:String,json:{write:!0}})],Au.prototype,"gdbVersion",void 0),_([E({type:String,json:{write:!0}})],Au.prototype,"dataSourceName",void 0),Au=K5=_([Y("esri.layers.support.source.TableDataSource")],Au);var Z5,X5;const vX=Hr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ws=Z5=class extends It{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return Cx()(t,e,i)}castLeftTableSource(t){return Bl(Q5(),t)}readRightTableSource(t,e,i){return Cx()(t,e,i)}castRightTableSource(t){return Bl(Q5(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:s,joinType:l}=this,f={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:s?.clone()??void 0,joinType:l};return new Z5(f)}};_([Wt({joinTable:"join-table"}),E({json:{write:{isRequired:!0}}})],ws.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],ws.prototype,"leftTableKey",void 0),_([E({type:String,json:{write:!0}})],ws.prototype,"rightTableKey",void 0),_([E({json:{write:!0}})],ws.prototype,"leftTableSource",void 0),_([ae("leftTableSource")],ws.prototype,"readLeftTableSource",null),_([Ui("leftTableSource")],ws.prototype,"castLeftTableSource",null),_([E({json:{write:!0}})],ws.prototype,"rightTableSource",void 0),_([ae("rightTableSource")],ws.prototype,"readRightTableSource",null),_([Ui("rightTableSource")],ws.prototype,"castRightTableSource",null),_([Wt(vX)],ws.prototype,"joinType",void 0),ws=Z5=_([Y("esri.layers.support.source.JoinTableDataSource")],ws);let w3=null;function Cx(){return w3||(w3=E_({types:Q5()})),w3}let b3=null;function Q5(){return b3||(b3={key:"type",base:null,typeMap:{"data-layer":ca,"map-layer":rc}}),b3}const wX={key:"type",base:null,typeMap:{"join-table":ws,"query-table":Zo,raster:sc,table:Au}};var hp;let ca=(hp=class extends It{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new X5({fields:e,dataSource:i})}},X5=hp,hp);_([Wt({dataLayer:"data-layer"}),E({json:{write:{isRequired:!0}}})],ca.prototype,"type",void 0),_([E({type:[vr],json:{write:!0}})],ca.prototype,"fields",void 0),_([E({types:wX,json:{write:!0}})],ca.prototype,"dataSource",void 0),ca=X5=_([Y("esri.layers.support.source.DataLayerSource")],ca),ca.from=Vr(ca);let Iu=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};_([E({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Iu.prototype,"onFields",void 0),_([E({type:String,json:{write:!0}})],Iu.prototype,"operator",void 0),_([E({type:String,json:{write:!0}})],Iu.prototype,"searchTerm",void 0),_([E({type:String,json:{write:!0}})],Iu.prototype,"searchType",void 0),Iu=_([Y("esri.rest.support.FullTextSearch")],Iu);const bX=Iu;var t9;const Nx=new Bi({upperLeft:"upper-left",lowerLeft:"lower-left"});let gl=t9=class extends It{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new t9(yt({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};_([E({type:Zt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gl.prototype,"extent",void 0),_([E({type:["view","edit"],json:{write:!0}})],gl.prototype,"mode",void 0),_([E({type:String,json:{read:Nx.read,write:Nx.write}})],gl.prototype,"originPosition",void 0),_([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gl.prototype,"tolerance",void 0),gl=t9=_([Y("esri.rest.support.QuantizationParameters")],gl);const _X=new Bi({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var e9;const Lx=new Bi({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Pn=e9=class extends It{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=yt(t))}clone(){return new e9({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:yt(this.statisticParameters)})}};_([E({type:Number,json:{write:!0}})],Pn.prototype,"maxPointCount",void 0),_([E({type:Number,json:{write:!0}})],Pn.prototype,"maxRecordCount",void 0),_([E({type:Number,json:{write:!0}})],Pn.prototype,"maxVertexCount",void 0),_([E({type:String,json:{write:!0}})],Pn.prototype,"onStatisticField",void 0),_([E({type:String,json:{write:!0}})],Pn.prototype,"outStatisticFieldName",void 0),_([E({type:String,json:{read:{source:"statisticType",reader:Lx.read},write:{target:"statisticType",writer:Lx.write}}})],Pn.prototype,"statisticType",void 0),_([E({type:Object})],Pn.prototype,"statisticParameters",void 0),_([Xt("statisticParameters")],Pn.prototype,"writeStatisticParameters",null),Pn=e9=_([Y("esri.rest.support.StatisticDefinition")],Pn);var Sg;const xX=new Bi({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var hh;let jt=(hh=class extends It{static from(e){return Kp(Sg,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const s={};for(const l in e){const f=e[l];Array.isArray(f)?s[l]=f.map((y=>y instanceof Date?y.getTime():y)):f instanceof Date?s[l]=f.getTime():s[l]=f}i.parameterValues=s}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new Sg(yt({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},Sg=hh,hh.MAX_MAX_RECORD_COUNT_FACTOR=5,hh);_([E({json:{write:!0}})],jt.prototype,"aggregateIds",void 0),_([E({type:Boolean,json:{write:!0}})],jt.prototype,"cacheHint",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"compactGeometryEnabled",void 0),_([E({json:{write:!0}})],jt.prototype,"datumTransformation",void 0),_([Ui("datumTransformation")],jt.prototype,"castDatumTransformation",null),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"defaultSpatialReferenceEnabled",void 0),_([E({type:Number,json:{write:!0}})],jt.prototype,"distance",void 0),_([E({type:ca,json:{write:!0}})],jt.prototype,"dynamicDataSource",void 0),_([E({type:String,json:{write:!0}})],jt.prototype,"formatOf3DObjects",void 0),_([E({type:[bX],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],jt.prototype,"fullText",void 0),_([E({type:String,json:{write:!0}})],jt.prototype,"gdbVersion",void 0),_([E({types:y4,json:{read:Pp,write:!0}})],jt.prototype,"geometry",void 0),_([E({type:Number,json:{write:!0}})],jt.prototype,"geometryPrecision",void 0),_([E({type:[String],json:{write:!0}})],jt.prototype,"groupByFieldsForStatistics",void 0),_([E({type:String,json:{write:!0}})],jt.prototype,"having",void 0),_([E({type:Date})],jt.prototype,"historicMoment",void 0),_([Xt("historicMoment")],jt.prototype,"writeHistoricMoment",null),_([E({type:Number,json:{write:!0}})],jt.prototype,"maxAllowableOffset",void 0),_([E({type:Number,cast:t=>t<1?1:t>jt.MAX_MAX_RECORD_COUNT_FACTOR?jt.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],jt.prototype,"maxRecordCountFactor",void 0),_([E({type:["xyFootprint"],json:{write:!0}})],jt.prototype,"multipatchOption",void 0),_([E({type:Number,json:{read:{source:"resultRecordCount"}}})],jt.prototype,"num",void 0),_([E({json:{write:!0}})],jt.prototype,"objectIds",void 0),_([E({type:[String],json:{write:!0}})],jt.prototype,"orderByFields",void 0),_([E({type:[String],json:{write:!0}})],jt.prototype,"outFields",void 0),_([E({type:Et,json:{name:"outSR",write:!0}})],jt.prototype,"outSpatialReference",void 0),_([E({type:[Pn],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],jt.prototype,"outStatistics",void 0),_([E({json:{write:!0}})],jt.prototype,"parameterValues",void 0),_([Xt("parameterValues")],jt.prototype,"writeParameterValues",null),_([E({type:Ct,json:{write:!0}})],jt.prototype,"pixelSize",void 0),_([E({type:gl,json:{write:!0}})],jt.prototype,"quantizationParameters",void 0),_([E({type:[Object],json:{write:!0}})],jt.prototype,"rangeValues",void 0),_([E({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],jt.prototype,"relationParameter",void 0),_([E({type:String,json:{write:!0}})],jt.prototype,"resultType",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"returnCentroid",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"returnDistinctValues",void 0),_([E({type:Boolean,json:{default:!0,write:!0}})],jt.prototype,"returnExceededLimitFeatures",void 0),_([E({type:Boolean,json:{write:!0}})],jt.prototype,"returnGeometry",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"returnQueryGeometry",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"returnM",void 0),_([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],jt.prototype,"returnZ",void 0),_([E({type:Boolean,json:{write:!0}})],jt.prototype,"returnTrueCurves",void 0),_([E({type:Et,json:{write:!0}})],jt.prototype,"sourceSpatialReference",void 0),_([Wt(_X,{ignoreUnknown:!1,name:"spatialRel"})],jt.prototype,"spatialRelationship",void 0),_([E({type:Number,json:{read:{source:"resultOffset"}}})],jt.prototype,"start",void 0),_([Xt("start"),Xt("num")],jt.prototype,"writeStart",null),_([E({type:String,json:{write:!0}})],jt.prototype,"sqlFormat",void 0),_([E({type:String,json:{write:!0}})],jt.prototype,"text",void 0),_([E({type:ur,json:{write:!0}})],jt.prototype,"timeExtent",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],jt.prototype,"timeReferenceUnknownClient",void 0),_([Wt(xX,{ignoreUnknown:!1}),E({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],jt.prototype,"units",void 0),_([E({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],jt.prototype,"where",void 0),_([Xt("where")],jt.prototype,"writeWhere",null),jt=Sg=_([Y("esri.rest.support.Query")],jt);function Va(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let qs=class extends fn.EventedAccessor{constructor(e){super(e),this._selectionMap=new xg,this._sources=new kt,this._trashCan=[],this._layerEditHandles=new kt,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([zt((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),zt((()=>this.view),(e=>{e?.when().then((()=>this.syncSources()))}),Pr),$a((()=>this.sources),"change",(e=>{const i=this._selectionMap,s=[];for(const l of e.removed){const f=i.get(l);f&&(i.delete(l),f.highlightHandle?.remove(),s.push({layer:l,selection:[],added:[],removed:[...f.selection]}))}this._refreshListeners(),s.length&&this._onSelectionChange(s)}),{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(ri)}get selections(){return Array.from(this._selectionMap.entries()).map((e=>{const[i,s]=e;return{layer:i,selection:[...s.selection]}}))}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Ea(e,this._sources)}syncSources(){const e=new Set,i=this.view?.map;if(!i)return;const s=l=>{Aq(l)?(l.layers?.forEach(s),l.tables?.forEach(s)):$q(l)?(l.sublayers?.forEach(s),l.subtables?.forEach(s)):$8(l)?l.sublayers?.forEach(s):Va(l)&&e.add(l)};i.allLayers.forEach(s),i.allTables.forEach(s),this.sources=[...e]}async getSelectedFeatures(e,i={},s="layerView"){const{view:l,selections:f}=this;if(!l&&s==="layerView")return At.getLogger(this).warn("Cannot query layer views without a view."),[];const y=(e?.length?f.filter((v=>e.includes(v.layer))):f).map((async v=>{const{layer:b,selection:S}=v;if(!S.length)return;const A=Fu(b)?b.parent:b;if(A!=null){if(l&&s==="layerView"&&!Dx(A)&&jx(A)){const P=await l.whenLayerView(A).catch((()=>null));if(P)return Fx(P,S,i)}return Fx(A,S,i)}})).filter(yh);return(await Promise.all(y)).filter(yh)}updateSelection(e){const i=new Map;for(const[f,y]of this._selectionMap)i.set(f,[...y.selection]);let s=!1;const l=e.current.concat(e.added);for(const f of l){const y=f.sourceLayer,v=f.getObjectId();if(this.sources.includes(y)&&(Va(y)||Fu(y))&&v!==null){const b=e1(i,y,(()=>[]));b.includes(v)||(b.push(v),s=!0)}}for(const f of e.removed){const y=f.sourceLayer,v=f.getObjectId();if(this.sources.includes(y)&&(Va(y)||Fu(y))&&v!==null){const b=i.get(y),S=b?.indexOf(v);S!==void 0&&S>=0&&(b?.splice(S,1),s=!0)}}if(s){const{_selectionMap:f,_trashCan:y}=this,v=[];for(const[b,S]of i){const A=f.get(b);A!==void 0&&y.push(A),f.set(b,{selection:S}),v.push({layer:b,selection:S,...lw(A!==void 0?A.selection:[],S)})}this._onSelectionChange(v)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,i){const s=this._selectionMap.get(e),l=s!==void 0?[...s.selection]:[];for(const f of i)l.includes(f)||l.push(f);this._setSelection(e,l)}removeFromSelection(e,i){const s=this._selectionMap.get(e);if(!s)return;const l=[];for(const f of s.selection)i.includes(f)||l.push(f);this._setSelection(e,l)}toggleInSelection(e,i){const s=this._selectionMap.get(e);if(!s||s.selection.length===0)return void this._setSelection(e,i);const l=new Set(s.selection),f=new Set(i),y=kF(l,f);this._setSelection(e,Array.from(y))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[s,l]of this._selectionMap.entries())i.push({layer:s,added:[],removed:[...l.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:i,_selectionMap:s,showHighlight:l}=this,f=this._vizTaskId;for(const y of e){const v=s.get(y),b=Fu(y)?y.parent:y;if(b!=null&&jx(b)){if(Dx(b))continue;i.whenLayerView(b).then((S=>{v?.highlightHandle?.remove(),v!=null&&l&&f===this._vizTaskId&&"highlight"in S&&typeof S.highlight=="function"&&v.selection.length>0&&(v.highlightHandle=S.highlight(v.selection,this.highlightName))})).catch((()=>{v?.highlightHandle?.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(ri);const e=new Set(this.sources.map((i=>Fu(i)?i.parent:i)));for(const i of e)Va(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",(s=>this._onLayerEdit(s,i))))}_onLayerEdit(e,i){if($8(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const s=[];e.deletedFeatures.forEach((({error:l,objectId:f})=>{f!=null&&l==null&&s.push(f)})),this.removeFromSelection(i,s)}}_onParentLayerEdit(e,i){const{deletedFeatures:s,edits:l,updatedFeatures:f}=e;if(l?.updateFeatures?.forEach((y=>{const v=y.getObjectId()??y.attributes[i.objectIdField];if(v==null||f.find((A=>A.objectId===v))?.error)return;const b=i.findSublayerForFeature(y);if(!Va(b))return;const S=i.sublayers.find((A=>!(!Va(A)||!this.getSelection(A)?.includes(v))));Va(S)&&S!==b&&(this.removeFromSelection(S,[v]),this.appendToSelection(b,[v]))})),s.length){const y=[];s.forEach((({error:v,objectId:b})=>{b!=null&&v==null&&y.push(b)})),i.sublayers.forEach((v=>{Va(v)&&this._selectionMap.has(v)&&this.removeFromSelection(v,y)}))}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const s=this._selectionMap.get(e);if(s===void 0||!TX(s,{selection:i})){s!==void 0&&this._trashCan.push(s),this._selectionMap.set(e,{selection:[...i]});const l={layer:e,selection:[...i],...lw(s!==void 0?s.selection:[],i)};this._onSelectionChange([l])}}};_([E()],qs.prototype,"_selectionMap",void 0),_([E()],qs.prototype,"_sources",void 0),_([E({readOnly:!0,nonNullable:!0})],qs.prototype,"selections",null),_([E({readOnly:!0,nonNullable:!0})],qs.prototype,"count",null),_([E()],qs.prototype,"view",void 0),_([E({readOnly:!0,nonNullable:!0})],qs.prototype,"hasSelection",null),_([E()],qs.prototype,"showHighlight",void 0),_([E()],qs.prototype,"sources",null),_([E()],qs.prototype,"highlightName",void 0),qs=_([Y("esri.views.SelectionManager")],qs);const Dx=t=>Fu(t)?t.parent?.isTable===!0:t.isTable,SX=t=>t.layer!==void 0,jx=t=>t?.when!==void 0,TX=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],s=[...e.selection];if(i.length!==s.length)return!1;i.sort(),s.sort();for(let l=0;l<i.length;l++)if(i[l]!==s[l])return!1}return!0},Fx=async(t,e,i={})=>{let s;if(SX(t)){const l=t;s=l===void 0?null:await l.queryFeatures(new jt({...i,objectIds:e})).then((f=>({data:f,layer:t.layer})))}else{const l=t;s=l===void 0?null:await l.queryFeatures(new jt({...i,objectIds:e})).then((f=>({data:f,layer:l})))}return s},MX=qs;let M0=class extends Ei.ClonableMixin(Ot){constructor(e){super(e),this.accentColor=new ie([255,127,0]),this.textColor=new ie([255,255,255])}};_([E({type:ie,nonNullable:!0})],M0.prototype,"accentColor",void 0),_([E({type:ie,nonNullable:!0})],M0.prototype,"textColor",void 0),M0=_([Y("esri.views.Theme")],M0);const i9=M0;var zx;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(zx||(zx={}));const Fk=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],zk={};function Uk(t){return!!zk[t]}function EX(t){for(const e of t)if(!Uk(e))return!1;return!0}Fk.forEach((t=>{zk[t]=!0}));let Gk=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach((({handler:i,priority:s},l)=>this.inputManager?.installHandlers(l,[i],s)))}disconnect(){this.inputManager&&this._handlers.forEach(((e,i)=>this.inputManager?.uninstallHandlers(i))),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,s,l){const f=Array.isArray(e)?e:e.split(",");if(!EX(f))return f.some(Uk)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,v;Array.isArray(i)?v=i:(y=i,v=[]),typeof s=="function"?y=s:l=s,l=l??Le.DEFAULT;const b=this._createUniqueGroupName(),S=new $X(this.view,f,v,y);this._handlers.set(b,{handler:S,priority:l});for(const A of f){const P=this._handlerCounts.get(A)||0;this._handlerCounts.set(A,P+1)}return this.inputManager&&this.inputManager.installHandlers(b,[S],l),fe((()=>this._removeHandler(b,f)))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const s of i){const l=this._handlerCounts.get(s);l===void 0||(l===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,l-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},$X=class extends Ki{constructor(e,i,s,l){super(!0),this._latestDragStart=void 0,this.view=e;for(const f of i)switch(f){case"click":this.registerIncoming("click",s,(y=>l(PX(e,y))));break;case"double-click":this.registerIncoming("double-click",s,(y=>l(OX(e,y))));break;case"immediate-click":this.registerIncoming("immediate-click",s,(y=>l(kX(e,y))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,(y=>l(RX(e,y))));break;case"hold":this.registerIncoming("hold",s,(y=>l(CX(e,y))));break;case"drag":this.registerIncoming("drag",s,(y=>{const v=this._wrapDrag(y);v&&l(v)}));break;case"key-down":this.registerIncoming("key-down",s,(y=>l(NX(y))));break;case"key-up":this.registerIncoming("key-up",s,(y=>l(LX(y))));break;case"pointer-down":this.registerIncoming("pointer-down",s,(y=>l(Cf(y,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",s,(y=>l(Cf(y,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",s,(y=>l(Cf(y,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,(y=>l(DX(y))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,(y=>l(jX(y))));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,(y=>l(Cf(y,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,(y=>l(Cf(y,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",s,(y=>{l(FX(y))}));break;case"focus":this.registerIncoming("focus",s,(y=>{l(AX(y))}));break;case"blur":this.registerIncoming("blur",s,(y=>{l(IX(y))}))}}_wrapDrag(e){const i=e.data,{x:s,y:l}=i.center,{action:f,pointerType:y,button:v}=i;if(f==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const b=i.pointer.native,S=i.buttons,{cancelable:A,timestamp:P}=e,k={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return f==="end"&&(this._latestDragStart=void 0),{type:"drag",action:f,x:s,y:l,origin:k,pointerType:y,button:v,buttons:S,radius:i.radius,angle:QI(i.angle),native:b,timestamp:P,cancelable:A,stopPropagation:()=>e.stopPropagation(),defer:C=>e.defer(C),preventDefault:()=>e.preventDefault()}}};function AX(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function IX(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function PX(t,e){const{pointerType:i,button:s,buttons:l,x:f,y,native:v,eventId:b}=e.data,{cancelable:S,timestamp:A}=e;return{type:"click",pointerType:i,button:s,buttons:l,x:f,y,native:v,timestamp:A,screenPoint:Yi(f,y),mapPoint:S1(t,f,y),eventId:b,cancelable:S,stopPropagation:()=>e.stopPropagation(),defer:P=>e.defer(P),preventDefault:()=>e.preventDefault()}}function OX(t,e){const{pointerType:i,button:s,buttons:l,x:f,y,native:v,eventId:b}=e.data,{cancelable:S,timestamp:A}=e;return{type:"double-click",pointerType:i,button:s,buttons:l,x:f,y,native:v,timestamp:A,mapPoint:S1(t,f,y),eventId:b,cancelable:S,stopPropagation:()=>e.stopPropagation(),defer:P=>e.defer(P),preventDefault:()=>e.preventDefault()}}function kX(t,e){const{pointerType:i,button:s,buttons:l,x:f,y,native:v,eventId:b}=e.data,S=v.pointerId,{cancelable:A,timestamp:P}=e;return{type:"immediate-click",pointerId:S,pointerType:i,button:s,buttons:l,x:f,y,native:v,timestamp:P,mapPoint:S1(t,f,y),eventId:b,cancelable:A,stopPropagation:()=>e.stopPropagation(),defer:k=>e.defer(k),preventDefault:()=>e.preventDefault()}}function RX(t,e){const{pointerType:i,button:s,buttons:l,x:f,y,native:v,eventId:b}=e.data,S=v.pointerId,{cancelable:A,timestamp:P}=e;return{type:"immediate-double-click",pointerId:S,pointerType:i,button:s,buttons:l,x:f,y,native:v,timestamp:P,mapPoint:S1(t,f,y),eventId:b,cancelable:A,stopPropagation:()=>e.stopPropagation(),defer:k=>e.defer(k),preventDefault:()=>e.preventDefault()}}function CX(t,e){const{pointerType:i,button:s,buttons:l,x:f,y,native:v}=e.data,{cancelable:b,timestamp:S}=e;return{type:"hold",pointerType:i,button:s,buttons:l,x:f,y,native:v,timestamp:S,mapPoint:S1(t,f,y),cancelable:b,stopPropagation:()=>e.stopPropagation(),defer:A=>e.defer(A),preventDefault:()=>e.preventDefault()}}function S1(t,e,i){return t.toMap(Yi(e,i),{exclude:[]})}function NX(t){const{key:e,repeat:i,native:s}=t.data,{cancelable:l,timestamp:f}=t;return{type:"key-down",key:e,repeat:i,native:s,timestamp:f,cancelable:l,stopPropagation:()=>t.stopPropagation(),defer:y=>t.defer(y),preventDefault:()=>t.preventDefault()}}function LX(t){const{key:e,native:i}=t.data,{cancelable:s,timestamp:l}=t;return{type:"key-up",key:e,native:i,timestamp:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function Cf(t,e){const{x:i,y:s,button:l,buttons:f,native:y,eventId:v}=t.data,b=y.pointerId,S=y.pointerType,{cancelable:A,timestamp:P}=t;return{type:e,x:i,y:s,pointerId:b,pointerType:S,button:l,buttons:f,native:y,timestamp:P,eventId:v,cancelable:A,stopPropagation:()=>t.stopPropagation(),defer:k=>t.defer(k),preventDefault:()=>t.preventDefault()}}function DX(t){const{x:e,y:i,buttons:s,native:l,eventId:f}=t.data.currentEvent,{button:y}=t.data.startEvent,v=t.data.startEvent.native.pointerId,b=t.data.startEvent.native.pointerType,S=t.data.action,A={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:P,timestamp:k}=t;return{type:"pointer-drag",x:e,y:i,pointerId:v,pointerType:b,button:y,buttons:s,action:S,origin:A,native:l,timestamp:k,eventId:f,cancelable:P,stopPropagation:()=>t.stopPropagation(),defer:C=>t.defer(C),preventDefault:()=>t.preventDefault()}}function jX(t){const{cancelable:e,data:i,timestamp:s}=t,{x:l,y:f,deltaY:y,native:v}=i;return{type:"mouse-wheel",x:l,y:f,deltaY:y,native:v,timestamp:s,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:b=>t.defer(b),preventDefault:()=>t.preventDefault()}}function FX(t){const{action:e,state:i,device:s}=t.data,{cancelable:l,timestamp:f}=t,{buttons:y,axes:v}=i;return{type:"gamepad",device:s,timestamp:f,action:e,buttons:y,axes:v,cancelable:l,stopPropagation:()=>t.stopPropagation(),defer:b=>t.defer(b),preventDefault:()=>t.preventDefault()}}var Ud,Ux,Gx;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Ud||(Ud={})),(function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"})(Ux||(Ux={})),(function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"})(Gx||(Gx={}));const zX="z",UX="r",Bk={cancel:"Escape",complete:"Enter"},mi={...Bk,redo:UX,undo:zX,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Bx={toggle:"Control"},u2t={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},h2t={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:KO,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let c2t=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,(s=>{s.type==="key-down"&&i(s)}))}addToggle(e,i){const s=GX.fromDefinition(e,i),l=e1(this._bindings,s.key,(()=>[]));return l.push(s),fe((()=>t_(l,s)))}register(e,i=Le.WIDGET){return Ph([e.on("key-down",(s=>this.dispatch(e.inputManager,s)),i),e.on("key-up",(s=>this.dispatch(e.inputManager,s)),i)])}dispatch(e,i){const s=i.key,l=this._bindings.get(s);if(l)for(const f of l)f.process(e,i)}},GX=class r9{constructor(e,i,s,l,f){this.key=e,this.modifiers=i,this.repeats=s,this.continuePropagation=l,this.callback=f}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const s of this.modifiers)if(!e.isModifierKeyDown(s))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new r9(e,[],!1,!1,i);const{key:s,modifier:l,repeats:f,continuePropagation:y}=e;return new r9(s,l?Array.isArray(l)?l:[l]:[],!!f,!!y,i)}};function BX(t){return[t.on("before-add",(e=>{const i=e.item;if(i==null||t.includes(i))return At.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()})),t.on("after-remove",(e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()}))]}function s9(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(Ud.USER)&&t.getEditableFlag(Ud.MANAGER)}function qX(t){return t.type==="key-down"&&t.key===Bk.cancel}function Vs(t){return Yi(t.x,t.y)}function qk(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?Yi(e.clientX-i.left,e.clientY-i.top):Yi(0,0)}function Vk(t,e){return e instanceof Event?qk(t,e):Vs(e)}function Hk(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let VX=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const s=()=>e.stopPropagation();switch(e.type){case"pointer-move":Vx(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(s(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Hx(e))break;const l=Vs(e),f=Vh(l,e.pointerType,i.forEachTool);if(f==null)break;const y=f.manipulator,v=f.tool;y==null||v==null||!y.interactive||y.grabbable&&y.grabbableForEvent(e)||!y.grabbing||y.dragging||this._releaseManipulatorBeforeDragging(y,e,i),y!=null&&v!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(e)&&!y.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:y,tool:v,start:l,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(f.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:l}),s());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Hx(e))break;const l=this._grabbedManipulators.get(e.pointerId),f=l?.manipulator,y=l?.tool;if(f==null||y==null)break;const v=Vs(e);v.x=Rr(v.x,0,i.view.width),v.y=Rr(v.y,0,i.view.height);const b=l.start,S=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(f.dragging=!0,S?f.events.emit("drag",{action:"update",start:b,screenPoint:v}):f.events.emit("drag",{action:"start",start:b,screenPoint:v,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:y,manipulator:f,start:b}));break;case"end":f.dragging=!1,S&&f.events.emit("drag",{action:"end",start:b,screenPoint:v}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}s();break}case"immediate-click":{const l=Vs(e),f=Vh(l,e.pointerType,i.forEachTool);if(HX(e)||i.forEachTool((S=>{if((f==null||f.tool!==S||S.automaticManipulatorSelection)&&S.manipulators){let A=!1;S.manipulators.forEach((({manipulator:P})=>{P.selected&&(P.selected=!1,A=!0)})),A&&S.onManipulatorSelectionChanged&&S.onManipulatorSelectionChanged()}})),f==null)break;const{manipulator:y,tool:v}=f;if(!y.interactive)break;y.selectable&&v.automaticManipulatorSelection&&(y.selected=!y.selected,v.onManipulatorSelectionChanged&&v.onManipulatorSelectionChanged());const b=e.native.shiftKey;y.events.emit("immediate-click",{screenPoint:l,button:e.button,pointerType:e.pointerType,shiftKey:b,stopPropagation:s}),_3(y,s);break}case"click":{const l=Vs(e),f=Vh(l,e.pointerType,i.forEachTool),y=f?.manipulator;if(y==null||!y.interactive)break;const v=e.native.shiftKey;y.events.emit(e.type,{screenPoint:l,button:e.button,pointerType:e.pointerType,shiftKey:v}),s();break}case"double-click":{const l=Vs(e),f=Vh(l,e.pointerType,i.forEachTool),y=f!=null?f.manipulator:null;if(y==null||!y.interactive)break;const v=e.native.shiftKey;y.events.emit("double-click",{screenPoint:l,button:e.button,pointerType:e.pointerType,shiftKey:v,stopPropagation:s}),_3(y,s);break}case"immediate-double-click":{const l=Vs(e),f=Vh(l,e.pointerType,i.forEachTool),y=f!=null?f.manipulator:null;if(y==null||!y.interactive)break;const v=e.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:l,button:e.button,pointerType:e.pointerType,shiftKey:v,stopPropagation:s}),e.pointerType==="mouse"&&_3(y,s);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,s){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Vs(i)}),this._grabbedManipulators.forEach((({manipulator:l},f)=>{l===e&&this._grabbedManipulators.delete(f)})),this._afterManipulatorRelease(s.setActiveTool)}_handlePointerEnd(e,i){const s=this._grabbedManipulators.get(e.pointerId)?.manipulator;s!=null&&s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Vs(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=qx(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=qx(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,s=new Set;this._grabbedManipulators.forEach((({tool:l})=>{i.add(l)})),this._hoveredManipulators.forEach((({tool:l})=>{s.add(l)})),e((l=>{l.hasGrabbedManipulators=i.has(l),l.hasHoveredManipulators=s.has(l);const f=this._grabbedManipulators.values(),y=Xj(f,(({tool:v})=>v===l));l.firstGrabbedManipulator=y!=null?y.manipulator:null}))}clearPointers(e,{forEachTool:i,setActiveTool:s},l=!0,f){const y=(v,b)=>v===e&&(f==null||f===b);this._grabbedManipulators.forEach((({tool:v,manipulator:b,pointerType:S},A)=>{y(v,b)&&(this._grabbedManipulators.delete(A),b.grabbing=!1,b.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:S}))})),this._draggedManipulators.forEach((({tool:v,manipulator:b},S)=>{y(v,b)&&(this._draggedManipulators.delete(S),b.dragging=!1,b.events.emit("drag",{action:"cancel"}))})),l&&this._hoveredManipulators.forEach((({tool:v,manipulator:b},S)=>{y(v,b)&&(this._hoveredManipulators.delete(S),b.hovering=!1)})),this._afterManipulatorRelease(s),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Yi(i.x,i.y),s,i.pointerType,e)}))}handleHoverEvent(e,i){const s=e.type;s!=="pointer-up"&&s!=="immediate-click"&&s!=="pointer-move"||!Vx(e.pointerType)||(s!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Vs(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,s,l){let f=Vh(e,s,l);const y=this._hoveredManipulators.get(i)?.manipulator;f==null||f.manipulator.interactive||(f=null),f!=null&&y===f.manipulator||(y!=null&&(y.hovering=!1),f!=null?(f.manipulator.hovering=!0,this._hoveredManipulators.set(i,f)):this._hoveredManipulators.delete(i),this._onFocusChange(l))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach((({manipulator:i},s)=>{e===s&&(this._hoveredManipulators.delete(e),i.hovering=!1)}))}};function qx(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function Vh(t,e,i){let s=null;return i((l=>{if(l.manipulators==null||!s9(l))return!1;const f=l.manipulators.intersect(t,e);return f!=null&&(s={tool:l,manipulator:f},!0)})),s}function Vx(t){return t==="mouse"}function Hx(t){return t.pointerType!=="mouse"||t.button===0}function HX(t){return!!t.native.shiftKey}function _3(t,e){t?.consumesClicks&&e()}const Wx="attached",x3="tools",WX=1e3;let so=class extends Ot{constructor(e){super(e),this._updatingHandles=new Ll,this._clock=Vp,this._manipulatorState=new VX,this.tools=new kt,this.cursor=null,this._interacting=!1,this._interactingTimeout=WX,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const s of this.tools.items)if(i(s))return}}initialize(){this.addHandles([this.view.on(Fk,(e=>{this._handleInputEvent(e)}),Le.TOOL),...BX(this.tools),this.tools.on("before-add",(({item:e})=>{this._updateToolEditableFlag(e)})),this.tools.on("before-remove",(({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((e=>e.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void At.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const s of this.tools){this._updateToolEditableFlag(s);const l=s9(s);this.activeTool!=null&&l||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!l)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((e=>e.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ri(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([zt((()=>{const{state:e}=this.view;return"camera"in e&&e.camera}),(()=>this._forEachManipulator((e=>e.onViewChange())))),this.view.elevationProvider?.on("elevation-change",(e=>this._forEachManipulator((i=>i.onElevationChange(e)))))],Wx):this.addHandles(zt((()=>this.view.extent),(()=>this._forEachManipulator((e=>e.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Wx),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool((i=>{i.manipulators&&i.manipulators.forEach((({manipulator:s})=>e(s,i)))}))}_handleInputEvent(e){let i=!1;const s={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool((l=>{!i&&l.visible&&l.handleInputEvent(s)})),!i&&qX(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(x3),this._forEachTool((e=>{if(e instanceof Ot){const i=zt((()=>[e.cursor,e.visible,e.editable]),(()=>{s9(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(i,x3)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",(i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)})),e.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],x3)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Ud.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool((i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter((i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel)).forEach((i=>{this.tools.remove(i)}))}get test(){}};_([E({constructOnly:!0,nonNullable:!0})],so.prototype,"view",void 0),_([E({value:null})],so.prototype,"activeTool",null),_([E({readOnly:!0,type:kt})],so.prototype,"tools",void 0),_([E({readOnly:!0})],so.prototype,"cursor",void 0),_([E({readOnly:!0})],so.prototype,"updating",null),_([E()],so.prototype,"_interacting",void 0),_([E({readOnly:!0})],so.prototype,"interacting",null),so=_([Y("esri.views.ToolViewManager")],so);const JX=new ie("cyan"),YX=1,KX=.25,ZX=new ie("black"),XX=.4,QX=.2,y2t=.25,O4="default",tQ="temporary",eQ=new ie("yellow");var n9;let bs=n9=class extends Ot{constructor(t){super(t),this.name=O4,this.color=JX.clone(),this.haloColor=null,this.haloOpacity=YX,this.fillOpacity=KX,this.shadowColor=ZX.clone(),this.shadowOpacity=XX,this.shadowDifference=QX,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new n9({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};_([E({type:String,constructOnly:!0,nonNullable:!0})],bs.prototype,"name",void 0),_([E({type:ie,nonNullable:!0})],bs.prototype,"color",void 0),_([E({type:ie})],bs.prototype,"haloColor",void 0),_([E({nonNullable:!0})],bs.prototype,"haloOpacity",void 0),_([E({nonNullable:!0})],bs.prototype,"fillOpacity",void 0),_([E({type:ie,nonNullable:!0})],bs.prototype,"shadowColor",void 0),_([E({nonNullable:!0})],bs.prototype,"shadowOpacity",void 0),_([E({nonNullable:!0})],bs.prototype,"shadowDifference",void 0),_([E({nonNullable:!0})],bs.prototype,"haloWidth",void 0),_([E({nonNullable:!0})],bs.prototype,"haloBlur",void 0),bs=n9=_([Y("esri.views.support.HighlightOptions")],bs);const Dl=bs;function iQ(){return new(kt.ofType(Dl))([new Dl({name:O4}),new Dl({name:tQ,color:eQ})])}let nc=class extends Ot{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":rQ.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return sQ[this.deviceType]}};_([E({nonNullable:!0,readOnly:!0})],nc.prototype,"nativeIndex",void 0),_([E({type:String,readOnly:!0})],nc.prototype,"deviceType",null),_([E({type:Number,readOnly:!0})],nc.prototype,"axisThreshold",null),nc=_([Y("esri.views.input.gamepad.GamepadInputDevice")],nc);const k4=nc,rQ=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),sQ={standard:.15,spacemouse:.025,unknown:0};let E0=class extends Ot{constructor(...e){super(...e),this.devices=new kt,this.enabledFocusMode="document"}};_([E({type:kt.ofType(k4),readOnly:!0})],E0.prototype,"devices",void 0),_([E({type:["document","view","none"]})],E0.prototype,"enabledFocusMode",void 0),E0=_([Y("esri.views.input.gamepad.GamepadSettings")],E0);const nQ=E0;let Tg=class extends Ot{constructor(){super(...arguments),this.gamepad=new nQ}};_([E({readOnly:!0})],Tg.prototype,"gamepad",void 0),Tg=_([Y("esri.views.input.Input")],Tg);const oQ=Tg,Wk=()=>pe.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,S3=()=>E({type:["pan","rotate","zoom","none"],nonNullable:!0});let Pu=class extends Ot{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};_([S3()],Pu.prototype,"dragPrimary",void 0),_([S3()],Pu.prototype,"dragSecondary",void 0),_([S3()],Pu.prototype,"dragTertiary",void 0),_([E({type:["zoom","none"],nonNullable:!0})],Pu.prototype,"mouseWheel",void 0),Pu=_([Y("esri.views.navigation.NavigationActionMap")],Pu);const R4=Pu;let el=class extends Ot{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};_([E({type:Boolean,nonNullable:!0})],el.prototype,"enabled",void 0),_([E({type:k4})],el.prototype,"device",void 0),_([E({type:["pan","zoom"],nonNullable:!0})],el.prototype,"mode",void 0),_([E({type:["forward-down","forward-up"],nonNullable:!0})],el.prototype,"tiltDirection",void 0),_([E({type:Number,nonNullable:!0})],el.prototype,"velocityFactor",void 0),el=_([Y("esri.views.navigation.gamepad.GamepadSettings")],el);const Jk=el;let il=class extends Ot{constructor(e){super(e),this.actionMap=new R4,this.browserTouchPanEnabled=!0,this.gamepad=new Jk,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Wk()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){i$(At.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};_([E({type:R4,nonNullable:!0})],il.prototype,"actionMap",void 0),_([E({type:Boolean})],il.prototype,"browserTouchPanEnabled",void 0),_([E({type:Jk,nonNullable:!0})],il.prototype,"gamepad",void 0),_([E({type:Boolean})],il.prototype,"momentumEnabled",void 0),_([E({type:Boolean})],il.prototype,"mouseWheelZoomEnabled",null),il=_([Y("esri.views.navigation.Navigation")],il);const W2=il;function x2t(t,e,i){const s=Yk(t),l=e,f=aQ(s,l,i);if(s){const y=Xr.deriveUnitFromSR(s,t.spatialReference).heightUnit;if(!i&&y!==s.heightUnit){const v=new ct("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${y})`,{horizontalUnit:y});return new ct("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:s,error:v})}}if(!lQ(t)||f===ss.Unsupported)return new ct("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:s});switch(f){case ss.Units:{const y=s?.heightUnit||"unknown",v=l?.heightUnit||"unknown",b=new ct("layerview:incompatible-height-unit",`The vertical units of the layer (${y}) must match the vertical units of the scene (${v})`,{layerUnit:y,sceneUnit:v});return new ct("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:s,sceneHeightModelInfo:l,error:b})}case ss.HeightModel:{const y=s?.heightModel||"unknown",v=l?.heightModel||"unknown",b=new ct("layerview:incompatible-height-model",`The height model of the layer (${y}) must match the height model of the scene (${v})`,{layerHeightModel:y,sceneHeightModel:v});return new ct("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:s,sceneHeightModelInfo:l,error:b})}case ss.CRS:{const y=s?.vertCRS||"unknown",v=l?.vertCRS||"unknown",b=new ct("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${y}) must match the vertical datum of the scene (${v})`,{layerDatum:y,sceneDatum:v});return new ct("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:s,sceneHeightModelInfo:l,error:b})}}return null}function aQ(t,e,i){if(!Jx(t)||!Jx(e))return ss.Unsupported;if(t==null||e==null)return ss.Ok;if(!i&&t.heightUnit!==e.heightUnit)return ss.Units;if(t.heightModel!==e.heightModel)return ss.HeightModel;switch(t.heightModel){case"gravity-related-height":return ss.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?ss.Ok:ss.CRS;default:return ss.Unsupported}}var ss;function Jx(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function lQ(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Xk(t)}function Yk(t){if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?r1(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&Kk(t)&&t.heightModelInfo?t.heightModelInfo:Xk(t)?Xr.deriveUnitFromSR(hQ,t.spatialReference):null}function Kk(t){return"heightModelInfo"in t}function Zk(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Xk(t){return Zk(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Qk(t)}function uQ(t){return t.layers!=null||Qk(t)||Zk(t)||Kk(t)}function Qk(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(ss||(ss={}));const hQ=new Xr({heightModel:"gravity-related-height"});var Am;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Am||(Am={}));let o9,T3=null;async function cQ(t){T3||(T3=mt(()=>import("./geometryServiceUtils-DkZfzYkb.js"),__vite__mapDeps([247,248,1,2,3,4])).then((e=>o9=e))),await T3,Ce(t)}async function tR(t,e,i,s){if(!t)return null;const l=t.spatialReference;return ka()||Cs(l,e)?Jn(t,e):o9?o9.projectGeometry(t,e,i,s):(await Promise.race([cQ(s),Aa(s)]),tR(t,e,i,s))}async function S2t(t,e){try{return t?.spatialReference?await FP(t,e):null}catch{return null}}let je=class extends Ot{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=_a(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,(s=>{const l=this._getSupportedSpatialReferences(s);if(l.length>0){const f=this._narrowDownSpatialReferenceCandidates(e,l);f!=null&&(e=f)}return e?.length===1}))&&e?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let s;const l=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers}],(f=>!(!("tileInfo"in f)||!f.tileInfo?.spatialReference.equals(i))&&(s=f,!0)),(f=>"tileInfo"in f));return s?{tileInfo:s.tileInfo,updating:!1}:{updating:l}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,(s=>{const l=Yk(s);return!!l&&(e={heightModelInfo:l,vcsWkid:s.spatialReference?.vcsWkid,latestVcsWkid:s.spatialReference?.latestVcsWkid},!0)}),(s=>uQ(s)));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,(s=>{const l="fullExtents"in s&&s.fullExtents||(s.fullExtent!=null?[s.fullExtent]:[]),f=this.requiresExtentInSpatialReference?null:l[0],y=l.find((v=>v.spatialReference.equals(this.spatialReference)))??f;if(y)return e.push({extent:y,layer:s}),!0;if(this._getSupportedSpatialReferences(s).length>0)for(const v of l)e.push({extent:v,layer:s});return!1}));return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(e),l=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&l.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=_a(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:l.clone(),task:_2((async f=>{try{const y=await tR(s.extent,l,"portalItem"in s.layer?s.layer.portalItem:void 0,f);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(Os(f))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const s=new Array;for(const l of e)for(const f of i){if(!l.spatialReference.equals(f.spatialReference))continue;const y=fQ(l.viewingMode,f.viewingMode);if(y!==!1){s.push({spatialReference:l.spatialReference,viewingMode:y});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some((({spatialReference:s})=>s.equals(i)))&&(e=e.filter((({spatialReference:s})=>s.equals(i)))),e.length>1&&e.some((({viewingMode:s})=>s!==Am.Local))&&(e=e.filter((({viewingMode:s})=>s!==Am.Local))),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const s=[];for(const l of i){const f=this.getSpatialReferenceSupport(l,e);if(f!=null){const y=f.constraints??[{spatialReference:l,viewingMode:null}];for(const{spatialReference:v,viewingMode:b}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!v.equals(this.userSpatialReference)||s.push({spatialReference:v,viewingMode:b})}}return s}_pickExtentCandidate(e){const i=this.spatialReference;return e.find((({extent:s})=>i.equals(s.spatialReference)))||e[0]}_collectLayers(e,i,s=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const l=new pQ(s,i);for(const f of e)if(this._collectCollection(f,l),l.done||l.preloading===this.sourcePreloadCount)break;return l.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const s of e.layers)if(i.layerFilter(s)){switch(this._loadMaybe(s)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(s)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in s&&this._collectCollection({layers:s.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch((i=>{kr(i)})),"loading"):e.loadStatus:"loaded"}};_([E()],je.prototype,"required",void 0),_([E({constructOnly:!0})],je.prototype,"map",void 0),_([E({constructOnly:!0})],je.prototype,"getSpatialReferenceSupport",void 0),_([E()],je.prototype,"defaultSpatialReference",void 0),_([E()],je.prototype,"userSpatialReference",void 0),_([E()],je.prototype,"sourcePreloadCount",void 0),_([E()],je.prototype,"priorityCollection",void 0),_([E()],je.prototype,"requiresExtentInSpatialReference",void 0),_([E()],je.prototype,"suspended",void 0),_([E({readOnly:!0})],je.prototype,"ready",null),_([E({readOnly:!0})],je.prototype,"heightModelInfoReady",null),_([E({readOnly:!0})],je.prototype,"spatialReference",null),_([E({readOnly:!0})],je.prototype,"extent",null),_([E({readOnly:!0})],je.prototype,"heightModelInfo",null),_([E({readOnly:!0})],je.prototype,"vcsWkid",null),_([E({readOnly:!0})],je.prototype,"latestVcsWkid",null),_([E({readOnly:!0})],je.prototype,"viewingMode",null),_([E({readOnly:!0})],je.prototype,"tileInfo",null),_([E({readOnly:!0})],je.prototype,"mapCollections",null),_([E({readOnly:!0})],je.prototype,"_spatialReferenceTask",null),_([E({readOnly:!0})],je.prototype,"_tileInfoTask",null),_([E({readOnly:!0})],je.prototype,"_heightModelInfoTask",null),_([E({readOnly:!0})],je.prototype,"_extentCandidatesTask",null),_([E()],je.prototype,"_extentTask",null),_([E()],je.prototype,"_projectExtentTask",void 0),je=_([Y("esri.views.support.DefaultsFromMap")],je);let pQ=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function fQ(t,e){return t!=null?e!=null?t===e&&t:t:e}function dQ(t){return"tryRecycleWith"in t}let yQ=class{constructor(e,i,s){this.layer=e,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=ln(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Vn(this._controller.signal,(()=>{this._recycleController?.abort();const l=new ct("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(l)}))}tryRecycle(e){if(!this.done||!this.layerView||!dQ(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const i=this.layer.type,s=this._recycleController.signal;for(let l=0;l<e.length;l++){const f=e[l];if(f.type!==i)continue;const y=this.layerView.tryRecycleWith(f,{signal:s});if(y){e.splice(l,1),this.layer=f;const v=this.layerView,b=v.view;return this.promise=y.then((()=>(Ce(s),f.emit("layerview-destroy",{view:b,layerView:v}),b.emit("layerview-destroy",{view:b,layerView:v}),f.emit("layerview-create",{view:b,layerView:v}),b.emit("layerview-create",{view:b,layerView:v}),v))),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:e}),s.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:s}=this;this._map=e.map;try{let l,f;if(await s.load({signal:i}),s.prefetchResources&&await s.prefetchResources({signal:i}),gQ(s))l=await s.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(s))throw new ct("layer:view-not-supported","No layerview implementation was found");const b=await this.layerViewImporter.importLayerView(s);Ce(i),l="default"in b?new b.default({layer:s,view:e}):new b({layer:s,view:e})}const y=()=>{f=ri(f),l.destroyed||l.destroy(),l.layer=null,l.parent=null,l.view=null,this.done=!0};f=Vn(i,y),Ce(i);try{await l.when()}catch(b){throw y(),b}if(!this._map?.allLayers?.includes(s))return y(),void this._deferred.reject(new ct("view:no-layerview-for-layer","The layer has been removed from the map",{layer:s}));this.layerView=l,s.emit("layerview-create",{view:e,layerView:l}),e.emit("layerview-create",{layer:s,layerView:l}),this.done=!0,this._deferred.resolve(l)}catch(l){s.emit("layerview-create-error",{view:e,error:l}),e.emit("layerview-create-error",{layer:s,error:l}),this.done=!0,this._deferred.reject(new ct("layerview:create-error","layerview creation failed",{layer:s,error:l}))}}};function gQ(t){return t.createLayerView!==Xe.prototype.createLayerView}function mQ(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let _s=class extends Ot{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Ll,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const s of i)this.layerViewFilter?.(s)!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ln(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(a1(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const i=this.view.map;if(this.destroyed||!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const s=new Set,l=[],f=this.view.ready,y=A=>{if(A!=null){for(const P of A)if(P){if(this.layerViewFilter?.(P)===!1)continue;s.add(P);const k=this._layerLayerViewInfoMap.get(P);k&&f?k.start():k||this._recyclingInfoMap.has(P)||l.push(P),"layers"in P&&P.layers&&y(P.layers)}}};for(const A of this._rootCollectionNames)y(Ln(this,A));const v=new Array,b=A=>{const P=A.tryRecycle(l);P?(this._recyclingInfoMap.set(A.layer,A),this.notifyChange("updating"),P.then((()=>{this._recyclingInfoMap.delete(A.layer),this._layerLayerViewInfoMap.set(A.layer,A),this._reschedule(),this.notifyChange("updating")})).catch((k=>{kr(k)||(this._recyclingInfoMap.delete(A.layer),A.destroy(),this._reschedule(),this.notifyChange("updating"))}))):v.push(A)};for(const A of this._layerLayerViewInfoMap.values())s.has(A.layer)||(this._layerLayerViewInfoMap.delete(A.layer),b(A));for(const A of this._recyclingInfoMap.values())s.has(A.layer)||(this._recyclingInfoMap.delete(A.layer),b(A));for(const A of l)this._createLayerView(A);this._refreshCollections(),v.forEach((A=>A.destroy()));const S=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.referenceLayers,i?.layers].filter((A=>!!A));s.forEach((A=>"layers"in A&&S.push(A.layers))),this.addHandles(S.map((A=>this._watchUpdatingTracking.addOnCollectionChange((()=>A),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([$a((()=>this.view?.map?.allLayers),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),zt((()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]}),(()=>this._reschedule()),zi)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),n3(this._recyclingInfoMap),n3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Be()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||hj(this._layerLayerViewInfoMap,(e=>!e.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),n3(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ct("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){this.commitProperty("updatingRemaining");const s=this._layerLayerViewInfoMap.get(e);if(!s?.done)return!0;const l=s.layerView;return!(!l||!i||l.parent===i)||!!(s.done&&l&&"layers"in e&&e.layers?.length)&&e.layers.some((f=>this.isCreatingLayerViewsForLayer(f,l)))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Ln(this,e),Ln(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())Ln(this,e)?.removeAll()}_populateLayerViewsOwners(e,i,s){if(!e||!i)return void i?.removeAll();let l=0;for(const f of e){const y=this._layerLayerViewInfoMap.get(f);if(!y?.layerView)continue;const v=y.layerView;v.layer=f,v.parent=s,i.at(l)!==v&&i.splice(l,0,v),"layers"in f&&mQ(v)&&this._populateLayerViewsOwners(f.layers,v.layerViews,v),l+=1}l<i.length&&i.splice(l)}_createLayerView(e){e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new yQ(e,this.view,this.layerViewImporter);i.promise.then((()=>this._refreshCollections()),(s=>{s&&(kr(s)||s.name==="cancelled:layerview-create")||At.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:s}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};_([E()],_s.prototype,"_workPromise",void 0),_([E({readOnly:!0})],_s.prototype,"_watchUpdatingTracking",void 0),_([E({readOnly:!0})],_s.prototype,"_layersToLayerViews",null),_([E({readOnly:!0})],_s.prototype,"_rootCollectionNames",null),_([E({constructOnly:!0})],_s.prototype,"layerViewFilter",void 0),_([E()],_s.prototype,"layerViewImporter",void 0),_([E()],_s.prototype,"supportsGround",void 0),_([E({readOnly:!0})],_s.prototype,"updating",null),_([E({readOnly:!0})],_s.prototype,"updatingRemaining",null),_([E({constructOnly:!0})],_s.prototype,"view",void 0),_s=_([Y("esri.views.support.LayerViewManager")],_s);const vQ=_s;let oc=class extends Ot{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};_([E()],oc.prototype,"featureTitleFields",void 0),_([E()],oc.prototype,"utilityNetworkFields",void 0),_([E()],oc.prototype,"globalIdField",void 0),oc=_([Y("esri.views.support.RequiredFieldsOptions")],oc);const wQ=oc;var $0,ch;let Rt=(ch=class extends fn.EventedMixin(Tl.EsriPromiseMixin(Ot)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Yp,this.updatingHandles=new Ll,this.allLayerViews=new mo({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:_Q}),this.analyses=new Sm,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new rh,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new kt,this.magnifier=new jk,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new oQ,this.navigation=new W2,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Gk(this),this.persistableViewModels=new kt,this.requiredFieldsOptions=new wQ,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(zt((()=>this.preconditionsReady),(i=>{const s=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,$0.views.add(this)):(this._lockedSpatialReference=null,$0.views.remove(this)),this.notifyChange("spatialReference"),!i&&s)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(i&&!s){try{this._startup()}catch(l){return void queueMicrotask((()=>{this.fatalError=new ct("view:startup-error","View._startup failed",l)}))}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),$o))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,Od((()=>this.ready)))))),this.basemapView=new pX({view:this}),this.layerViewManager=new vQ({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new so({view:this}),this.selectionManager=new MX({view:this}),this.addHandles([Rs((()=>this.readyState==="map-content-error"&&!this.spatialReference),(()=>{At.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),zt((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),zi),zt((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),$o),zt((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),zi)])}destroy(){this.destroyed||($0.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ze(this.graphics),this.analyses=ze(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ze(this.analysisViewManager),this.toolViewManager=ze(this.toolViewManager),this.layerViewManager=ze(this.layerViewManager),this.selectionManager=ze(this.selectionManager),this.basemapView=ze(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach((e=>e.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=ze(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return At.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new je({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??iQ()}set highlights(e){this._set("highlights",Ea(e,this._get("highlights"),kt.ofType(Dl)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||tn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(At.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),tn.isLoadable(e)&&e.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,i=this.map.ground.loaded,s=this.map.basemap?.loaded??!0;return e&&s&&i&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=_2((l=>UE(rt("view-readyState-waiting-delay"),null,l))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=_a(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const i=!di(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Eo}set timeZone(e){this._userTimeZone=e,fq(e)||At.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new i9}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new ct("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&At.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Rs((()=>this.destroyed||this.preconditionsReady===!1),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}},$0=ch,ch.views=new kt,ch);_([E()],Rt.prototype,"_userSpatialReference",void 0),_([E()],Rt.prototype,"activeTool",null),_([E({readOnly:!0})],Rt.prototype,"allLayerViews",void 0),_([E(Lb(Sm,"analyses"))],Rt.prototype,"analyses",void 0),_([E()],Rt.prototype,"animation",null),_([E()],Rt.prototype,"basemapView",void 0),_([E()],Rt.prototype,"center",null),_([E()],Rt.prototype,"defaultsFromMapSettings",null),_([E()],Rt.prototype,"defaultsFromMap",null),_([E()],Rt.prototype,"displayFilterEnabled",void 0),_([E({type:Zt})],Rt.prototype,"extent",null),_([E()],Rt.prototype,"fatalError",void 0),_([E(Lb(rh,"graphics"))],Rt.prototype,"graphics",void 0),_([E()],Rt.prototype,"groundView",void 0),_([E({readOnly:!0,type:Xr})],Rt.prototype,"heightModelInfo",null),_([E({type:kt.ofType(Dl)})],Rt.prototype,"highlights",null),_([E({readOnly:!0})],Rt.prototype,"interacting",null),_([E({constructOnly:!0})],Rt.prototype,"layerViewFilter",void 0),_([E({readOnly:!0})],Rt.prototype,"navigating",null),_([E({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Rt.prototype,"preconditionsReady",null),_([E({readOnly:!0})],Rt.prototype,"typeSpecificPreconditionsReady",void 0),_([E({type:kt,readOnly:!0})],Rt.prototype,"layerViews",void 0),_([E()],Rt.prototype,"resolution",null),_([E({type:jk})],Rt.prototype,"magnifier",void 0),_([E({value:null,type:gO})],Rt.prototype,"map",null),_([E()],Rt.prototype,"padding",void 0),_([E({readOnly:!0})],Rt.prototype,"ready",void 0),_([E()],Rt.prototype,"_readyStateWaitingTask",void 0),_([E({readOnly:!0})],Rt.prototype,"readyState",null),_([E({type:Et})],Rt.prototype,"spatialReference",null),_([E()],Rt.prototype,"stationary",null),_([E({readOnly:!0})],Rt.prototype,"supportsGround",void 0),_([E({type:ur})],Rt.prototype,"timeExtent",null),_([E({type:String,nonNullable:!0})],Rt.prototype,"timeZone",null),_([E()],Rt.prototype,"tools",null),_([E()],Rt.prototype,"toolViewManager",void 0),_([E({readOnly:!0})],Rt.prototype,"type",void 0),_([E({type:Number})],Rt.prototype,"scale",void 0),_([E({readOnly:!0})],Rt.prototype,"updating",void 0),_([E({readOnly:!0})],Rt.prototype,"initialExtentRequired",void 0),_([E({readOnly:!0})],Rt.prototype,"initialExtent",null),_([E()],Rt.prototype,"cursor",null),_([E({readOnly:!0})],Rt.prototype,"input",void 0),_([E({type:W2,nonNullable:!0})],Rt.prototype,"navigation",void 0),_([E()],Rt.prototype,"layerViewManager",void 0),_([E()],Rt.prototype,"analysisViewManager",void 0),_([E()],Rt.prototype,"selectionManager",void 0),_([E()],Rt.prototype,"width",void 0),_([E()],Rt.prototype,"height",void 0),_([E({readOnly:!0})],Rt.prototype,"resizing",void 0),_([E({value:null,readOnly:!0})],Rt.prototype,"size",null),_([E({readOnly:!0})],Rt.prototype,"suspended",void 0),_([E({readOnly:!0})],Rt.prototype,"viewEvents",void 0),_([E({readOnly:!0})],Rt.prototype,"persistableViewModels",void 0),_([E()],Rt.prototype,"_isValid",void 0),_([E()],Rt.prototype,"_readyCycleForced",void 0),_([E()],Rt.prototype,"_lockedSpatialReference",void 0),_([E()],Rt.prototype,"_userTimeZone",void 0),_([E()],Rt.prototype,"_lockedTimeZone",void 0),_([E()],Rt.prototype,"_userTimeExtent",void 0),_([E()],Rt.prototype,"_lockedTimeExtent",void 0),_([E({type:i9})],Rt.prototype,"theme",void 0),_([E({readOnly:!0,type:i9})],Rt.prototype,"effectiveTheme",null),Rt=$0=_([Y("esri.views.View")],Rt);const M3=globalThis.$arcgis;M3&&!M3.views&&Object.defineProperty(M3,"views",{configurable:!1,enumerable:!0,writable:!1,value:Rt.views});const bQ=Rt;function _Q(t){return t.layerViews}function Hc(t,e){return t[0]=e[0],t[1]=e[1],t}function Fi(t,e,i){return t[0]=e,t[1]=i,t}function C4(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Gi(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function eR(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function iR(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function xQ(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function SQ(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function TQ(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function MQ(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function EQ(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function rf(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Bn(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t}function T1(t,e){const i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)}function Rp(t,e){const i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s}function Cp(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Ia(t){const e=t[0],i=t[1];return e*e+i*i}function rR(t,e){return t[0]=-e[0],t[1]=-e[1],t}function $Q(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function a9(t,e){const i=e[0],s=e[1];let l=i*i+s*s;return l>0&&(l=1/Math.sqrt(l),t[0]=e[0]*l,t[1]=e[1]*l),t}function iu(t,e){return t[0]*e[0]+t[1]*e[1]}function sR(t,e,i){const s=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=s,t}function nR(t,e,i,s){const l=e[0],f=e[1];return t[0]=l+s*(i[0]-l),t[1]=f+s*(i[1]-f),t}function AQ(t,e=1){const i=2*j2()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function IQ(t,e,i){const s=e[0],l=e[1];return t[0]=i[0]*s+i[2]*l,t[1]=i[1]*s+i[3]*l,t}function yo(t,e,i){const s=e[0],l=e[1];return t[0]=i[0]*s+i[2]*l+i[4],t[1]=i[1]*s+i[3]*l+i[5],t}function PQ(t,e,i){const s=e[0],l=e[1];return t[0]=i[0]*s+i[3]*l+i[6],t[1]=i[1]*s+i[4]*l+i[7],t}function OQ(t,e,i){const s=e[0],l=e[1];return t[0]=i[0]*s+i[4]*l+i[12],t[1]=i[1]*s+i[5]*l+i[13],t}function kQ(t,e,i,s){const l=e[0]-i[0],f=e[1]-i[1],y=Math.sin(s),v=Math.cos(s);return t[0]=l*v-f*y+i[0],t[1]=l*y+f*v+i[1],t}function oR(t,e){const i=t[0],s=t[1],l=e[0],f=e[1];let y=i*i+s*s;y>0&&(y=1/Math.sqrt(y));let v=l*l+f*f;v>0&&(v=1/Math.sqrt(v));const b=(i*l+s*f)*y*v;return b>1?0:b<-1?Math.PI:Math.acos(b)}function RQ(t){return"vec2("+t[0]+", "+t[1]+")"}function l9(t,e){return t[0]===e[0]&&t[1]===e[1]}function CQ(t,e){const i=t[0],s=t[1],l=e[0],f=e[1],y=Oi();return Math.abs(i-l)<=y*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-f)<=y*Math.max(1,Math.abs(s),Math.abs(f))}function NQ(t,e,i,s,l){let f=e[0]-i[0],y=e[1]-i[1];const v=(s[0]*f+s[1]*y)*(l-1);return f=s[0]*v,y=s[1]*v,t[0]=e[0]+f,t[1]=e[1]+y,t}const LQ=Cp,J2=Gi,DQ=eR,jQ=iR,FQ=T1,zQ=Rp,UQ=Ia;Object.freeze(Object.defineProperty({__proto__:null,add:C4,angle:oR,ceil:xQ,copy:Hc,cross:sR,dist:FQ,distance:T1,div:jQ,divide:iR,dot:iu,equals:CQ,exactEquals:l9,floor:SQ,inverse:$Q,len:LQ,length:Cp,lerp:nR,max:MQ,min:TQ,mul:DQ,multiply:eR,negate:rR,normalize:a9,projectAndScale:NQ,random:AQ,rotate:kQ,round:EQ,scale:rf,scaleAndAdd:Bn,set:Fi,sqrDist:zQ,sqrLen:UQ,squaredDistance:Rp,squaredLength:Ia,str:RQ,sub:J2,subtract:Gi,transformMat2:IQ,transformMat2d:yo,transformMat3:PQ,transformMat4:OQ},Symbol.toStringTag,{value:"Module"}));function de(){return[0,0]}function GQ(t){return[t[0],t[1]]}function Sa(t,e){return[t,e]}function BQ(t,e){return[t,e]}function qQ(t,e=de()){const i=Math.min(2,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function aR(){return de()}function lR(){return Sa(1,1)}function uR(){return Sa(1,0)}function hR(){return Sa(0,1)}const cR=aR(),VQ=lR(),HQ=uR(),pR=hR();Object.freeze(Object.defineProperty({__proto__:null,ONES:VQ,UNIT_X:HQ,UNIT_Y:pR,ZEROS:cR,clone:GQ,create:de,freeze:BQ,fromArray:qQ,fromValues:Sa,ones:lR,unitX:uR,unitY:hR,zeros:aR},Symbol.toStringTag,{value:"Module"}));function WQ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function fR(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function JQ(t,e,i,s,l,f,y){return t[0]=e,t[1]=i,t[2]=s,t[3]=l,t[4]=f,t[5]=y,t}function N4(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=e[4],v=e[5];let b=i*f-s*l;return b?(b=1/b,t[0]=f*b,t[1]=-s*b,t[2]=-l*b,t[3]=i*b,t[4]=(l*v-f*y)*b,t[5]=(s*y-i*v)*b,t):null}function YQ(t){return t[0]*t[3]-t[1]*t[2]}function dR(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=i[0],A=i[1],P=i[2],k=i[3],C=i[4],L=i[5];return t[0]=s*S+f*A,t[1]=l*S+y*A,t[2]=s*P+f*k,t[3]=l*P+y*k,t[4]=s*C+f*L+v,t[5]=l*C+y*L+b,t}function M1(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=Math.sin(i),A=Math.cos(i);return t[0]=s*A+f*S,t[1]=l*A+y*S,t[2]=s*-S+f*A,t[3]=l*-S+y*A,t[4]=v,t[5]=b,t}function Y2(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=i[0],A=i[1];return t[0]=s*S,t[1]=l*S,t[2]=f*A,t[3]=y*A,t[4]=v,t[5]=b,t}function Np(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=i[0],A=i[1];return t[0]=s,t[1]=l,t[2]=f,t[3]=y,t[4]=s*S+f*A+v,t[5]=l*S+y*A+b,t}function yR(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t}function gR(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function L4(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function KQ(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ZQ(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function XQ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function mR(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function QQ(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function ttt(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t}function ett(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function itt(t,e){const i=t[0],s=t[1],l=t[2],f=t[3],y=t[4],v=t[5],b=e[0],S=e[1],A=e[2],P=e[3],k=e[4],C=e[5],L=Oi();return Math.abs(i-b)<=L*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-S)<=L*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-A)<=L*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(f-P)<=L*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(y-k)<=L*Math.max(1,Math.abs(y),Math.abs(k))&&Math.abs(v-C)<=L*Math.max(1,Math.abs(v),Math.abs(C))}const rtt=dR,stt=mR;Object.freeze(Object.defineProperty({__proto__:null,add:XQ,copy:WQ,determinant:YQ,equals:itt,exactEquals:ett,frob:ZQ,fromRotation:yR,fromScaling:gR,fromTranslation:L4,identity:fR,invert:N4,mul:rtt,multiply:dR,multiplyScalar:QQ,multiplyScalarAndAdd:ttt,rotate:M1,scale:Y2,set:JQ,str:KQ,sub:stt,subtract:mR,translate:Np},Symbol.toStringTag,{value:"Module"}));function _o(){return[1,0,0,1,0,0]}function ntt(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function ott(t,e,i,s,l,f){return[t,e,i,s,l,f]}const att=_o();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:att,clone:ntt,create:_o,fromValues:ott},Symbol.toStringTag,{value:"Module"}));const ay={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ei({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Et.WebMercator}),minus180Line:new ei({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Et.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ei({paths:[[[180,-180],[180,180]]],spatialReference:Et.WGS84}),minus180Line:new ei({paths:[[[-180,-180],[-180,180]]],spatialReference:Et.WGS84})}};function Ju(t,e){return Math.ceil((t-e)/(2*e))}function vR(t,e){const i=yd(t);for(const s of i)for(const l of s)l[0]+=e;return t}function yd(t){return f4(t)?t.rings:t.paths}function I2t(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function ltt(t){return typeof t=="string"?qr(t):yt(t)}function utt(t,e,i){const s={};for(const l in t){if(l==="declaredClass")continue;const f=t[l];if(f!=null&&typeof f!="function")if(Array.isArray(f))s[l]=f.map((y=>utt(y)));else if(typeof f=="object")if(f.toJSON){const y=f.toJSON(i?.[l]);s[l]=e?y:JSON.stringify(y)}else s[l]=e?f:JSON.stringify(f);else s[l]=f}return s}function htt(t,e){return t?e&&w_(t)?e:v_(t)??xe?.findCredential(t)?.token:null}async function P2t(t,e,i){const s=htt(t,e);return s||(!xe&&pe.request.useIdentity&&await mt(()=>import("./IdentityManager-Cvzhao3G.js"),__vite__mapDeps([5,1,2,3,6,4])),(await xe.getCredential(t,i))?.token)}async function ctt(t,e,i,s){const l=ltt(t),f=e[0].spatialReference,y={...s,responseType:"json",query:{...l.query,f:"json",sr:sA(f),target:JSON.stringify({geometryType:d4(e[0]),geometries:e}),cutter:JSON.stringify(i)}},v=await ii(l.path+"/cut",y),{cutIndexes:b,geometries:S=[]}=v.data;return{cutIndexes:b,geometries:S.map((A=>{const P=Pp(A);return P.spatialReference=f,P}))}}function ptt(t){return{geometryType:d4(t[0]),geometries:t.map((e=>e.toJSON()))}}function ftt(t,e,i){const s=cJ(e);return t.map((l=>{const f=s.fromJSON(l);return f.spatialReference=i,f}))}async function dtt(t,e,i){const s=typeof t=="string"?qr(t):t,l=e[0].spatialReference,f=d4(e[0]),y={...i,query:{...s.query,f:"json",sr:sA(l),geometries:JSON.stringify(ptt(e))}},{data:v}=await ii(s.path+"/simplify",y);return ftt(v.geometries,f,l)}const wR=()=>At.getLogger("esri.geometry.support.normalizeUtils");function ytt(t){return t.type==="polygon"}function gtt(t){return t[0].type==="polygon"}function mtt(t){return t[0].type==="polyline"}function Yx(t){const e=[];let i=0,s=0;for(let l=0;l<t.length;l++){const f=t[l];let y=null;for(let v=0;v<f.length;v++)y=f[v],e.push(y),v===0?(i=y[0],s=i):(i=Math.min(i,y[0]),s=Math.max(s,y[0]));y&&e.push([(i+s)/2,0])}return e}function vtt(t,e){if(!(t instanceof ei||t instanceof Fe)){const l="straightLineDensify: the input geometry is neither polyline nor polygon";throw wR().error(l),new ct("internal:geometry",l)}const i=yd(t),s=[];for(const l of i){const f=[];s.push(f),f.push([l[0][0],l[0][1]]);for(let y=0;y<l.length-1;y++){const v=l[y][0],b=l[y][1],S=l[y+1][0],A=l[y+1][1],P=Math.sqrt((S-v)*(S-v)+(A-b)*(A-b)),k=(A-b)/P,C=(S-v)/P,L=P/e;if(L>1){for(let J=1;J<=L-1;J++){const Q=J*e,tt=C*Q+v,et=k*Q+b;f.push([tt,et])}const F=(P+Math.floor(L-1)*e)/2,q=C*F+v,H=k*F+b;f.push([q,H])}f.push([S,A])}}return ytt(t)?new Fe({rings:s,spatialReference:t.spatialReference}):new ei({paths:s,spatialReference:t.spatialReference})}function Kx(t,e,i){if(e){const s=vtt(t,1e6);t=bc(s,!0)}return i&&(t=vR(t,i)),t}function Zx(t,e,i){if(Array.isArray(t)){const s=t[0];if(s>e){const l=Ju(s,e);t[0]=s+l*(-2*e)}else if(s<i){const l=Ju(s,i);t[0]=s+l*(-2*i)}}else{const s=t.x;if(s>e){const l=Ju(s,e);t=t.clone().offset(l*(-2*e),0)}else if(s<i){const l=Ju(s,i);t=t.clone().offset(l*(-2*i),0)}}return t}function wtt(t,e){let i=-1;for(let s=0;s<e.cutIndexes.length;s++){const l=e.cutIndexes[s],f=e.geometries[s],y=yd(f);for(let v=0;v<y.length;v++){const b=y[v];b.some((S=>{if(S[0]<180)return!0;{let A=0;for(let k=0;k<b.length;k++){const C=b[k][0];A=C>A?C:A}A=Number(A.toFixed(9));const P=-360*Ju(A,180);for(let k=0;k<b.length;k++){const C=f.getPoint(v,k);f.setPoint(v,k,C.clone().offset(P,0))}return!0}}))}if(l===i){if(gtt(t))for(const v of yd(f))t[l]=t[l].addRing(v);else if(mtt(t))for(const v of yd(f))t[l]=t[l].addPath(v)}else i=l,t[l]=f}return t}async function btt(t,e,i){if(!Array.isArray(t))return btt([t],e);e&&typeof e!="string"&&wR().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s=typeof e=="string"?e:e?.url??pe.geometryServiceUrl;let l,f,y,v,b,S,A,P,k=0;const C=[],L=[];for(const tt of t)if(tt!=null)if(l||(l=tt.spatialReference,f=Br(l),y=l.isWebMercator,S=y?102100:4326,v=ay[S].maxX,b=ay[S].minX,A=ay[S].plus180Line,P=ay[S].minus180Line),f)if(tt.type==="mesh")L.push(tt);else if(tt.type==="point")L.push(Zx(tt.clone(),v,b));else if(tt.type==="multipoint"){const et=tt.clone();et.points=et.points.map((nt=>Zx(nt,v,b))),L.push(et)}else if(tt.type==="extent"){const et=tt.clone()._normalize(!1,!1,f);L.push(et.rings?new Fe(et):et)}else if(tt.extent){const et=tt.extent,nt=Ju(et.xmin,b)*(2*v);let vt=nt===0?tt.clone():vR(tt.clone(),nt);et.offset(nt,0);let{xmin:Tt,xmax:St}=et;Tt=Number(Tt.toFixed(9)),St=Number(St.toFixed(9)),et.intersects(A)&&St!==v?(k=St>k?St:k,vt=Kx(vt,y),C.push(vt),L.push("cut")):et.intersects(P)&&Tt!==b?(k=St*(2*v)>k?St*(2*v):k,vt=Kx(vt,y,360),C.push(vt),L.push("cut")):L.push(vt)}else L.push(tt.clone());else L.push(tt);else L.push(tt);let F=Ju(k,v),q=-90;const H=F,J=new ei;for(;F>0;){const tt=360*F-180;J.addPath([[tt,q],[tt,-1*q]]),q*=-1,F--}if(C.length>0&&H>0){const tt=wtt(C,await ctt(s,C,J,i)),et=[],nt=[];for(let St=0;St<L.length;St++){const pt=L[St];if(pt!=="cut")nt.push(pt);else{const ht=tt.shift(),_t=t[St];_t!=null&&_t.type==="polygon"&&_t.rings&&_t.rings.length>1&&ht.rings.length>=_t.rings.length?(et.push(ht),nt.push("simplify")):nt.push(y?th(ht):ht)}}if(!et.length)return nt;const vt=await dtt(s,et,i),Tt=[];for(let St=0;St<nt.length;St++){const pt=nt[St];pt!=="simplify"?Tt.push(pt):Tt.push(y?th(vt.shift()):vt.shift())}return Tt}const Q=[];for(let tt=0;tt<L.length;tt++){const et=L[tt];if(et!=="cut")Q.push(et);else{const nt=C.shift();Q.push(y===!0?th(nt):nt)}}return Q}function _tt(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&Br(t.spatialReference);if(!i)return e;const[s,l]=i.valid,f=2*l,{width:y}=e;let v,{xmin:b,xmax:S}=e;if([b,S]=[S,b],t.type==="extent"||y===0||y<=l||y>f||b<s||S>l)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;v=Yx(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;v=Yx(t.paths);break;case"multipoint":v=t.points}const A=e.clone();for(let P=0;P<v.length;P++){let k=v[P][0];k<0?(k+=l,S=Math.max(k,S)):(k-=l,b=Math.min(k,b))}return A.xmin=b,A.xmax=S,A.width<y?(A.xmin-=l,A.xmax-=l,A):e}function D4(t,e,i){const s=Br(i);if(s==null)return t;const[l,f]=s.valid,y=2*f;let v=0,b=0;e>f?v=Math.ceil(Math.abs(e-f)/y):e<l&&(v=-Math.ceil(Math.abs(e-l)/y)),t>f?b=Math.ceil(Math.abs(t-f)/y):t<l&&(b=-Math.ceil(Math.abs(t-l)/y));let S=t+(v-b)*y;const A=S-e;return A>f?S-=y:A<l&&(S+=y),S}function O2t(t,e){const i=Br(e);if(i){const[s,l]=i.valid,f=l-s;if(t<s)for(;t<s;)t+=f;if(t>l)for(;t>l;)t-=f}return t}const bR=96,_R=39.37,xtt=180/Math.PI;function xR(t){return t.wkid?t:t.spatialReference||Et.WGS84}function j4(t,e){return e.type?Fi(t,e.x,e.y):Hc(t,e)}function SR(t){return ko(t)}function K2(t,e,i=0){let s=t.width,l=t.height;if(i!==0){const v=d1(i),b=Math.abs(Math.cos(v)),S=Math.abs(Math.sin(v));s=t.width*b+t.height*S,l=t.width*S+t.height*b}const f=Math.max(1,e[0]),y=Math.max(1,e[1]);return Math.max(s/f,l/y)*Ptt(t.spatialReference)}async function A0(t,e,i,s){let l,f;if(!t||Array.isArray(t)&&!t.length)return null;if(kt.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const v=t.every((A=>"attributes"in A)),b=t.some((A=>!A.geometry));let S=t;if(v&&b&&e&&e.allLayerViews){const A=new Map;for(const L of t){const F=L.layer,q=A.get(F)||[],H=L.attributes[F.objectIdField];H!=null&&q.push(H),A.set(F,q)}const P=[];A.forEach(((L,F)=>{const q=e.allLayerViews?.find((H=>H.layer.id===F.id));if(q&&"queryFeatures"in q){const H=F.createQuery();H.objectIds=L,H.returnGeometry=!0,P.push(q.queryFeatures(H))}}));const k=await Promise.all(P),C=[];for(const L of k)if(L&&L.features&&L.features.length)for(const F of L.features)F.geometry!=null&&C.push(F.geometry);S=C}for(const A of S)s=await A0(A,e,i,s);return s}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")l=new Ct(t);else if(t instanceof ir)l=t;else if("geometry"in t){if(t.geometry)l=t.geometry;else if(t.layer){const v=t.layer,b=e.allLayerViews?.find((S=>S.layer.id===v.id));if(b&&"queryFeatures"in b){const S=v.createQuery();S.objectIds=[t.attributes[v.objectIdField]],S.returnGeometry=!0,l=(await b.queryFeatures(S))?.features?.[0]?.geometry}}}if(l==null)return null;switch(l.type){case"point":f=new Zt({xmin:l.x,ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":f=_tt(l);break;default:f=l.extent}if(!f)return null;ka()||Cs(f.spatialReference,i)||await Aa();const y=Jn(f,i);if(!y)return null;if(s){const v=y.center,b=v.clone();b.x=D4(v.x,s.center.x,i),b.x!==v.x&&y.centerAt(b),s=s.union(y)}else s=y;return s}function Stt(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((e=>"layer"in e))){let e=0,i=0;for(const s of t){const l=s.layer;l?.minScale&&l.maxScale&&(e=l.minScale<e?l.minScale:e,i=l.maxScale>i?l.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function Xx(t,e){const i=xR(t);return di(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Jn(t,e)}async function Ttt(t,e){if(!t||!e)return new an({targetGeometry:new Ct,scale:0,rotation:0});let i=e.spatialReference;const{constraints:s,padding:l,viewpoint:f,size:y}=e,v=[l?y[0]-l.left-l.right:y[0],l?y[1]-l.top-l.bottom:y[1]];let b=null;t instanceof an?b=t:t.viewpoint?b=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(b=t.target);let S=null;b?.targetGeometry?S=b.targetGeometry:t instanceof Zt?S=t:t instanceof ir?S=await A0(t,e,i):t&&(S=await A0(t.center,e,i)||await A0(t.target,e,i)||await A0(t,e,i)),!S&&f?.targetGeometry?S=f.targetGeometry:!S&&e.extent&&(S=e.extent),i||(i=xR(e.spatialReference||e.extent||S)),ka()||di(S.spatialReference,i)||Cs(S.spatialReference,i)||await Aa();const A=Xx(S,i),P="center"in A?A.center:A;e.pickClosestTarget!==!1&&P.type==="point"&&f.targetGeometry?.type==="point"&&(P.x=D4(P.x,f.targetGeometry.x,P.spatialReference));let k=0;b?k=b.rotation:t.hasOwnProperty("rotation")?k=t.rotation:f&&(k=f.rotation);let C=0;C=b?.targetGeometry!=null&&b.targetGeometry.type==="point"?b.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&s&&s.effectiveLODs?s.zoomToScale(t.zoom):Array.isArray(S)||S.type==="point"||S.type==="extent"&&S.width===0&&S.height===0?f.scale:K2(Xx(S.extent,i),v,k);const L=Stt(t.target??t);L&&(L.min&&L.min<C?C=L.min:L.max&&L.max>C&&(C=L.max));let F=new an({targetGeometry:P,scale:C,rotation:k});return s&&(F=s.fit(F),s.constrainByGeometry(F),s.rotationEnabled||(F.rotation=f.rotation)),F}function Ar(t,e){const i=t.targetGeometry,s=e.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function Mtt(t,e,i){return i?Fi(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):rf(t,e,.5)}const Ett=(function(){const t=de();return function(e,i,s){const l=i.targetGeometry;j4(t,l);const f=.5*sf(i);return e.xmin=t[0]-f*s[0],e.ymin=t[1]-f*s[1],e.xmax=t[0]+f*s[0],e.ymax=t[1]+f*s[1],e.spatialReference=l.spatialReference,e}})();function $tt(t,e,i,s,l){return u9(t,e,i.center),t.scale=K2(i,s),l?.constraints?.constrain(t),t}function Att(t,e,i,s){return U4(t,e,i,s),N4(t,t)}const TR=(function(){const t=de();return function(e,i,s){return J2(e,Ott(e,i),Mtt(t,i,s))}})(),Itt=(function(){const t=_o(),e=de();return function(i,s,l,f){const y=sf(s),v=F4(s);return Fi(e,y,y),gR(t,e),M1(t,t,v),Np(t,t,TR(e,l,f)),Np(t,t,[0,f.top-f.bottom]),Fi(i,t[4],t[5])}})();function sf(t){return t.scale*MR(t.targetGeometry?.spatialReference)}function MR(t){return Es(t)?1/(SR(t)*_R*bR):1}function F4(t){return p4(t.rotation)||0}function Ptt(t){return Es(t)?SR(t)*_R*bR:1}function Ott(t,e){return rf(t,e,.5)}const z4=(function(){const t=de(),e=de(),i=de();return function(s,l,f,y,v,b){return rR(t,l),rf(e,f,.5*b),Fi(i,1/y*b,-1/y*b),L4(s,e),v&&M1(s,s,v),Y2(s,s,i),Np(s,s,t),s}})(),U4=(function(){const t=de();return function(e,i,s,l){const f=sf(i),y=F4(i);return j4(t,i.targetGeometry),z4(e,t,s,f,y,l)}})(),ktt=(function(){const t=de();return function(e,i,s,l){const f=sf(i);return j4(t,i.targetGeometry),z4(e,t,s,f,0,l)}})();function ER(t){const e=Br(t);return e?e.valid[1]-e.valid[0]:0}function Rtt(t,e){return Math.round(ER(t)/e)}const Ctt=(function(){const t=de(),e=de(),i=[0,0,0];return function(s,l,f){Gi(t,s,l),a9(t,t),Gi(e,s,f),a9(e,e),sR(i,t,e);let y=Math.acos(iu(t,e)/(Cp(t)*Cp(e)))*xtt;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}})(),Ntt=(function(){const t=de();return function(e,i,s,l){const f=e.targetGeometry;return Ar(e,i),Itt(t,i,s,l),f.x+=t[0],f.y+=t[1],e}})(),u9=function(t,e,i){Ar(t,e);const s=t.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,t},Ltt=(function(){const t=de();return function(e,i,s,l,f){f||(f="center"),J2(t,s,l),rf(t,t,.5);const y=t[0],v=t[1];switch(f){case"center":Fi(t,0,0);break;case"left":Fi(t,-y,0);break;case"top":Fi(t,0,v);break;case"right":Fi(t,y,0);break;case"bottom":Fi(t,0,-v);break;case"top-left":Fi(t,-y,v);break;case"bottom-left":Fi(t,-y,-v);break;case"top-right":Fi(t,y,v);break;case"bottom-right":Fi(t,y,-v)}return Z2(e,i,t),e}})();function k2t(t,e,i){return Ar(t,e),t.rotation+=i,t}function Dtt(t,e,i){return Ar(t,e),t.rotation=i,t}const jtt=(function(){const t=de();return function(e,i,s,l,f){return Ar(e,i),isNaN(s)||s===0||(AR(t,l,i,f),e.scale=i.scale*s,IR(t,t,e,f),Z2(e,e,Fi(t,t[0]-l[0],l[1]-t[1]))),e}})();function Qx(t,e,i){return Ar(t,e),t.scale=i,t}const $R=(function(){const t=de();return function(e,i,s,l,f,y){return Ar(e,i),isNaN(s)||s===0||(AR(t,f,i,y),e.scale=i.scale*s,e.rotation+=l,IR(t,t,e,y),Z2(e,e,Fi(t,t[0]-f[0],f[1]-t[1]))),e}})(),R2t=(function(){const t=de(),e=de();return function(i,s,l,f,y,v,b){return TR(e,v,b),C4(t,y,e),f?$R(i,s,l,f,t,v):jtt(i,s,l,t,v)}})(),AR=(function(){const t=_o();return function(e,i,s,l){return yo(e,i,Att(t,s,l,1))}})(),IR=(function(){const t=_o();return function(e,i,s,l){return yo(e,i,U4(t,s,l,1))}})(),Z2=(function(){const t=de(),e=_o();return function(i,s,l){Ar(i,s);const f=sf(s),y=i.targetGeometry;return yR(e,F4(s)),Y2(e,e,Sa(f,f)),yo(t,l,e),y.x+=t[0],y.y+=t[1],i}})();function PR(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Ftt(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ztt(t,e,i,s,l,f){const y=new Float32Array(6);return y[0]=t,y[1]=e,y[2]=i,y[3]=s,y[4]=l,y[5]=f,y}function OR(t,e,i,s){const l=e[s],f=e[s+1];t[s]=i[0]*l+i[2]*f+i[4],t[s+1]=i[1]*l+i[3]*f+i[5]}function Utt(t,e,i,s=0,l=0,f=2){const y=l||e.length/f;for(let v=s;v<y;v++)OR(t,e,i,v*f)}Object.freeze(Object.defineProperty({__proto__:null,clone:Ftt,create:PR,fromValues:ztt,transform:OR,transformMany:Utt},Symbol.toStringTag,{value:"Module"}));function Gtt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Btt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function kR(t,e,i,s,l,f,y,v,b,S){return t[0]=e,t[1]=i,t[2]=s,t[3]=l,t[4]=f,t[5]=y,t[6]=v,t[7]=b,t[8]=S,t}function RR(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function qtt(t,e){if(t===e){const i=e[1],s=e[2],l=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=l}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Vtt(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=e[4],v=e[5],b=e[6],S=e[7],A=e[8],P=A*y-v*S,k=-A*f+v*b,C=S*f-y*b;let L=i*P+s*k+l*C;return L?(L=1/L,t[0]=P*L,t[1]=(-A*s+l*S)*L,t[2]=(v*s-l*y)*L,t[3]=k*L,t[4]=(A*i-l*b)*L,t[5]=(-v*i+l*f)*L,t[6]=C*L,t[7]=(-S*i+s*b)*L,t[8]=(y*i-s*f)*L,t):null}function Htt(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=e[4],v=e[5],b=e[6],S=e[7],A=e[8];return t[0]=y*A-v*S,t[1]=l*S-s*A,t[2]=s*v-l*y,t[3]=v*b-f*A,t[4]=i*A-l*b,t[5]=l*f-i*v,t[6]=f*S-y*b,t[7]=s*b-i*S,t[8]=i*y-s*f,t}function Wtt(t){const e=t[0],i=t[1],s=t[2],l=t[3],f=t[4],y=t[5],v=t[6],b=t[7],S=t[8];return e*(S*f-y*b)+i*(-S*l+y*v)+s*(b*l-f*v)}function G4(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=e[6],A=e[7],P=e[8],k=i[0],C=i[1],L=i[2],F=i[3],q=i[4],H=i[5],J=i[6],Q=i[7],tt=i[8];return t[0]=k*s+C*y+L*S,t[1]=k*l+C*v+L*A,t[2]=k*f+C*b+L*P,t[3]=F*s+q*y+H*S,t[4]=F*l+q*v+H*A,t[5]=F*f+q*b+H*P,t[6]=J*s+Q*y+tt*S,t[7]=J*l+Q*v+tt*A,t[8]=J*f+Q*b+tt*P,t}function h9(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=e[6],A=e[7],P=e[8],k=i[0],C=i[1];return t[0]=s,t[1]=l,t[2]=f,t[3]=y,t[4]=v,t[5]=b,t[6]=k*s+C*y+S,t[7]=k*l+C*v+A,t[8]=k*f+C*b+P,t}function CR(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3],v=e[4],b=e[5],S=e[6],A=e[7],P=e[8],k=Math.sin(i),C=Math.cos(i);return t[0]=C*s+k*y,t[1]=C*l+k*v,t[2]=C*f+k*b,t[3]=C*y-k*s,t[4]=C*v-k*l,t[5]=C*b-k*f,t[6]=S,t[7]=A,t[8]=P,t}function Jtt(t,e,i){const s=i[0],l=i[1],f=i[2];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=l*e[3],t[4]=l*e[4],t[5]=l*e[5],t[6]=f*e[6],t[7]=f*e[7],t[8]=f*e[8],t}function Ytt(t,e,i){const s=i[0],l=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=l*e[3],t[4]=l*e[4],t[5]=l*e[5],t}function Ktt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Ztt(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Xtt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Qtt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function tet(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=i+i,v=s+s,b=l+l,S=i*y,A=s*y,P=s*v,k=l*y,C=l*v,L=l*b,F=f*y,q=f*v,H=f*b;return t[0]=1-P-L,t[3]=A-H,t[6]=k+q,t[1]=A+H,t[4]=1-S-L,t[7]=C-F,t[2]=k-q,t[5]=C+F,t[8]=1-S-P,t}function eet(t,e){const i=e[0],s=e[1],l=e[2],f=e[4],y=e[5],v=e[6],b=e[8],S=e[9],A=e[10],P=A*y-v*S,k=-A*f+v*b,C=S*f-y*b,L=i*P+s*k+l*C;if(!L)return null;const F=1/L;return t[0]=P*F,t[1]=(-A*s+l*S)*F,t[2]=(v*s-l*y)*F,t[3]=k*F,t[4]=(A*i-l*b)*F,t[5]=(-v*i+l*f)*F,t[6]=C*F,t[7]=(-S*i+s*b)*F,t[8]=(y*i-s*f)*F,t}function iet(t,e){const i=e[0],s=e[1],l=e[2],f=e[3],y=e[4],v=e[5],b=e[6],S=e[7],A=e[8],P=e[9],k=e[10],C=e[11],L=e[12],F=e[13],q=e[14],H=e[15],J=i*v-s*y,Q=i*b-l*y,tt=i*S-f*y,et=s*b-l*v,nt=s*S-f*v,vt=l*S-f*b,Tt=A*F-P*L,St=A*q-k*L,pt=A*H-C*L,ht=P*q-k*F,_t=P*H-C*F,gt=k*H-C*q;let at=J*gt-Q*_t+tt*ht+et*pt-nt*St+vt*Tt;return at?(at=1/at,t[0]=(v*gt-b*_t+S*ht)*at,t[1]=(b*pt-y*gt-S*St)*at,t[2]=(y*_t-v*pt+S*Tt)*at,t[3]=(l*_t-s*gt-f*ht)*at,t[4]=(i*gt-l*pt+f*St)*at,t[5]=(s*pt-i*_t-f*Tt)*at,t[6]=(F*vt-q*nt+H*et)*at,t[7]=(q*tt-L*vt-H*Q)*at,t[8]=(L*nt-F*tt+H*J)*at,t):null}function ret(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function set(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function net(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function oet(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function NR(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function aet(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function uet(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t}function het(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function cet(t,e){const i=t[0],s=t[1],l=t[2],f=t[3],y=t[4],v=t[5],b=t[6],S=t[7],A=t[8],P=e[0],k=e[1],C=e[2],L=e[3],F=e[4],q=e[5],H=e[6],J=e[7],Q=e[8],tt=Oi();return Math.abs(i-P)<=tt*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(s-k)<=tt*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-C)<=tt*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(f-L)<=tt*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(y-F)<=tt*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(v-q)<=tt*Math.max(1,Math.abs(v),Math.abs(q))&&Math.abs(b-H)<=tt*Math.max(1,Math.abs(b),Math.abs(H))&&Math.abs(S-J)<=tt*Math.max(1,Math.abs(S),Math.abs(J))&&Math.abs(A-Q)<=tt*Math.max(1,Math.abs(A),Math.abs(Q))}function pet(t){const e=Oi(),i=t[0],s=t[1],l=t[2],f=t[3],y=t[4],v=t[5],b=t[6],S=t[7],A=t[8];return Math.abs(1-(i*i+f*f+b*b))<=e&&Math.abs(1-(s*s+y*y+S*S))<=e&&Math.abs(1-(l*l+v*v+A*A))<=e}const fet=G4,det=NR;Object.freeze(Object.defineProperty({__proto__:null,add:oet,adjoint:Htt,copy:Btt,determinant:Wtt,equals:cet,exactEquals:het,frob:net,fromMat2d:Qtt,fromMat4:Gtt,fromQuat:tet,fromRotation:Ztt,fromScaling:Xtt,fromTranslation:Ktt,identity:RR,invert:Vtt,isOrthoNormal:pet,mul:fet,multiply:G4,multiplyScalar:aet,multiplyScalarAndAdd:uet,normalFromMat4:iet,normalFromMat4Legacy:eet,projection:ret,rotate:CR,scale:Jtt,scaleByVec2:Ytt,set:kR,str:set,sub:det,subtract:NR,translate:h9,transpose:qtt},Symbol.toStringTag,{value:"Module"}));function Mg(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function yet(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function get(t,e,i,s,l,f,y,v,b){const S=new Float32Array(9);return S[0]=t,S[1]=e,S[2]=i,S[3]=s,S[4]=l,S[5]=f,S[6]=y,S[7]=v,S[8]=b,S}Object.freeze(Object.defineProperty({__proto__:null,clone:yet,create:Mg,fromValues:get},Symbol.toStringTag,{value:"Module"}));function LR(){return new Float32Array(2)}function met(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Lp(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function DR(){return LR()}function jR(){return Lp(1,1)}function FR(){return Lp(1,0)}function zR(){return Lp(0,1)}const vet=DR(),wet=jR(),bet=FR(),_et=zR();Object.freeze(Object.defineProperty({__proto__:null,ONES:wet,UNIT_X:bet,UNIT_Y:_et,ZEROS:vet,clone:met,create:LR,fromValues:Lp,ones:jR,unitX:FR,unitY:zR,zeros:DR},Symbol.toStringTag,{value:"Module"}));function xet(t){return t instanceof Float32Array&&t.length>=2}function Tet(t){return Array.isArray(t)&&t.length>=2}function E3(t){return xet(t)||Tet(t)}var c9;const Do=[0,0];let Xo=c9=class extends It{constructor(t){super(t),this._viewpoint2D={center:de(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Zt,this.id=0,this.inverseTransform=_o(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=_o(),this.transformNoRotation=_o(),this.displayMat3=Mg(),this.displayViewMat3=Mg(),this.viewMat3=Mg(),this.viewMat2d=PR(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Ar(i,t.viewpoint),this._set("size",Hc(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new c9({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return E3(e)?yo(t,e,this.inverseTransform):(Do[0]=e,Do[1]=i,yo(t,Do,this.inverseTransform))}toScreen(t,e,i){return E3(e)?yo(t,e,this.transform):(Do[0]=e,Do[1]=i,yo(t,Do,this.transform))}toScreenNoRotation(t,e,i){return E3(e)?yo(t,e,this.transformNoRotation):(Do[0]=e,Do[1]=i,yo(t,Do,this.transformNoRotation))}wrapMapCoordinate(t,e){Hc(t,e);const[i]=e,[s]=this.center,{extent:l,spatialReference:f}=this;let{xmin:y,xmax:v}=l;if(f.isWrappable){const b=ER(f)/2;y=Math.max(y,s-b),v=Math.min(v,s+b)}return(i<y||i>v)&&(t[0]=D4(i,s,f)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,l=this._get("size");return z4(t,i,l,e,0,s),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:s}=this._viewpoint2D,l=this._get("pixelRatio")||1,f=this._get("size"),y=new an({targetGeometry:new Ct(t[0],t[1],e),scale:i,rotation:s});if(this._set("viewpoint",y),!f||!e||!i)return;this.resolution=sf(y),this.rotation=s,this.scale=i,this.spatialReference=e,Hc(this.center,t);const v=f[0]!==0?2/f[0]:0,b=f[1]!==0?-2/f[1]:0;kR(this.displayMat3,v,0,0,0,b,0,-1,1,1);const S=RR(this.viewMat3),A=Lp(f[0]/2,f[1]/2),P=Lp(-f[0]/2,-f[1]/2),k=p4(s);h9(S,S,A),CR(S,S,k),h9(S,S,P),G4(this.displayViewMat3,this.displayMat3,S);const C=L4(this.viewMat2d,A);return M1(C,C,k),Np(C,C,P),Ett(this.extent,y,f),U4(this.transform,y,f,l),N4(this.inverseTransform,this.transform),ktt(this.transformNoRotation,y,f,l),this.worldScreenWidth=Rtt(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};_([E({readOnly:!0})],Xo.prototype,"id",void 0),_([E({value:1,json:{write:!0}})],Xo.prototype,"pixelRatio",null),_([E({json:{write:!0}})],Xo.prototype,"size",null),_([E()],Xo.prototype,"spatialReference",void 0),_([E({type:an,json:{write:!0}})],Xo.prototype,"viewpoint",null),_([E({readOnly:!0})],Xo.prototype,"visibleArea",null),Xo=c9=_([Y("esri.views.2d.ViewState")],Xo);const tS=Xo;var p9,f9;let ga=p9=class extends Ot{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new p9({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};_([E()],ga.prototype,"left",void 0),_([E()],ga.prototype,"top",void 0),_([E()],ga.prototype,"right",void 0),_([E()],ga.prototype,"bottom",void 0),ga=p9=_([Y("esri.views.2d.PaddedViewState.Padding")],ga);let ac=f9=class extends tS{constructor(...t){super(...t),this.paddedViewState=new tS,this._updateContent=(()=>{const e=de();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const l=this.paddedViewState;Fi(e,s.left+s.right,s.top+s.bottom),Gi(e,i,e),Hc(l.size,e);const f=l.viewpoint;f&&(this.viewpoint=f)}})(),this.addHandles(zt((()=>[this.size,this.padding]),(()=>this._updateContent()),$o)),this.padding=new ga,this.size=[0,0]}set padding(t){this._set("padding",t||new ga)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=Ntt(t.clone(),t,this._get("size"),i));const{targetGeometry:s,rotation:l,scale:f}=e,{x:y,y:v,spatialReference:b}=s,S=this._viewpoint2D;S.center[0]=y,S.center[1]=v,S.rotation=l,S.scale=f,S.spatialReference=b,this._update()}}clone(){return new f9({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};_([E()],ac.prototype,"paddedViewState",void 0),_([E({type:ga})],ac.prototype,"padding",null),_([E()],ac.prototype,"viewpoint",null),ac=f9=_([Y("esri.views.2d.PaddedViewState")],ac);const B4=ac;var _r;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(_r||(_r={}));const UR=Symbol("Yield");let Met=class{constructor(){this._tasks=new Array,this._numPendingTasks=kp(0),this._running=kp(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return UR;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,s){return new Promise(((l,f)=>{this._tasks.push(new eS(l,f,e,i,s)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}unshift(e,i,s){return new Promise(((l,f)=>{this._tasks.unshift(new eS(l,f,e,i,s)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateRunning();try{const s=Os(i.signal);if(s&&!i.abortCallback)i.reject(Be());else{const l=s?i.abortCallback?.(Be()):i.callback(e);Oo(l)?l.then(i.resolve,i.reject):i.resolve(l)}}catch(s){i.reject(s)}return!0}cancelAll(){const e=Be();for(const i of this._tasks)if(i.abortCallback){const s=i.abortCallback(e);i.resolve(s)}else i.reject(e);this._tasks.length=0,this._updateRunning()}},eS=class{constructor(e,i,s,l=void 0,f=void 0){this.resolve=e,this.reject=i,this.callback=s,this.signal=l,this.abortCallback=f}},I0=class extends Ot{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};_([E()],I0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),_([E()],I0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),I0=_([Y("esri.views.support.debugFlags")],I0);const Eet=new I0;function $et(){return new Im.Scheduler}var Qt;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.OVERLAY_RENDERER="overlay renderer",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(Qt||(Qt={}));const Hs=0,iS=new Map([[Qt.RESOURCE_CONTROLLER_IMMEDIATE,Hs],[Qt.RESOURCE_CONTROLLER,4],[Qt.SLIDE,Hs],[Qt.STREAM_DATA_LOADER,Hs],[Qt.ELEVATION_QUERY,Hs],[Qt.TERRAIN_SURFACE,1],[Qt.SURFACE_GEOMETRY_UPDATES,1],[Qt.LOD_RENDERER,2],[Qt.GRAPHICS_CORE,2],[Qt.I3S_CONTROLLER,2],[Qt.POINT_CLOUD_LAYER,2],[Qt.FEATURE_TILE_FETCHER,2],[Qt.CLOUDS_GENERATOR,2],[Qt.OVERLAY,4],[Qt.OVERLAY_RENDERER,4],[Qt.STAGE,4],[Qt.GRAPHICS_DECONFLICTOR,4],[Qt.FILTER_VISIBILITY,4],[Qt.SCALE_VISIBILITY,4],[Qt.FRUSTUM_VISIBILITY,4],[Qt.POINT_OF_INTEREST_FREQUENT,6],[Qt.POINT_OF_INTEREST_INFREQUENT,30],[Qt.LABELER,8],[Qt.FEATURE_QUERY_ENGINE,8],[Qt.FEATURE_TILE_TREE,16],[Qt.FEATURE_TILE_TREE_ACTIVE,Hs],[Qt.ELEVATION_ALIGNMENT,12],[Qt.ELEVATION_ALIGNMENT_SCENE,14],[Qt.TEXT_TEXTURE_ATLAS,12],[Qt.TEXTURE_UNLOAD,12],[Qt.LINE_OF_SIGHT_TOOL,16],[Qt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Hs],[Qt.SNAPPING,Hs],[Qt.SHADOW_ACCUMULATOR,30],[Qt.MAPVIEW_FETCH_QUEUE,Hs],[Qt.MAPVIEW_LAYERVIEW_UPDATE,2],[Qt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Hs]]);function rS(t){return iS.has(t)?iS.get(t):typeof t=="number"?t:1}const Aet=6.5,sS=1,Iet=30,Pet=1e3/30,Oet=100,nS=.9;var Im,lu;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((f=>f.needsUpdate))}constructor(){this._updating=kp(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new J0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new s,this._state=_r.INTERACTING,this._tasks=new Y0,this._runQueue=new Y0,this._load=0,this._idleStateCallbacks=new Y0,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=zt((()=>Eet.SCHEDULER_LOG_SLOW_TASKS),(f=>this._debug=f),Pr);for(const f of Object.keys(Qt))this.performanceInfo.tasks.set(Qt[f],new J0(Qt[f]))}destroy(){this._tasks.toArray().forEach((f=>f.remove())),this._tasks.clear(),ri(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(f){this._updatingChanged(),f&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(f,y){const v=new i(this,f,y);return this._tasks.push(v),this._updatingChanged(),this.performanceInfo.tasks.has(f)||this.performanceInfo.tasks.set(f,new J0(f)),v}registerIdleStateCallbacks(f,y){const v={idleBegin:f,idleEnd:y};this._idleStateCallbacks.push(v),this.state===_r.IDLE&&this._idleUpdatesStartFired&&v.idleBegin();const b=this;return{remove:()=>this._removeIdleStateCallbacks(v),set idleBegin(S){b._idleUpdatesStartFired&&(v.idleEnd(),b._state===_r.IDLE&&S()),v.idleBegin=S},set idleEnd(S){v.idleEnd=S}}}get load(){return this._load}set state(f){this._state!==f&&(this._state=f,this.state!==_r.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((y=>y.idleEnd()))))}get state(){return this._state}frame(f){this._startFrameTaskTimes();const y=this._updateBudget(f);if(y){const v=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-v)}else this._recordFrameTaskTimes(0);return y}_updateBudget(f){this._test&&(this._test.usedBudget=0),++this._frameNumber;let y=Aet,v=f.frameDuration,b=sS;switch(this.state){case _r.IDLE:y=0,v=Math.max(Oet,f.frameDuration),b=Iet;break;case _r.INTERACTING:v=Math.max(Pet,f.frameDuration);case _r.ANIMATING:}return v=v-f.elapsedFrameTime-y,this.state!==_r.IDLE&&v<sS&&!this._forceTask?(this._forceTask=!0,!1):(v=Math.max(v,b),this._budget.reset(v),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case _r.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((f=>f.idleBegin()))),this._runIdle();break;case _r.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(f){this._idleUpdatesStartFired&&f.idleEnd(),this._idleStateCallbacks.removeUnordered(f)}removeTask(f){this._tasks.removeUnordered(f),this._runQueue.removeUnordered(f),this._updatingChanged()}_updateTask(f){this._tasks.forAll((y=>{y.name===f&&y.setPriority(f)}))}_getState(f){if(this._runQueue.some((v=>v.name===f)))return lu.SCHEDULED;let y=lu.IDLE;return this._tasks.forAll((v=>{v.name===f&&v.needsUpdate&&(v.schedulePriority<=1?y=lu.READY:y!==lu.READY&&(y=lu.WAITING))})),y}_getRuntime(f){let y=0;return this._tasks.forAll((v=>{v.name===f&&(y+=v.runtime)})),y}_resetRuntimes(){this._tasks.forAll((f=>f.runtime=0))}_getRunning(){const f=new Map;if(this._tasks.forAll((v=>{v.needsUpdate&&f.set(v.name,(f.get(v.name)||0)+1)})),f.size===0)return null;let y="";return f.forEach(((v,b)=>{y+=v>1?` ${v}x ${b}`:` ${b}`})),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const f=this._tasks.reduce(((y,v)=>v.needsUpdate?++y:y),0);this._load=this._load*nS+f*(1-nS)}_schedule(){for(this._runQueue.filterInPlace((f=>!!f.needsUpdate||(f.schedulePriority=f.basePriority,!1))),this._tasks.forAll((f=>{f.basePriority===Hs&&f.needsUpdate&&!this._runQueue.includes(f)&&f.blockFrame!==this._frameNumber&&this._runQueue.unshift(f)}));this._runQueue.length===0;){let f=!1,y=0;if(this._tasks.forAll((v=>{v.needsUpdate&&v.schedulePriority!==0&&v.basePriority!==Hs&&v.blockFrame!==this._frameNumber&&(f=!0,y=Math.max(y,v.basePriority),v.schedulePriority===1?(v.schedulePriority=0,this._runQueue.push(v)):--v.schedulePriority)})),!f)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const f=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)===UR&&(y.blockFrame=this._frameNumber)}catch(b){At.getLogger("esri.views.support.Scheduler").error(`Exception in task "${y.name}"`,b),y.blockFrame=this._frameNumber}!this._budget.hasProgressed&&y.blockFrame!==this._frameNumber&&y.needsUpdate&&(y.name,Qt.I3S_CONTROLLER,y.blockFrame=this._frameNumber),y.schedulePriority=y.basePriority;const v=this._budget.now()-f;if(y.runtime+=v,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+v),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const f of Object.keys(Qt))this._frameTaskTimes.set(Qt[f],0)}_recordFrameTaskTimes(f){this._frameTaskTimes.forEach(((y,v)=>this.performanceInfo.tasks.get(v).push(y))),this.performanceInfo.total.push(f)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(f,y,v){this._scheduler=f,this.name=y,this.blockFrame=0,this.runtime=0,this._queue=new Met,this._handles=new Yp,this._basePriority=rS(y),this.schedulePriority=this._basePriority,this._task=kp(v??this._queue),this._handles.add(Rs((()=>this.task.running),(b=>f.taskRunningChanged(b))))}remove(){this.processQueue(q4),this._scheduler.removeTask(this),this.schedule=oS.schedule,this.reschedule=oS.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(f){if(this.name===f)return;this.name=f;const y=rS(f);this._basePriority!==Hs&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(f){this.setPriority(f)}get needsUpdate(){return this.updating||this.task.running}schedule(f,y,v){return this._queue.push(f,y,v)}reschedule(f,y,v){return this._queue.unshift(f,y,v)}processQueue(f){return this._queue.runTask(f)}}class s{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(f){return!this.done&&(f()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(f){this._enabled=f}reset(f){this._begin=this.now(),this._budget=f,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=s})(Im||(Im={})),(function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"})(lu||(lu={}));const q4=new Im.Budget;q4.enabled=!1;let ket=class{remove(){}processQueue(){}schedule(e,i,s){try{if(Os(i)){const l=Be();return s?Promise.resolve(s(l)):Promise.reject(l)}return yw(e(q4))}catch(l){return Promise.reject(l)}}reschedule(e,i,s){return this.schedule(e,i,s)}};const oS=new ket;let Ret=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=$et(),this._schedulerHandle=Rs((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Oo(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:s,graphicsView:l,labelManager:f,state:{id:y}}=this.view;s?.forEach(this._updateLayerView,this),f!=null&&(f.lastUpdateId!==y&&(f.viewChange(),f.lastUpdateId=y),f.updateRequested&&f.processUpdate(this._updateParameters)),l!=null&&(l.lastUpdateId!==y&&(l.viewChange(),l.lastUpdateId=y),l.updateRequested&&l.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=_r.ANIMATING:this.view.interacting?this._scheduler.state=_r.INTERACTING:this._scheduler.state=_r.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==_r.IDLE||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new B4,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=zt((()=>e.stationary),(i=>{this.stationary=i,this.requestFrame()})),this._frameTaskHandle=wp(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,s=e.lastUpdateId;s!=null&&(this.stationary||e.moving)||(e.moving=!0),s!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function Cet(t,e){const{spatialReference:i}=e,s=[e.x,e.y];let l,f,y,v;const b=[0,0],S=Net(t);for(let k=0;k<S.length;k++){const C=S[k];for(let L=0;L<C.length-1;L++){_V(b,s,C,L);const F=T1(s,b);(l==null||F<l)&&(l=F,f=[...b],y=k,v=L)}}if(l==null||!f||y==null||v==null)throw new ct("nearest-coordinate:failed","Failed to find the nearest coordinate");const[A,P]=f;return{coordinate:new Ct({x:A,y:P,spatialReference:i}),distance:l}}function Net(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var d9;let Gu=d9=class extends m1.NumericIdentifiableMixin(Ot){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Jn(this.geometry,this.spatialReference)}catch(t){return At.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?u1(this.normalizedGeometry,i):D_(this.normalizedGeometry,i))return t;const{coordinate:s}=Cet(this.normalizedGeometry,i);return s&&(t.targetGeometry=s),t}clone(){return new d9({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};_([E({constructOnly:!0})],Gu.prototype,"geometry",void 0),_([E({readOnly:!0})],Gu.prototype,"normalizedGeometry",null),_([E({constructOnly:!0})],Gu.prototype,"spatialReference",void 0),Gu=d9=_([Y("esri.views.2d.constraints.GeometryConstraint")],Gu);var y9;let P0=y9=class extends m1.NumericIdentifiableMixin(Ot){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new y9({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};_([E()],P0.prototype,"enabled",void 0),_([E()],P0.prototype,"rotationEnabled",void 0),P0=y9=_([Y("esri.views.2d.constraints.RotationConstraint")],P0);const GR=P0;var g9;let Yr=g9=class extends m1.NumericIdentifiableMixin(Ot){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:s,minZoom:l,maxZoom:f}=this,y=-1,v=-1,b=!1,S=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!e?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);e=e.map((A=>A.clone())),e.sort(((A,P)=>P.scale-A.scale)),e.forEach(((A,P)=>A.level=P));for(const A of e)!b&&i>0&&i>=A.scale&&(y=A.level,b=!0),!S&&s>0&&s>=A.scale&&(v=t?t.level:-1,S=!0),t=A;l===-1&&(l=i===0?0:y),f===-1&&(f=s===0?e.length-1:v),l=Math.max(l,0),l=Math.min(l,e.length-1),f=Math.max(f,0),f=Math.min(f,e.length-1),l>f&&([l,f]=[f,l]),i=e[l].scale,s=e[f].scale,e.splice(0,l),e.splice(f-l+1),e.forEach(((A,P)=>{this._lodByScale[A.scale]=A,this._scales[P]=A.scale})),this._set("effectiveLODs",e),this._set("effectiveMinZoom",l),this._set("effectiveMaxZoom",f),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,s=this.effectiveMaxScale,l=t.targetGeometry,f=e&&e.targetGeometry,y=s!==0&&t.scale<s,v=i!==0&&t.scale>i;if(y||v){const b=v?i:s;if(e&&f){const S=(b-e.scale)/(t.scale-e.scale);l.x=f.x+(l.x-f.x)*S,l.y=f.y+(l.y-f.y)*S}t.scale=b}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),s=Math.ceil(t);return e[i]+(t-i)*(e[s]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,s;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let l=0;l<e.length-1;l++){if(i=e[l],s=e[l+1],s===t)return l+this.effectiveMinZoom+1;if(i>t&&s<t)return l+this.effectiveMinZoom+1-(t-s)/(i-s)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new g9({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e),this._scales[0])),this._lodByScale[t].scale}};_([E({readOnly:!0})],Yr.prototype,"effectiveLODs",void 0),_([E({readOnly:!0})],Yr.prototype,"effectiveMinZoom",void 0),_([E({readOnly:!0})],Yr.prototype,"effectiveMaxZoom",void 0),_([E({readOnly:!0})],Yr.prototype,"effectiveMinScale",void 0),_([E({readOnly:!0})],Yr.prototype,"effectiveMaxScale",void 0),_([E()],Yr.prototype,"lods",void 0),_([E()],Yr.prototype,"minZoom",void 0),_([E()],Yr.prototype,"maxZoom",void 0),_([E()],Yr.prototype,"minScale",void 0),_([E()],Yr.prototype,"maxScale",void 0),_([E()],Yr.prototype,"snapToZoom",void 0),Yr=g9=_([Y("esri.views.2d.constraints.ZoomConstraint")],Yr);const BR=Yr,Let={base:null,key:"type",typeMap:{extent:Zt,polygon:Fe}};let vi=class extends Ot{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new kt}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Gu({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new GR({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,s=this.minZoom,l=this.maxZoom,f=this.minScale,y=this.maxScale,v=this.snapToZoom;return e&&e.lods===i&&e.minZoom===s&&e.maxZoom===l&&e.minScale===f&&e.maxScale===y&&e.snapToZoom===v?e:new BR({lods:i,minZoom:s,maxZoom:l,minScale:f,maxScale:y,snapToZoom:v})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach((s=>s.constrain(e,i))),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach((i=>i.applyPanConstraint?.(e))),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};_([E({readOnly:!0})],vi.prototype,"effectiveLODs",null),_([E({readOnly:!0})],vi.prototype,"effectiveMinScale",null),_([E({readOnly:!0})],vi.prototype,"effectiveMaxScale",null),_([E({readOnly:!0})],vi.prototype,"effectiveMinZoom",null),_([E({readOnly:!0})],vi.prototype,"effectiveMaxZoom",null),_([E({types:Let,value:null})],vi.prototype,"geometry",null),_([E({type:[re]})],vi.prototype,"lods",void 0),_([E()],vi.prototype,"minScale",void 0),_([E()],vi.prototype,"maxScale",void 0),_([E()],vi.prototype,"minZoom",void 0),_([E()],vi.prototype,"maxZoom",void 0),_([E()],vi.prototype,"rotationEnabled",void 0),_([E()],vi.prototype,"snapToZoom",void 0),_([E({type:kt})],vi.prototype,"customConstraints",void 0),_([E()],vi.prototype,"view",void 0),_([E({readOnly:!0})],vi.prototype,"version",null),_([E({type:Gu,readOnly:!0})],vi.prototype,"_geometry",null),_([E({type:GR})],vi.prototype,"_rotation",null),_([E({readOnly:!0,type:BR})],vi.prototype,"_zoom",null),vi=_([Y("esri.views.2d.MapViewConstraints")],vi);const aS=vi;let wr=class extends Ot{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([zt((()=>this.constraints?.version),(i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),$o)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ct({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(l){return void At.getLogger(this).error(new ct("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:l}))}const s=this.viewpoint;u9(s,s,i),this.viewpoint=s}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void At.getLogger(this).error(new ct("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(l){return void At.getLogger(this).error(new ct("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:l}))}const s=this.viewpoint;$tt(s,s,i,this.state.size,{constraints:this.constraints}),this.viewpoint=s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;Dtt(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.viewpoint;Qx(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,s;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?s=new ct("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(s=new ct("mapview:invalid-viewpoint","geometry not defined"))}catch(f){s=new ct("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:f})}if(s)return void At.getLogger(this).error(s);this._scaleBeforeChangingSpatialReference=null;const l=new an({targetGeometry:new Ct,scale:0,rotation:0});Ar(l,i),this.constraints?.constrain(l,this.state.paddedViewState.viewpoint),this.state.viewpoint=l,this._set("viewpoint",l)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const l=this._get("extent");return void(l&&(this._set("extent",void 0),this._set("center",l.center)))}const i=this.constraints?.zoomToScale(e)??0;if(!i)return void this._set("zoom",-1);const s=this.viewpoint;Qx(s,s,i),this.viewpoint=s,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:s}=this,l=this._get("center"),f=this._get("extent"),y=this._get("scale"),v=this._get("rotation"),b=this._get("viewpoint"),S=this._get("zoom"),A=S!=null&&s!=null&&s.zoomToScale(S)||void 0;let P,k,C;const L=b?.rotation,F=b?.targetGeometry;F?.type==="extent"?P=F:F?.type==="point"&&(k=F,C=b?.scale);const q=f??P;return{center:l??k??q?.center,rotation:v??L,scale:(y??A??C??(q&&K2(q,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,s,l){const f=e.targetGeometry;try{this._project(e,s)}catch(y){At.getLogger(this).warn(new Mo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:f.toJSON(),spatialReference:s,error:y})),e.targetGeometry=l||new Ct({x:0,y:0,spatialReference:s})}this.constraints?.fit(e),this._set("state",new B4({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:s,rotation:l,scale:f}=this.state.paddedViewState,y=new Ct({x:e,y:i,spatialReference:s});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",l),this._set("scale",f),this._set("state",null)}changeSpatialReference(e){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const b=i.viewpoint.clone();b.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=b}const s=i.clone(),[l,f]=i.center;let y=null;try{y=this._project(new Ct({x:l,y:f,spatialReference:i.spatialReference}),e)}catch(b){x2()||At.getLogger(this).warn(new Mo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y?.toJSON(),spatialReference:e,error:b}))}y||(y=new Ct({x:0,y:0,spatialReference:e}));const v=u9(new an({targetGeometry:new Ct,scale:0,rotation:0}),i.viewpoint,y);s.viewpoint=v;try{const S=[i.size[0]/2,i.size[1]/2],A=[S[0]+20,S[1]],P=i.toMap([0,0],A),{x:k,y:C}=this._project(new Ct({x:P[0],y:P[1],spatialReference:i.spatialReference}),e);P[0]=k,P[1]=C,s.toScreen(P,P);const L=Ctt(S,P,A),F=Math.hypot(P[0]-S[0],P[1]-S[1])/20;!Number.isFinite(F)||Math.abs(F)>4?(v.rotation=0,v.targetGeometry=new Ct({x:0,y:0,spatialReference:e})):(v.scale*=F,v.scale>rt("mapview-srswitch-adjust-rotation-scale-threshold")?v.rotation=0:v.rotation+=Number.isFinite(L)?L:0)}catch{}this._get("constraints")?.constrain(v,void 0),this._get("state").viewpoint=v}resize(e,i){if(!this.ready)return;const s=this.state;let l=this.state.paddedViewState.viewpoint;const f=this.state.paddedViewState.size.slice();s.size=[e,i],Ltt(l,l,f,this.state.paddedViewState.size,this.resizeAlign),l=this.constraints?.constrain(l,void 0)??l,this.state.viewpoint=l}toMap(e){if(!this.ready)return null;const i=[0,0],[s,l]=this.state.toMap(i,[e.x,e.y]),f=this.state.spatialReference;return new Ct({x:s,y:l,spatialReference:f})}toScreen(e,i){if(!this.ready)return null;const s=this._project(e,this.state.spatialReference),l=[s.x,s.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(l,l),this.state.toScreen(l,l),Yi(l[0],l[1])}_project(e,i){const s=e?.targetGeometry||e;if(!i)return e;if(!s)return null;if(i.imageCoordinateSystem||s.spatialReference?.imageCoordinateSystem||di(i,s.spatialReference))return e;const l=Jn(s,i);if(!l)throw new ct("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:i});return Det(e)?(e.targetGeometry=l,e):l}};function Det(t){return t?.declaredClass==="esri.Viewpoint"}_([E({type:Ct})],wr.prototype,"center",null),_([E()],wr.prototype,"constraints",void 0),_([E({type:Zt})],wr.prototype,"extent",null),_([E({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],wr.prototype,"padding",null),_([E()],wr.prototype,"ready",void 0),_([E()],wr.prototype,"resizeAlign",void 0),_([E({readOnly:!0})],wr.prototype,"resolution",null),_([E({type:Number})],wr.prototype,"rotation",null),_([E({type:Number})],wr.prototype,"scale",null),_([E({readOnly:!0})],wr.prototype,"state",void 0),_([E({type:an})],wr.prototype,"viewpoint",null),_([E({readOnly:!0})],wr.prototype,"visibleArea",null),_([E()],wr.prototype,"zoom",null),wr=_([Y("esri.views.2d.ViewStateManager")],wr);const lS=160;let O0=class extends Ot{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=lS&&this.clear()}),lS))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};_([E()],O0.prototype,"_timer",void 0),_([E()],O0.prototype,"stationary",null),O0=_([Y("esri.views.2d.support.StationaryManager")],O0);const jet=t=>{let e=class extends t{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new wr({constraints:new aS({view:this})}),this.stationaryManager=new O0,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new Ret(this),this.viewEvents=new Gk(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([zt((()=>this.viewpoint),(()=>this.stationaryManager.flip()),$o)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const s=this._get("animation");if(i===s)return;if(s&&s.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const l=()=>{this.destroyed||i===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};i.when(l,l)}get constraints(){return this.stateManager?.constraints}set constraints(i){i.view=this;const s=this.stateManager.constraints;this.stateManager.constraints=i,s?.destroy()}get padding(){return this.stateManager?.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:s}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=s}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return _([E({readOnly:!0})],e.prototype,"animationManager",void 0),_([E({readOnly:!0})],e.prototype,"fullOpacity",void 0),_([E()],e.prototype,"stateManager",void 0),_([E()],e.prototype,"constraintsInfo",null),_([E()],e.prototype,"extent",null),_([E({readOnly:!0})],e.prototype,"state",null),_([E({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),_([E()],e.prototype,"renderingOptions",void 0),_([E({readOnly:!0})],e.prototype,"interacting",null),_([E()],e.prototype,"stationary",null),_([E()],e.prototype,"animation",null),_([E({type:aS})],e.prototype,"constraints",null),_([E()],e.prototype,"padding",null),_([E()],e.prototype,"resizeAlign",null),_([E()],e.prototype,"rotation",null),_([E({readOnly:!0})],e.prototype,"viewEvents",void 0),_([E({type:an})],e.prototype,"viewpoint",null),e=_([Y("esri.views.Viewport2DBaseMixin")],e),e};let rl=class extends Tl{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ln(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new ct("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,i){i||(i=Oo(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};_([E({readOnly:!0})],rl.prototype,"done",null),_([E({readOnly:!0,type:String})],rl.prototype,"state",void 0),_([E()],rl.prototype,"target",void 0),rl=_([Y("esri.views.ViewAnimation")],rl),(function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(rl||(rl={}));const m9=rl;let Eg=class extends Ot{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void At.getLogger(this).error("#goTo()","target cannot be null or undefined");const s=new m9;this.view.animation=s,await Od((()=>this.view.ready),i);const l={...i,animate:i?.animate??!Wk(),animationMode:i?.animationMode??"auto"},{extent:f,spatialReference:y,size:v,viewpoint:b,constraints:S,padding:A,allLayerViews:P}=this.view,k=Ttt(e,{extent:f,spatialReference:y,size:v,viewpoint:b,constraints:S,padding:A,allLayerViews:P,pickClosestTarget:i?.pickClosestTarget??!0});return s?.update(k),this._gotoTask={},l.animate?this._gotoAnimated(k,l):this._gotoImmediate(k,l)}_gotoImmediate(e,i){const s=this._gotoTask,l=this.view.animation,f=e.then((y=>{if(Ce(i),s!==this._gotoTask)throw new ct("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=l.target=y,l.finish()}));return this._cancellableGoTo(s,l,f,i)}_gotoAnimated(e,i){const s=this._gotoTask,l=this.view.animation;if(!l)return Promise.resolve();const f=e.then((y=>{if(Ce(i),s!==this._gotoTask)throw new ct("view:goto-interrupted","Goto was interrupted");return l.update(y),this.view.animationManager.animate(l,this.view.viewpoint,i),l.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(s,l,f,i)}_cancellableGoTo(e,i,s,l){const f=()=>e===this._gotoTask;return zE(s,l).finally((()=>{f()&&(i.done||i.stop())}))}};_([E({constructOnly:!0})],Eg.prototype,"view",void 0),Eg=_([Y("esri.views.2d.GoToManager")],Eg);function qR(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function VR(t,e){return e.some((i=>qR(t,i)))}function uS(t,{dragPrimary:e,dragSecondary:i,dragTertiary:s}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:s}].filter((l=>l.value===t)).map((l=>l.key))}let hS=class extends Ki{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,(s=>this._handleDoubleClick(s,i)))}_handleDoubleClick(e,i){qR(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Fet=class extends Ki{constructor(e,i,s){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",s,(l=>this._handleDoubleTapDrag(l)))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:s}=i;if(s!==this.pointerType)return;e.stopPropagation();const{action:l,delta:f}=i,{view:y}=this,{mapViewNavigation:v}=y;switch(l){case"begin":{const{scale:b}=y;this._startScale=b,this._currentScale=b,this._previousDelta=f,v.begin();break}case"update":{if(this._previousDelta.y===f.y)return;this._previousDelta=f;const b=1.015**f.y,S=this._startScale*b,A=S/this._currentScale;v.setViewpointImmediate(A),this._currentScale=S;break}case"end":{const{constraints:b}=y,{effectiveLODs:S,snapToZoom:A}=b;if(!A||!S)return void v.end();const P=b.snapScale(this._currentScale),k=(f.y>0?Math.max(P,b.snapToPreviousScale(this._startScale)):Math.min(P,b.snapToNextScale(this._startScale)))/this._currentScale;v.zoom(k).then((()=>{v.end()}));break}}}},X2=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,s=i.pointers.size;switch(i.action){case"start":this._currentCount=s,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},zet=class extends Ki{constructor(e,i,s){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",s,(l=>this._handleDrag(l))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this._dragEventSeparator=new X2({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&VR(s.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Uet=class extends Ki{constructor(e,i,s){super(!0),this._view=e,this.pointerActions=i;const l=this._view.mapViewNavigation;this._dragEventSeparator=new X2({start:(f,y)=>{l.rotate.begin(this._view,y.data),y.stopPropagation()},update:(f,y)=>{l.rotate.update(this._view,y.data),y.stopPropagation()},end:(f,y)=>{l.rotate.end(),y.stopPropagation()},condition:(f,y)=>f===1&&VR(y.data,this.pointerActions)}),this.registerIncoming("drag",s,(f=>this._dragEventSeparator.handle(f)))}};function un(t){const e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function hn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Mi(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function Ns(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Ye(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function HR(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function WR(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Get(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Bet(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function qet(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function Vet(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function Het(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function Wet(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function Jet(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function Yet(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function fs(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Ji(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function Ta(t,e){const i=e[0]-t[0],s=e[1]-t[1],l=e[2]-t[2];return Math.sqrt(i*i+s*s+l*l)}function Pa(t,e){const i=e[0]-t[0],s=e[1]-t[1],l=e[2]-t[2];return i*i+s*s+l*l}function nf(t){const e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function Ket(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Zet(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function cn(t,e){const i=e[0],s=e[1],l=e[2];let f=i*i+s*s+l*l;return f>0&&(f=1/Math.sqrt(f),t[0]=e[0]*f,t[1]=e[1]*f,t[2]=e[2]*f),t}function ge(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ls(t,e,i){const s=e[0],l=e[1],f=e[2],y=i[0],v=i[1],b=i[2];return t[0]=l*b-f*v,t[1]=f*y-s*b,t[2]=s*v-l*y,t}function Xet(t,e,i){const s=e[0],l=e[1],f=e[2],y=i[0],v=i[1],b=i[2],S=l*b-f*v,A=f*y-s*b,P=s*v-l*y,k=Math.sqrt(S*S+A*A+P*P);return t[0]=S/k,t[1]=A/k,t[2]=P/k,t}function V4(t,e,i,s){const l=e[0],f=e[1],y=e[2];return t[0]=l+s*(i[0]-l),t[1]=f+s*(i[1]-f),t[2]=y+s*(i[2]-y),t}function Qet(t,e,i,s,l,f){const y=f*f,v=y*(2*f-3)+1,b=y*(f-2)+f,S=y*(f-1),A=y*(3-2*f);return t[0]=e[0]*v+i[0]*b+s[0]*S+l[0]*A,t[1]=e[1]*v+i[1]*b+s[1]*S+l[1]*A,t[2]=e[2]*v+i[2]*b+s[2]*S+l[2]*A,t}function tit(t,e,i,s,l,f){const y=1-f,v=y*y,b=f*f,S=v*y,A=3*f*v,P=3*b*y,k=b*f;return t[0]=e[0]*S+i[0]*A+s[0]*P+l[0]*k,t[1]=e[1]*S+i[1]*A+s[1]*P+l[1]*k,t[2]=e[2]*S+i[2]*A+s[2]*P+l[2]*k,t}function eit(t,e=1){const i=j2,s=2*i()*Math.PI,l=2*i()-1,f=Math.sqrt(1-l*l)*e;return t[0]=Math.cos(s)*f,t[1]=Math.sin(s)*f,t[2]=l*e,t}function JR(t,e,i){const s=e[0],l=e[1],f=e[2];return t[0]=i[0]*s+i[4]*l+i[8]*f+i[12],t[1]=i[1]*s+i[5]*l+i[9]*f+i[13],t[2]=i[2]*s+i[6]*l+i[10]*f+i[14],t}function iit(t,e,i){const s=e[0],l=e[1],f=e[2];return t[0]=s*i[0]+l*i[3]+f*i[6],t[1]=s*i[1]+l*i[4]+f*i[7],t[2]=s*i[2]+l*i[5]+f*i[8],t}function rit(t,e,i){const s=i[0],l=i[1],f=i[2],y=i[3],v=e[0],b=e[1],S=e[2],A=l*S-f*b,P=f*v-s*S,k=s*b-l*v,C=l*k-f*P,L=f*A-s*k,F=s*P-l*A,q=2*y;return t[0]=v+A*q+2*C,t[1]=b+P*q+2*L,t[2]=S+k*q+2*F,t}function sit(t,e,i,s){const l=[],f=[];return l[0]=e[0]-i[0],l[1]=e[1]-i[1],l[2]=e[2]-i[2],f[0]=l[0],f[1]=l[1]*Math.cos(s)-l[2]*Math.sin(s),f[2]=l[1]*Math.sin(s)+l[2]*Math.cos(s),t[0]=f[0]+i[0],t[1]=f[1]+i[1],t[2]=f[2]+i[2],t}function nit(t,e,i,s){const l=[],f=[];return l[0]=e[0]-i[0],l[1]=e[1]-i[1],l[2]=e[2]-i[2],f[0]=l[2]*Math.sin(s)+l[0]*Math.cos(s),f[1]=l[1],f[2]=l[2]*Math.cos(s)-l[0]*Math.sin(s),t[0]=f[0]+i[0],t[1]=f[1]+i[1],t[2]=f[2]+i[2],t}function oit(t,e,i,s){const l=[],f=[];return l[0]=e[0]-i[0],l[1]=e[1]-i[1],l[2]=e[2]-i[2],f[0]=l[0]*Math.cos(s)-l[1]*Math.sin(s),f[1]=l[0]*Math.sin(s)+l[1]*Math.cos(s),f[2]=l[2],t[0]=f[0]+i[0],t[1]=f[1]+i[1],t[2]=f[2]+i[2],t}function ait(t,e){cn(cS,t),cn(pS,e);const i=ge(cS,pS);return i>1?0:i<-1?Math.PI:Math.acos(i)}const cS=Mt(),pS=Mt();function lit(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ge(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function YR(t,e){if(t===e)return!0;const i=t[0],s=t[1],l=t[2],f=e[0],y=e[1],v=e[2],b=Oi();return Math.abs(i-f)<=b*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-y)<=b*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-v)<=b*Math.max(1,Math.abs(l),Math.abs(v))}function uit(t,e,i){const s=i[0]-e[0],l=i[1]-e[1],f=i[2]-e[2];let y=s*s+l*l+f*f;return y>0?(y=1/Math.sqrt(y),t[0]=s*y,t[1]=l*y,t[2]=f*y,t):(t[0]=0,t[1]=0,t[2]=0,t)}const ls=Ye,hit=HR,cit=WR,pit=Ta,fit=Pa,dit=un,Pm=nf;Object.freeze(Object.defineProperty({__proto__:null,abs:qet,add:Ns,angle:ait,bezier:tit,ceil:Get,clamp:Jet,copy:hn,cross:Ls,crossAndNormalize:Xet,direction:uit,dist:pit,distance:Ta,div:cit,divide:WR,dot:ge,equals:YR,exactEquals:Ge,floor:Bet,hermite:Qet,inverse:Zet,len:dit,length:un,lerp:V4,max:Wet,min:Het,mul:hit,multiply:HR,negate:Ket,normalize:cn,random:eit,rotateX:sit,rotateY:nit,rotateZ:oit,round:Yet,scale:fs,scaleAndAdd:Ji,set:Mi,sign:Vet,sqrDist:fit,sqrLen:Pm,squaredDistance:Pa,squaredLength:nf,str:lit,sub:ls,subtract:Ye,transformMat3:iit,transformMat4:JR,transformQuat:rit},Symbol.toStringTag,{value:"Module"}));function Mn(t){let e=t*t;return t<0&&(e*=-1),e}function yit(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function git(t,e,i){const s=i,l=t.state,f=t.device,y=e.tiltDirection==="forward-down"?1:-1,v=1;return f.deviceType==="standard"?(s.translation[0]=Mn(l.axes[0]),s.translation[1]=Mn(l.axes[1]),s.translation[2]=Mn(l.buttons[7])-Mn(l.buttons[6]),s.heading=Mn(l.axes[2]),s.tilt=Mn(l.axes[3])):f.deviceType==="spacemouse"&&(s.translation[0]=1.2*Mn(l.axes[0]),s.translation[1]=1.2*Mn(l.axes[1]),s.translation[2]=2*-Mn(l.axes[2]),s.heading=1.2*Mn(l.axes[5]),s.tilt=1.2*Mn(l.axes[3])),s.tilt*=y,fs(s.translation,s.translation,v),s}function mit(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let vit=class extends Ki{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Yp,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(i=>this._handleGamePadEvent(i))),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([zt((()=>this._view.navigation.gamepad?.enabled),(i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=wp({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),Pr)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,yit(this._transformation)):(this._currentDevice=e.data.device,git(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const i=this._transformation;if(mit(i))return void this._frameTask?.pause();const s=this._view.viewpoint.clone(),l=this._view.navigation.gamepad.velocityFactor,f=bit*l*e;Z2(s,s,[i.translation[0]*f,-i.translation[1]*f]);const y=1+i.translation[2]*_it*e,v=this._view.constraints.rotationEnabled?-i.heading*wit*e:0,b=this._view.size,S=[b[0]/2,b[1]];$R(s,s,y,v,S,b);const A=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=A}};const wit=.06,bit=.7,_it=6e-4;function KR(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),fe((()=>document.removeEventListener("visibilitychange",e)))}let xit=class extends Ki{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=l=>{const f=this._keyMap[l.data.key];if(l.modifiers.has("Meta")||l.modifiers.has("Control"))return void this._stopMovement();if(f==null)return;l.stopPropagation(),l.preventDefault();const y=l.type==="key-down";if(this._pressedKeys[y?"add":"delete"](f),y){if(this._direction===f)return;this._direction=f,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const v=this._timeout===void 0,b=this._pressedKeys.size>0;v||b?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,this._handleKey),this.registerIncoming("key-up",s,this._handleKey),this.registerIncoming("blur",s,this._stopMovement),this._visibilityHandle=KR((l=>l?null:this._stopMovement()))}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout((()=>{this._timeout=void 0,e()}),this._stickyKeyDuration)}},Sit=class extends Ki{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",s,(l=>this._handleKeyDown(l))),this.registerIncoming("key-up",s,(l=>this._handleKeyUp(l))),this.registerIncoming("blur",s,(()=>this._handleStop())),this._visibilityHandle=KR((l=>l?null:this._handleStop()))}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const s of e)this._keyToDirection.set(s,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const s=e.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const l=this._keyToDirection.get(e.data.key);if(this._pressed=l!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),l){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Ic;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Ic||(Ic={}));let Tit=class extends Ki{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,(l=>this._handleKeyDown(l))),i.zoomIn.forEach((l=>this._keysToZoomAction[l]=Ic.IN)),i.zoomOut.forEach((l=>this._keysToZoomAction[l]=Ic.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=e.data;if(!(s in this._keysToZoomAction))return;const l=this._keysToZoomAction[s],{mapViewNavigation:f}=this.view;let y=null;switch(l){case Ic.IN:y=f.zoomIn();break;case Ic.OUT:y=f.zoomOut();break;default:return}f.begin(),y.then((()=>f.end())),e.stopPropagation()}};const Mit=.6;let Eit=class extends Ki{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,(s=>this._handleMouseWheel(s)))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:l,deltaY:f}=e.data,y=1/Mit**(1/60*f),v=i.zoom(y,[s,l]);v&&(this._canZoom=!1,v.catch((()=>{})).then((()=>{this._canZoom=!0,i.end()})))}},$it=class extends Ki{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(s=>this._handleDrag(s))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const i=this.view.mapViewNavigation;this._dragEventSeparator=new X2({start:(s,l)=>{i.pinch.begin(this.view,l.data),l.stopPropagation()},update:(s,l)=>{i.pinch.update(this.view,l.data),l.stopPropagation()},end:(s,l)=>{i.pinch.end(this.view),l.stopPropagation()},condition:s=>s>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function fS(t){const e=t.native;return e?{buttons:e.buttons.map((i=>i.pressed?i.value||1:0)),axes:e.axes.map((i=>Pit(i,t.axisThreshold)))}:{buttons:[],axes:[]}}function Ait(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Iit(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Pit(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Oit=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=f=>{this._connectGamepad(f.gamepad)},this._onDisconnectGamepad=f=>{const y=f.gamepad,v=y.index,b=this._inputDevices[v];b&&(this._emitGamepadEvent(y,fS(b),!1),this._inputDevices.splice(v,1),this._latestUpdate.splice(v,1),this._input.gamepad.devices.remove(b),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,l=window.isSecureContext;this.supported=s&&l,this.supported&&(dS((f=>this._connectGamepad(f))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new k4(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=wp({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;dS((l=>{const f=this._inputDevices[l.index];if(!f)return;const y=this._latestUpdate[l.index],v=fS(f),b=s||Iit(v);y&&(y.timestamp===l.timestamp||!y.active&&b||Ait(y.state,v))||this._emitGamepadEvent(l,v,!b)}))}_emitGamepadEvent(e,i,s){const l=this._latestUpdate[e.index],f=l&&l.active;if(!f&&!s)return;const y=!f&&s?"start":f&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:y})}};function kit(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function dS(t){for(const e of navigator.getGamepads())kit(e)&&t(e)}const yS=rt("edge"),Rit=rt("chrome"),Cit=rt("ff"),Nit=rt("safari"),gS="esri-view-surface",Hh={touchNone:`${gS}--touch-none`,touchPan:`${gS}--touch-pan`};var ph;let Lit=(ph=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Oit(e,i),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((e=>this._releasePointerCaptureSafe(e))),this._activePointerCaptures.clear(),this._gamepadSource=ze(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const s=this._active[i];this._element.removeEventListener($3[i],s),delete this._active[i]}e&&e.forEach((i=>{if(!this._active[i]&&$3[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener($3[i],s),this._active[i]=s}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Hh.touchNone:Hh.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Hh.touchPan:Hh.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Hh.touchNone),this._element.classList.remove(Hh.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const s=qk(this._element,e);return ph.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(e,i){const{key:s}=i;s&&e==="key-up"&&this._keyDownState.delete(s);const l={native:i,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&e==="key-down"&&this._keyDownState.add(l.key),this._callback(e,l)}_handlePointer(e,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,s)}_handlePointerPreventDefault(e,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,s)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&rt("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let s=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:yS&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}yS?s*=.7:Rit||Nit?s*=.6:Cit&&(s*=1.375);const l=100,f=Math.abs(s);f>l&&(s=s/f*200/(1+Math.exp(-.02*(f-l))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(e,y)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const s={native:i};i.preventDefault(),this._callback(e,s)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},ph.test={disableSubpixelCoordinates:!1},ph);const $3={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Dit=class extends Ki{constructor(){super(!0),this.registerIncoming("context-menu",(e=>e.data.native.preventDefault()))}};const ZR=()=>({maximumClickDelay:300}),jit=(t={})=>({...ZR(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),H4=(t={})=>({...ZR(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function Om(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Fit(t,e){const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}function zit(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Yi()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[Q,tt]=t,[et,nt]=[tt.x-Q.x,tt.y-Q.y];return e.radius=Math.sqrt(et*et+nt*nt)/2,e.center.x=(Q.x+tt.x)/2,e.center.y=(Q.y+tt.y)/2,e}let i=0,s=0;for(let Q=0;Q<t.length;Q++)i+=t[Q].x,s+=t[Q].y;i/=t.length,s/=t.length;const l=t.map((Q=>Q.x-i)),f=t.map((Q=>Q.y-s));let y=0,v=0,b=0,S=0,A=0,P=0,k=0;for(let Q=0;Q<l.length;Q++){const tt=l[Q],et=f[Q],nt=tt*tt,vt=et*et;y+=nt,v+=vt,b+=tt*et,S+=nt*tt,A+=vt*et,P+=tt*vt,k+=et*nt}const C=.5*(S+P),L=.5*(A+k),F=y*v-b*b,q=(C*v-L*b)/F,H=(y*L-b*C)/F,J=Yi(q+i,H+s);return{radius:Math.sqrt(q*q+H*H+(y+v)/t.length),center:J}}function sh(t){const{native:e}=t,{pointerId:i,button:s,pointerType:l}=e;return l==="mouse"?`${i}:${s}`:`${l}`}let Uit=class extends Ki{constructor(e={},i=Vp){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Yi(0,0),this._pointerState=new Map,this._parameters=H4(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new X2({start:(s,l)=>this._dragStart(s,l),update:(s,l)=>this._dragUpdate(l),end:(s,l)=>this._dragEnd(l)}),this.registerIncoming("drag",(s=>this._dragEventSeparator.handle(s))),this.registerIncoming("pointer-down",(s=>this._handlePointerDown(s))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{e.doubleTapTimeout=ri(e.doubleTapTimeout)}))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=ri(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:l}=i,{center:f}=s;this._dragStartCenter=f;const y=A3("begin",Yi(0,0),s);this._doubleTapDrag.emit(y,void 0,l),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=e,{center:l}=i,f=A3("update",Yi(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(f,void 0,s),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=e,{center:l}=i,f=A3("end",Yi(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(f,void 0,s),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,s=sh(i),l=this._pointerState.get(s),{pointerType:f}=i.native;if(l){const y=f==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(s),Om(l.event.data,i)>y?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:s}=i.native,l=sh(i),f=s==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,y=this._clock.setTimeout((()=>this._clearPointerDown(l)),f);this._pointerState.set(l,{event:e,doubleTapTimeout:y}),this.refreshHasPendingInputs()}};function A3(t,e,i){const{button:s,buttons:l,pointer:f,pointers:y,pointerType:v,timestamp:b}=i;return{action:t,delta:e,button:s,buttons:l,pointer:f,pointers:y,pointerType:v,timestamp:b}}let Git=class extends Ki{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,s,l){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:l,pointers:Bit(this._activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(e){const i=e.native.pointerId,s=ly(this._activePointerMap).angle,l={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,l);const f=$g(l,XR(this._activePointerMap));l.initialAngle=f,l.lastAngle=f,this._updatePointerAngles(s)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,s=this._activePointerMap.get(i);s?s.event=e:this._addPointer(e)}_removePointer(e){const i=ly(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=ly(this._activePointerMap);this._activePointerMap.forEach((s=>{s.initialAngle=$g(s,i)-e,s.lastAngle=$g(s,i)-e}))}_emitEvent(e,i,s){const l=ly(this._activePointerMap);this._drag.emit(this._createPayload(e,i,l,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,s=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,s=i.currentEvent,l=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,l)):(this._addPointer(s),this._emitEvent("added",s,l),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,l))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function XR(t){const e=[];return t.forEach((i=>{e.push(Yi(i.event.x,i.event.y))})),zit(e)}function ly(t){const e=XR(t);let i=0;return t.forEach((s=>{let l=$g(s,e),f=l-s.lastAngle;for(;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;l=s.lastAngle+f,s.lastAngle=l;const y=l-s.initialAngle;i+=y})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Bit(t){const e=new Map;return t.forEach(((i,s)=>e.set(s,i.event))),e}function $g(t,e){const i=t.event,s=i.x-e.center.x,l=i.y-e.center.y;return Math.atan2(l,s)}var mS;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(mS||(mS={}));let qit=class extends Ki{constructor(e={},i=Vp){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=H4(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const i=e.data,s=sh(i);if(!this._pointerState.has(s)){const l={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(s,l),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,s=sh(i),l=this._pointerState.get(s);if(l&&l.downButton===i.native.button){const f=l.immediateDoubleClick,y=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;f?(f.timeoutHandle.remove(),Om(f,e.data)>y?this._startImmediateDoubleClick(e,l):(this._immediateDoubleClick.emit(e.data,void 0,f.modifiers),this._removeState(i))):Om(l,e.data)>y?this._removeState(i):this._startImmediateDoubleClick(e,l)}}_startImmediateDoubleClick(e,i){const s=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),s)}}_removeState(e){const i=sh(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},Vit=class extends Ki{constructor(e={},i=Vp){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=jit(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(s=>this._handlePointerDown(s))),this.registerIncoming("pointer-up",(s=>this._handlePointerLoss(s,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(s=>this._handlePointerLoss(s,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(s=>this._handlePointerLoss(s,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(s=>this._handlePointerMove(s))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{e.holdTimeout=ri(e.holdTimeout)})),super.onUninstall()}_handlePointerDown(e){const i=e.data,s=i.native.pointerId;let l=null;this._pointerState.size===0&&(l=this._clock.setTimeout((()=>{const y=this._pointerState.get(s);if(y){if(!y.isDragging){const v=y.previousEvent;this._pointerHold.emit(v,void 0,e.modifiers),y.holdEmitted=!0}y.holdTimeout=null}}),this._parameters.holdDelay));const f={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:l,modifiers:new Set};this._pointerState.set(s,f),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,s=i.native.pointerId,l=this._pointerState.get(s);l&&(l.isDragging?this._pointerDrag.emit(uy("update",l,i),void 0,l.modifiers):Fit(i,l.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),l.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,s=i.native.pointerId;this._pointerState.forEach((l=>{l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging||(l.modifiers=e.modifiers,l.isDragging=!0,s===l.startEvent.native.pointerId?this._pointerDrag.emit(uy("start",l,i)):this._pointerDrag.emit(uy("start",l,l.previousEvent),e.timestamp))}))}_handlePointerLoss(e,i){const s=e.data,l=s.native.pointerId,f=this._pointerState.get(l);f&&(f.holdTimeout!=null&&(f.holdTimeout.remove(),f.holdTimeout=null),f.isDragging?this._pointerDrag.emit(uy("end",f,i==="pointer-up"?s:f.previousEvent),void 0,f.modifiers):i==="pointer-up"&&f.downButton===s.native.button&&e.timestamp-f.startTimestamp<=this._parameters.maximumClickDelay&&!f.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(l),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}};function uy(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let Hit=class extends Ki{constructor(e={},i=Vp){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=H4(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(s=>this._handleImmediateClick(s))),this.registerIncoming("pointer-down",(s=>this._handlePointerDown(s)))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=ri(e.doubleClickTimer)))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const s=this._pointerState.get(e);s&&(s.doubleClickTimer=ri(s.doubleClickTimer),i&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:s}=i.native,l=Wit(i);if(!this._pointerState.has(l))return void this._startClick(e);const f=this._pointerState.get(l),{data:y,modifiers:v}=f.event,b=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;Om(y,i)>b?(this._clearDoubleClickTimer(l,!0),this._startClick(e)):(this._clearDoubleClickTimer(l,!1),f.pointerDownCount===2&&this._doubleClick.emit(y,void 0,v))}_handlePointerDown(e){const i=sh(e.data),s=this._pointerState.get(i);s&&(s.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:s}}=i,l=sh(i),f=s==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,y=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(l)),f);this._pointerState.set(l,{event:e,doubleClickTimer:y,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Wit(t){const{pointerId:e,pointerType:i,button:s}=t.native;return i==="mouse"?`${e}:${s}`:`${i}`}const hy={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},vS=Symbol("handles");let Ou=class extends Ot{initialize(){const e=()=>this.view?.ready;this.addHandles([Rs((()=>!e()),(()=>this._disconnect())),Rs(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(vS),this._inputManager=ze(this._inputManager)}_connect(){const e=this.view.surface,i=new Lit(e,this.view.input),s=[new qit,new Vit,new Hit,new Git(this.view.navigation),new Uit],l=new Gs({eventSource:i,recognizers:s}),f=new zet(this.view,["primary"]),y=new Uet(this.view,["secondary"]);l.installHandlers("prevent-context-menu",[new Dit],Le.INTERNAL),l.installHandlers("navigation",[new $it(this.view),new vit(this.view),new Eit(this.view),new hS(this.view),new hS(this.view,[hy.counter]),f,new xit(this.view,hy.pan),new Tit(this.view,hy.zoom),new Sit(this.view,hy.rotate),y,new Fet(this.view,"touch")],Le.INTERNAL),this.view.viewEvents.connect(l),this._source=i,this._inputManager=l,this.addHandles([zt((()=>this.view?.navigation?.browserTouchPanEnabled),(v=>{this._source&&(this._source.browserTouchPanningEnabled=!v)}),Pr),zt((()=>{const{actionMap:v}=this.view.navigation;return{panActions:uS("pan",v),rotateActions:uS("rotate",v)}}),(({panActions:v,rotateActions:b})=>{f.pointerActions=v,y.pointerActions=b}),zi)],vS)}get test(){}};_([E()],Ou.prototype,"view",void 0),_([E()],Ou.prototype,"latestPointerType",null),_([E()],Ou.prototype,"latestPointerLocation",null),_([E()],Ou.prototype,"multiTouchActive",null),Ou=_([Y("esri.views.2d.input.MapViewInputManager")],Ou);const Jit=Ou,Yit=t=>{let e=class extends t{constructor(...i){super(...i),this.goToManager=new Eg({view:this}),this.inputManager=new Jit({view:this}),this.addHandles([this.on("resize",(s=>this.stateManager.resize(s.width,s.height)))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,s,l,f){return this.inputManager&&this.viewEvents.on(i,s,l,f)||super.on(i,s)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,s){return this.goToManager.goTo(i,s)}toMap(i){if(!this.ready)return null;const s=Hk(i)?Vk(this,i):i;return this.stateManager.toMap(s)}};return _([E()],e.prototype,"goToManager",void 0),_([E({readOnly:!0})],e.prototype,"interacting",null),_([E()],e.prototype,"stationary",null),_([E({readOnly:!0})],e.prototype,"inputManager",void 0),e=_([Y("esri.views.Viewport2DMixin")],e),e};let wS=class{constructor(e){this._view=e,this.viewpoint=new an({targetGeometry:new Ct,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return MR(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=xA(this.center,e.center);let s=Math.abs(e.rotation-this.rotation);s=s>=180?360-s:s,i.rotate=d1(s),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,s){const{pan:l,rotate:f,zoom:y,zoomOffset:v}=s,{center:b}=this;b.spatialReference=e.center.spatialReference,b.x=s0(e.center.x,i.center.x,l),b.y=s0(e.center.y,i.center.y,l),this.viewpoint.scale=s0(e.scale,i.scale+v,y);let S=e.rotation;const A=i.rotation;Math.abs(A-S)>=180&&(S+=360*(S<A?1:-1)),this.viewpoint.rotation=s0(S,A,f)}copyFrom(e){Ar(this.viewpoint,e.viewpoint),this._view=e.view}};function Nf(t,e,i,s){const l=3*t,f=3*(i-t)-l,y=1-l-f,v=3*e,b=3*(s-e)-v,S=1-v-b;function A(L){return((y*L+f)*L+l)*L}function P(L){return((S*L+b)*L+v)*L}function k(L){return(3*y*L+2*f)*L+l}function C(L,F){let q,H,J,Q,tt,et;for(J=L,et=0;et<8;et++){if(Q=A(J)-L,Math.abs(Q)<F)return J;if(tt=k(J),Math.abs(tt)<1e-6)break;J-=Q/tt}if(q=0,H=1,J=L,J<q)return q;if(J>H)return H;for(;q<H;){if(Q=A(J),Math.abs(Q-L)<F)return J;L>Q?q=J:H=J,J=.5*(H-q)+q}return J}return function(L,F=1e-6){return P(C(L,F))}}const Js={};Js.ease=Nf(.25,.1,.25,1),Js.linear=Nf(0,0,1,1),Js.easeIn=Js["ease-in"]=Nf(.42,0,1,1),Js.easeOut=Js["ease-out"]=Nf(0,0,.58,1),Js.easeInOut=Js["ease-in-out"]=Nf(.42,0,.58,1);const Kit=t=>t,Gd=t=>t*t,km=t=>1-Gd(1-t),bS=t=>t<.5?Gd(2*t)/2:(km(2*(t-.5))+1)/2,Rm=t=>t*t*t,v9=t=>1-Rm(1-t),_S=t=>t<.5?Rm(2*t)/2:(v9(2*(t-.5))+1)/2,Cm=t=>t*t*t*t,w9=t=>1-Cm(1-t),xS=t=>t<.5?Cm(2*t)/2:(w9(2*(t-.5))+1)/2,Nm=t=>t*t*t*t*t,b9=t=>1-Nm(1-t),SS=t=>t<.5?Nm(2*t)/2:(b9(2*(t-.5))+1)/2,Lm=t=>1-Math.cos(t*Math.PI/2),_9=t=>1-Lm(1-t),TS=t=>t<.5?Lm(2*t)/2:(_9(2*(t-.5))+1)/2,Dm=t=>2**(10*(t-1)),jm=t=>1-Dm(1-t),MS=t=>t<.5?Dm(2*t)/2:(jm(2*(t-.5))+1)/2,Fm=t=>-(Math.sqrt(1-t*t)-1),x9=t=>1-Fm(1-t),ES=t=>t<.5?Fm(2*t)/2:(x9(2*(t-.5))+1)/2;function dn(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return s=>s<i?t*s*s:e*s-e+1}function yn(t,e){return(i,s)=>i<e?e*t(i/e,s):1-t((1-i)/(1-e),s)*(1-e)}const $S=yn(dn(1),1),AS=yn(dn(1),0),zm=yn(dn(1),.5),IS=yn(dn(2),1),PS=yn(dn(2),0),OS=yn(dn(2),.5),kS=yn(dn(3),1),RS=yn(dn(3),0),CS=yn(dn(3),.5),NS=yn(dn(4),1),LS=yn(dn(4),0),DS=yn(dn(4),.5),jS={linear:Kit,"in-quad":Gd,"out-quad":km,"in-out-quad":bS,"in-coast-quad":$S,"out-coast-quad":AS,"in-out-coast-quad":zm,"in-cubic":Rm,"out-cubic":v9,"in-out-cubic":_S,"in-coast-cubic":IS,"out-coast-cubic":PS,"in-out-coast-cubic":OS,"in-quart":Cm,"out-quart":w9,"in-out-quart":xS,"in-coast-quart":kS,"out-coast-quart":RS,"in-out-coast-quart":CS,"in-quint":Nm,"out-quint":b9,"in-out-quint":SS,"in-coast-quint":NS,"out-coast-quint":LS,"in-out-coast-quint":DS,"in-sine":Lm,"out-sine":_9,"in-out-sine":TS,"in-expo":Dm,"out-expo":jm,"in-out-expo":MS,"in-circ":Fm,"out-circ":x9,"in-out-circ":ES,"quad-in":Gd,"quad-out":km,"quad-in-out":bS,"quad-in-coast":$S,"quad-out-coast":AS,"quad-in-out-coast":zm,"cubic-in":Rm,"cubic-out":v9,"cubic-in-out":_S,"cubic-in-coast":IS,"cubic-out-coast":PS,"cubic-in-out-coast":OS,"quart-in":Cm,"quart-out":w9,"quart-in-out":xS,"quart-in-coast":kS,"quart-out-coast":RS,"quart-in-out-coast":CS,"quint-in":Nm,"quint-out":b9,"quint-in-out":SS,"quint-in-coast":NS,"quint-out-coast":LS,"quint-in-out-coast":DS,"sine-in":Lm,"sine-out":_9,"sine-in-out":TS,"expo-in":Dm,"expo-out":jm,"expo-in-out":MS,"circ-in":Fm,"circ-out":x9,"circ-in-out":ES,ease:t=>Js.ease(t),"ease-in":t=>Js.easeIn(t),"ease-out":t=>Js.easeOut(t),"ease-in-out":t=>Js.easeInOut(t)};let Zit=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const Um={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},QR={maxDuration:4e3};let Xit=class tC{constructor(e){this._createCamera=e,this.compared=new Zit,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Um.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new tC(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,s){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=s.desiredScreenFlow??Um.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Oi()}get hasFov(){return Math.abs(this.compared.fov)>Oi()}get hasRotate(){return this.compared.rotate>Oi()}},Qit=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},trt=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((e,i)=>e+i.time),0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let s=0,l=0;const f=this.definition,y=this.segments.reduce(((v,b)=>v||b.definition.hasZoom),!1);for(let v=0;v<this.segments.length;v++){const b=this.segments[v],S=b.definition;if(e<=b.time||v===this.segments.length-1){if(this.segmentInterpolateComponentsAt(b,b.time===0?0:e/b.time,i),f.hasPan&&!isNaN(i.pan)&&isFinite(f.compared.pan)?i.pan=(s+S.compared.pan*i.pan)/f.compared.pan:i.pan=1,f.hasRotate&&!isNaN(i.rotate)&&isFinite(f.compared.rotate)?i.rotate=(l+S.compared.rotate*i.rotate)/f.compared.rotate:i.rotate=1,y&&!isNaN(i.zoom)&&isFinite(S.compared.targetZoom)){const{sourceZoom:A,targetZoom:P}=S.compared,k=i.zoom*(P-A)+A,C=this.segments[0].definition.compared.sourceZoom,L=this.segments[this.segments.length-1].definition.compared.targetZoom,F=Math.abs(P-C)>Math.abs(A-C)?P:A;i.zoomOffset=F-L,i.zoom=(k-C)/(F-C)}else i.zoom=1;return i}e-=b.time,s+=S.compared.pan,l+=S.compared.rotate}}segmentInterpolateComponentsAt(e,i,s){e.interpolateComponentsAt(i,s)}},I3=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,s=i.sourceZoom,l=i.targetZoom;this._zoomSign=s>l?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(s);const f=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*f}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:s,hasPan:l,hasRotate:f}=this.definition;let y=0,v=0;s&&(l&&(y=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),f&&(v=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const b=this.definition.desiredPixelFlow;if(s&&l&&f){const S=y+v+y*v;this._zoomPixelFlow=y*v/S*b,this._panPixelFlow=v/S*b,this._rotatePixelFlow=y/S*b}else if(s&&l){const S=1+y;this._zoomPixelFlow=y/S*b,this._panPixelFlow=1/S*b}else if(s&&f){const S=1+v;this._zoomPixelFlow=v/S*b,this._rotatePixelFlow=1/S*b}else if(l&&f){const S=this._panPixelsAtSource/this._rotatePixels,A=1+S;this._panPixelFlow=S/A*b,this._rotatePixelFlow=1/A*b}else l?this._panPixelFlow=b:s?this._zoomPixelFlow=b:f&&(this._rotatePixelFlow=b);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const S=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=S,this._panPixelFlow/=S,this._rotatePixelFlow/=S}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/ert:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,s=this.definition.compared.targetZoom;return(i*(i/s)**-e-i)/(s-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:s}=this.definition;return i+e*(s-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const ert=d1(45);function irt(t,e,i){const s=e-t.compared.sourceZoom,l=t.halfWindowPanAtZoom(s);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+l)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*l)}function rrt(t,e,i){const s=1/e,l=Math.log(t.compared.sourceZoom*s),f=1/t.desiredPixelFlow,y=1/Math.LN2,v=e-t.compared.sourceZoom,b=1/v,S=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(v))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*f*y*b*S-t.halfWindowSize*l*f*y*b+t.halfWindowSize*l*f*y*S/(v*v)}function srt(t,e,i){const s=e-t.compared.sourceZoom,l=1/s,f=1/e,y=Math.log(t.compared.sourceZoom*f),v=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(s))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*l*(-2*l*f*v+2*l*y+2*f-2*y*v/(s*s)-v/(e*e))/(t.desiredPixelFlow*Math.LN2)}function nrt(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function ort(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function art(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function lrt(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function urt(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function hrt(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function crt(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function prt(t,e,i){const s=Math.log(e/t.compared.targetZoom),l=1/t.desiredPixelFlow,f=1/Math.LN2,y=-e+t.compared.targetZoom,v=1/y,b=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*s*l*f*v+t.halfWindowSize*s*l*f*b/(y*y)+t.halfWindowSize*l*f*v*b/e}function frt(t,e,i){const s=e-t.compared.targetZoom,l=1/s,f=1/e,y=Math.log(e/t.compared.targetZoom),v=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*l*(-2*l*f*v-2*l*y+2*f+2*y*v/(s*s)-v/(e*e))/(t.desiredPixelFlow*Math.LN2)}function drt(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function yrt(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function grt(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function mrt(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,s=e,l=t.halfWindowPanAtZoom(s),f=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*l);return t.compared.sourceZoom<=t.compared.targetZoom?f*(i-l):f*(i+l)}function vrt(t,e){let i=wrt(t,e);const s={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},l=s.ascensionFactor===0,f=s.descensionFactor===0,y=l?nrt:irt,v=l?ort:rrt,b=l?art:srt,S=f?drt:crt,A=f?yrt:prt,P=f?grt:frt,k=et=>y(t,et,s)+lrt(t,et,s)+S(t,et,s),C=et=>v(t,et,s)+urt(t,et,s)+A(t,et,s),L=et=>b(t,et,s)+hrt(t,et,s)+P(t,et,s);let F=k(i);const q=mrt(t);let H;const J=e.maximumIterations||20,Q=e.maximumDistance!=null?e.maximumDistance:1/0;for(H=0;H<J;H++){const et=e.desiredSlope??1e-6;let nt=C(i);Math.abs(nt)>et&&(nt+=et);const vt=nt/L(i);if(isNaN(vt)||i>=Q&&vt<0){if(!isFinite(Q))return null;i=Q,F=k(i);break}if(i-=vt,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const Tt=k(i);if(Math.abs(Tt-F)/F<=.005)break;F=Tt}return isNaN(F)||F>q*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function wrt(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),s=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return s<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,s):s}let brt=class extends trt{constructor(e,i){super(),this._preallocSegments=[new I3,new I3,new I3],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const s=i?.apex?vrt(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,s?this._updateWithApex(s,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,s){e.interpolateComponentsAt(i,s),e===this._ascensionSegment?s.zoom=km(s.zoom):e===this._descensionSegment&&(s.zoom=Gd(s.zoom))}_updateWithApex(e,i){const[s,l,f]=this._preallocSegments,y=i?.ascensionFactor??.5,v=Math.min(1-y,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),b=1-y-v;s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*y,s.definition.compared.rotate=this.definition.compared.rotate*y,s.definition.segmentEnd=y,s.update(),this._ascensionSegment=s,this.segments.push(s),b>0&&(l.definition?l.definition.copyFrom(this.definition):l.definition=this.definition.clone(),l.definition.copyFrom(this.definition),l.definition.compared.sourceZoom=e,l.definition.compared.targetZoom=e,l.definition.compared.pan=this.definition.compared.pan*b,l.definition.compared.rotate=this.definition.compared.rotate*b,l.definition.segmentStart=s.definition.segmentEnd,l.definition.segmentEnd=s.definition.segmentEnd+b,l.update(),this.segments.push(l)),f.definition?f.definition.copyFrom(this.definition):f.definition=this.definition.clone(),f.definition.compared.sourceZoom=e,f.definition.compared.pan=this.definition.compared.pan*v,f.definition.compared.rotate=this.definition.compared.rotate*v,f.definition.segmentStart=y+b,f.update(),this._descensionSegment=f,this.segments.push(f)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const _rt=new Qit;let xrt=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=zm,this.definition=new Xit(e),this.path=new brt}update(e,i,s){this.definition.update(e,i,s),this.path.update(this.definition,s),this._time=this._applyTimeSettings(wF(isFinite(this.path.time)?this.path.time:0),s),this._easing=s.easing??(this._time>=1e3?zm:jm)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const s=this.path.interpolateComponentsAt(e,_rt);i.interpolate(this.definition.source,this.definition.target,s)}_normalizedEasing(e){const i=this._easing(0,this._time),s=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(s-i)}_applyTimeSettings(e,i){const s=i.speedFactor!=null?i.speedFactor:1,l=i.minDuration??Um.minDuration/s,f=i.maxDuration??Um.maxDuration/s;return e=i.duration!=null?i.duration:Math.min(Math.max(e/s,l),f)}};const Srt=2e3,Trt=64;let Mrt=class{constructor(e){this._view=e,this._animation=new xrt((()=>new wS(this._view))),this._current=new wS(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,s={}){Ar(this._current.viewpoint,e),Ar(this._source.viewpoint,e),Ar(this._target.viewpoint,i),this._animation.update(this._source,this._target,s)}applyRatio(e,i){this._animation.cameraAt(i,this._current),Ar(e,this._current.viewpoint)}},lc=class extends Ot{constructor(e){super(e),this._animation=null,this._destinationViewState=new B4,this.updateFunction=null,this.easing=jS.ease,this.viewpoint=new an({targetGeometry:new Ct,scale:0,rotation:0}),this._updateTask=wp({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Mrt(e.view)}destroy(){this._updateTask=ri(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,s){this.stop();const l=this.viewpoint;Ar(l,i);const f=e.target;this._transition.update(this.viewpoint,f,{apex:{maximumDistance:Math.min(Math.min(i.scale,f.scale)*Trt,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:s?.duration,maxDuration:s?.animationMode==="auto"?1/0:s?.maxDuration??QR.maxDuration,speedFactor:s?.speedFactor,easing:(typeof s?.easing=="string"?jS[s.easing]:s?.easing)||this.easing}),s?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=f,Ert(this._transition.animation,s,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,f,{duration:0}));const y=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(y,y),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const s=new m9({target:e.clone()}),l=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(l,l),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==m9.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const s=performance.now()-this._startTime,l=this._transition.duration,f=l>0?s/l:1,y=f>=1;this._transition.applyRatio(this.viewpoint,f),y&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Ert(t,e,i,s){if(e?.duration!=null)return!0;const{time:l,isLinear:f}=t,y=e?.speedFactor||1;if(l>(e?.maxDuration??QR.maxDuration/y))return!1;if(f){const b=de(),S=Yi(...s.toScreen(b,...i.center)),A=Yi(...i.toScreen(b,...s.center)),P=A!=null&&A.x>-1*i.size[0]&&A.x<(1.5+.5)*i.size[0]&&A.y>-1*i.size[1]&&A.y<(1.5+.5)*i.size[1],k=S!=null&&S.x>-1*s.size[0]&&S.x<(1.5+.5)*s.size[0]&&S.y>-1*s.size[1]&&S.y<(1.5+.5)*s.size[1];if(l>Srt/y&&!P&&!k)return!1}return!0}_([E()],lc.prototype,"easing",void 0),_([E()],lc.prototype,"view",void 0),_([E()],lc.prototype,"viewpoint",void 0),lc=_([Y("esri.views.2d.AnimationManager")],lc);const $rt=lc;function Je(){return Promise.all([mt(()=>import("./webglDeps-gZHk6Vdq.js"),__vite__mapDeps([249,250,15,251,252,253,1,2,3,4])),mt(()=>import("./mapViewDeps-yEaSE7Hm.js"),__vite__mapDeps([254,1,2,3,143,110,111,41,15,112,108,106,107,113,114,115,102,116,64,255,120,256,251,250,252,190,157,103,257,109,75,258,101,133,259,164,163,45,46,117,7,4,260,121,122,261,57,51,104,49,50,262,30,162,249,253,263,129,264,265,266,186,184,155,267,87,100,105,99,43,37,52,268,269,119,270,124,271,125,97,272,273,274,275,183,215,276]))])}const Lf=()=>Je().then((()=>mt(()=>import("./TileLayerView2D-BQnVvIGu.js"),__vite__mapDeps([277,143,107,108,114,103,112,110,111,41,15,106,1,2,3,113,115,102,116,64,261,57,51,104,49,50,262,30,4,259,258,101,75,252,250,133,164,163,45,46,162,263,256,251,190,157,257,109,129,264,265,87,120,255,117,7,121,122,186,184,155,271,100,105,99,43,37,52,125,97,278,279,280,275,281,237,282,273,274,283,284,285,215,286,287,288,289])))),uu=()=>Je().then((()=>mt(()=>import("./FeatureLayerView2D-B4luqZP2.js").then(t=>t.F),__vite__mapDeps([290,259,45,41,15,46,219,198,1,2,3,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,291,203,292,293,43,37,55,4,281,237,274,103,101,102,75,251,250,275,258,252,133,164,108,163,255,110,111,112,106,107,113,114,115,120,256,190,157,257,109,117,7,129,223,31,260,294,128,126,218,286,289,283,284])))),FS={"base-dynamic":()=>Je().then((()=>mt(()=>import("./BaseDynamicLayerView2D-CfqoKkhz.js"),__vite__mapDeps([295,296,258,101,102,75,252,250,15,133,259,164,108,163,45,41,46,279,256,251,190,157,120,280,281,237,297,283,284,1,2,3,4])))),"base-tile":Lf,"bing-maps":Lf,catalog:()=>Je().then((()=>mt(()=>import("./CatalogLayerView2D-BrTgtWZK.js"),__vite__mapDeps([298,281,259,237,283,1,2,3,4])))),"catalog-dynamic-group":()=>Je().then((()=>mt(()=>import("./CatalogDynamicGroupLayerView2D-CyQVTG0q.js"),__vite__mapDeps([299,281,259,237,283,1,2,3,4])))),"catalog-footprint":()=>Je().then((()=>mt(()=>import("./CatalogFootprintLayerView2D-CTVKth1f.js"),__vite__mapDeps([300,290,259,45,41,15,46,219,198,1,2,3,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,291,203,292,293,43,37,55,4,281,237,274,103,101,102,75,251,250,275,258,252,133,164,108,163,255,110,111,112,106,107,113,114,115,120,256,190,157,257,109,117,7,129,223,31,260,294,128,126,218,286,289,283,284])))),csv:uu,"geo-rss":()=>Je().then((()=>mt(()=>import("./GeoRSSLayerView2D-CS2lMqsC.js"),__vite__mapDeps([301,176,172,147,136,173,174,175,116,64,169,170,171,135,1,2,3,13,14,118,57,51,104,49,50,106,107,108,31,177,99,178,203,281,259,237,272,273,274,103,101,102,75,251,250,15,275,258,252,133,164,163,45,41,46,255,110,111,112,113,114,115,120,256,190,157,257,109,117,7,4,271,261,143,262,30,100,105,43,37,52,125,97,283])))),feature:uu,geojson:uu,parquet:uu,graphics:()=>Je().then((()=>mt(()=>import("./GraphicsLayerView2D-csyaqQOW.js"),__vite__mapDeps([302,281,259,237,272,273,274,103,101,102,75,251,250,15,275,258,252,133,164,108,163,45,41,46,255,110,111,112,106,1,2,3,107,113,114,115,116,64,120,256,190,157,257,109,117,7,4,271,57,51,261,143,104,49,50,262,30,100,105,99,43,37,52,125,97,283])))),group:()=>Je().then((()=>mt(()=>import("./GroupLayerView2D-DHua09Um.js"),__vite__mapDeps([303,281,259,237,283,1,2,3,4])))),imagery:()=>Je().then((()=>mt(()=>import("./ImageryLayerView2D-mdggEKlh.js"),__vite__mapDeps([304,305,250,15,75,141,258,101,102,252,133,259,164,108,163,45,41,46,281,237,271,57,51,110,111,112,106,1,2,3,107,113,114,115,116,64,261,143,104,49,50,262,30,4,100,103,105,99,109,43,37,52,255,120,256,251,190,157,257,117,7,125,97,282,273,274,275,296,279,280,297,146,291,289,283,284])))),"imagery-tile":()=>Je().then((()=>mt(()=>import("./ImageryTileLayerView2D-D5BB95FT.js"),__vite__mapDeps([306,307,305,250,15,75,141,258,101,102,252,133,259,164,108,163,45,41,46,281,237,145,1,2,3,308,275,256,251,190,157,120,280,257,109,309,146,291,289,283,284,4])))),kml:()=>Je().then((()=>mt(()=>import("./KMLLayerView2D-h7KdNcAa.js"),__vite__mapDeps([310,311,169,170,171,172,147,136,173,174,175,116,64,135,1,2,3,13,14,118,57,51,104,49,50,106,107,108,31,176,177,99,178,203,279,259,256,251,250,15,252,190,157,120,280,296,258,101,102,75,133,164,163,45,41,46,281,237,272,273,274,103,275,255,110,111,112,113,114,115,257,109,117,7,4,271,261,143,262,30,100,105,43,37,52,125,97,283,270,124,146,266,249,253,186,184,155,264,308])))),"knowledge-graph":()=>Je().then((()=>mt(()=>import("./KnowledgeGraphLayerView2D-DbM-GPr_.js"),__vite__mapDeps([312,281,259,237,283,1,2,3,4])))),"link-chart":()=>Je().then((()=>mt(()=>import("./KnowledgeGraphLayerView2D-DbM-GPr_.js"),__vite__mapDeps([312,281,259,237,283,1,2,3,4])))),"knowledge-graph-sublayer":uu,"map-image":()=>Je().then((()=>mt(()=>import("./MapImageLayerView2D-BQPdcBRw.js"),__vite__mapDeps([313,296,258,101,102,75,252,250,15,133,259,164,108,163,45,41,46,279,256,251,190,157,120,280,281,237,271,57,51,110,111,112,106,1,2,3,107,113,114,115,116,64,261,143,104,49,50,262,30,4,100,103,105,99,109,43,37,52,255,257,117,7,125,97,282,273,274,275,297,283,314,215,286,288,291,284,285,287,289])))),"map-notes":()=>Je().then((()=>mt(()=>import("./MapNotesLayerView2D-CiStTG0v.js"),__vite__mapDeps([315,281,259,237,272,273,274,103,101,102,75,251,250,15,275,258,252,133,164,108,163,45,41,46,255,110,111,112,106,1,2,3,107,113,114,115,116,64,120,256,190,157,257,109,117,7,4,271,57,51,261,143,104,49,50,262,30,100,105,99,43,37,52,125,97,283])))),media:()=>Je().then((()=>mt(()=>import("./MediaLayerView2D-n53sO8MA.js"),__vite__mapDeps([316,1,2,3,317,125,176,172,147,136,173,174,175,116,64,143,107,108,114,103,112,110,111,41,15,106,113,115,102,261,57,51,104,49,50,262,30,4,259,258,101,75,252,250,133,164,163,45,46,162,263,256,251,190,157,257,109,129,264,265,87,120,255,117,7,121,122,186,184,155,271,100,105,99,43,37,52,97,268,318,269,281,237,283])))),"ogc-feature":()=>Je().then((()=>mt(()=>import("./OGCFeatureLayerView2D-BLbM1jGK.js"),__vite__mapDeps([319,290,259,45,41,15,46,219,198,1,2,3,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,291,203,292,293,43,37,55,4,281,237,274,103,101,102,75,251,250,275,258,252,133,164,108,163,255,110,111,112,106,107,113,114,115,120,256,190,157,257,109,117,7,129,223,31,260,294,128,126,218,286,289,283,284])))),"open-street-map":Lf,"oriented-imagery":uu,route:()=>Je().then((()=>mt(()=>import("./RouteLayerView2D-Bsef9i5v.js"),__vite__mapDeps([320,1,2,3,321,322,281,259,237,272,273,274,103,101,102,75,251,250,15,275,258,252,133,164,108,163,45,41,46,255,110,111,112,106,107,113,114,115,116,64,120,256,190,157,257,109,117,7,4,271,57,51,261,143,104,49,50,262,30,100,105,99,43,37,52,125,97,283])))),stream:()=>Je().then((()=>mt(()=>import("./StreamLayerView2D-CnvtHv2P.js"),__vite__mapDeps([323,203,290,259,45,41,15,46,219,198,1,2,3,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,291,292,293,43,37,55,4,281,237,274,103,101,102,75,251,250,275,258,252,133,164,108,163,255,110,111,112,106,107,113,114,115,120,256,190,157,257,109,117,7,129,223,31,260,294,128,126,218,286,289,283,284])))),"subtype-group":()=>Je().then((()=>mt(()=>import("./SubtypeGroupLayerView2D-BPfA0AVL.js"),__vite__mapDeps([324,290,259,45,41,15,46,219,198,1,2,3,176,172,147,136,173,174,175,116,64,177,99,135,178,56,105,291,203,292,293,43,37,55,4,281,237,274,103,101,102,75,251,250,275,258,252,133,164,108,163,255,110,111,112,106,107,113,114,115,120,256,190,157,257,109,117,7,129,223,31,260,294,128,126,218,286,289,283,284])))),tile:Lf,"vector-tile":()=>Je().then((()=>mt(()=>import("./VectorTileLayerView2D-Ct1eZp_Y.js"),__vite__mapDeps([325,99,162,115,87,15,113,114,107,108,13,14,265,163,112,164,250,258,101,102,75,252,133,259,45,41,46,275,60,165,166,143,281,237,283,284,1,2,3,4])))),video:()=>Je().then((()=>mt(()=>import("./VideoLayerView2D-1sl9Ndxo.js"),__vite__mapDeps([326,327,201,106,1,2,3,107,108,200,13,14,318,133,258,101,102,75,252,250,15,259,164,163,45,41,46,255,110,111,112,113,114,115,116,64,120,256,251,190,157,103,257,109,117,7,4,269,281,237,272,273,274,275,271,57,51,261,143,104,49,50,262,30,100,105,99,43,37,52,125,97,283])))),wcs:()=>Je().then((()=>mt(()=>import("./ImageryTileLayerView2D-D5BB95FT.js"),__vite__mapDeps([306,307,305,250,15,75,141,258,101,102,252,133,259,164,108,163,45,41,46,281,237,145,1,2,3,308,275,256,251,190,157,120,280,257,109,309,146,291,289,283,284,4])))),"web-tile":Lf,wfs:uu,wms:()=>Je().then((()=>mt(()=>import("./WMSLayerView2D-CW9qyyjF.js"),__vite__mapDeps([328,296,258,101,102,75,252,250,15,133,259,164,108,163,45,41,46,279,256,251,190,157,120,280,281,237,297,283,284,329,291,1,2,3,4])))),wmts:()=>Je().then((()=>mt(()=>import("./WMTSLayerView2D-DWF6-EN1.js"),__vite__mapDeps([330,278,279,259,256,251,250,15,252,190,157,120,280,258,101,102,75,133,164,108,163,45,41,46,275,281,237,283,284,1,2,3,4])))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Art(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ct(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const zS={hasLayerViewModule:t=>FS[t.type]!=null,importLayerView:t=>{const e=FS[t.type];if(e==null)throw Art(t);return e(t)}};var xs;let of=(xs=class{static getId(e,i,s,l){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${s}/${l}`}constructor(e,i,s,l){this.set(e,i,s,l)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|e<<8|s}acquire(e,i,s,l){this.set(e,i,s,l)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new xs(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,s,l){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[f,y,v,b]=e.split("/");this.level=parseFloat(f),this.row=parseFloat(y),this.col=parseFloat(v),this.world=parseFloat(b)}else this.level=+e,this.row=+i,this.col=+s,this.world=+l||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new xs(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,s){const l=this.clone();return l.col+=e,l.row+=i,s.normalizeKey(l),l}getChildKeys(){const e=this.level+1,i=this.row<<1,s=this.col<<1,l=this.world;return[new xs(e,i,s,l),new xs(e,i,s+1,l),new xs(e,i+1,s,l),new xs(e,i+1,s+1,l)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},xs.pool=new Jp(xs,null,null,25,50),xs);function Wh(t,e){return[t,e]}function hu(t,e,i){return t[0]=e,t[1]=i,t}function Irt(t,e,i,s,l){return t[0]=e,t[1]=i,t[2]=s,t[3]=l,t}const En=new of("0/0/0/0");let Prt=class eC{static create(e,i,s=null){const l=Br(e.spatialReference),f=i.origin||Wh(e.origin.x,e.origin.y),y=Wh(e.size[0]*i.resolution,e.size[1]*i.resolution),v=Wh(-1/0,-1/0),b=Wh(1/0,1/0),S=Wh(1/0,1/0);s!=null&&(hu(v,Math.max(0,Math.floor((s.xmin-f[0])/y[0])),Math.max(0,Math.floor((f[1]-s.ymax)/y[1]))),hu(b,Math.max(0,Math.floor((s.xmax-f[0])/y[0])),Math.max(0,Math.floor((f[1]-s.ymin)/y[1]))),hu(S,b[0]-v[0]+1,b[1]-v[1]+1));const{cols:A,rows:P}=i;let k,C,L,F;return!s&&A&&P&&(hu(v,A[0],P[0]),hu(b,A[1],P[1]),hu(S,A[1]-A[0]+1,P[1]-P[0]+1)),e.isWrappable?(k=Wh(Math.ceil(Math.round((l.valid[1]-l.valid[0])/i.resolution)/e.size[0]),S[1]),C=!0,L=l.origin,F=l.valid):(k=S,C=!1),new eC(i.level,i.resolution,i.scale,f,v,b,S,y,k,C,L,F)}constructor(e,i,s,l,f,y,v,b,S,A,P,k){this.level=e,this.resolution=i,this.scale=s,this.origin=l,this.first=f,this.last=y,this.size=v,this.norm=b,this.worldSize=S,this.wrap=A,this._spatialReferenceOrigin=P,this._spatialReferenceValid=k}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],s=e.col;s<0?(e.col=s+i,e.world-=1):s>=i&&(e.col=s-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],s=this._spatialReferenceOrigin,l=this._spatialReferenceValid;return this.wrap&&s&&l?i===s[0]?l[0]:this.origin[0]===s[0]&&e===this.worldSize[0]?l[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,s=!1){En.set(i);const l=s?En.col:this.denormalizeCol(En.col,En.world),f=En.row;return Irt(e,this.getXForColumn(l),this.getYForRow(f+1),this.getXForColumn(l+1),this.getYForRow(f)),e}getTileCoords(e,i,s=!1){En.set(i);const l=s?En.col:this.denormalizeCol(En.col,En.world);return Array.isArray(e)?hu(e,this.getXForColumn(l),this.getYForRow(En.row)):(e.x=this.getXForColumn(l),e.y=this.getYForRow(En.row)),e}};var fh;let W4=(fh=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:s,colTo:l}of this.spans)for(let f=s;f<=l;f++){const y=e.getWorldForColumn(f);yield new of(e.level,i,e.normalizeCol(f),y)}}forEach(e,i){const{spans:s,lodInfo:l}=this,{level:f}=l;if(s.length!==0)for(const{row:y,colFrom:v,colTo:b}of s)for(let S=v;S<=b;S++)e.call(i,f,y,l.normalizeCol(S),l.getWorldForColumn(S))}},fh.pool=new Jp(fh),fh),P3=class{constructor(e,i,s){this.row=e,this.colFrom=i,this.colTo=s}};const Ke=new of("0/0/0/0");let Ort=class iC{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[s,l]=e,[f,y]=i,v=f-s,b=y-l,S=b!==0?v/b:0,A=(Math.ceil(l)-l)*S,P=(Math.floor(l)-l)*S;return new iC(s,Math.floor(l),Math.ceil(y),S,v<0?A:P,v<0?P:A,v<0?f:s,v<0?s:f)}constructor(e,i,s,l,f,y,v,b){this.x=e,this.ymin=i,this.ymax=s,this.invM=l,this.leftAdjust=f,this.rightAdjust=y,this.leftBound=v,this.rightBound=b}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const ys=[[0,0],[0,0],[0,0],[0,0]],krt=1e-6;let Rrt=class{constructor(e,i=null,s=e.lods[0].level,l=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const f=e.lods.filter((v=>v.level>=s&&v.level<=l));this.minScale=f[0].scale,this.maxScale=f[f.length-1].scale;const y=this._lodInfos=f.map((v=>Prt.create(e,v,i)));f.forEach(((v,b)=>{this._infoByLevel[v.level]=y[b],this._infoByScale[v.scale]=y[b],this.scales[b]=v.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,s=!1){Ke.set(i);const l=this._infoByLevel[Ke.level];return l?l.getTileBounds(e,Ke,s):e}getTileCoords(e,i,s=!1){Ke.set(i);const l=this._infoByLevel[Ke.level];return l?l.getTileCoords(e,Ke,s):e}getTileCoverage(e,i=192,s=!0,l="closest"){if(!s&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const f=l==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),y=W4.pool.acquire(f),v=this._wrap;let b,S,A,P=1/0,k=-1/0;const C=y.spans;ys[0][0]=ys[0][1]=ys[1][1]=ys[3][0]=-i,ys[1][0]=ys[2][0]=e.size[0]+i,ys[2][1]=ys[3][1]=e.size[1]+i;for(const H of ys)e.toMap(H,H),H[0]=f.getColumnForX(H[0]),H[1]=f.getRowForY(H[1]);const L=[];let F=3;for(let H=0;H<4;H++){if(ys[H][1]===ys[F][1]){F=H;continue}const J=Ort.create(ys[H],ys[F]);P=Math.min(J.ymin,P),k=Math.max(J.ymax,k),L[J.ymin]===void 0&&(L[J.ymin]=[]),L[J.ymin].push(J),F=H}if(P==null||k==null||k-P>100)return null;let q=[];for(b=P;b<k;){L[b]!=null&&(q=q.concat(L[b])),S=1/0,A=-1/0;for(let H=q.length-1;H>=0;H--){const J=q[H];S=Math.min(S,J.getLeftCol()),A=Math.max(A,J.getRightCol())}if(S=Math.floor(S),A=Math.floor(A),b>=f.first[1]&&b<=f.last[1])if(v)if(f.size[0]<f.worldSize[0]){const H=Math.floor(A/f.worldSize[0]);for(let J=Math.floor(S/f.worldSize[0]);J<=H;J++)C.push(new P3(b,Math.max(f.getFirstColumnForWorld(J),S),Math.min(f.getLastColumnForWorld(J),A)))}else C.push(new P3(b,S,A));else S>f.last[0]||A<f.first[0]||(S=Math.max(S,f.first[0]),A=Math.min(A,f.last[0]),C.push(new P3(b,S,A)));b+=1;for(let H=q.length-1;H>=0;H--){const J=q[H];J.ymax>=b?J.incrRow():q.splice(H,1)}}return y}getTileParentId(e){Ke.set(e);const i=this._infoByLevel[Ke.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(Ke,this._lodInfos[s],Ke),Ke.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Ke.set(i);const s=this._infoByLevel[Ke.level],l=e.lodInfo;if(l.resolution>s.resolution){this._getTileIdAtLOD(Ke,l,Ke);const y=l.denormalizeCol(Ke.col,Ke.world);for(const v of e.spans)if(v.row===Ke.row&&v.colFrom<=y&&v.colTo>=y)return!0}if(l.resolution<s.resolution){const[y,v,b,S]=e.spans.reduce(((F,q)=>(F[0]=Math.min(F[0],q.row),F[1]=Math.max(F[1],q.row),F[2]=Math.min(F[2],q.colFrom),F[3]=Math.max(F[3],q.colTo),F)),[1/0,-1/0,1/0,-1/0]),A=s.denormalizeCol(Ke.col,Ke.world),P=l.getColumnForX(s.getXForColumn(A)),k=l.getRowForY(s.getYForRow(Ke.row)),C=l.getColumnForX(s.getXForColumn(A+1))-1,L=l.getRowForY(s.getYForRow(Ke.row+1))-1;return!(P>S||C<b||k>v||L<y)}const f=l.denormalizeCol(Ke.col,Ke.world);return e.spans.some((y=>y.row===Ke.row&&y.colFrom<=f&&y.colTo>=f))}normalizeBounds(e,i,s){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const l=Br(this.tileInfo.spatialReference),f=-s*(l.valid[1]-l.valid[0]);e[0]+=f,e[2]+=f}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(e>i[s]+krt)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce(((s,l)=>Math.abs(l-e)<Math.abs(s-e)?l:s),i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let s=i.length-1;s>=0;s--)if(e<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-e)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,s){const l=this._infoByLevel[s.level];return e.set(s),i.resolution<l.resolution?null:(i.resolution===l.resolution||(e.level=i.level,e.col=Math.floor(s.col*l.resolution/i.resolution+.01),e.row=Math.floor(s.row*l.resolution/i.resolution+.01)),e)}},Crt=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Nrt=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new xg,this._controllers=new xg,this._processingItems=new xg,this._pausedSignal=kp(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new kd(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=ri(this._schedule),this._task=ri(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((i=>e.push(i))),this._controllers.clear(),e.forEach((i=>i.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((i,s)=>e(s)))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const s=this.get(e);if(s)return s;const l=new AbortController;let f=null;i&&(f=Vn(i,(()=>l.abort())));const y=()=>{const A=this._processingItems.get(e);A&&A.controller.abort(),v(),S.reject(Be())},v=()=>{b.remove(),f?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},b=y_(l.signal,y),S=ln();return this._deferreds.set(e,S),this._controllers.set(e,l),S.promise.then(v,v),this._queue.push(e),this._scheduleNext(),S.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Be()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=a1((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const s=new AbortController,l=new Crt(e,s);this._processingItems.set(e,l);try{i=this.process(e,s.signal)}catch(f){this._processError(l,f)}Oo(i)?(l.promise=i,i.then((f=>this._processResult(l,f)),(f=>this._processError(l,f)))):this._processResult(l,i)}get test(){}};const US=[0,0];let Qo=class extends Ot{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:s,priority:l}=this;this._queue=new Nrt({concurrency:e,scheduler:s,priority:l,process:(f,y)=>{const v=this._keyToItem.get(f);return i(v,{signal:y})},peeker:f=>this._peek(f)})}destroy(){this.clear(),this._queue=ze(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const s=this._queue.push(i),l=this.tileInfoView.getTileScale(e.key),f=e1(this._tilesByScale,l,(()=>new Set)),y=()=>{f.delete(e.key),f.size===0&&this._tilesByScale.delete(l),this._keyToItem.delete(i)};return f.add(e.key),this._keyToItem.set(i,e),s.then(y,y),s}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const y of e)i.add(this._keyToItem.get(y).key);const s=this.state.scale;let l,f=Number.POSITIVE_INFINITY;for(const[y,v]of this._tilesByScale)if(v$(v,(b=>i.has(b)))){const b=Math.abs(y-s);b<f&&(l=v,f=b)}return this._getClosestTileKey(l,e).id}_getClosestTileKey(e,i){const s=this.tileInfoView,l=this.state.center;let f,y=Number.POSITIVE_INFINITY;for(const v of e)if(i.has(v.id)){s.getTileCoords(US,v);const b=T1(US,l);b<y&&(y=b,f=v)}return f}};_([E({constructOnly:!0})],Qo.prototype,"concurrency",void 0),_([E({constructOnly:!0})],Qo.prototype,"priority",void 0),_([E({constructOnly:!0})],Qo.prototype,"process",void 0),_([E({constructOnly:!0})],Qo.prototype,"scheduler",void 0),_([E()],Qo.prototype,"state",void 0),_([E({constructOnly:!0})],Qo.prototype,"tileInfoView",void 0),Qo=_([Y("esri.views.2d.tiling.TileQueue")],Qo);const Svt=Qo;let Lrt=class{constructor(e,i,s){this.maxSize=e,this._tileInfoView=i,this._removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const s=i.key.level,l=this._tileKeysPerLevel[s];GS(this._tilePerId,e);for(let f=0;f<l.length;f++)if(l[f].id===e){l.splice(f,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,e);const l=i.level;this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(i)}prune(e,i,s){let l=this._tilePerId.size;if(l<=this.maxSize)return;let f=this._tileKeysPerLevel.length-1;for(;l>this.maxSize&&f>=0;)f!==e&&(l=this._pruneAroundCenterTile(l,i,s,f)),f--;l>this.maxSize&&(l=this._pruneAroundCenterTile(l,i,s,e))}_pruneAroundCenterTile(e,i,s,l){const f=this._tileKeysPerLevel[l];if(!f||f.length===0)return e;const{size:y,origin:v}=this._tileInfoView.tileInfo,b=s*y[0],S=s*y[1],A=[0,0],P=[0,0];for(f.sort(((k,C)=>(A[0]=v.x+b*(k.col+.5),A[1]=v.y-S*(k.row+.5),P[0]=v.x+b*(C.col+.5),P[1]=v.y-S*(C.row+.5),Rp(A,i)-Rp(P,i))));f.length>0;){const k=f.pop();if(this._removeTile(k.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),GS(this._tilePerId,e)}};function GS(t,e){t.delete(e)}const cu=new of(0,0,0,0),jo=new Map,Df=[],O3=[];let Mvt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Lrt(e.cacheSize,this.tileInfoView,(i=>{this.releaseTile(i)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:s}=this,{scale:l,center:f,resolution:y}=e.state,{minScale:v,maxScale:b}=this.tileInfoView,S=!e.stationary&&l>this._previousScale;if(this._previousScale=l,!i&&(l>v||l<b))return this.tiles.length=0,void this.clear();const A=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!A)return this.tiles.length=0,void this.clear();const{spans:P,lodInfo:k}=A,{level:C}=k;this.tiles.length=0,s.forEach((H=>H.visible=!0));let L=0,F=0;if(P.length>0)for(const{row:H,colFrom:J,colTo:Q}of P)for(let tt=J;tt<=Q;tt++){L++;const et=cu.set(C,H,k.normalizeCol(tt),k.getWorldForColumn(tt)).id;let nt=s.get(et);if(nt)nt.isReady?(jo.set(et,nt),F++):S||this._addParentTile(et,jo);else{if(this._tileCache?.has(et)){if(nt=this._tileCache.pop(et),this.tileIndex.set(et,nt),nt.isReady){jo.set(et,nt),F++;continue}}else nt=this.acquireTile(cu),this.tileIndex.set(et,nt);S||this._addParentTile(et,jo)}}const q=F===L;for(const[H,J]of s){if(jo.has(H))continue;cu.set(H);const Q=this.tileInfoView.intersects(A,cu),tt=this.cachePolicy==="purge"?cu.level!==C:cu.level>C;!Q||!S&&q?!tt&&Q||Df.push(J):J.isReady?tt&&this.cachePolicy==="purge"&&this._hasReadyAncestor(cu,C)?Df.push(J):O3.push(J):tt&&Df.push(J)}for(const H of O3)H.isReady&&jo.set(H.key.id,H);for(const H of Df)this._tileCache?this._tileCache.add(H):this.releaseTile(H),s.delete(H.key.id);for(const H of jo.values())this.tiles.push(H);for(const H of s.values())jo.has(H.key.id)||(H.visible=!1);this._tileCache?.prune(C,f,y),W4.pool.release(A),O3.length=0,Df.length=0,jo.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){for(const i of this.tileIndex.values())e(i);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let s=e,l=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(l=this.tileIndex.get(s),l?.isReady){i.has(l.key.id)||i.set(l.key.id,l);break}}else if(this._tileCache?.has(s)&&(l=this._tileCache.pop(s),this.tileIndex.set(s,l),l?.isReady)){i.has(l.key.id)||i.set(l.key.id,l);break}}_hasReadyAncestor(e,i){const s=Gr();this.tileInfoView.getTileBounds(s,e,!0);for(const l of this.tileIndex.values())if(l.isReady&&l.key.level>=i&&l.key.level<e.level){const f=Gr();if(this.tileInfoView.getTileBounds(f,l.key,!0),DV(f,s))return!0}return!1}},Drt=class{constructor(e,i={}){this.events=new fn,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const s={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let l=this._canvas.getContext("webgl2",s);l||(l=this._canvas.getContext("webgl2",{...s,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=l,this._handles=Ph([Hp(this._canvas,"webglcontextlost",(f=>this.events.emit("webgl-context-lost",f)))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||rt("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=rt("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[s,l,f,y,v,b]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${s}, ${l}, ${f}, ${y}, ${v}, ${b})`}}else i()}resize(e){const i=this._canvas,s=i.style,{state:{size:l},pixelRatio:f}=e,y=l[0],v=l[1],b=Math.round(y*f),S=Math.round(v*f);i.width===b&&i.height===S||(i.width=b,i.height=S),s.width=y+"px",s.height=v+"px"}_computeViewTransform(e,i){const[s,l]=e.center,[f,y]=i.center,[v,b]=e.toScreen([0,0],f,y),[S,A]=e.toScreen([0,0],s,l),P=S-v,k=A-b,C=e.scale/i.scale,L=i.rotation-e.rotation,F=_o();return fR(F),Y2(F,F,[C,C]),M1(F,F,d1(L)),Np(F,F,[P,k]),F}};function jrt(t,e,i,s,l){rC(t,e,i||0,s||t.length-1,l||Frt)}function rC(t,e,i,s,l){for(;s>i;){if(s-i>600){var f=s-i+1,y=e-i+1,v=Math.log(f),b=.5*Math.exp(2*v/3),S=.5*Math.sqrt(v*b*(f-b)/f)*(y-f/2<0?-1:1);rC(t,e,Math.max(i,Math.floor(e-y*b/f+S)),Math.min(s,Math.floor(e+(f-y)*b/f+S)),l)}var A=t[e],P=i,k=s;for(jf(t,i,e),l(t[s],A)>0&&jf(t,i,s);P<k;){for(jf(t,P,k),P++,k--;l(t[P],A)<0;)P++;for(;l(t[k],A)>0;)k--}l(t[i],A)===0?jf(t,i,k):jf(t,++k,s),k<=e&&(i=k+1),e<=k&&(s=k-1)}}function jf(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function Frt(t,e){return t<e?-1:t>e?1:0}function Gm(t,e){if(!(this instanceof Gm))return new Gm(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function zrt(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function Jh(t,e){k0(t,0,t.children.length,e,t)}function k0(t,e,i,s,l){l||(l=uc(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(var f,y=e;y<i;y++)f=t.children[y],R0(l,t.leaf?s(f):f);return l}function R0(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function BS(t,e){return t.minX-e.minX}function qS(t,e){return t.minY-e.minY}function k3(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function cy(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Urt(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Grt(t,e){var i=Math.max(t.minX,e.minX),s=Math.max(t.minY,e.minY),l=Math.min(t.maxX,e.maxX),f=Math.min(t.maxY,e.maxY);return Math.max(0,l-i)*Math.max(0,f-s)}function R3(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function py(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function uc(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function VS(t,e,i,s,l){for(var f,y=[e,i];y.length;)(i=y.pop())-(e=y.pop())<=s||(f=e+Math.ceil((i-e)/s/2)*s,jrt(t,f,e,i,l),y.push(e,f,f,i))}Gm.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],s=this.toBBox;if(!py(t,e))return i;for(var l,f,y,v,b=[];e;){for(l=0,f=e.children.length;l<f;l++)y=e.children[l],py(t,v=e.leaf?s(y):y)&&(e.leaf?i.push(y):R3(t,v)?this._all(y,i):b.push(y));e=b.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!py(t,e))return!1;for(var s,l,f,y,v=[];e;){for(s=0,l=e.children.length;s<l;s++)if(f=e.children[s],py(t,y=e.leaf?i(f):f)){if(e.leaf||R3(t,y))return!0;v.push(f)}e=v.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var s=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var l=this.data;this.data=s,s=l}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=uc([]),this},remove:function(t,e){if(t==null)return this;for(var i,s,l,f,y=this.data,v=this.toBBox(t),b=[],S=[];y||b.length;){if(y||(y=b.pop(),s=b[b.length-1],i=S.pop(),f=!0),y.leaf&&(l=zrt(t,y.children,e))!==-1)return y.children.splice(l,1),b.push(y),this._condense(b),this;f||y.leaf||!R3(y,v)?s?(i++,y=s.children[i],f=!1):y=null:(b.push(y),S.push(i),i=0,s=y,y=y.children[0])}return this},toBBox:function(t){return t},compareMinX:BS,compareMinY:qS,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,s){var l,f=i-e+1,y=this._maxEntries;if(f<=y)return Jh(l=uc(t.slice(e,i+1)),this.toBBox),l;s||(s=Math.ceil(Math.log(f)/Math.log(y)),y=Math.ceil(f/Math.pow(y,s-1))),(l=uc([])).leaf=!1,l.height=s;var v,b,S,A,P=Math.ceil(f/y),k=P*Math.ceil(Math.sqrt(y));for(VS(t,e,i,k,this.compareMinX),v=e;v<=i;v+=k)for(VS(t,v,S=Math.min(v+k-1,i),P,this.compareMinY),b=v;b<=S;b+=P)A=Math.min(b+P-1,S),l.children.push(this._build(t,b,A,s-1));return Jh(l,this.toBBox),l},_chooseSubtree:function(t,e,i,s){for(var l,f,y,v,b,S,A,P;s.push(e),!e.leaf&&s.length-1!==i;){for(A=P=1/0,l=0,f=e.children.length;l<f;l++)b=k3(y=e.children[l]),(S=Urt(t,y)-b)<P?(P=S,A=b<A?b:A,v=y):S===P&&b<A&&(A=b,v=y);e=v||e.children[0]}return e},_insert:function(t,e,i){var s=this.toBBox,l=i?t:s(t),f=[],y=this._chooseSubtree(l,this.data,e,f);for(y.children.push(t),R0(y,l);e>=0&&f[e].children.length>this._maxEntries;)this._split(f,e),e--;this._adjustParentBBoxes(l,f,e)},_split:function(t,e){var i=t[e],s=i.children.length,l=this._minEntries;this._chooseSplitAxis(i,l,s);var f=this._chooseSplitIndex(i,l,s),y=uc(i.children.splice(f,i.children.length-f));y.height=i.height,y.leaf=i.leaf,Jh(i,this.toBBox),Jh(y,this.toBBox),e?t[e-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(t,e){this.data=uc([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Jh(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var s,l,f,y,v,b,S,A;for(b=S=1/0,s=e;s<=i-e;s++)y=Grt(l=k0(t,0,s,this.toBBox),f=k0(t,s,i,this.toBBox)),v=k3(l)+k3(f),y<b?(b=y,A=s,S=v<S?v:S):y===b&&v<S&&(S=v,A=s);return A},_chooseSplitAxis:function(t,e,i){var s=t.leaf?this.compareMinX:BS,l=t.leaf?this.compareMinY:qS;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,l)&&t.children.sort(s)},_allDistMargin:function(t,e,i,s){t.children.sort(s);var l,f,y=this.toBBox,v=k0(t,0,e,y),b=k0(t,i-e,i,y),S=cy(v)+cy(b);for(l=e;l<i-e;l++)f=t.children[l],R0(v,t.leaf?y(f):f),S+=cy(v);for(l=i-e-1;l>=e;l--)f=t.children[l],R0(b,t.leaf?y(f):f),S+=cy(b);return S},_adjustParentBBoxes:function(t,e,i){for(var s=i;s>=0;s--)R0(e[s],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Jh(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Brt(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}let HS=class sC{constructor(e,i){this.key=new of(0,0,0,0),this.bounds=Gr(),this.objectIds=new Set,this.key.set(i);const s=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.level=s.level,this.scale=s.scale,this.minScale=e.zoomToScale(s.level-1),this.maxScale=e.zoomToScale(s.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return NV(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return Brt(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=zr.acquire();for(let s=0;s<e.length;s++)i[s]=new sC(this.tileInfoView,e[s]);return i}getQuantizationParameters(){return gl.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const pu={added:[],removed:[]},C3=new Set,qrt=new of(0,0,0,0);function Vrt(t,e){const i=Br(e);if(!i)return null;const[s,l]=i.valid;return t[2]>l?[Gr([t[0],t[1],l,t[3]]),Gr([s,t[1],s+t[2]-l,t[3]])]:t[0]<s?[Gr([s,t[1],t[2],t[3]]),Gr([l-(s-t[0]),t[1],l,t[3]])]:null}let Hrt=class extends fn{constructor(e){super(),this._tiles=new Map,this._index=Gm(9,rt("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||r4(e)===0||s4(e)===0)return[];const i=Vrt(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const l=new HS(this.tileScheme,s);this._tiles.set(s,l),this._index.insert(l),i.added.push(l)}for(const s of e.removed)if(this.has(s)){const l=this.get(s);this._tiles.delete(s),this._index.remove(l),i.removed.push(l)}this.tiles.length=0,this._tiles.forEach((s=>this.tiles.push(s))),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:s,lodInfo:l}=i,{level:f}=l;if(s.length>0)for(const{row:y,colFrom:v,colTo:b}of s)for(let S=v;S<=b;S++){const A=qrt.set(f,y,l.normalizeCol(S),l.getWorldForColumn(S)).id;if(C3.add(A),!this.has(A)){const P=new HS(this.tileScheme,A);this._tiles.set(A,P),this._index.insert(P),this.tiles.push(P),pu.added.push(P)}}for(let y=this.tiles.length-1;y>=0;y--){const v=this.tiles[y];C3.has(v.id)||(this._tiles.delete(v.id),this.tiles.splice(y,1),this._index.remove(v),pu.removed.push(v))}(pu.added.length||pu.removed.length)&&this.emit("update",pu),W4.pool.release(i),C3.clear(),pu.added.length=0,pu.removed.length=0}};const Ivt=1e-30,WS=512,fy=16777216,Pvt=8,Ovt=29,kvt=24,Rvt=4,Cvt=0,Nvt=0,Lvt=0,Dvt=1,jvt=2,Fvt=3,zvt=4,Uvt=5,Gvt=6,Bvt=12,qvt=13,Vvt=5,Wrt=6,Hvt=5,Wvt=6;var JS;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(JS||(JS={}));const nC=6,Jrt=1<<nC,Jvt=Jrt<<1,Yvt=1.05,Kvt=3,Zvt=1,Xvt=3,Qvt=3,t3t=5,e3t=6,i3t=1.15,Yrt=4,r3t=128,Krt=256,s3t=Krt-2*Yrt,n3t=2,o3t=128,a3t=1,l3t=10,u3t=1024,h3t=128,c3t=4,p3t=1,f3t=1<<20,d3t=.75,y3t=10,g3t=.75,m3t=256,v3t=32,w3t=512,b3t=0,_3t=1,Zrt=1,x3t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],S3t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ff=256;var YS,KS,ZS,XS,QS,S9,tT,eT,oo,T9,gd,ni,Bm,Qs,M9,Ii,Nt,qm,Dp,nh,E9,Bd,iT,rT,sT;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(YS||(YS={})),(function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(KS||(KS={})),(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ZS||(ZS={})),(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(XS||(XS={})),(function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(QS||(QS={})),(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(S9||(S9={})),(function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(tT||(tT={})),(function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"})(eT||(eT={})),(function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"})(oo||(oo={})),(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(T9||(T9={})),(function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"})(gd||(gd={})),(function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(ni||(ni={})),(function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Bm||(Bm={})),(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(Qs||(Qs={})),(function(t){t[t.MIN_LOD=33082]="MIN_LOD",t[t.MAX_LOD=33083]="MAX_LOD",t[t.BASE_LEVEL=33084]="BASE_LEVEL",t[t.MAX_LEVEL=33085]="MAX_LEVEL",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"})(M9||(M9={})),(function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"})(Ii||(Ii={})),(function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"})(Nt||(Nt={})),(function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(qm||(qm={})),(function(t){t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(Dp||(Dp={})),(function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"})(nh||(nh={})),(function(t){t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"})(E9||(E9={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(Bd||(Bd={})),(function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"})(iT||(iT={})),(function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"})(rT||(rT={})),(function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(sT||(sT={}));const T3t=33984;var Vm,nT;(function(t){t[t.Texture=0]="Texture",t[t.TileTexture=1]="TileTexture",t[t.BufferObject=2]="BufferObject",t[t.VertexArrayObject=3]="VertexArrayObject",t[t.Shader=4]="Shader",t[t.Program=5]="Program",t[t.FramebufferObject=6]="FramebufferObject",t[t.Renderbuffer=7]="Renderbuffer",t[t.TransformFeedback=8]="TransformFeedback",t[t.Sync=9]="Sync",t[t.UNCOUNTED=10]="UNCOUNTED",t[t.LinesOfCode=10]="LinesOfCode",t[t.Uniform=11]="Uniform",t[t.COUNT=12]="COUNT"})(Vm||(Vm={})),(function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"})(nT||(nT={}));const M3t=36064,E3t=36065,$3t=36066,A3t=33306,I3t=36096,P3t=36128;var er,oT,aT,lT,uT,hT,cT,ml,pT;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(er||(er={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(oT||(oT={})),(function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"})(aT||(aT={})),(function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"})(lT||(lT={})),(function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"})(uT||(uT={})),(function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(hT||(hT={})),(function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(cT||(cT={})),(function(t){t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"})(ml||(ml={})),(function(t){t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"})(pT||(pT={}));const Xrt=()=>At.getLogger("esri.views.webgl.checkWebGLError");function Qrt(t){switch(t){case ml.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case ml.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case ml.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case ml.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case ml.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case ml.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const oC=!!rt("enable-feature:webgl-debug");function aC(){return oC}function O3t(){return oC}function fu(t,e=aC()){if(e){const i=t.getError();if(i){const s=Qrt(i),l=new Error().stack;Xrt().error(new ct("webgl-error","WebGL error occurred",{message:s,stack:l}))}}}var Hm;(function(t){t[t.TextureDescriptor=0]="TextureDescriptor",t[t.Texture=1]="Texture",t[t.Renderbuffer=2]="Renderbuffer"})(Hm||(Hm={}));function tst(t){switch(t){case oo.BYTE:case oo.UNSIGNED_BYTE:return 1;case oo.SHORT:case oo.UNSIGNED_SHORT:case oo.HALF_FLOAT:return 2;case oo.FLOAT:case oo.INT:case oo.UNSIGNED_INT:return 4}}function est(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function k3t(t,e,i,s,l=0){const f=t.gl;t.bindBuffer(i);for(const y of s){const v=e.get(y.name);if(v==null){console.warn(`There is no location for vertex attribute '${y.name}' defined.`);continue}const b=l*y.stride;if(y.count<=4)f.vertexAttribPointer(v,y.count,y.type,y.normalized,y.stride,y.offset+b),f.enableVertexAttribArray(v),y.divisor>0&&t.gl.vertexAttribDivisor(v,y.divisor);else if(y.count===9)for(let S=0;S<3;S++)f.vertexAttribPointer(v+S,3,y.type,y.normalized,y.stride,y.offset+12*S+b),f.enableVertexAttribArray(v+S),y.divisor>0&&t.gl.vertexAttribDivisor(v+S,y.divisor);else if(y.count===16)for(let S=0;S<4;S++)f.vertexAttribPointer(v+S,4,y.type,y.normalized,y.stride,y.offset+16*S+b),f.enableVertexAttribArray(v+S),y.divisor>0&&t.gl?.vertexAttribDivisor(v+S,y.divisor);else console.error("Unsupported vertex attribute element count: "+y.count);if(aC()){const S=est(t),A=tst(y.type),P=y.offset,k=Math.round(A/P)!==A/P?`. Offset not a multiple of stride. DataType requires ${A} bytes, but descriptor has an offset of ${P}`:"";S&&console.error(`Unable to bind vertex attribute "${y.name}" with baseInstanceOffset ${b}${k}:`,S,y)}}}function R3t(t,e,i,s){const l=t.gl;t.bindBuffer(i);for(const f of s){const y=e.get(f.name);if(f.count<=4)l.disableVertexAttribArray(y),f.divisor&&f.divisor>0&&t.gl?.vertexAttribDivisor(y,0);else if(f.count===9)for(let v=0;v<3;v++)l.disableVertexAttribArray(y+v),f.divisor&&f.divisor>0&&t.gl?.vertexAttribDivisor(y+v,0);else if(f.count===16)for(let v=0;v<4;v++)l.disableVertexAttribArray(y+v),f.divisor&&f.divisor>0&&t.gl?.vertexAttribDivisor(y+v,0);else console.error("Unsupported vertex attribute element count: "+f.count)}t.unbindBuffer(S9.ARRAY_BUFFER)}function ist(t){switch(t){case Ii.ALPHA:case Ii.LUMINANCE:case Ii.RED:case Ii.RED_INTEGER:case Nt.R8:case Nt.R8I:case Nt.R8UI:case Nt.R8_SNORM:case E9.STENCIL_INDEX8:return 1;case Ii.LUMINANCE_ALPHA:case Ii.RG:case Ii.RG_INTEGER:case Nt.RGBA4:case Nt.R16F:case Nt.R16I:case Nt.R16UI:case Nt.RG8:case Nt.RG8I:case Nt.RG8UI:case Nt.RG8_SNORM:case Nt.RGB565:case Nt.RGB5_A1:case nh.DEPTH_COMPONENT16:return 2;case Ii.RGB:case Ii.RGB_INTEGER:case Nt.RGB8:case Nt.RGB8I:case Nt.RGB8UI:case Nt.RGB8_SNORM:case Nt.SRGB8:case nh.DEPTH_COMPONENT24:return 3;case Ii.RGBA:case Ii.RGBA_INTEGER:case Nt.RGBA8:case Nt.R32F:case Nt.R11F_G11F_B10F:case Nt.RG16F:case Nt.R32I:case Nt.R32UI:case Nt.RG16I:case Nt.RG16UI:case Nt.RGBA8I:case Nt.RGBA8UI:case Nt.RGBA8_SNORM:case Nt.SRGB8_ALPHA8:case Nt.RGB9_E5:case Nt.RGB10_A2UI:case Nt.RGB10_A2:case nh.DEPTH_COMPONENT32F:case Dp.DEPTH24_STENCIL8:return 4;case Dp.DEPTH32F_STENCIL8:return 5;case Nt.RGB16F:case Nt.RGB16I:case Nt.RGB16UI:return 6;case Nt.RG32F:case Nt.RG32I:case Nt.RG32UI:case Nt.RGBA16F:case Nt.RGBA16I:case Nt.RGBA16UI:return 8;case Nt.RGB32F:case Nt.RGB32I:case Nt.RGB32UI:return 12;case Nt.RGBA32F:case Nt.RGBA32I:case Nt.RGBA32UI:return 16;case er.COMPRESSED_RGB_S3TC_DXT1_EXT:case er.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case er.COMPRESSED_RGBA_S3TC_DXT3_EXT:case er.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case er.COMPRESSED_R11_EAC:case er.COMPRESSED_SIGNED_R11_EAC:case er.COMPRESSED_RGB8_ETC2:case er.COMPRESSED_SRGB8_ETC2:case er.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case er.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case er.COMPRESSED_RG11_EAC:case er.COMPRESSED_SIGNED_RG11_EAC:case er.COMPRESSED_RGBA8_ETC2_EAC:case er.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let lC=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=Hm.TextureDescriptor,this.target=Qs.TEXTURE_2D,this.pixelFormat=Ii.RGBA,this.dataType=Bd.UNSIGNED_BYTE,this.samplingMode=ni.LINEAR,this.wrapMode=Bm.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function rst(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:ist(t.internalFormat))*(t.target===Qs.TEXTURE_CUBE_MAP?6:1))}const zf=()=>At.getLogger("esri/views/webgl/textureUtils");function Uf(t){const{width:e,height:i,depth:s}=t;(e!=null&&e<0||i!=null&&i<0||s!=null&&s<0)&&zf().error("Negative dimension parameters are not allowed!");const{internalFormat:l}=t;if(l&&(uC(l)||hC(l))){const{linearFilterDepth:f,compareEnabled:y,samplingMode:v,hasMipmap:b}=t;b&&zf().error("Depth textures cannot have mipmaps"),f?v!==ni.LINEAR&&v!==ni.NEAREST&&zf().error("Depth textures cannot sample mipmaps"):(v!==ni.NEAREST&&zf().error("Depth textures without filtering must use NEAREST filtering"),y&&zf().error("Depth textures without filtering cannot use compare function"))}}function sst(t){return t in Nt}function uC(t){return t in nh}function hC(t){return t in Dp}function nst(t){return t!=null&&t in er}function hc(t){return t!=null&&"type"in t&&t.type==="compressed"}function ost(t){return t!=null&&"byteLength"in t}function fT(t){return t!=null&&!hc(t)&&!ost(t)}function Yh(t){return t===Qs.TEXTURE_3D||t===Qs.TEXTURE_2D_ARRAY}function dT(t,e,i,s=1){let l=Math.max(e,i);return t===Qs.TEXTURE_3D&&(l=Math.max(l,s)),Math.floor(Math.log2(l))+1}function dy(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case Bd.FLOAT:switch(t.pixelFormat){case Ii.RGBA:return Nt.RGBA32F;case Ii.RGB:return Nt.RGB32F;default:throw new ct("texture:unknown-format","Unable to derive format")}case Bd.UNSIGNED_BYTE:switch(t.pixelFormat){case Ii.RGBA:return Nt.RGBA8;case Ii.RGB:return Nt.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===qm.DEPTH_STENCIL?Dp.DEPTH24_STENCIL8:e===qm.DEPTH_COMPONENT?nh.DEPTH_COMPONENT24:e,t.internalFormat}function ast(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let lst=class cC extends lC{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case Nt.R16F:case Nt.R32F:case Nt.R8_SNORM:case Nt.R8:this.pixelFormat=Ii.RED;break;case Nt.R8I:case Nt.R8UI:case Nt.R16I:case Nt.R16UI:case Nt.R32I:case Nt.R32UI:this.pixelFormat=Ii.RED_INTEGER}}static validate(e,i){return new cC(e,i)}};const Fo=()=>At.getLogger("esri/views/webgl/Texture");var Di;let ust=(Di=class{constructor(e,i=null,s=null){if(this.type=Hm.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,s=i;else{const l=lst.validate(e,i);if(!l)throw new ct("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=l}this._descriptor.target===Qs.TEXTURE_CUBE_MAP?this._setDataCubeMap(s):this.setData(s)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return rst(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(Vm.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const s=this._descriptor;if(s.width!==e||s.height!==i){if(this._wasImmutablyAllocated)throw new ct("texture:immutable-resize","Immutable textures can't be resized!");s.width=e,s.height=i,this._descriptor.target===Qs.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!hc(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in er&&(this._descriptor.internalFormat=void 0),this._setData(e),!hc(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,s,l,f,y,v=0){y||Fo().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Fo().error("An attempt to update uninitialized texture!");const b=this._descriptor;b.internalFormat=dy(b);const{context:S,pixelFormat:A,dataType:P,target:k,isImmutable:C}=b;if(C&&!this._wasImmutablyAllocated)throw new ct("texture:uninitialized","Cannot update immutable texture before allocation!");const L=S.bindTexture(this,Di.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||s<0||i+l>b.width||s+f>b.height)&&Fo().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:F}=S;v&&(l&&f||Fo().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),F.pixelStorei(F.UNPACK_SKIP_ROWS,v)),fT(y)?F.texSubImage2D(k,e,i,s,l,f,A,P,y):hc(y)?F.compressedTexSubImage2D(k,e,i,s,l,f,b.internalFormat,y.levels[e]):F.texSubImage2D(k,e,i,s,l,f,A,P,y),v&&F.pixelStorei(F.UNPACK_SKIP_ROWS,0),S.bindTexture(L,Di.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,s,l,f,y,v,b){b||Fo().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Fo().error("An attempt to update an uninitialized texture!");const S=this._descriptor;S.internalFormat=dy(S);const{context:A,pixelFormat:P,dataType:k,isImmutable:C,target:L}=S;if(C&&!this._wasImmutablyAllocated)throw new ct("texture:uninitialized","Cannot update immutable texture before allocation!");Yh(L)||Fo().warn("Attempting to set 3D texture data on a non-3D texture");const F=A.bindTexture(this,Di.TEXTURE_UNIT_FOR_UPDATES);A.setActiveTexture(Di.TEXTURE_UNIT_FOR_UPDATES),(i<0||s<0||l<0||i+f>S.width||s+y>S.height||l+v>S.depth)&&Fo().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:q}=A;if(hc(b))b=b.levels[e],q.compressedTexSubImage3D(L,e,i,s,l,f,y,v,S.internalFormat,b);else{const H=b;q.texSubImage3D(L,e,i,s,l,f,y,v,P,k,H)}A.bindTexture(F,Di.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new ct("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,Uf(e)}e.samplingMode===ni.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=ni.LINEAR_MIPMAP_NEAREST):e.samplingMode===ni.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=ni.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Di.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Di.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Di.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new ct("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,Uf(e)}e.samplingMode===ni.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=ni.LINEAR):e.samplingMode===ni.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=ni.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,Uf(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?ni.LINEAR:ni.NEAREST),Uf(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=_a(this._compressionAbortController)}_setData(e,i){const s=this._descriptor,l=s.context?.gl;if(!l)return;fu(l),this.hasWebGLTextureObject||(this._glName=l.createTexture(),s.context.instanceCounter.increment(Vm.Texture,this)),Uf(s);const f=s.context.bindTexture(this,Di.TEXTURE_UNIT_FOR_UPDATES);s.context.setActiveTexture(Di.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),fu(l);const y=i??s.target,v=Yh(y);if(fT(e))this._setDataFromTexImageSource(e,y);else{const{width:b,height:S,depth:A}=s;if(b==null||S==null)throw new ct("texture:missing-size","Width and height must be specified!");if(v&&A==null)throw new ct("texture:missing-depth","Depth must be specified!");if(s.internalFormat=dy(s),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(y,s.internalFormat,s.hasMipmap,b,S,A),hc(e)){if(!nst(s.internalFormat))throw new ct("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,s.internalFormat,y)}else this._texImage(y,0,s.internalFormat,b,S,A,e),fu(l),s.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),fu(l),s.context.bindTexture(f,Di.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=Qs.TEXTURE_CUBE_MAP_POSITIVE_X;i<=Qs.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:s,preMultiplyAlpha:l}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l?1:0)}_setDataFromTexImageSource(e,i){const{gl:s}=this._descriptor.context,l=this._descriptor;l.internalFormat=dy(l);const f=Yh(i),{width:y,height:v,depth:b}=ast(e);l.width&&l.height,l.width||(l.width=y),l.height||(l.height=v),f&&l.depth,f&&(l.depth=b),l.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,l.internalFormat,l.hasMipmap,y,v,b),this._texImage(i,0,l.internalFormat,y,v,b,e),fu(s),l.hasMipmap&&(this.generateMipmap(),fu(s))}_setDataFromCompressedSource(e,i,s){const l=this._descriptor,{width:f,height:y,depth:v}=l,b=e.levels,S=dT(s,f,y,v),A=Math.min(S,b.length)-1;this._descriptor.context.gl.texParameteri(l.target,M9.MAX_LEVEL,A),this._forEachMipmapLevel(((P,k,C,L)=>{const F=b[Math.min(P,b.length-1)];this._compressedTexImage(s,P,i,k,C,L,F)}),A)}_texStorage(e,i,s,l,f,y){const{gl:v}=this._descriptor.context;if(!sst(i)&&!uC(i)&&!hC(i))throw new ct("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const b=s?dT(e,l,f,y):1;if(Yh(e)){if(y==null)throw new ct("texture:missing-depth","Missing depth dimension for 3D texture upload");v.texStorage3D(e,b,i,l,f,y)}else v.texStorage2D(e,b,i,l,f);this._wasImmutablyAllocated=!0}_texImage(e,i,s,l,f,y,v){const b=this._descriptor.context.gl,S=Yh(e),{isImmutable:A,pixelFormat:P,dataType:k}=this._descriptor;if(A){if(v!=null){const C=v;if(S){if(y==null)throw new ct("texture:missing-depth","Missing depth dimension for 3D texture upload");b.texSubImage3D(e,i,0,0,0,l,f,y,P,k,C)}else b.texSubImage2D(e,i,0,0,l,f,P,k,C)}}else{const C=v;if(S){if(y==null)throw new ct("texture:missing-depth","Missing depth dimension for 3D texture upload");b.texImage3D(e,i,s,l,f,y,0,P,k,C)}else b.texImage2D(e,i,s,l,f,0,P,k,C)}}_compressedTexImage(e,i,s,l,f,y,v){const b=this._descriptor.context.gl,S=Yh(e);if(this._descriptor.isImmutable){if(v!=null)if(S){if(y==null)throw new ct("texture:missing-depth","Missing depth dimension for 3D texture upload");b.compressedTexSubImage3D(e,i,0,0,0,l,f,y,s,v)}else b.compressedTexSubImage2D(e,i,0,0,l,f,s,v)}else if(S){if(y==null)throw new ct("texture:missing-depth","Missing depth dimension for 3D texture upload");b.compressedTexImage3D(e,i,s,l,f,y,0,v)}else b.compressedTexImage2D(e,i,s,l,f,0,v)}async _compressOnWorker(e){const{width:i,height:s,context:l,flipped:f,preMultiplyAlpha:y,hasMipmap:v}=this._descriptor,b=this._descriptor.compress?.compressionTracker,S=this._descriptor.compress?.compressionCallback,{compressedTextureETC:A,compressedTextureS3TC:P}=l.capabilities;if(!Di.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!A&&!P)return;this.abortCompression();const k=new AbortController;this._compressionAbortController=k,b?.increment();try{let C;e instanceof Uint8Array?C=e.buffer:(C=await createImageBitmap(e,{imageOrientation:f?"flipY":"none"}),Ce(k));const L={data:C,width:i,height:s,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===Ii.RGBA?4:3,preMultiplyAlpha:y,hasMipmap:v,hasETC:!!A,hasS3TC:!!P},F=await Di.compressionWorkerHandle.invoke(L,k.signal,"low");if(Ce(k),F.compressedTexture&&this.hasWebGLTextureObject){const q=this.usedMemory;this._descriptor.internalFormat=F.internalFormat,this._setData(F.compressedTexture),S?.(q-this.usedMemory)}}catch(C){kr(C)||Fo().error("Texture compression failed!")}finally{b?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:s,height:l,depth:f,hasMipmap:y,target:v}=this._descriptor;const b=v===Qs.TEXTURE_3D;if(s==null||l==null||b&&f==null)throw new ct("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let S=0;e(S,s,l,f),y&&(s!==1||l!==1||b&&f!==1)&&!(S>=i);++S)s=Math.max(1,s>>1),l=Math.max(1,l>>1),b&&(f=Math.max(1,f>>1))}_applySamplingMode(){const e=this._descriptor,i=e.context?.gl;let s=e.samplingMode,l=e.samplingMode;s===ni.LINEAR_MIPMAP_NEAREST||s===ni.LINEAR_MIPMAP_LINEAR?(s=ni.LINEAR,e.hasMipmap||(l=ni.LINEAR)):s!==ni.NEAREST_MIPMAP_NEAREST&&s!==ni.NEAREST_MIPMAP_LINEAR||(s=ni.NEAREST,e.hasMipmap||(l=ni.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,s),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,l)}_applyWrapMode(){const e=this._descriptor,i=e.context?.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,i=e.context?.gl,s=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,s),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),fu(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Di.TEXTURE_UNIT_FOR_UPDATES=0,Di.compressionWorkerHandle=null,Di);const N3=()=>At.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function hst(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const cst=[0,0,0,0];let pC=class{constructor(){this.type="single",this._highlightOptions=new Dl,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Ff),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,Wrt),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<nC)-1,activeGradient:this}]}_updateGradientTexture(e){const i=pst(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,hst(this._highlightOptions,this._convertedHighlightOptions);const s=this._convertedHighlightOptions,l=s.outlinePosition-s.outlineWidth/2-s.outerHaloWidth,f=s.outlinePosition-s.outlineWidth/2,y=s.outlinePosition+s.outlineWidth/2,v=s.outlinePosition+s.outlineWidth/2+s.innerHaloWidth,b=Math.sqrt(Math.PI/2)*Zrt,S=Math.abs(l)>b?Math.round(10*(Math.abs(l)-b))/10:0,A=Math.abs(v)>b?Math.round(10*(Math.abs(v)-b))/10:0;let P;S&&!A?N3().error("The outer rim of the highlight is "+S+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!S&&A?N3().error("The inner rim of the highlight is "+A+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):S&&A&&N3().error("The highlight is "+Math.max(S,A)+"px away from the edge of the feature; consider reducing some width values.");const k=[void 0,void 0,void 0,void 0];function C(F,q,H){k[0]=(1-H)*F[0]+H*q[0],k[1]=(1-H)*F[1]+H*q[1],k[2]=(1-H)*F[2]+H*q[2],k[3]=(1-H)*F[3]+H*q[3]}const{_texelData:L}=this;for(let F=0;F<Ff;++F)P=l+F/(Ff-1)*(v-l),P<l?(k[0]=0,k[1]=0,k[2]=0,k[3]=0):P<f?C(cst,s.outlineColor,(P-l)/(f-l)):P<y?[k[0],k[1],k[2],k[3]]=s.outlineColor:P<v?C(s.outlineColor,s.fillColor,(P-y)/(v-y)):[k[0],k[1],k[2],k[3]]=s.fillColor,L[4*F]=255*k[0],L[4*F+1]=255*k[1],L[4*F+2]=255*k[2],L[4*F+3]=255*k[3];if(this._minMaxDistance[0]=l,this._minMaxDistance[1]=v,!this._shadeTex){const F=new lC;F.wrapMode=Bm.CLAMP_TO_EDGE,F.width=Ff,F.height=1,this._shadeTex=new ust(e,F)}this._shadeTex.updateData(0,0,0,Ff,1,this._texelData)}};function pst(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let fst=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new pC),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let s=0;s<this.gradients.length;s++){const l=this.gradients[s];i.push({activeReasons:e,activeGradient:l}),e<<=1}return i}};var yT,gT,mT,vT,wT,bT,Wm,_T,xT;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(yT||(yT={})),(function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(gT||(gT={})),(function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"})(mT||(mT={})),(function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(vT||(vT={})),(function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"})(wT||(wT={})),(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"})(bT||(bT={})),(function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"})(Wm||(Wm={})),(function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(_T||(_T={})),(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"})(xT||(xT={}));const fC={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:T9.EQUAL,mask:255,op:{fail:gd.KEEP,zFail:gd.KEEP,zPass:gd.REPLACE}}}},dst={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},yst={...fC,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function gst({pixelRatio:t,state:e,displayLevel:i,requiredLevel:s},l){const f=1/2**(i-l.key.level),y=1/2**(s-l.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:l.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:l.transforms.tileMat3,displayZoomFactor:f,requiredZoomFactor:y,tileOffset:[l.x,l.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:ko(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function dC(t){return t.passOptions?.type==="highlight"}function yC(t){return t.passOptions?.type==="hittest"}function mst(t){if(!yC(t))return null;const{position:e,distance:i,smallSymbolDistance:s,smallSymbolSizeThreshold:l}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:s,smallSymbolSizeThreshold:l}}function vst(t){if(!dC(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function D3t(t,e,i){const s={};for(const l in i)typeof i[l]!="function"?s[l]=i[l]:s[l]=i[l](t,e);return s}function j3t(t,e){const{attributeView:i,context:s}=t;return{storage:i.getUniforms(s),view:gst(t,e),hittestRequest:mst(t),highlight:vst(t)}}function F3t(t){return{inside:t.selection===Wm.InsideEffect,outside:t.selection===Wm.OutsideEffect}}function wst(t){return yC(t)?dst:dC(t)&&t.passOptions.stepType==="clear"?yst:fC}function z3t(t){const{row:e,col:i}=t.key,s=i*WS,l=e*WS;return{tileOffsetFromLocalOrigin:[s%fy,l%fy],maxIntsToLocalOrigin:[Math.floor(s/fy),Math.floor(l/fy)]}}const bst=new Bi({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function U3t(t){return bst.toJSON(t)}function G3t(t){const{bandCount:e,attributeTable:i,colormap:s,pixelType:l}=t.raster.rasterInfo;return e===1&&(i!=null||s!=null||l==="u8"||l==="s8")}function _st(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new fst:new pC),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function B3t(t,e,i,s){const{painter:l,highlightGradient:f}=t,{highlight:y}=l.effects;if(!f)return;const v=t.passOptions,b=f.getReasonsWithGradients();for(let S=0;S<b.length;S++){const A={...t,passOptions:{type:"highlight",activeGradient:b[S].activeGradient,activeReasons:b[S].activeReasons,stepType:"burn",highlightAll:e}};if(y.bind(A),i(A),S<b.length-1){let k=0;for(let C=S+1;C<b.length;C++)k|=b[C].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:b[S].activeGradient,activeReasons:k,stepType:"clear",highlightAll:e}})}const P={...t,passOptions:{type:"highlight",activeGradient:b[S].activeGradient,activeReasons:b[S].activeReasons,stepType:"draw",highlightAll:e}};l.setPipelineState(wst(t)),l.updatePipelineState(t.context),y.draw(P),y.unbind()}t.passOptions=v}const yy=t=>parseFloat(t)/100;function xst(t,e,i){const s=typeof t.left=="string"?yy(t.left)*e:t.left,l=typeof t.right=="string"?yy(t.right)*e:t.right,f=typeof t.top=="string"?yy(t.top)*i:t.top,y=typeof t.bottom=="string"?yy(t.bottom)*i:t.bottom,v=f;return{xmin:s,xmax:Math.max(e-l,s),ymin:v,ymax:Math.max(i-y,f)}}function gC(t,e,i,s){switch(e.type){case"rect":{const{width:l,height:f}=t,{xmin:y,xmax:v,ymin:b,ymax:S}=xst(e,l,f),{x:A,y:P}=i;return A>y&&A<v&&P>b&&P<S}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||j_(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?D_(e.geometry,s):u1(e.geometry,s))}}function Sst(t){if(!t.highlights)return null;const e=t.highlights.findIndex((i=>i.name==="default"));return e===-1?null:t.highlights.items[e]}function Tst(t,e){if(!t.highlights){if(!e)return;t.highlights=new kt([new Dl])}const i=t.highlights.findIndex((s=>s.name==="default"));e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function Mst(t,e,i){const s=Hk(e)?Vk(t,e):e;if(!t.ready||isNaN(s.x)||isNaN(s.y))return{screenPoint:s,results:[]};let l=new Set;const f=new Set;let y=!1,v=null,b=null;i?.include?TT(i.include,ST(t,(k=>{l.add(k),L3(k,(C=>f.add(C)))}),((k,C)=>{f.add(k),l.add(C)}),(k=>{v||(v=new Set),v.add(k)}),(k=>l.add(k)),(()=>y=!0))):(y=!0,l=new Set(t.allLayerViews),l.forEach((k=>{L3(k,(C=>f.add(C)))}))),i?.exclude&&TT(i.exclude,ST(t,(k=>{l.delete(k),L3(k,(C=>f.delete(C)))}),(k=>f.delete(k)),(k=>{b||(b=new Set),b.add(k)})));const S=t.toMap(s),A=t.allLayerViews.filter((k=>!k.suspended&&l.has(k)&&k.clips.every((C=>gC(t,C,s,S))))).reverse();let P=[...y?t.graphicsView.hitTest(S).map((k=>({type:"graphic",graphic:k,layer:null,mapPoint:S}))):[],...await Promise.all(A.map((k=>k.hitTest(S,s))).toArray())].filter(yh).flat().filter(yh);return P=P.filter((k=>k.type!=="graphic"||k.layer?.type!=="subtype-group"||f.has(k.graphic.layer))),v&&(P=P.filter((k=>!("graphic"in k)||!k.graphic||v?.has($9(k.graphic))))),b&&(P=P.filter((k=>!("graphic"in k)||!k.graphic||!b?.has($9(k.graphic))))),{screenPoint:s,results:P}}function ST(t,e,i,s,l,f){return y=>{if(y instanceof oi){if(y.layer===t)f?.();else{const v=t.allLayerViews.find((b=>b.layer===y.layer));v&&l?.(v)}s($9(y))}else if(!("layer"in y&&"element"in y))if(y.type==="subtype-sublayer"){const v=t.allLayerViews.find((b=>b.layer===y.parent));v&&i(y,v)}else{const v=t.allLayerViews.find((b=>b.layer===y));v&&e(v)}}}function TT(t,e){if(t)if(Hg(t))for(const i of t)if(Hg(i))for(const s of i)e(s);else e(i);else e(t)}function $9(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function L3({layer:t},e){t?.type==="subtype-group"&&t.sublayers.forEach((i=>{e(i)}))}let Gf=null,Jm=!0;function Est(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(Jm)try{return new ImageData(t,e)}catch{Jm=!1}return mC(t,e,i)}function q3t(t,e,i,s){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(Jm)try{return new ImageData(t,e,i)}catch{Jm=!1}const l=mC(e,i,s);return l.data.set(t,0),l}function $st(){return Gf||(Gf=document.createElement("canvas"),Gf.width=1,Gf.height=1),Gf}function mC(t,e,i){return i||(i=$st()),i.getContext("2d").createImageData(t,e)}async function Ast(t,e){const i=window.URL.createObjectURL(t);try{const{data:s}=await ii(i,{...e,responseType:"image"});return s}catch(s){throw kr(s)?s:new ct("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function V3t(t,e){const{arrayBuffer:i,mediaType:s}=await Ist(t,e),l=s==="image/png";if(s==="image/gif"){const{isAnimatedGIF:f,parseGif:y}=await mt(()=>import("./gif-BJ1QKu12.js"),__vite__mapDeps([331,1,2,3,4]));if(f(i))return y(i,e)}if(l){const{isAnimatedPNG:f,parseApng:y}=await mt(()=>import("./apng-GoBU-Pu6.js"),__vite__mapDeps([332,1,2,3,4]));if(f(i))return y(i,e)}return Ast(new Blob([i],{type:s}),e)}async function Ist(t,e){const i=dp(t);if(i?.isBase64)return{arrayBuffer:_E(i.data),mediaType:i.mediaType};const s=await ii(t,{responseType:"array-buffer",...e});return{arrayBuffer:s.data,mediaType:s.getHeader?.("Content-Type")??""}}function vC(t,e,i){const{ctx:s,canvas:l}=bC(t,i),f=s.getImageData(0,0,t.width,t.height),y=xC(l,e);return _C(l),{dataUrl:y,data:f}}function wC(t,e){const{ctx:i,canvas:s}=bC(t,e),l=i.getImageData(0,0,t.width,t.height);return _C(s),l}function bC(t,e){const i=Pst();e.premultipliedAlpha&&Cst(t),i.width=t.width,i.height=t.height;const s=i.getContext("2d",{willReadFrequently:!0});return s.putImageData(t,0,0),e.flipY&&Rst(s),{ctx:s,canvas:i}}function _C(t){t.width=0,t.height=0}function Pst(){return D3==null&&(D3=document.createElement("canvas")),D3}let D3=null;function xC(t,e){const i=Nst[e.format],s=e.quality/100;return t.toDataURL(i,s)}function SC(t,e){const i=kst(t),s=Dst[i];return{format:i,quality:Rr(e??s,0,100)}}function TC(t,e){return e/Math.max(t[0],t[1])}function Ost(t,e,i,s=0,l=0,f=t.width-s,y=t.height-l,v=!1){const{data:b}=t,{width:S,height:A,data:P}=e,k=f/S,C=y/A,L=Math.ceil(k/2),F=Math.ceil(C/2),q=t.width;for(let H=0;H<A;H++)for(let J=0;J<S;J++){const Q=4*(J+(v?A-H-1:H)*S);let tt=0,et=0,nt=0,vt=0,Tt=0,St=0;const pt=(H+.5)*C;for(let ht=Math.floor(H*C);ht<(H+1)*C;ht++){const _t=Math.abs(pt-(ht+.5))/F,gt=(J+.5)*k,at=_t*_t;for(let Lt=Math.floor(J*k);Lt<(J+1)*k;Lt++){const Yt=Math.abs(gt-(Lt+.5))/L,Dt=Math.sqrt(at+Yt*Yt);if(Dt>=1)continue;let Jt=2*Dt*Dt*Dt-3*Dt*Dt+1;const ui=4*(s+Lt+(l+ht)*q);St+=Jt*b[ui+3],et+=Jt,!i&&b[ui+3]<255&&(Jt=Jt*b[ui+3]/255),nt+=Jt*b[ui],vt+=Jt*b[ui+1],Tt+=Jt*b[ui+2],tt+=Jt}}P[Q]=nt/tt,P[Q+1]=vt/tt,P[Q+2]=Tt/tt,P[Q+3]=St/et}return e}function kst(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Lst}}function Rst(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Cst(t){const e=t.data,i=e.length;for(let s=0;s<i;s+=4){const l=e[s+3];if(l!==255&&l>0){const f=255/l;e[s]=e[s]*f,e[s+1]=e[s+1]*f,e[s+2]=e[s+2]*f}}}const Nst={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},MT=98,Lst="png",Dst={png:100,jpg:MT,jpeg:MT},H3t=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Est,encode:vC,encodeData:wC,getFormatAndQuality:SC,getMaximumResolutionScale:TC,resampleHermite:Ost,toDataUrl:xC},Symbol.toStringTag,{value:"Module"})),MC={flipY:!0,premultipliedAlpha:!0};async function jst(t,e){const i=await EC(t,e),{format:s,quality:l}=SC(e?.format,e?.quality);return vC(i,{format:s,quality:l},MC)}async function Fst(t,e){const i=await EC(t,e);return wC(i,MC)}function EC(t,e){const i=Gst(e||{},Ust(t.stage,t.size),t.size,t.padding),s=zst(e,t.allLayerViews);return t.stage.takeScreenshot(i,s,t.backgroundColor,e?.rotation)}function zst(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach((s=>{const l=e.find((f=>f.layer.id===s.id));l?.container&&i.push(l.container)})),i}function Ust(t,e){return Math.min(4,TC(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Gst(t,e,i,s){t.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let l=null;t.width!=null&&t.height!=null?l=[t.width,t.height]:t.width==null&&t.height!=null?l=[t.height,t.height]:t.width!=null&&t.height==null?l=[t.width,t.width]:t.width==null&&t.height==null&&(l=null);const f=i[0]-(s.left+s.right),y=i[1]-(s.top+s.bottom);let v,b,S=t.area||{x:0,y:0,width:f,height:y};if(l){const A=f/y,P=l[0]/l[1];if(P>A){const k=S.width/P;S={x:S.x,y:Math.round(S.y+(S.height-k)/2),width:S.width,height:Math.round(k)}}else{const k=S.height*P;S={x:Math.round(S.x+(S.width-k)/2),y:S.y,width:Math.round(k),height:S.height}}}else l=[S.width,S.height];return l[0]>S.width?(v=Math.min(l[0]/S.width,e),b=l[0]/S.width/v):(v=1,b=l[0]/S.width),{cropArea:{x:Math.round((S.x+s.left)*v),y:Math.round((S.y+s.top)*v),width:Math.round(S.width*v),height:Math.round(S.height*v)},outputScale:b,resolutionScale:v}}const Bst=t=>t.includes("Brush");let $C=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Bst(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},qst=class{constructor(e){this.getUnmaskedRenderer=e}};function Vst(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new qst((()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL))):null}let ET;function Hst(){return ET??=Yst(),ET}let Wst=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function Jst(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=Vst(i)?.getUnmaskedRenderer()??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),i}function Yst(){const t=new Wst,e=Jst(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Kst(t){const e=Hst();return e.available?t==="3d"&&e.majorPerformanceCaveat?new ct("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new ct("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ct("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ct("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Zst(t){return t&&"nodeType"in t}function Xst(t){return t&&typeof t.render=="function"}const $T={component:"esri-component"};let ku=class extends Ot{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add($T.component),i&&i.classList.remove($T.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||Zst(e)?(this._set("widget",null),m4(e)):(Xst(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};_([E()],ku.prototype,"id",null),_([E()],ku.prototype,"node",null),_([Ui("node")],ku.prototype,"castNode",null),_([E({readOnly:!0})],ku.prototype,"widget",void 0),ku=_([Y("esri.views.ui.Component")],ku);const Ag=ku,AC="calcite-mode-",IC="dark",Qst="light",tnt=/\W/g,ent="--esri-calcite-mode-name";function PC(){return getComputedStyle(document.body).getPropertyValue(ent).replaceAll(tnt,"").toLowerCase()}function Z3t(){return PC()===IC}function int(){const t=PC();switch(t){case IC:case Qst:return`${AC}${t}`;default:return null}}function rnt(t){const e=int();e&&(snt(t),t.classList.add(e))}function snt(t){Array.from(t.classList).forEach((e=>{e.startsWith(AC)&&t.classList.remove(e)}))}const Q2=new Map;function OC(){Q2.clear()}function nnt(t){return Q2.get(t)}function ont(t,e){Q2.set(t,e)}function j3(t){Q2.delete(t)}function ant(...t){const e=zr.acquire();for(let s=0;s<t.length;s++){const l=t[s],f=typeof l;if(f==="string")e.push(l);else if(Array.isArray(l))e.push.apply(e,l);else if(f==="object")for(const y in l)l[y]&&e.push(y)}const i=e.join(" ");return zr.release(e),i}(()=>{const t=new Map,e=new ResizeObserver((s=>{OC();for(const l of s)t.get(l.target)?.(l)})),i=(s,l,f)=>(t.set(s,l),e.observe(s,f),fe((()=>{e.unobserve(s),t.delete(s)})));return(s,l,f)=>{let y=null;return Ph([zt((()=>typeof s=="function"?s():s),(v=>{y?.remove(),v&&(y=i(v,l,f))}),zi),fe((()=>y?.remove()))])}})();function lnt(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function X3t(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Q3t(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function unt(t){return t==="Enter"||t===" "}async function hnt(t,e){await AF(i1(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const cnt={left:0,top:0,bottom:0,right:0},kC={bottom:30,top:15,right:15,left:15},zo="esri-ui",Wr={ui:zo,corner:`${zo}-corner`,innerContainer:`${zo}-inner-container`,manualContainer:`${zo}-manual-container`,cornerContainer:`${zo}-corner-container`,topLeft:`${zo}-top-left`,topRight:`${zo}-top-right`,bottomLeft:`${zo}-bottom-left`,bottomRight:`${zo}-bottom-right`};function pnt(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function gy(t){return t===0?"0":`${t}px`}function F3(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function z3(t,{top:e,bottom:i,left:s,right:l}){t.style.top=e,t.style.bottom=i,t.style.left=s,t.style.right=l}let no=class extends fn.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=on(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&z3(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&z3(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([zt((()=>[this.view?.padding,this.container]),this._applyViewPadding,Pr),zt((()=>this.padding),this._applyUIPadding,Pr),zt((()=>[this.container,this._locale]),(([e,i])=>{e&&e.setAttribute("lang",i)}),Pr),AA((e=>{this._locale=e}))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Wr.ui),rnt(e),this._attachContainers(e)),i&&(i.classList.remove(Wr.ui),z3(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const i=this._getViewPadding(),{top:s,bottom:l}=i;return Math.max(e-s-l,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...kC,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const i=this._getViewPadding(),{left:s,right:l}=i;return Math.max(e-s-l,0)}add(e,i){let s,l,f;if(Array.isArray(e))return void e.forEach((v=>this.add(v,i)));const y=F3(e);y&&({index:s,position:i,component:e,key:l}=y),i&&typeof i=="object"&&({index:s,key:l,position:i,internal:f}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,s??this._getNumComponentsAtPosition(i),l,f)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map((l=>this.remove(l,i)));const s=this._find(e);if(s){const l=this._componentMap.get(s);if(!l||l.key!==i)return;const f=this._components.indexOf(s);return s.node.parentNode?.removeChild(s.node),this._componentMap.delete(s),s.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach((v=>{const b=this._componentMap.get(v);b&&b.position===l.position&&b.index>l.index&&b.index--})),this._components.splice(f,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const f of e)this.empty(f,i);return}const s=this._positionNameToContainerLookup[e??"manual"],l=Array.prototype.slice.call(s.children).map((f=>this._findByNode(f))).filter((f=>f==null?!1:!(this._componentMap.get(f)?.internal??!1)||i.removeInternal));for(const f of l)this.remove(f)}move(e,i){if(Array.isArray(e)&&e.forEach((y=>this.move(y,i))),!e)return;let s;const l=F3(e)||F3(i);if(l&&(s=l.index,i=l.position,e=l.component||e),i&&!this._isValidPosition(i))return;const f=this.remove(e);f&&this.add(f,{position:i,index:s})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap((s=>this._getComponentsAtPosition(s,i))):this._getComponentsAtPosition(e,i):this._components.filter((s=>i.includeInternal||!this._componentMap.get(s)?.internal)).map((({widget:s,node:l})=>s??l))}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,s,l,f){e instanceof Ag||(e=new Ag({node:e}));const{widget:y}=e;y!=null&&y instanceof Ot&&y.addHandles(fe((()=>{queueMicrotask((()=>this.remove(e)))})),this._removeWidgetHandleKey),this._components.some((v=>this._componentMap.get(v)?.position===i&&this._componentMap.get(v)?.index===s))&&this._components.forEach((v=>{const b=this._componentMap.get(v);b&&b.position===i&&b.index>=s&&b.index++})),this._place({component:e,position:i,index:s}),this._components.push(e),this._componentMap.set(e,{key:l,position:i,internal:f,index:s})}_find(e){return e?e instanceof Ag?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??cnt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Wr.innerContainer,Wr.cornerContainer);const i=document.createElement("div");i.classList.add(Wr.innerContainer,Wr.manualContainer);const s=document.createElement("div");s.classList.add(Wr.topLeft,Wr.corner),e.appendChild(s);const l=document.createElement("div");l.classList.add(Wr.topRight,Wr.corner),e.appendChild(l);const f=document.createElement("div");f.classList.add(Wr.bottomLeft,Wr.corner),e.appendChild(f);const y=document.createElement("div");y.classList.add(Wr.bottomRight,Wr.corner),e.appendChild(y),this._innerContainer=e,this._manualContainer=i;const v=lnt();this._cornerNameToContainerLookup={"top-left":s,"top-right":l,"bottom-left":f,"bottom-right":y,"top-leading":v?l:s,"top-trailing":v?s:l,"bottom-leading":v?y:f,"bottom-trailing":v?f:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:s,index:l}=e,f=this._positionNameToContainerLookup[i],y=l!=null&&l>-1;if(pnt(s.widget)&&s.widget.startup(),!y)return void f.appendChild(s.node);const v=Array.from(f.children);if(v.length!==0){for(const b of v){const S=this._findByNode(b);if(S&&l<(this._componentMap.get(S)?.index??0))return void b.parentNode?.insertBefore(s.node,b)}f.appendChild(s.node)}else f.appendChild(s.node)}_toPixelPosition(e){return{top:gy(e.top),left:gy(e.left),right:gy(e.right),bottom:gy(e.bottom)}}_findByComponent(e){return this._components.find((i=>i===e))??null}_findById(e){return this._components.find((({id:i})=>i===e))??null}_findByNode(e){return e?this._components.find((({node:i})=>i===e)):null}_getComponentsAtPosition(e,i){const s=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(s.children).map((l=>this._findByNode(l))).filter(yh).filter((l=>i.includeInternal||!this._componentMap.get(l)?.internal)).map((({widget:l,node:f})=>l??f))}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};_([E()],no.prototype,"_locale",void 0),_([E()],no.prototype,"container",null),_([E()],no.prototype,"height",null),_([E({value:kC})],no.prototype,"padding",null),_([Ui("padding")],no.prototype,"castPadding",null),_([E()],no.prototype,"view",void 0),_([E()],no.prototype,"width",null),no=_([Y("esri.views.ui.UI")],no);const fnt=no,dnt={handleInterceptedEvent:(t,e,i,s)=>(t.scheduleRender(),e.properties[`on${s.type}`].apply(e.properties.bind||i,[s]))},ynt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},gnt=t=>({...ynt,...t}),mnt=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},vnt=(t,e)=>t.find(e),AT=(t,e,i=!1)=>{let s=t;return e.forEach(((l,f)=>{const y=s?.children?vnt(s.children,(v=>v.domNode===l)):void 0;i&&!y&&f!==e.length-1||(s=y)})),s},wnt=t=>{let e;const i={...dnt,...t},s=gnt(i),l=s.performanceLogger;let f,y=!0,v=!1;const b=[],S=[],A=(k,C,L)=>{let F;s.eventHandlerInterceptor=(H,J,Q,tt)=>function(et){let nt;l("domEvent",et);const vt=mnt(et.currentTarget,F.domNode),Tt=vt.some((pt=>customElements.get(pt?.tagName?.toLowerCase())));if(et.eventPhase===Event.CAPTURING_PHASE||!Tt)vt.reverse(),nt=AT(F.getLastRender(),vt);else{const pt=et.composedPath(),ht=pt.slice(pt.indexOf(et.currentTarget),pt.indexOf(F.domNode)).reverse();nt=AT(F.getLastRender(),ht,!0)}let St;return nt&&(St=i.handleInterceptedEvent(e,nt,this,et)),l("domEventProcessed",et),St},i.postProcessProjectionOptions?.(s);const q=L();F=k(C,q,s),s.eventHandlerInterceptor=void 0,b.push(F),S.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(F,q)};let P=()=>{if(f=void 0,y){y=!1,l("renderStart",void 0);for(let k=0;k<b.length;k++){const C=S[k]();l("rendered",void 0);try{b[k].update(C)}catch(L){console.error(L)}l("patched",void 0)}l("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(P=i.modifyDoRenderImplementation(P,b,S)),e={renderNow:P,scheduleRender:()=>{f||v||(f=requestAnimationFrame(P))},stop:()=>{f&&(cancelAnimationFrame(f),f=void 0),v=!0},resume:()=>{v=!1,y=!0,e.scheduleRender()},append:(k,C)=>{A(Al.append,k,C)},insertBefore:(k,C)=>{A(Al.insertBefore,k,C)},merge:(k,C)=>{A(Al.merge,k,C)},replace:(k,C)=>{A(Al.replace,k,C)},detach:k=>{for(let C=0;C<S.length;C++)if(S[C]===k)return S.splice(C,1),b.splice(C,1)[0];throw new Error("renderFunction was not found")}},e},ci=(t,e,...i)=>{try{return t?.call(e,...i)}catch(s){console.error(s,t)}},A9=async(t,e,...i)=>{try{return await t?.call(e,...i)}catch(s){console.error(s,t)}},J4=Symbol.for("controller"),bnt=t=>typeof t=="object"&&t!==null&&(J4 in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),ewt=t=>typeof t?.then=="function";let C0;const N0=t=>{C0!==t&&(C0=t,queueMicrotask(()=>C0===t?C0=void 0:0))},tv=t=>C0;let Ru=[];const _nt=t=>{if(t===void 0){Ru=[];return}const e=Ru.indexOf(t);Ru=e===-1?[...Ru,t]:Ru.slice(0,e+1),queueMicrotask(()=>Ru=[])},xnt=()=>Ru;let Pc;const iwt=t=>{Pc!==t&&(Pc=t,queueMicrotask(()=>Pc===t?Pc=void 0:0))},Snt=()=>{const t=Pc;return Pc=void 0,t},Tnt=async(t,e)=>{const i=Y4(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const s=i.watchExports(l=>e(l,s))}return i.exports},Mnt=async t=>{const e=Y4(t);return await e.ready,e},Y4=t=>{const i=tv().manager.X(t);if(i!==void 0)return i;if(bnt(t))return t;const s=Snt();if(s!==void 0)return s};let I9=!1;const rwt=t=>{I9=!0;try{return t()}finally{I9=!1}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ig=globalThis,K4=Ig.ShadowRoot&&(Ig.ShadyCSS===void 0||Ig.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Z4=Symbol(),IT=new WeakMap;let RC=class{constructor(e,i,s){if(this._$cssResult$=!0,s!==Z4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(K4&&e===void 0){const s=i!==void 0&&i.length===1;s&&(e=IT.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&IT.set(i,e))}return e}toString(){return this.cssText}};const Ent=t=>new RC(typeof t=="string"?t:t+"",void 0,Z4),nwt=(t,...e)=>{const i=t.length===1?t[0]:e.reduce(((s,l,f)=>s+(y=>{if(y._$cssResult$===!0)return y.cssText;if(typeof y=="number")return y;throw Error("Value passed to 'css' function must be a 'css' function result: "+y+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(l)+t[f+1]),t[0]);return new RC(i,t,Z4)},$nt=(t,e)=>{if(K4)t.adoptedStyleSheets=e.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(const i of e){const s=document.createElement("style"),l=Ig.litNonce;l!==void 0&&s.setAttribute("nonce",l),s.textContent=i.cssText,t.appendChild(s)}},PT=K4?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const s of e.cssRules)i+=s.cssText;return Ent(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Ant,defineProperty:Int,getOwnPropertyDescriptor:Pnt,getOwnPropertyNames:Ont,getOwnPropertySymbols:knt,getPrototypeOf:Rnt}=Object,ev=globalThis,OT=ev.trustedTypes,Cnt=OT?OT.emptyScript:"",Nnt=ev.reactiveElementPolyfillSupport,md=(t,e)=>t,P9={toAttribute(t,e){switch(e){case Boolean:t=t?Cnt:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},X4=(t,e)=>!Ant(t,e),kT={attribute:!0,type:String,converter:P9,reflect:!1,useDefault:!1,hasChanged:X4};Symbol.metadata??=Symbol("metadata"),ev.litPropertyMetadata??=new WeakMap;let cc=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=kT){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const s=Symbol(),l=this.getPropertyDescriptor(e,s,i);l!==void 0&&Int(this.prototype,e,l)}}static getPropertyDescriptor(e,i,s){const{get:l,set:f}=Pnt(this.prototype,e)??{get(){return this[i]},set(y){this[i]=y}};return{get:l,set(y){const v=l?.call(this);f?.call(this,y),this.requestUpdate(e,v,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??kT}static _$Ei(){if(this.hasOwnProperty(md("elementProperties")))return;const e=Rnt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(md("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(md("properties"))){const i=this.properties,s=[...Ont(i),...knt(i)];for(const l of s)this.createProperty(l,i[l])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[s,l]of i)this.elementProperties.set(s,l)}this._$Eh=new Map;for(const[i,s]of this.elementProperties){const l=this._$Eu(i,s);l!==void 0&&this._$Eh.set(l,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const l of s)i.unshift(PT(l))}else e!==void 0&&i.push(PT(e));return i}static _$Eu(e,i){const s=i.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const s of i.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return $nt(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,i,s){this._$AK(e,s)}_$ET(e,i){const s=this.constructor.elementProperties.get(e),l=this.constructor._$Eu(e,s);if(l!==void 0&&s.reflect===!0){const f=(s.converter?.toAttribute!==void 0?s.converter:P9).toAttribute(i,s.type);this._$Em=e,f==null?this.removeAttribute(l):this.setAttribute(l,f),this._$Em=null}}_$AK(e,i){const s=this.constructor,l=s._$Eh.get(e);if(l!==void 0&&this._$Em!==l){const f=s.getPropertyOptions(l),y=typeof f.converter=="function"?{fromAttribute:f.converter}:f.converter?.fromAttribute!==void 0?f.converter:P9;this._$Em=l;const v=y.fromAttribute(i,f.type);this[l]=v??this._$Ej?.get(l)??v,this._$Em=null}}requestUpdate(e,i,s){if(e!==void 0){const l=this.constructor,f=this[e];if(s??=l.getPropertyOptions(e),!((s.hasChanged??X4)(f,i)||s.useDefault&&s.reflect&&f===this._$Ej?.get(e)&&!this.hasAttribute(l._$Eu(e,s))))return;this.C(e,i,s)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:s,reflect:l,wrapped:f},y){s&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,y??i??this[e]),f!==!0||y!==void 0)||(this._$AL.has(e)||(this.hasUpdated||s||(i=void 0),this._$AL.set(e,i)),l===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[l,f]of this._$Ep)this[l]=f;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[l,f]of s){const{wrapped:y}=f,v=this[l];y!==!0||this._$AL.has(l)||v===void 0||this.C(l,void 0,f,v)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach((s=>s.hostUpdate?.())),this.update(i)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach((i=>i.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};cc.elementStyles=[],cc.shadowRootOptions={mode:"open"},cc[md("elementProperties")]=new Map,cc[md("finalized")]=new Map,Nnt?.({ReactiveElement:cc}),(ev.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Q4=globalThis,Ym=Q4.trustedTypes,RT=Ym?Ym.createPolicy("lit-html",{createHTML:t=>t}):void 0,CC="$lit$",xl=`lit$${Math.random().toFixed(9).slice(2)}$`,NC="?"+xl,Lnt=`<${NC}>`,Mh=document,qd=()=>Mh.createComment(""),Vd=t=>t===null||typeof t!="object"&&typeof t!="function",t6=Array.isArray,Dnt=t=>t6(t)||typeof t?.[Symbol.iterator]=="function",U3=`[ 	
\f\r]`,Bf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,CT=/-->/g,NT=/>/g,du=RegExp(`>|${U3}(?:([^\\s"'>=/]+)(${U3}*=${U3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),LT=/'/g,DT=/"/g,LC=/^(?:script|style|textarea|title)$/i,DC=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),awt=DC(1),lwt=DC(2),Kl=Symbol.for("lit-noChange"),Ti=Symbol.for("lit-nothing"),jT=new WeakMap,Yu=Mh.createTreeWalker(Mh,129);function jC(t,e){if(!t6(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return RT!==void 0?RT.createHTML(e):e}const jnt=(t,e)=>{const i=t.length-1,s=[];let l,f=e===2?"<svg>":e===3?"<math>":"",y=Bf;for(let v=0;v<i;v++){const b=t[v];let S,A,P=-1,k=0;for(;k<b.length&&(y.lastIndex=k,A=y.exec(b),A!==null);)k=y.lastIndex,y===Bf?A[1]==="!--"?y=CT:A[1]!==void 0?y=NT:A[2]!==void 0?(LC.test(A[2])&&(l=RegExp("</"+A[2],"g")),y=du):A[3]!==void 0&&(y=du):y===du?A[0]===">"?(y=l??Bf,P=-1):A[1]===void 0?P=-2:(P=y.lastIndex-A[2].length,S=A[1],y=A[3]===void 0?du:A[3]==='"'?DT:LT):y===DT||y===LT?y=du:y===CT||y===NT?y=Bf:(y=du,l=void 0);const C=y===du&&t[v+1].startsWith("/>")?" ":"";f+=y===Bf?b+Lnt:P>=0?(s.push(S),b.slice(0,P)+CC+b.slice(P)+xl+C):b+xl+(P===-2?v:C)}return[jC(t,f+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};let O9=class FC{constructor({strings:e,_$litType$:i},s){let l;this.parts=[];let f=0,y=0;const v=e.length-1,b=this.parts,[S,A]=jnt(e,i);if(this.el=FC.createElement(S,s),Yu.currentNode=this.el.content,i===2||i===3){const P=this.el.content.firstChild;P.replaceWith(...P.childNodes)}for(;(l=Yu.nextNode())!==null&&b.length<v;){if(l.nodeType===1){if(l.hasAttributes())for(const P of l.getAttributeNames())if(P.endsWith(CC)){const k=A[y++],C=l.getAttribute(P).split(xl),L=/([.?@])?(.*)/.exec(k);b.push({type:1,index:f,name:L[2],strings:C,ctor:L[1]==="."?znt:L[1]==="?"?Unt:L[1]==="@"?Gnt:iv}),l.removeAttribute(P)}else P.startsWith(xl)&&(b.push({type:6,index:f}),l.removeAttribute(P));if(LC.test(l.tagName)){const P=l.textContent.split(xl),k=P.length-1;if(k>0){l.textContent=Ym?Ym.emptyScript:"";for(let C=0;C<k;C++)l.append(P[C],qd()),Yu.nextNode(),b.push({type:2,index:++f});l.append(P[k],qd())}}}else if(l.nodeType===8)if(l.data===NC)b.push({type:2,index:f});else{let P=-1;for(;(P=l.data.indexOf(xl,P+1))!==-1;)b.push({type:7,index:f}),P+=xl.length-1}f++}}static createElement(e,i){const s=Mh.createElement("template");return s.innerHTML=e,s}};function jp(t,e,i=t,s){if(e===Kl)return e;let l=s!==void 0?i._$Co?.[s]:i._$Cl;const f=Vd(e)?void 0:e._$litDirective$;return l?.constructor!==f&&(l?._$AO?.(!1),f===void 0?l=void 0:(l=new f(t),l._$AT(t,i,s)),s!==void 0?(i._$Co??=[])[s]=l:i._$Cl=l),l!==void 0&&(e=jp(t,l._$AS(t,e.values),l,s)),e}let Fnt=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:s}=this._$AD,l=(e?.creationScope??Mh).importNode(i,!0);Yu.currentNode=l;let f=Yu.nextNode(),y=0,v=0,b=s[0];for(;b!==void 0;){if(y===b.index){let S;b.type===2?S=new e6(f,f.nextSibling,this,e):b.type===1?S=new b.ctor(f,b.name,b.strings,this,e):b.type===6&&(S=new Bnt(f,this,e)),this._$AV.push(S),b=s[++v]}y!==b?.index&&(f=Yu.nextNode(),y++)}return Yu.currentNode=Mh,l}p(e){let i=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,i),i+=s.strings.length-2):s._$AI(e[i])),i++}},e6=class zC{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,s,l){this.type=2,this._$AH=Ti,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=s,this.options=l,this._$Cv=l?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=jp(this,e,i),Vd(e)?e===Ti||e==null||e===""?(this._$AH!==Ti&&this._$AR(),this._$AH=Ti):e!==this._$AH&&e!==Kl&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Dnt(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ti&&Vd(this._$AH)?this._$AA.nextSibling.data=e:this.T(Mh.createTextNode(e)),this._$AH=e}$(e){const{values:i,_$litType$:s}=e,l=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=O9.createElement(jC(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===l)this._$AH.p(i);else{const f=new Fnt(l,this),y=f.u(this.options);f.p(i),this.T(y),this._$AH=f}}_$AC(e){let i=jT.get(e.strings);return i===void 0&&jT.set(e.strings,i=new O9(e)),i}k(e){t6(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,l=0;for(const f of e)l===i.length?i.push(s=new zC(this.O(qd()),this.O(qd()),this,this.options)):s=i[l],s._$AI(f),l++;l<i.length&&(this._$AR(s&&s._$AB.nextSibling,l),i.length=l)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},iv=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,s,l,f){this.type=1,this._$AH=Ti,this._$AN=void 0,this.element=e,this.name=i,this._$AM=l,this.options=f,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=Ti}_$AI(e,i=this,s,l){const f=this.strings;let y=!1;if(f===void 0)e=jp(this,e,i,0),y=!Vd(e)||e!==this._$AH&&e!==Kl,y&&(this._$AH=e);else{const v=e;let b,S;for(e=f[0],b=0;b<f.length-1;b++)S=jp(this,v[s+b],i,b),S===Kl&&(S=this._$AH[b]),y||=!Vd(S)||S!==this._$AH[b],S===Ti?e=Ti:e!==Ti&&(e+=(S??"")+f[b+1]),this._$AH[b]=S}y&&!l&&this.j(e)}j(e){e===Ti?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},znt=class extends iv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ti?void 0:e}},Unt=class extends iv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ti)}},Gnt=class extends iv{constructor(e,i,s,l,f){super(e,i,s,l,f),this.type=5}_$AI(e,i=this){if((e=jp(this,e,i,0)??Ti)===Kl)return;const s=this._$AH,l=e===Ti&&s!==Ti||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,f=e!==Ti&&(s===Ti||l);l&&this.element.removeEventListener(this.name,this,s),f&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},Bnt=class{constructor(e,i,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){jp(this,e)}};const qnt=Q4.litHtmlPolyfillSupport;qnt?.(O9,e6),(Q4.litHtmlVersions??=[]).push("3.3.1");const Vnt=(t,e,i)=>{const s=i?.renderBefore??e;let l=s._$litPart$;if(l===void 0){const f=i?.renderBefore??null;s._$litPart$=l=new e6(e.insertBefore(qd(),f),f,void 0,i??{})}return l._$AI(t),l};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i6=globalThis;let Wc=class extends cc{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Vnt(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Kl}};Wc._$litElement$=!0,Wc.finalized=!0,i6.litElementHydrateSupport?.({LitElement:Wc});const Hnt=i6.litElementPolyfillSupport;Hnt?.({LitElement:Wc});(i6.litElementVersions??=[]).push("4.2.1");class Hd{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const Wnt=(t,e)=>{const i=e/Jnt;let s=0;const l=setInterval(()=>{s+=i,s>=e&&(clearInterval(l),t())},i);return l},Jnt=4,Ynt=(t,e,i)=>{const s=Object.keys(t),l=s.length;Oc===void 0&&queueMicrotask(rv),Oc??=new Map;let f=Oc.get(t);return f===void 0&&(f={callbacks:[],keyCount:l},Oc.set(t,f)),f.keyCount!==l&&(f.callbacks.forEach(y=>y(s)),f.callbacks=[],f.keyCount=l),f.callbacks.push(y=>{const v=S=>ci(e,null,S),b=y[l];b===void 0?v(void 0):t[b]===i?v(b):v(void 0)}),i};let Oc;const rv=()=>{Oc?.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(s=>s(i))}),Oc=void 0},Knt=(t,e,i)=>{const s=t.manager;return s.V!==Ti&&s.V!==i&&s.S(void 0,void 0),s.T.length===0&&queueMicrotask(()=>s.S(void 0,void 0)),s.V=i,s.T.push((l,f)=>ci(e,void 0,i===f?l:void 0)),i},Znt=(t=[tv(),...xnt()],e,i)=>{const s=Array.isArray(t)?t:[t];let l=s.length+1;const f=y=>{l-=1,y!==void 0&&(l=Math.min(l,0)),l===0&&e(y)};s.forEach(y=>Ynt(y,v=>f(v===void 0?void 0:{key:v,host:y,isReactive:!1}),i));for(const y of s)if("manager"in y&&y.manager.component===y){Knt(y,v=>f(v===void 0?void 0:{key:v,host:y,isReactive:!0}),i);break}return i},Xnt=(t="",e={},i=tv())=>{const s={emit:l=>{t===""&&rv();const f=new CustomEvent(t,{detail:l,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(f),f}};return t===""&&Znt(void 0,l=>t=l.key,s),s},gwt=Xnt.bind(null,"");var UC;UC=J4;class Qnt{constructor(e){this.#i=[],this.#t=[],this.#r=[],this.#l=[],this.#u=[],this.#h=[],this.#c=[],this.#p=[],this.#o=[],this.#a=!1,this.P=new Hd,this.connectedCalled=!1,this.loadedCalled=!1,this[UC]=!0,this.#n=[];const i=this,s=e??tv();i.#e=s,i.ready=i.P.promise,i.#s=zT(i),i.component=s,i.#e.addController(i),i.#e.manager===void 0||(_nt(i),queueMicrotask(()=>i.catchUpLifecycle()))}#i;#t;#r;#l;#u;#h;#c;#p;#o;#a;#e;catchUpLifecycle(){const{manager:e}=this.#e;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#a&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#s;get exports(){return this.#s}set exports(e){const i=this.#s;i!==e&&(this.#s=e,this.#n.forEach(ci),this.connectedCalled&&this.O!==!1&&this.#e.requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){this.#s=i?zT(e):e,this.#n.forEach(ci)}#n;watchExports(e){const i=()=>e(this.#s);return this.#n.push(i),()=>void this.#n.splice(this.#n.indexOf(i),1)}get use(){return N0(this.#e),Tnt}get useRef(){return N0(this.#e),Mnt}get useRefSync(){return N0(this.#e),Y4}controllerRemoved(){this.#e.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#i.push(e)}onDisconnected(e){this.#t.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#l.push(e)}onUpdate(e){this.#u.push(e)}onUpdated(e){this.#h.push(e)}onDestroy(e){this.#c.push(e)}onLifecycle(e){this.#p.push(e),this.connectedCalled&&this.#e.el.isConnected&&this.#f(e)}triggerConnected(){const e=this;e.hostConnected&&ci(e.hostConnected,e),e.#i.forEach(ci),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&ci(e.hostDisconnected,e),e.#t.forEach(ci),e.#o.forEach(ci),e.#o=[]}async triggerLoad(){if(this.#a)return;this.#a=!0;const e=this;e.hostLoad&&await A9(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(A9)),this.P.resolve(this.#s)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&ci(this.hostLoaded,this),this.#l.forEach(ci),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&ci(this.hostUpdate,this,e),this.#u.forEach(FT,e)}triggerUpdated(e){this.hostUpdated&&ci(this.hostUpdated,this,e),this.#h.forEach(FT,e)}triggerDestroy(){this.hostDestroy&&ci(this.hostDestroy,this),this.#c.forEach(ci)}triggerLifecycle(){this.hostLifecycle&&this.#f(()=>this.hostLifecycle()),this.#p.forEach(this.#f,this)}#f(e){N0(this.#e);const i=ci(e);(Array.isArray(i)?i:[i]).forEach(l=>{typeof l=="function"?this.#o.push(l):typeof l=="object"&&typeof l.remove=="function"&&this.#o.push(l.remove)})}}function FT(t){ci(t,void 0,this)}const tot=Qnt,zT=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(s,l,f){if(!((l==="exports"||l==="_exports")&&l in s&&s[l]===i)&&(l in s||l in Promise.prototype||typeof l=="symbol"))return typeof s=="function"?s[l]:Reflect.get(s,l,f)}},i=new Proxy(t,e);return i},eot=t=>t.replace(iot,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),iot=/[A-Z]+(?![a-z])|[A-Z]/gu,rot=1,sot=2,not=4,oot=8,aot=16,lot=32,uot=64,GC=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const i=e;return i.manager?.loadedCalled||(i.J??i._offspring).push(t),(i.I??i._postLoad).promise}return!1},UT={};function BC(){}const Pg=Object.defineProperty,hot=globalThis.HTMLElement??BC;var Zr,va,cp,Kd,k9;const F6=class F6 extends hot{constructor(){var l;super();vn(this,Kd);vn(this,Zr);vn(this,va);vn(this,cp);wn(this,va,{}),wn(this,cp,[]),this.I=new Hd,this.H=new Hd,this.J=[];const i=this,s=i.constructor;i._offspring=i.J,i._postLoad=i.I,s.C?.forEach(f=>{Object.hasOwn(i,f)&&(Ae(i,va)[f]=i[f],delete i[f])}),s.A?wf(l=i,Kd,k9).call(l,{a:s.A}):s.B.then(async f=>{var y;await s.K.p,wf(y=i,Kd,k9).call(y,await(f.default?.then(v=>typeof v=="function"?{a:v}:v)??f))}).catch(f=>{i.H.reject(f),setTimeout(()=>{throw f})})}static F(){for(const i of this.C??[])Pg(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Ae(this,va)[i]},set(s){Ae(this,va)[i]=s}});for(const i of this.E??[])Pg(this.prototype,i,{async value(...s){return Ae(this,Zr)||await this.H.promise,await Ae(this,Zr)[i](...s)},configurable:!0});for(const i of this.D??[])Pg(this.prototype,i,{value(...s){return Ae(this,Zr)[i](...s)},configurable:!0})}get manager(){return Ae(this,Zr)?.manager}attributeChangedCallback(i,s,l){Ae(this,Zr)?.attributeChangedCallback(i,s,l),Ae(this,Zr)||Ae(this,cp).push(i)}connectedCallback(){Ae(this,Zr)?Ae(this,Zr).connectedCallback?.():queueMicrotask(()=>this.G=GC(this))}disconnectedCallback(){Ae(this,Zr)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Ae(this,Zr)?.requestUpdate()}};Zr=new WeakMap,va=new WeakMap,cp=new WeakMap,Kd=new WeakSet,k9=function(i){const s=this.constructor,l=s.L,f=Ae(this,va),y=Object.values(i).find(k=>k.L===l),v=`${l}--lazy`;let b=y;for(;b&&!Object.hasOwn(b,"lumina");)b=Object.getPrototypeOf(b);pot(b),!s.A&&(s.A=y,customElements.define(v,y)),y.N=this;const A=document.createElement(v);y.N=void 0,wn(this,Zr,A),wn(this,va,A),Ae(this,cp).forEach(k=>A.attributeChangedCallback(k,null,this.getAttribute(k))),Object.entries(f).forEach(cot,A);const P=this.isConnected;(P||this.G)&&(A.connectedCallback?.(),P||A.disconnectedCallback())},F6.lumina=!0;let GT=F6;function cot([t,e]){this[t]=e}const pot=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(l,f){i.setAttribute.call(this.el,l,f)},e.removeAttribute=function(l){i.removeAttribute.call(this.el,l)},Pg(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qC={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},VC=t=>(...e)=>({_$litDirective$:t,values:e});let HC=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,s){this._$Ct=e,this._$AM=i,this._$Ci=s}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fot=VC(class extends HC{constructor(t){if(super(t),t.type!==qC.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((s=>s!==""))));for(const s in e)e[s]&&!this.nt?.has(s)&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const l=!!e[s];l===this.st.has(s)||this.nt?.has(s)||(l?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return Kl}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const WC="important",dot=" !"+WC,yot=VC(class extends HC{constructor(t){if(super(t),t.type!==qC.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const s=t[i];return s==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const s of this.ft)e[s]==null&&(this.ft.delete(s),s.includes("-")?i.removeProperty(s):i[s]=null);for(const s in e){const l=e[s];if(l!=null){this.ft.add(s);const f=typeof l=="string"&&l.endsWith(dot);s.includes("-")||f?i.setProperty(s,f?l.slice(0,-11):l,f?WC:""):i[s]=l}}return Kl}});class got extends tot{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=Ti,this.T=[],this.#r=new WeakMap,this.#t=e,this.exports=void 0,this.hasDestroy=R9 in e&&typeof e.destroy=="function",Wc.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const i=e.el.localName;throw e.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${R9} prop.`)}this.#i!==void 0&&clearTimeout(this.#i),rv();for(const i of e.M)"triggerConnected"in i?i.triggerConnected():ci(i.hostConnected,i)},hostDisconnected:()=>{for(const i of e.M)"triggerDisconnected"in i?i.triggerDisconnected():ci(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of e.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):ci(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of e.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):ci(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),N0(e)}#i;#t;async destroy(){if(!this.destroyed){this.#t.el.isConnected&&(this.hasDestroy=!1,this.#t.el.remove()),this.#i=void 0,this.destroyed=!0;for(const e of this.#t.M)"triggerDestroy"in e?e.triggerDestroy():ci(e.hostDestroy,e);this.#t.M.splice(0)}}U(){if(this.#i!==void 0&&clearTimeout(this.#i),!this.#t.el.isConnected&&!this.#t.autoDestroyDisabled){const e=()=>void this.#t.destroy();this.#i=Wnt(e,mot)}}S(e,i){const s=this.T;this.V=Ti,this.T=[],s.forEach(l=>l(e,i))}#r;W(e,i){(typeof i=="object"&&i!==null||typeof i=="function")&&this.#r.set(i,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#r.get(e)}}let mot=1e3;const R9="autoDestroyDisabled";var Ku,Zd,Xd,Zu,po,Gp,JC,YC;const _d=class _d extends Wc{constructor(){super();vn(this,Gp);vn(this,Ku);vn(this,Zd);vn(this,Xd);vn(this,Zu);vn(this,po);this.M=[],this.manager=new got(this);const i=this,s=i.constructor,l=s.N,f=s.K.o,y=_d.prototype.shouldUpdate;wn(i,Zu,l?.H??new Hd),i.I=l?.I??new Hd,i.J=l?.J??[],i._offspring=i.J,i._postLoad=i.I,i.el=l??i,wn(i,Xd,i.enableUpdating),i.enableUpdating=BC,i.shouldUpdate!==y&&(wn(i,Zd,i.shouldUpdate),i.shouldUpdate=y),f&&(wn(i,Ku,new Map),s.elementProperties.forEach((v,b)=>Ae(i,Ku).set(b,f())))}static finalizeStyles(i){const s=super.finalizeStyles(i),l=this.shadowRootOptions===UT;return this.K?.commonStyles===void 0||l?s:[this.K.commonStyles,...s]}static createProperty(i,s){const l=typeof s=="number"?s:Array.isArray(s)?s[0]:0,f=Array.isArray(s)?s[1]:void 0,y=f?.hasChanged??X4,v={attribute:l&rot&&typeof i=="string"?eot(i):!1,reflect:!!(l&sot),type:l&not?Boolean:l&oot?Number:void 0,state:!!(l&aot),readOnly:!!(l&lot),noAccessor:!!(l&uot),c:!1,...f,hasChanged(b,S){const A=y(b,S);return v.c=A,A}};super.createProperty(i,v)}static getPropertyDescriptor(i,s,l){const f=this.K,y=super.getPropertyDescriptor(i,s,l);return l.d=y,{...y,get(){return f.t?.(Ae(this,Ku).get(i)),y.get?.call(this)},set(v){const b=this.manager;if(l.readOnly&&!I9&&(b.R||b.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${v}"`);y.set.call(this,v??void 0),l.c&&Ae(this,Ku)?.get(i)?.notify(),b.T.length>0&&(rv(),b?.S(i,v))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const i=this.constructor.K.c?.(()=>this.requestUpdate());wn(this,po,i);const s=!this.manager.connectedCalled;super.connectedCallback(),s?queueMicrotask(()=>wf(this,Gp,YC).call(this).catch(l=>{Ae(this,Zu).reject(l),setTimeout(()=>{throw l})})):i&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Ae(this,po)?.destroy(),wn(this,po,void 0)}createRenderRoot(){const i=this.el.shadowRoot,s=this.constructor,l=s.shadowRootOptions,y=i??(l===UT?this.el:this.el.attachShadow(l));if(this.isConnected){const v=y.getRootNode();v.adoptedStyleSheets=[...v.adoptedStyleSheets,...s.elementStyles.map(b=>"styleSheet"in b?b.styleSheet:b)]}return y}shouldUpdate(i){var s;return this.manager.Q=i,((s=Ae(this,Zd))==null?void 0:s.call(this,i))??!0}update(i){Ae(this,po)?wf(this,Gp,JC).call(this,i):super.update(i)}listen(i,s,l){const f=s?.bind(this)??s;this.manager.onLifecycle(()=>(this.el.addEventListener(i,f,l),()=>this.el.removeEventListener(i,f,l)))}listenOn(i,s,l,f){const y=l?.bind(this)??l;this.manager.onLifecycle(()=>(i.addEventListener(s,y,f),()=>i.removeEventListener(s,y,f)))}async componentOnReady(){return await Ae(this,Zu).promise,this}addController(i){this.M.push(i),!(J4 in i)&&this.renderRoot&&this.el.isConnected&&i.hostConnected?.()}removeController(i){this.M.splice(this.M.indexOf(i),1),i.controllerRemoved?.()}};Ku=new WeakMap,Zd=new WeakMap,Xd=new WeakMap,Zu=new WeakMap,po=new WeakMap,Gp=new WeakSet,JC=function(i){try{Ae(this,po).clear(),this.constructor.K.r(Ae(this,po),()=>G6(_d.prototype,this,"update").call(this,i))}catch(s){throw Ae(this,po).clear(),s}},YC=async function(){const i=this.el.G??GC(this.el);i&&await i;const s=[];for(const f of this.M)"triggerLoad"in f?s.push(f.triggerLoad()):s.push(A9(f.hostLoad,f));await Promise.all(s),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(f=>f.has(R9)&&this.manager.U()),Ae(this,Xd).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const l=this.J.filter(f=>!f.manager?.loadedCalled);l.length&&await Promise.allSettled(l.map(async f=>await f.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const f of this.M)"triggerLoaded"in f?f.triggerLoaded():ci(f.hostLoaded,f);this.loaded?.(),Ae(this,Zu).resolve()},_d.lumina=!0;let BT=_d;const vot=t=>{let e;const i=l=>{e=new URL(l,globalThis.location?.href||void 0).href},s={...t,getAssetPath(l){const f=new URL(l,e);return f.origin!==globalThis.location?.origin?f.href:f.pathname},setAssetPath:i,customElement(l,f){f.K=s,f.L=l,customElements.get(l)||customElements.define(l,f)}};return i(t.defaultAssetPath),s},vwt=t=>typeof t=="object"&&t!=null?fot(t):t,wwt=t=>typeof t=="object"&&t!=null?yot(t):t,bwt=Ti;function _wt(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const xwt={toAttribute:t=>t===!0?"":t===!1?null:t},wot="calcite-mode-auto",bot="calcite-mode-dark",Swt={rtl:"calcite--rtl"},Twt={filter:250,nextTick:0,resize:150,reposition:100},Mwt=25;function qT(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(bot)||t.contains(wot)&&e?"dark":"light",s=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),l=y=>{f!==y&&s(y),f=y};let f=i();s(f),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>l(y.matches?"dark":"light")),new MutationObserver(()=>l(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const vd=globalThis.calciteConfig,Ewt=vd?.focusTrapStack||[],$wt=vd?.logLevel||"info",VT="3.3.3",_ot="2025-10-08",xot="7391af08e";function Sot(){if(vd&&vd.version)return;console.info(`Using Calcite Components ${VT} [Date: ${_ot}, Revision: ${xot}]`);const t=vd||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:VT,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?qT():document.addEventListener("DOMContentLoaded",qT,{once:!0});queueMicrotask(Sot);const Tot=vot({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:Awt,getAssetPath:Iwt,setAssetPath:Mot}=Tot;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let KC=!1;const Eot=t=>{KC=!0,Mot(t)};let ZC;function $ot(){KC||Eot(Xs(_i(ZC)))}function r6(t){const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push(t[i]?.());return e.length>0?Promise.all(e):null}ZC="components/assets";const XC=Symbol("widget"),QC=Symbol("widget-test-data"),Aot=[],Iot={},Km=new WeakMap;function tN(t,e){let i=e.children;if(i?.length)for(let l=0;l<i.length;++l)i[l]=tN(t,i[l]);else i=Aot;const s=e.vnodeSelector;if(Zm(s)){const l=e.properties||Iot,f=l.key||s,y={key:f,afterCreate:Pot,afterUpdate:Oot,afterRemoved:eN,parentWidget:t,widgetConstructor:s,widgetProperties:{...l,key:f,children:i}};return{vnodeSelector:s.vnodeSelector,properties:y,children:void 0,text:void 0,domNode:null}}return e}function Pot(t,e,i,{parentWidget:s,widgetConstructor:l,widgetProperties:f}){const y=new l(f);y.container=t,Km.set(t,y),y.afterCreate?.(y,t),s.addHandles(fe((()=>eN(t)))),queueMicrotask((()=>{y[QC].projector.renderNow()}))}function Oot(t,e,i,{widgetProperties:s}){const l=Km.get(t);l&&(l.set(s),l.afterUpdate?.(l,t))}function eN(t){const e=Km.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),Km.delete(t))}function Zm(t){return typeof t=="function"&&t[XC]}const HT=new Set;function kot(t){HT.add(t),t.finally((()=>HT.delete(t)))}function Rot(t){return fe()}var WT;let Cot=0;function iN(t,e){const i=Object.prototype.hasOwnProperty;for(const s in e)i.call(e,s)&&i.call(t,s)&&(t[s]!=null&&e[s]!=null&&typeof t[s]=="object"&&typeof e[s]=="object"?iN(t[s],e[s]):t[s]=e[s]);return t}const Not=wnt({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(s,l,f,y)=>{const v=e?.(s,l,f,y),b=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in f)||b){const S=s[2].toLowerCase()+s.slice(3),A=C=>v?.call(f,C);f.addEventListener(S,A,b);const P=()=>f.removeEventListener(S,A,b),k=y.afterRemoved;y.afterRemoved=C=>{k?.(C),P()}}return v}},handleInterceptedEvent(t,e,i,s){const{eventPhase:l,type:f}=s,y=l===Event.CAPTURING_PHASE;let v=`on${f}${y?"capture":""}`;const b=e.properties;(b&&v in b||(v=`on${f[0].toUpperCase()}${f.slice(1)}${y?"Capture":""}`,b&&v in b))&&(OC(),t.scheduleRender(),b[v].call(b.bind||i,s))}});let G3=!1;var dh;let Xi=(dh=class extends Tl.EsriPromiseMixin(fn.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=Not,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=GE((async()=>{if(this._messageBundleProps?.length){const b=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:S,propertyName:A})=>{if(this.destroyed)return;let P=await OA(S);this.uiStrings&&Object.keys(this.uiStrings)&&(P=iN(yt(P),this.uiStrings)),this[A]=P})));if(this.destroyed)return;for(const S of b)S.status==="rejected"&&At.getLogger(this).error("widget-intl:locale-error",this.declaredClass,S.reason)}await this.loadLocale()})),this.addHandles(Rot()),$ot();const s="esri-widget-uid-"+y1(),l=this.render.bind(this);this._trackingTarget=new v2((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const f=()=>({vnodeSelector:"div",properties:{key:`${s}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),y=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const b=l()??f(),S=b.properties??={};if(S.key??=s,Zm(b.vnodeSelector)){if(!this.visible)return f()}else this.visible?S.styles||(S.styles={}):(S.class="",S.styles={display:"none"}),S.styles.display??="";let A=0;return b.children?.forEach((P=>{Zm(P.vnodeSelector)||(P.properties??={},P.properties.key??=`${this.id}--${A++}`)})),tN(this,b)};this.render=()=>{if(G3)return y();let b=nnt(this)??null;if(b)return b;this._trackingTarget.clear(),G3=!0;try{b=Ma(this._trackingTarget,y)}catch(S){throw At.getLogger(this).error(S),S}finally{G3=!1}return b&&ont(this,b),b};const v=this.beforeFirstRender();v?this._resourcesFetch=v.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),kot(this._resourcesFetch)}normalizeCtorArgs(e,i){const s={...e};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(Q6):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(ze(this._trackingTarget),ze(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,j3(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return m4(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+Cot++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(WT=XC,QC)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(j3(this),this._projector.scheduleRender())}classes(...e){return ant.apply(this,e)}renderNow(){j3(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(zt((()=>this.viewModel),((i,s)=>{s&&this.removeHandles("delegated-events"),i&&d2(i)&&this.addHandles(this._delegatedEventNames.map((l=>Hp(i,l,(f=>{this.emit(l,f)})))),"delegated-events")}),zi)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Q6),this.scheduleRender()};this.addHandles([AA(e),zt((()=>this.uiStrings),e)]),this.addHandles(Rs((()=>this.container),(i=>{this.destroyed||this._attach(i)}),{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},dh[WT]=!0,dh.vnodeSelector="div",dh);_([E()],Xi.prototype,"_readyForTrueRender",void 0),_([E({value:null})],Xi.prototype,"container",null),_([Ui("container")],Xi.prototype,"castContainer",null),_([E()],Xi.prototype,"icon",null),_([E()],Xi.prototype,"id",null),_([E()],Xi.prototype,"label",null),_([E()],Xi.prototype,"renderable",null),_([E()],Xi.prototype,"uiStrings",void 0),_([E()],Xi.prototype,"viewModel",void 0),_([E({value:!0})],Xi.prototype,"visible",null),_([E()],Xi.prototype,"key",void 0),_([E()],Xi.prototype,"children",void 0),_([E()],Xi.prototype,"afterCreate",void 0),_([E()],Xi.prototype,"afterUpdate",void 0),_([E()],Xi.prototype,"afterRemoved",void 0),Xi=_([Y("esri.widgets.Widget")],Xi);const sv=Xi;var JT,YT,KT,ZT,XT,QT,tM,eM,iM,rM,sM,nM,oM,aM,lM;(function(t){t.U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet"})(JT||(JT={})),(function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.Basis="Basis",t.Etc1="Etc1",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"})(YT||(YT={})),(function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.FeatureVariable="FeatureVariable",t.NotSet="NotSet"})(KT||(KT={})),(function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"})(ZT||(ZT={})),(function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"})(XT||(XT={})),(function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"})(QT||(QT={})),(function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"})(tM||(tM={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"})(eM||(eM={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"})(iM||(iM={})),(function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"})(rM||(rM={})),(function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"})(sM||(sM={})),(function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"})(nM||(nM={})),(function(t){t.Pbr="Pbr",t.Unlit="Unlit"})(oM||(oM={})),(function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.Ga8="Ga8",t.Etc1="Etc1",t.Etc2="Etc2",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.NotSet="NotSet"})(aM||(aM={})),(function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"})(lM||(lM={}));const Lot=new Map;function Dot(t){return Lot.get(t)}function uM(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function jot(t,e){return t.length!==e.length||t.some(((i,s)=>i.text!==e[s].text))}function qf(t,e,i){!i||!e||t.find((s=>s.layerView===e&&s.text===i))||t.push({text:i,layerView:e})}function Fot(t){return t.type==="bing-maps"}const Uo=[];let pc=class extends Ot{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new kt,this.view=null,this._allLayerViewsChange=i=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const s=this.view?.allLayerViews;s&&(this.addHandles(s.map((l=>zt((()=>[l.suspended,l.layer?.attributionVisible]),(()=>this._updateAttributionItems())))).toArray(),"suspension"),s.forEach((l=>{l.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(l.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),i?.removed&&i.removed.forEach((l=>{this._pendingAttributions.delete(l),this._fetchedAttributionData.delete(l)})),this._updateAttributionItems()},this.addHandles([$a((()=>this.view?.allLayerViews),"change",(i=>this._allLayerViewsChange(i)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Rs((()=>this.view?.stationary===!0),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;if(Uo.length=0,!e||!i)return void this._clear();i.forEach((l=>{if(l.suspended||!l.layer?.attributionVisible)return;const f=l.layer;if(uM(f,"user"))return void qf(Uo,l,f.copyright);if(f.hasAttributionData){if(this._fetchedAttributionData.has(l)){const v=this._fetchedAttributionData.get(l);return void(v?qf(Uo,l,this._getDynamicAttribution(v,e,f)):uM(f)&&qf(Uo,l,f.copyright))}return void this._fetchAttributionData(l)}const y="portalItem"in f?f.portalItem?.accessInformation:void 0;qf(Uo,l,y||f.copyright)}));const s=i.find((l=>l.layer?.type==="integrated-mesh-3dtiles"));if(this.view&&s){const l=Dot(this.view);if(l){const f=l.getAttributionText();for(let y=0;y<f.length;++y)qf(Uo,s,f[y])}}jot(this.items,Uo)&&(this.items.removeAll(),this.items.addMany(Uo)),Uo.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await k_(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const s=i.ok?this._createContributionIndex(i.value,Fot(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,s)}this._updateAttributionItems()}_createContributionIndex(e,i){const s=e.contributors,l={};if(!s)return l;for(let f=0;f<s.length;f++){const y=s[f],v=y.coverageAreas;if(!v)return;for(const b of v){const S=b.bbox,A=b.zoomMin-(i&&b.zoomMin?1:0),P=b.zoomMax-(i&&b.zoomMax?1:0),k=new Zt({xmin:S[1],ymin:S[0],xmax:S[3],ymax:S[2],spatialReference:Et.WGS84}),C={extent:th(k),attribution:y.attribution||"",score:b.score!=null?b.score:100,id:f};for(let L=A;L<=P;L++)l[L]??=[],l[L].push(C)}}return l.maxKey=Math.max.apply(null,Object.keys(l)),l}_getDynamicAttribution(e,i,s){const{extent:l,scale:f}=i;let y=s.tileInfo?.scaleToZoom(f)??0;if(y=Math.min(e.maxKey??0,Math.round(y)),!l||y==null||y<=-1)return"";const v=e[y],b=M2(l.center.clone().normalize(),Et.WebMercator),S=new Set;return v?v.filter((A=>{const P=A.id,k=!S.has(P)&&b&&A.extent&&u1(A.extent,b);return k&&S.add(P),k})).sort(((A,P)=>P.score-A.score||A.objectId-P.objectId)).map((A=>A.attribution)).join(", "):""}};_([E({readOnly:!0,type:kt})],pc.prototype,"items",void 0),_([E({readOnly:!0})],pc.prototype,"state",null),_([E()],pc.prototype,"view",void 0),pc=_([Y("esri.widgets.Attribution.AttributionViewModel")],pc);const rN=pc,xo={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function zot(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Got(t[e])}}}function Uot(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Got(t){return function(e,...i){Uot(e)?unt(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function nv(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Bot=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},sN=function(t,e){for(var i=0,s=t.length;i<s;i++){var l=t[i];Array.isArray(l)?sN(l,e):l!=null&&l!==!1&&(l.hasOwnProperty("vnodeSelector")||(l=Bot(l)),e.push(l))}},qot=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var l=[];return sN(i,l),{vnodeSelector:t,properties:e||void 0,children:l,text:void 0,domNode:null}};function us(t,e,...i){return typeof t!="function"||Zm(t)?qot(t,e??null,...i):t(e,...i)}function Owt(...t){return t}const Kh="esri-attribution",Zh={base:Kh,poweredBy:`${Kh}__powered-by`,sources:`${Kh}__sources`,open:`${Kh}--open`,sourcesOpen:`${Kh}__sources--open`,link:`${Kh}__link`};let Nr=class extends sv{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((s=>s.forEach((({target:l})=>this._checkSourceTextOverflow(l))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new rN}initialize(){this.addHandles($a((()=>this.viewModel?.items),"change",(()=>this.scheduleRender())))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,i)=>(e.includes(i.text)||e.push(i.text),e)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Zh.open]:this._isOpen};return us("div",{bind:this,class:this.classes(Zh.base,xo.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return us("div",{class:Zh.poweredBy},"Powered by"," ",us("a",{class:Zh.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,s=i?0:void 0,{attributionText:l}=this,f={[Zh.sourcesOpen]:e,[xo.interactive]:i};return us("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Zh.sources,f),innerHTML:l,tabIndex:s})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:s,clientWidth:l,scrollWidth:f}=e,y=f>l,v=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,v&&(i=!0),this._isOpen){const b=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,b&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};_([E()],Nr.prototype,"_isOpen",void 0),_([E()],Nr.prototype,"_isInteractive",null),_([E()],Nr.prototype,"_attributionTextOverflowed",void 0),_([E()],Nr.prototype,"_prevSourceNodeHeight",void 0),_([E({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Nr.prototype,"attributionText",null),_([E()],Nr.prototype,"icon",null),_([E()],Nr.prototype,"itemDelimiter",void 0),_([E()],Nr.prototype,"label",null),_([E(),nv("esri/widgets/Attribution/t9n/Attribution")],Nr.prototype,"messages",void 0),_([E()],Nr.prototype,"view",null),_([E({type:rN})],Nr.prototype,"viewModel",void 0),_([zot()],Nr.prototype,"_toggleState",null),Nr=_([Y("esri.widgets.Attribution")],Nr);const Vot=Nr;function Hot(){const t=rt("mapview-essential-goto-duration");return t==null?t:t}function Wot(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function Jot(t,e,i){return t.goTo(e,i)}const Yot=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return FE(s),this.goToOverride?this.goToOverride(s,i):Jot(s,i.target,i.options)}};return _([E()],e.prototype,"goToOverride",void 0),_([E()],e.prototype,"view",void 0),e=_([Y("esri.widgets.support.GoTo")],e),e};let Cu=class extends Yot(Ot){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Pr)}destroy(){this.view=null}get canShowNorth(){return Wot(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Hot()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?zt((()=>e?.rotation),this._updateForRotation,Pr):zt((()=>e?.camera),this._updateForCamera,Pr))}_watchForView(e){this.addHandles(zt((()=>this.view),this._updateRotationWatcher,e))}};_([E({readOnly:!0})],Cu.prototype,"canShowNorth",null),_([E({readOnly:!0})],Cu.prototype,"orientation",void 0),_([E({readOnly:!0})],Cu.prototype,"state",null),_([E()],Cu.prototype,"view",void 0),Cu=_([Y("esri.widgets.Compass.CompassViewModel")],Cu);const nN=Cu,hM="esri-compass",cM={base:hM,iconContainer:`${hM}__icon-container`};let ta=class extends sv{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new nN,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=s=>({transform:`rotateZ(${s.z}deg)`})}loadDependencies(){return r6({button:()=>mt(()=>import("./index-C4yJ4VoZ.js"),__vite__mapDeps([333,334,335,336,337,1,2,3,4,338,339,340,341,342,343,344,345,346])),icon:()=>mt(()=>import("./index-E0QGyxwP.js").then(e=>e.i),__vite__mapDeps([338,339,340]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:s}=this;return us("div",{class:this.classes(cM.base,xo.widget)},us("calcite-button",{class:xo.widgetButton,disabled:i==="disabled",kind:"neutral",label:s.reset,onclick:this._reset,round:!0,scale:"s",title:s.reset},us("div",{"aria-hidden":"true",class:cM.iconContainer,title:s.reset},us("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};_([E()],ta.prototype,"goToOverride",null),_([E()],ta.prototype,"icon",null),_([E()],ta.prototype,"label",null),_([E(),nv("esri/widgets/Compass/t9n/Compass")],ta.prototype,"messages",void 0),_([E()],ta.prototype,"view",null),_([E({type:nN})],ta.prototype,"viewModel",void 0),ta=_([Y("esri.widgets.Compass")],ta);const Kot=ta,pM="esri-navigation-toggle",fM={base:pM,isLayoutHorizontal:`${pM}--horizontal`};let fc=class extends Ot{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||Kj(At.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...s}=e;return s}initialize(){this.addHandles(Rs((()=>this.view?.navigation?.actionMap),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};_([E({readOnly:!0})],fc.prototype,"state",null),_([E()],fc.prototype,"_navigationMode",void 0),_([E()],fc.prototype,"view",void 0),fc=_([Y("esri.widgets.NavigationToggle.NavigationToggleViewModel")],fc);const oN=fc;let ea=class extends sv{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new oN({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const s=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;hnt(s),this.toggle()},e?.isDefaultUI||Yj(At.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...s}=e;return s}loadDependencies(){return r6({button:()=>mt(()=>import("./index-C4yJ4VoZ.js"),__vite__mapDeps([333,334,335,336,337,1,2,3,4,338,339,340,341,342,343,344,345,346]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",s=this.messages.toggle;return us("div",{class:this.classes(fM.base,xo.widget,{[fM.isLayoutHorizontal]:this.layout==="horizontal"})},us("calcite-button",{afterCreate:l=>{this._panButton=l},appearance:i?"outline-fill":"solid",class:xo.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:s,onclick:this._toggle,tabIndex:i?void 0:-1,title:s}),us("calcite-button",{afterCreate:l=>{this._rotateButton=l},appearance:i?"solid":"outline-fill",class:xo.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:s,onclick:this._toggle,tabIndex:i?-1:void 0,title:s}))}};_([E()],ea.prototype,"icon",null),_([E()],ea.prototype,"label",null),_([E({value:"vertical"})],ea.prototype,"layout",null),_([E(),nv("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ea.prototype,"messages",void 0),_([E()],ea.prototype,"view",null),_([E({type:oN})],ea.prototype,"viewModel",void 0),ea=_([Y("esri.widgets.NavigationToggle")],ea);const Zot=ea;let Nu=class extends Ot{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const s=e.constraints?.effectiveMinScale;return s===0||this._scale<s}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};_([E({readOnly:!0})],Nu.prototype,"canZoomIn",null),_([E({readOnly:!0})],Nu.prototype,"canZoomOut",null),_([E()],Nu.prototype,"view",void 0),_([E()],Nu.prototype,"_scale",null),Nu=_([Y("esri.widgets.Zoom.ZoomConditions2D")],Nu);const Xot=Nu;let dc=class extends Ot{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};_([E({readOnly:!0})],dc.prototype,"canZoomIn",null),_([E({readOnly:!0})],dc.prototype,"canZoomOut",null),_([E()],dc.prototype,"view",void 0),dc=_([Y("esri.widgets.Zoom.ZoomConditions3D")],dc);const Qot=dc;let sl=class extends Ot{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Xot({view:e}):e.type==="3d"&&(this._zoomConditions=new Qot({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():Sd(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():Sd(e.goTo({zoomFactor:.5})))}};_([E()],sl.prototype,"_zoomConditions",void 0),_([E()],sl.prototype,"canZoomIn",null),_([E()],sl.prototype,"canZoomOut",null),_([E({readOnly:!0})],sl.prototype,"state",null),_([E()],sl.prototype,"view",null),sl=_([Y("esri.widgets.Zoom.ZoomViewModel")],sl);const aN=sl,dM={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let ia=class extends sv{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new aN,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return r6({button:()=>mt(()=>import("./index-C4yJ4VoZ.js"),__vite__mapDeps([333,334,335,336,337,1,2,3,4,338,339,340,341,342,343,344,345,346]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[dM.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:s}=this.viewModel,{zoomIn:l,zoomOut:f}=this.messages;return us("div",{class:this.classes(dM.base,xo.widget,e)},us("calcite-button",{class:xo.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:l,onclick:this.zoomIn,title:l}),us("calcite-button",{class:xo.widgetButton,disabled:!s,iconStart:"minus",kind:"neutral",label:f,onclick:this.zoomOut,title:f}))}};_([E()],ia.prototype,"icon",null),_([E()],ia.prototype,"label",null),_([E({value:"vertical"})],ia.prototype,"layout",null),_([E(),nv("esri/widgets/Zoom/t9n/Zoom")],ia.prototype,"messages",void 0),_([E()],ia.prototype,"view",null),_([E({type:aN})],ia.prototype,"viewModel",void 0),ia=_([Y("esri.widgets.Zoom")],ia);const tat=ia;function eat(t){return t?.view!==void 0}let Og=class extends fnt{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach((s=>{const l=this._find(s),f=l?.widget;eat(f)&&(f.view=i)}))},this._componentsWatcher=(i,s)=>{this._removeComponents(s),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([zt((()=>this.components),this._componentsWatcher,Pr),zt((()=>this.view),this._updateViewAwareWidgets,Pr)])}_add(e,i,s,l,f){let y=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;y=this._createComponent(e)}super._add(y,i,s,l,f)}_removeComponents(e){e.forEach((i=>{const s=this._find(i);s&&(this.remove(s),s.destroy())}))}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach((i=>this.add(this._createComponent(i),this._defaultPositionLookup[i])))}_createComponent(e){const i=this._createWidget(e);return new Ag({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new Vot({view:i});case"compass":return new Kot({view:i});case"navigation-toggle":return new Zot({view:i,isDefaultUI:!0});case"zoom":return new tat({view:i})}}};_([E()],Og.prototype,"components",void 0),Og=_([Y("esri.views.ui.DefaultUI")],Og);const lN=Og;let kg=class extends lN{constructor(e){super(e),this.components=["attribution","zoom"]}};_([E()],kg.prototype,"components",void 0),kg=_([Y("esri.views.ui.2d.DefaultUI2D")],kg);const uN=kg;let iat=class C9{constructor(e,i,s=""){this.major=e,this.minor=i,this._context=s}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new ct(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new C9(this.major,this.minor,this._context)}static parse(e,i=""){const[s,l]=e.split("."),f=/^\s*\d+\s*$/;if(!s?.match||!f.test(s))throw new ct((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!l?.match||!f.test(l))throw new ct((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const y=parseInt(s,10),v=parseInt(l,10);return new C9(y,v,i)}},rat=class extends iat{constructor(e,i){super(e,i,"webmap")}};function Rg(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new rat(2,34);var N9;let Cg=N9=class extends It{constructor(t){super(t),this.color=new ie([0,0,0,1])}clone(){return new N9(yt({color:this.color}))}};_([E({type:ie,json:{write:!0}})],Cg.prototype,"color",void 0),Cg=N9=_([Y("esri.webmap.background.ColorBackground")],Cg);const sat=Cg;let hN,cN,pN,fN,dN,yN,gN;async function nat(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:s,MagnifierView2D:l,GridView2D:f,Stage:y}]=await Promise.all([mt(()=>import("./webglDeps-gZHk6Vdq.js"),__vite__mapDeps([249,250,15,251,252,253,1,2,3,4])),mt(()=>import("./mapViewDeps-yEaSE7Hm.js"),__vite__mapDeps([254,1,2,3,143,110,111,41,15,112,108,106,107,113,114,115,102,116,64,255,120,256,251,250,252,190,157,103,257,109,75,258,101,133,259,164,163,45,46,117,7,4,260,121,122,261,57,51,104,49,50,262,30,162,249,253,263,129,264,265,266,186,184,155,267,87,100,105,99,43,37,52,268,269,119,270,124,271,125,97,272,273,274,275,183,215,276]))]);cN=t,pN=e,fN=i,dN=s,yN=l,gN=f,hN=y}var pp;let he=(pp=class extends Yit(jet(FJ(lK(YY(bQ))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new mo({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new W2({actionMap:new R4({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new kt,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new $C,this.type="2d",this.view2dType=null,this.ui=new uN,this.test={takeScreenshot:async i=>Fst(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},LJ()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=ze(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Hrt(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,i=this.spatialReference;return{lods:e?.spatialReference?.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:i,center:s,viewpoint:l,extent:f}=this;let y=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!f&&(i?.effectiveLODs||(y=-1),(!s||e===0&&y===-1)&&(l?.targetGeometry==null||l.targetGeometry.type!=="extent"&&!l.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,s=this.spatialReference;return LP(i.spatialReference,s)}get background(){return Rg(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get highlightOptions(){return Sst(this)}set highlightOptions(e){Tst(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resolution(){return this.stateManager.resolution??0}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some((s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0))||e);if(rt("esri-2d-log-updating")){const s=this.allLayerViews.reduce(((l,f)=>({...l,[`${f.layer.id}(${f.layer.type})`]:!f.destroyed&&!("layerViews"in f)&&f.updating})),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(s)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Fe({rings:[e.map((i=>[i[0],i[1]]))],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,i){return Mst(this,e,i)}async takeScreenshot(e){return jst(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return Rg(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Rg(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return zS.hasLayerViewModule(e)}importLayerView(e){return zS.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(At.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const i=this.toMap(e),s=await this.hitTest(e),l=this.allLayerViews.toArray().filter((S=>S.clips.every((A=>gC(this,A,e,i))))).reverse(),f=new globalThis.Map(l.map((S=>[S.layer.uid,S]))),y=[];let v=0,b=0;for(;v<s.results.length||b<l.length;){const S=s.results.at(v);if(S&&S.type!=="graphic"){++v;continue}const A=f.get((S?.layer??S?.graphic.layer)?.uid);if((!S||A)&&b<l.length&&l.at(b)!==A){const P=l.at(b);"fetchPopupFeaturesAtLocation"in P&&y.push({mapPoint:i,layerView:P}),++b}else S&&(y.push({graphic:S.graphic,layerView:A}),++v)}return{hits:y,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Kst(this.type);if(rt("safari")&&rt("safari")<9&&(e=new ct("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:rt("safari")})),e!=null){At.getLogger(this).warn("#validate()",e.message);const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const s=document.createElement("div");s.innerHTML="Unable to display map. WebGL2 support is required.",s.setAttribute("style","font-size: 24px; font-weight: bold;");const l=document.createElement("div");l.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",l.setAttribute("style","font-size: 18px;");const f=document.createElement("a");throw f.innerHTML="https://esriurl.com/systemRequirements",f.target="_blank",f.setAttribute("style","font-size: 18px;"),f.href="https://esriurl.com/systemRequirements",i.appendChild(s),i.appendChild(l),i.appendChild(f),this.surface.appendChild(i),e}}loadAsyncDependencies(){return nat()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:s,padding:l,size:f}=this;if(!e)return null;const y=s&&"initialViewProperties"in s?s.initialViewProperties:void 0,v=this.stateManager.getUserStartupOptions(this.size),b=y?.viewpoint,S=b?.targetGeometry?.extent??i,A=S?.center,P=b?.rotation??0,k=b?.scale||S&&K2(S,[f[0]-l.left-l.right,f[1]-l.top-l.bottom]),C=v.center??A,L=v.rotation??P,F=v.scale??k;return C&&F?new an({targetGeometry:C,scale:F,rotation:L}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new Drt(this.surface),s=new hN(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=s,this._magnifierView=new yN,this._magnifierView.magnifier=this.magnifier,this._gridView=new gN;const l=new fN({view:this});this._set("labelManager",l);const f=new $rt({view:this});this._set("animationManager",f);const y=new dN({view:this,animationManager:f});this._set("mapViewNavigation",y),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),s.on("webgl-error",(b=>this.fatalError=b.error)),zt((()=>this.stationary),(b=>s.stationary=b),zi),zt((()=>this.background),(b=>{s.backgroundColor=b?.color,this._magnifierView.backgroundColor=b?.color}),zi),zt((()=>this.magnifier),(b=>this._magnifierView.magnifier=b),zi),zt((()=>this.grid),(b=>this._gridView.grid=b),zi),zt((()=>this.renderingOptions),(b=>s.renderingOptions=b),zi),zt((()=>this.highlights.items.map((b=>({name:b.name,options:{fillColor:b.color,haloColor:b.haloColor,fillOpacity:b.fillOpacity,haloOpacity:b.haloOpacity,haloWidth:b.haloWidth,haloBlur:b.haloBlur}})))),(()=>{s.highlightGradient=_st(s.highlightGradient,this.highlights.items)}),zi),zt((()=>this.state.id),(()=>s.state=this.state),zi)],"map-view"),this._updateStageChildren();const v=this._resolveWhenReady;this._resolveWhenReady=[],v.forEach((b=>b(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((i=>{this.stage.addChild(i.container)}));const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new Rrt(Vi.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new cN({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new pN(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:i,padding:s,size:l,stage:f}=this;return{allLayerViews:i,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:s,size:l,stage:f}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},pp.type="2d",pp);_([E({constructOnly:!0})],he.prototype,"deactivatedWebGLExtensions",void 0),_([E({constructOnly:!0})],he.prototype,"debugWebGLExtensions",void 0),_([E({readOnly:!0})],he.prototype,"featuresTilingScheme",void 0),_([E({readOnly:!0})],he.prototype,"graphicsTileStore",null),_([E()],he.prototype,"graphicsView",void 0),_([E()],he.prototype,"constraintsInfo",null),_([E()],he.prototype,"initialExtentRequired",null),_([E()],he.prototype,"labelManager",void 0),_([E({type:W2,nonNullable:!0})],he.prototype,"navigation",void 0),_([E({constructOnly:!0})],he.prototype,"renderCanvas",void 0),_([E()],he.prototype,"renderingOptions",void 0),_([E({constructOnly:!0})],he.prototype,"supersampleScreenshotsEnabled",void 0),_([E({readOnly:!0})],he.prototype,"supportsGround",void 0),_([E()],he.prototype,"defaultsFromMapSettings",null),_([E({readOnly:!0})],he.prototype,"typeSpecificPreconditionsReady",null),_([E({type:sat})],he.prototype,"background",null),_([E()],he.prototype,"center",null),_([E({type:kt})],he.prototype,"floors",void 0),_([E()],he.prototype,"grid",void 0),_([E({type:Dl})],he.prototype,"highlightOptions",null),_([E()],he.prototype,"map",void 0),_([E()],he.prototype,"padding",null),_([E({readOnly:!0})],he.prototype,"rendering",null),_([E({readOnly:!0})],he.prototype,"resolution",null),_([E()],he.prototype,"scale",null),_([E({constructOnly:!0})],he.prototype,"spatialReferenceLocked",void 0),_([E({readOnly:!0})],he.prototype,"tileInfo",null),_([E({type:$C,readOnly:!0})],he.prototype,"timeline",void 0),_([E({readOnly:!0})],he.prototype,"type",void 0),_([E({readOnly:!0})],he.prototype,"updating",null),_([E({readOnly:!0})],he.prototype,"view2dType",void 0),_([E({readOnly:!0})],he.prototype,"visibleArea",null),_([E()],he.prototype,"zoom",null),_([E({readOnly:!0})],he.prototype,"navigating",null),_([E(),Ui((t=>t instanceof lN?t:Kp(uN,t)))],he.prototype,"ui",void 0),he=_([Y("esri.views.View2D")],he);const oat=he;let Ng=class extends oat{constructor(e){super(e),this.view2dType="map"}};_([E({readOnly:!0})],Ng.prototype,"view2dType",void 0),Ng=_([Y("esri.views.MapView")],Ng);const aat=Ng;let lat=class mN{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(_w),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new mN,s=this._originStores[se.DEFAULTS];s&&s.forEach(((l,f)=>{i.set(f,yt(l),se.DEFAULTS)}));for(let l=se.SERVICE;l<_w;l++){const f=this._originStores[l];f&&f.forEach(((y,v)=>{e&&e.has(v)||i.set(v,yt(y),l)}))}return i}get(e,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,s=se.USER){let l=this._originStores[s];if(l||(l=new Map,this._originStores[s]=l),l.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=s){const f=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,s),f!==i}return!1}delete(e,i=se.USER){const s=this._originStores[i];if(!s)return;const l=s.get(e);if(s.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let f=i-1;f>=0;f--){const y=this._originStores[f];if(y&&y.has(e)){this._values.set(e,y.get(e)),this._propertyOriginMap.set(e,f);break}}}return l}has(e,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const s=this._originStores[i],l=s?.get(e),f=this._values.get(e);return this._values.set(e,l),this._propertyOriginMap.set(e,i),f!==l}originOf(e){return this._propertyOriginMap.get(e)||se.DEFAULTS}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const vN=t=>{let e=class extends t{constructor(...i){super(...i);const s=cs(this),l=s.store,f=new lat;s.store=f,B$(s,l,f)}read(i,s){V$(this,i,s)}getAtOrigin(i,s){const l=B3(this),f=wa(s);if(typeof i=="string")return l.get(i,f);const y={};return i.forEach((v=>{y[v]=l.get(v,f)})),y}originOf(i){return Jg(this.originIdOf(i))}originIdOf(i){return B3(this).originOf(i)}revert(i,s){const l=B3(this),f=wa(s),y=cs(this);let v;v=typeof i=="string"?i==="*"?l.keys(f):[i]:i,v.forEach((b=>{y.invalidate(b),l.revert(b,f),y.commit(b)}))}};return e=_([Y("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function B3(t){return cs(t).store}let yM=class extends vN(Ot){};yM=_([Y("esri.core.ReadOnlyMultiOriginJSONSupport")],yM);const uat=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,s="user"){cs(this).clearOrigin(i,wa(s))}write(i,s){return W$(this,i=i||{},s),i}setAtOrigin(i,s,l){cs(this).setAtOrigin(i,s,wa(l))}removeOrigin(i){const s=gM(this),l=wa(i),f=s.keys(l);for(const y of f)s.originOf(y)===l&&s.set(y,s.get(y,l),se.USER)}updateOrigin(i,s){const l=gM(this),f=wa(s),y=Ln(this,i);for(let v=f+1;v<_w;++v)l.delete(i,v);l.set(i,y,f)}toJSON(i){return this.write({},i)}};return e=_([Y("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function gM(t){return cs(t).store}const wN=t=>{let e=class extends uat(vN(t)){constructor(...i){super(...i)}};return e=_([Y("esri.core.MultiOriginJSONSupport")],e),e};let mM=class extends wN(Ot){};mM=_([Y("esri.core.MultiOriginJSONSupport")],mM);const cr=(t=>t)(["operational-layers","basemap","ground"]);let vM=class extends SyntaxError{constructor(e,i,s,l){super(e),this.expected=i,this.found=s,this.location=l,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let s=null;const l=e.find((b=>b.source===this.location.source));l&&(s=l.text.split(/\r\n|\n|\r/g));const f=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(f):f,v=this.location.source+":"+y.line+":"+y.column;if(s){const b=this.location.end,S="".padEnd(y.line.toString().length," "),A=s[f.line-1],P=(f.line===b.line?b.column:A.length+1)-f.column||1;i+=`
 --> `+v+`
`+S+` |
`+y.line+" | "+A+`
`+S+" | "+"".padEnd(f.column-1," ")+"".padEnd(P,"^")}else i+=`
 at `+v}return i}static buildMessage(e,i){function s(k){return k.codePointAt(0).toString(16).toUpperCase()}const l=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function f(k){return l?k.replace(l,(C=>"\\u{"+s(C)+"}")):k}function y(k){return f(k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(C=>"\\x0"+s(C))).replace(/[\x10-\x1F\x7F-\x9F]/g,(C=>"\\x"+s(C))))}function v(k){return f(k.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(C=>"\\x0"+s(C))).replace(/[\x10-\x1F\x7F-\x9F]/g,(C=>"\\x"+s(C))))}const b={literal:k=>'"'+y(k.text)+'"',class(k){const C=k.parts.map((L=>Array.isArray(L)?v(L[0])+"-"+v(L[1]):v(L)));return"["+(k.inverted?"^":"")+C.join("")+"]"+(k.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:k=>k.description};function S(k){return b[k.type](k)}function A(k){const C=k.map(S);if(C.sort(),C.length>0){let L=1;for(let F=1;F<C.length;F++)C[F-1]!==C[F]&&(C[L]=C[F],L++);C.length=L}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function P(k){return k?'"'+y(k)+'"':"end of input"}return"Expected "+A(e)+" but "+P(i)+" found."}};function hat(t,e){const i={},s=(e=e!==void 0?e:{}).grammarSource,l={start:Ut};let f=Ut;const y="none",v=")",b=",",S="(",A="%",P="px",k="cm",C="mm",L="in",F="pt",q="pc",H="deg",J="rad",Q="grad",tt="turn",et="#",nt=".",vt="e",Tt=/^[ \t\n\r]/,St=/^[a-z\-]/,pt=/^[0-9a-fA-F]/,ht=/^[+\-]/,_t=/^[0-9]/,gt=dt("none"),at=Z("none",!1),Lt=Z(")",!1),Yt=Z(",",!1),Dt=it([" ","	",`
`,"\r"],!1,!1,!1),Jt=dt("function"),ui=Z("(",!1),si=dt("identifier"),Cr=it([["a","z"],"-"],!1,!1,!1),Yn=dt("percentage"),su=Z("%",!1),gf=dt("length"),mf=Z("px",!1),xv=Z("cm",!1),Sv=Z("mm",!1),Tv=Z("in",!1),Mv=Z("pt",!1),Ev=Z("pc",!1),$v=dt("angle"),k1=Z("deg",!1),Av=Z("rad",!1),Iv=Z("grad",!1),Pv=Z("turn",!1),ki=dt("number"),B=dt("color"),pr=Z("#",!1),vf=it([["0","9"],["a","f"],["A","F"]],!1,!1,!1),ce=it(["+","-"],!1,!1,!1),Me=it([["0","9"]],!1,!1,!1),mn=Z(".",!1),Kn=Z("e",!1);function Zn(){return[]}function Co(K,lt){return{type:"function",name:K,parameters:lt||[]}}function R1(K,lt){return lt.length>0?Dh(K,lt,3):[K]}function C1(K){return{type:"quantity",value:K.value,unit:K.unit}}function No(K){return{type:"color",colorType:K.type,value:K.value}}function xt(K){return K}function Ca(){return V()}function h(K){return{value:K,unit:"%"}}function O(K){return{value:K,unit:"px"}}function m(K){return{value:K,unit:"cm"}}function u(K){return{value:K,unit:"mm"}}function o(K){return{value:K,unit:"in"}}function r(K){return{value:K,unit:"pt"}}function n(K){return{value:K,unit:"pc"}}function a(K){return{value:K,unit:"deg"}}function c(K){return{value:K,unit:"rad"}}function p(K){return{value:K,unit:"grad"}}function d(K){return{value:K,unit:"turn"}}function g(K){return{value:K,unit:null}}function w(){return{type:"hex",value:V()}}function x(K){return{type:"function",value:K}}function M(){return{type:"named",value:V()}}function $(){return parseFloat(V())}let I=0|e.peg$currPos,R=I;const N=[{line:1,column:1}];let j,z=I,D=e.peg$maxFailExpected||[],U=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in l))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');f=l[e.startRule]}function V(){return t.substring(R,I)}function W(K=I){const lt=t.codePointAt(K);return lt===void 0?"":String.fromCodePoint(lt)}function Z(K,lt){return{type:"literal",text:K,ignoreCase:lt}}function it(K,lt,bt,Gt){return{type:"class",parts:K,inverted:lt,ignoreCase:bt,unicode:Gt}}function ot(){return{type:"end"}}function dt(K){return{type:"other",description:K}}function ft(K){let lt,bt=N[K];if(bt)return bt;if(K>=N.length)lt=N.length-1;else for(lt=K;!N[--lt];);for(bt=N[lt],bt={line:bt.line,column:bt.column};lt<K;)t.charCodeAt(lt)===10?(bt.line++,bt.column=1):bt.column++,lt++;return N[K]=bt,bt}function $t(K,lt,bt){const Gt=ft(K),$e=ft(lt);return{source:s,start:{offset:K,line:Gt.line,column:Gt.column},end:{offset:lt,line:$e.line,column:$e.column}}}function ut(K){I<z||(I>z&&(z=I,D=[]),D.push(K))}function qt(K,lt,bt){return new vM(vM.buildMessage(K,lt),K,lt,bt)}function Ut(){let K;return K=le(),K===i&&(K=Ee()),K}function le(){let K,lt;return U++,K=I,Vt(),t.substr(I,4)===y?(lt=y,I+=4):(lt=i,U===0&&ut(at)),lt!==i?(Vt(),R=K,K=Zn()):(I=K,K=i),U--,K===i&&U===0&&ut(gt),K}function Ee(){let K,lt;if(K=[],lt=hi(),lt!==i)for(;lt!==i;)K.push(lt),lt=hi();else K=i;return K}function hi(){let K,lt,bt,Gt;return K=I,Vt(),lt=te(),lt!==i?(Vt(),bt=Ne(),bt===i&&(bt=null),Vt(),t.charCodeAt(I)===41?(Gt=v,I++):(Gt=i,U===0&&ut(Lt)),Gt!==i?(Vt(),R=K,K=Co(lt,bt)):(I=K,K=i)):(I=K,K=i),K}function Ne(){let K,lt,bt,Gt,$e,gi,qi,fr;if(K=I,lt=ue(),lt!==i){for(bt=[],Gt=I,$e=Vt(),t.charCodeAt(I)===44?(gi=b,I++):(gi=i,U===0&&ut(Yt)),gi===i&&(gi=null),qi=Vt(),fr=ue(),fr!==i?($e=[$e,gi,qi,fr],Gt=$e):(I=Gt,Gt=i);Gt!==i;)bt.push(Gt),Gt=I,$e=Vt(),t.charCodeAt(I)===44?(gi=b,I++):(gi=i,U===0&&ut(Yt)),gi===i&&(gi=null),qi=Vt(),fr=ue(),fr!==i?($e=[$e,gi,qi,fr],Gt=$e):(I=Gt,Gt=i);R=K,K=R1(lt,bt)}else I=K,K=i;return K}function ue(){let K,lt;return K=I,lt=De(),lt===i&&(lt=ds(),lt===i&&(lt=oe(),lt===i&&(lt=nr()))),lt!==i&&(R=K,lt=C1(lt)),K=lt,K===i&&(K=I,lt=ve(),lt!==i&&(R=K,lt=No(lt)),K=lt),K}function Vt(){let K,lt;for(U++,K=[],lt=t.charAt(I),Tt.test(lt)?I++:(lt=i,U===0&&ut(Dt));lt!==i;)K.push(lt),lt=t.charAt(I),Tt.test(lt)?I++:(lt=i,U===0&&ut(Dt));return U--,K}function te(){let K,lt,bt;return U++,K=I,lt=He(),lt!==i?(t.charCodeAt(I)===40?(bt=S,I++):(bt=i,U===0&&ut(ui)),bt!==i?(R=K,K=lt):(I=K,K=i)):(I=K,K=i),U--,K===i&&(lt=i,U===0&&ut(Jt)),K}function He(){let K,lt,bt;if(U++,K=I,lt=[],bt=t.charAt(I),St.test(bt)?I++:(bt=i,U===0&&ut(Cr)),bt!==i)for(;bt!==i;)lt.push(bt),bt=t.charAt(I),St.test(bt)?I++:(bt=i,U===0&&ut(Cr));else lt=i;return lt!==i&&(R=K,lt=Ca()),K=lt,U--,K===i&&(lt=i,U===0&&ut(si)),K}function De(){let K,lt,bt;return U++,K=I,Vt(),lt=or(),lt!==i?(t.charCodeAt(I)===37?(bt=A,I++):(bt=i,U===0&&ut(su)),bt!==i?(R=K,K=h(lt)):(I=K,K=i)):(I=K,K=i),U--,K===i&&U===0&&ut(Yn),K}function ds(){let K,lt,bt;return U++,K=I,Vt(),lt=or(),lt!==i?(t.substr(I,2)===P?(bt=P,I+=2):(bt=i,U===0&&ut(mf)),bt!==i?(R=K,K=O(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,Vt(),lt=or(),lt!==i?(t.substr(I,2)===k?(bt=k,I+=2):(bt=i,U===0&&ut(xv)),bt!==i?(R=K,K=m(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,Vt(),lt=or(),lt!==i?(t.substr(I,2)===C?(bt=C,I+=2):(bt=i,U===0&&ut(Sv)),bt!==i?(R=K,K=u(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,Vt(),lt=or(),lt!==i?(t.substr(I,2)===L?(bt=L,I+=2):(bt=i,U===0&&ut(Tv)),bt!==i?(R=K,K=o(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,Vt(),lt=or(),lt!==i?(t.substr(I,2)===F?(bt=F,I+=2):(bt=i,U===0&&ut(Mv)),bt!==i?(R=K,K=r(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,Vt(),lt=or(),lt!==i?(t.substr(I,2)===q?(bt=q,I+=2):(bt=i,U===0&&ut(Ev)),bt!==i?(R=K,K=n(lt)):(I=K,K=i)):(I=K,K=i)))))),U--,K===i&&U===0&&ut(gf),K}function oe(){let K,lt,bt;return U++,K=I,lt=or(),lt!==i?(t.substr(I,3)===H?(bt=H,I+=3):(bt=i,U===0&&ut(k1)),bt!==i?(R=K,K=a(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,lt=or(),lt!==i?(t.substr(I,3)===J?(bt=J,I+=3):(bt=i,U===0&&ut(Av)),bt!==i?(R=K,K=c(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,lt=or(),lt!==i?(t.substr(I,4)===Q?(bt=Q,I+=4):(bt=i,U===0&&ut(Iv)),bt!==i?(R=K,K=p(lt)):(I=K,K=i)):(I=K,K=i),K===i&&(K=I,lt=or(),lt!==i?(t.substr(I,4)===tt?(bt=tt,I+=4):(bt=i,U===0&&ut(Pv)),bt!==i?(R=K,K=d(lt)):(I=K,K=i)):(I=K,K=i)))),U--,K===i&&(lt=i,U===0&&ut($v)),K}function nr(){let K,lt;return U++,K=I,Vt(),lt=or(),lt!==i?(R=K,K=g(lt)):(I=K,K=i),U--,K===i&&U===0&&ut(ki),K}function ve(){let K,lt,bt,Gt;if(U++,K=I,t.charCodeAt(I)===35?(lt=et,I++):(lt=i,U===0&&ut(pr)),lt!==i){if(bt=[],Gt=t.charAt(I),pt.test(Gt)?I++:(Gt=i,U===0&&ut(vf)),Gt!==i)for(;Gt!==i;)bt.push(Gt),Gt=t.charAt(I),pt.test(Gt)?I++:(Gt=i,U===0&&ut(vf));else bt=i;bt!==i?(R=K,K=w()):(I=K,K=i)}else I=K,K=i;return K===i&&(K=I,lt=hi(),lt!==i&&(R=K,lt=x(lt)),K=lt,K===i&&(K=I,lt=He(),lt!==i&&(R=K,lt=M()),K=lt)),U--,K===i&&(lt=i,U===0&&ut(B)),K}function or(){let K,lt,bt,Gt,$e,gi,qi,fr;for(K=I,lt=t.charAt(I),ht.test(lt)?I++:(lt=i,U===0&&ut(ce)),lt===i&&(lt=null),bt=I,Gt=[],$e=t.charAt(I),_t.test($e)?I++:($e=i,U===0&&ut(Me));$e!==i;)Gt.push($e),$e=t.charAt(I),_t.test($e)?I++:($e=i,U===0&&ut(Me));if(t.charCodeAt(I)===46?($e=nt,I++):($e=i,U===0&&ut(mn)),$e!==i){if(gi=[],qi=t.charAt(I),_t.test(qi)?I++:(qi=i,U===0&&ut(Me)),qi!==i)for(;qi!==i;)gi.push(qi),qi=t.charAt(I),_t.test(qi)?I++:(qi=i,U===0&&ut(Me));else gi=i;gi!==i?(Gt=[Gt,$e,gi],bt=Gt):(I=bt,bt=i)}else I=bt,bt=i;if(bt===i)if(bt=[],Gt=t.charAt(I),_t.test(Gt)?I++:(Gt=i,U===0&&ut(Me)),Gt!==i)for(;Gt!==i;)bt.push(Gt),Gt=t.charAt(I),_t.test(Gt)?I++:(Gt=i,U===0&&ut(Me));else bt=i;if(bt!==i){if(Gt=I,t.charCodeAt(I)===101?($e=vt,I++):($e=i,U===0&&ut(Kn)),$e!==i){if(gi=t.charAt(I),ht.test(gi)?I++:(gi=i,U===0&&ut(ce)),gi===i&&(gi=null),qi=[],fr=t.charAt(I),_t.test(fr)?I++:(fr=i,U===0&&ut(Me)),fr!==i)for(;fr!==i;)qi.push(fr),fr=t.charAt(I),_t.test(fr)?I++:(fr=i,U===0&&ut(Me));else qi=i;qi!==i?($e=[$e,gi,qi],Gt=$e):(I=Gt,Gt=i)}else I=Gt,Gt=i;Gt===i&&(Gt=null),R=K,K=$()}else I=K,K=i;return K}function Lh(K,lt){return K.map((function(bt){return bt[lt]}))}function Dh(K,lt,bt){return[K].concat(Lh(lt,bt))}j=f();const nu=j!==i&&I===t.length;function z6(){throw j!==i&&I<t.length&&ut(ot()),qt(D,z<t.length?W(z):null,z<t.length?$t(z,z+1):$t(z,z))}return e.peg$library?{peg$result:j,peg$currPos:I,peg$FAILED:i,peg$maxFailExpected:D,peg$maxFailPos:z,peg$success:nu,peg$throw:nu?void 0:z6}:nu?j:void z6()}function bN(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=wM(t);return i&&i.length!==0?i:null}const e=t.map((i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ct("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:wM(i.value)}}));e.sort(((i,s)=>s.effects.length-i.effects.length));for(let i=0;i<e.length-1;i++){if(!HW(e[i].effects,e[i+1].effects))throw new ct("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});WW(e[i].effects,e[i+1].effects)}return e.sort(((i,s)=>s.scale-i.scale)),e}function wM(t){let e;if(!t)return[];try{e=hat(t)}catch(i){throw new ct("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map((i=>cat(i)))}function cat(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return pat(t);case"opacity":return fat(t);case"hue-rotate":return dat(t);case"blur":return yat(t);case"drop-shadow":return gat(t);case"bloom":return mat(t)}}catch(e){throw e.details.filter=t,e}throw new ct("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function pat(t){let e=1;return af(t.parameters,1),t.parameters.length===1&&(e=Nn(t.parameters[0])),new Sb(t.name,e)}function fat(t){let e=1;return af(t.parameters,1),t.parameters.length===1&&(e=Nn(t.parameters[0])),new cO(e)}function dat(t){let e=0;return af(t.parameters,1),t.parameters.length===1&&(e=Sat(t.parameters[0])),new uO(e)}function yat(t){let e=0;return af(t.parameters,1),t.parameters.length===1&&(e=o6(t.parameters[0]),E1(e,t.parameters[0])),new sO(e)}function gat(t){const e=[];let i=null;for(const s of t.parameters)if(s.type==="color"){if(e.length&&Object.freeze(e),i)throw new ct("effect:type-error","Accepts only one color",{});i=Tat(s)}else{const l=o6(s);if(Object.isFrozen(e))throw new ct("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(l),e.length===3&&E1(l,s)}if(e.length<2||e.length>3)throw new ct("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new aO(e[0],e[1],e[2]||0,i||_N("black"))}function mat(t){let e=1,i=0,s=0;return af(t.parameters,3),t.parameters[0]&&(e=Nn(t.parameters[0])),t.parameters[1]&&(i=o6(t.parameters[1]),E1(i,t.parameters[1])),t.parameters[2]&&(s=Nn(t.parameters[2])),new iO(e,i,s)}function af(t,e){if(t.length>e)throw new ct("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function ov(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in n6)return"<length>";if(t.unit in s6)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function E1(t,e){if(t<0)throw new ct("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function vat(t){if(t.type!=="quantity"||t.unit!==null)throw new ct("effect:type-error",`Expected <double>, Actual: ${ov(t)}`,{term:t})}function wat(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ct("effect:type-error",`Expected <double> or <percentage>, Actual: ${ov(t)}`,{term:t})}const s6={deg:1,grad:.9,rad:180/Math.PI,turn:360};function bat(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&s6[t.unit]!=null))throw new ct("effect:type-error",`Expected <angle>, Actual: ${ov(t)}`,{term:t})}const n6={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function _at(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&n6[t.unit]!=null))throw new ct("effect:type-error",`Expected <length>, Actual: ${ov(t)}`,{term:t})}function Nn(t){wat(t);const e=t.value;return E1(e,t),t.unit==="%"?.01*e:e}function xat(t){return vat(t),E1(t.value,t),t.value}function Sat(t){return bat(t),t.value*s6[t.unit]||0}function o6(t){return _at(t),t.value*n6[t.unit]||0}function Tat(t){switch(t.colorType){case"hex":return Yq(t.value);case"named":return _N(t.value);case"function":return $at(t.value)}}function _N(t){if(!HI(t))throw new ct("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return Jq(t)}const Mat=/^rgba?/i,Eat=/^hsla?/i;function $at(t){if(af(t.parameters,4),Mat.test(t.name))return[Nn(t.parameters[0]),Nn(t.parameters[1]),Nn(t.parameters[2]),t.parameters[3]?Nn(t.parameters[3]):1];if(Eat.test(t.name))return WI(xat(t.parameters[0]),Nn(t.parameters[1]),Nn(t.parameters[2]),t.parameters[3]?Nn(t.parameters[3]):1);throw new ct("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function Aat(t,e,i){try{return Oat(t)}catch(s){i?.messages?.push(s)}return null}function Iat(t,e,i,s){try{const l=Pat(t);Ah(i,l,e)}catch(l){s.messages&&s.messages.push(l)}}function Pat(t){const e=bN(t);return e?JW(e)?e.map((i=>i.toJSON())):e.map((({scale:i,effects:s})=>({scale:i,value:s.map((l=>l.toJSON()))}))):null}function Oat(t){if(!t||t.length===0)return null;if(kat(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:bM(i.value)});return e}return bM(t)}function kat(t){const e=t[0];return!!e&&"scale"in e}function bM(t){if(!t?.length)return"";const e=[];for(const i of t){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Go(i,"amount")];break;case"blur":s=[Go(i,"radius","pt")];break;case"hue-rotate":s=[Go(i,"angle","deg")];break;case"drop-shadow":s=[Go(i,"xoffset","pt"),Go(i,"yoffset","pt"),Go(i,"blurRadius","pt"),Rat(i,"color")];break;case"bloom":s=[Go(i,"strength"),Go(i,"radius","pt"),Go(i,"threshold")]}const l=`${i.type}(${s.filter(Boolean).join(" ")})`;bN(l),e.push(l)}return e.join(" ")}function Go(t,e,i){if(t[e]==null)throw new ct("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function Rat(t,e){if(t[e]==null)throw new ct("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const Cat={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:cr}},"portal-item":{read:!0,write:{layerContainerTypes:cr}}}}},_M={read:{reader:Aat},write:{allowNull:!0,writer:Iat,layerContainerTypes:cr}},Nat={json:{read:!1,write:!1,origins:{"web-map":_M,"portal-item":_M}}},xN=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return _([E(Cat)],e.prototype,"blendMode",void 0),_([E(Nat)],e.prototype,"effect",void 0),e=_([Y("esri.layers.mixins.BlendLayer")],e),e},xM={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},SM={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},TM={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Lat={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":xM,"web-map/basemap":SM,"web-map/tables":TM,"link-chart/operational-layers":{...xM,LinkChartLayer:!0},"link-chart/basemap":SM,"link-chart/tables":TM,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var L9;let L0=L9=class extends It{constructor(t){super(t)}async collectRequiredFields(t,e){return Yl(t,e,this.expression)}clone(){return new L9({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};_([E({type:String,json:{write:{isRequired:!0}}})],L0.prototype,"expression",void 0),_([E({type:String,json:{write:!0}})],L0.prototype,"title",void 0),L0=L9=_([Y("esri.symbols.support.FeatureExpressionInfo")],L0);const MM=L0,a6={unknown:1,inches:Te(1,"meters","inches"),feet:Te(1,"meters","feet"),"us-feet":Te(1,"meters","us-feet"),yards:Te(1,"meters","yards"),miles:Te(1,"meters","miles"),"nautical-miles":Te(1,"meters","nautical-miles"),millimeters:Te(1,"meters","millimeters"),centimeters:Te(1,"meters","centimeters"),decimeters:Te(1,"meters","decimeters"),meters:Te(1,"meters","meters"),kilometers:Te(1,"meters","kilometers"),"decimal-degrees":1/gU(1,"meters",fi.radius)};function Jwt(t){return!!t&&a6[t]!=null}function Dat(t){return 1/(a6[t]||1)}function jat(){const t=Object.keys(a6);return t_(t,"decimal-degrees"),t.sort(),t}const Fat=jat();var D9;const my=Hr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),EM=new Bi({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var fp;let ao=(fp=class extends It{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,s,l){i[s]=e.write({},l),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}clone(){return new D9({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&gj(this.featureExpressionInfo,e.featureExpressionInfo)}},D9=fp,fp);_([E({type:MM,json:{write:!0}})],ao.prototype,"featureExpressionInfo",void 0),_([ae("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ao.prototype,"readFeatureExpressionInfo",null),_([Xt("featureExpressionInfo",{featureExpressionInfo:{type:MM},"featureExpression.value":{type:[0]}})],ao.prototype,"writeFeatureExpressionInfo",null),_([E({type:my.apiValues,nonNullable:!0,json:{type:my.jsonValues,read:my.read,write:{writer:my.write,isRequired:!0}}})],ao.prototype,"mode",null),_([E({type:Number,json:{write:!0}})],ao.prototype,"offset",void 0),_([E({type:Fat,json:{type:String,read:EM.read,write:EM.write}})],ao.prototype,"unit",null),ao=D9=_([Y("esri.symbols.support.ElevationInfo")],ao);let yc=class extends It{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};_([E({type:String,json:{write:!0}})],yc.prototype,"description",void 0),_([E({type:String,json:{write:!0}})],yc.prototype,"label",void 0),_([E()],yc.prototype,"type",void 0),yc=_([Y("esri.tables.elements.AttributeTableElement")],yc);const lf=yc;let D0=class extends Ei.ClonableMixin(lf){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};_([E({type:["auto"],json:{write:!0}})],D0.prototype,"displayType",void 0),_([E({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],D0.prototype,"type",void 0),D0=_([Y("esri.tables.elements.AttributeTableAttachmentElement")],D0);const SN=D0;let Lu=class extends Ei.ClonableMixin(lf){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};_([E({type:String,json:{read:!1,write:!1}})],Lu.prototype,"description",void 0),_([E({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Lu.prototype,"fieldName",void 0),_([E({type:String,json:{read:!1,write:!1}})],Lu.prototype,"label",void 0),_([E({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Lu.prototype,"type",void 0),Lu=_([Y("esri.tables.elements.AttributeTableFieldElement")],Lu);const TN=Lu;let j0=class extends Ei.ClonableMixin(lf){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};_([E({type:Number,json:{type:Re,write:{enabled:!0,isRequired:!0}}})],j0.prototype,"relationshipId",void 0),_([E({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],j0.prototype,"type",void 0),j0=_([Y("esri.tables.elements.AttributeTableRelationshipElement")],j0);const MN=j0,EN={base:lf,key:"type",typeMap:{attachment:SN,field:TN,relationship:MN}};function zat(t){return{typesWithGroup:{base:lf,key:"type",typeMap:{attachment:SN,field:TN,group:t,relationship:MN}},typesWithoutGroup:EN}}let F0=class extends Ei.ClonableMixin(lf){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};_([E({types:[EN],json:{name:"attributeTableElements",write:!0}})],F0.prototype,"elements",void 0),_([E({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],F0.prototype,"type",void 0),F0=_([Y("esri.tables.elements.AttributeTableGroupElement")],F0);const Uat=F0;let z0=class extends Ei.ClonableMixin(It){constructor(e){super(e),this.field=null,this.order=null}};_([E({type:String,json:{write:!0}})],z0.prototype,"field",void 0),_([E({type:["asc","desc"],json:{write:!0}})],z0.prototype,"order",void 0),z0=_([Y("esri.tables.support.FieldOrder")],z0);const Gat=z0;var j9;const Bat=zat(Uat);let U0=j9=class extends It{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new j9({elements:yt(this.elements),orderByFields:yt(this.orderByFields)})}};_([E({types:[Bat.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],U0.prototype,"elements",void 0),_([E({type:[Gat],json:{write:!0}})],U0.prototype,"orderByFields",void 0),U0=j9=_([Y("esri.tables.AttributeTableTemplate")],U0);const qat=U0,ebt={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:cr}}},ibt={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},rbt={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:cr}}},sbt={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:mh}}},nbt={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:cr}}},obt={value:null,type:ao,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:cr}}};function abt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const $N={write:{enabled:!0,layerContainerTypes:cr},read:!0},F9={type:Number,json:{origins:{"web-document":$N,"portal-item":{write:{layerContainerTypes:cr}}}}},lbt={...F9,json:{...F9.json,origins:{"web-document":{...$N,write:{enabled:!0,layerContainerTypes:cr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?gm(e.layerDefinition.drawingInfo.transparency):void 0:gm(e.drawingInfo.transparency)}}},ubt={type:Zt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Zt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Et.fromJSON(e.spatialReference)),i}}}},read:!1}},hbt={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},cbt={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:cr}}},pbt={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:cr}}},Vat={json:{write:{ignoreOrigin:!0,layerContainerTypes:cr},origins:{"web-map":{read:!1,write:!1}}}},fbt={type:qat,json:{name:"attributeTableInfo",write:!0}},Hat=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,s,l){return l?.portalItem?.type==="Group Layer"?void 0:i}writeListMode(i,s,l,f){(f&&f.layerContainerType==="ground"||i&&zz(this,l,{},f))&&(s[l]=i)}writeOperationalLayerType(i,s,l){i&&(s[l]=i)}writeTitle(i,s){s.title=i??"Layer"}readVisibilityTimeExtent(i){return i?ur.fromArray(i):null}writeVisibilityTimeExtent(i,s,l,f){i&&f.layerContainerType!=="tables"&&(i.isEmpty?f?.messages&&f.messages.push(new ct("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[l]=i.toArray())}read(i,s){s&&(s.layer=this),Dz(this,i,(l=>super.read(i,l)),s)}write(i,s){if(!this.persistenceEnabled&&!s?.ignorePersistenceEnabled)return null;if(s?.origin){const y=`${s.origin}/${s.layerContainerType||"operational-layers"}`;let b=!!Lat[y]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&y==="web-scene/operational-layers"&&(b=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&y==="web-map/operational-layers"&&(b=!1),!b)return s.messages?.push(new ct("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${y}'`,{layer:this})),null}const l=super.write(i,{...s,layer:this}),f=!!s&&!!s.messages&&!!s.messages.filter((y=>y instanceof ct&&y.name==="web-document-write:property-required")).length;return qp(l?.url)?(s?.messages?.push(new ct("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&f?null:l}beforeSave(){}};return _([E({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),_([ae("id",["id"])],e.prototype,"readId",null),_([E(Vat)],e.prototype,"listMode",void 0),_([Xt("listMode")],e.prototype,"writeListMode",null),_([E({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:cr,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),_([Xt("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),_([E(F9)],e.prototype,"opacity",void 0),_([E({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),_([E({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),_([Xt("title"),Xt(["web-scene"],"title")],e.prototype,"writeTitle",null),_([E({type:ur,json:{origins:{"web-scene":{write:{layerContainerTypes:cr}}}}})],e.prototype,"visibilityTimeExtent",void 0),_([ae("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),_([Xt(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Re,b2]]}})],e.prototype,"writeVisibilityTimeExtent",null),_([E({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:cr}}})],e.prototype,"visible",void 0),e=_([Y("esri.layers.mixins.OperationalLayer")],e),e};async function Wat(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return bc(t);const i=Et.WGS84;return await g1(e,i),Jn(t,i)}function Jat(t,e){if(!AN(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function AN(t,e){return!!t.typeKeywords?.includes(e)}function dbt(t){return AN(t,Kat.HOSTED_SERVICE)}function Yat(t,e){const i=t.typeKeywords;if(i){const s=i.indexOf(e);s>-1&&i.splice(s,1)}}function ybt(t,e,i){i?Jat(t,e):Yat(t,e)}async function gbt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const s of e)i?s.width>i.width&&(i=s):i=s;else i=e[0];return Wat(i)}const Kat={CHARTS:"Charts",DYNAMIC:"Dynamic",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function Zat(t){const{portal:e,isOrgItem:i,itemControl:s}=t,l=e.user?.privileges;let f=!l||l.includes("features:user:edit"),y=!!i&&!!l?.includes("features:user:fullEdit");const v=s==="update"||s==="admin";return v?y=f=!0:y&&(f=!0),{features:{edit:f,fullEdit:y},content:{updateItem:v}}}const Xat=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ze(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,l){if(s.itemId)return new Ht({id:s.itemId,portal:l?.portal})}writePortalItem(i,s){i?.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem?.id)try{const{load:l}=await mt(()=>import("./layersLoader-CtTbsmIn.js"),__vite__mapDeps([347,21,20,22,348,25,1,2,3,4]));return Ce(s),await l({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},s)}catch(l){throw kr(l)||At.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${l}`),l}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch((s=>(ul(s),!0))))}async setUserPrivileges(i,s){if(!pe.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:l,fullEdit:f},content:{updateItem:y}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",l),this._set("userHasFullEditingPrivileges",f),this._set("userHasUpdateItemPrivileges",y)}catch(l){ul(l)}}async _fetchUserPrivileges(i,s){let l=this.portalItem;if(!i||!l||!l.loaded||l.sourceUrl)return this._fetchFallbackUserPrivileges(s);const f=!xe?.findCredential(this.url),y=i===l.id;if(y&&l.portal.user)return this._getUserPrivileges(l,f);let v,b;if(y)v=l.portal.url;else try{v=await Oq(this.url,s)}catch(k){ul(k)}if(!v||!WD(v,l.portal.url))return this._fetchFallbackUserPrivileges(s);try{const k=s!=null?s.signal:null;b=await xe?.getCredential(`${v}/sharing`,{prompt:!1,signal:k})}catch(k){ul(k)}const S=!0,A=!1,P=!1;if(!b)return{features:{edit:S,fullEdit:A},content:{updateItem:P}};try{if(y?await l.reload():(l=new Ht({id:i,portal:{url:v}}),await l.load(s)),l.portal.user)return this._getUserPrivileges(l,f)}catch(k){ul(k)}return{features:{edit:S,fullEdit:A},content:{updateItem:P}}}_getUserPrivileges(i,s){const l=Zat(i);return s&&(l.features.edit=!0),l}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(l){ul(l)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?xe?.findCredential(this.url):null;if(!s)return!0;const l=vy.credential===s?vy.user:await this._fetchEditingUser(i);return vy.credential=s,vy.user=l,l?.privileges==null||l.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const s=this.portalItem?.portal?.user;if(s)return s;const l=xe?.findServerInfo(this.url??"");if(!l?.owningSystemUrl)return null;const f=`${l.owningSystemUrl}/sharing/rest`,y=wt.getDefault();if(y&&y.loaded&&zn(y.restUrl)===zn(f))return y.user;const v=`${f}/community/self`,b=i!=null?i.signal:null,S=await k_(ii(v,{authMode:"no-prompt",query:{f:"json"},signal:b}));return S.ok?Ie.fromJSON(S.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const l=s?.portal,f=this.portalItem?.id&&(this.portalItem.portal||wt.getDefault());return l&&f&&!$E(f.restUrl,l.restUrl)?(s.messages&&s.messages.push(new ct("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return _([E({type:Ht})],e.prototype,"portalItem",null),_([ae("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),_([Xt("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),_([E({clonable:!1})],e.prototype,"resourceReferences",void 0),_([E({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),_([E({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),_([E({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=_([Y("esri.layers.mixins.PortalLayer")],e),e},vy={credential:null,user:null},Rl=new kt,wd=new WeakMap;function Qat(t){elt(t)&&Rl.push(new WeakRef(t))}function tlt(t){const e=Rl.find((i=>i.deref()===t));e&&Rl.remove(e)}function elt(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function IN(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:IN(e,t%e):0}let q3=0,wy=0;function ilt(){const t=Date.now();let e=!1;for(const i of Rl){const s=i.deref();s?s.refreshInterval&&t-(wd.get(s)??0)+5>=6e4*s.refreshInterval&&(wd.set(s,t),s.refresh(t)):e=!0}if(e)for(let i=Rl.length-1;i>=0;i--)Rl.at(i).deref()||Rl.removeAt(i)}x$((()=>{const t=Date.now();let e=0;for(const i of Rl){const s=i.deref();s&&(e=IN(Math.round(6e4*s.refreshInterval),e),s.refreshInterval?wd.get(s)||wd.set(s,t):wd.delete(s))}if(e!==wy){if(wy=e,clearInterval(q3),wy===0)return void(q3=0);q3=setInterval(ilt,wy)}}),$o);const $M=.1,rlt=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=GE((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||Qat(this)}),(()=>{}))}destroy(){tlt(this)}castRefreshInterval(i){return i>=$M?i:i<=0?0:$M}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Sd(this._debounceHasDataChanged()).then((s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})}),(s=>{At.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})}))}async hasDataChanged(){return!0}get test(){}};return _([E({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:cr}}}}})],e.prototype,"refreshInterval",void 0),_([Ui("refreshInterval")],e.prototype,"castRefreshInterval",null),_([E({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),_([E({readOnly:!0})],e.prototype,"refreshParameters",null),e=_([Y("esri.layers.mixins.RefreshableLayer")],e),e},PN=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&slt(i,s.effectiveScaleRange);const l=this._get("effectiveScaleRange");return l&&l.minScale===i.minScale&&l.maxScale===i.maxScale?l:i}};return _([E({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),_([E({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),_([E({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=_([Y("esri.layers.mixins.ScaleRangeLayer")],e),e};function slt(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}async function mbt(t,e,i){let s;try{s=await createImageBitmap(t)}catch(l){throw new ct("request:server",`Unable to load ${e}`,{url:e,error:l})}return Ce(i),s}async function AM(t,e,i,s,l){let f;try{f=await createImageBitmap(t)}catch(y){throw new ct("request:server",`Unable to load tile ${e}/${i}/${s}`,{error:y,level:e,row:i,col:s})}return Ce(l),f}var z9;let nl=z9=class extends It{constructor(t){super(t)}clone(){return new z9({customLayerParameters:yt(this.customLayerParameters),customParameters:yt(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};_([E({json:{type:Object,write:!0}})],nl.prototype,"customLayerParameters",void 0),_([E({json:{type:Object,write:!0}})],nl.prototype,"customParameters",void 0),_([E({type:String,json:{write:!0}})],nl.prototype,"layerIdentifier",void 0),_([E({type:String,json:{write:!0}})],nl.prototype,"tileMatrixSet",void 0),_([E({type:String,json:{write:!0}})],nl.prototype,"url",void 0),nl=z9=_([Y("esri.layers.support.WMTSLayerInfo")],nl);var U9;let qe=U9=class extends xN(rlt(PN(Hat(Xat(wN(Xe)))))){constructor(...t){super(...t),this.copyright="",this.fullExtent=new Zt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Et.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=Et.WebMercator,this.subDomains=null,this.tileInfo=new Vi({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ct({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Et.WebMercator}),spatialReference:Et.WebMercator,lods:[new re({level:0,scale:591657527591555e-6,resolution:156543.033928}),new re({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new re({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new re({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new re({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new re({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new re({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new re({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new re({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new re({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new re({level:10,scale:577790.554289,resolution:152.874056570411}),new re({level:11,scale:288895.277144,resolution:76.4370282850732}),new re({level:12,scale:144447.638572,resolution:38.2185141425366}),new re({level:13,scale:72223.819286,resolution:19.1092570712683}),new re({level:14,scale:36111.909643,resolution:9.55462853563415}),new re({level:15,scale:18055.954822,resolution:4.77731426794937}),new re({level:16,scale:9027.977411,resolution:2.38865713397468}),new re({level:17,scale:4513.988705,resolution:1.19432856685505}),new re({level:18,scale:2256.994353,resolution:.597164283559817}),new re({level:19,scale:1128.497176,resolution:.298582141647617}),new re({level:20,scale:564.248588,resolution:.14929107082380833}),new re({level:21,scale:282.124294,resolution:.07464553541190416}),new re({level:22,scale:141.062147,resolution:.03732276770595208}),new re({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(t,e){return typeof t=="string"?{urlTemplate:t,...e}:t}load(t){const e=this.loadFromPortal({supportedTypes:["WMTS"]},t).then((()=>{let i="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const s=new ba(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&s.authority?.includes("{subDomain}")&&(i="is missing 'subDomains' property")}else i="spatialReference must match tileInfo.spatialReference";else i="is missing the required 'urlTemplate' property value";if(i)throw new ct("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${i}`)}));return this.addResolvingPromise(e),Promise.resolve(this)}get levelValues(){const t=[];if(!this.tileInfo)return null;for(const e of this.tileInfo.lods)t[e.level]=e.levelValue||e.level;return t}readSpatialReference(t,e){return t||Et.fromJSON(e.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const t=[],{urlTemplate:e,subDomains:i}=this,s=new ba(e),l=s.scheme?s.scheme+"://":"//",f=l+s.authority+"/",y=s.authority;if(y?.includes("{subDomain}")){if(i&&i.length>0&&y.split(".").length>1)for(const v of i)t.push(l+y.replaceAll(/\{subDomain\}/gi,v)+"/")}else t.push(f);return t.map(IE)}get urlPath(){if(!this.urlTemplate)return null;const t=this.urlTemplate,e=new ba(t),i=(e.scheme?e.scheme+"://":"//")+e.authority+"/";return t.slice(i.length)}readUrlTemplate(t,e){return t||e.templateUrl}writeUrlTemplate(t,e){qn(t)&&(t="https:"+t),t&&(t=t.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),t=zn(t)),e.templateUrl=t}fetchTile(t,e,i,s={}){const{signal:l}=s,f=this.getTileUrl(t,e,i),y={responseType:"image",signal:l,query:{...this.refreshParameters}};return ii(f,y).then((v=>v.data))}async fetchImageBitmapTile(t,e,i,s={}){const{signal:l}=s;if(this.fetchTile!==U9.prototype.fetchTile){const b=await this.fetchTile(t,e,i,s);return AM(b,t,e,i,l)}const f=this.getTileUrl(t,e,i),y={responseType:"blob",signal:l,query:{...this.refreshParameters}},{data:v}=await ii(f,y);return AM(v,t,e,i,l)}getTileUrl(t,e,i){const{levelValues:s,tileServers:l,urlPath:f}=this;if(!s||!l||!f)return"";const y=s[t];return l[e%l.length]+n_(f,{level:y,z:y,col:i,x:i,row:e,y:e})}};_([E({type:String,value:"",json:{write:!0}})],qe.prototype,"copyright",void 0),_([E({type:Zt,json:{write:!0},nonNullable:!0})],qe.prototype,"fullExtent",void 0),_([E({readOnly:!0,json:{read:!1,write:!1}})],qe.prototype,"legendEnabled",void 0),_([E({type:["show","hide"]})],qe.prototype,"listMode",void 0),_([E({json:{read:!0,write:!0}})],qe.prototype,"blendMode",void 0),_([E()],qe.prototype,"levelValues",null),_([E({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],qe.prototype,"isReference",void 0),_([E({type:["WebTiledLayer"],value:"WebTiledLayer"})],qe.prototype,"operationalLayerType",void 0),_([E({readOnly:!0,json:{read:!1,write:!1}})],qe.prototype,"popupEnabled",void 0),_([E({type:Et})],qe.prototype,"spatialReference",void 0),_([ae("spatialReference",["spatialReference","fullExtent.spatialReference"])],qe.prototype,"readSpatialReference",null),_([E({type:[String],json:{write:!0}})],qe.prototype,"subDomains",void 0),_([E({type:Vi,json:{write:!0}})],qe.prototype,"tileInfo",void 0),_([E({readOnly:!0})],qe.prototype,"tileServers",null),_([E({json:{read:!1}})],qe.prototype,"type",void 0),_([E()],qe.prototype,"urlPath",null),_([E({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],qe.prototype,"urlTemplate",void 0),_([ae("urlTemplate",["urlTemplate","templateUrl"])],qe.prototype,"readUrlTemplate",null),_([Xt("urlTemplate",{templateUrl:{type:String}})],qe.prototype,"writeUrlTemplate",null),_([E({type:nl,json:{write:!0}})],qe.prototype,"wmtsInfo",void 0),qe=U9=_([Y("esri.layers.WebTileLayer")],qe);const vbt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return qe}},Symbol.toStringTag,{value:"Module"})),nlt=Q9({__name:"arcgisMap",props:{center:{},zoom:{}},emits:["basemap-change","layer-list-changed","ready"],setup(t,{expose:e,emit:i}){const s=t,l=Ly(),f=oD(null);let y=null,v=null,b=null,S=null;const A=ow(s,"center"),P=ow(s,"zoom"),k="2a756fc825268c7f93c00353ae49a63e",C=i;function L(){if(!l.value)return;y||(y=new qe({id:"tdtVecLayer",title:"",subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],urlTemplate:"https://{subDomain}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk="+k})),v||(v=new qe({id:"tdtAnnoLayer",title:"",subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],urlTemplate:"https://{subDomain}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk="+k,opacity:1})),b||(b=new qe({id:"tdtImgLayer",title:"",subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],urlTemplate:"https://{subDomain}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk="+k})),S||(S=new qe({id:"tdtImgAnnoLayer",title:"",subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],urlTemplate:"https://{subDomain}.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk="+k,opacity:1}));const pt=[y,v],ht=[b,S];y.visible=!1,v.visible=!1,b.visible=!0,S.visible=!0;const _t=new gO({basemap:{baseLayers:[...pt,...ht]}});f.value=new aat({container:l.value,map:_t,center:A.value??[116.397428,39.90923],zoom:P.value??12}),f.value.when(()=>{console.log("[arcgisMap] map initialized"),C("ready");try{vt()}catch(gt){console.warn("[arcgisMap] failed to emit initial layer list",gt)}})}function F(){if(f.value)try{f.value.destroy(),f.value=null,console.log("[arcgisMap] map destroyed successfully")}catch(pt){console.error("[arcgisMap] failed to destroy map instance:",pt)}}aD(()=>{L()}),lD(()=>{F()});function q(){if(f.value)try{f.value.resize&&f.value.resize(),console.log("[arcgisMap] map resized")}catch(pt){console.error("[arcgisMap] failed to resize map:",pt)}}function H(pt){if(f.value)try{f.value.goTo({center:pt}),console.log("[arcgisMap] set center to",pt)}catch(ht){console.error("[arcgisMap] failed to set center:",ht)}}function J(pt){if(f.value)try{f.value.goTo({zoom:pt}),console.log("[arcgisMap] set zoom to",pt)}catch(ht){console.error("[arcgisMap] failed to set zoom:",ht)}}function Q(pt){if(!f.value){console.warn("[arcgisMap] no view to add layer to");return}const ht=f.value.map;if(!ht){console.warn("[arcgisMap] view has no map to add layer to");return}try{if(typeof ht.add=="function")ht.add(pt);else if(ht.layers&&typeof ht.layers.add=="function")ht.layers.add(pt);else if(ht.basemap&&ht.basemap.baseLayers&&typeof ht.basemap.baseLayers.add=="function")ht.basemap.baseLayers.add(pt);else{console.warn("[arcgisMap] cannot find suitable add() on map to insert layer");return}console.log("[arcgisMap] layer added"),vt()}catch(_t){console.error("[arcgisMap] failed to add layer:",_t)}}function tt(pt,ht){try{const _t=f.value?.map;if(!_t)return;const gt=_t.layers?Array.isArray(_t.layers)?_t.layers:Array.from(_t.layers):[],at=_t.basemap&&_t.basemap.baseLayers?Array.isArray(_t.basemap.baseLayers)?_t.basemap.baseLayers:Array.from(_t.basemap.baseLayers):[],Yt=[...gt,...at].find(Dt=>Dt&&Dt.id===pt);if(Yt){Yt.visible=ht,console.log(`[arcgisMap] layer ${pt} visibility ->`,ht),vt();return}console.warn(`[arcgisMap] layer ${pt} not found`)}catch(_t){console.error("[arcgisMap] failed to set layer visibility:",_t)}}function et(pt){try{const ht=f.value?.map;if(!ht)return;const _t=ht.layers?Array.isArray(ht.layers)?ht.layers:Array.from(ht.layers):[],gt=ht.basemap&&ht.basemap.baseLayers?Array.isArray(ht.basemap.baseLayers)?ht.basemap.baseLayers:Array.from(ht.basemap.baseLayers):[],Lt=[..._t,...gt].find(Yt=>Yt&&Yt.id===pt);if(Lt){Lt.visible=!Lt.visible,console.log(`[arcgisMap] toggled layer ${pt} ->`,Lt.visible),vt();return}console.warn(`[arcgisMap] layer ${pt} not found`)}catch(ht){console.error("[arcgisMap] failed to toggle layer visibility:",ht)}}function nt(pt){try{const ht=f.value?.map;if(!ht)return;const _t=ht.layers?Array.isArray(ht.layers)?ht.layers:Array.from(ht.layers):[],gt=ht.basemap&&ht.basemap.baseLayers?Array.isArray(ht.basemap.baseLayers)?ht.basemap.baseLayers:Array.from(ht.basemap.baseLayers):[];let at=_t.find(Lt=>Lt&&Lt.id===pt);if(at){if(typeof ht.remove=="function")ht.remove(at);else if(ht.layers&&typeof ht.layers.remove=="function")ht.layers.remove(at);else{console.warn("[arcgisMap] cannot find suitable remove() on map to remove layer from map.layers");return}console.log("[arcgisMap] layer removed from map.layers",pt),vt();return}if(at=gt.find(Lt=>Lt&&Lt.id===pt),at)if(ht.basemap&&ht.basemap.baseLayers&&typeof ht.basemap.baseLayers.remove=="function"){ht.basemap.baseLayers.remove(at),console.log("[arcgisMap] layer removed from basemap.baseLayers",pt),vt();return}else{console.warn("[arcgisMap] cannot find suitable remove() on basemap.baseLayers to remove layer");return}console.warn(`[arcgisMap] layer ${pt} not found for removal`)}catch(ht){console.error("[arcgisMap] failed to remove layer:",ht)}}function vt(){try{const pt=f.value?.map;if(!pt)return[];const ht=pt.layers?Array.isArray(pt.layers)?pt.layers:Array.from(pt.layers):[],_t=pt.basemap&&pt.basemap.baseLayers?Array.isArray(pt.basemap.baseLayers)?pt.basemap.baseLayers:Array.from(pt.basemap.baseLayers):[],gt=[...ht,..._t],at={};for(const Yt of gt){const Dt=Yt?.id??"";Dt&&(Dt in at||(at[Dt]=Yt))}const Lt=Object.values(at).map(Yt=>({id:Yt?.id??"",title:Yt?.title??"",visible:!!Yt?.visible}));return C("layer-list-changed",Lt),Lt}catch(pt){return console.error("[arcgisMap] getLayerList error:",pt),[]}}function Tt(pt){try{const ht=f.value?.map;if(!ht)return;const _t=ht.basemap?.baseLayers?Array.isArray(ht.basemap.baseLayers)?ht.basemap.baseLayers:Array.from(ht.basemap.baseLayers):[];for(const gt of _t)!gt||!gt.id||(pt==="vec"?gt.id==="tdtVecLayer"||gt.id==="tdtAnnoLayer"?gt.visible=!0:(gt.id==="tdtImgLayer"||gt.id==="tdtImgAnnoLayer")&&(gt.visible=!1):gt.id==="tdtImgLayer"||gt.id==="tdtImgAnnoLayer"?gt.visible=!0:(gt.id==="tdtVecLayer"||gt.id==="tdtAnnoLayer")&&(gt.visible=!1));console.log("[arcgisMap] switched basemap visibility to",pt),C("basemap-change",pt)}catch(ht){console.error("[arcgisMap] failed to replace basemap:",ht)}}function St(){const pt=f.value?.map;return!pt||!pt.basemap?"vec":(pt.basemap.baseLayers||[]).map(_t=>_t.id).includes("tdtImgLayer")?"img":"vec"}return e({initMap:L,destroyMap:F,resizeMap:q,setCenter:H,setZoom:J,addLayer:Q,switchBasemap:Tt,getBasemapMode:St,setLayerVisibility:tt,toggleLayerVisibility:et,removeLayer:nt,getLayerList:vt,getView(){return f.value}}),(pt,ht)=>(vc(),H0("div",{ref_key:"mapRef",ref:l,class:"map-view"},null,512))}}),olt=X9(nlt,[["__scopeId","data-v-c2f0fb5b"]]);let Tr=class extends xN(PN(Xe)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new rh,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};_([E({type:ao})],Tr.prototype,"elevationInfo",void 0),_([E(Lb(rh,"graphics"))],Tr.prototype,"graphics",void 0),_([E({type:["show","hide"]})],Tr.prototype,"listMode",void 0),_([E()],Tr.prototype,"screenSizePerspectiveEnabled",void 0),_([E({readOnly:!0})],Tr.prototype,"type",void 0),_([E({constructOnly:!0})],Tr.prototype,"internal",void 0),Tr=_([Y("esri.layers.GraphicsLayer")],Tr);const alt={class:"layer-panel"},llt={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ult={style:{display:"flex",gap:"8px","align-items":"center"}},hlt={style:{"font-weight":"600"}},clt={style:{"font-size":"12px",color:"#666"}},plt={style:{display:"flex",gap:"6px","align-items":"center"}},flt={key:1,style:{color:"#888",padding:"8px"}},dlt=Q9({__name:"LayerPanel",props:{layers:{}},emits:["toggle","remove","visibility-change"],setup(t,{emit:e}){const s=ow(t,"layers");console.log(s,"layers");const l=e;function f(v,b){l("visibility-change",{id:v,visible:b})}function y(v){aw.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{l("remove",v)}).catch(()=>{})}return(v,b)=>{const S=Rc("el-switch"),A=Rc("el-button"),P=Rc("el-card");return vc(),H0("div",alt,[s.value&&s.value.length?(vc(!0),H0(uD,{key:0},hD(s.value,k=>(vc(),cD(P,{class:"layer-card",key:k.id,"body-style":{padding:"8px"}},{default:Ni(()=>[ll("div",llt,[ll("div",ult,[wi(S,{"model-value":k.visible,onChange:C=>f(k.id,C)},null,8,["model-value","onChange"]),ll("div",null,[ll("div",hlt,B6(k.title||k.id),1),ll("div",clt,B6(k.id),1)])]),ll("div",plt,[wi(A,{size:"small",onClick:C=>v.$emit("toggle",k.id)},{default:Ni(()=>[...b[0]||(b[0]=[Qi("",-1)])]),_:1},8,["onClick"]),wi(A,{size:"small",type:"danger",onClick:C=>y(k.id)},{default:Ni(()=>[...b[1]||(b[1]=[Qi("",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128)):(vc(),H0("div",flt,""))])}}}),ylt=X9(dlt,[["__scopeId","data-v-35768390"]]);function IM(t){switch(t){case Ue.SUPPORTED:break;case Ue.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Ue.GEOMETRY_MISSING:return"no geometry";case Ue.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Ue.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Ue.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Ue;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Ue||(Ue={}));function ON(t){return t?Eh:Elt}function glt(t,e){return e?.mode?e.mode:ON(t).mode}function mlt(t,e){return e??ON(t)}function kN(t,e){return glt(t==null||(t.hasZ??!1),e)}function bbt(t,e){return mlt(t==null||(t.hasZ??!1),e)}function vlt(t){const e=RN(t);return kN(t.geometry,e)}function wlt(t){const e=RN(t),i=kN(t.geometry,e),s=e!=null&&i!=="on-the-ground"?Mlt(e):0,l=e?.featureExpressionInfo;return{mode:i,offset:s,featureExpressionInfo:l}}function blt(t){return av(wlt(t))}function _bt(t){return av(t)||_lt(t)}function _lt(t){return t?.featureExpressionInfo?.expression==="0"}function av(t){if(!t||t.mode==="on-the-ground")return!1;const e=t?.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function RN(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function l6(t,e){if(!t?.offset)return 0;const{offset:i,unit:s}=t;if(s==="decimal-degrees")return 0;const l=s!=="unknown"&&s?s:"meters",f=wA(e);return f?Te(i,l,f):0}function xbt(t,e,i){if(!i?.mode)return;const s=t.hasZ?t.z:0,l=l6(i,t.spatialReference);switch(i.mode){case"absolute-height":return s-l;case"on-the-ground":return 0;case"relative-to-ground":return s-((e.elevationProvider.getElevation(t.x,t.y,s,t.spatialReference,"ground")??0)+l);case"relative-to-scene":return s-((e.elevationProvider.getElevation(t.x,t.y,s,t.spatialReference,"scene")??0)+l)}}function xlt(t,e,i,s=null){return u6(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,s)}function CN(t,e,i,s,l=null){return u6(t,e[0],e[1],e.length>2?e[2]:0,i,s,l)}function u6(t,e,i,s,l,f,y=null){if(f==null)return;const v=y!=null?y.mode:"absolute-height";if(v==="on-the-ground")return 0;const{absoluteZ:b}=Slt(e,i,s,l,t,f);return Tlt(b,e,i,s,l,t,y,v)}function Slt(t,e,i,s,l,f){const y=l6(f,s);switch(f.mode){case"absolute-height":return{absoluteZ:i+y,elevation:0};case"on-the-ground":{const v=l.elevationProvider.getElevation(t,e,0,s,"ground")??0;return{absoluteZ:v,elevation:v}}case"relative-to-ground":{const v=l.elevationProvider.getElevation(t,e,i,s,"ground")??0;return{absoluteZ:i+v+y,elevation:v}}case"relative-to-scene":{const v=l.elevationProvider.getElevation(t,e,i,s,"scene")??0;return{absoluteZ:i+v+y,elevation:v}}}}function Tlt(t,e,i,s,l,f,y,v){const b=l6(y,l);switch(v){case"absolute-height":return t-b;case"relative-to-ground":return t-((f.elevationProvider.getElevation(e,i,s,l,"ground")??0)+b);case"relative-to-scene":return t-((f.elevationProvider.getElevation(e,i,s,l,"scene")??0)+b)}}function Sbt(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function Tbt(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function Mbt(t,e,i){return i?.mode===e?`${t} do not support ${e} elevation mode`:null}function Ebt(t,e){return e?.featureExpressionInfo!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function $bt(t,e){e&&t.warn(".elevationInfo=",e)}function Mlt(t){return(t?.offset??0)*Dat(t?.unit)}const Eh={mode:"absolute-height",offset:0},Elt={mode:"on-the-ground",offset:null};function $lt(t){if(t.graphic&&t.graphic.layer?.type!=="graphics")return Ue.GRAPHICS_LAYER_MISSING;const e=t.operations?.data.type;if(!e)return Ue.GEOMETRY_TYPE_UNSUPPORTED;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return Ue.GEOMETRY_TYPE_UNSUPPORTED}const i=t.elevationInfo;return av(i)?Ue.ELEVATION_MODE_UNSUPPORTED:Ue.SUPPORTED}function Alt(t){return Ilt(t).result}function Ilt(t){if(t.graphic&&t.graphic.layer?.type!=="graphics")return{result:Ue.GRAPHICS_LAYER_MISSING};if(!t.operations)return{result:Ue.GEOMETRY_MISSING};if(av(t.elevationInfo))return{result:Ue.ELEVATION_MODE_UNSUPPORTED};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:Ue.SUPPORTED,geometry:i}:{result:Ue.GEOMETRY_TYPE_UNSUPPORTED}}function Plt(t){if(t.layer?.type!=="graphics")return Ue.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return Ue.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Ue.SUPPORTED;default:return Ue.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some((i=>i.type==="object"))?Ue.SYMBOL_TYPE_UNSUPPORTED:vlt(t)!=="on-the-ground"&&blt(t)?Ue.ELEVATION_MODE_UNSUPPORTED:Ue.SUPPORTED}function PM(t,e,i){if(!e||!t?.map)return;const{map:s}=t;s.layers.find((f=>f===e))||s.add(e,i)}function Abt(t,e){const i=e?.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find((s=>{const l=s.layer;return l===i||"sublayers"in l&&l.sublayers!=null&&l.sublayers.includes(i)}))}function Ibt(t){return JP(t)||Fu(t)||Eq(t)||Iq(t)}let Lg=class extends Ot{constructor(e){super(e),this.enabled=!1}};_([E({type:Boolean,nonNullable:!0})],Lg.prototype,"enabled",void 0),Lg=_([Y("esri.views.interactive.sketch.SketchLabelOptions")],Lg);const h6=Lg;let bd=class extends Ot{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};_([E({type:String,nonNullable:!0})],bd.prototype,"mode",void 0),bd=_([Y("esri.views.interactive.sketch.SketchTooltipElevationOptions")],bd);let br=class extends Ot{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};_([E({type:Boolean,nonNullable:!0})],br.prototype,"area",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"coordinates",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"direction",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"distance",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"elevation",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"header",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"helpMessage",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"orientation",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"radius",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"rotation",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"scale",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"size",void 0),_([E({type:Boolean,nonNullable:!0})],br.prototype,"totalLength",void 0),br=_([Y("esri.views.interactive.sketch.SketchTooltipVisibleElements")],br);const NN=br;let Lr=class extends Ot{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new bd,this.placement="auto",this.offset=null,this.visibleElements=new NN,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};_([E({type:Boolean,nonNullable:!0})],Lr.prototype,"enabled",void 0),_([E()],Lr.prototype,"forceEnabled",void 0),_([E()],Lr.prototype,"effectiveEnabled",null),_([E()],Lr.prototype,"helpMessage",void 0),_([E()],Lr.prototype,"helpMessageIcon",void 0),_([E({type:Boolean,nonNullable:!0})],Lr.prototype,"inputEnabled",void 0),_([E({type:bd,nonNullable:!0})],Lr.prototype,"elevation",void 0),_([E()],Lr.prototype,"placement",void 0),_([E()],Lr.prototype,"offset",void 0),_([E({type:NN,nonNullable:!0})],Lr.prototype,"visibleElements",void 0),_([E()],Lr.prototype,"visualVariables",void 0),_([E()],Lr.prototype,"xyMode",void 0),Lr=_([Y("esri.views.interactive.sketch.SketchTooltipOptions")],Lr);const c6=Lr;let gc=class extends Ot{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};_([E()],gc.prototype,"length",void 0),_([E()],gc.prototype,"verticalLength",void 0),_([E()],gc.prototype,"area",void 0),gc=_([Y("esri.views.interactive.sketch.Units")],gc);const Xm=gc;function Olt(t,e){return{type:bh(e),value:t,unit:e}}function Nbt(t){return{value:t}}function Ro(t,e){return{type:bh(e),value:t,unit:e}}function lv(t,e){return{type:bh(e),value:t,unit:e}}function Oa(t,e,i="arithmetic"){return{type:bh(e),value:t,unit:e,rotationType:i}}function Lbt(t,e){const i=klt(t,e);return t.type==="angle"?Oa(i,e,t.rotationType):Olt(i,e)}function klt(t,e){return Te(t.value,t.unit,e)}function Dbt(t,e){return t==null?e:e==null||t.value>Te(e.value,e.unit,t.unit)?t:e}function jbt(t,e){return t==null?null:{...t,value:t.value*e}}function p6(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const Fbt=Ro(0,"meters"),zbt=lv(0,"square-meters");Oa(0,"radians");const Ubt=Oa(0,"degrees"),Gbt=Oa(0,"degrees","geographic");function LN(t,e,i,s){if(Cs(t.spatialReference,i)){by[0]=t.x,by[1]=t.y;const f=t.z;return by[2]=f??s??0,ef(by,t.spatialReference,0,e,i,0)}const l=Ip(t,i);return!!l&&(e[0]=l?.x,e[1]=l?.y,e[2]=l?.z??s??0,!0)}async function Bbt(t,e,i,s,l){return await g1(t.spatialReference,i,null,l),LN(t,e,i,s)}const by=Mt();function uf(t,e,i,s){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:s,type:"point"}}function DN(t,e,i,s,l){t.x=e,t.y=i,t.z=s,t.hasZ=s!=null,t.spatialReference=l}function jl(t,e,i,s,l){return!(e==null||s==null||t.length<2)&&(Vf.x=t[0],Vf.y=t[1],Vf.z=t[2],Vf.spatialReference=e,LN(Vf,i,s,l))}const Vf=uf(0,0,0,Et.WGS84);function jN(t){if(!t)return null;const e=t.wkid;if(e)return aH[e];const i=t.wkt2??t.wkt;return i?Rlt(i):null}function Rlt(t){const e=nH.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const s=parseFloat(i[1]),l=parseFloat(i[2]);return isNaN(s)||isNaN(l)?null:{a:s,f:l===0?0:1/l}}function uv(t){const e=jN(t);if(Clt(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function Clt(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function _y(t,e,i){const{a:s,eSq:l}=uv(i),f=Math.sqrt(l),y=Math.sin(e[1]*Fr),v=s*e[0]*Fr;let b;return l>0?b=s*((1-l)*(y/(1-l*(y*y))-1/(2*f)*Math.log((1-f*y)/(1+f*y))))*.5:b=s*y,t[0]=v,t[1]=b,t}function hf(t){return Oh(t)&&!!jN(t)}function Nlt(t,e="square-meters"){if(t.some((y=>!hf(y.spatialReference))))throw new ct("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let y=0;y<t.length;y++){const v=t[y],b=v.spatialReference,{radius:S,densificationRatio:A}=uv(b),P=S*A;i.push(Dlt(v,P))}const s=[],l=[0,0],f=[0,0];for(let y=0;y<i.length;y++){const{rings:v,spatialReference:b}=i[y];let S=0;for(let A=0;A<v.length;A++){const P=v[A];_y(l,P[0],b),_y(f,P[P.length-1],b);let k=f[0]*l[1]-l[0]*f[1];for(let C=0;C<P.length-1;C++)_y(l,P[C+1],b),_y(f,P[C],b),k+=f[0]*l[1]-l[0]*f[1];S+=k}S=Te(S,"square-meters",e),s.push(S/-2)}return s}function Llt(t,e="meters"){if(!t)throw new ct("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some((s=>!hf(s.spatialReference))))throw new ct("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let s=0;s<t.length;s++){const l=t[s],{spatialReference:f}=l,y=l.type==="polyline"?l.paths:l.rings;let v=0;for(let b=0;b<y.length;b++){const S=y[b];let A=0;for(let P=1;P<S.length;P++){const k=S[P-1][0],C=S[P][0],L=S[P-1][1],F=S[P][1];if(L!==F||k!==C){const q=new cf;pf(q,[k,L],[C,F],f),A+=q.distance}}v+=A}v=Te(v,"meters",e),i.push(v)}return i}function Dlt(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new ct("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!hf(i))throw new ct("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const s=t.type==="polyline"?t.paths:t.rings,l=[],f=[0,0],y=new cf;for(const b of s){const S=[];l.push(S),S.push([b[0][0],b[0][1]]);let A,P,k=b[0][0],C=b[0][1];for(let L=0;L<b.length-1;L++){if(A=b[L+1][0],P=b[L+1][1],k===A&&C===P)continue;const F=[k,C];pf(y,[k,C],[A,P],i);const{azimuth:q,distance:H}=y,J=H/e;if(J>1){for(let Q=1;Q<=J-1;Q++)oh(f,F,q,Q*e,i),S.push(f.slice());oh(f,F,q,(H+Math.floor(J-1)*e)/2,i),S.push(f.slice())}oh(f,F,q,H,i),S.push(f.slice()),k=f[0],C=f[1]}}const v=Kp(Et,i);return t.type==="polyline"?new ei({paths:l,spatialReference:v}):new Fe({rings:l,spatialReference:v})}let cf=class{constructor(e=0,i=void 0,s=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=s}};function oh(t,e,i,s,l){const f=e[0],y=e[1],v=f*Fr,b=y*Fr,S=(i??0)*Fr,{a:A,b:P,f:k}=uv(l),C=Math.sin(S),L=Math.cos(S),F=(1-k)*Math.tan(b),q=1/Math.sqrt(1+F*F),H=F*q,J=Math.atan2(F,L),Q=q*C,tt=Q*Q,et=1-tt,nt=et*(A*A-P*P)/(P*P),vt=1+nt/16384*(4096+nt*(nt*(320-175*nt)-768)),Tt=nt/1024*(256+nt*(nt*(74-47*nt)-128));let St,pt,ht,_t=s/(P*vt),gt=2*Math.PI;for(;Math.abs(_t-gt)>1e-12;)ht=Math.cos(2*J+_t),St=Math.sin(_t),pt=Math.cos(_t),gt=_t,_t=s/(P*vt)+Tt*St*(ht+Tt/4*(pt*(2*ht*ht-1)-Tt/6*ht*(4*St*St-3)*(4*ht*ht-3)));const at=H*St-q*pt*L,Lt=Math.atan2(H*pt+q*St*L,(1-k)*Math.sqrt(tt+at*at)),Yt=k/16*et*(4+k*(4-3*et)),Dt=Math.atan2(St*C,q*pt-H*St*L)-(1-Yt)*k*Q*(_t+Yt*St*(ht+Yt*pt*(2*ht*ht-1)));return t[0]=(v+Dt)/Fr,t[1]=Lt/Fr,t}function pf(t,e,i,s){const l=e[0]*Fr,f=e[1]*Fr,y=i[0]*Fr,v=i[1]*Fr,{a:b,b:S,f:A,radius:P}=uv(s),k=y-l,C=Math.atan((1-A)*Math.tan(f)),L=Math.atan((1-A)*Math.tan(v)),F=Math.sin(C),q=Math.cos(C),H=Math.sin(L),J=Math.cos(L);let Q,tt,et,nt,vt,Tt,St,pt,ht,_t,gt=1e3,at=k;do{if(St=Math.sin(at),pt=Math.cos(at),et=Math.sqrt(J*St*(J*St)+(q*H-F*J*pt)*(q*H-F*J*pt)),et===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;vt=F*H+q*J*pt,Tt=Math.atan2(et,vt),ht=q*J*St/et,tt=1-ht*ht,nt=vt-2*F*H/tt,isNaN(nt)&&(nt=0),_t=A/16*tt*(4+A*(4-3*tt)),Q=at,at=k+(1-_t)*A*ht*(Tt+_t*et*(nt+_t*vt*(2*nt*nt-1)))}while(Math.abs(at-Q)>1e-12&&--gt>0);if(gt===0){const si=P,Cr=Math.acos(Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos(y-l))*si,Yn=y-l,su=Math.sin(Yn)*Math.cos(v),gf=Math.cos(f)*Math.sin(v)-Math.sin(f)*Math.cos(v)*Math.cos(Yn),mf=Math.atan2(su,gf);return t.azimuth=mf/Fr,t.distance=Cr,t.reverseAzimuth=void 0,t}const Lt=tt*(b*b-S*S)/(S*S),Yt=Lt/1024*(256+Lt*(Lt*(74-47*Lt)-128)),Dt=S*(1+Lt/16384*(4096+Lt*(Lt*(320-175*Lt)-768)))*(Tt-Yt*et*(nt+Yt/4*(vt*(2*nt*nt-1)-Yt/6*nt*(4*et*et-3)*(4*nt*nt-3)))),Jt=Math.atan2(J*Math.sin(at),q*H-F*J*Math.cos(at)),ui=Math.atan2(q*Math.sin(at),q*H*Math.cos(at)-F*J);return t.azimuth=Jt/Fr,t.distance=Dt,t.reverseAzimuth=ui/Fr,t}function G9(t){return hf(t)?t:ks(t)?Et.WGS84:null}var as;function jlt(t,e){if(t==null||e==null)return;const i=B9(t,e);return i!=null?Oa(i,"radians","geographic"):void 0}(function(t){t.Absolute="absolute",t.Relative="relative",t.RelativeBilateral="relative-bilateral"})(as||(as={}));const B9=(()=>{const t=Mt(),e=Mt();return(i,s)=>(Mi(t,i.x,i.y,i.z??0),Mi(e,s.x,s.y,s.z??0),Flt(t,e,i.spatialReference,s.spatialReference))})(),Flt=(()=>{const t=de(),e=Mt(),i=Mt();return(s,l,f,y)=>{if(Ge(s,l))return;const v=G9(f),b=G9(y);if(v&&b&&di(v,b)&&jl(s,f,e,v)&&jl(l,y,i,b)){const{azimuth:A}=pf(Ult,e,i,v);return A!=null?Te(A,"degrees","radians"):void 0}t[0]=l[0]-s[0],t[1]=l[1]-s[1];let S=oR(pR,t);return t[0]<0&&(S=Glt-S),S}})();function Vbt(t,e,i,s=as.Absolute){if(e&&i)switch(s){case as.Absolute:return jlt(e,i);case as.Relative:return kM(OM(t,e,i),as.Relative);case as.RelativeBilateral:return kM(OM(t,e,i),as.RelativeBilateral)}}function OM(t,e,i){if(!t||!e||!i)return;const s=B9(t,e),l=B9(e,i);return s!=null&&l!=null?Oa(l-s,"radians","geographic"):void 0}function kM(t,e){if(t!=null)switch(e){case as.Absolute:return zlt(t);case as.Relative:{const i=Qm(t);let s=RM.normalize(i,0,!0);return s===-180&&(s=180),Oa(s,"degrees","geographic")}case as.RelativeBilateral:{const i=Qm(t),s=Math.abs(RM.normalize(i,0,!0));return Oa(s,"degrees","geographic")}}}function zlt(t){const e=Qm(t),i=Blt.normalize(e,0,!0);return Oa(i,"degrees","geographic")}const Hbt=(()=>{const t=Mt();return(e,i,s,l,f,y="geodesic")=>{hn(t,i);const v=Qm(f);if(y==="geodesic"){const C=G9(s);if(C&&jl(t,s,t,C))return oh(e,t,v,l,C),e[2]=i[2],!!jl(e,C,e,s)}const b=p6(v,"geographic","arithmetic"),S=Te(b,"degrees","radians"),A=i[0]+l*Math.cos(S),P=i[1]+l*Math.sin(S),k=i[2];return Mi(e,A,P,k),!0}})();function Qm(t){if(t!=null)return p6(FN(t),t.rotationType,"geographic")}function Wbt(t){if(t!=null)return p6(FN(t),t.rotationType,"arithmetic")}function FN(t){return Te(t.value,t.unit,"degrees")}const Ult=new cf,Glt=2*Math.PI,Blt=vO,RM=new z2(-180,180);let ol=class extends Ot{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?as.RelativeBilateral:as.Relative;case"absolute":return as.Absolute}}get displayUnits(){return this._get("displayUnits")??new Xm}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new Xm}set inputUnits(e){this._set("inputUnits",e)}};_([E({type:String,nonNullable:!0})],ol.prototype,"directionMode",void 0),_([E({type:Boolean,nonNullable:!0})],ol.prototype,"relativeDirectionIsBilateral",void 0),_([E()],ol.prototype,"effectiveDirectionMode",null),_([E({type:Xm,nonNullable:!0})],ol.prototype,"displayUnits",null),_([E({type:Xm,nonNullable:!0})],ol.prototype,"inputUnits",null),ol=_([Y("esri.views.interactive.sketch.SketchValueOptions")],ol);const f6=ol;let mc=class extends Ot{constructor(e){super(e),this.labels=new h6,this.tooltips=new c6,this.values=new f6}};_([E({nonNullable:!0,type:h6})],mc.prototype,"labels",void 0),_([E({nonNullable:!0,type:c6})],mc.prototype,"tooltips",void 0),_([E({nonNullable:!0,type:f6})],mc.prototype,"values",void 0),mc=_([Y("esri.views.interactive.sketch.SketchOptions")],mc);const zN=mc;var $h;function UN(t,e,i){return Ds(t,e,i)}function Ds(t=0,e=0,i=0){return Ao(t,e,i)}function Kbt(t){return t}function Zbt(t){return t}function Zl(t,e,i){return Ao(t,e,i)}function Fp(t){const[e,i,s]=t;return t.length>3?[e,i,s,t[3]]:[e,i,s]}function V3(t){return t[3]=((t.length>3?t[3]:void 0)??$h.NONE)|$h.TARGET,t}function Xbt(t){return!!(((t.length>3?t[3]:void 0)??$h.NONE)&$h.TARGET)}function CM(t,e,{coordinateHelper:i,elevationInfo:s},l){return t?G0(i.vectorToDehydratedPoint(t,qlt),e,s,l):null}function G0(t,e,i,s=Ds()){return s[0]=t.x,s[1]=t.y,s[2]=t.z??0,e==null||(e.type==="2d"?s[2]=0:s[2]=xlt(e,t,i,Eh)??0),s}function Qbt(t,e,i){return i?(DN(i,t[0],t[1],t[2],e),i):uf(t[0],t[1],t[2],e)}function NM(t,e,{z:i,m:s},l,f){const{spatialReference:y,elevationInfo:v}=l;let b;i==null&&s==null?b=void 0:e==null||e.type==="2d"?b=i??void 0:b=CN(e,t,y,Eh,v)??0;const[S,A]=t;return f?DN(f,S,A,b,y):f=uf(S,A,b,y),s!=null&&(f.m=s,f.hasM=!0),f}function t5t(t,e,i,s,l=Ds()){const[f,y]=t;return l[0]=f,l[1]=y,t.length>3&&(l[3]=t[3]??$h.NONE),i?.type!=="3d"?(l[2]=e.value,l):(l[2]=u6(i,f,y,e.value,s,e.elevationInfo,Eh)??0,l)}(function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"})($h||($h={}));const qlt=uf(0,0,0,null);let jn=class extends It{constructor(){super(...arguments),this.enabled=!0}};_([E({type:Boolean})],jn.prototype,"enabled",void 0),jn=_([Y("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],jn);let We=class extends It{constructor(e){super(e),this.lineSnapper=new jn,this.parallelLineSnapper=new jn,this.rightAngleSnapper=new jn,this.rightAngleTriangleSnapper=new jn,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new ie([255,127,0]),this.orangeTransparent=new ie([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};_([E({type:jn,constructOnly:!0,nonNullable:!0,json:{write:!0}})],We.prototype,"lineSnapper",void 0),_([E({type:jn,constructOnly:!0,nonNullable:!0,json:{write:!0}})],We.prototype,"parallelLineSnapper",void 0),_([E({type:jn,constructOnly:!0,nonNullable:!0,json:{write:!0}})],We.prototype,"rightAngleSnapper",void 0),_([E({type:jn,constructOnly:!0,nonNullable:!0,json:{write:!0}})],We.prototype,"rightAngleTriangleSnapper",void 0),_([E({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],We.prototype,"shortLineThreshold",void 0),_([E({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],We.prototype,"distance",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],We.prototype,"pointThreshold",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],We.prototype,"intersectionParallelLineThreshold",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],We.prototype,"parallelLineThreshold",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],We.prototype,"verticalLineThresholdMeters",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],We.prototype,"touchSensitivityMultiplier",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],We.prototype,"pointOnLineThreshold",void 0),_([E({type:ie,nonNullable:!0})],We.prototype,"orange",void 0),_([E({type:ie,nonNullable:!0})],We.prototype,"orangeTransparent",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],We.prototype,"lineHintWidthReference",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],We.prototype,"lineHintWidthTarget",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],We.prototype,"lineHintFadedExtensions",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],We.prototype,"parallelLineHintWidth",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],We.prototype,"parallelLineHintLength",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],We.prototype,"parallelLineHintOffset",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],We.prototype,"rightAngleHintSize",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],We.prototype,"rightAngleHintOutlineSize",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],We.prototype,"satisfiesConstraintScreenThreshold",void 0),We=_([Y("esri.views.interactive.snapping.Settings.Defaults")],We);const t2=new We;var Ir;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Ir||(Ir={}));let pa=class extends Ot{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new kt}};_([E({constructOnly:!0})],pa.prototype,"layer",void 0),_([E()],pa.prototype,"enabled",void 0),_([E()],pa.prototype,"updating",void 0),_([E()],pa.prototype,"availability",void 0),_([E()],pa.prototype,"sublayerSources",void 0),pa=_([Y("esri.views.interactive.snapping.FeatureSnappingLayerSource")],pa);let Li=class extends Ot{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new kt,this.distance=t2.distance,this.touchSensitivityMultiplier=t2.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const e=this.featureSources;e.some(LM)&&At.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(Hlt),s=this._get("_effectiveFeatureSources")?.filter(LM)??new kt;for(const b of i){const S=s.find((A=>A.layer===b.layer.parent));if(S)S.sublayerSources.includes(b)||S.sublayerSources.add(b);else if(b.layer.parent){const A=new pa({layer:b.layer.parent});A.sublayerSources.add(b),s.add(A)}}for(const b of s){const S=b.sublayerSources.filter((A=>!i.includes(A)));b.sublayerSources.removeMany(S)}s.removeMany(s.filter((b=>b.sublayerSources.length===0)));const l=e.filter(Vlt),f=this._get("_effectiveFeatureSources")??new kt,{added:y,removed:v}=lw(f.toArray(),[...l,...s]);return f.removeMany(v),f.addMany(y),f}};function LM(t){return t.layer.type==="subtype-group"}function Vlt(t){return t.layer.type!=="subtype-group"}function Hlt(t){return t.layer.type==="subtype-sublayer"}_([E()],Li.prototype,"enabled",void 0),_([E()],Li.prototype,"enabledToggled",void 0),_([E()],Li.prototype,"forceDisabled",void 0),_([E()],Li.prototype,"selfEnabled",void 0),_([E()],Li.prototype,"featureEnabled",void 0),_([E()],Li.prototype,"gridEnabled",void 0),_([E()],Li.prototype,"attributeRulesEnabled",void 0),_([E({type:kt.ofType(pa)})],Li.prototype,"featureSources",void 0),_([E()],Li.prototype,"distance",void 0),_([E()],Li.prototype,"touchSensitivityMultiplier",void 0),_([E({readOnly:!0})],Li.prototype,"effectiveEnabled",null),_([E({readOnly:!0})],Li.prototype,"effectiveGridEnabled",null),_([E({readOnly:!0})],Li.prototype,"effectiveSelfEnabled",null),_([E({readOnly:!0})],Li.prototype,"effectiveFeatureEnabled",null),_([E({readOnly:!0})],Li.prototype,"_effectiveFeatureSources",null),Li=_([Y("esri.views.interactive.snapping.SnappingOptions")],Li);const n5t=Symbol("grid-placement-graphic");function GN(t,e){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s}function o5t(t,e){return Math.sqrt(GN(t,e))}function Wlt(t,e){e.sort(((i,s)=>Pa(i.targetPoint,t)-Pa(s.targetPoint,t)))}var pn;function a5t({parameters:{point:t,distance:e,returnEdge:i,vertexMode:s,coordinateHelper:{spatialReference:l},filter:f},mode:y,returnZ:v,filter:b}){const S=b?.clone()??new jt({where:"1=1"});return S.returnZ=v??y==="3d",f&&(S.geometry=f.geometry,S.distance=f.distance,S.spatialRelationship=f.spatialRelationship,S.where=dK(S.where,f.where),S.timeExtent=rJ(S.timeExtent,f.timeExtent),S.objectIds=Jlt(S.objectIds,f.objectIds)),{point:uf(t[0],t[1],t[2],l.toJSON()),mode:y,distance:e,returnEdge:i,vertexMode:s,query:S.toJSON()}}function Jlt(t,e){return t||e?e?t?Array.from(w$(new Set(t),new Set(e))):e:t:null}function l5t(t,e,i){return{left:CM(t.leftVertex.pos,e,i),right:CM(t.rightVertex.pos,e,i)}}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(pn||(pn={}));const DM=Symbol("snapping-toggle");function Ylt(t,e=()=>{}){const i=zt((()=>({view:t.view,snappingOptions:t.snappingOptions})),(({view:s,snappingOptions:l})=>{if(t.removeHandles(DM),!s||!l)return;const f=Le.TOOL,y=[s.on("key-down",(v=>{v.key!==Bx.toggle||v.repeat||(l.enabledToggled=!0,e())}),f),s.on("key-up",(v=>{v.key===Bx.toggle&&(l.enabledToggled=!1,e())}),f),s.on("pointer-move",(v=>{const b=v.native.ctrlKey;l.enabledToggled!==b&&(l.enabledToggled=b,e())}),f)];t.addHandles(y,DM)}),zi);t.addHandles(i)}function u5t(t){return Rg(t)&&"utilityNetworks"in t&&!!t.utilityNetworks?.length}function e2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Klt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function BN(t,e,i,s,l){return t[0]=e,t[1]=i,t[2]=s,t[3]=l,t}function Zlt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function qN(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function VN(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function HN(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Xlt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Qlt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function tut(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function eut(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function iut(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function rut(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function sut(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t}function WN(t,e){const i=e[0]-t[0],s=e[1]-t[1],l=e[2]-t[2],f=e[3]-t[3];return Math.sqrt(i*i+s*s+l*l+f*f)}function JN(t,e){const i=e[0]-t[0],s=e[1]-t[1],l=e[2]-t[2],f=e[3]-t[3];return i*i+s*s+l*l+f*f}function YN(t){const e=t[0],i=t[1],s=t[2],l=t[3];return Math.sqrt(e*e+i*i+s*s+l*l)}function KN(t){const e=t[0],i=t[1],s=t[2],l=t[3];return e*e+i*i+s*s+l*l}function nut(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function out(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function aut(t,e){const i=e[0],s=e[1],l=e[2],f=e[3];let y=i*i+s*s+l*l+f*f;return y>0&&(y=1/Math.sqrt(y),t[0]=i*y,t[1]=s*y,t[2]=l*y,t[3]=f*y),t}function ZN(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function lut(t,e,i,s){const l=e[0],f=e[1],y=e[2],v=e[3];return t[0]=l+s*(i[0]-l),t[1]=f+s*(i[1]-f),t[2]=y+s*(i[2]-y),t[3]=v+s*(i[3]-v),t}function uut(t,e=1){const i=j2;let s,l,f,y,v,b;do s=2*i()-1,l=2*i()-1,v=s*s+l*l;while(v>=1);do f=2*i()-1,y=2*i()-1,b=f*f+y*y;while(b>=1);const S=Math.sqrt((1-v)/b);return t[0]=e*s,t[1]=e*l,t[2]=e*f*S,t[3]=e*y*S,t}function hut(t,e,i){const s=e[0],l=e[1],f=e[2],y=e[3];return t[0]=i[0]*s+i[4]*l+i[8]*f+i[12]*y,t[1]=i[1]*s+i[5]*l+i[9]*f+i[13]*y,t[2]=i[2]*s+i[6]*l+i[10]*f+i[14]*y,t[3]=i[3]*s+i[7]*l+i[11]*f+i[15]*y,t}function cut(t,e,i){const s=e[0],l=e[1],f=e[2],y=i[0],v=i[1],b=i[2],S=i[3],A=S*s+v*f-b*l,P=S*l+b*s-y*f,k=S*f+y*l-v*s,C=-y*s-v*l-b*f;return t[0]=A*S+C*-y+P*-b-k*-v,t[1]=P*S+C*-v+k*-y-A*-b,t[2]=k*S+C*-b+A*-v-P*-y,t[3]=e[3],t}function put(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function fut(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function d6(t,e){const i=t[0],s=t[1],l=t[2],f=t[3],y=e[0],v=e[1],b=e[2],S=e[3],A=Oi();return Math.abs(i-y)<=A*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-v)<=A*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-b)<=A*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-S)<=A*Math.max(1,Math.abs(f),Math.abs(S))}const dut=qN,yut=VN,gut=HN,mut=WN,vut=JN,wut=YN,but=KN;Object.freeze(Object.defineProperty({__proto__:null,add:Zlt,ceil:Xlt,copy:e2,copyVec3:Klt,dist:mut,distance:WN,div:gut,divide:HN,dot:ZN,equals:d6,exactEquals:fut,floor:Qlt,inverse:out,len:wut,length:YN,lerp:lut,max:eut,min:tut,mul:yut,multiply:VN,negate:nut,normalize:aut,random:uut,round:iut,scale:rut,scaleAndAdd:sut,set:BN,sqrDist:vut,sqrLen:but,squaredDistance:JN,squaredLength:KN,str:put,sub:dut,subtract:qN,transformMat4:hut,transformQuat:cut},Symbol.toStringTag,{value:"Module"}));function Nh(){return[0,0,0,0]}function _ut(t){return[t[0],t[1],t[2],t[3]]}function ru(t,e,i,s){return[t,e,i,s]}function xut(t,e,i,s){return[t,e,i,s]}function Sut(t,e=Nh()){const i=Math.min(4,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function XN(){return Nh()}function QN(){return ru(1,1,1,1)}function tL(){return ru(1,0,0,0)}function eL(){return ru(0,1,0,0)}function iL(){return ru(0,0,1,0)}function rL(){return ru(0,0,0,1)}const Tut=XN(),Mut=QN(),Eut=tL(),$ut=eL(),Aut=iL(),Iut=rL();Object.freeze(Object.defineProperty({__proto__:null,ONES:Mut,UNIT_W:Iut,UNIT_X:Eut,UNIT_Y:$ut,UNIT_Z:Aut,ZEROS:Tut,clone:_ut,create:Nh,freeze:xut,fromArray:Sut,fromValues:ru,ones:QN,unitW:rL,unitX:tL,unitY:eL,unitZ:iL,zeros:XN},Symbol.toStringTag,{value:"Module"}));function h5t(t,e,i){const s=ge(t,e)/ge(t,t);return fs(i,t,s)}function H3(t,e){return ge(t,e)/un(t)}function Put(t,e){const i=ge(t,e)/(un(t)*un(e));return-t4(i)}function c5t(t,e,i){cn(xy,t),cn(W3,e);const s=ge(xy,W3),l=t4(s),f=Ls(xy,xy,W3);return ge(f,i)<0?2*Math.PI-l:l}const xy=Mt(),W3=Mt();function y6(){return[1,0,0,0,1,0,0,0,1]}function Out(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function kut(t,e,i,s,l,f,y,v,b){return[t,e,i,s,l,f,y,v,b]}const Rut=y6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Rut,clone:Out,create:y6,fromValues:kut},Symbol.toStringTag,{value:"Module"}));function g6(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Cut(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function Nut(t,e,i,s,l,f,y,v,b,S,A,P,k,C,L,F){return[t,e,i,s,l,f,y,v,b,S,A,P,k,C,L,F]}const Lut=g6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Lut,clone:Cut,create:g6,fromValues:Nut},Symbol.toStringTag,{value:"Module"}));function m6(){return[0,0,0,1]}function Dut(t){return[t[0],t[1],t[2],t[3]]}function jut(t,e,i,s){return[t,e,i,s]}const Fut=m6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Fut,clone:Dut,create:m6,fromValues:jut},Symbol.toStringTag,{value:"Module"}));let ff=class Du{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&vp((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new Du(de)}static createVec3f64(){return new Du(Mt)}static createVec4f64(){return new Du(Nh)}static createMat3f64(){return new Du(y6)}static createMat4f64(){return new Du(g6)}static createQuatf64(){return new Du(m6)}get test(){}};const p5t=ff.createVec2f64(),ke=ff.createVec3f64(),zut=ff.createVec4f64();ff.createMat3f64();const Uut=ff.createMat4f64(),f5t=ff.createQuatf64();function d5t(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],s=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}function y5t(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),s=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),l=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return Mi(t,i,s,l),t}function v6(t,e,i){Math.abs(t[0])>Math.abs(t[1])?Mi(e,0,1,0):Mi(e,1,0,0),Ls(i,t,e),Ls(e,i,t),cn(i,i),cn(e,e)}function ps(t=B0){return[t[0],t[1],t[2],t[3]]}function Gut(t=B0[0],e=B0[1],i=B0[2],s=B0[3]){return sL(t,e,i,s,zut.get())}function But(t,e){return sL(e[0],e[1],e[2],e[3],t)}function g5t(t){return t}function sL(t,e,i,s,l=ps()){return l[0]=t,l[1]=e,l[2]=i,l[3]=s,l}function $1(t,e,i){const s=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],l=Math.abs(s-1)>1e-5&&s>1e-12?1/Math.sqrt(s):1;return i[0]=e[0]*l,i[1]=e[1]*l,i[2]=e[2]*l,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function w6(t,e,i,s=ps()){const l=i[0]-e[0],f=i[1]-e[1],y=i[2]-e[2],v=t[0]-e[0],b=t[1]-e[1],S=t[2]-e[2],A=f*S-y*b,P=y*v-l*S,k=l*b-f*v,C=A*A+P*P+k*k,L=Math.abs(C-1)>1e-5&&C>1e-12?1/Math.sqrt(C):1;return s[0]=A*L,s[1]=P*L,s[2]=k*L,s[3]=-(s[0]*t[0]+s[1]*t[1]+s[2]*t[2]),s}function nL(t,e,i,s=0,l=Math.floor(i*(1/3)),f=Math.floor(i*(2/3))){if(i<3)return!1;e(Hf,s);let y=l,v=!1;for(;y<i-1&&!v;)e(Xh,y),y++,v=!Ge(Hf,Xh);if(!v)return!1;for(y=Math.max(y,f),v=!1;y<i&&!v;)e(Bu,y),y++,Ye(Sy,Hf,Xh),cn(Sy,Sy),Ye(Ty,Xh,Bu),cn(Ty,Ty),v=!Ge(Hf,Bu)&&!Ge(Xh,Bu)&&Math.abs(ge(Sy,Ty))<qut;return v?(w6(Hf,Xh,Bu,t),!0):(s!==0||l!==1||f!==2)&&nL(t,e,i,0,1,2)}function m5t(t,e,i=!0){const s=e.length/3;return nL(t,((l,f)=>Mi(l,e[3*f+0],e[3*f+1],e[3*f+2])),i?s-1:s)}const qut=.99619469809,Hf=Mt(),Xh=Mt(),Bu=Mt(),Sy=Mt(),Ty=Mt();function v5t(t,e,i){return e!==t&&But(t,e),t[3]=-ge(t,i),t}function w5t(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function b5t(t,e,i,s){return Ls(Bu,e,t),$1(i,Bu,s)}function oL(t,e,i,s){return hv(cv(t,e,Ye(ke.get(),i,e),Jut,s))}function _5t(t,e,i){return e!=null&&hv(cv(t,e.origin,e.direction,Yut,i))}function x5t(t,e,i){return hv(cv(t,e.origin,e.vector,So.NONE,i))}function S5t(t,e,i){return hv(cv(t,e.origin,e.vector,So.CLAMP,i))}function Vut(t,e){return A1(t,e)>=0}function T5t(t,e){const i=ge(t,e.ray.direction),s=-A1(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return s>0;const l=s/i;return i>0?l<e.c1&&(e.c1=l):l>e.c0&&(e.c0=l),e.c0<=e.c1}function aL(t,e,i){const s=fs(ke.get(),t,-t[3]),l=Wut(t,Ye(ke.get(),e,s),ke.get());return Ns(i,l,s),i}function Hut(t,e,i,s){const l=t,f=ke.get(),y=ke.get();v6(l,f,y);const v=Ye(ke.get(),i,e),b=H3(f,v),S=H3(y,v),A=H3(l,v);return Mi(s,b,S,A)}function Wut(t,e,i){const s=fs(ke.get(),t,ge(t,e));return Ye(i,e,s),i}function q9(t,e){return Math.abs(A1(t,e))}function A1(t,e){return ge(t,e)+t[3]}var go;function hv(t){return t===go.INTERSECTS_INSIDE_OUT||t===go.INTERSECTS_OUTSIDE_IN}function cv(t,e,i,s,l){const f=ge(t,i),y=A1(t,e);if(f===0)return y>=0?go.INSIDE:go.OUTSIDE;let v=-y/f;return s&So.CLAMP&&(v=Rr(v,0,1)),!(s&So.INFINITE_MIN)&&v<0||!(s&So.INFINITE_MAX)&&v>1?y>=0?go.INSIDE:go.OUTSIDE:(Ns(l,e,fs(l,i,v)),y>=0?go.INTERSECTS_INSIDE_OUT:go.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(go||(go={}));const B0=[0,0,1,0];var So;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(So||(So={}));const Jut=So.INFINITE_MIN|So.INFINITE_MAX,Yut=So.INFINITE_MAX;let pv=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&vp((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*jM);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,jM));e++)this._items.push(this._allocator())}};const jM=1024;function fv(t){return t?FM(Or(t.origin),Or(t.direction)):FM(Mt(),Mt())}function FM(t,e){return{origin:t,direction:e}}function E5t(t,e){const i=Qut.get();return i.origin=t,i.direction=e,i}function $5t(t,e=fv()){return Zut(t.origin,t.direction,e)}function Kut(t,e,i=fv()){return hn(i.origin,t),Ye(i.direction,e,t),i}function Zut(t,e,i=fv()){return hn(i.origin,t),hn(i.direction,e),i}function A5t(t,e){const i=Ls(ke.get(),cn(ke.get(),t.direction),Ye(ke.get(),e,t.origin));return ge(i,i)}function Xut(t,e,i){const s=ge(t.direction,Ye(i,e,t.origin));return Ns(i,t.origin,fs(i,t.direction,s)),i}const Qut=new pv((()=>fv()));function zM(t,e){const i=un(t),s=e4(t[2]/i),l=Math.atan2(t[1]/i,t[0]/i);return Mi(e,i,s,l),e}const tht=b6();function b6(){return Nh()}const lL=d6,eht=d6;function uL(t,e){return e2(e,t)}function hL(t,e){return ru(t[0],t[1],t[2],e)}function iht(t){return t}function rht(t){t[0]=t[1]=t[2]=t[3]=0}function sht(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function I1(t){return t[3]}function nht(t){return t}function oht(t,e,i,s){return ru(t,e,i,s)}function aht(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function lht(t,e,i){return t!==i&&uL(t,i),i}function uht(t,e){return e}function dv(t,e,i){if(e==null||!pL(t,e,i2))return!1;let{t0:s,t1:l}=i2;if((s<0||l<s&&l>0)&&(s=l),s<0)return!1;if(i){const{origin:f,direction:y}=e;i[0]=f[0]+y[0]*s,i[1]=f[1]+y[1]*s,i[2]=f[2]+y[2]*s}return!0}function cL(t,e,i){const s=Kut(e,i);if(!pL(t,s,i2))return[];const{origin:l,direction:f}=s,{t0:y,t1:v}=i2,b=S=>{const A=Mt();return Ji(A,l,f,S),yv(t,A,A)};return Math.abs(y-v)<Oi()?[b(y)]:[b(y),b(v)]}const i2={t0:0,t1:0};function pL(t,e,i){const{origin:s,direction:l}=e,f=hht;f[0]=s[0]-t[0],f[1]=s[1]-t[1],f[2]=s[2]-t[2];const y=l[0]*l[0]+l[1]*l[1]+l[2]*l[2];if(y===0)return!1;const v=2*(l[0]*f[0]+l[1]*f[1]+l[2]*f[2]),b=v*v-4*y*(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]-t[3]*t[3]);if(b<0)return!1;const S=Math.sqrt(b);return i.t0=(-v-S)/(2*y),i.t1=(-v+S)/(2*y),!0}const hht=Mt();function cht(t,e){return dv(t,e,null)}function pht(t,e,i){if(dv(t,e,i))return i;const s=fL(t,e,ke.get());return Ns(i,e.origin,fs(ke.get(),e.direction,Ta(e.origin,s)/un(e.direction))),i}function fL(t,e,i){const s=ke.get(),l=Uut.get();Ls(s,e.origin,e.direction);const f=I1(t);Ls(i,s,e.origin),fs(i,i,1/un(i)*f);const y=dL(t,e.origin),v=Put(e.origin,i);return QP(l,v+y,s),JR(i,i,l),i}function fht(t,e,i,s){const l=I1(t),f=l*l,y=e+.5*Math.PI,v=i*i+f-2*Math.cos(y)*i*l,b=Math.sqrt(v),S=v-f;if(S<=0)return .5;const A=Math.sqrt(S),P=Math.acos(A/b)-Math.asin(l/(b/Math.sin(y)));return Math.min(1,(P+.5*s)/s)}function dht(t,e,i){return dv(t,e,i)?i:(Xut(e,t,i),yv(t,i,i))}function yv(t,e,i){const s=Ye(ke.get(),e,t),l=fs(ke.get(),s,t[3]/un(s));return Ns(i,l,t)}function yht(t,e){const i=Ye(ke.get(),e,t),s=nf(i),l=t[3]*t[3];return Math.sqrt(Math.abs(s-l))}function dL(t,e){const i=Ye(ke.get(),e,t),s=un(i),l=I1(t),f=l+Math.abs(l-s);return t4(l/f)}const J3=Mt();function yL(t,e,i,s){const l=Ye(J3,e,t);switch(i){case Nl.X:{const f=zM(l,J3)[2];return Mi(s,-Math.sin(f),Math.cos(f),0)}case Nl.Y:{const f=zM(l,J3),y=f[1],v=f[2],b=Math.sin(y);return Mi(s,-b*Math.cos(v),-b*Math.sin(v),Math.cos(y))}case Nl.Z:return cn(s,l);default:return}}function gL(t,e){const i=Ye(V9,e,t);return un(i)-t[3]}function ght(t,e,i,s){const l=gL(t,e),f=yL(t,e,Nl.Z,V9),y=fs(V9,f,i-l);return Ns(s,e,y)}function mht(t,e){const i=Pa(t,e),s=I1(t);return i<=s*s}function vht(t,e,i=Nh()){const s=Ta(t,e),l=t[3],f=e[3];return s+f<l?(e2(i,t),i):s+l<f?(e2(i,e),i):(V4(i,t,e,(s+f-l)/(2*s)),i[3]=(s+l+f)/2,i)}const V9=Mt(),wht=b6(),I5t=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:tht,altitudeAt:gL,angleToSilhouette:dL,axisAt:yL,cameraFrustumCoverage:fht,clear:rht,closestPoint:dht,closestPointOnSilhouette:fL,containsPoint:mht,copy:uL,create:b6,distanceToSilhouette:yht,elevate:aht,equals:eht,exactEquals:lL,fromCenterAndRadius:hL,fromRadius:sht,fromValues:oht,getCenter:nht,getExtent:uht,getRadius:I1,intersectLine:cL,intersectRay:dv,intersectRayClosestSilhouette:pht,intersectsRay:cht,projectPoint:yv,setAltitudeAt:ght,setExtent:lht,tmpSphere:wht,union:vht,wrap:iht},Symbol.toStringTag,{value:"Module"}));function Y3(t,e){return t[0]*e[1]-t[1]*e[0]}function bht(t,e,i){const s=iu(i,e)/Ia(i);return rf(t,i,s)}function P5t(t,e,i,s,l=i){return Gi(ah,s,i),Gi(r2,e,l),bht(zp,r2,ah),C4(t,l,zp)}function O5t(t,e,i,s){Gi(ah,e,i);const l=s/Cp(ah);return Bn(t,i,ah,l)}function k5t(t,e){const i=t.start,s=t.end,l=e.start,f=e.end,y=Gi(ah,s,i),v=Gi(mL,f,l),b=Y3(y,v);if(Math.abs(b)<=xht)return[];const S=Gi(r2,i,l),A=Y3(v,S)/b,P=Y3(y,S)/b;if(A>=0){if(P>=0||e.type===li.LINE)return[Bn(zp,i,y,A)]}else if(t.type===li.LINE&&(P>=0||e.type===li.LINE))return[Bn(zp,i,y,A)];return[]}function _ht(t,e,i){const s=[],l=Gi(ah,t.end,t.start),f=Gi(mL,t.start,e),y=Ia(l),v=2*iu(l,f),b=v*v-4*y*(Ia(f)-i*i);if(b===0){const S=-v/(2*y);(t.type===li.LINE||S>=0)&&s.push(Bn(zp,t.start,l,S))}else if(b>0){const S=Math.sqrt(b),A=(-v+S)/(2*y);(t.type===li.LINE||A>=0)&&s.push(Bn(zp,t.start,l,A));const P=(-v-S)/(2*y);(t.type===li.LINE||P>=0)&&s.push(Bn(r2,t.start,l,P))}return s}var li;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(li||(li={}));const xht=1e-6,ah=de(),mL=de(),r2=de(),zp=de();function _6({start:t,end:e,type:i},s,l){const f=[],y=Gi(P1,e,t),v=Gi(gv,t,s),b=Ia(y),S=2*iu(y,v),A=S*S-4*b*(Ia(v)-l*l);if(A===0){const P=-S/(2*b);(i===Ps.PLANE||P>=0)&&f.push(Bn(de(),t,y,P))}else if(A>0){const P=Math.sqrt(A),k=(-S+P)/(2*b);(i===Ps.PLANE||k>=0)&&f.push(Bn(de(),t,y,k));const C=(-S-P)/(2*b);(i===Ps.PLANE||C>=0)&&f.push(Bn(de(),t,y,C))}return f}function vL(t,e){const i=t.start,s=t.end,l=Gi(P1,s,i),f=Mi(vv,-l[1],l[0],0),y=e.start,v=e.end,b=ls(S6,v,y),S=ge(b,f),A=Mi(EL,i[0],i[1],0),P=ls($L,A,y),k=ge(P,f),C=Oi();if(Math.abs(S)<C)return[];const L=Ji(AL,y,b,k/S);if(e.type===li.RAY){const F=ls(H9,L,y);if(ge(F,b)<-C)return[]}if(t.type===Ps.HALF_PLANE){const F=J2(gv,L,i);if(iu(F,l)<-C)return[]}return[Or(L)]}function Sht(t,e){return Mht(s2(T6,e[2],t),e)}function wL(t,e){return TL(s2(T6,0,t),s2(Iht,0,e)).map((([s,l])=>Sa(s,l)))}function bL(t,e,i){return xL(t,s2(T6,t[2],e),i)}function _L(t,e,i,s=Mt()){const l=Gi(P1,t,e),f=Cp(l);return Bn(s,e,l,f===0?1:i/f),s[2]=t[2],s}function xL(t,{start:e,end:i,type:s},l=Mt()){const f=ls(mv,t,e),y=ls(vv,i,e),v=ge(f,y)/ge(y,y);return Ji(l,e,y,s===li.RAY?Math.max(v,0):v)}const Tht=(()=>{const t=Mt(),e=Mt(),i=Mt();return({start:s,end:l},{center:f,radius:y,normal:v,slicePlane:b})=>{const S=$1(f,v,Aht);if(Ve(q9(S,s),0)&&Ve(q9(S,l),0)){v6(v,t,e);const P=(L,F)=>(Ye(i,F,f),Fi(L,ge(i,t),ge(i,e)),L),k=_ht({start:P(P1,s),end:P(gv,l),type:li.LINE},cR,y),C=[];for(const[L,F]of k){const q=hn(Mt(),f);Ji(q,q,t,L),Ji(q,q,e,F),b&&!Fl(b,q)||C.push(q)}return C}const A=Mt();return oL(S,s,l,A)?!Ve(Ta(A,f),y)||b&&!Fl(b,A)?[]:[A]:[]}})();function SL({start:t,end:e,type:i},s,l){const f=[],y=Ye(mv,e,t),v=Gi(gv,t,s),b=Ia(y),S=2*iu(y,v),A=S*S-4*b*(Ia(v)-l*l);if(A===0){const P=-S/(2*b);(i===li.LINE||P>=0)&&f.push(Ji(Mt(),t,y,P))}else if(A>0){const P=Math.sqrt(A),k=(-S+P)/(2*b);(i===li.LINE||k>=0)&&f.push(Ji(Mt(),t,y,k));const C=(-S-P)/(2*b);(i===li.LINE||C>=0)&&f.push(Ji(Mt(),t,y,C))}return f}function TL(t,e){const i=t.start,s=t.end,l=e.start,f=e.end,y=ls(mv,s,i),v=ls(vv,f,l),b=ls(S6,l,i),S=Ls(EL,y,v);if(!Ve(ge(b,S),0))return[];const A=Pm(S);if(Ve(A,0))return[];const P=Ls($L,b,v),k=ge(P,S)/A,C=Ji(AL,i,y,k);if(t.type===li.RAY){const L=ls(H9,C,i);if(ge(y,L)<-Oi())return[]}if(e.type===li.RAY){const L=ls(H9,C,l);if(ge(v,L)<-Oi())return[]}return[Or(C)]}function Mht({start:t,end:e,type:i},s){const l=ls(mv,s,t),f=ls(vv,e,t),y=Ls(S6,f,l),v=Pm(y)/Pm(f),b=Oi();if(v<b)switch(i){case li.LINE:return[Or(s)];case li.RAY:return ge(f,l)<-b?[]:[Or(s)]}return[]}function x6(t,e,i,s){const[l,f]=t,[y,v]=i,b=y-l,S=v-f,A=b*b+S*S,P=Math.sqrt(A);if(P>e+s)return[];if(P<Math.abs(e-s))return[];if(Ve(P,0)&&Ve(e,s))return[];const k=(e*e-s*s+A)/(2*P),C=Math.sqrt(e*e-k*k),L=C*S/P,F=C*b/P,[q,H]=nR(P1,t,i,k/P);return Ve(L,F)?[Sa(q,H)]:[Sa(q+L,H-F),Sa(q-L,H+F)]}function s2(t,e,{start:i,end:s,type:l}){return Mi(t.start,i[0],i[1],e),Mi(t.end,s[0],s[1],e),t.type=$ht[l],t}function ML(t,e){return Ve(t[2],e[2])}function Ve(t,e){return eh(Math.abs(t-e),0,Oi())}function Eht(t,e){return e.filter((i=>Fl(t,i)))}function Fl(t,e){return Vut(t,e)}var Ps;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(Ps||(Ps={}));const $ht={[Ps.PLANE]:li.LINE,[Ps.HALF_PLANE]:li.RAY},P1=de(),gv=de(),mv=Mt(),vv=Mt(),S6=Mt(),EL=Mt(),$L=Mt(),AL=Mt(),H9=Mt(),Aht=ps(),T6={start:Mt(),end:Mt(),type:li.LINE},Iht={start:Mt(),end:Mt(),type:li.LINE};class gn{intersect(e){return ra(this,e)}closestPoints(e){return[this.closestTo(e)]}}class df extends gn{constructor(e){super(),this.point=e}equals(e){return this===e||kn(e)&&Ge(this.point,e.point)}closestTo(){return Fp(this.point)}}class M6 extends gn{constructor(e,i,s){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:s}}equals(e){return this===e||lo(e)&&this.lineLike.type===e.lineLike.type&&Ge(this.start,e.start)&&Ge(this.end,e.end)}closestTo(e){const i=Ds();return xL(e,this.lineLike,i),i}}class E6 extends M6{constructor(e,i){super(e,i,li.LINE)}}class Pht extends M6{constructor(e,i){super(e,i,li.RAY)}}class IL extends gn{constructor(e){super(),this.constraints=e}equals(e){return this===e||W9(e)&&Qd(this.constraints,e.constraints,((i,s)=>i.equals(s)))}closestTo(e){let i,s=1/0;for(const l of this.constraints){const f=l.closestTo(e),y=Pa(e,f);y<s&&(s=y,i=f)}return Fp(i??e)}closestPoints(e){return this.constraints.flatMap((i=>i===this?[]:i.closestPoints(e)))}}class PL extends gn{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||ho(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=Ds();return _L(e,this.center,this.radius,i),i}}class $6 extends gn{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||na(e)&&Ge(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=Ds();return _L(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new A6(Fp(this.center),this.radius,Zl(0,0,1))}}class A6 extends gn{constructor(e,i,s,l=void 0){super(),this.center=e,this.radius=i,this.normal=s,this.slicePlane=l}equals(e){return this===e||al(e)&&Ge(this.center,e.center)&&Ge(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:s}=this;aL(this.getPlane(Oht),e,K3);const l=ls(K3,K3,i),f=nf(l);if(Ve(f,0))return Fp(e);const y=s/Math.sqrt(f),v=Ds();Ji(v,i,l,y);const{slicePlane:b}=this;return b&&!Fl(b,v)?P6(b,this)?.closestTo(e)??Fp(e):v}getPlane(e=ps()){return $1(this.center,this.normal,e)}}const K3=Mt(),Oht=ps();class kht extends gn{constructor(e){super(),this.z=e}equals(e){return this===e||sa(e)&&this.z===e.z}closestTo(e){return Zl(e[0],e[1],this.z)}getPlane(e=ps()){return Mi(UM,0,0,this.z),$1(UM,kP,e)}}const UM=Mt();class I6 extends gn{constructor(e,i,s){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:s}}equals(e){return this===e||uo(e)&&this.planeLike.type===e.planeLike.type&&Ge(this.start,e.start)&&Ge(this.end,e.end)}closestTo(e){const i=Ds();return bL(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:s}=this.planeLike;return Math.sign(iu(Gi(Rht,s,i),Gi(Cht,e,i)))>0?this.end:this.start}getPlane(e=ps()){const i=hn(GM,this.end);return i[2]+=1,w6(this.start,this.end,i,e)}getSlicePlane(e=ps()){const{start:i,end:s,type:l}=this.planeLike;if(l===Ps.PLANE)return;const f=Mi(GM,i[0],i[1],0),y=Mi(BM,s[0],s[1],0),v=Ye(BM,y,f);return $1(f,v,e),e}}const Rht=de(),Cht=de(),GM=Mt(),BM=Mt();class R5t extends I6{constructor(e,i){super(e,i,Ps.HALF_PLANE)}}class OL extends I6{constructor(e,i){super(e,i,Ps.PLANE)}}class Nht extends gn{constructor(e,i){super(),this.sphere=hL(e,i)}equals(e){return this===e||oa(e)&&lL(this.sphere,e.sphere)}closestTo(e){const i=Ds();return yv(this.sphere,e,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}}class kL extends gn{constructor(e,i,s){super(),this.start=e,this.end=i,this.getZ=s,this.planeLike={start:e,end:i,type:Ps.PLANE}}equals(e){return this===e||n2(e)&&Ge(this.start,e.start)&&Ge(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return Uht(this,e)}addIfOnTheGround(e,i){for(const s of i){const l=this.getZ(s[0],s[1])??0;Ve(s[2],l)&&(s[2]=l,e.push(s))}}}class Lht extends gn{constructor(e,i,s){super(),this._x=e,this._y=i,this._z=s}equals(e){return this===e||rct(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,s]){return UN(this._x??e,this._y??i,this._z??s)}}class Dht extends gn{constructor(e,i,s,l,f){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=s,this._z=l,this._directionDegrees=f}equals(e){return this===e||ict(e)&&l9(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,i,s]){return Fi(Wf,e,i),l9(Wf,this._origin)||this._applyDirectionAndDistance(Wf),UN(Wf[0],Wf[1],this._z??s)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)oh(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)Fht(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=pf(jht,this._origin,e,this._spatialReference);oh(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}}const Wf=[0,0],jht=new cf;function Fht(t,e,i,s,l){let{azimuth:f,distance:y}=pf(zht,e,s,l);f??=0;let v=y*Math.cos((f-i)*Fr);v=Math.max(0,v),oh(t,e,i,v,l)}const zht=new cf;function Uht(t,e){const i=Ds();return bL(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??CL,i}function ra(t,e){if(W9(t)){const i=[];for(const s of t.constraints){const l=s.intersect(e);l&&i.push(l)}return O6(i)}if(W9(e))return ra(e,t);if(n2(t))return qM(t,e);if(n2(e))return qM(e,t);if(kn(t)){const{point:i}=t;if(kn(e))return Ge(i,e.point)?t:void 0;const s=e.closestTo(i);return YR(s,i)?t:void 0}if(lo(t)){if(kn(e))return ra(e,t);if(lo(e))return Fn(TL(t.lineLike,e.lineLike));if(sa(e))return Ght(t,e);if(uo(e))return Fn(vL(e.planeLike,t.lineLike));if(ho(e))return Fn(SL(t.lineLike,e.center,e.radius));if(al(e))return Fn(Tht(t.lineLike,e));if(na(e))return Bht(t,e);if(oa(e))return qht(t,e)}else if(sa(t)){if(kn(e)||lo(e))return ra(e,t);if(sa(e))return Vht(t,e);if(uo(e))return Hht(t,e);if(ho(e))return Wht(t,e);if(al(e))return Yht(t,e);if(na(e))return Jht(t,e);if(oa(e))return Kht(t,e)}else if(uo(t)){if(kn(e)||lo(e)||sa(e))return ra(e,t);if(uo(e))return Z3(wL(t.planeLike,e.planeLike));if(ho(e))return Z3(_6(t.planeLike,e.center,e.radius));if(al(e))return Xht(t,e);if(na(e))return Zht(t,e);if(oa(e))return Qht(t,e)}else if(ho(t)){if(kn(e)||lo(e)||sa(e)||uo(e))return ra(e,t);if(ho(e))return Z3(x6(t.center,t.radius,e.center,e.radius));if(al(e))return void 0;if(na(e))return tct(t,e);if(oa(e))return void 0}else if(al(t)){if(kn(e)||lo(e)||sa(e)||uo(e)||ho(e))return ra(e,t);if(al(e))return void 0;if(na(e))return e.asCircle(),void 0;if(oa(e))return void 0}else if(na(t)){if(kn(e)||lo(e)||sa(e)||uo(e)||ho(e)||al(e))return ra(e,t);if(na(e))return ect(e,t);if(oa(e))return void 0}else if(oa(t)){if(kn(e)||lo(e)||sa(e)||uo(e)||ho(e)||na(e))return ra(e,t);if(oa(e))return void 0}}const Ght=(()=>{const t=ps();return(e,i)=>{const{start:s,end:l}=e;if(ML(s,l)&&Ve(s[2],i.z))return e;const f=Ds();return oL(i.getPlane(t),s,l,f)?new df(f):void 0}})();function Bht({lineLike:t},{center:e,radius:i}){const s=e[2];return Fn(SL(t,e,i).filter((l=>Ve(l[2],s))))}function qht({lineLike:t},{sphere:e}){return Fn(cL(e,t.start,t.end))}const P6=(()=>{const t=Nh(),e=Mt(),i=Mt();return(s,l,f)=>{const{normal:y,center:v,radius:b}=l;v6(y,e,i);const S=s,A=b*ge(S,e),P=b*ge(S,i);BN(t,v[0],v[1],v[2],1);const k=ZN(s,t),C=Math.hypot(A,P),L=Ve(C,0);if(Ve(q9(s,v),0)){if(L)return l;if(Ve(b,0))return!f||Fl(f,v)?new df(Fp(v)):void 0;Ls(e,S,y),cn(e,e);const nt=new Array,vt=Or(v);Ji(vt,vt,e,b),f&&!Fl(f,vt)||nt.push(vt);const Tt=Or(v);return Ji(Tt,Tt,e,-b),f&&!Fl(f,Tt)||nt.push(Tt),Fn(nt)}if(L)return;const F=-k/C;if(Math.abs(F)>1||Ve(F,1))return;const q=Math.atan(A/P),H=e4(F)-q,J=Math.PI-H,Q=new Array,tt=Mt();Ji(tt,v,e,b*Math.cos(H)),Ji(tt,tt,i,b*Math.sin(H)),Q.push(tt);const et=Mt();return Ji(et,v,e,b*Math.cos(J)),Ji(et,et,i,b*Math.sin(J)),Q.push(et),Fn(f?Eht(f,Q):Q)}})();function Vht(t,e){return Ve(t.z,e.z)?t:void 0}function Hht({z:t},{planeLike:e}){const[i,s]=e.start,[l,f]=e.end,y=Zl(i,s,t),v=Zl(l,f,t);return e.type===Ps.PLANE?new E6(y,v):new Pht(y,v)}function Wht(t,e){const[i,s]=e.center;return new $6(Zl(i,s,t.z),e.radius)}function Jht(t,e){return Ve(e.center[2],t.z)?e:void 0}const Yht=(()=>{const t=ps();return(e,i)=>P6(e.getPlane(t),i,i.slicePlane)})();function Kht(t,{center:e,radius:i}){const s=Math.abs(e[2]-t.z);if(s>i&&!Ve(s,i))return;const l=Zl(e[0],e[1],t.z),f=Math.sqrt(i**2-s**2);return Ve(f,0)?void 0:new $6(l,f)}const Zht=(()=>{const t=ps();return(e,{center:i,radius:s})=>{const l=_6(e.planeLike,i,s),f=i[2];e.getSlicePlane(t);const y=new Array;for(const[v,b]of l){const S=[v,b,f];Fl(t,S)&&y.push(S)}return Fn(y)}})(),Xht=(()=>{const t=ps(),e=ps();return(i,s)=>P6(i.getPlane(t),s,i.getSlicePlane(e))})(),Qht=(()=>{const t=ps();return(e,{center:i,radius:s})=>{const l=e.getPlane(t),f=A1(l,i),y=Math.abs(f);if(y>s&&!Ve(y,s))return;const v=Math.sqrt(s**2-f**2);if(Ve(v,0)){const A=Ds();return aL(l,i,A),new df(A)}const b=Ds(),S=Or(l);return Ji(b,i,S,f),new A6(b,v,S,e.getSlicePlane())}})();function tct(t,e){const i=Rp(t.center,e.center);return Ve(i,0)&&Ve(t.radius,e.radius)?e:RL(x6(t.center,t.radius,e.center,e.radius),e.center[2])}function ect(t,e){if(!ML(t.center,e.center))return;const i=Rp(t.center,e.center);return Ve(i,0)&&Ve(t.radius,e.radius)?t:RL(x6(t.center,t.radius,e.center,e.radius),t.center[2])}function qM(t,e){const{planeLike:i,getZ:s}=t,l=new Array;if(kn(e))t.addIfOnTheGround(l,Sht(i,e.point));else if(lo(e))t.addIfOnTheGround(l,vL(i,e.lineLike));else if(ho(e))for(const[f,y]of _6(i,e.center,e.radius)){const v=s(f,y);v!=null&&l.push(Ao(f,y,v))}else if(uo(e)||n2(e))for(const[f,y]of wL(i,e.planeLike)){const v=s(f,y)??CL;l.push(Ao(f,y,v))}return Fn(l)}function Z3(t){return O6(t.map((([e,i])=>{const s=Zl(e,i,0),l=Zl(e,i,1);return new E6(s,l)})))}function Fn(t){return O6(t.map((e=>e?new df(e):void 0)))}function RL(t,e){return Fn(t.map((([i,s])=>[i,s,e])))}function O6(t){if(t.length!==0)return t.length===1?t[0]??void 0:new IL(t.filter(yh))}function W9(t){return t instanceof IL}function kn(t){return t instanceof df}function lo(t){return t instanceof M6}function sa(t){return t instanceof kht}function uo(t){return t instanceof I6}function ho(t){return t instanceof PL}function na(t){return t instanceof $6}function al(t){return t instanceof A6}function oa(t){return t instanceof Nht}function n2(t){return t instanceof kL}function ict(t){return t instanceof Dht}function rct(t){return t instanceof Lht}const CL=0;let yf=class{constructor(e,i,s,l){this.targetPoint=e,this.constraint=i,this.isDraped=s,this.domain=l}},NL=class extends yf{constructor({targetPoint:e,objectId:i,constraint:s,isDraped:l}){super(e,s,l,Ir.FEATURE),this.objectId=i}},wv=class{constructor(e,i){this.isDraped=e,this.domain=i}},Po=class LL extends wv{constructor(e,i,s,l,f=Ir.ALL,y=!0,v=!0){super(l,f),this.type=e,this.lineStart=i,this.lineEnd=s,this.fadeLeft=y,this.fadeRight=v}equals(e){return e instanceof LL&&this.type===e.type&&Ge(this.lineStart,e.lineStart)&&Ge(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return Ta(this.lineStart,this.lineEnd)}},sct=class extends NL{constructor(e){super({...e,isDraped:!0,constraint:new kL(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new Po(pn.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},nct=class extends NL{constructor(e){super({...e,constraint:new E6(e.edgeStart,e.edgeEnd)})}get hints(){return[new Po(pn.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},oct=class DL extends wv{constructor(e,i,s=Ir.ALL){super(i,s),this.intersectionPoint=e}equals(e){return e instanceof DL&&Ge(this.intersectionPoint,e.intersectionPoint)}},Dg=class extends yf{constructor(e,i,s,l){super(e,new df(e),l,Ir.ALL),this.first=i,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new oct(this.targetPoint,this.isDraped,this.domain)]}},act=class extends yf{constructor({lineStart:e,lineEnd:i,targetPoint:s,isDraped:l}){super(s,new OL(e,i),l,Ir.SELF),this._referenceLineHint=new Po(pn.REFERENCE_EXTENSION,e,i,l,this.domain)}get hints(){return[this._referenceLineHint,new Po(pn.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},lct=class jL extends wv{constructor(e,i,s,l=Ir.ALL){super(s,l),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof jL&&Ge(this.lineStart,e.lineStart)&&Ge(this.lineEnd,e.lineEnd)}},uct=class extends yf{constructor({referenceLine:e,lineStart:i,targetPoint:s,isDraped:l}){const f=Or(i),{left:y,right:v}=e;Ye(f,Ns(f,f,v),y),super(s,new OL(i,f),l,Ir.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new Po(pn.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new lct(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map((e=>new Po(pn.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight)))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((s=>{Ge(e.right,s.edge.left)&&(s.fadeLeft=!1,i.fadeRight=!1),Ge(e.right,s.edge.right)&&(s.fadeRight=!1,i.fadeRight=!1),Ge(e.left,s.edge.right)&&(s.fadeRight=!1,i.fadeLeft=!1),Ge(e.left,s.edge.left)&&(s.fadeLeft=!1,i.fadeLeft=!1)})),this._referenceLines.push(i)}},FL=class zL extends wv{constructor(e,i,s,l,f=Ir.ALL){super(l,f),this.previousVertex=e,this.centerVertex=i,this.nextVertex=s}equals(e){return e instanceof zL&&Ge(this.previousVertex,e.previousVertex)&&Ge(this.centerVertex,e.centerVertex)&&Ge(this.nextVertex,e.nextVertex)}},hct=class extends yf{constructor({targetPoint:e,constraint:i,previousVertex:s,otherVertex:l,otherVertexType:f,isDraped:y,selfSnappingType:v,objectId:b,domain:S}){super(e,i,y,S??Ir.SELF),this.previousVertex=s,this.otherVertex=l,this.otherVertexType=f,this.selfSnappingType=v??a2.None,this.objectId=b??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===o2.CENTER?this.otherVertex:this.targetPoint,s=this.otherVertexType===o2.CENTER?this.targetPoint:this.otherVertex;return[new Po(pn.TARGET,i,s,this.isDraped,this.domain),new Po(pn.REFERENCE,e,i,this.isDraped,this.domain),new FL(this.previousVertex,i,s,this.isDraped,this.domain)]}};var o2,a2;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(o2||(o2={})),(function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"})(a2||(a2={}));let cct=class extends yf{constructor({targetPoint:e,point1:i,point2:s,isDraped:l}){super(e,new PL(V4(Mt(),i,s,.5),.5*T1(i,s)),l,Ir.SELF),this._p1=i,this._p2=s}get hints(){return[new Po(pn.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new Po(pn.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new FL(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function pct(t,e,i,s,l=Mt()){const f=hn(fct,t);return f[2]=CN(s,f,e,i)||0,s.renderCoordsHelper.toRenderCoords(f,e,l),l}const fct=Mt();function dct(t,e,i,s){return s.type==="2d"?(My.x=t[0],My.y=t[1],My.spatialReference=e,s.toScreen(My)):(pct(t,e,i,s,VM),s.state.camera.projectToScreen(VM,X3),Yi(X3[0],X3[1]))}const My=uf(0,0,0,null),VM=Mt(),X3=qH();let bv;function UL(){return!!bv&&x2()}async function yct(){if(!UL()){const[t,e]=await Promise.all([mt(()=>import("./OperatorGeodeticLength-BLaFLoGF.js"),__vite__mapDeps([349,350,351,352,353,354,124,355,1,2,3,4])),mt(()=>import("./ProjectionTransformation-DUElxxPj.js").then(i=>i.aV),__vite__mapDeps([352,353,350,354,124,355])).then((i=>i.aG)).then((({injectPe:i})=>i)),C_()]);bv=new t.OperatorGeodeticLength,e(eA)}}function gct(t,e,i){return bv.execute(t,e,i,null)}function mct(){return bv.supportsCurves()}const vct={geodesic:0,loxodrome:1,"great-elliptic":2,"normal-section":3,"shape-preserving":4};let k6,GL,BL,qL;function VL(){return!!k6&&UL()}async function HL(){if(!VL()){const[t]=await Promise.all([mt(()=>import("./apiConverter-BUGr88Kj.js"),__vite__mapDeps([356,350,353,352,354,124,355,357,1,2,3,4])),yct()]);k6=t.fromGeometry,GL=t.fromSpatialReference,BL=t.getSpatialReference,qL=mct()}}function R6(t,e={}){const{curveType:i="geodesic",unit:s}=e,l=BL(t);let f=gct(k6(t),GL(l),vct[i]);return f&&s&&(f=Te(f,"meters",s)),f}const q5t=Object.freeze(Object.defineProperty({__proto__:null,execute:R6,isLoaded:VL,load:HL,get supportsCurves(){return qL}},Symbol.toStringTag,{value:"Module"}));function V5t(t){return hf(t)||ks(t)}function C6(t,e,i,...s){return hf(t)?e.apply(void 0,s):t.isWebMercator?i.apply(void 0,s):null}function wct(t){const{spatialReference:e}=t;return C6(e,Tct,Mct,t)}function bct(t,e){if(!di(t.spatialReference,e.spatialReference))return null;const{spatialReference:i}=t;return Ey[0]=t.x,Ey[1]=t.y,Ey[2]=t.hasZ?t.z:0,$y[0]=e.x,$y[1]=e.y,$y[2]=e.hasZ?e.z:0,WL(Ey,$y,i)}function WL(t,e,i){return C6(i,xct,Sct,t,e,i)}const _ct={geodesicLength:wct,geodesicDistanceBetweenPoints:bct,geodesicDistance:WL};async function JL(){return await HL(),_ct}function xct(t,e,i){return Ro(pf($ct,t,e,i).distance,"meters")}function Sct(t,e,i){return Ro(R6(Ect(t,e,i),{unit:"meters"}),"meters")}function Tct(t){return Ro(Llt([t],"meters")[0],"meters")}function Mct(t){return Ro(R6(t,{unit:"meters"}),"meters")}function Ect(t,e,i){return new ei({spatialReference:i,paths:[[[...t],[...e]]]})}const $ct=new cf,Ey=Mt(),$y=Mt();let Rn=class extends fn.EventedMixin(Ot){constructor(e){super(e),this.options=new Li,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=fa.MAIN}initialize(){this.addHandles([zt((()=>{const{distance:e,touchSensitivityMultiplier:i,effectiveSelfEnabled:s,effectiveFeatureEnabled:l,effectiveGridEnabled:f}=this.options;return{selfEnabled:s,featureEnabled:l,gridEnabled:this.view.type==="2d"&&f,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:i}}),((e,i)=>{i&&(this.doneSnapping(),this.emit("changed")),this._loadTask?.abort(),this._loadTask=_2((s=>this._updateEngines(e,i,s)))}),zi),zt((()=>this.options),(e=>{for(const i of this._engines)i.options=e}),$o)])}destroy(){this._loadTask?.abort(),this._destroyEngines()}get updating(){return this._engines.some((e=>e.updating))||!this._loadTask?.finished}_destroyEngines(){this._engineCache.forEach((e=>e.destroy())),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,i,s){if(!e.viewReady)return void this._destroyEngines();i?.viewSpatialReference!==e.viewSpatialReference&&this._destroyEngines();const l=this._engineCache,f=await Promise.allSettled([e.featureEnabled&&!l.has("feature")?this._createFeatureSnappingEngine(s):void 0,e.selfEnabled&&!l.has("self")?this._createSelfSnappingEngine(s):void 0,e.gridEnabled&&!l.has("grid")?this._createGridSnappingEngine(s):void 0]);if(s.aborted)for(const y of f)y.status==="fulfilled"&&y.value?.engine.destroy();else{for(const y of f)y.status==="fulfilled"&&y.value&&l.set(y.value.type,y.value.engine);this._engines=Array.from(l.values())}}async _createSelfSnappingEngine(e){const[{SelfSnappingEngine:i},s]=await Promise.all([mt(()=>import("./SelfSnappingEngine-AqJnRWQK.js"),__vite__mapDeps([358,1,2,3,4])),JL()]);return Ce(e),{type:"self",engine:new i({view:this.view,options:this.options,geodesicLengthMeasurementUtils:s})}}async _createGridSnappingEngine(e){const{view:i}=this;if(i.type!=="2d")return;const{GridSnappingEngine:s}=await mt(()=>import("./GridSnappingEngine-DCp6PsfP.js"),__vite__mapDeps([359,215,276,1,2,3,4]));return Ce(e),{type:"grid",engine:new s({view:i,options:this.options})}}async _createFeatureSnappingEngine(e){const{FeatureSnappingEngine:i}=await mt(()=>import("./FeatureSnappingEngine-BaAhnkQs.js"),__vite__mapDeps([360,1,2,3,219,286,237,4]));Ce(e);const{view:s,options:l}=this,{spatialReference:f}=s;return{type:"feature",engine:new i({view:s,options:l,spatialReference:f})}}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,s=e*i;return s*s}snap(e){return Pct(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:s}=e;this._removeVisualization();const l=this._currentMainCandidate;if(l==null)return i;const f=this._selectUpdateInput(e);if(f==null)return i;const{spatialReference:y}=s,v=Jn(f,y);if(v==null)return i;const{view:b}=this,{elevationInfo:S,visualizer:A}=s,P=[],k=G0(v,b,S),C=l.constraint.closestTo(k);if(!this._arePointsWithinScreenThreshold(k,C,s)||!tw(l,s.drawConstraints))return this._resetSnappingState(),i;l.targetPoint=V3(C),P.push(...l.hints);for(const L of this._currentOtherActiveCandidates)tw(L,s.drawConstraints)&&(L.targetPoint=V3(C),P.push(...L.hints));return A!=null&&this.addHandles(A.draw(P,{spatialReference:y,elevationInfo:Oct(s),view:b,selfSnappingZ:s.selfSnappingZ}),Q3),NM(C,b,i,s)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case fa.MAIN:return e;case fa.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=fa.MAIN}_removeVisualization(){this.removeHandles(Q3)}async _snapSinglePoint({point:e,context:i,signal:s}){const{view:l}=this,{elevationInfo:f}=i,y=G0(e,l,f),v=await this._fetchCandidates(y,Ir.ALL,i,s);return this._createSnapResult(y,fa.MAIN,v,l,e,i,s)}async _snapMultiPoint({point:e,scenePoint:i,context:s,signal:l}){const{view:f}=this,{coordinateHelper:y,elevationInfo:v,spatialReference:b}=s;await g1(i.spatialReference,b);const S=Jn(i,b),A=G0(S,f,v),P=await this._fetchCandidates(A,Ir.FEATURE,s,l);if(P.length>0){const L=await this._fetchCandidates(A,Ir.SELF,s,l);return this._createSnapResult(A,fa.SCENE,[...P,...L],f,S,s,l)}const k=G0(e,f,v),C=await this._fetchCandidates(k,Ir.SELF,s,l);return this._createSnapResult(k,fa.MAIN,C,f,{z:y.hasZ()&&e.hasZ?e.z??0:void 0,m:y.hasM()&&e.hasM?e.m??0:void 0},s,l)}async _fetchCandidates(e,i,s,l){return(await Promise.all(this._engines.map((f=>f.fetchCandidates(e,i,s,l))))).flat()}_createSnapResult(e,i,s,l,f,y,v){return{get valid(){return!Os(v)},apply:()=>{const{spatialReference:b}=y,{snappedPoint:S,hints:A}=this._processCandidates(e,i,s,y);return this._removeVisualization(),y.visualizer!=null&&this.addHandles(y.visualizer.draw(A,{spatialReference:b,elevationInfo:Eh,view:l,selfSnappingZ:y.selfSnappingZ}),Q3),NM(S,l,f,y)}}}_processCandidates(e,i,s,l){if(s.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),Wlt(e,s);const f=this._currentMainCandidate;if(f!=null){const y=Ict(f,s);if(y>=0){if(!(s[y]instanceof Dg))return this._intersectWithOtherCandidates(y,s,e,i,l);if(this._arePointsWithinScreenThreshold(e,f.targetPoint,l))return this._updateSnappingCandidate(f,i,s,l)}}return this._intersectWithOtherCandidates(0,s,e,i,l)}_intersectWithOtherCandidates(e,i,s,l,f){const{coordinateHelper:y}=f,v=i[e],b=[];for(let S=0;S<i.length;++S){if(S===e)continue;const A=i[S],P=v.constraint.intersect(A.constraint);if(P)for(const k of P.closestPoints(v.targetPoint))b.push([new Dg(V3(k),v,A,A.isDraped),this._squaredScreenDistance(s,k,y)])}return b.length>0&&(b.sort(((S,A)=>S[1]-A[1])),b[0][1]<this._squaredPointProximityThreshold(f.pointer))?this._updateSnappingCandidate(b[0][0],l,i,f):tw(v,f.drawConstraints)?this._updateSnappingCandidate(v,l,i,f):{snappedPoint:s,hints:[]}}_updateSnappingCandidate(e,i,s,l){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const f=this._currentMainCandidate.targetPoint,y=[];y.push(...e.hints);for(const v of s){if(e instanceof Dg){if(v.constraint.equals(e.first.constraint)||v.constraint.equals(e.second.constraint))continue}else if(v.constraint.equals(e.constraint))continue;const b=v.constraint.closestTo(f);this._squaredScreenDistance(b,f,l.coordinateHelper)<Act()&&(v.targetPoint=f,this._currentOtherActiveCandidates.push(v),y.push(...v.hints))}return{snappedPoint:f,hints:y}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,s){return this._squaredScreenDistance(e,i,s.coordinateHelper)<this._squaredPointProximityThreshold(s.pointer)}_squaredScreenDistance(e,i,s){return GN(this._toScreen(e,s),this._toScreen(i,s))}_toScreen(e,i){return dct(e,i.spatialReference,Eh,this.view)}get test(){}};var fa;_([E({constructOnly:!0})],Rn.prototype,"view",void 0),_([E()],Rn.prototype,"options",void 0),_([E({readOnly:!0})],Rn.prototype,"updating",null),_([E()],Rn.prototype,"_loadTask",void 0),_([E()],Rn.prototype,"_engines",void 0),_([E()],Rn.prototype,"_squaredMouseProximityThreshold",null),_([E()],Rn.prototype,"_squaredTouchProximityThreshold",null),Rn=_([Y("esri.views.interactive.snapping.SnappingManager")],Rn),(function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"})(fa||(fa={}));const Q3="visualization-handle";function Act(){return t2.satisfiesConstraintScreenThreshold*t2.satisfiesConstraintScreenThreshold}function tw(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof sct||t instanceof nct||t instanceof act||t instanceof uct||t instanceof cct)&&(!(t instanceof hct)||e.direction==null&&t.selfSnappingType===a2.LastVertex)}function Ict(t,e){return t instanceof Dg?ew(e,t.first)>=0&&ew(e,t.second)>=0?0:-1:ew(e,t)}function ew(t,e){let i=-1;for(let s=0;s<t.length;++s)if(e.constraint.equals(t[s].constraint)){i=s;break}return i}function Pct(t){return t.scenePoint!=null}function Oct({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Eh:e}function J9(t,e,i){i=i||2;var s,l,f,y,v,b,S,A=e&&e.length,P=A?e[0]*i:t.length,k=YL(t,0,P,i,!0),C=[];if(!k||k.next===k.prev)return C;if(A&&(k=Lct(t,e,k,i)),t.length>80*i){s=f=t[0],l=y=t[1];for(var L=i;L<P;L+=i)(v=t[L])<s&&(s=v),(b=t[L+1])<l&&(l=b),v>f&&(f=v),b>y&&(y=b);S=(S=Math.max(f-s,y-l))!==0?1/S:0}return Wd(k,C,i,s,l,S),C}function YL(t,e,i,s,l){var f,y;if(l===Z9(t,e,i,s)>0)for(f=e;f<i;f+=s)y=HM(f,t[f],t[f+1],y);else for(f=i-s;f>=e;f-=s)y=HM(f,t[f],t[f+1],y);if(y&&_v(y,y.next)){var v=y.next;Yd(y),y=v}return y}function Xl(t,e){if(!t)return t;e||(e=t);var i,s=t;do if(i=!1,s.steiner||!_v(s,s.next)&&pi(s.prev,s,s.next)!==0)s=s.next;else{var l=s.prev;if(Yd(s),(s=e=l)===s.next)break;i=!0}while(i||s!==e);return e}function Wd(t,e,i,s,l,f,y){if(t){!y&&f&&Uct(t,s,l,f);for(var v,b,S=t;t.prev!==t.next;)if(v=t.prev,b=t.next,f?Rct(t,s,l,f):kct(t))e.push(v.i/i),e.push(t.i/i),e.push(b.i/i),Yd(t),t=b.next,S=b.next;else if((t=b)===S){y?y===1?Wd(t=Cct(Xl(t),e,i),e,i,s,l,f,2):y===2&&Nct(t,e,i,s,l,f):Wd(Xl(t),e,i,s,l,f,1);break}}}function kct(t){var e=t.prev,i=t,s=t.next;if(pi(e,i,s)>=0)return!1;for(var l=t.next.next;l!==t.prev;){if(kc(e.x,e.y,i.x,i.y,s.x,s.y,l.x,l.y)&&pi(l.prev,l,l.next)>=0)return!1;l=l.next}return!0}function Rct(t,e,i,s){var l=t.prev,f=t,y=t.next;if(pi(l,f,y)>=0)return!1;for(var v=l.x<f.x?l.x<y.x?l.x:y.x:f.x<y.x?f.x:y.x,b=l.y<f.y?l.y<y.y?l.y:y.y:f.y<y.y?f.y:y.y,S=l.x>f.x?l.x>y.x?l.x:y.x:f.x>y.x?f.x:y.x,A=l.y>f.y?l.y>y.y?l.y:y.y:f.y>y.y?f.y:y.y,P=Y9(v,b,e,i,s),k=Y9(S,A,e,i,s),C=t.prevZ,L=t.nextZ;C&&C.z>=P&&L&&L.z<=k;){if(C!==t.prev&&C!==t.next&&kc(l.x,l.y,f.x,f.y,y.x,y.y,C.x,C.y)&&pi(C.prev,C,C.next)>=0||(C=C.prevZ,L!==t.prev&&L!==t.next&&kc(l.x,l.y,f.x,f.y,y.x,y.y,L.x,L.y)&&pi(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;C&&C.z>=P;){if(C!==t.prev&&C!==t.next&&kc(l.x,l.y,f.x,f.y,y.x,y.y,C.x,C.y)&&pi(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;L&&L.z<=k;){if(L!==t.prev&&L!==t.next&&kc(l.x,l.y,f.x,f.y,y.x,y.y,L.x,L.y)&&pi(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function Cct(t,e,i){var s=t;do{var l=s.prev,f=s.next.next;!_v(l,f)&&KL(l,s,s.next,f)&&Jd(l,f)&&Jd(f,l)&&(e.push(l.i/i),e.push(s.i/i),e.push(f.i/i),Yd(s),Yd(s.next),s=t=f),s=s.next}while(s!==t);return Xl(s)}function Nct(t,e,i,s,l,f){var y=t;do{for(var v=y.next.next;v!==y.prev;){if(y.i!==v.i&&qct(y,v)){var b=ZL(y,v);return y=Xl(y,y.next),b=Xl(b,b.next),Wd(y,e,i,s,l,f),void Wd(b,e,i,s,l,f)}v=v.next}y=y.next}while(y!==t)}function Lct(t,e,i,s){var l,f,y,v=[];for(l=0,f=e.length;l<f;l++)(y=YL(t,e[l]*s,l<f-1?e[l+1]*s:t.length,s,!1))===y.next&&(y.steiner=!0),v.push(Bct(y));for(v.sort(Dct),l=0;l<v.length;l++)i=Xl(i=jct(v[l],i),i.next);return i}function Dct(t,e){return t.x-e.x}function iw(t){if(t.next.prev===t)return t;let e=t;for(;;){const i=e.next;if(i.prev===e||i===e||i===t)break;e=i}return e}function jct(t,e){var i=Fct(t,e);if(!i)return e;var s=ZL(i,t),l=Xl(i,i.next);let f=iw(s);return Xl(f,f.next),l=iw(l),iw(e===i?l:e)}function Fct(t,e){var i,s=e,l=t.x,f=t.y,y=-1/0;do{if(f<=s.y&&f>=s.next.y&&s.next.y!==s.y){var v=s.x+(f-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(v<=l&&v>y){if(y=v,v===l){if(f===s.y)return s;if(f===s.next.y)return s.next}i=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!i)return null;if(l===y)return i;var b,S=i,A=i.x,P=i.y,k=1/0;s=i;do l>=s.x&&s.x>=A&&l!==s.x&&kc(f<P?l:y,f,A,P,f<P?y:l,f,s.x,s.y)&&(b=Math.abs(f-s.y)/(l-s.x),Jd(s,t)&&(b<k||b===k&&(s.x>i.x||s.x===i.x&&zct(i,s)))&&(i=s,k=b)),s=s.next;while(s!==S);return i}function zct(t,e){return pi(t.prev,t,e.prev)<0&&pi(e.next,t,t.next)<0}function Uct(t,e,i,s){var l=t;do l.z===null&&(l.z=Y9(l.x,l.y,e,i,s)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==t);l.prevZ.nextZ=null,l.prevZ=null,Gct(l)}function Gct(t){var e,i,s,l,f,y,v,b,S=1;do{for(i=t,t=null,f=null,y=0;i;){for(y++,s=i,v=0,e=0;e<S&&(v++,s=s.nextZ);e++);for(b=S;v>0||b>0&&s;)v!==0&&(b===0||!s||i.z<=s.z)?(l=i,i=i.nextZ,v--):(l=s,s=s.nextZ,b--),f?f.nextZ=l:t=l,l.prevZ=f,f=l;i=s}f.nextZ=null,S*=2}while(y>1);return t}function Y9(t,e,i,s,l){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*l)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*l)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Bct(t){var e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t);return i}function kc(t,e,i,s,l,f,y,v){return(l-y)*(e-v)-(t-y)*(f-v)>=0&&(t-y)*(s-v)-(i-y)*(e-v)>=0&&(i-y)*(f-v)-(l-y)*(s-v)>=0}function qct(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Vct(t,e)&&(Jd(t,e)&&Jd(e,t)&&Hct(t,e)&&(pi(t.prev,t,e.prev)||pi(t,e.prev,e))||_v(t,e)&&pi(t.prev,t,t.next)>0&&pi(e.prev,e,e.next)>0)}function pi(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _v(t,e){return t.x===e.x&&t.y===e.y}function KL(t,e,i,s){var l=Iy(pi(t,e,i)),f=Iy(pi(t,e,s)),y=Iy(pi(i,s,t)),v=Iy(pi(i,s,e));return l!==f&&y!==v||!(l!==0||!Ay(t,i,e))||!(f!==0||!Ay(t,s,e))||!(y!==0||!Ay(i,t,s))||!(v!==0||!Ay(i,e,s))}function Ay(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Iy(t){return t>0?1:t<0?-1:0}function Vct(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&KL(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function Jd(t,e){return pi(t.prev,t,t.next)<0?pi(t,e,t.next)>=0&&pi(t,t.prev,e)>=0:pi(t,e,t.prev)<0||pi(t,t.next,e)<0}function Hct(t,e){var i=t,s=!1,l=(t.x+e.x)/2,f=(t.y+e.y)/2;do i.y>f!=i.next.y>f&&i.next.y!==i.y&&l<(i.next.x-i.x)*(f-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next;while(i!==t);return s}function ZL(t,e){var i=new K9(t.i,t.x,t.y),s=new K9(e.i,e.x,e.y),l=t.next,f=e.prev;return t.next=e,e.prev=t,i.next=l,l.prev=i,s.next=i,i.prev=s,f.next=s,s.prev=f,s}function HM(t,e,i,s){var l=new K9(t,e,i);return s?(l.next=s.next,l.prev=s,s.next.prev=l,s.next=l):(l.prev=l,l.next=l),l}function Yd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function K9(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Z9(t,e,i,s){for(var l=0,f=e,y=i-s;f<i;f+=s)l+=(t[y]-t[f])*(t[f+1]+t[y+1]),y=f;return l}J9.deviation=function(t,e,i,s){var l=e&&e.length,f=l?e[0]*i:t.length,y=Math.abs(Z9(t,0,f,i));if(l)for(var v=0,b=e.length;v<b;v++){var S=e[v]*i,A=v<b-1?e[v+1]*i:t.length;y-=Math.abs(Z9(t,S,A,i))}var P=0;for(v=0;v<s.length;v+=3){var k=s[v]*i,C=s[v+1]*i,L=s[v+2]*i;P+=Math.abs((t[k]-t[L])*(t[C+1]-t[k+1])-(t[k]-t[C])*(t[L+1]-t[k+1]))}return y===0&&P===0?0:Math.abs((P-y)/y)},J9.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,l=0;l<t.length;l++){for(var f=0;f<t[l].length;f++)for(var y=0;y<e;y++)i.vertices.push(t[l][f][y]);l>0&&(s+=t[l-1].length,i.holes.push(s))}return i};function O1(t){return t?{origin:Or(t.origin),vector:Or(t.vector)}:{origin:Mt(),vector:Mt()}}function Wct(t,e){const i=Kct.get();return i.origin=t,i.vector=e,i}function W5t(t,e=O1()){return Jct(t.origin,t.vector,e)}function Jct(t,e,i=O1()){return hn(i.origin,t),hn(i.vector,e),i}function J5t(t,e,i=O1()){return hn(i.origin,t),Ye(i.vector,e,t),i}function Y5t(t,e){const i=Ye(ke.get(),e,t.origin),s=ge(t.vector,i),l=ge(t.vector,t.vector),f=Rr(s/l,0,1),y=Ye(ke.get(),fs(ke.get(),t.vector,f),i);return ge(y,y)}function K5t(t,e,i){return Yct(t,e,0,1,i)}function Z5t(t,e,i){return Ns(i,t.origin,fs(i,t.vector,e))}function Yct(t,e,i,s,l){const{vector:f,origin:y}=t,v=Ye(ke.get(),e,y),b=ge(f,v)/nf(f);return fs(l,f,Rr(b,i,s)),Ns(l,l,t.origin)}function X5t(t,e){if(XL(t,Wct(e.origin,e.direction),!1,l2)){const{tA:i,pB:s,distance2:l}=l2;if(i>=0&&i<=1)return l;if(i<0)return Pa(t.origin,s);if(i>1)return Pa(Ns(ke.get(),t.origin,t.vector),s)}return null}function Q5t(t,e,i){return!!XL(t,e,!0,l2)&&(hn(i,l2.pA),!0)}function XL(t,e,i,s){const f=t.origin,y=Ns(ke.get(),f,t.vector),v=e.origin,b=Ns(ke.get(),v,e.vector),S=ke.get(),A=ke.get();if(S[0]=f[0]-v[0],S[1]=f[1]-v[1],S[2]=f[2]-v[2],A[0]=b[0]-v[0],A[1]=b[1]-v[1],A[2]=b[2]-v[2],Math.abs(A[0])<1e-6&&Math.abs(A[1])<1e-6&&Math.abs(A[2])<1e-6)return!1;const P=ke.get();if(P[0]=y[0]-f[0],P[1]=y[1]-f[1],P[2]=y[2]-f[2],Math.abs(P[0])<1e-6&&Math.abs(P[1])<1e-6&&Math.abs(P[2])<1e-6)return!1;const k=S[0]*A[0]+S[1]*A[1]+S[2]*A[2],C=A[0]*P[0]+A[1]*P[1]+A[2]*P[2],L=S[0]*P[0]+S[1]*P[1]+S[2]*P[2],F=A[0]*A[0]+A[1]*A[1]+A[2]*A[2],q=(P[0]*P[0]+P[1]*P[1]+P[2]*P[2])*F-C*C;if(Math.abs(q)<1e-6)return!1;let H=(k*C-L*F)/q,J=(k+C*H)/F;i&&(H=Rr(H,0,1),J=Rr(J,0,1));const Q=ke.get(),tt=ke.get();return Q[0]=f[0]+H*P[0],Q[1]=f[1]+H*P[1],Q[2]=f[2]+H*P[2],tt[0]=v[0]+J*A[0],tt[1]=v[1]+J*A[1],tt[2]=v[2]+J*A[2],s.tA=H,s.tB=J,s.pA=Q,s.pB=tt,s.distance2=Pa(Q,tt),!0}const l2={tA:0,tB:0,pA:Mt(),pB:Mt(),distance2:0},Kct=new pv((()=>O1()));function Zct(t){return t?{p0:Or(t.p0),p1:Or(t.p1),p2:Or(t.p2)}:{p0:Mt(),p1:Mt(),p2:Mt()}}function Xct(t,e,i){const s=e[0]-t[0],l=e[1]-t[1],f=i[0]-t[0],y=i[1]-t[1];return .5*Math.abs(s*y-l*f)}function t9t(t,e,i){return Ye(rw,e,t),Ye(WM,i,t),.5*un(Ls(rw,rw,WM))}new pv(O1);new pv((()=>Zct()));const rw=Mt(),WM=Mt(),Qct=new Et(hA),q0=new Et(S2),V0=new Et(T2),tpt=new Et(cA);function ept(t){const e=JM.get(t);if(e)return e;let i=Qct;if(t)if(t===q0)i=q0;else if(t===V0)i=V0;else{const s=t.wkid,l=t.latestWkid;if(s!=null||l!=null)bp(s)||bp(l)?i=q0:(_p(s)||_p(l))&&(i=V0);else{const f=t.wkt2??t.wkt;if(f){const y=f.toUpperCase();y===ipt?i=q0:y===rpt&&(i=V0)}}}return JM.set(t,i),i}const JM=new Map,ipt=q0.wkt.toUpperCase(),rpt=V0.wkt.toUpperCase();function N6(t){return nA(t)?Vl(t)||ks(t)||qw(t)||$d(t)?tpt:t:ept(t)}function spt(t,e=u2()){return QL(t,e)}function npt(t,e=u2()){return QL(t,e,!1)}function QL(t,e,i=t.hasZ){const s=N6(t.spatialReference),l=vU(s);if(l==null)return null;const f=(v,b)=>!(b.length<2)&&(Mi(v,b[0],b[1],i&&b[2]||0),!0);let y=0;for(const v of t.rings){const b=v.length;if(b<3)continue;const{positionsWorldCoords:S}=e;for(;S.length<b;)S.push(Mt());const A=opt,P=Mi(apt,0,0,0),k=1/b;for(let F=0;F<b;F++){if(!f(A,v[F])||!jl(A,t.spatialReference,S[F],s))return null;Ji(P,P,S[F],k)}const C=w6(S[0],S[1],P,Gut());if(nf(C)===0)continue;for(let F=0;F<b;F++)Hut(C,P,S[F],S[F]);const L=lpt(S);for(let F=0;F<L.length;F+=3)y+=Xct(S[L[F]],S[L[F+1]],S[L[F+2]])}return lv(y,l)}const opt=Mt(),apt=Mt();function u2(){return{positionsWorldCoords:[]}}function lpt(t){return J9(upt(t),[],2)}function upt(t){const e=new Float64Array(2*t.length);for(let i=0;i<t.length;++i){const s=t[i],l=2*i;e[l]=s[0],e[l+1]=s[1]}return e}const hpt=t=>({geodesicArea(e){const{spatialReference:i}=e;return C6(i,ppt,(s=>fpt(t,s)),e)}});async function cpt(){const t=await mt(()=>Promise.resolve().then(()=>Sft),void 0);return hpt(t)}function ppt(t){return lv(Math.abs(Nlt([t],"square-meters")[0]),"square-meters")}function fpt(t,e){try{return lv(Math.abs(t.geodesicArea(e,"square-meters")),"square-meters")}catch{return null}}const dpt=t=>({autoAreaByElevationMode(e,i,s=u2()){if(i==="on-the-ground"){const l=t.geodesicArea(e);return l??npt(e,s)}return spt(e,s)},autoArea2D(e,i=u2()){return this.autoAreaByElevationMode(e,"on-the-ground",i)}});let sw=null;async function Py(){return sw||(sw=dpt(await cpt())),sw}var To;function ypt(t){return gpt(t,To.Horizontal)}function gpt(t,e){const{hasZ:i,spatialReference:s}=t,l=N6(s);let f=0;const y=vA(l);if(y==null)return null;const v=e===To.Direct?wpt:L6;for(const b of t.paths){if(b.length<2)continue;const S=b.length-1;for(let A=0;A<S;++A){const P=b[A];sn[0]=P[0],sn[1]=P[1],sn[2]=i?P[2]:0;const k=b[A+1];nn[0]=k[0],nn[1]=k[1],nn[2]=i?k[2]:0;const C=v(sn,nn,s);if(C==null)return null;f+=C.value}}return Ro(f,y)}function mpt(t,e){const{spatialReference:i}=t;return di(i,e.spatialReference)?(sn[0]=t.x,sn[1]=t.y,sn[2]=t.hasZ?t.z:0,nn[0]=e.x,nn[1]=e.y,nn[2]=e.hasZ?e.z:0,L6(sn,nn,i)):null}function e9t(t,e){const{spatialReference:i}=t;return di(i,e.spatialReference)?(sn[0]=t.x,sn[1]=t.y,sn[2]=t.hasZ?t.z:0,nn[0]=e.x,nn[1]=e.y,nn[2]=e.hasZ?e.z:0,bpt(sn,nn,i)):null}function i9t(t){return t!=null?vpt(t.hasZ?t.z:0,t.spatialReference):null}function vpt(t,e){const i=wA(e);return i!=null?Ro(t??0,i):null}function wpt(t,e,i){const s=D6(t,e,i,To.Direct);return s!=null?Ro(s.direct,s.unit):null}function L6(t,e,i){const s=D6(t,e,i,To.Horizontal);return s!=null?Ro(s.horizontal,s.unit):null}function bpt(t,e,i){const s=D6(t,e,i,To.Vertical);return s!=null?Ro(s.verticalSigned,s.unit):null}function D6(t,e,i,s){const l=N6(i),f=vA(l);if(f==null)return null;const y=e[2]-t[2];if(s===To.Vertical)return{verticalSigned:y,unit:f};if(!jl(t,i,nw,l)||!jl(e,i,Oy,l))return null;if(s===To.Direct)return{direct:Ta(Oy,nw),unit:f};if(Mi(ky,t[0],t[1],e[2]),!jl(ky,i,ky,l))return null;const v=Ta(ky,Oy);return s===To.Horizontal?{horizontal:v,unit:f}:{direct:Ta(Oy,nw),horizontal:v,vertical:Math.abs(y),unit:f}}(function(t){t[t.Direct=0]="Direct",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"})(To||(To={}));const sn=Mt(),nn=Mt(),nw=Mt(),Oy=Mt(),ky=Mt();function _pt(t){return{autoLength2D:e=>t.geodesicLength(e)??ypt(e),autoDistanceBetweenPoints2D:(e,i)=>t.geodesicDistanceBetweenPoints(e,i)??mpt(e,i),autoDistance2D:(e,i,s)=>(Jf[0]=e[0],Jf[1]=e[1],Jf[2]=e.length===3?e[2]:0,Yf[0]=i[0],Yf[1]=i[1],Yf[2]=i.length===3?i[2]:0,t.geodesicDistance(Jf,Yf,s)??L6(Jf,Yf,s))}}async function yu(){return _pt(await JL())}const Jf=Mt(),Yf=Mt();function xpt(t){return t?.type==="graphic"}function Spt(t){return t.find(xpt)??null}let ar=class extends fn.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};_([E()],ar.prototype,"activeComponent",void 0),_([E()],ar.prototype,"cancelled",void 0),_([E()],ar.prototype,"history",void 0),_([E()],ar.prototype,"tool",null),_([E()],ar.prototype,"type",void 0),_([E()],ar.prototype,"canUndo",null),_([E()],ar.prototype,"canRedo",null),_([E()],ar.prototype,"onEnd",void 0),_([E()],ar.prototype,"undo",null),_([E()],ar.prototype,"redo",null),_([E()],ar.prototype,"toggleTool",void 0),_([E()],ar.prototype,"addToSelection",void 0),_([E()],ar.prototype,"removeFromSelection",void 0),ar=_([Y("esri.widgets.Sketch.support.OperationHandle")],ar);let jg=class extends ar{};_([E()],jg.prototype,"activeComponent",void 0),jg=_([Y("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],jg);let ma=class extends ar{};_([E()],ma.prototype,"activeComponent",void 0),ma=_([Y("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],ma);function Tpt(t,e){return e==="freehandPolygon"||e==="freehandPolyline"?"freehand":t??(e==="rectangle"||e==="circle"?"hybrid":"click")}function Mpt(t){switch(t){case"freehandPolygon":return"polygon";case"freehandPolyline":return"polyline";default:return t}}var YM;(function(t){t[t.ForceCollapse=-1]="ForceCollapse",t[t.Low=0]="Low",t[t.Medium=10]="Medium",t[t.High=100]="High",t[t.Max=1e3]="Max"})(YM||(YM={}));const KM={defaultZ:0},Kf={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0,name:O4},tool:"transform"};let ye=class extends fn.EventedAccessor{constructor(t){super(t),this._defaultSnappingManager=null,this._updatingHandles=new Ll,this._internalGraphicsLayer=new Tr({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new rr({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Ms({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Wi({color:[130,130,130,1],width:2}),this.meshSymbol=new Pl({symbolLayers:new kt([new rs])}),this.updateGraphics=new kt,this.updateOnGraphicClick=!0,this.creationMode="single",this.vertexSymbol=new rr({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new zN,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._sketchContinuationFlag=!1,this._originalPopupEnabled=null,this.defaultCreateOptions=KM,this.defaultUpdateOptions=Kf,this.snappingOptions=t?.snappingManager?.options??t?.snappingOptions??new Li}initialize(){this.addHandles([$a((()=>this.view?.map?.layers),"change",(t=>{t.removed.includes(this.layer)&&this.cancel()})),$a((()=>this.layer?.graphics),"change",(t=>{if(this._operationHandle!=null)for(const e of t.removed)this.updateGraphics.includes(e)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(e):this._operationHandle.cancel())})),zt((()=>this.layer?.elevationInfo??null),(t=>{t!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=t)}),zi),zt((()=>this.view),(t=>{this._defaultSnappingManager=ze(this._defaultSnappingManager),t&&(this.snappingManager||(this._defaultSnappingManager=new Rn({view:t,options:this.snappingOptions})),t.type==="2d"?mt(()=>import("./editingTools-BJdoOdKd.js"),__vite__mapDeps([361,362,108,363,364,365,366,132,367,81,78,1,2,3,368,196,12,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,180,187,201,106,107,373,116,64,287,143,374])):t.type==="3d"&&(mt(()=>import("./ImageMaterial.glsl--sbqX8pM.js").then(e=>e.e),__vite__mapDeps([375,143,365,366,132,367,81,78,1,2,3,368,196,12,150,68,376,138,80,181,182,183,184,185,72,73,155,157,156,186,187,67,69,179,180,133,114,190,377,378,71,75,250,15,253,74,189,363,364,379,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,192,380,200,201,106,107,108,13,14,381,373,116,64,287])),mt(()=>import("./LineCallout.glsl-C8pdyOdG.js").then(e=>e.G),__vite__mapDeps([382,376,150,68,138,132,80,181,182,183,184,1,2,3,185,72,73,155,157,156,186,187,67,69,179,81,78,180,133,114,190,99,173,14,97,15,177,172,147,136,174,175,116,64,135,178,191,192,193,154,153,41,61,45,46,60,289,237,283]))))}),zi),zt((()=>this.view?.spatialReference),((t,e)=>{t&&e&&!t.equals(e)&&this.cancel()}))]),Ylt(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=ze(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this._updatingHandles.destroy(),this.emit("destroy")}get updating(){return this._updatingHandles.updating||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeCreateToolDrawMode(){return this._operationHandle?.type==="create"&&this._operationHandle.activeComponent&&"mode"in this._operationHandle.activeComponent?this._operationHandle.activeComponent.mode:null}get activeTooltip(){const{activeComponent:t,destroyed:e}=this,i=!e&&t&&"tooltip"in t?t.tooltip:null;return i?.visible?i:null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(t){this._set("defaultCreateOptions",{...KM,...t})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(t){this._set("defaultUpdateOptions",{...Kf,...t,reshapeOptions:{...Kf.reshapeOptions,...t?.reshapeOptions},highlightOptions:{...Kf.highlightOptions,...t?.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(t){this.sketchOptions.labels=t}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(t){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=t),this._set("snappingOptions",t)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(t){if(t)this._isOverridden("snappingManager")||(this._defaultSnappingManager=ze(this._defaultSnappingManager)),this._override("snappingManager",t);else{const{view:e}=this;!this._defaultSnappingManager&&e&&(this._defaultSnappingManager=new Rn({options:this.snappingOptions,view:e})),this._clearOverride("snappingManager")}}get state(){const t=!(!this.view?.ready||!this.layer),e=this._operationHandle;return t&&e?"active":t?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(t){this.sketchOptions.tooltips=t}get valueOptions(){return this.sketchOptions.values}set valueOptions(t){this.sketchOptions.values=t}get view(){return this._get("view")}set view(t){const e=this._get("view");if(e){const{container:s,map:l}=e;s&&(e.cursor=null),l?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const i="view-ready";this.removeHandles(i),t&&this.addHandles(Rs((()=>t.ready),(s=>{this.removeHandles(this._viewHandlesKey),s&&this.addHandles(this._generateViewHandles(t),this._viewHandlesKey)}),zi),i),this._set("view",t)}cancel(){this._moduleLoaderAbortController=_a(this._moduleLoaderAbortController),this._viewReadyAbortController=_a(this._viewReadyAbortController),this._sketchContinuationFlag=!0,this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:t,updateGraphics:e}=this;if(t==="active"&&e.length){const{activeTool:i,layer:s}=this,l=e.toArray();s.removeMany(l),this.cancel(),this._emitDeleteEvent({graphics:l,tool:i})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const t=this.updateGraphics.map((e=>e.clone())).toArray();return this.layer.addMany(t),this.emit("duplicate",{graphics:t,type:"duplicate"}),t}return[]}async create(t,e){this.cancel(),await this._waitViewReady();const{view:i,layer:s}=this;if(!i||this.state==="disabled")throw s||this._logMissingLayer(),Be();if(i.activeTool!=null&&(i.activeTool=null),!t)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");PM(i,this._internalGraphicsLayer);const l=await this._updatingHandles.addPromise(this._setupCreateOperation(t,e));if(l==null||this.destroyed)return void i.map.remove(this._internalGraphicsLayer);const f=()=>{if(l===this._operationHandle){const y=this.createGraphic,v=this._operationHandle.cancelled;if(this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map&&this.view.map.remove(this._internalGraphicsLayer),l.cancelled||y==null||s.add(y),this._sketchContinuationFlag=!1,this.emit("create",{graphic:y,state:v?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"}),v||this._sketchContinuationFlag)return;const{creationMode:b}=this;if(b==="continuous"){if(e?.geometryToPlace)return;this._updatingHandles.addPromise(Sd(this.create(t,e)))}else b==="update"&&y&&this._updatingHandles.addPromise(Sd(this.update([y])))}};l.on("complete",f),this._operationHandle=l,i.ready&&i.focus()}async place(t,e){return this.create("mesh",{mode:"click",hasZ:t.hasZ,geometryToPlace:t,...e})}async update(t,e){this.cancel(),await this._waitViewReady();const{layer:i,view:s,state:l}=this;if(!s||l==="disabled")throw i||this._logMissingLayer(),Be();s.activeTool!=null&&(s.activeTool=null);const f=Array.isArray(t)?t:[t];if(t==null||!f?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(f.some((v=>v.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):v.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0))))return;const y=await this._updatingHandles.addPromise(this._setupUpdateOperation(f,e));this.destroyed||y==null||Ri(y)||(PM(s,this._internalGraphicsLayer),this._setUpdateOperationHandle(y,e),this.emit("update",{graphics:f,state:"start",aborted:!1,tool:y.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(t){const e=this.view;if(e){t=Array.isArray(t)?t:[t];for(const i of t)i.geometry==null||i.geometry.type==="mesh"||di(i.geometry.spatialReference,e.spatialReference)||(Cs(i.geometry.spatialReference,e.spatialReference)||ka()||await Aa(),i.geometry=Jn(i.geometry,e.spatialReference))}else this._logMissingView()}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!!this._operationHandle?.canUndo()}canRedo(){return!!this._operationHandle?.canRedo()}toggleUpdateTool(){this._operationHandle?.toggleTool()}async _getFirstHit(t){const e=this.view;if(!e)return this._logMissingView(),null;if(e.type==="2d"){const l=[];e.map.allLayers.forEach((y=>{y.type!=="vector-tile"&&y.type!=="imagery"||l.push(y)}));const f=await e.hitTest(t,{exclude:l});return Spt(f.results)}const i=[e.map.ground];e.map.allLayers.forEach((l=>{Pq(l.type)&&i.push(l)}));const s=await e.hitTest(t,{exclude:i});if(s.results.length>0){const l=s.results[0];if(l!=null&&l.type==="graphic"&&l.graphic&&(!s.ground.mapPoint||e.map.ground.opacity<1||s.ground.distance-(l.distance??0)>-Math.min(3*s.ground.distance,e.viewingMode==="global"?pA(e.renderCoordsHelper.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return l}return null}_generateViewHandles(t){return[t.on("immediate-click",(async e=>{const i=this.state==="active"&&this._operationHandle?.type==="create";this.state!=="disabled"&&!i&&this.updateOnGraphicClick&&await this._updatingHandles.addPromise(this._handleImmediateClick(e))}),Le.WIDGET)]}async _handleImmediateClick(t){const e=await t.defer((()=>this._getFirstHit(Vs(t))));let i=null;if(e!=null){const s=e.graphic;this.updateGraphics.includes(s)||s.layer===this.layer?(t.stopPropagation(),i=s):this.view?.type!=="2d"||this._isComponentGraphic(s)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();i==null||this.updateGraphics.includes(i)||await this.update([i],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}})}async _setupCreateOperation(t,e){const i=this.view;if(!i)return this._logMissingView(),null;const s={hasZ:i.type==="3d",...this.defaultCreateOptions,...e},l=await this._setupDrawGraphicTool(t,i,s);return l==null?null:(i.tools.add(l),i.activeTool=l,this._setupCreateOperationHandle(l))}async _setupDrawGraphicTool(t,e,i){if(t==="multipoint"&&e.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!e)return this._logMissingView(),null;const{cursor:s,defaultZ:l,hasZ:f,geometryToPlace:y,graphicProperties:v,mode:b,preserveAspectRatio:S}=i,A=Tpt(b,t),P=Mpt(t),k=i?.optionsPerTool?.has(t)?i.optionsPerTool.get(t):{},C=k?.preserveAspectRatio??S??t!=="rectangle",L={centered:t!=="rectangle"&&!(t==="circle"&&!C),cursor:s,defaultZ:l,forceUniformSize:C,graphicProperties:{...v,attributes:{...v?.attributes}},geometryToPlace:y,geometryType:P,mode:A,graphicSymbol:this._getGraphicSymbolFromTool(t),hasZ:f,snappingManager:this.snappingManager,snapToScene:!1,view:e,...k};return e.type==="2d"?this._makeDrawGraphicTool2D(L):this._makeDrawGraphicTool3D(L)}async _makeDrawGraphicTool2D(t){const[e,i,s]=await Promise.all([this._requireModule(mt(()=>import("./editingTools-BJdoOdKd.js"),__vite__mapDeps([361,362,108,363,364,365,366,132,367,81,78,1,2,3,368,196,12,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,180,187,201,106,107,373,116,64,287,143,374]))),Py(),yu()]);return Ri(e)||this.destroyed?null:new e.module.DrawGraphicTool2D({...t,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:$pt(t.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:i,automaticLengthMeasurementUtils:s})}async _makeDrawGraphicTool3D(t){const[e,i,s]=await Promise.all([this._requireModule(mt(()=>import("./ImageMaterial.glsl--sbqX8pM.js").then(f=>f.e),__vite__mapDeps([375,143,365,366,132,367,81,78,1,2,3,368,196,12,150,68,376,138,80,181,182,183,184,185,72,73,155,157,156,186,187,67,69,179,180,133,114,190,377,378,71,75,250,15,253,74,189,363,364,379,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,192,380,200,201,106,107,108,13,14,381,373,116,64,287]))),Py(),yu()]);if(Ri(e)||this.destroyed)return null;const{elevationInfo:l}=this.layer;return new e.module.DrawGraphicTool3D({...t,elevationInfo:l,snapToScene:!0,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:i,automaticLengthMeasurementUtils:s})}_setupCreateOperationHandle(t){const e=this.view;if(!e)return this._logMissingView(),null;let i=null;const s=t.forceUniformSize,l=t.centered,f=[e.on("key-down",(v=>{if(v.key===mi.pan)v.stopPropagation(),v.repeat||(t.enabled=!1);else if(v.key===mi.complete)v.stopPropagation(),t.completeCreateOperation();else if(v.key!==mi.vertexAdd||v.repeat)v.key===mi.undo?(v.stopPropagation(),y.undo()):v.key===mi.redo?(v.stopPropagation(),y.redo()):v.key!==mi.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"||v.repeat?v.key===mi.center&&(v.repeat||(t.centered=!l,v.stopPropagation())):(t.forceUniformSize=!s,v.stopPropagation());else{const b=t.drawOperation.geometryType;b!=="polyline"&&b!=="polygon"&&b!=="multipoint"||(v.stopPropagation(),t.drawOperation.commitStagedVertex())}}),Le.WIDGET),e.on("key-up",(v=>{v.key===mi.pan?t.enabled=!0:v.key!==mi.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"?v.key===mi.center&&(t.centered=l,v.stopPropagation()):(t.forceUniformSize=s,v.stopPropagation())}),Le.WIDGET),t.on("vertex-add",(v=>{switch(i=i==null?"start":"active",v.operation){case"apply":this.emit("create",{graphic:t.graphic,state:i,tool:this.activeTool,toolEventInfo:v,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}})),t.on("cursor-update",(v=>{t.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:v.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),t.on("vertex-remove",(v=>{switch(v.operation){case"apply":this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:v,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}})),t.on("complete",(v=>{this._set("createGraphic",v.graphic),i="complete",v.aborted?y&&y.cancel():y&&y.complete()})),zt((()=>this._getGraphicSymbolFromTool(t.geometryType)),(v=>{t.graphicSymbol=v}))],y=new jg({activeComponent:t,tool:t.geometryType,type:"create",onEnd:()=>{Xn(f),e.tools?.remove(t)},undo:()=>{t.canUndo&&t.undo()},redo:()=>{t.canRedo&&t.redo()},canUndo:()=>t.canUndo,canRedo:()=>t.canRedo});return y}_getGraphicSymbolFromTool(t){switch(t){case"point":case"multipoint":return this.pointSymbol;case"polyline":case"freehandPolyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":case"freehandPolygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(t,e){const{layer:i,view:s}=this;if(!s)return this._logMissingView(),null;const l={...this.defaultUpdateOptions,...e,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...e?.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...e?.highlightOptions}};let f=l.tool??Kf.tool;for(const y of t)i.remove(y),i.add(y);if(s.type==="3d"){if(t.length===0)return null;switch(f){case"move":return this._setupMove3DOperation(t,l,s,f);case"reshape":return t.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(t[0],l,s);case"transform":return this._setupGraphicTransform3DOperation(t,l,s)}}switch(f){case"move":return this._setupMove2DOperation(t,l,s);case"reshape":return t.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(t,f,l,s);case"transform":if(t.length===1){const y=t[0].geometry?.type;y!=="point"&&y!=="multipoint"||(f="reshape")}return this._setupTransformOrReshape2DOperation(t,f,l,s)}}async _setupMove3DOperation(t,e,i,s,l=!1){const[f,y]=await Promise.all([this._requireModule(mt(()=>import("./ImageMaterial.glsl--sbqX8pM.js").then(L=>L.e),__vite__mapDeps([375,143,365,366,132,367,81,78,1,2,3,368,196,12,150,68,376,138,80,181,182,183,184,185,72,73,155,157,156,186,187,67,69,179,180,133,114,190,377,378,71,75,250,15,253,74,189,363,364,379,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,192,380,200,201,106,107,108,13,14,381,373,116,64,287]))),yu()]);if(Ri(f))return f;const{ManipulatedObject3DGraphic:v,MoveTool3D:b}=f.module,S=new Map,A=()=>{S.forEach((L=>L.destroy())),S.clear()};for(const L of t){const F=new v({view:i,graphic:L}),q=$lt(F);if(q!==Ue.SUPPORTED)return A(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${IM(q)}).`),null;S.set(L,F)}const P=new b({view:i,enableZ:e.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,autoLengthMeasurementUtils:y});i.tools.add(P),P.objects.addMany(Array.from(S.values())),l||this.updateGraphics.addMany(t);const k=[],C=new ma({activeComponent:P,tool:s,type:"update",onEnd:()=>{Xn(k),Ny(i,P),A()},undo:()=>{XM(this.view,P),Ry(C,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{Cy(C,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:L=>{this.updateGraphics.push(L);const F=new v({view:i,graphic:L});S.set(L,F),P.objects.push(F),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[L],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:L=>{const F=this.updateGraphics.indexOf(L);if(C.history.undo.forEach((H=>H.updates.splice(F,1))),C.history.redo.forEach((H=>H.updates.splice(F,1))),this.updateGraphics.remove(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[L],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void C.complete();const q=S.get(L);q&&(P.objects.remove(q),q.destroy(),S.delete(L))},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1||s!=="transform")return;const L=this.updateGraphics.at(0),F=await this._setupReshape3DOperation(L,e,i,!0);F&&!Ri(F)&&(C.onEnd(),C.destroy(),this._setUpdateOperationHandle(F,e))}});return k.push(...this._getHandlesForComponent(C,e),i.on("immediate-click",(L=>this._getCommonUpdateOperationClickHandlers(C,L,e)),Le.WIDGET),i.on("key-down",(L=>{this._getCommonUpdateOperationKeyDownHandlers(C,L)}),Le.WIDGET)),C}_setupGraphicTransform3DOperation(t,e,i,s=!1){if(t.length===1&&Plt(t[0])===Ue.SUPPORTED){const l=t[0],f=l.geometry;if(f!=null&&(f.type==="point"||f.type==="mesh"))return this._setupPointTransform3DOperation(l,e,i);if(f!=null&&(f.type==="polygon"||f.type==="polyline"))return this._setupPolyTransform3DOperation(l,e,i,s)}return this._setupMove3DOperation(t,e,i,"transform",s)}async _setupPointTransform3DOperation(t,e,i){const s="transform",{enableRotation:l,enableScaling:f,enableZ:y}=e,v=await this._requireModule(mt(()=>import("./ImageMaterial.glsl--sbqX8pM.js").then(L=>L.e),__vite__mapDeps([375,143,365,366,132,367,81,78,1,2,3,368,196,12,150,68,376,138,80,181,182,183,184,185,72,73,155,157,156,186,187,67,69,179,180,133,114,190,377,378,71,75,250,15,253,74,189,363,364,379,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,192,380,200,201,106,107,108,13,14,381,373,116,64,287])));if(Ri(v))return v;const{TransformTool3D:b,ManipulatedObject3DGraphic:S}=v.module,A=new S({graphic:t,view:i}),P=new b({object:A,view:i,enableRotation:l,enableScaling:f,enableZ:y,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(P),this.updateGraphics.add(t);const k=[],C=new ma({activeComponent:P,tool:s,type:"update",onEnd:()=>{Xn(k),Ny(i,P),A.destroy()},undo:()=>{XM(this.view,P),Ry(C,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{Cy(C,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async L=>{this.updateGraphics.add(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[L],removed:[],type:"selection-change"},type:"update"}),C.onEnd(),C.destroy();const F=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ri(F)||this._setUpdateOperationHandle(F,e)},removeFromSelection:L=>{this.updateGraphics.remove(L),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[L],type:"selection-change"},type:"update"}),C.complete()},toggleTool:()=>{}});return k.push(...this._getHandlesForComponent(C,e),i.on("immediate-click",(L=>this._getCommonUpdateOperationClickHandlers(C,L,e)),Le.WIDGET),i.on("key-down",(L=>{this._getCommonUpdateOperationKeyDownHandlers(C,L)}),Le.WIDGET)),C}async _setupPolyTransform3DOperation(t,e,i,s=!1){const l="transform",{enableRotation:f,enableScaling:y,enableZ:v,preserveAspectRatio:b}=e,[S,A]=await Promise.all([this._requireModule(mt(()=>import("./ImageMaterial.glsl--sbqX8pM.js").then(J=>J.e),__vite__mapDeps([375,143,365,366,132,367,81,78,1,2,3,368,196,12,150,68,376,138,80,181,182,183,184,185,72,73,155,157,156,186,187,67,69,179,180,133,114,190,377,378,71,75,250,15,253,74,189,363,364,379,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,192,380,200,201,106,107,108,13,14,381,373,116,64,287]))),yu()]);if(Ri(S))return S;const{ManipulatedObject3DGraphic:P,ExtentTransformTool:k}=S.module,C=this.view?.inputManager?.isModifierKeyDown(mi.constraint),L=new P({view:i,graphic:t}),F=new k({object:L,view:i,enableRotation:f,enableScaling:y,enableZ:v,preserveAspectRatio:!!b!=!!C,sketchOptions:this.sketchOptions,automaticLengthMeasurementUtils:A});i.tools.add(F),s||this.updateGraphics.add(t);const q=[],H=new ma({activeComponent:F,tool:l,type:"update",onEnd:()=>{Xn(q),Ny(i,F),L.destroy()},canUndo:()=>!F.destroyed&&F.canUndo,undo:()=>{F.destroyed||(F.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:l}))},canRedo:()=>!F.destroyed&&F.canRedo,redo:()=>{F.destroyed||(F.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:l}))},addToSelection:async J=>{this.updateGraphics.add(J),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[J],removed:[],type:"selection-change"},type:"update"}),H.onEnd(),H.destroy();const Q=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ri(Q)||this._setUpdateOperationHandle(Q,e)},removeFromSelection:J=>{this.updateGraphics.remove(J),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[J],type:"selection-change"},type:"update"}),H.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1)return;const J=await this._setupReshape3DOperation(t,e,i,!0);J&&!Ri(J)&&(H.onEnd(),H.destroy(),this._setUpdateOperationHandle(J,e))}});return q.push(...this._getHandlesForComponent(H,e),i.on("immediate-click",(J=>this._getCommonUpdateOperationClickHandlers(H,J,e)),Le.WIDGET),i.on("key-down",(J=>this._getCommonUpdateOperationKeyDownHandlers(H,J)),Le.WIDGET),i.on("key-down",(J=>{J.key!==mi.constraint||J.repeat||(F.preserveAspectRatio=!F.preserveAspectRatio,J.stopPropagation())}),Le.WIDGET),i.on("key-up",(J=>{J.key===mi.constraint&&(F.preserveAspectRatio=!F.preserveAspectRatio,J.stopPropagation())}),Le.WIDGET)),H}async _setupMove2DOperation(t,e,i){const s="move";this.updateGraphics.addMany(t),await this._updatingHandles.addPromise(this._updateSpatialReference(t));const l=await this._getGraphicMover(t,e,i);if(Ri(l))return l;const f=new ma({activeComponent:l,tool:s,type:"update",onEnd:()=>{this._displayDefaultCursor(),Xn(b),Xn(v),l.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const S=this.updateGraphics.toArray();Ry(f,S),f.refreshComponent(),this._emitUndoEvent({graphics:S,tool:s})},redo:()=>{const S=this.updateGraphics.toArray();Cy(f,S),f.refreshComponent(),this._emitRedoEvent({graphics:S,tool:s})},addToSelection:async S=>{await this._updatingHandles.addPromise(this._updateSpatialReference(S)),this.updateGraphics.push(S),l.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:S=>{const A=this.updateGraphics.indexOf(S);f.history.undo.forEach((k=>k.updates.splice(A,1))),f.history.redo.forEach((k=>k.updates.splice(A,1))),this.updateGraphics.remove(S);const P=this.updateGraphics.toArray();this.emit("update",{graphics:P,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?l.graphics=P:f.complete()}});let y=!1;const v=[i.on("immediate-click",(S=>this._getCommonUpdateOperationClickHandlers(f,S,e)),Le.WIDGET),i.on("key-down",(S=>{this._getCommonUpdateOperationKeyDownHandlers(f,S),S.key!==mi.constraint||S.repeat||(y=!0,l.enableMoveAllGraphics=!l.enableMoveAllGraphics)}),Le.WIDGET),i.on("key-up",(S=>{S.key===mi.constraint&&y&&(y=!1,l.enableMoveAllGraphics=!l.enableMoveAllGraphics)}),Le.WIDGET)],b=this._getHandlesForComponent(f,e);return f}async _setupReshape3DOperation(t,e,i,s=!1){const l="reshape",[f,y,v]=await Promise.all([this._requireModule(mt(()=>import("./ImageMaterial.glsl--sbqX8pM.js").then(q=>q.e),__vite__mapDeps([375,143,365,366,132,367,81,78,1,2,3,368,196,12,150,68,376,138,80,181,182,183,184,185,72,73,155,157,156,186,187,67,69,179,180,133,114,190,377,378,71,75,250,15,253,74,189,363,364,379,369,370,350,352,353,354,124,355,356,357,4,371,372,235,99,192,380,200,201,106,107,108,13,14,381,373,116,64,287]))),Py(),yu()]);if(Ri(f))return f;const{ManipulatedObject3DGraphic:b,ReshapeTool3D:S}=f.module,A=new b({view:i,graphic:t}),P=Alt(A);if(P!==Ue.SUPPORTED)return A.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${IM(P)}).`),null;const k=e.reshapeOptions,C=new S({view:i,object:A,enableZVertex:e.enableZ&&k?.vertexOperation==="move",enableZShape:e.enableZ&&k?.shapeOperation==="move",enableMoveObject:k?.shapeOperation==="move"||k?.shapeOperation==="move-xy",enableMidpoints:k?.edgeOperation==="split",enableEdgeOffset:k?.edgeOperation==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:y,automaticLengthMeasurementUtils:v});i.tools.add(C),s||this.updateGraphics.add(A.graphic);const L=[],F=new ma({activeComponent:C,tool:l,type:"update",onEnd:()=>{Xn(L),Ny(i,C),A.destroy()},canUndo:()=>!C.destroyed&&C.canUndo,undo:()=>{C.destroyed||(C.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:l}))},canRedo:()=>!C.destroyed&&C.canRedo,redo:()=>{C.destroyed||(C.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:l}))},addToSelection:async q=>{this.updateGraphics.add(q),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[q],removed:[],type:"selection-change"},type:"update"}),F.onEnd(),F.destroy();const H=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ri(H)||this._setUpdateOperationHandle(H,e)},removeFromSelection:q=>{this.updateGraphics.remove(q),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[q],type:"selection-change"},type:"update"}),F.complete()},toggleTool:async()=>{if(e.toggleToolOnClick===!1)return;F.onEnd(),F.destroy();const q=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),e,i,!0);Ri(q)||this._setUpdateOperationHandle(q,e)}});return L.push(...this._getHandlesForComponent(F,e),i.on("immediate-click",(q=>this._getCommonUpdateOperationClickHandlers(F,q,e)),Le.WIDGET),i.on("key-down",(q=>{this._getCommonUpdateOperationKeyDownHandlers(F,q)}),Le.WIDGET)),F}async _setupTransformOrReshape2DOperation(t,e,i,s){this.updateGraphics.addMany(t),await this._updatingHandles.addPromise(this._updateSpatialReference(t));const l=e==="transform"?await this._getBox(t,i,s):await this._getReshape(t,i,s);if(Ri(l))return l;const f=new ma({activeComponent:l,type:"update",onEnd:()=>{Xn(v),Xn(y),f.activeComponent&&!f.activeComponent.destroyed&&f.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Ry(f,this.updateGraphics.toArray()),f.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:f.tool})},redo:()=>{Cy(f,this.updateGraphics.toArray()),f.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:f.tool})},addToSelection:async b=>{let S=f.activeComponent;if(S?.type==="reshape"){const A=[...this.updateGraphics,b];this.updateGraphics.removeAll(),f.onEnd(),f.destroy();const P=await this._setupTransformOrReshape2DOperation(A,"transform",i,s);if(Ri(P))return;this._setUpdateOperationHandle(P,i)}else this.updateGraphics.add(b),S.graphics=this.updateGraphics.toArray(),S.refresh(),f.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[b],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async b=>{const S=this.updateGraphics.indexOf(b);f.history.undo.forEach((P=>P.updates.splice(S,1))),f.history.redo.forEach((P=>P.updates.splice(S,1))),this.updateGraphics.remove(b);const A=this.updateGraphics.toArray();if(A.length===0)f.complete();else{const P=A[0].geometry;A.length!==1||P==null||P.type!=="point"&&P.type!=="multipoint"?f.activeComponent.graphics=A:f.toggleTool()}this.emit("update",{graphics:A,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[b],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const b=this.updateGraphics.at(0),S=b.geometry;if(S!=null&&(f.tool==="reshape"&&(S.type==="point"||S.type==="multipoint")||f.tool==="transform"&&S.type==="extent"))return;let A=null;f.tool==="transform"?A=await this._getReshape([b],i,s):f.tool==="reshape"&&(A=await this._getBox([b],i,s)),Ri(A)||(f.activeComponent?.destroy(),f.activeComponent=A,f.activeComponent&&(Xn(v),v=this._getHandlesForComponent(f,i)))}}),y=[s.on("immediate-click",(b=>this._getCommonUpdateOperationClickHandlers(f,b,i)),Le.WIDGET),s.on("key-down",(b=>{if(this._getCommonUpdateOperationKeyDownHandlers(f,b),b.key===mi.constraint&&!b.repeat&&f){const S=f.activeComponent;S&&S.type==="box"&&(S.preserveAspectRatio=!S.preserveAspectRatio)}}),Le.WIDGET),s.on("key-up",(b=>{if(b.key===mi.constraint&&f){const S=f.activeComponent;S&&S.type==="box"&&(S.preserveAspectRatio=!S.preserveAspectRatio)}}),Le.WIDGET)];let v=this._getHandlesForComponent(f,i);return f}async _getGraphicMover(t,e,i){const{enableMoveAllGraphics:s,highlightOptions:l}=e,f=await this._requireModule(mt(()=>import("./GraphicMover-8udfKkmn.js").then(y=>y.G),__vite__mapDeps([383,374,237,373,116,64,287])));return Ri(f)?f:new f.module.default({enableMoveAllGraphics:s,highlightName:l?.name,highlightsEnabled:!!l?.enabled,indicatorsEnabled:!1,graphics:t,view:i,callbacks:{onGraphicMoveStart:({dx:y,dy:v,graphic:b})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:y,dy:v,mover:b,type:"move-start"},type:"update"})},onGraphicMove:({dx:y,dy:v,graphic:b})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:y,dy:v,mover:b,type:"move"},type:"update"}),onGraphicMoveStop:({dx:y,dy:v,graphic:b})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:y,dy:v,mover:b,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayMoveCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(t,e,i){const{enableRotation:s,enableScaling:l,highlightOptions:f,preserveAspectRatio:y}=e,[v,b]=await Promise.all([this._requireModule(mt(()=>import("./Box-BPe9538Y.js"),__vite__mapDeps([384,374,383,237,373,116,64,287,385,365,366,132,367,81,78,1,2,3,368,196,12,381,380,4]))),yu()]);if(Ri(v))return v;const S=this.view?.inputManager?.isModifierKeyDown(mi.constraint);return new v.module.default({graphics:t,enableRotation:s,enableScaling:l,highlightName:f?.name,highlightsEnabled:!!f?.enabled,preserveAspectRatio:!!y!=!!S,layer:this._internalGraphicsLayer,view:i,sketchOptions:this.sketchOptions,automaticLengthMeasurementUtils:b,callbacks:{onMoveStart:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onMove:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onMoveStop:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onScaleStart:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onScale:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onScaleStop:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onRotateStart:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onRotate:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onRotateStop:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"})}})}async _getReshape(t,e,i){const{highlightOptions:s,reshapeOptions:l}=e,f=l?.edgeOperation==="split",y=l?.shapeOperation==="move",[v,b,S]=await Promise.all([this._requireModule(mt(()=>import("./Reshape-VpXCBF59.js"),__vite__mapDeps([386,362,108,363,364,365,366,132,367,81,78,1,2,3,368,196,12,236,200,201,106,107,13,14,143,175,116,64,379,374,383,237,373,287,380,385,4]))),Py(),yu()]);return Ri(v)?v:new v.module.default({enableMidpoints:f,enableMovement:y,graphic:t[0],highlightName:s?.name,highlightsEnabled:!!s?.enabled,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:b,automaticLengthMeasurementUtils:S,view:i,callbacks:{onReshapeStart:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onReshape:A=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...A},type:"update"}),onReshapeStop:({mover:A,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:A,type:P},type:"update"}),onMoveStart:({dx:A,dy:P,mover:k,type:C})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:A,dy:P,mover:k,type:C},type:"update"}),onMove:({dx:A,dy:P,mover:k,type:C})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:A,dy:P,mover:k,type:C},type:"update"}),onMoveStop:({dx:A,dy:P,mover:k,type:C})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:A,dy:P,mover:k,type:C},type:"update"}),onVertexAdd:({added:A,type:P,vertices:k})=>{const C=A.map((L=>N8(L.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:C,vertices:k,type:P},type:"update"})},onVertexRemove:({removed:A,type:P,vertices:k})=>{const C=A.map((L=>N8(L.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:C,vertices:k,type:P},type:"update"})}}})}_getHandlesForComponent(t,e){const i=t.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",(({graphic:s,viewEvent:l})=>{l.native?.shiftKey&&e.multipleSelectionEnabled&&(l.stopPropagation(),t.removeFromSelection(s))})),i.on("graphic-move-start",(s=>t.addToHistory(Ha(s.allGraphics))))];case"box":return[i.on("graphic-click",(s=>this._onTransformOrReshape2DGraphicClick(t,e,s))),i.on("move-start",(s=>t.addToHistory(Ha(s.graphics)))),i.on("rotate-start",(s=>t.addToHistory(Ha(s.graphics)))),i.on("scale-start",(s=>t.addToHistory(Ha(s.graphics))))];case"reshape":return[i.on("graphic-click",(s=>this._onTransformOrReshape2DGraphicClick(t,e,s))),i.on("move-start",(s=>t.addToHistory(Ha([s.mover])))),i.on("reshape-start",(s=>t.addToHistory(Ha([s.graphic])))),i.on("vertex-add",(s=>t.addToHistory(Ha([s.oldGraphic])))),i.on("vertex-remove",(s=>t.addToHistory(Ha([s.oldGraphic]))))];case"move-3d":return[i.events.on("record-undo",(({updates:s})=>{t.addToHistory({updates:s})})),i.events.on("move-start",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-start"},type:"update"})})),i.events.on("move",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s.dx,dy:s.dy,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move"},type:"update"})})),i.events.on("move-stop",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-stop"},type:"update"})})),i.events.on("immediate-click",(s=>{s.shiftKey?this._toggleSelection([s.object.graphic],t,e):t.toggleTool()}))];case"transform-3d":return[i.events.on("record-undo",(({updates:s})=>{t.addToHistory({updates:s})})),i.events.on("translate-start",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-start"},type:"update"})})),i.events.on("translate-stop",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-stop"},type:"update"})})),i.events.on("rotate-start",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-start"},type:"update"})})),i.events.on("rotate-stop",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-stop"},type:"update"})})),i.events.on("scale-start",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-start"},type:"update"})})),i.events.on("scale-stop",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-stop"},type:"update"})})),i.events.on("translate",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move"},type:"update"})})),i.events.on("rotate",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate"},type:"update"})})),i.events.on("scale",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale"},type:"update"})})),i.events.on("immediate-click",(s=>{s.shiftKey?this._toggleSelection([s.object.graphic],t,e):t.toggleTool()}))];case"reshape-3d":return[i.events.on("reshape",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})})),i.events.on("move",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})})),i.events.on("vertex-add",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})})),i.events.on("vertex-remove",(s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})})),i.events.on("immediate-click",(s=>{s.shiftKey?this._toggleSelection([s.object.graphic],t,e):t.toggleTool()}))]}}_onTransformOrReshape2DGraphicClick(t,e,i){const{graphic:s,viewEvent:l}=i;return l.native?.shiftKey&&s.layer===this.layer?(l.stopPropagation(),t.removeFromSelection(s)):e.toggleToolOnClick?(l.stopPropagation(),t.toggleTool()):void 0}_setUpdateOperationHandle(t,e){this._operationHandle=t;const i=this.view?.map;this._disablePopup(e);const s=()=>{if(t===this._operationHandle){const l=this.updateGraphics.toArray(),f=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(e),this.emit("update",{graphics:l,state:"complete",aborted:t.cancelled,tool:f,toolEventInfo:null,type:"update"})}};t.on("complete",s)}async _getCommonUpdateOperationClickHandlers(t,e,i){const s=Vs(e),l=await e.defer((()=>this._getFirstHit(s)));if(l==null)return void t.complete();if(e.native.shiftKey&&this._toggleSelection([l.graphic],t,i))return void e.stopPropagation();this.updateGraphics.includes(l.graphic)?e.stopPropagation():t.complete()}_toggleSelection(t,e,i){const s=!!i.multipleSelectionEnabled;return t.some((l=>l!=null&&!(!s||l.layer!==this.layer)&&(this.updateGraphics.includes(l)?e.removeFromSelection(l):e.addToSelection(l),!0)))}_getCommonUpdateOperationKeyDownHandlers(t,e){if(!t)return;const i=e.key;i===mi.undo&&t.canUndo()?(e.stopPropagation(),t.undo()):i===mi.redo&&t.canRedo()?(e.stopPropagation(),t.redo()):i===mi.cancel?(e.stopPropagation(),t.cancel()):this.allowDeleteKey&&mi.delete.includes(i)&&this._onDeleteKey(e)}_onDeleteKey(t){if(!this._operationHandle||this._operationHandle.type!=="update")return;const e=this.activeComponent,i=this.updateGraphics.toArray();e!=null&&(e.type!=="reshape"||i.length===1&&i[0].geometry?.type==="point")&&(t.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=ze(this._internalGraphicsLayer))}_isComponentGraphic(t){const{activeComponent:e}=this;return!(!t||e==null)&&(t.attributes?.esriSketchTool||e.type==="draw-2d"&&e.graphic===t||(e.type==="box"||e.type==="reshape")&&e.isUIGraphic(t))}_displayPointerCursor(){this.view?.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayMoveCursor(){this.view?.container&&this.view.cursor!=="move"&&(this.view.cursor="move")}_displayDefaultCursor(){this.view?.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(t,e,i){At.getLogger(this).error(new ct(t,e,i))}async _requireModule(t){const e=new AbortController;this._moduleLoaderAbortController=e;const i=await t;return this._moduleLoaderAbortController!==e||e.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(t){this.emit("undo",{...t,type:"undo"})}_emitRedoEvent(t){this.emit("redo",{...t,type:"redo"})}_emitDeleteEvent(t){this.emit("delete",{...t,type:"delete"})}get test(){}wait(){return Od((()=>!this.updating))}_disablePopupEnabled(t){return this.view?.type!=="3d"||this.updateOnGraphicClick||(t?.toggleToolOnClick??!1)}_disablePopup(t){this._disablePopupEnabled(t)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(t){this._disablePopupEnabled(t)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const t=this.view;t?(_a(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await zE(Od((()=>t?.ready)),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",ZM("view"))}_logMissingLayer(){this._logError(Ept,ZM("layer"))}};_([E()],ye.prototype,"_defaultSnappingManager",void 0),_([E()],ye.prototype,"updating",null),_([E({readOnly:!0})],ye.prototype,"_updatingHandles",void 0),_([E()],ye.prototype,"_operationHandle",void 0),_([E({readOnly:!0})],ye.prototype,"activeTool",null),_([E({readOnly:!0})],ye.prototype,"activeCreateToolDrawMode",null),_([E()],ye.prototype,"activeTooltip",null),_([E({types:_l})],ye.prototype,"activeFillSymbol",void 0),_([E()],ye.prototype,"activeLineSymbol",void 0),_([E()],ye.prototype,"activeVertexSymbol",void 0),_([E()],ye.prototype,"allowDeleteKey",void 0),_([E({readOnly:!0})],ye.prototype,"createGraphic",null),_([E()],ye.prototype,"defaultCreateOptions",null),_([E()],ye.prototype,"defaultUpdateOptions",null),_([E({type:h6,nonNullable:!0})],ye.prototype,"labelOptions",null),_([E()],ye.prototype,"layer",void 0),_([E({types:_l})],ye.prototype,"pointSymbol",void 0),_([E({types:_l})],ye.prototype,"polygonSymbol",void 0),_([E({types:_l})],ye.prototype,"polylineSymbol",void 0),_([E()],ye.prototype,"meshSymbol",void 0),_([E({type:Li,nonNullable:!0})],ye.prototype,"snappingOptions",null),_([E()],ye.prototype,"snappingManager",null),_([E({readOnly:!0})],ye.prototype,"state",null),_([E({type:c6,nonNullable:!0})],ye.prototype,"tooltipOptions",null),_([E({readOnly:!0})],ye.prototype,"updateGraphics",void 0),_([E()],ye.prototype,"updateOnGraphicClick",void 0),_([E()],ye.prototype,"creationMode",void 0),_([E({type:f6,nonNullable:!0})],ye.prototype,"valueOptions",null),_([E({types:_l})],ye.prototype,"vertexSymbol",void 0),_([E({value:null})],ye.prototype,"view",null),_([E({constructOnly:!0,type:zN})],ye.prototype,"sketchOptions",void 0),ye=_([Y("esri.widgets.Sketch.SketchViewModel")],ye);const Ept="sketch:missing-property",ZM=t=>`Property '${t}' is missing on SketchViewModel.`;function $pt(t){return t==="polygon"||t==="rectangle"||t==="circle"}function Ry(t,e){tD("undo",t.history.undo,t.history.redo,e)}function Cy(t,e){tD("redo",t.history.redo,t.history.undo,e)}function tD(t,e,i,s){const l=e.pop();if(!l)return;const f=l.updates,y=[];s.forEach(((v,b)=>{const S=f[b];S!=null&&("geometry"in S&&S.geometry!=null&&(y.push({geometry:v.geometry}),v.geometry=S.geometry),"symbol"in S&&S.symbol!=null&&(y.push({symbol:v.symbol}),v.symbol=S.symbol),"undo"in S&&(y.push(S),S[t](v)))})),i.push({updates:y})}function XM(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function Ha(t){return{updates:t.map((({geometry:e})=>e?.type==="mesh"?{geometry:e.cloneShallow()}:{geometry:e}))}}function Ny(t,e){t.tools?.remove(e),e.destroyed||e.destroy()}function Ri(t){return"requireError"in t&&t.requireError==="aborted"}var o9t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Apt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ipt(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in t)){const f=Object.getOwnPropertyDescriptor(s,l);f&&Object.defineProperty(t,l,f.get?f:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var QM,tE={exports:{}};function Ppt(){return QM||(QM=1,(function(t){function e(){function s(h){if(typeof h=="number")return B.Tc.Zg(h);if(h==null)return null;if(R1[h]!=null)return B.Tc.Zg(R1[h]);throw Error("Unrecognised Unit Type")}function l(h){if(typeof h=="number")return B.Tc.Zg(h);if(h==null)return null;if(C1[h]!=null)return B.Tc.Zg(C1[h]);throw Error("Unrecognised Unit Type")}function f(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function y(h,O,m,u){if(m==null||m.B())return null;switch(m.getType()){case B.qn.Point:return h.exportPoint(O,m,u);case B.qn.Polygon:return h.exportPolygon(O,m,u);case B.qn.Polyline:return h.exportPolyline(O,m,u);case B.qn.MultiPoint:return h.exportMultipoint(O,m,u);case B.qn.Envelope:return h.exportExtent(O,m,u)}return null}function v(h,O,m,u){if(m.getType()!==B.qn.Point)throw Error("Geometry not Point");return h.exportPoint(O,m,u)}function b(h,O,m){return h.convertToGEGeometry(O,m)}function S(h){var O=h.wkid;h=h.wkt2||h.wkt;var m=No.get(O||h);return m==null&&(O!==-1&&O!=null?(m=B.Eg.create(O),No.set(O,m)):h&&(m=B.Eg.qP(h),No.set(h,m)),Ca.has(O||h)&&m.VW(Ca.get(O||h))),m}function A(h){var O,m,u;if(h==null)return null;var o=S(h);return h=o.Hd(),o=o.Kn(),(O={}).tolerance=o,O.unitType=h==null?-1:h.od,O.unitID=h==null?-1:h.Ec(),O.unitBaseFactor=h==null?0:h.ai,O.unitSquareDerivative=h==null?0:(u=(m=B.Tc.aG(h))===null||m===void 0?void 0:m.Ec())!==null&&u!==void 0?u:0,O}function P(h,O,m,u){return m==null?null:(m=B.$b.clip(b(h,xt,m),b(h,xt,u),S(O)),y(h,xt,m,O))}function k(h,O,m,u){m=B.$b.dl(b(h,xt,m),b(h,xt,u),S(O)),u=[];for(var o=0;o<m.length;o++)u.push(y(h,xt,m[o],O));return u}function C(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.contains(b(h,xt,m),b(h,xt,u),S(O))}function L(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.BP(b(h,xt,m),b(h,xt,u),S(O))}function F(h,O,m,u,o){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.tb(b(h,xt,m),b(h,xt,u),S(O),s(o))}function q(h,O,m,u){return!(m==null&&u!=null||u==null&&m!=null)&&B.$b.Nb(b(h,xt,m),b(h,xt,u),S(O))}function H(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.TS(b(h,xt,m),b(h,xt,u),S(O))}function J(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.touches(b(h,xt,m),b(h,xt,u),S(O))}function Q(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.qY(b(h,xt,m),b(h,xt,u),S(O))}function tt(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.TP(b(h,xt,m),b(h,xt,u),S(O))}function et(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.DU(b(h,xt,m),b(h,xt,u),S(O))}function nt(h,O,m,u,o){if(m==null||u==null)throw Error("Illegal Argument Exception");return B.$b.yB(b(h,xt,m),b(h,xt,u),S(O),o)}function vt(h,O,m){if(m==null)throw Error("Illegal Argument Exception");return B.$b.dT(b(h,xt,m),S(O))}function Tt(h,O,m){if(m==null)throw Error("Illegal Argument Exception");return m=B.$b.eC(b(h,xt,m),S(O)),y(h,xt,m,O)}function St(h,O,m,u){if(u===void 0&&(u=!1),m==null)throw Error("Illegal Argument Exception");if(Array.isArray(m)){var o=u,r=[];for(u=0;u<m.length;u++)r.push(b(h,xt,m[u]));for(m=B.$b.jP(r,o),o=Array(m.length),u=0;u<m.length;u++)o[u]=y(h,xt,m[u],O);return o}return u=B.$b.iP(b(h,xt,m),S(O)),y(h,xt,u,O)}function pt(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(m)){for(var o=[],r=0;r<m.length;r++)o.push(b(h,xt,m[r]));for(m=B.$b.QP(o,b(h,xt,u),S(O)),u=Array(m.length),r=0;r<m.length;r++)u[r]=y(h,xt,m[r],O);return u}return r=B.$b.im(b(h,xt,m),b(h,xt,u),S(O)),y(h,xt,r,O)}function ht(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(m)){for(var o=[],r=0;r<m.length;r++)o.push(b(h,xt,m[r]));for(m=B.$b.VX(o,b(h,xt,u),S(O)),u=Array(m.length),r=0;r<m.length;r++)u[r]=y(h,xt,m[r],O);return u}return r=B.$b.ep(b(h,xt,m),b(h,xt,u),S(O)),y(h,xt,r,O)}function _t(h,O,m,u){if(m==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(m)){for(var o=[],r=0;r<m.length;r++)o.push(b(h,xt,m[r]));for(m=B.$b.RS(o,b(h,xt,u),S(O)),u=Array(m.length),r=0;r<m.length;r++)u[r]=y(h,xt,m[r],O);return u}return r=B.$b.Ea(b(h,xt,m),b(h,xt,u),S(O)),y(h,xt,r,O)}function gt(h,O,m,u){if(m==null)return null;var o=[];if(Array.isArray(m)){if(m.length===0)return null;for(u=0;u<m.length;u++)o.push(b(h,xt,m[u]))}else o.push(b(h,xt,m)),u!=null&&o.push(b(h,xt,u));return y(h,xt,B.$b.jY(o,S(O)),O)}function at(h,O,m,u,o,r,n,a){var c=0;if(r!=null)switch(r){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(m)){if(m==null)h=null;else if(m.length===0)h=[];else{var p=[];for(r=0;r<m.length;r++)p.push(b(h,xt,m[r]));for(m=B.$b.BU(p,S(O),u,c,n,a,s(o)),u=Array(m.length),r=0;r<m.length;r++)u[r]=y(h,xt,m[r],O);h=u}return h}return m=B.$b.offset(b(h,xt,m),S(O),u,c,n,a,s(o)),y(h,xt,m,O)}function Lt(h,O,m,u,o,r){if(r===void 0&&(r=!1),Array.isArray(m)){if(!Array.isArray(u)){for(var n=[],a=0;a<m.length;a++)n.push(u);u=n}if(u.length!=m.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(a=0;a<m.length;a++)u[a]===void 0?n.push(c):(n.push(u[a]),c=u[a]);u=n}return Dt(h,O,m,u,o,!1,r,"geodesic",NaN)}return m=B.$b.buffer(b(h,xt,m),S(O),u,s(o),!1,0,NaN),y(h,xt,m,O)}function Yt(h,O,m,u,o,r,n,a){if(Array.isArray(m)){if(!Array.isArray(u)){for(var c=[],p=0;p<m.length;p++)c.push(u);u=c}if(u.length!==m.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var d=0;for(p=0;p<m.length;p++)u[p]===void 0?c.push(d):(c.push(u[p]),d=u[p]);u=c}return Dt(h,O,m,u,o,!0,r,n,a)}return n===void 0&&(n=NaN),m=B.$b.buffer(b(h,xt,m),S(O),u,s(o),!0,f(r),n),y(h,xt,m,O)}function Dt(h,O,m,u,o,r,n,a,c){if(c===void 0&&(c=NaN),m==null)return null;if(m.length===0)return[];for(var p=[],d=0;d<m.length;d++)p.push(b(h,xt,m[d]));for(m=B.$b.MN(p,S(O),u,s(o),r,n,f(a),c),u=Array(m.length),d=0;d<m.length;d++)u[d]=y(h,xt,m[d],O);return u}function Jt(h,O,m,u,o){var r;return o===void 0&&(o=!0),m=B.$b.nz(b(h,xt,m),b(h,xt,u),o),(r={}).coordinate=v(h,xt,m.fz(),O),r.distance=m.hz(),r.isRightSide=m.Sz(),r.vertexIndex=m.Ua(),r.isEmpty=m.B(),r}function ui(h,O,m,u){var o;return m=B.$b.oz(b(h,xt,m),b(h,xt,u)),(o={}).coordinate=v(h,xt,m.fz(),O),o.distance=m.hz(),o.isRightSide=m.Sz(),o.vertexIndex=m.Ua(),o.isEmpty=m.B(),o}function si(h,O,m,u,o,r){var n;for(m=B.$b.pz(b(h,xt,m),b(h,xt,u),o,r),u=[],o=0;o<m.length;o++)m[o].B()===!1&&u.push(((n={}).coordinate=v(h,xt,m[o].fz(),O),n.distance=m[o].hz(),n.isRightSide=m[o].Sz(),n.vertexIndex=m[o].Ua(),n.isEmpty=m[o].B(),n));return u}function Cr(h,O,m,u,o,r){return m=B.$b.QQ(b(h,xt,m),S(O),u,o,s(r)),y(h,xt,m,O)}function Yn(h,O,m,u,o){return m=B.$b.Qr(b(h,xt,m),S(O),u,s(o)),y(h,xt,m,O)}function su(h,O,m,u,o,r){return r===void 0&&(r=0),m=B.$b.Wy(b(h,xt,m),S(O),u,s(o),r),y(h,xt,m,O)}function gf(h,O,m,u){if(m==null)throw Error("Illegal Argument Exception");return B.$b.JU(b(h,xt,m),S(O),l(u))}function mf(h,O,m,u){if(m==null)throw Error("Illegal Argument Exception");return B.$b.KU(b(h,xt,m),S(O),s(u))}function xv(h,O,m,u,o){if(m==null)throw Error("Illegal Argument Exception");return B.$b.WQ(b(h,xt,m),S(O),l(u),f(o))}function Sv(h,O,m,u,o){if(m==null)throw Error("Illegal Argument Exception");return B.$b.ZQ(b(h,xt,m),S(O),s(u),f(o))}function Tv(h){B.NL.bind(h)}function Mv(h,O,m,u,o){var r=null,n=null;if(u){if(!o)throw B.i.N("AOI missing Spatial Reference");r=b(h,xt,u),n=S(o).fh()}return(h=B.gu.XR(S(O).fh(),S(m).fh(),r,n))!==null?h:null}function Ev(h,O,m,u,o){var r=null,n=null;if(u){if(!o)throw B.i.N("AOI missing Spatial Reference");r=b(h,xt,u),n=S(o).fh()}return B.gu.YR(S(O).fh(),S(m).fh(),r,n)}function $v(h,O,m,u,o,r){if(o===void 0&&(o=null),r===void 0&&(r=null),r){var n=new B.yC;n.Vu=r.densificationStep,n.Jr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&n.PW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&n.QW(r.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(O.length===0)return[];if(o){if(!(r=o.getCachedGeTransformation(m,u)))t:{if(r=o,o=null,r){var a=r.getGTListEntry();if(a!==null){o=new B.wC(null);for(var c=0,p=a.steps;c<p.length;c++){a=p[c];var d=new B.Dx(a.geogtran);a.isInverse&&d.Qz(),o.add(d)}n=B.vr.Nr(S(m).fh(),S(u).fh(),o,n),r.assignCachedGe(m,u,n),r=n;break t}}if(o===null&&r&&r.steps&&0<r.steps.length){for(o=new B.wC(null),c=0,p=r.steps;c<p.length;c++)(a=p[c]).wkid!=-1&&a.wkid!=null?o.add(B.Dx.create(a.wkid,a.isInverse)):o.add(B.Dx.uP(a.wkt,a.isInverse));n=B.vr.Nr(S(m).fh(),S(u).fh(),o,n),r.assignCachedGe(m,u,n),r=n}else r=B.vr.Nr(S(m).fh(),S(u).fh(),o,n)}for(m=[],o=0;o<O.length;o++)n=O[o],m.push(k1(h,n,u,r))}else for(r=B.vr.Nr(S(m).fh(),S(u).fh(),null),m=[],o=0;o<O.length;o++)n=O[o],m.push(k1(h,n,u,r));return m}function k1(h,O,m,u){return O=B.$b.zh(b(h,xt,O),u),y(h,xt,O,m)}function Av(h,O){h!=null&&(h=h.wkid||h.wkt2||h.wkt,Ca.has(h),Ca.set(h,O),No.has(h)&&No.delete(h))}function Iv(h){h!=null&&(h=h.wkid||h.wkt2||h.wkt,Ca.has(h)&&(Ca.delete(h),No.has(h)&&No.delete(h)))}function Pv(h,O,m,u){if(m==null||u==null)return[];var o=[],r=0;for(m=B.$b.QS(b(h,xt,m),b(h,xt,u),S(O))||[];r<m.length;r++)o.push(y(h,xt,m[r],O));return o}var ki,B,pr,vf,ce=this&&this.__extends||(function(){function h(O,m){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var r in o)o.hasOwnProperty(r)&&(u[r]=o[r])})(O,m)}return function(O,m){function u(){this.constructor=O}h(O,m),O.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}})();(function(h){var O;(O=h.qn||(h.qn={}))[O.Unknown=0]="Unknown",O[O.Point=33]="Point",O[O.Line=322]="Line",O[O.Envelope=197]="Envelope",O[O.MultiPoint=550]="MultiPoint",O[O.Polyline=1607]="Polyline",O[O.Polygon=1736]="Polygon",(function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"})(h.YK||(h.YK={}));var m=(function(){function u(){this.description=null,this.VA=0}return u.prototype.getType=function(){return 0},u.prototype.Db=function(){return-1},u.prototype.Nf=function(o){this.vc(),o!=this.description&&this.sn(o)},u.prototype.sn=function(){},u.prototype.Jl=function(o){this.vc(),o!=this.description&&(o=h.ee.CR(this.description,o))!=this.description&&this.sn(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.re=function(o){this.vc(),this.description.hasAttribute(o)||(o=h.ee.BR(this.description,o),this.sn(o))},u.prototype.Tg=function(){return null},u.prototype.bn=function(){},u.prototype.A=function(){},u.prototype.Qo=function(){},u.prototype.xc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Oa=function(){},u.prototype.Oc=function(){},u.prototype.Ia=function(){return null},u.prototype.copyTo=function(){},u.prototype.Ke=function(){return 0},u.prototype.Qb=function(){return 0},u.prototype.iG=function(){return this.hasAttribute(1)},u.tf=function(o){return 1+((192&o)>>6)>>1},u.Rn=function(o){return!!(32&o)},u.US=function(o){return!!(128&o)},u.yd=function(o){return!!(256&o)},u.xj=function(o){return!!(512&o)},u.Hc=function(o){return!!(1024&o)},u.prototype.Of=function(){var o=this.Ia();return this.copyTo(o),o},u.prototype.mg=function(){return null},u.jg=function(o){var r=o.Ia();return o.copyTo(r),r},u.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},u.Ax=function(o){var r=o.getType();if(u.xj(r))return o.I();if(o.B())return 0;if(r==197)return 4;if(r==33)return 1;if(u.yd(r))return 2;throw h.i.fa("missing type")},u})();h.aa=m})(B||(B={})),pr=B||(B={}),vf=(function(){function h(){this.y=this.x=0}return h.construct=function(O,m){var u=new h;return u.x=O,u.y=m,u},h.al=function(O){var m=new h;return m.x=O.x,m.y=O.y,m},h.prototype.ma=function(O,m){this.x=O,this.y=m},h.prototype.L=function(O){this.x=O.x,this.y=O.y},h.prototype.fq=function(O,m){return this.x===O&&this.y===m},h.prototype.Rz=function(O){return 2220446049250313e-31>=Math.abs(this.x-O.x)&&2220446049250313e-31>=Math.abs(this.y-O.y)},h.prototype.qb=function(O){return this.x===O.x&&this.y===O.y},h.prototype.Nb=function(O){return O==this||O instanceof h&&this.x==O.x&&this.y==O.y},h.prototype.sub=function(O){this.x-=O.x,this.y-=O.y},h.prototype.uc=function(O,m){this.x=O.x-m.x,this.y=O.y-m.y},h.prototype.add=function(O,m){m!==void 0?(this.x=O.x+m.x,this.y=O.y+m.y):(this.x+=O.x,this.y+=O.y)},h.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},h.prototype.mt=function(O){this.x=-O.x,this.y=-O.y},h.prototype.NS=function(O,m,u){this.x=O.x*(1-u)+m.x*u,this.y=O.y*(1-u)+m.y*u},h.prototype.Ct=function(O,m){this.x=this.x*O+m.x,this.y=this.y*O+m.y},h.prototype.HW=function(O,m,u){this.x=m.x*O+u.x,this.y=m.y*O+u.y},h.prototype.scale=function(O){this.x*=O,this.y*=O},h.prototype.compare=function(O){return this.y<O.y?-1:this.y>O.y?1:this.x<O.x?-1:this.x>O.x?1:0},h.prototype.normalize=function(){var O=this.length();O==0&&(this.x=1,this.y=0),this.x/=O,this.y/=O},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Sk=function(){return this.x*this.x+this.y*this.y},h.tb=function(O,m){return Math.sqrt(this.yc(O,m))},h.Oy=function(O,m,u,o){return O-=u,m-=o,Math.sqrt(O*O+m*m)},h.prototype.Qh=function(O){return this.x*O.x+this.y*O.y},h.prototype.fD=function(O){return Math.abs(this.x*O.x)+Math.abs(this.y*O.y)},h.prototype.wi=function(O){return this.x*O.y-this.y*O.x},h.prototype.Bt=function(O,m){var u=-this.x*m+this.y*O;this.x=this.x*O+this.y*m,this.y=u},h.prototype.Hv=function(){var O=this.x;this.x=-this.y,this.y=O},h.prototype.MG=function(O){this.x=-O.y,this.y=O.x},h.prototype.ar=function(){var O=this.x;this.x=this.y,this.y=-O},h.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.nu=function(O,m){var u=O.qu(),o=m.qu();return o==u?0>(O=O.wi(m))?1:0<O?-1:0:u<o?-1:1},h.yc=function(O,m){var u=O.x-m.x;return u*u+(O=O.y-m.y)*O},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Rc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(O,m){var u=h.tb(O,m),o=h.construct(this.x,this.y);if(u==0)return h.tb(o,O);var r=new h;return r.L(m),r.sub(O),o.sub(O),o.wi(r)/u},h.Uq=function(O,m,u){var o=new pr.Wb;o.set(m.x),o.sub(O.x);var r=new pr.Wb;r.set(u.y),r.sub(O.y);var n=new pr.Wb;n.set(m.y),n.sub(O.y);var a=new pr.Wb;return a.set(u.x),a.sub(O.x),o.Ag(r),n.Ag(a),o.sub(n),o.ps()?(o=new pr.hp(m.x),r=new pr.hp(O.x),n=new pr.hp(O.y),o=o.jt(r),O=(O=new pr.hp(u.y)).jt(n),m=(m=new pr.hp(m.y)).jt(n),u=(u=new pr.hp(u.x)).jt(r),o=o.lr(O),m=m.lr(u),(o=o.lr(m)).nT()?-1:o.fS()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.cc=function(){return pr.O.uj(pr.O.uj())},h})(),pr.h=vf,(function(h){var O=(function(){function m(u){this.Fy=this.Mt=0,this.OX=u}return m.prototype.reset=function(){this.Fy=this.Mt=0},m.prototype.add=function(u){u-=this.Fy;var o=this.Mt+u;this.Fy=o-this.Mt-u,this.Mt=o},m.prototype.sub=function(u){this.add(-u)},m.prototype.rm=function(){return this.OX+this.Mt},m})();h.Fx=O,h.lc=(function(){function m(){}return m.Cn=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},m.sign=function(u){return 0>u?-1:0<u?1:0},m.RK=function(u){return u-360*Math.floor(u/360)},m.round=function(u){return Math.floor(u+.5)},m.ox=function(u){return u*u},m.hq=function(u,o,r){return .5>=r?u+(o-u)*r:o-(o-u)*(1-r)},m.OG=function(u,o,r,n){.5>=r?(n.x=u.x+(o.x-u.x)*r,n.y=u.y+(o.y-u.y)*r):(n.x=o.x-(o.x-u.x)*(1-r),n.y=o.y-(o.y-u.y)*(1-r))},m.lT=function(u,o,r,n,a,c){.5>=a?(c.x=u+(r-u)*a,c.y=o+(n-o)*a):(c.x=r-(r-u)*(1-a),c.y=n-(n-o)*(1-a))},m})()})(B||(B={})),(function(h){var O=(function(m){function u(){var o=m.call(this)||this;return o.sa=0,o.na=0,o.pa=0,o.la=0,o.ka=null,o}return ce(u,m),u.prototype.ac=function(){return h.h.construct(this.sa,this.na)},u.prototype.Yp=function(o){o.x=this.sa,o.y=this.na},u.prototype.Dc=function(o){this.em(0,o)},u.prototype.ZB=function(o,r){this.em(0,h.h.construct(o,r))},u.prototype.To=function(o){this.hD(0,o)},u.prototype.setStart=function(o){this.uD(0,o)},u.prototype.wv=function(o,r){return this.Od(0,o,r)},u.prototype.YB=function(o,r,n){this.tn(0,o,r,n)},u.prototype.wc=function(){return h.h.construct(this.pa,this.la)},u.prototype.Tr=function(o){o.x=this.pa,o.y=this.la},u.prototype.Qc=function(o){this.em(1,o)},u.prototype.Ql=function(o,r){this.em(1,h.h.construct(o,r))},u.prototype.Po=function(o){this.hD(1,o)},u.prototype.setEnd=function(o){this.uD(1,o)},u.prototype.gv=function(o,r){return this.Od(1,o,r)},u.prototype.OB=function(o,r,n){this.tn(1,o,r,n)},u.prototype.Db=function(){return 1},u.prototype.B=function(){return this.Ac()},u.prototype.Oa=function(){},u.prototype.Ke=function(){return 0},u.prototype.Ea=function(o,r,n,a,c){return this.KM(o,r,n,a,c)},u.prototype.isIntersecting=function(o,r){return this.zr(o,r,!1)!=0},u.prototype.qs=function(o,r){return this.ru(o,r,!1)},u.prototype.ru=function(){return null},u.prototype.Ac=function(){return!1},u.prototype.ay=function(o){if(this.vc(),this.ka==null&&0<o)this.ka=h.O.lg(2*o);else if(this.ka!=null&&this.ka.length<2*o){for(var r=this.ka.slice(0),n=this.ka.length;n<2*o;n++)r[n]=0;this.ka=r}},u.gM=function(o,r,n){if(0<n)var a=0;for(var c=0;c<n;c++)r[0+a]=o[0],a++},u.prototype.em=function(o,r){o!=0?(this.pa=r.x,this.la=r.y):(this.sa=r.x,this.na=r.y)},u.prototype.sn=function(o){if(this.ka!=null){for(var r=h.ee.Iw(o,this.description),n=[],a=u.Gg(this.description,0),c=u.Gg(this.description,1),p=u.Gg(o,0),d=u.Gg(o,1),g=0,w=1,x=o.Aa;w<x;w++){var M=o.kd(w),$=h.ra.Va(M);if(r[w]==-1){var I=h.ra.se(M);for(M=0;M<$;M++)n[p+g]=I,n[d+g]=I,g++}else for(I=this.description.$j(r[w])-2,M=0;M<$;M++)n[p+g]=this.ka[a+I],n[d+g]=this.ka[c+I],g++,I++}this.ka=n}this.description=o},u.prototype.hD=function(o,r){if(this.Ac())throw h.i.fa("empty geometry");r.Nf(this.description),r.Ac()&&r.un();for(var n=0;n<this.description.Aa;n++)for(var a=this.description.Ed(n),c=0,p=h.ra.Va(a);c<p;c++){var d=this.Od(o,a,c);r.setAttribute(a,c,d)}},u.prototype.uD=function(o,r){if(this.vc(),r.Ac())throw h.i.fa("empty geometry");for(var n=r.description,a=0,c=n.Aa;a<c;a++)for(var p=n.Ed(a),d=h.ra.Va(p),g=0;g<d;g++){var w=r.Uc(p,g);this.tn(o,p,g,w)}},u.prototype.Od=function(o,r,n){if(this.Ac())throw h.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.la:this.pa:n!=0?this.na:this.sa;if(n>=h.ra.Va(r))throw h.i.ce();var a=this.description.Pf(r);return 0<=a?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[u.Gg(this.description,o)+this.description.$j(a)-2+n]):h.ra.se(r)},u.prototype.tn=function(o,r,n,a){if(this.vc(),n>=h.ra.Va(r))throw h.i.ce();var c=this.description.Pf(r);0>c&&(this.re(r),c=this.description.Pf(r)),r==0?o!=0?n!=0?this.la=a:this.pa=a:n!=0?this.na=a:this.sa=a:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[u.Gg(this.description,o)+this.description.$j(c)-2+n]=a)},u.prototype.copyTo=function(o){if(o.getType()!=this.getType())throw h.i.N();o.description=this.description,o.ay(this.description.Ae.length-2),u.gM(this.ka,o.ka,2*(this.description.Ae.length-2)),o.sa=this.sa,o.na=this.na,o.pa=this.pa,o.la=this.la,o.vc(),this.op(o)},u.prototype.Tg=function(o,r){var n=new h.Nc;return this.Ac()?(n.Oa(),n):(n.oa=this.Od(0,o,r),n.va=n.oa,n.Lk(this.Od(1,o,r)),n)},u.prototype.ZI=function(o){this.Ac()?o.Oa():(o.oa=this.Od(0,0,0),o.va=o.oa,o.Lk(this.Od(1,0,0)))},u.prototype.Tw=function(o,r){r.Nf(this.description),r.Cb(this.hc(o));for(var n=1,a=this.description.Aa;n<a;n++)for(var c=this.description.Ed(n),p=h.ra.Va(c),d=0;d<p;d++){var g=this.Uc(o,c,d);r.setAttribute(c,d,g)}},u.prototype.FM=function(o){if(this.description!=o.description||this.sa!=o.sa||this.pa!=o.pa||this.na!=o.na||this.la!=o.la)return!1;for(var r=0;r<2*(this.description.Ae.length-2);r++)if(this.ka[r]!=o.ka[r])return!1;return!0},u.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},u.prototype.reverse=function(){var o=this.sa;this.sa=this.pa,this.pa=o,o=this.na,this.na=this.la,this.la=o,o=1;for(var r=this.description.Aa;o<r;o++)for(var n=this.description.kd(o),a=0,c=h.ra.Va(n);a<c;a++){var p=this.Od(0,n,a),d=this.Od(1,n,a);this.tn(0,n,a,d),this.tn(1,n,a,p)}},u.prototype.zr=function(o,r,n){var a=this.getType(),c=o.getType();if(a===322){if(c==322)return h.yb.OM(this,o,r,n);throw h.i.Qa()}throw h.i.Qa()},u.prototype.KM=function(o,r,n,a,c){var p=this.getType(),d=o.getType();if(p===322){if(d==322)return h.yb.Zx(this,o,r,n,a,c);throw h.i.Qa()}throw h.i.Qa()},u.prototype.Tx=function(){return null},u.Gg=function(o,r){return r*(o.Ae.length-2)},u.prototype.hc=function(o,r){if(r===void 0)return r=new h.h,this.hc(o,r),r;h.lc.lT(this.sa,this.na,this.pa,this.la,o,r)},u.prototype.fe=function(){return null},u.prototype.eG=function(){return null},u.prototype.cq=function(){return null},u.prototype.Bi=function(){return null},u.prototype.Pn=function(){return null},u.prototype.kg=function(){return null},u.prototype.Ux=function(o,r){return r!==void 0?this.vx(r)-this.vx(o):this.vx(o)},u.prototype.op=function(){},u.prototype.dl=function(){return null},u.prototype.ah=function(){},u.prototype.Uc=function(){return null},u.prototype.Pe=function(){return null},u.prototype.vx=function(){return null},u.prototype.NG=function(){return null},u.prototype.tb=function(o,r){if(!r&&this.zr(o,0,!1)!=0)return 0;r=17976931348623157e292;var n=this.ac(),a=o.fe(n,!1);return n.sub(o.hc(a)),(n=n.length())<r&&(r=n),n=this.wc(),a=o.fe(n,!1),n.sub(o.hc(a)),(n=n.length())<r&&(r=n),n=o.ac(),a=this.fe(n,!1),n.sub(this.hc(a)),(n=n.length())<r&&(r=n),n=o.wc(),a=this.fe(n,!1),n.sub(this.hc(a)),(n=n.length())<r&&(r=n),r},u.prototype.mg=function(){return h.pi.gm(this,null)},u})(h.aa);h.SC=O})(B||(B={})),new B.h,(function(h){var O;(O=h.$K||(h.$K={}))[O.Unknown=-1]="Unknown",O[O.Not=0]="Not",O[O.Weak=1]="Weak",O[O.Strong=2]="Strong",(function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"})(h.MK||(h.MK={}));var m=(function(u){function o(){var r=u.call(this)||this;return r.Hm=65535,r.wa=0,r.Pg=-1,r.Bb=null,r}return ce(o,u),o.prototype.op=function(){},o.prototype.$x=function(){},o.prototype.iy=function(){},o.prototype.I=function(){return this.wa},o.prototype.B=function(){return this.Ac()},o.prototype.Ac=function(){return this.wa==0},o.prototype.ak=function(r){return(this.Hm&r)!=0},o.prototype.Lf=function(r,n){this.Hm=n?this.Hm|r:this.Hm&~r},o.prototype.mc=function(){this.ak(32)&&this.bN()},o.prototype.wx=function(){if(this.Ac())throw h.i.fa("This operation was performed on an Empty Geometry.")},o.prototype.ve=function(r,n){if(0>r||r>=this.wa)throw h.i.fa("index out of bounds");this.mc(),n.Nf(this.description),n.B()&&n.un();for(var a=0;a<this.description.Aa;a++)for(var c=this.description.Ed(a),p=0,d=h.ra.Va(c);p<d;p++){var g=this.za[a].eg(d*r+p);n.setAttribute(c,p,g)}},o.prototype.Ht=function(r,n){this.mc();for(var a=n.description,c=0;c<a.Aa;c++)for(var p=a.Ed(c),d=h.ra.Va(p),g=0;g<d;g++){var w=n.Uc(p,g);this.setAttribute(p,r,g,w)}},o.prototype.D=function(r,n){if(0>r||r>=this.I())throw h.i.ce();this.mc(),this.za[0].tc(2*r,n)},o.prototype.Na=function(r){var n=new h.h;return this.D(r,n),n},o.prototype.Gc=function(r,n){this.za[0].tc(2*r,n)},o.prototype.Cb=function(r,n,a){if(0>r||r>=this.wa)throw h.i.ce();this.mc();var c=this.za[0];a!==void 0?(c.write(2*r,n),c.write(2*r+1,a)):c.Tt(2*r,n),this.Pc(1993)},o.prototype.Cz=function(){if(void 0>=this.I())throw h.i.ce();this.mc();var r=this.za[0],n=new h.Nd;return n.x=r.read(NaN),n.y=r.read(NaN),n.z=this.hasAttribute(1)?this.za[1].eg():h.ra.se(1),n},o.prototype.dC=function(r){if(0>r||r>=this.I())throw h.i.ce();this.re(1),this.mc(),this.Pc(1993);var n=this.za[0];n.write(2*r,(void 0).x),n.write(2*r+1,(void 0).y),this.za[1].pr(r,(void 0).z)},o.prototype.Uc=function(r,n,a){if(0>n||n>=this.wa)throw h.i.ce();var c=h.ra.Va(r);if(a>=c)throw h.i.ce();this.mc();var p=this.description.Pf(r);return 0<=p?this.za[p].eg(n*c+a):h.ra.se(r)},o.prototype.yF=function(r,n){return this.Uc(r,n)},o.prototype.setAttribute=function(r,n,a,c){if(0>n||n>=this.wa)throw h.i.ce();var p=h.ra.Va(r);if(a>=p)throw h.i.ce();this.re(r),this.mc(),r=this.description.Pf(r),this.Pc(1993),this.za[r].pr(n*p+a,c)},o.prototype.ub=function(r){return this.wx(),this.re(r),this.mc(),this.za[this.description.Pf(r)]},o.prototype.hn=function(r,n){if(n!=null&&h.ra.Tp(r)!=n.Tp())throw h.i.N();this.re(r),r=this.description.Pf(r),this.za==null&&(this.za=h.Yc.qI(this.description.Aa)),this.za[r]=n,this.Pc(16777215)},o.prototype.sn=function(r){var n=null;if(this.za!=null){var a=h.ee.Iw(r,this.description);n=[];for(var c=0,p=r.Aa;c<p;c++)a[c]!=-1&&(n[c]=this.za[a[c]])}this.description=r,this.za=n,this.Pg=-1,this.Pc(16777215)},o.prototype.AD=function(r){this.wu(!0),r instanceof h.l?this.$.A(r):this.$.Qo(r)},o.prototype.aN=function(r){this.wu(!1),r instanceof h.l?this.$.A(r):this.$.Qo(r)},o.prototype.bn=function(r){this.wu(!0),this.$.copyTo(r)},o.prototype.A=function(r){this.AD(r)},o.prototype.Qo=function(r){this.AD(r)},o.prototype.xc=function(r){this.aN(r)},o.prototype.Tg=function(r,n){var a=new h.Nc;return this.Ac()?(a.Oa(),a):(this.wu(!0),this.$.Tg(r,n))},o.prototype.cc=function(){var r=this.description.cc();if(!this.Ac())for(var n=this.I(),a=0,c=this.description.Aa;a<c;a++)r=this.za[a].An(r,0,n*h.ra.Va(this.description.Ed(a)));return r},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&this.description.Nb(r.description))||this.Ac()!=r.Ac())return!1;if(this.Ac())return!0;var n=this.I();if(n!=r.I())return!1;for(var a=0;a<this.description.Aa;a++){var c=this.description.kd(a),p=this.ub(c),d=r.ub(c);if(!p.Nb(d,0,n*h.ra.Va(c)))return!1}return!0},o.prototype.copyTo=function(r){if(r.getType()!=this.getType())throw h.i.N();this.dD(r)},o.prototype.dD=function(r){this.mc(),r.description=this.description,r.za=null;var n=this.description.Aa,a=null;if(this.za!=null){a=[];for(var c=0;c<n;c++)this.za[c]!=null&&(a[c]=this.za[c].GB(this.I()*h.ra.Va(this.description.Ed(c))))}this.$!=null?(r.$=this.$.Ia(),this.$.copyTo(r.$)):r.$=null,r.wa=this.wa,r.Hm=this.Hm,r.za=a;try{this.op(r)}catch{throw r.Oa(),h.i.fu()}},o.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},o.prototype.Pc=function(r){r==16777215&&(this.Pg=-1,this.$x()),this.Hm|=r,this.lM(),this.vc()},o.prototype.wu=function(r){if(this.mc(),this.ak(192))if(this.$==null?this.$=new h.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(r);for(var n=1;n<this.description.Aa;n++)for(var a=this.description.Ed(n),c=h.ra.Va(a),p=this.za[n],d=0;d<c;d++){var g=new h.Nc;g.Oa();for(var w=0;w<this.wa;w++){var x=p.eg(w*c+d);g.Zb(x)}this.$.setInterval(a,d,g)}r&&this.Lf(192,!1)}},o.prototype.hy=function(){this.$.Oa();for(var r=this.za[0],n=new h.h,a=0;a<this.wa;a++)r.tc(2*a,n),this.$.Zb(n)},o.prototype.yp=function(r){r.Oa();for(var n=this.za[0],a=new h.h,c=0;c<this.wa;c++)n.tc(2*c,a),r.Zb(a)},o.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=h.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var r=0;r<this.description.Aa;r++){var n=this.description.Ed(r);if(this.za[r]!=null){var a=h.ra.Va(n),c=h.O.truncate(this.za[r].size/a);c<this.wa&&(c=h.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[r].resize(c*a,h.ra.se(n))),c<this.Pg&&(this.Pg=c)}else this.za[r]=h.Yc.YE(n,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},o.prototype.dm=function(r){if(0>r)throw h.i.N();r!=this.wa&&(this.wa=r,this.Pc(65535))},o.prototype.om=function(r){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=r)return this.ak(8)?1:2}return-1},o.prototype.Ch=function(r,n){if(this.QT=n,r==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),r==0)this.Lf(2,!1),this.Lf(4,!1);else if(r==1)this.Lf(2,!0),this.Lf(4,!1);else{if(r!=2)throw h.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},o.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},o.prototype.kD=function(r,n,a,c){if(0>r||r>=this.wa||0>n||n>=this.wa)throw h.i.fa("index out of bounds");this.mc(),c.Nf(this.description),c.B()&&c.un();for(var p=0;p<this.description.Aa;p++)for(var d=this.description.Ed(p),g=0,w=h.ra.Va(d);g<w;g++){var x=this.za[p].eg(w*r+g),M=this.za[p].eg(w*n+g);c.setAttribute(d,g,h.lc.hq(x,M,a))}},o.prototype.yr=function(r,n){var a=this.za[0].o,c=a[2*r]-a[2*n];return r=a[2*r+1]-a[2*n+1],Math.sqrt(c*c+r*r)},o.prototype.KR=function(r){if(0>r||r>=this.wa)throw h.i.ce();this.mc();var n=new h.Sa;n.Nf(this.description),n.B()&&n.un();for(var a=0;a<this.description.Aa;a++)for(var c=this.description.kd(a),p=0,d=h.ra.Va(c);p<d;p++){var g=this.za[a].eg(d*r+p);n.setAttribute(c,p,g)}return n},o.prototype.Dh=function(r,n){if(0>r||r>=this.wa)throw h.i.ce();if(n.B())throw h.i.N();this.mc();for(var a=n.description,c=0;c<a.Aa;c++)for(var p=a.kd(c),d=h.ra.Va(p),g=0;g<d;g++){var w=n.Uc(p,g);this.setAttribute(p,r,g,w)}},o.prototype.lu=function(){return null},o.prototype.fj=function(){return null},o})(h.aa);h.Gx=m})(B||(B={})),(function(h){var O=(function(){function m(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new h.$c(7),this.Zn=null}return m.prototype.Vo=function(u){this.Zn=u},m.prototype.RP=function(){this.Rv=!1},m.prototype.De=function(u){this.ob.De(u)},m.prototype.Pr=function(u){var o=this.ob.Ce();return this.rX(o),this.uX(u,o),o},m.prototype.MP=function(u){this.ob.jd(u)},m.prototype.addElement=function(u,o){return o==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),o=this.Qe),this.FD(u,0,o)},m.prototype.KD=function(u){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(u,1,this.Qe)},m.prototype.xn=function(u){this.Qe==-1&&(this.Qe=this.Pr(-1));var o=this.Qe,r=this.ob.o;if(o==-1||r[7*o]==-1)return u=this.ob.Ll([-1,-1,-1,u,this.gl(),-1,-1]),(r=this.ob.o)[7*o]=u,this.vp(-1,u,o,r),u;var n=o==-1?-1:r[7*o+2];return u=this.ob.Ll([-1,-1,n,u,this.gl(),-1,-1]),(r=this.ob.o)[7*n+1]=u,this.oy(u,r),r[7*u+2]===-1&&(r[7*o]=u),this.vp(-1,u,o,r),u},m.prototype.zu=function(u,o,r,n){var a=-1;a==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),a=this.Qe);var c=this.ob.o;if(a==-1||c[7*a]==-1)return r=this.ob.Ll([-1,-1,-1,r,this.gl(),-1,-1]),(c=this.ob.o)[7*a]=r,this.vp(-1,r,a,c),r;if(n){n=o!=-1?this.Zn.compare(this,r,o):-1;var p=u!=-1?this.Zn.compare(this,r,u):1}else n=-1,p=1;if(n==0||p==0)return c[7*a+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Tm>h.O.bB(this.Tm)>>1:o!=-1)?u=o:n=p,o=!0;;){if(0>n){if((p=c[7*u])==-1){n=u,r=this.ob.Ll([-1,-1,u,r,this.gl(),-1,-1]),(c=this.ob.o)[7*u]=r;break}u=p}else{if((p=c[7*u+1])==-1){n=c[7*u+6],r=this.ob.Ll([-1,-1,u,r,this.gl(),-1,-1]),(c=this.ob.o)[7*u+1]=r;break}u=p}o&&(n*=-1,o=!1)}return this.oy(r,c),c[7*r+2]===-1&&(c[7*a]=r),this.vp(n,r,a,c),r},m.prototype.FF=function(){return this.iR(this.Qe)},m.prototype.vd=function(u,o){o=o==-1?this.Qe:o,this.Rv?this.LP(u,o):this.iY(u,o)},m.prototype.search=function(u,o){for(o=this.sv(o);o!=-1;){var r=this.Zn.compare(this,u,o);if(r==0)return o;o=0>r?this.ll(o):this.Xp(o)}return-1},m.prototype.IW=function(u){for(var o=this.sv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.ll(o):(r=o,o=this.Xp(o))}return r},m.prototype.uJ=function(u){for(var o=this.sv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(r=o,o=this.ll(o)):o=this.Xp(o)}return r},m.prototype.ja=function(u){return this.ob.T(u,3)},m.prototype.ll=function(u){return this.ob.T(u,0)},m.prototype.Xp=function(u){return this.ob.T(u,1)},m.prototype.getParent=function(u){return this.ob.T(u,2)},m.prototype.lb=function(u){return this.ob.T(u,6)},m.prototype.we=function(u){return this.ob.T(u,5)},m.prototype.rc=function(u){return u==-1?this.kl(this.Qe):this.kl(u)},m.prototype.Fc=function(u){return u==-1?this.Zr(this.Qe):this.Zr(u)},m.prototype.ZR=function(u){return u==-1?this.bG(this.Qe):this.bG(u)},m.prototype.Sj=function(u,o){this.NB(u,o)},m.prototype.sv=function(u){return u==-1?this.YF(this.Qe):this.YF(u)},m.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},m.prototype.size=function(u){return u==-1?this.$F(this.Qe):this.$F(u)},m.prototype.KN=function(u,o){for(var r=o[7*u],n=o[7*u+1],a=o[7*u+4];r!=-1||n!=-1;){var c=r!=-1?o[7*r+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,a<=Math.min(c,n))break;c<=n?this.sJ(r,o):this.rJ(u,o),r=o[7*u],n=o[7*u+1]}},m.prototype.oy=function(u,o){if(this.Rv)for(var r=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>r;)o[7*n]==u?this.sJ(u,o):this.rJ(n,o),n=o[7*u+2]},m.prototype.rJ=function(u,o){var r=o[7*u+1];o[7*r+2]=o[7*u+2],o[7*u+2]=r;var n=o[7*r];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*r]=u,(n=o[7*r+2])!=-1&&(o[7*n]==u?o[7*n]=r:o[7*n+1]=r)},m.prototype.sJ=function(u,o){var r=o[7*u+2];o[7*u+2]=o[7*r+2],o[7*r+2]=u;var n=o[7*u+1];o[7*r]=n,n!=-1&&(o[7*n+2]=r),o[7*u+1]=r,(n=o[7*u+2])!=-1&&(o[7*n]===r?o[7*n]=u:o[7*n+1]=u)},m.prototype.Pk=function(u,o){this.ob.S(u,2,o)},m.prototype.TB=function(u,o){this.ob.S(u,0,o)},m.prototype.XB=function(u,o){this.ob.S(u,1,o)},m.prototype.WB=function(u,o){this.ob.S(u,5,o)},m.prototype.ex=function(u,o){this.ob.S(u,6,o)},m.prototype.XJ=function(u,o){this.ob.S(o,0,u)},m.prototype.rX=function(u){this.ob.S(u,4,0)},m.prototype.uX=function(u,o){this.ob.S(o,5,u)},m.prototype.YF=function(u){return u==-1?-1:this.ob.T(u,0)},m.prototype.kl=function(u){return u==-1?-1:this.ob.T(u,1)},m.prototype.Zr=function(u){return u==-1?-1:this.ob.T(u,2)},m.prototype.iR=function(u){return u==-1?-1:this.ob.T(u,3)},m.prototype.$F=function(u){return u==-1?0:this.ob.T(u,4)},m.prototype.bG=function(u){return this.ob.T(u,5)},m.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},m.prototype.fl=function(u){u!=-1&&this.ob.jd(u)},m.prototype.gl=function(){return this.Tm=h.O.bB(this.Tm),1073741823&this.Tm},m.prototype.FD=function(u,o,r){var n=this.ob.o;if(r==-1||n[7*r]==-1)return u=this.ob.Ll([-1,-1,-1,u,this.gl(),-1,-1]),(n=this.ob.o)[7*r]=u,this.vp(-1,u,r,n),u;for(var a=r==-1?-1:n[7*r];;){var c=o==-1?1:this.Zn.compare(this,u,a);if(0>c){if((c=this.ll(a))==-1){o=a,u=this.ob.Ll([-1,-1,a,u,this.gl(),-1,-1]),(n=this.ob.o)[7*a]=u;break}a=c}else{if(o==1&&c==0)return n[7*r+3]=a,-1;if((c=n[7*a+1])==-1){o=n[7*a+6],u=this.ob.Ll([-1,-1,a,u,this.gl(),-1,-1]),(n=this.ob.o)[7*a+1]=u;break}a=c}}return this.oy(u,n),n[7*u+2]===-1&&(n[7*r]=u),this.vp(o,u,r,n),u},m.prototype.vp=function(u,o,r,n){if(u!=-1){var a=n[7*u+5];n[7*u+5]=o}else a=r==-1?-1:n[7*r+2];n[7*o+5]=a,a!=-1&&(n[7*a+6]=o),n[7*o+6]=u,u==(r==-1?-1:n[7*r+1])&&(n[7*r+1]=o),u==-1&&(n[7*r+2]=o),n[7*r+4]=(r==-1?0:n[7*r+4])+1},m.prototype.AB=function(u,o){var r=this.ob.o,n=r[7*u+5];u=r[7*u+6],n!=-1?r[7*n+6]=u:r[7*o+1]=u,u!=-1?r[7*u+5]=n:r[7*o+2]=n,r[7*o+4]=o===-1?-1:r[7*o+4]-1},m.prototype.iY=function(u,o){this.AB(u,o);var r=this.ll(u),n=this.Xp(u),a=this.getParent(u),c=u;if(r!=-1&&n!=-1){this.Tm=h.O.bB(this.Tm);var p=1073741823<this.Tm?this.lb(u):this.we(u),d=this.getParent(p)==u;this.ob.gC(u,p,0),this.ob.gC(u,p,1),this.ob.gC(u,p,2),a!=-1?this.ll(a)==u?this.TB(a,p):this.XB(a,p):this.XJ(p,o),d?(r==p?(this.TB(p,u),this.Pk(n,p)):n==p&&(this.XB(p,u),this.Pk(r,p)),this.Pk(u,p),a=p):(this.Pk(r,p),this.Pk(n,p),a=this.getParent(u),c=p),r=this.ll(u),n=this.Xp(u),r!=-1&&this.Pk(r,u),n!=-1&&this.Pk(n,u)}r=r!=-1?r:n,a==-1?this.XJ(r,o):this.ll(a)==c?this.TB(a,r):this.XB(a,r),r!=-1&&this.Pk(r,a),this.fl(u)},m.prototype.LP=function(u,o){var r=this.ob.o;r[7*u+4]=2147483647;var n=-1,a=-1,c=o===-1?-1:r[7*o],p=c==u;if(p&&(n=r[7*c],a=r[7*c+1],n==-1&&a==-1))return this.AB(c,o),this.fl(c),void(r[7*o]=-1);this.KN(u,r),(c=r[7*u+2])!=-1&&(r[7*c]==u?r[7*c]=-1:r[7*c+1]=-1),this.AB(u,o),this.fl(u),p&&(r[7*o]=n==-1||r[7*n+2]!=-1?a:n)},m.prototype.NB=function(u,o){this.ob.S(u,3,o)},m})();h.Yj=O})(B||(B={})),(function(h){var O=(function(){function m(u,o){u!==void 0&&this.K(u,o)}return m.prototype.K=function(u,o){this.oa=u,this.va=o,this.normalize()},m.prototype.isIntersecting=function(u){return this.oa<=u.oa?this.va>=u.oa:u.va>=this.oa},m.prototype.move=function(u){this.B()||(this.oa+=u,this.va+=u)},m.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var u=this.oa;this.oa=this.va,this.va=u}isNaN(this.va)&&this.Oa()}},m.prototype.Oa=function(){this.va=this.oa=NaN},m.prototype.B=function(){return isNaN(this.oa)},m.prototype.Zb=function(u){typeof u=="number"?this.B()?this.va=this.oa=u:this.Lk(u):u.B()||(this.B()?(this.oa=u.oa,this.va=u.va):(this.oa>u.oa&&(this.oa=u.oa),this.va<u.va&&(this.va=u.va),this.oa>this.va&&this.Oa()))},m.prototype.Lk=function(u){u<this.oa?this.oa=u:u>this.va&&(this.va=u)},m.prototype.contains=function(u){return typeof u=="number"?u>=this.oa&&u<=this.va:u.oa>=this.oa&&u.va<=this.va},m.prototype.Ea=function(u){this.B()||u.B()?this.Oa():(this.oa<u.oa&&(this.oa=u.oa),this.va>u.va&&(this.va=u.va),this.oa>this.va&&this.Oa())},m.prototype.W=function(u){this.B()||(this.oa-=u,this.va+=u,this.va<this.oa&&this.Oa())},m.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},m.prototype.KB=function(u,o){u>o?(this.oa=o,this.va=u):(this.oa=u,this.va=o)},m.prototype.It=function(u){return h.O.Rk(u,this.oa,this.va)},m.prototype.R=function(){return this.va-this.oa},m.prototype.sf=function(){return .5*(this.oa+this.va)},m.prototype.Nb=function(u){return u==this||u instanceof m&&(!(!this.B()||!u.B())||this.oa==u.oa&&this.va==u.va)},m.prototype.cc=function(){return h.O.uj(h.O.uj())},m})();h.Nc=O})(B||(B={})),(function(h){var O=new h.Nc,m=new h.Nc,u=function(){this.ne=null,this.pb=-1,this.sb=new h.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new h.Nc,this.Uf.KB(0,0)};h.IY=u;var o=(function(){function r(n,a,c){this.g=n,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=a,this.Nq=10*a,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=c,this.TA=new u,this.YH=new u,h.O.truncate(3*n.fd/2)}return r.prototype.mG=function(n,a,c,p){n.ne=p===null?null:p[c[5*a]],n.Tv=n.ne!=null,n.Tv||((p=c[5*a+2])!==-1&&this.g.mW(c[5*a],c[5*p],n.sb),n.ne=n.sb,n.Uf.KB(n.sb.sa,n.sb.pa),n.Uf.va+=this.qa,n.sb.rI(),n.Vv=n.sb.la==n.sb.na,n.Vv||(n.qA=(n.sb.pa-n.sb.sa)/(n.sb.la-n.sb.na)))},r.prototype.OO=function(n,a){var c=n.zr(a,this.qa,!0);return c!=0?c==2?this.Qy():this.xi():(n.Yp(mn),n.Tr(Kn),a.Yp(Zn),a.Tr(Co),Me.ma(this.Kq,this.Hk),mn.qb(Zn)&&this.Hk==mn.y?0>Kn.compare(Co)?Me.L(Kn):Me.L(Co):mn.qb(Co)&&this.Hk==mn.y?0>Kn.compare(Zn)?Me.L(Kn):Me.L(Zn):Zn.qb(Kn)&&this.Hk==Zn.y?0>mn.compare(Co)?Me.L(mn):Me.L(Co):Kn.qb(Co)&&this.Hk==Kn.y&&(0>mn.compare(Zn)?Me.L(mn):Me.L(Zn)),n.Pe(Me.y,Me.x)<a.Pe(Me.y,Me.x)?-1:1)},r.prototype.MO=function(n,a){if(n.sb.na==a.sb.na&&n.sb.sa==a.sb.sa)return n.sb.la==a.sb.la&&n.sb.pa==a.sb.pa?this.gA?this.Qy():0:this.PE(n,a);if(n.sb.la==a.sb.la&&n.sb.pa==a.sb.pa)return this.OE(n,a);var c=this.OE(n,a);return n=this.PE(n,a),0>c&&0>n?-1:0<c&&0<n?1:this.xi()},r.prototype.IO=function(n,a){if(n.pa>a.pa){if(a.pa>a.sa&&a.la-a.na<2*this.qa&&n.vi(a.pa,a.la,this.qa))return this.xi()}else if((a.la-a.na)/(a.pa-a.sa)*(n.pa-n.sa)<this.Nq&&a.vi(n.pa,n.la,this.qa))return this.xi();return 1},r.prototype.JO=function(n,a){if(n.sa<a.sa){if(a.pa>a.sa&&a.la-a.na<2*this.qa&&n.vi(a.pa,a.la,this.qa))return this.xi()}else if((a.la-a.na)/(a.pa-a.sa)*(n.sa-n.pa)<this.Nq&&a.vi(n.sa,n.na,this.qa))return this.xi();return-1},r.prototype.KO=function(n,a){var c=new h.h;c.uc(a.wc(),a.ac()),c.ar(),c.normalize();var p=new h.h;p.uc(n.ac(),a.ac());var d=new h.h;d.uc(n.wc(),a.ac()),p=p.Qh(c),c=d.Qh(c),d=Math.abs(p);var g=Math.abs(c);if(d<g){if(d<this.Nq&&a.vi(n.sa,n.na,this.qa))return this.xi()}else if(g<this.Nq&&a.vi(n.pa,n.la,this.qa))return this.xi();return 0>p&&0>c?-1:0<p&&0<c?1:this.xi()},r.prototype.NE=function(n,a){return n.na==a.na&&n.sa==a.sa?this.IO(n,a):n.la==a.la&&n.pa==a.pa?this.JO(n,a):this.KO(n,a)},r.prototype.LO=function(n,a){return n.la==a.la&&n.pa==a.pa&&n.na==a.na&&n.sa==a.sa?this.gA?this.Qy():0:this.xi()},r.prototype.OE=function(n,a){var c=1;if(n.sb.na<a.sb.na){c=-1;var p=n;n=a,a=p}n=n.sb,p=a.sb;var d=n.sa-p.sa;a=a.qA*(n.na-p.na);var g=this.Nq;return d<a-g?-c:d>a+g?c:p.vi(n.sa,n.na,this.qa)?this.xi():d<a?-c:c},r.prototype.PE=function(n,a){var c=1;if(a.sb.la<n.sb.la){c=-1;var p=n;n=a,a=p}n=n.sb,p=a.sb;var d=n.pa-p.sa;a=a.qA*(n.la-p.na);var g=this.Nq;return d<a-g?-c:d>a+g?c:p.vi(n.pa,n.la,this.qa)?this.xi():d<a?-c:c},r.prototype.Qy=function(){return this.rg=!0,this.Ni=new h.Md(5,this.Lo,this.gt),-1},r.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new h.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},r.prototype.NO=function(n,a,c,p){if(this.rg)return-1;var d=this.OH==this.Hk&&this.NH==this.Kq;if(d&&n==this.Ws)var g=this.PH;else g=NaN,this.Ws=-1;return d&&a==this.Xs?d=this.QH:(d=NaN,this.Xs=-1),c.ne.ZI(O),p.ne.ZI(m),O.va<m.oa?-1:m.va<O.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(g)&&(this.Ws=n,this.PH=g=n=c.ne.Pe(this.Hk,this.Kq)),isNaN(d)&&(this.Xs=a,this.QH=d=n=p.ne.Pe(this.Hk,this.Kq)),Math.abs(g-d)<=this.qa?this.OO(c.ne,p.ne):g<d?-1:g>d?1:0)},r.prototype.Kr=function(){this.rg=!1},r.prototype.rm=function(){return this.Ni},r.prototype.$J=function(n,a){this.Hk=n,this.Kq=a,this.gt=this.Lo=this.Xs=this.Ws=-1},r.prototype.compare=function(n,a,c){return this.rg?-1:(n=n.ja(c),this.Dm=c,this.RE(a,a,n,n))},r.prototype.RE=function(n,a,c,p){if(this.Lo==a)var d=this.TA;else this.Lo=a,d=this.TA,this.TA.pb=n,this.mG(d,a,this.g.td.o,this.g.We);if(g==null){this.gt=p;var g=this.YH;this.YH.pb=c,this.mG(g,p,this.g.td.o,this.g.We)}return d.Tv||g.Tv?this.NO(a,p,d,g):d.Uf.va<g.Uf.oa?-1:g.Uf.va<d.Uf.oa?1:(n=d.Vv?1:0,(n|=g.Vv?2:0)==0?this.MO(d,g):n==1?this.NE(d.sb,g.sb):n==2?-1*this.NE(g.sb,d.sb):this.LO(d.sb,g.sb))},r})();h.UC=o})(B||(B={})),(function(h){var O=(function(){function m(u,o){this.g=u,this.qa=o,this.rg=!1,this.Lo=-1,this.Uf=new h.Nc,this.Gq=new h.h,this.Gq.Rc(),this.ie=new h.yb,this.Dm=-1,this.BA=17976931348623157e292}return m.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},m.prototype.Dh=function(u){this.Gq.L(u)},m.prototype.compare=function(u,o){return this.SE(o,u.ja(o))},m.prototype.SE=function(u,o){var r=this.g.bc(o)!=null;if(r||(this.g.ed(o,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),r)throw h.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=u,this.rg=!0,0;this.ie.rI(),r=this.ie.ac(),(o=new h.h).uc(this.ie.wc(),r),o.ar();var n=new h.h;return n.uc(this.Gq,r),r=o.Qh(n),(r/=o.length())<10*-this.qa?-1:r>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((o=Math.abs(r))<this.BA&&(this.Dm=u,this.BA=o),this.rg=!0,o<.25*this.qa)?0:0>r?-1:1},m})();h.aM=O})(B||(B={})),(function(h){function O(u,o,r,n){r=new Float64Array(u.subarray(r,n)),u.set(r,o)}var m=(function(){function u(o){this.Pb=this.pk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Float64Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.fa("invalid_call");if(r<o||r>n||o>n)throw h.i.N();o!=r&&n!=r&&(this.ni(o,r-o,1),this.ni(r,n-r,1),this.ni(o,n-o,1))},u.qf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Bn=function(o){var r=new u(0);return r.o=new Float64Array(o.o),r.size=o.size,r},u.Lr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Float64Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.tc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Tt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.GB=function(o){return u.Lr(this,o)},u.prototype.eg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.pr=function(o,r){this.write(o,r)},u.prototype.An=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.O.uj(this.read(r));return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.N();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var d=0;d<n;d+=c){a-=c;for(var g=0;g<c;g++)this.o[p+d+g]=o.o[r+a+g]}}},u.prototype.Mn=function(o,r,n,a,c,p,d){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.N();var g=this.size-d;if(g<a&&this.resize(this.size+a-g),O(this.o,o+a,o,o+(d-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,d=0;d<a;d+=p)for(c-=p,g=0;g<p;g++)this.o[o+d+g]=r.o[n+c+g]},u.prototype.Iz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,O(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var d=a-1;c<a;++c)p=r[n+d],this.o[o++]=p.x,this.o[o++]=p.y,d--}},u.prototype.Ln=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,O(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.vj=function(o,r,n){if(this.Pb)throw h.i.Hb();O(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Ut=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.N();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Ar(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.O.truncate(r/p);c<r;c++){for(var d=0;d<p;d++)this.o[o+d]=n.o[a+d];o+=p,a-=p}},u.prototype.En=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&O(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.ni=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var d=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=d}}},u.prototype.Wj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.N();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Ar=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.O.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var d=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=d}n+=c,o-=c}},u.prototype.vC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.N();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.uC=function(o,r,n){if(0>o||0>r)throw h.i.N();if(r!=0){this.size<(r<<1)+o&&this.resize((r<<1)+o),r+=0;for(var a=0;a<r;a++)this.o[o]=n[a][0],this.o[o+1]=n[a][1],o+=2}},u.prototype.Vw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.N();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.uB=function(o,r,n){if(0>o||0>r||this.size<(r>>1)+o)throw h.i.N();if(r!=0){r=0+r;for(var a=0;a<r;a++)n[a][0]=this.o[o],n[a][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},u.prototype.ix=function(){this.pk=this.Pb=!0},u.prototype.Vd=function(o,r,n){Array.prototype.sort.call(this.o.subarray(o,r),n)},u.prototype.Tp=function(){return 1},u})();h.be=m})(B||(B={})),(function(h){function O(u,o,r,n){r=new Int32Array(u.subarray(r,n)),u.set(r,o)}h.rY=function(){this.random=1973};var m=(function(){function u(o){this.Pb=this.pk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Int32Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.fa("invalid_call");if(r<o||r>n||o>n)throw h.i.N();o!=r&&n!=r&&(this.ni(o,r-o,1),this.ni(r,n-r,1),this.ni(o,n-o,1))},u.qf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Bn=function(o){var r=new u(0);return r.o=new Int32Array(o.o),r.size=o.size,r},u.Lr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int32Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.tc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Tt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.GB=function(o){return u.Lr(this,o)},u.prototype.eg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.pr=function(o,r){this.write(o,r)},u.prototype.An=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.O.Th(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.N();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var d=0;d<n;d+=c){a-=c;for(var g=0;g<c;g++)this.o[p+d+g]=o.o[r+a+g]}}},u.prototype.Mn=function(o,r,n,a,c,p,d){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.N();if(O(this.o,o+a,o,o+(d-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,d=0;d<a;d+=p){c-=p;for(var g=0;g<p;g++)this.o[o+d+g]=r.o[n+c+g]}},u.prototype.Iz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,O(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var d=a-1;c<a;++c)p=r[n+d],this.o[o++]=p.x,this.o[o++]=p.y,d--}},u.prototype.Ln=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,O(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.vj=function(o,r,n){if(this.Pb)throw h.i.Hb();O(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Ut=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.N();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Ar(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.O.truncate(r/p);c<r;c++){for(var d=0;d<p;d++)this.o[o+d]=n.o[a+d];o+=p,a-=p}},u.prototype.En=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&O(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.ni=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var d=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=d}}},u.prototype.Wj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.N();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Ar=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.O.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var d=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=d}n+=c,o-=c}},u.prototype.vC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.N();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.Vw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.N();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},u.prototype.ix=function(){this.pk=this.Pb=!0},u.prototype.Vd=function(o,r,n){10>r-o?u.rG(this.o,o,r,n):u.qB(this.o,o,r-1,n)},u.prototype.Tp=function(){return 2},u.prototype.Fc=function(){return this.o[this.size-1]},u.prototype.If=function(){this.resize(this.size-1)},u.prototype.bX=function(o){this.o[this.size-1]=o},u.prototype.SV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.lF=function(o){for(var r=0,n=this.size;r<n;r++)if(this.o[r]==o)return r;return-1},u.prototype.hG=function(o){return 0<=this.lF(o)},u.rG=function(o,r,n,a){for(var c=r;c<n;c++){for(var p=o[c],d=c-1;d>=r&&0<a(o[d],p);)o[d+1]=o[d],d--;o[d+1]=p}},u.tx=function(o,r,n){var a=o[n];o[n]=o[r],o[r]=a},u.qB=function(o,r,n,a){if(!(r>=n))for(;;){if(9>n-r){u.rG(o,r,n+1,a);break}var c=o[r];u.tx(o,r,n);for(var p=r,d=r;d<n;d++)0>=a(o[d],c)&&(u.tx(o,p,d),p+=1);u.tx(o,p,n),p-r<n-p?(u.qB(o,r,p-1,a),r=p+1):(u.qB(o,p+1,n,a),n=p-1)}},u})();h.ia=m})(B||(B={})),(function(h){function O(u,o,r,n){r=new Int8Array(u.subarray(r,n)),u.set(r,o)}var m=(function(){function u(o){this.o=null;var r=o;2>r&&(r=2),this.o=new Int8Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.fa("invalid_call");if(r<o||r>n||o>n)throw h.i.N();o!=r&&n!=r&&(this.ni(o,r-o,1),this.ni(r,n-r,1),this.ni(o,n-o,1))},u.qf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Bn=function(o){var r=new u(0);return r.o=new Int8Array(o.o),r.size=o.size,r},u.Lr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int8Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.tc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Tt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.GB=function(o){return u.Lr(this,o)},u.prototype.eg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.pr=function(o,r){this.write(o,r)},u.prototype.An=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.O.Th(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.N();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var d=0;d<n;d+=c){a-=c;for(var g=0;g<c;g++)this.o[p+d+g]=o.o[r+a+g]}}},u.prototype.Mn=function(o,r,n,a,c,p,d){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.N();if(O(this.o,o+a,o,o+(d-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,d=0;d<a;d+=p){c-=p;for(var g=0;g<p;g++)this.o[o+d+g]=r.o[n+c+g]}},u.prototype.Ln=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,O(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.Iz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,O(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var d=a-1;c<a;++c)p=r[n+d],this.o[o++]=p.x,this.o[o++]=p.y,d--}},u.prototype.vj=function(o,r,n){if(this.Pb)throw h.i.Hb();O(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Ut=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.N();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Ar(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.O.truncate(r/p);c<r;c++){for(var d=0;d<p;d++)this.o[o+d]=n.o[a+d];o+=p,a-=p}},u.prototype.En=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&O(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.ni=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var d=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=d}}},u.prototype.Wj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.N();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Ar=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.O.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var d=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=d}n+=c,o-=c}},u.prototype.vC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.N();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.Vw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.N();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},u.prototype.ix=function(){this.pk=this.Pb=!0},u.prototype.Vd=function(o,r,n){r=this.o.subarray(o,r),Array.prototype.sort.call(r,n),this.o.set(r,o)},u.prototype.zJ=function(o,r){if(this.Pb)throw h.i.fa("invalid call. Attribute Stream is read only.");this.o[o]|=r},u.prototype.KE=function(o,r){if(this.Pb)throw h.i.fa("invalid call. Attribute Stream is read only.");this.o[o]&=~r},u.prototype.Tp=function(){return 1},u})();h.pn=m})(B||(B={})),(function(h){h.Yc=(function(){function O(){}return O.Mr=function(m,u){return h.pn.qf(m,u)},O.Dn=function(m,u){return h.be.qf(m,u)},O.pP=function(m,u,o){switch(m){case 1:m=h.be.qf(u,o);break;case 2:m=h.ia.qf(u,o);break;case 4:m=h.pn.qf(u,o);break;default:throw h.i.Qa()}return m},O.YE=function(m,u){return O.pP(h.ra.Tp(m),u*h.ra.Va(m),h.ra.se(m))},O.Oh=function(m,u){return h.ia.qf(m,u)},O.qI=function(m){var u,o=[];for(u=0;u<m;u++)o.push(null);return o},O})()})(B||(B={})),(function(h){h.ga=function(O){O===void 0&&(O=0),this.u=O}})(B||(B={})),(function(h){h.NL=(function(){function O(){}return O.bind=function(m){h.Sc=m.PeDefs,h.pf=m.PeFactory,h.NC=m.PeVertcs,h.ej=m.PeCSTransformations,h.MC=m.PeGTTransformations,h.LL=m.PeGeogtran,h.KL=m.PeFactoryCodechange,h.LC=m.PeGCSExtent,h.Cg=m.PePCSInfo,h.ML=m.PeHorizon,h.JL=m.PeCoordsys,h.lp=m.PeGTlistExtended,h.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,h.pf.initialize(null),h.Mx=m.PeGTlistExtendedEntry,h.pf.fromString(h.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},O})(),h.pf=null,h.NC=null,h.JL=null,h.ML=null,h.Cg=null,h.lp=null,h.Mx=null,h.LC=null,h.KL=null,h.LL=null,h.Sc=null,h.MC=null,h.ej=null})(B||(B={})),(function(h){var O=(function(){function m(){}return m.Mb=function(u,o){return 0<=o?m.P(u):-m.P(u)},m.P=function(u){return 0>u?-u:u},m.ti=function(u){return 3552713678800501e-30>u},m.KC=function(u,o,r){return m.P(u-o)<=r*(1+(m.P(u)+m.P(o))/2)},m.Y=function(u,o){return m.KC(u,o,3552713678800501e-30)},m.FL=function(u){return 3552713678800501e-30>=m.P(u)},m.Cd=function(u){return m.FL(u)},m})();h.s=O,h.F=(function(){function m(){}return m.gp=function(u,o){var r=0;return(u=O.P(u))+(o=O.P(o))!=0&&(u>o?(r=o/u,r=u*Math.sqrt(1+r*r)):(r=u/o,r=o*Math.sqrt(1+r*r))),r},m.Wq=function(u,o,r,n,a){for(var c=[0,0,0],p=[0,0,0],d=0;2>=d;d++)o[d]-=u[d],r[d]-=o[d];r=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],u=-1*(r*u[0]+o*u[1]+c*u[2]),n[0]=r,n[1]=o,n[2]=c,n[3]=u,p=m.on(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,a!=0&&(p=O.Cd(c)?O.Cd(u)?O.Mb(1,o):-O.Mb(1,u):O.Mb(1,c),p*=O.Mb(1,a),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},m.zx=function(u,o,r){r[0]=u[1]*o[2]-o[1]*u[2],r[1]=u[2]*o[0]-o[2]*u[0],r[2]=u[0]*o[1]-o[0]*u[1]},m.St=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},m.on=function(u){return m.gp(m.gp(u[0],u[1]),u[2])},m.cl=function(u,o,r,n,a,c,p,d){u=m.n(u,o,r);var g=Math.cos(r);c.u=(u+a)*g*Math.cos(n),p.u=(u+a)*g*Math.sin(n),d.u=(u*(1-o)+a)*Math.sin(r)},m.jO=function(u,o,r,n,a,c,p){var d=m.gp(o,r),g=1*Math.sqrt(1-u),w=g/1;if(O.Y(d,0))c.u=0,a.u=O.Mb(1.570796326794897,n),p.u=O.P(n)-g;else{c.u=Math.atan2(r,o),r=Math.atan2(1*n,g*d),c=Math.cos(r);var x=Math.sin(r);o=g*u/(1-u),u*=1,r=Math.atan2(n+o*x*x*x,d-u*c*c*c),3.141592653589793<O.P(r)&&(r=O.Mb(3.141592653589793,r)-r),r=Math.atan(w*Math.tan(r)),x=Math.sin(r),c=Math.cos(r),a.u=Math.atan2(n+o*x*x*x,d-u*c*c*c),1.570796326794897<O.P(a.u)&&(a.u=O.Mb(3.141592653589793,a.u)-a.u),r=Math.atan(w*Math.tan(a.u)),x=Math.sin(r),c=Math.cos(r),p.u=(n-g*x)*Math.sin(a.u)+(d-1*c)*Math.cos(a.u)}},m.n=function(u,o,r){return r=Math.sin(r),u/Math.sqrt(1-o*r*r)},m.ot=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},m.Qj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},m.Rq=function(u,o){if(O.ti(u)||o==0||O.Y(O.P(o),1.570796326794897))return o;if(.006884661117170036>u){var r=Math.sqrt(1-u),n=(1-r)/(1+r),a=n*n,c=n*a,p=n*c,d=n*p,g=n*d,w=n*g,x=1.572916666666667*c-3.2578125*d+4.295068359375*w;u=2.142578125*p-6.071484375*g,r=3.129296875*d-11.249837239583334*w;var M=4.775276692708333*g,$=7.958636765252976*w,I=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*d-.2688395182291667*w-x+r-$+I*(2*(1.3125*a-1.71875*p+1.650146484375*g)-4*u+6*M+I*(4*x-12*r+24*$+I*(8*u-32*M+I*(16*r-80*$+I*(32*M+64*I*$))))))}for(r=1-u,n=u/2,c=(a=O.P(o))*m.Zu(u)/(1.570796326794897*r),p=9999,g=a,a=0;1e-16<p&&50>a;a++)w=m.w(u,g),d=g-(x=(d=(m.kG(g,u)-n*Math.sin(2*g)/w)/r-c)/(w=1/(w*w*w))),p=O.P(x),g=d;return 0<=o?g:-g},m.qW=function(u,o){return O.ti(o)?u:u*m.Zu(o)/1.570796326794897},m.ba=function(u){return 0>(u=m.pF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>O.P(u)||O.Y(O.P(u),3.141592653589793)?u:u-6.283185307179586},m.pF=function(u,o){return u-Math.floor(u/o)*o},m.Ah=function(u,o){if(.006884661117170036>o){var r=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=r*r;return u/(1+o)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return u*m.Zu(o)},m.Vq=function(u,o){var r=O.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=O.P(m.pF(o,3.141592653589793)))?o:3.141592653589793-o,(O.Y(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*r},m.q=function(u,o,r){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,a=o*n,c=o*a,p=o*c,d=o*p,g=o*d,w=-.7291666666666666*a+.2278645833333333*p+.03987630208333334*g,x=.615234375*c-.21533203125*d,M=-.54140625*p+.20302734375*g,$=.48876953125*d,I=-.4488699776785715*g,R=Math.cos(2*r);return u/(1+o)*((1+.25*n+.015625*c+.00390625*d)*r+Math.sin(2*r)*(-1.5*o+.1875*a+.0234375*p+.00732421875*g-w+M-I+R*(2*(.9375*n-.234375*c-.03662109375*d)-4*x+6*$+R*(4*w-12*M+24*I+R*(8*x-32*$+R*(16*M-80*I+R*(32*$+64*R*I)))))))}return u*(m.kG(r,o)-.5*o*Math.sin(2*r)/m.w(o,r))},m.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},m.Zu=function(u){return O.KC(u,1,2220446049250313e-31)?1:1>u?m.Xw(0,1-u)-u/3*m.Uw(0,1-u):NaN},m.kG=function(u,o){var r=O.Mb(1,u);u=O.P(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(O.Cd(n))o=(u=m.sin(u))*m.Xw(1-u*u,1-o*u*u)-o/3*u*u*u*m.Uw(1-u*u,1-o*u*u);else{var a=h.O.truncate(n%2),c=m.Zu(o);0<a?(u=1.570796326794897*(n+1)-u,o=c*(n+1)-(o=(u=Math.sin(u))*m.Xw(1-u*u,1-o*u*u)-o/3*u*u*u*m.Uw(1-u*u,1-o*u*u))):(u-=1.570796326794897*n,o=c*n+(o=(u=Math.sin(u))*m.Xw(1-u*u,1-o*u*u)-o/3*u*u*u*m.Uw(1-u*u,1-o*u*u)))}return o*r},m.sin=function(u){u=m.ba(u);var o=O.Mb(1,u);return u=O.P(u),O.Y(u,3.141592653589793)?0:O.Y(u,1.570796326794897)?1*o:Math.sin(u)*o},m.Uw=function(u,o){var r,n,a,c,p=u,d=o,g=1;for(o=0,u=1;n=((r=.2*(p+d+3*g))-p)/r,a=(r-d)/r,c=(r-g)/r,!(1e-4>O.P(n)&&1e-4>O.P(a)&&1e-4>O.P(c));)c=Math.sqrt(d),o+=u/((r=Math.sqrt(g))*(g+(c=Math.sqrt(p)*(c+r)+c*r))),u*=.25,p=.25*(p+c),d=.25*(d+c),g=.25*(g+c);return d=(p=n*a)-(g=c*c),3*o+u*(1+(g=p-6*g)*(.10227272727272728*g-.2142857142857143-.1730769230769231*c*(n=g+d+d))+c*(.1666666666666667*n+c*(-.4090909090909091*d+.1153846153846154*c*p)))/(r*Math.sqrt(r))},m.Xw=function(u,o){for(var r,n,a,c,p=1;n=2-((r=(u+o+p)/3)+u)/r,a=2-(r+o)/r,c=2-(r+p)/r,!(1e-4>O.P(n)&&1e-4>O.P(a)&&1e-4>O.P(c));p=.25*(p+r))r=Math.sqrt(o),n=Math.sqrt(p),u=.25*(u+(r=Math.sqrt(u)*(r+n)+r*n)),o=.25*(o+r);return(1+(.04166666666666666*(u=n*a-c*c)-.1-.06818181818181818*(o=n*a*c))*u+.07142857142857142*o)/Math.sqrt(r)},m.Qw=function(u,o){if(O.ti(u)||o==0||O.Y(O.P(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*u,n=u*r,a=u*n,c=u*a,p=u*c,d=u*p,g=-(.02708333333333333*n+.03430059523809524*a+.03149181547619048*c+.02634359154541446*p+.02156896735835538*d),w=.007669890873015873*a+.01299603174603175*c+.0148051353064374*p+.01454454953803912*d,x=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*d),M=.0006957236677288761*p+.001775193002406544*d,$=-.000217324089394402*d,I=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*r+.09375*n+.04878472222222222*a+.02916666666666667*c+.01938905423280423*p+.01388255931712963*d)-g+x-$+I*(2*(.1041666666666667*r+.0875*n+.06050347222222222*a+.04151785714285714*c+.02958958540013228*p+.02203667534722222*d)-4*w+6*M+I*(4*g-12*x+24*$+I*(8*w-32*M+I*(16*x-80*$+I*(32*M+64*I*$))))))}return o==0||O.Y(O.P(o),1.570796326794897)?r=o:(a=(n=Math.sqrt(u))*Math.sin(o),r=Math.tan(.7853981633974483+o/2)*Math.pow((1-a)/(1+a),n/2),r=2*Math.atan(r)-1.570796326794897),r},m.yO=function(u,o){if(O.ti(u)||o==0||O.Y(O.P(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*(M=u*(x=u*(I=u*u))),n=u*($=u*r),a=.05833333333333333*x+.07232142857142858*M+.05634300595238095*r+.0355325796406526*$+.020235546186067*n,c=.02653149801587302*M+.04379960317460317*r+.0429211791776896*$+.03255384637546096*n,p=.01294022817460318*r+.02668104344536636*$+.03155651254609588*n,d=.00659454790965208*$+.0163075268674227*n,g=.003463473736911237*n,w=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*I+.08333333333333333*x+.03611111111111111*M+.01875*r+.01195601851851852*$+.008863673941798942*n-a+p-g+w*(2*(.1458333333333333*I+.1208333333333333*x+.07039930555555556*M+.03616071428571429*r+.01839451058201058*$+.01017113095238095*n)-4*c+6*d+w*(4*a-12*p+24*g+w*(8*c-32*d+w*(16*p-80*g+w*(32*d+64*w*g))))))}var x=Math.sqrt(u),M=x/2,$=Math.tan(.7853981633974483+o/2);u=0,a=1;for(var I=o;a!=0;I=n)r=x*Math.sin(I),n=$*Math.pow((1+r)/(1-r),M),n=2*Math.atan(n)-1.570796326794897,u++,(O.Y(n,I)||3e4<u)&&(a=0);return I},m})()})(B||(B={})),(function(h){var O=(function(){function m(u){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new h.h,this.XH=new h.h,this.KA=!1,this.vq=new h.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=u,this.As=h.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var o=u.getCode();0<o?(this.Kk=o,h.pf.getCode(u)):this.Kk=h.pf.getCode(u),0>this.Kk&&(this.Kk=0);var r=this.Ue.getType();if(this.jH=r==h.Sc.PE_TYPE_PROJCS?2:1,r==h.Sc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.N("PeProjcs.loadConstants failed");o=r==h.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),r!=h.Sc.PE_TYPE_GEOGCS&&h.pf.getCode(o),this.Eo=u.getUnit(),this.RH=o.getPrimem().getLongitude(),this.wH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.GA=u,(r&h.Sc.PE_TYPE_PROJCS)!=0?(o=this.Ue,this.HA=1/o.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=h.Cg.generate(o,h.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=h.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,r=1/o.getUnit().getUnitFactor(),this.sw=.001/o.getDatum().getSpheroid().getAxis()*r,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return m.prototype.$r=function(){return this.Kk},m.prototype.kk=function(){return this.tw},m.Py=function(u,o){return u==o||u!=null&&o!=null&&u.Kk==0&&o.Kk==0&&u.As===o.As},m.prototype.Wc=function(){return this.zl},m.prototype.gh=function(u){u.K(this.so)},m.prototype.pv=function(){return this.so.v},m.prototype.ov=function(){return this.so.C},m.prototype.GR=function(u){u.K(this.uw)},m.prototype.lY=function(){var u=this.Ue.getType();if(u==h.Sc.PE_TYPE_PROJCS){u=this.Ue;var o=this.kk().getCentralMeridian(),r=u.getGeogcs();if(r==null)throw h.i.fa("internal error");o=[[o+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],h.ej.geogToProj(u,1,o),o=o[0][0],r=u.getParameters()[h.Sc.PE_PARM_X0].getValue();var n=this.ml();u=new h.l,n.A(u),o=(n=Math.abs(o-r))+r,r=-1*n+r,n=u.H,u=u.G;var a=new h.l;a.K(r,u,o,n),this.so==null&&(this.so=a)}else{if(u!=h.Sc.PE_TYPE_GEOGCS)throw h.i.fa("internal error");r=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(u=new h.l).K(-r,-r/2,r,r/2),this.so==null&&(this.so=u)}},m.prototype.mY=function(){var u=this.Ue.getType();if(u==h.Sc.PE_TYPE_PROJCS){var o=this.Ue;if(u=this.kk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.fa("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var r=this.Vr(),n=new h.l;r.A(n),(r=new h.l).K(u-o,n.G,u+o,n.H),this.uw==null&&(this.uw=r)}else{if(u!=h.Sc.PE_TYPE_GEOGCS)throw h.i.fa("internal error");o=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(u=new h.l).K(-o,-o/2,o,o/2),this.uw==null&&(this.uw=u)}},m.prototype.bf=function(){return this.GA},m.prototype.pm=function(){return this.HA},m.prototype.Vr=function(){if(this.zl)return this.ul;var u=this.ul;return u??(this.xx(),this.ul)},m.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},m.prototype.xx=function(){if(this.Ue.getType()==h.Sc.PE_TYPE_PROJCS){var u=this.Ue,o=u.getGeogcs(),r=u.horizonGcsGenerate();if(r!=null){var n=r[0].getNump(),a=r[0].getKind();u=0<r[0].getInclusive();var c=this.bf(),p=90*c,d=360*c,g=370*c,w=180*c*h.Sc.PE_HORIZON_DELTA/Math.PI,x=new h.l,M=null;if(1<n){for(var $=1;$<n;$++)if(r[$].getKind()==h.Sc.PE_HORIZON_LINE){M==null&&(M=new h.Ta);var I=r[$].getCoord();M.sx(I[0][0],I[0][1]),M.yj(I[1][0],I[1][1])}}if(a==h.Sc.PE_HORIZON_RECT)r=r[0].getCoord(),x.K(r[0][0],r[0][1]),x.Zb(r[1][0],r[1][1]),Math.abs(x.H-p)<1e-7*w&&(x.H=p),Math.abs(x.G+p)<1e-7*w&&(x.G=-p),x.R()>g&&(r=-400*c,x.K(r,x.G,r+5*d,x.H)),r=new h.Fh(x),this.ul==null&&(this.ul=r,this.Iv=u);else{if(g=new h.Da,d=this.kk().isGcsHorizonMultiOverlap(),x=h.gu.bF(o,h.hu.Integer64),d){for(g=new h.gL,w=h.Gh.local().V(g,x,null),$=0;$<n;$++)if(r[$].getKind()==h.Sc.PE_HORIZON_POLY){for(o=r[$].getSize(),c=r[$].getCoord(),a=[],p=0;p<o;p++)a[p]=h.h.construct(c[p][0],c[p][1]);r[$].getInclusive(),d&&((c=new h.Da).Yk(a,o-1),g.ZX(c),w.qe())}g=w.next()}else for($=0;$<n;$++)if(r[$].getKind()==h.Sc.PE_HORIZON_POLY){for(o=r[$].getSize(),c=r[$].getCoord(),d=[],p=0;p<o;p++)d[p]=h.h.construct(c[p][0],c[p][1]);r[$].getInclusive(),g.Yk(d,o-1)}u?h.Xj.local().wn(g,x,1):h.kp.local().wn(g,x,1),h.dj.local().wn(g,x,1),this.ul==null&&(this.ul=g,this.Iv=u,this.YG=M)}}}},m.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},m.prototype.DK=function(){if(this.jH==2){var u=this.Ue.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var r=u[0].getNump(),n=!1;if(o==h.Sc.PE_HORIZON_RECT)u=u[0].getCoord(),(r=new h.l).K(u[0][0],u[0][1]),r.Zb(u[1][0],u[1][1]),u=new h.Fh(r);else{for(o=-1,n=0;n<r;n++)u[n].getKind()==h.Sc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),r=[],o=0;o<n;o++)r[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Da,o.Yk(r,n),n=!0}this.kk().isDensificationNeeded()&&(r=1e5*this.pm(),u=h.Xl.local().V(u,r,null)),n&&(n=new h.Fh,u.bn(n),u.Ke(),u.Qb(),u.qR(),h.Xj.local().wn(u,null,1)),this.Us==null&&(this.Us=u)}}},m.prototype.ml=function(){if(this.zl)return this.Us;var u=this.Us;return u??(this.DK(),this.Us)},m.prototype.nY=function(){if(this.Ue.getType()==h.Sc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.ej.geogToProj(this.Ue,2,u);var o=this.kk(),r=o.getNorthPoleLocation()!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(r&&this.HH.ma(u[0][0],u[0][1]),o&&this.XH.ma(u[1][0],u[1][1]))}this.KA=!0},m.prototype.CK=function(){if(this.jH==1){var u=400*this.bf();this.vq.K(-u,-u,u,u)}else u=h.Cg.generate(this.Ue,h.Cg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.vq.B()&&this.vq.K(u)},m.prototype.hR=function(u){this.zl&&u.K(this.vq),this.vq.B()&&this.CK(),u.K(this.vq)},m.prototype.Up=function(){return this.RH},m.prototype.zi=function(){return this.bA},m.prototype.Hd=function(){return this.Eo},m.prototype.Xr=function(){return this.wH},m})();h.OC=O})(B||(B={})),(function(h){var O=(function(){function m(u){this.KT=u,this.As=h.zb.xv(u,0,!0);var o=u.getCode();this.ss=0<o?o:h.pf.getCode(u),0>this.ss&&(this.ss=0),this.Eo=o=this.KT.getUnit(),this.IH=1/o.getUnitFactor(),h.pf.getCode(u)}return m.Py=function(u,o){return u==o||u!=null&&o!=null&&u.ss==0&&o.ss==0&&u.As===o.As},m.prototype.$r=function(){return this.ss},m})();h.PL=O})(B||(B={})),(function(h){h.Yg=(function(){function O(){}return O.tb=function(m,u,o,r,n,a,c,p){if(a!=null||c!=null||p!=null){r=h.F.ba(r),u=h.F.ba(u),o=h.F.ba(o),n=h.F.ba(n),1.570796326794897<h.s.P(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ba(u+3.141592653589793)),1.570796326794897<h.s.P(n)&&(n=h.s.Mb(3.141592653589793,n)-n,r=h.F.ba(r+3.141592653589793));var d=h.F.ba(r-u);if(h.s.Y(o,n)&&(h.s.Y(u,r)||h.s.Y(h.s.P(o),1.570796326794897)))a!=null&&(a.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(h.s.Y(o,-n)){if(h.s.Y(h.s.P(o),1.570796326794897))return a!=null&&(a.u=3.141592653589793*m),c!=null&&(c.u=0<o?h.F.ba(3.141592653589793-h.F.ba(r)):h.F.ba(r)),void(p!=null&&(p.u=0<o?h.F.ba(r):h.F.ba(3.141592653589793-h.F.ba(r))));if(h.s.Y(h.s.P(d),3.141592653589793))return a!=null&&(a.u=3.141592653589793*m),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var g=h.s.P(o)==1.570796326794897?0:Math.cos(o),w=Math.sin(o),x=h.s.P(n)==1.570796326794897?0:Math.cos(n),M=Math.sin(n),$=h.s.P(d)==1.570796326794897?0:Math.cos(d),I=h.s.P(d)==3.141592653589793?0:Math.sin(d);if(a!=null){var R=Math.sin((n-o)/2);d=Math.sin(d/2),a.u=2*Math.asin(Math.sqrt(R*R+g*x*d*d))*m}c!=null&&(c.u=h.s.Y(h.s.P(o),1.570796326794897)?0>o?r:h.F.ba(3.141592653589793-r):Math.atan2(x*I,g*M-w*x*$)),p!=null&&(h.s.Y(h.s.P(n),1.570796326794897)?p.u=0>n?u:h.F.ba(3.141592653589793-u):(p.u=Math.atan2(g*I,M*g*$-x*w),p.u=h.F.ba(p.u+3.141592653589793)))}}},O.rf=function(m,u,o,r,n,a,c){if(a!=null||c!=null){u=h.F.ba(u),o=h.F.ba(o),1.570796326794897<h.s.P(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ba(u+3.141592653589793)),h.s.Y(h.s.P(o),1.570796326794897)&&(u=0),n=h.F.ba(n);var p=h.s.Y(h.s.P(n),1.570796326794897)?0:Math.cos(n),d=h.s.Y(h.s.P(n),3.141592653589793)?0:Math.sin(n),g=h.s.Y(h.s.P(o),1.570796326794897)?0:Math.cos(o),w=Math.sin(o);m=r/m,r=h.s.Y(h.s.P(m),1.570796326794897)?0:Math.cos(m);var x=h.s.Y(h.s.P(m),3.141592653589793)?0:Math.sin(m),M=Math.asin(w*r+g*x*p);c!=null&&(c.u=M),a!=null&&(a.u=h.s.Y(h.s.P(M),1.570796326794897)?h.s.Y(o,-M)?0>M?n:h.F.ba(3.141592653589793-n):u:h.s.Y(h.s.P(o),1.570796326794897)&&h.s.Y(m,3.141592653589793)?0>o?n:h.F.ba(3.141592653589793-n):h.F.ba(u+Math.atan2(x*d,g*r-w*x*p)))}},O})()})(B||(B={})),(function(h){h.Wk=(function(){function O(){}return O.tb=function(m,u,o,r,n,a,c,p,d){var g=new h.ga(0),w=new h.ga(0),x=[0,0,0],M=[0,0,0],$=[0,0,0],I=new h.ga(0),R=new h.ga(0),N=new h.ga(0),j=new h.ga(0),z=new h.ga(0);if(c!=null||p!=null||d!=null)if(h.s.ti(u))h.Yg.tb(m,o,r,n,a,c,p,d);else{n=h.F.ba(n),o=h.F.ba(o);var D=h.F.ba(n-o);if(h.s.Y(r,a)&&(h.s.Y(o,n)||h.s.Y(h.s.P(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),d!=null&&(d.u=0);else{if(h.s.Y(r,-a)){if(h.s.Y(h.s.P(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(m,u)),p!=null&&(p.u=0<r?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(d!=null&&(d.u=0<r?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(D),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(m,u)),p!=null&&(p.u=0),d!=null&&(d.u=0))}else(h.s.Y(h.s.P(r),1.570796326794897)||h.s.Y(h.s.P(a),1.570796326794897))&&(h.s.Y(h.s.P(r),1.570796326794897)?o=n:n=o);var U=0;if(0>D){U=1;var V=o;o=n,n=V,V=r,r=a,a=V}D=h.F.ot(u,r);var W=h.F.ot(u,a);p==null&&d==null||(h.Yg.tb(m,o,D,n,W,null,g,w),g=Math.atan2(Math.sin(g.u)*Math.cos(r-D),Math.cos(g.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(a-W),Math.cos(w.u)),U!=0&&(V=g,g=w,w=V),p!=null&&(p.u=g),d!=null&&(d.u=w)),c!=null&&(h.F.cl(1,u,r,o,0,N,j,z),x[0]=N.u,x[1]=j.u,x[2]=z.u,h.F.cl(1,u,a,n,0,N,j,z),M[0]=N.u,M[1]=j.u,M[2]=z.u,$[0]=x[1]*M[2]-M[1]*x[2],$[1]=-(x[0]*M[2]-M[0]*x[2]),$[2]=x[0]*M[1]-M[0]*x[1],u=1-h.F.w(u,h.F.Vq(u,h.F.Qj(u,Math.acos($[2]/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2]))))),u*=2-u,p=Math.atan2(-$[1],-$[0]),$=h.F.ba(p-1.570796326794897),p=h.F.ba(p+1.570796326794897),$=h.s.P(h.F.ba(o-$))<=h.s.P(h.F.ba(o-p))?$:p,h.Yg.tb(1,$,0,o,D,I,null,null),h.Yg.tb(1,$,0,n,W,R,null,null),3.141592653589793<I.u+R.u&&($=h.F.ba($+3.141592653589793),h.Yg.tb(1,$,0,o,D,I,null,null),h.Yg.tb(1,$,0,n,W,R,null,null)),I.u*=h.s.Mb(1,r),R.u*=h.s.Mb(1,a),I.u=h.F.Qj(u,I.u),R.u=h.F.Qj(u,R.u),o=h.F.q(m,u,I.u),m=h.F.q(m,u,R.u),c.u=h.s.P(m-o))}}},O.rf=function(m,u,o,r,n,a,c,p){var d=0,g=new h.ga(0),w=new h.ga(0),x=[0,0,0],M=[0,0,0],$=new h.ga(0),I=new h.ga(0),R=new h.ga(0);if(c!=null||p!=null)if(h.s.ti(u))h.Yg.rf(m,o,r,n,a,c,p);else if(h.s.Cd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ba(a),0>n&&(n=h.s.P(n),a=h.F.ba(a+3.141592653589793)),o=h.F.ba(o),r=h.F.ba(r),1.570796326794897<h.s.P(r)&&(o=h.F.ba(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.Y(h.s.P(r),1.570796326794897)&&(o=0),h.s.Cd(r)){var N=h.s.P(1.570796326794897-h.s.P(a));N=h.F.Qj(u,N),N=1-h.F.w(u,h.F.Vq(u,N)),N*=2-N,m=n/h.F.Ah(m,N)*1.570796326794897,m=h.F.Rq(N,m),m=h.F.ot(N,m),h.Yg.rf(1,o,r,m,a,c,g),p!=null&&(d=g.u),p!=null&&(p.u=h.F.Qj(u,d))}else if(h.s.Y(h.s.P(r),1.570796326794897))g=2*(d=h.F.Ah(m,u)),a=0<(m=h.s.Mb(1.570796326794897,r))?h.F.ba(3.141592653589793-a):a,r=d-n,h.s.P(r)<=d?c!=null&&(c.u=a):(r=Math.floor(n/g),h.O.truncate(r%2)==0?(c!=null&&(c.u=a),n-=r*g):(c!=null&&(c.u=h.F.ba(a+3.141592653589793)),n=(r+1)*g-n),r=d-n),p!=null&&(p.u=h.F.Rq(u,r/d*m));else{N=h.F.ot(u,r),a=Math.atan2(Math.sin(a),Math.cos(a)*Math.cos(r-N));var j=h.O.truncate(h.s.Mb(1,N))*(1.570796326794897>=h.s.P(a)?1:-1);a=h.F.ba(o+Math.atan(Math.tan(a)*-Math.sin(N))),h.Yg.tb(m,a,0,o,N,null,w,null),N=h.s.P(1.570796326794897-h.s.P(w.u)),N=h.F.Qj(u,N),N=1-h.F.w(u,h.F.Vq(u,N)),N*=2-N,h.F.cl(1,u,0,a,0,$,I,R),x[0]=$.u,x[1]=I.u,x[2]=R.u,h.F.cl(1,u,r,o,0,$,I,R),M[0]=$.u,M[1]=I.u,M[2]=R.u,r=Math.acos((x[0]*M[0]+x[1]*M[1]+x[2]*M[2])/Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2])),r=h.F.Qj(N,r),n=0<(r=h.F.q(m,N,r)+n*j)?w.u:h.F.ba(w.u+3.141592653589793),m=h.s.P(r)/h.F.Ah(m,N)*1.570796326794897,m=h.F.Rq(N,m),m=h.F.ot(N,m),h.Yg.rf(1,a,0,m,n,c,g),p!=null&&(d=g.u),p!=null&&(p.u=h.F.Qj(u,d))}},O})()})(B||(B={})),(function(h){h.cu=(function(){function O(){}return O.tb=function(m,u,o,r,n,a,c,p,d){var g=0,w=0,x=0;if(c!=null||p!=null||d!=null)if(h.s.ti(u))h.Yg.tb(m,o,r,n,a,c,p,d);else{var M=h.F.ba(n-o);if(h.s.Y(r,a)&&(h.s.Cd(M)||h.s.Y(h.s.P(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),d!=null&&(d.u=0);else{if(h.s.Y(r,-a)){if(h.s.Y(h.s.P(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(m,u)),p!=null&&(p.u=0<r?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(d!=null&&(d.u=0<r?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(M),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(m,u)),p!=null&&(p.u=0),d!=null&&(d.u=0))}else if(h.s.Y(h.s.P(r),1.570796326794897)||h.s.Y(h.s.P(a),1.570796326794897)||h.s.Cd(M)||h.s.Y(h.s.P(M),3.141592653589793))return void h.Wk.tb(m,u,o,r,n,a,c,p,d);var $=1-Math.sqrt(1-u),I=u/(1-u),R=m*(1-$);m=h.F.Vq(u,r);var N=h.F.Vq(u,a);u=h.s.P(m)==1.570796326794897?0:Math.cos(m);var j=Math.sin(m),z=h.s.P(N)==1.570796326794897?0:Math.cos(N),D=Math.sin(N),U=M,V=Math.cos(U),W=Math.sin(U),Z=1,it=0;do{var ot=U,dt=Math.sqrt(Math.pow(z*W,2)+Math.pow(u*D-j*z*V,2)),ft=j*D+u*z*V,$t=Math.atan2(dt,ft);if(dt==0){Z=0;break}var ut=u*z*W/dt;if(g=Math.cos(Math.asin(ut)),w=ft-2*j*D/(g*=g),1<h.s.P(w)&&(w=h.s.Mb(1,w)),U=M+(1-(U=$/16*g*(4+$*(4-3*g))))*$*ut*($t+U*dt*(w+U*ft*(2*(x=w*w)-1))),V=Math.cos(U),W=Math.sin(U),it++,3.141592653589793<h.s.P(U)&&30<it){Z=0;break}}while(5e3>=it&&!h.s.Y(ot,U));if(Z!=0)$=(I*=g)*(256+I*(I*(74-47*I)-128))/1024,c!=null&&(c.u=R*(1+I*(4096+I*(I*(320-175*I)-768))/16384)*($t-$*dt*(w+$/4*(ft*(2*x-1)-$/6*w*(4*dt*dt-3)*(4*x-3))))),p!=null&&(p.u=h.s.Y(h.s.P(r),1.570796326794897)?0>r?n:h.F.ba(3.141592653589793-n):Math.atan2(z*W,u*D-j*z*V)),d!=null&&(h.s.Y(h.s.P(a),1.570796326794897)?d.u=0>a?o:h.F.ba(3.141592653589793-o):(d.u=Math.atan2(u*W,u*D*V-j*z),d.u=h.F.ba(d.u+3.141592653589793)));else{U=h.s.Mb(3.141592653589793,M),ft=j*D-u*z,$t=Math.acos(ft),dt=Math.sin($t),g=1,it=ut=0;do x=ut,V=1-.25*(ut=$*(g*=g)*(1+$+$*$))+.1875*(w=$*$*(V=g*g)*(1+2.25*$))-.1953125*(Z=$*$*$*V*g),ut=.25*ut-.25*w+.29296875*Z,W=.03125*w-.05859375*Z,Z*=.00651041666666667,w=ft-2*j*D/g,1<h.s.P(w)&&(w=h.s.Mb(1,w)),g=Math.acos(w),ft=Math.cos(2*g),ot=Math.cos(3*g),W=(ut=h.s.Y(r,-a)?h.F.ba(3.141592653589793-M)/(3.141592653589793*$*V):h.F.ba(U-M)/($*(V*$t+ut*dt*w+W*Math.sin(2*$t)*ft+Z*Math.sin(3*$t)*ot)))*dt/(u*z),U=1.570796326794897<h.s.P(M)?h.s.Mb(3.141592653589793,W)-Math.asin(W):Math.asin(W),V=Math.cos(U),dt=Math.sqrt(Math.pow(z*W,2)+Math.pow(u*D-j*z*V,2)),$t=3.141592653589793-Math.asin(h.s.P(dt)),ft=Math.cos($t),g=Math.cos(Math.asin(ut)),it++;while(70>=it&&!h.s.Y(x,ut));c!=null&&(V=1+(I*=g*=g)*(4096+I*(I*(320-175*I)-768))/16384,h.s.Y(r,-a)?c.u=3.141592653589793*R*V:(w=ft-2*j*D/g,g=Math.acos(w),ft=Math.cos(2*g),ot=Math.cos(3*g),c.u=R*(V*$t+I*(I*(128+I*(35*I-60))-512)/2048*dt*w+I*(5*I-4)/6144*I*I*Math.sin(2*$t)*ft+Z*Math.sin(3*$t)*ot+-762939453125e-16*I*I*I*I*Math.sin(4*$t)*Math.cos(4*g)))),p!=null&&(h.s.Cd(r)&&h.s.Cd(a)?(g=Math.sqrt(1-ut*ut),p.u=Math.acos(g),0>M&&(p.u*=-1)):h.s.Y(h.s.P(r),1.570796326794897)?p.u=0>r?n:h.F.ba(3.141592653589793-n):(c=ut/u,R=Math.sqrt(1-c*c),0>u*D-j*z*Math.cos(U)&&(R*=-1),p.u=Math.atan2(c,R),h.s.Y(r,-a)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-$*Math.cos(r))&&(0<r&&1.570796326794897>h.s.P(p.u)||0>r&&1.570796326794897<h.s.P(p.u))&&(p.u=h.s.Mb(3.141592653589793,p.u)-p.u))),d!=null&&(h.s.Cd(r)&&h.s.Cd(a)?(g=Math.sqrt(1-ut*ut),d.u=Math.acos(g),0<=M&&(d.u*=-1)):h.s.Y(h.s.P(a),1.570796326794897)?d.u=0>a?o:h.F.ba(3.141592653589793-o):(M=ut/z,c=Math.sqrt(1-M*M),R=Math.sin(U/2),0>Math.sin(N-m)-2*u*D*R*R&&(c*=-1),d.u=Math.atan2(M,c),d.u=h.F.ba(d.u+3.141592653589793),h.s.Y(r,-a)&&!h.s.Cd(r)&&!h.s.Y(h.s.P(r),1.570796326794897)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-$*Math.cos(r))&&(p!=null?R=p.u:(c=ut/u,R=Math.sqrt(1-c*c),0>u*D-j*z*Math.cos(U)&&(R*=-1),R=Math.atan2(c,R),h.s.Y(r,-a)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-$*Math.cos(r))&&(0<r&&1.570796326794897>h.s.P(R)||0>r&&1.570796326794897<h.s.P(R))&&(R=h.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=h.s.P(R)&&1.570796326794897<h.s.P(d.u)||1.570796326794897<=h.s.P(R)&&1.570796326794897>h.s.P(d.u))&&(d.u=-1*h.F.ba(d.u+3.141592653589793))))}}}},O.rf=function(m,u,o,r,n,a,c,p){if(c!=null||p!=null)if(h.s.ti(u))h.Yg.rf(m,o,r,n,a,c,p);else if(a=h.F.ba(a),h.s.Y(h.s.P(r),1.570796326794897)||h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))h.Wk.rf(m,u,o,r,n,a,c,p);else{var d=h.s.P(a)==1.570796326794897?0:Math.cos(a),g=h.s.P(a)==3.141592653589793?0:Math.sin(a);h.s.Y(h.s.P(r),1.570796326794897)&&(o=0),a=1-Math.sqrt(1-u);var w=h.F.Vq(u,r);r=h.s.P(w)==1.570796326794897?0:Math.cos(w);var x=Math.sin(w);w=Math.atan2(Math.tan(w),d);var M=r*g,$=M*M,I=1-$,R=u/(1-u)*I,N=(u=R*(256+R*(R*(74-47*R)-128))/1024)/4,j=u/6,z=n/(m*(1-a)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),D=z;do{var U=D;n=h.s.P(D)==1.570796326794897?0:Math.cos(D);var V=(R=h.s.P(D)==3.141592653589793?0:Math.sin(D))*R;D=u*R*((m=Math.cos(2*w+D))+N*(n*(2*(D=m*m)-1)-j*m*(4*V-3)*(4*D-3)))+z}while(!h.s.Y(U,D));n=h.s.P(D)==1.570796326794897?0:Math.cos(D),R=h.s.P(D)==3.141592653589793?0:Math.sin(D),c!=null&&(g=Math.atan2(R*g,r*n-x*R*d),I=a/16*I*(4+a*(4-3*I)),m=Math.cos(2*w+D),c.u=h.F.ba(o+(g-(1-I)*a*M*(D+I*R*(m+I*n*(2*m*m-1)))))),p!=null&&(I=x*R-r*n*d,I=(1-a)*Math.sqrt($+I*I),p.u=Math.atan2(x*n+r*R*d,I))}},O})()})(B||(B={})),(function(h){h.PC=(function(){function O(){}return O.tb=function(m,u,o,r,n,a,c,p,d){var g=h.F.ba(n-o),w=h.s.Y(h.s.P(r),1.570796326794897),x=h.s.Y(h.s.P(a),1.570796326794897);if(h.s.Y(r,a)&&(h.s.Cd(g)||w))c!=null&&(c.u=0),p!=null&&(p.u=0),d!=null&&(d.u=0);else{if(h.s.ti(u)){var M=Math.sin(r),$=Math.sin(a);M=Math.sqrt((1+M)/(1-M)),$=Math.sqrt((1+$)/(1-$)),M=Math.log($)-Math.log(M),M=Math.atan2(g,M),c!=null&&(c.u=h.s.Y(r,a)?h.s.P(m*Math.cos(r)*g):h.s.P((m*a-m*r)/Math.cos(M)))}else $=h.F.Qw(u,a),M=Math.sin(h.F.Qw(u,r)),$=Math.sin($),M=Math.sqrt((1+M)/(1-M)),$=Math.sqrt((1+$)/(1-$)),M=Math.log($)-Math.log(M),M=Math.atan2(g,M),c!=null&&(h.s.Y(r,a)?c.u=h.s.P(m*g*Math.cos(r)/h.F.w(u,r)):(g=h.F.q(m,u,r),m=h.F.q(m,u,a),c.u=h.s.P((m-g)/Math.cos(M))));p==null&&d==null||(c=h.F.ba(M+3.141592653589793),w&&x||!w&&!x||(w?M=0>r?n:h.F.ba(3.141592653589793-n):x&&(c=0>a?o:h.F.ba(3.141592653589793-o))),p!=null&&(p.u=M),d!=null&&(d.u=c))}},O.rf=function(m,u,o,r,n,a,c,p){a=h.F.ba(a),0>n&&(n=h.s.P(n),a=h.F.ba(a+3.141592653589793)),h.s.ti(u)?h.s.Y(h.s.P(r),1.570796326794897)?(o=0>r?a:h.F.ba(3.141592653589793-a),3.141592653589793>=(a=n/m%6.283185307179586)?m=r-h.s.Mb(a,r):(o=h.F.ba(o+3.141592653589793),m=-r+h.s.Mb(a-3.141592653589793,r))):h.s.Y(h.s.P(a),1.570796326794897)?(o=h.F.ba(o+h.s.Mb(n,a)/(m*Math.cos(r))),m=r):(m=r+n*Math.cos(a)/m,1.570796326794897<h.s.P(m)&&(m=1.570796326794897),h.s.Y(h.s.P(m),1.570796326794897)&&(h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))||(1.570796316258184<h.s.P(m)&&(m=h.s.Mb(1.570796316258184,m)),u=Math.sin(r),r=Math.sin(m),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ba(o+Math.tan(a)*u))):h.s.Y(h.s.P(r),1.570796326794897)?(o=0>r?a:h.F.ba(3.141592653589793-a),a=n/h.F.qW(m,u),3.141592653589793>=(a%=6.283185307179586)?m=r-h.s.Mb(a,r):(o=h.F.ba(o+3.141592653589793),m=-r+h.s.Mb(a-3.141592653589793,r)),m=h.F.Rq(u,m)):h.s.Y(h.s.P(a),1.570796326794897)?(o=h.F.ba(o+h.s.Mb(n,a)*h.F.w(u,r)/(m*Math.cos(r))),m=r):(m=1.570796326794897*(n*Math.cos(a)+h.F.q(m,u,r))/h.F.Ah(m,u),1.570796326794897<h.s.P(m)&&(m=h.s.Mb(1.570796326794897,m)),m=h.F.Rq(u,m),h.s.Y(h.s.P(m),1.570796326794897)&&(h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))||(n=h.F.Qw(u,r),r=h.F.Qw(u,m),1.570796316258184<h.s.P(r)&&(r=h.s.Mb(1.570796316258184,m),m=h.F.yO(u,r)),u=Math.sin(n),r=Math.sin(r),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ba(o+Math.tan(a)*u))),c!=null&&(c.u=o),p!=null&&(p.u=m)},O})()})(B||(B={})),(function(h){h.kb=(function(){function O(){}return O.Xy=function(m,u,o,r,n,a,c){h.cu.tb(m,u,o,r,n,a,null,c,null)},O.yi=function(m,u,o,r,n,a,c,p){h.cu.rf(m,u,o,r,n,a,c,p)},O.wd=function(m,u,o,r,n,a,c,p,d,g){switch(g){case 2:h.Wk.tb(m,u,o,r,n,a,c,p,d);break;case 3:h.QC.tb(m,u,o,r,n,a,c,p,d);break;case 1:h.PC.tb(m,u,o,r,n,a,c,p,d);break;default:h.cu.tb(m,u,o,r,n,a,c,p,d)}},O.oj=function(m,u,o,r,n,a,c,p,d){switch(d){case 2:h.Wk.rf(m,u,o,r,n,a,c,p);break;case 3:h.QC.rf(m,u,o,r,n,a,c,p);break;case 1:h.PC.rf(m,u,o,r,n,a,c,p);break;default:h.cu.rf(m,u,o,r,n,a,c,p)}},O})()})(B||(B={})),(function(h){var O=(function(){function u(){this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Wb,r.x.set(o.x),r.y=new h.Wb,r.y.set(o.y),r},u.VE=function(o,r){var n=new u;return n.x=new h.Wb,n.x.set(o),n.y=new h.Wb,n.y.set(r),n},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u})();h.vY=O;var m=(function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Wb,r.x.set(o.x),r.y=new h.Wb,r.y.set(o.y),r.z=new h.Wb,r.z.set(o.z),r},u.VE=function(o,r,n){var a=new u;return a.x=new h.Wb,a.x.set(o),a.y=new h.Wb,a.y.set(r),a.z=new h.Wb,a.z.set(n),a},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},u.prototype.value=function(){return new h.Nd(this.x.value(),this.y.value(),this.z.value())},u.prototype.Qh=function(o){var r=new h.Wb,n=new h.Wb,a=new h.Wb;return r.Kl(this.x,o.x),n.Kl(this.y,o.y),a.Kl(this.z,o.z),(o=new h.Wb).dN(r,n),o.add(a),o},u.prototype.cF=function(o){var r=new u;r.x.Kl(this.y,o.z),r.y.Kl(this.z,o.x),r.z.Kl(this.x,o.y);var n=new h.Wb,a=new h.Wb,c=new h.Wb;return n.Kl(this.z,o.y),a.Kl(this.x,o.z),c.Kl(this.y,o.x),r.x.sub(n),r.y.sub(a),r.z.sub(c),r},u})();h.wY=m,h.Ox=(function(){function u(){}return u.EP=function(o,r,n){var a=r.x;r=r.y,u.cl(1,o,Math.cos(a),Math.sin(a),Math.cos(r),Math.sin(r),n)},u.DP=function(o,r){var n=new h.Nd;return u.EP(o,r,n),n},u.cl=function(o,r,n,a,c,p,d){o/=Math.sqrt(1-r*p*p),d.K(o*c*n,o*c*a,o*(1-r)*p)},u.Yu=function(o,r){var n=new h.Wb,a=new h.Wb,c=new h.Wb,p=new h.Wb;n.cos(r.x),a.sin(r.x),c.cos(r.y),p.sin(r.y);var d=new h.Wb;return d.set(p),d.Ag(p),d.No(o),d.No(-1),d.kN(),d.sqrt(),(r=new h.Wb).set(1),r.jm(d),(d=new h.Wb).set(r),d.Ag(c),d.Ag(n),(n=new h.Wb).set(r),n.Ag(c),n.Ag(a),(a=new h.Wb).set(r),a.No(1-o),a.Ag(p),m.VE(d,n,a)},u.SS=function(o,r,n,a){if(Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x)return NaN;if(a=u.cB(a,Math.min(r.x,n.x),Math.max(r.x,n.x)),!new h.Nc(r.x,n.x).contains(a))return NaN;var c=O.construct(r);if(n=O.construct(n),c=u.Yu(o,c),n=u.Yu(o,n),(n=c.cF(n)).z.qg())return r.y;var p=new h.Wb;p.set(n.x),p.jm(n.z),p.No(-1);var d=new h.Wb;d.set(n.y),d.jm(n.z),d.No(-1);var g=new h.Wb;return g.set(d),g.Ag(d),(c=new h.Wb).set(p),c.Ag(p),c.add(g),c.sqrt(),c.qg()||p.qg()&&d.qg()?r.y:(r=Math.atan2(d.value(),p.value()),r=Math.atan2(c.value()*Math.cos(r-a),1-o),a=u.DP(o,h.h.construct(a,r)),o=new h.Nd(a.x,a.y,-a.z),a=n.value().Qh(a),o=n.value().Qh(o),Math.abs(o)<Math.abs(a)&&(r=-r),r)},u.Oz=function(o,r,n,a,c){if(c[0]=NaN,c[1]=NaN,Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x||Math.abs(a)>=.5*Math.PI||0<r.y&&0<n.y&&r.y>a&&n.y>a||0>r.y&&0>n.y&&r.y<a&&n.y<a)return 0;var p=O.construct(r),d=O.construct(n);p=u.Yu(o,p),d=u.Yu(o,d);var g=p.cF(d);if(g.z.qg())return new h.Nc(r.y,n.y).contains(a)?(c[0]=r.x,1):0;(d=new h.Wb).set(g.x),d.jm(g.z),d.No(-1),(p=new h.Wb).set(g.y),p.jm(g.z),p.No(-1),(g=new h.Wb).set(p),g.Ag(p);var w=new h.Wb;return w.set(d),w.Ag(d),w.add(g),w.sqrt(),w.qg()||d.qg()&&p.qg()?a==0?(c[0]=r.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(a)/w.value(),1<Math.abs(o)?0:(o=Math.acos(o),g=Math.atan2(p.value(),d.value()),d=Math.min(r.x,n.x),p=Math.max(r.x,n.x),n=u.cB(g-o,d,p),o=a!=0?u.cB(g+o,d,p):n,a=0,d<=n&&n<=p&&(c[a]=n,a++),o!=n&&d<=o&&o<=p&&(c[a]=o,++a==2&&Math.abs(c[0]-r.x)>Math.abs(c[1]-r.x)&&(r=c[0],c[0]=c[1],c[1]=r)),a))},u.cB=function(o,r,n){return o>n?o-=2*(r=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<r&&(o+=2*(r=Math.ceil((r-o)/(2*Math.PI)))*Math.PI),o},u})()})(B||(B={})),(function(h){h.XK=(function(){function O(){}return O.$X=function(m,u){var o=8,r=[0,0,0,0],n=new h.h;n.L(u),n.scale(h.cb.sc(m).Hd().Ec()==9102?1:h.cb.sc(m).Hd().ai/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var a=-180,c=180,p=(m=5*o)-1,d=(u=(m+31)/32)-1;0<=d;d--)for(var g=p-32*d,w=Math.min(32,m-32*d),x=1;x<w;x+=2){var M=.5*(c+a);n.x>=M?(r[d]|=1<<g,a=M):c=M,g-=2,p-=2}for(a=-90,c=90,p=m-2,d=u-1;0<=d;d--)for(g=p-32*d,w=Math.min(32,m-32*d),x=0;x<w;x+=2)M=.5*(c+a),n.y>=M?(r[d]|=1<<g,a=M):c=M,g-=2,p-=2;return O.$P(r,o,o)},O.$P=function(m,u,o){for(var r=[],n=0;n<u;n++)r[n]="";for(var a=n=0,c=0;c<u;c++){var p=m[n]>>a&31;if(31<(a+=5)){var d=37-a;p&=(1<<d)-1,a-=32,p|=(m[++n]&(1<<a)-1)<<d}r[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>u)for(c=0;c<o-u;c++)r.push("0");else o<u&&(r.length=o);return r.join("")},O})()})(B||(B={})),(function(h){var O={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},m={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.wr=(function(){function u(){}return u.Sy=function(o){u.xp===!1&&u.yt();var r=u.FQ(o);if(r==-1){var n=u.Bx(o);n!=o&&(r=u.Sy(n))}return r==-1&&(n=u.FK(o))!=o&&(r=u.Sy(n)),r},u.FQ=function(o){return u.Fw[o]!==void 0?u.Fw[o]:-1},u.CQ=function(o){u.xp===!1&&u.yt();var r=u.nF(o);if(r==1e38){var n=u.Bx(o);if(n!=o&&(r=u.nF(n)),r==1e38)return 1e-10}return r},u.ZS=function(o){if(u.Is[o]!==void 0)return!0;var r=u.Bx(o);return r!=o&&u.Is[r]!==void 0},u.aT=function(o){if(u.xo[o]!==void 0)return!0;var r=u.Bx(o);return r!=o&&u.xo[r]!==void 0},u.nF=function(o){return u.xp===!1&&u.yt(),u.Is[o]!==void 0?u.Is[o]:u.xo[o]!==void 0?u.xo[o]:1e38},u.FK=function(o){return u.xp===!1&&u.yt(),u.WA[o]!==void 0?u.WA[o]:o},u.Bx=function(o){return u.xp===!1&&u.yt(),u.XA[o]!==void 0?u.XA[o]:o},u.yt=function(){for(var o,r=O,n=0;n<r.pcsid.length;n+=2)u.xo[r.pcsid[n]]=r.pcstol[2*r.pcsid[n+1]+1];for(n=0;n<r.pcsidc.length;n+=1)for(var a=(o=r.pcsidc[n])[0];a<=o[1];a++)u.xo[a]=r.pcstol[2*o[2]+1];for(n=0;n<r.gcsid.length;n+=2)u.Is[r.gcsid[n]]=r.gcstol[2*r.gcsid[n+1]+1];for(n=0;n<r.gcsidc.length;n+=1)for(a=(o=r.gcsidc[n])[0];a<=o[1];a++)u.xo[a]=r.gcstol[2*o[2]+1];for(n=0;n<m.c.length;n+=1)for(a=(o=m.c[n])[0];a<=o[1];a++)u.Fw[a]=o[2];for(n=0;n<m.nc.length;n+=2)u.Fw[m.nc[n]]=m.nc[n+1];for(m=null,n=0;n<r.newtoold.length;n+=2)u.WA[r.newtoold[n+1]]=r.newtoold[n],u.XA[r.newtoold[n]]=r.newtoold[n+1];O=null,u.xp=!0},u.xp=!1,u.Is=[],u.xo=[],u.WA=[],u.XA=[],u.Fw=[],u})()})(B||(B={})),(function(h){function O(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var m=[];h.XC=(function(){function u(){}return u.EQ=function(o){try{for(var r=0;r<m.length;r++)if(m[r].wkttext===o)return m[r].unit;for(var n,a=r="",c=!1,p=0;p<o.length;p++){var d=o[p];c===!0?d=='"'?o[p+1]=='"'?r+=d:c=c=!1:r+=d:/[\s]/.test(d)||(d==","?(a=r!==""?a+(O(r)+","):a+",",r=""):d==")"||d=="]"?(a=r!==""?a+(O(r)+"]}"):a+"]}",r=""):d=="("||d=="["?(a+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):d=='"'?(c=!0,r=""):r+=d)}n=JSON.parse(a);var g=u.mF(n);if(g===null)return null;for(n=null,d=0;d<g.values.length;d++)if(typeof g.values[d]=="object"&&(g.values[d].entity==="UNIT"||g.values[d].entity==="ANGLEUNIT"||g.values[d].entity==="LENGTHUNIT")){n=g.values[d];break}if(n===null)return null;var w=h.Tc.ZO(g.entity==="GEOGCS"||g.entity==="GEOGCRS"?1:0,n.values[1],n.values[2]);return m.push({wkttext:o,unit:w}),10<m.length&&m.shift(),w}catch{return null}},u.mF=function(o){if(o===null)return null;switch(o.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return o}for(var r=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0)switch(o.values[n].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return o.values[n];default:r.push(o.values[n])}for(o=0;o<r.length;o++)if((n=u.mF(r[o]))!==null)return n;return null},u.DQ=function(o){var r=-1;if(o!=null&&0<o.length){var n=o.search(/PROJCR?S/);if(0<=n){var a=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<a&&(r=.001/a)}else if(0<=(n=o.search(/GEOGCR?S/))){var p=0;if(a=0,(n=o.indexOf("SPHEROID",n+6))===-1&&(n=o.indexOf("ELLIPSOID",n+7)),0<n&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&((n=o.lastIndexOf("ANGLEUNIT",c+1))===-1&&(n=o.lastIndexOf("UNIT",c+1)),0<=n&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1)))))try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<p&&0<a&&(r=.001/(p*a))}}return r},u})()})(B||(B={})),(function(h){var O;(O=h.eL||(h.eL={}))[O.NONE=0]="NONE",O[O.LINEAR=1]="LINEAR",O[O.ANGULAR=2]="ANGULAR",(function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"})(h.QL||(h.QL={})),(function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"})(h.Ih||(h.Ih={}));var m=(function(){function u(o,r){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,r!==void 0){for(this.Aa=r.Aa,this.Oq=r.Oq,this.bg=r.bg.slice(0),this.uh=r.uh.slice(0),this.wl=r.wl,this.Vs=[],o=r=0;o<this.Aa;o++)this.Vs[o]=r,r+=u.Va(this.bg[o]);for(this.Oq=r,this.Ae=[],o=0;o<this.Aa;o++){r=u.Va(this.kd(o));for(var n=u.se(this.kd(o)),a=0;a<r;a++)this.Ae[this.Vs[o]+a]=n}}else this.Oq=this.Aa=0}return u.prototype.kd=function(o){if(0>o||o>this.Aa)throw h.i.N();return this.bg[o]},u.prototype.Pf=function(o){return this.uh[o]},u.lz=function(o){return u.JM[o]},u.Tp=function(o){return u.SM[o]},u.Va=function(o){return u.rM[o]},u.prototype.hasAttribute=function(o){return 0<=this.uh[o]},u.prototype.iG=function(){return this.hasAttribute(1)},u.se=function(o){return u.eD[o]},u.prototype.LR=function(o){return this.Vs[o]},u.DG=function(o,r){return u.eD[o]===r},u.prototype.Nb=function(o){return this===o},u.prototype.An=function(){for(var o=h.O.Th(this.bg[0]),r=1;r<this.Aa;r++)o=h.O.Th(this.bg[r],o);return o},u.prototype.$j=function(o){return this.Vs[o]},u.prototype.cc=function(){return this.wl},u.prototype.Ed=function(o){return this.bg[o]},u.eD=[0,0,NaN,0,0,0,0,0,0],u.JM=[1,1,1,0,2,1,1,1,0],u.SM=[1,1,1,2,0,0,0,0,2],u.rM=[2,1,1,1,3,1,2,3,2],u})();h.ra=m})(B||(B={})),(function(h){function O(c,p,d){var g=p-(c=new a(c)).e,w=c.c;for(w.length>++p&&m(c,g,a.eu),w[0]?d?g=p:(w=c.c,g=c.e+g+1):++g;w.length<g;w.push(0));return g=c.e,d===1||d&&(p<=g||g<=o)?(0>c.Bd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>g?"e":"e+")+g:c.toString()}function m(c,p,d,g){var w=c.c,x=c.e+p+1;if(d===1?g=5<=w[x]:d===2?g=5<w[x]||w[x]==5&&(g||0>x||w[x+1]!==void 0||1&w[x-1]):d===3?g=g||w[x]!==void 0||0>x:(g=!1,d!==0&&u("!Big.RM!")),1>x||!w[0])g?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(w.length=x--,g)for(;9<++w[x];)w[x]=0,x--||(++c.e,w.unshift(1));for(x=w.length;!w[--x];w.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,r=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,a=(function(){function c(p){if(p instanceof c)this.Bd=p.Bd,this.e=p.e,this.c=p.c.slice();else{var d,g,w;for(p===0&&0>1/p?p="-0":n.test(p+="")||u(NaN),this.Bd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(d=p.indexOf("."))&&(p=p.replace(".","")),0<(g=p.search(/e/i))?(0>d&&(d=g),d+=+p.slice(g+1),p=p.substring(0,g)):0>d&&(d=p.length),g=0;p.charAt(g)=="0";g++);if(g==(w=p.length))this.c=[this.e=0];else{for(;p.charAt(--w)=="0";);for(this.e=d-g-1,this.c=[],d=0;g<=w;this.c[d++]=+p.charAt(g++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Bd=1,p},c.prototype.cmp=function(p){var d=this.c,g=(p=new c(p)).c,w=this.Bd,x=p.Bd,M=this.e,$=p.e;if(!d[0]||!g[0])return d[0]?w:g[0]?-x:0;if(w!=x)return w;if(p=0>w,M!=$)return M>($^p)?1:-1;for(w=-1,x=(M=d.length)<($=g.length)?M:$;++w<x;)if(d[w]!=g[w])return d[w]>(g[w]^p)?1:-1;return M==$?0:M>($^p)?1:-1},c.prototype.jm=function(p){var d=this.c,g=(p=new c(p)).c,w=this.Bd==p.Bd?1:-1,x=c.rr;if((x!==~~x||0>x||1e6<x)&&u("!Big.DP!"),!d[0]||!g[0])return d[0]==g[0]&&u(NaN),g[0]||u(w/0),new c(0*w);var M,$,I=g.slice(),R=M=g.length,N=d.length,j=d.slice(0,M),z=j.length,D=p,U=D.c=[],V=0,W=x+(D.e=this.e-p.e)+1;for(D.Bd=w,w=0>W?0:W,I.unshift(0);z++<M;j.push(0));do{for($=0;10>$;$++){if(M!=(z=j.length))var Z=M>z?1:-1;else{var it=-1;for(Z=0;++it<M;)if(g[it]!=j[it]){Z=g[it]>j[it]?1:-1;break}}if(!(0>Z))break;for(p=z==M?g:I;z;){if(j[--z]<p[z]){for(it=z;it&&!j[--it];j[it]=9);--j[it],j[z]+=10}j[z]-=p[z]}for(;!j[0];j.shift());}U[V++]=Z?$:++$,j[0]&&Z?j[z]=d[R]||0:j=[d[R]]}while((R++<N||j[0]!==void 0)&&w--);return U[0]||V==1||(U.shift(),D.e--),V>W&&m(D,x,c.eu,j[0]!==void 0),D},c.prototype.fS=function(){return 0<this.cmp(0)},c.prototype.nT=function(){return 0>this.cmp(0)},c.prototype.jt=function(p){var d,g=this.Bd,w=(p=new c(p)).Bd;if(g!=w)return p.Bd=-w,this.tI(p);var x=this.c.slice(),M=this.e,$=p.c,I=p.e;if(!x[0]||!$[0])return $[0]?(p.Bd=-w,p):new c(x[0]?this:0);if(g=M-I){for((d=0>g)?(g=-g,M=x):(I=M,M=$),M.reverse(),w=g;w--;M.push(0));M.reverse()}else for(M=((d=x.length<$.length)?x:$).length,g=w=0;w<M;w++)if(x[w]!=$[w]){d=x[w]<$[w];break}if(d&&(M=x,x=$,$=M,p.Bd=-p.Bd),0<(w=(M=$.length)-(d=x.length)))for(;w--;x[d++]=0);for(w=d;M>g;){if(x[--M]<$[M]){for(d=M;d&&!x[--d];x[d]=9);--x[d],x[M]+=10}x[M]-=$[M]}for(;x[--w]==0;x.pop());for(;x[0]==0;)x.shift(),--I;return x[0]||(p.Bd=1,x=[I=0]),p.c=x,p.e=I,p},c.prototype.tI=function(p){var d=this.Bd,g=(p=new c(p)).Bd;if(d!=g)return p.Bd=-g,this.jt(p);g=this.e;var w=this.c,x=p.e,M=p.c;if(!w[0]||!M[0])return M[0]?p:new c(w[0]?this:0*d);if(w=w.slice(),d=g-x){for(0<d?(x=g,g=M):(d=-d,g=w),g.reverse();d--;g.push(0));g.reverse()}for(0>w.length-M.length&&(g=M,M=w,w=g),d=M.length,g=0;d;)g=(w[--d]=w[d]+M[d]+g)/10|0,w[d]%=10;for(g&&(w.unshift(g),++x),d=w.length;w[--d]==0;w.pop());return p.c=w,p.e=x,p},c.prototype.pow=function(p){var d=this,g=new c(1),w=g,x=0>p;for((p!==~~p||-1e6>p||1e6<p)&&u("!pow!"),p=x?-p:p;1&p&&(w=w.lr(d)),p>>=1;)d=d.lr(d);return x?g.jm(w):w},c.prototype.round=function(p,d){var g=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&u("!round!"),m(g=new c(g),p,d??c.eu),g},c.prototype.sqrt=function(){var p=this.c,d=this.Bd,g=this.e,w=new c("0.5");if(!p[0])return new c(this);0>d&&u(NaN),(d=Math.sqrt(this.toString()))==0||d==1/0?((d=p.join("")).length+g&1||(d+="0"),(p=new c(Math.sqrt(d).toString())).e=((g+1)/2|0)-(0>g||1&g)):p=new c(d.toString()),d=p.e+(c.rr+=4);do g=p,p=w.lr(g.tI(this.jm(g)));while(g.c.slice(0,d).join("")!==p.c.slice(0,d).join(""));return m(p,c.rr-=4,c.eu),p},c.prototype.lr=function(p){var d=this.c,g=(p=new c(p)).c,w=d.length,x=g.length,M=this.e,$=p.e;if(p.Bd=this.Bd==p.Bd?1:-1,!d[0]||!g[0])return new c(0*p.Bd);if(p.e=M+$,w<x){var I=d;d=g,g=I,$=w,w=x,x=$}for(I=Array($=w+x);$--;I[$]=0);for(M=x;M--;){for(x=0,$=w+M;$>M;)x=I[$]+g[M]*d[$-M-1]+x,I[$--]=x%10,x=x/10|0;I[$]=(I[$]+x)%10}for(x&&++p.e,I[0]||I.shift(),M=I.length;!I[--M];I.pop());return p.c=I,p},c.prototype.toString=function(){var p=this.e,d=this.c.join(""),g=d.length;if(p<=o||p>=r)d=d.charAt(0)+(1<g?"."+d.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;d="0"+d);d="0."+d}else if(0<p)if(++p>g)for(p-=g;p--;d+="0");else p<g&&(d=d.slice(0,p)+"."+d.slice(p));else 1<g&&(d=d.charAt(0)+"."+d.slice(1));return 0>this.Bd&&this.c[0]?"-"+d:d},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&u("!toExp!"),O(this,p,1)},c.prototype.toFixed=function(p){var d=o,g=r;if(o=-(r=1/0),p==null)var w=this.toString();else p===~~p&&0<=p&&1e6>=p&&(w=O(this,this.e+p),0>this.Bd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return o=d,r=g,w||u("!toFix!"),w},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&u("!toPre!"),O(this,p-1,2))},c.rr=20,c.eu=1,c})();h.hp=a})(B||(B={})),(function(h){var O=(function(){function m(u){this.lf=u}return m.prototype.nr=function(u,o,r){var n=new h.h,a=new h.h,c=this.lf;r.Vd(u,o,(function(p,d){return c.tc(2*p,n),c.tc(2*d,a),n.compare(a)}))},m.prototype.$p=function(u){return this.lf.read(2*u+1)},m})();h.pi=(function(){function m(){}return m.aq=function(u){if(u.B())return!1;var o=u.getType();return o==1736?u.Ke()!=0:o==1607?(o=[!1],m.sE(u,!0,o),o[0]):!(o!=197&&(!h.aa.yd(o)||u.BG()))},m.gm=function(u){var o=u.getType();if(o==1736)return o=new h.Ta(u.description),u.B()||u.dD(o),o;if(o==1607)return m.sE(u,!1,null);if(o==197)return o=new h.Ta(u.description),u.B()||o.ad(u,!1),o;if(h.aa.yd(o)){if(o=new h.de(u.description),!u.B()&&!u.BG()){var r=new h.Sa;u.To(r),o.add(r),u.Po(r),o.add(r)}return o}if(h.aa.Rn(o))return null;throw h.i.N()},m.sE=function(u,o,r){r!=null&&(r[0]=!1);var n=null;if(o||(n=new h.de(u.description)),!u.B()){var a=new h.ia(0);a.Jb(2*u.da());for(var c=0,p=u.da();c<p;c++)if(0<u.Ja(c)&&!u.Nn(c)){var d=u.Ba(c);a.add(d),d=u.Vc(c)-1,a.add(d)}if(0<a.size){p=new h.Xt,c=u.ub(0),p.sort(a,0,a.size,new O(c)),p=new h.h,c.tc(2*a.get(0),p),d=0;for(var g=1,w=new h.Sa,x=new h.h,M=1,$=a.size;M<$;M++)if(c.tc(2*a.get(M),x),x.qb(p))a.get(d)>a.get(M)?(a.set(d,2147483647),d=M):a.set(M,2147483647),g++;else{if(1&g){if(o)return r!=null&&(r[0]=!0),null}else a.set(d,2147483647);p.L(x),d=M,g=1}if(1&g){if(o)return r!=null&&(r[0]=!0),null}else a.set(d,2147483647);if(!o)for(a.Vd(0,a.size,(function(I,R){return I-R})),M=0,$=a.size;M<$&&a.get(M)!=2147483647;M++)u.ve(a.get(M),w),n.add(w)}}return o?null:n},m})()})(B||(B={})),(function(h){var O=(function(){function m(){this.yf=new h.ia(0),this.ys=new h.ia(0),this.EH=1,this.Es=NaN}return m.prototype.sort=function(u,o,r,n){if(32>r-o)n.nr(o,r,u);else{var a=!0;try{for(var c=1/0,p=-1/0,d=o;d<r;d++){var g=n.$p(u.get(d));g<c&&(c=g),g>p&&(p=g)}if(this.reset(r-o,c,p,r-o)){for(d=o;d<r;d++){var w=u.get(d);g=n.$p(w);var x=this.zF(g);this.yf.set(x,this.yf.get(x)+1),this.ys.write(d-o,w)}var M=this.yf.get(0);this.yf.set(0,0),d=1;for(var $=this.yf.size;d<$;d++){var I=this.yf.get(d);this.yf.set(d,M),M+=I}for(d=o;d<r;d++){w=this.ys.read(d-o),g=n.$p(w),x=this.zF(g);var R=this.yf.get(x);u.set(R+o,w),this.yf.set(x,R+1)}a=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(a)n.nr(o,r,u);else{for(d=r=0,$=this.yf.size;d<$;d++)a=r,(r=this.yf.get(d))>a&&n.nr(o+a,o+r,u);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},m.prototype.reset=function(u,o,r,n){return!(2>u||r==o)&&(u=Math.min(m.hL,u),this.yf.Jb(u),this.yf.resize(u),this.yf.Wj(0,0,this.yf.size),this.EH=o,this.ys.resize(n),this.Es=(r-o)/(u-1),!0)},m.prototype.zF=function(u){return h.O.truncate((u-this.EH)/this.Es)},m.hL=65536,m})();h.Xt=O})(B||(B={})),(function(h){var O,m;(m=O||(O={}))[m.enum_line=1]="enum_line",m[m.enum_arc=2]="enum_arc",m[m.enum_dummy=4]="enum_dummy",m[m.enum_concave_dip=8]="enum_concave_dip",m[m.enum_connection=3]="enum_connection";var u=(function(){function c(){}return c.Qu=function(p,d,g,w,x,M){var $=new c;return $.Im=new h.h,$.Vm=new h.h,$.aw=new h.h,$.Im.L(p),$.Vm.L(d),$.aw.L(g),$.Co=w,$.qh=x,$.sh=M,$},c.construct=function(p,d,g,w){var x=new c;return x.Im=new h.h,x.Vm=new h.h,x.aw=new h.h,x.Im.L(p),x.Vm.L(d),x.aw.Rc(),x.Co=4,x.qh=g,x.sh=w,x},c})(),o=(function(){function c(p,d,g,w,x,M){this.Yv=null,this.ya=0,this.EA=p,this.bI=this.$H=0,this.Ka=d,this.Mj=g,this.vk=w,this.Dq=x,this.Ub=M}return c.prototype.next=function(){for(var p=new h.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,p),this.ya++,!p.B())break}var d=!1;if(this.Yv==null&&(this.$H=p.Lg(),this.bI=p.ih(),this.Yv=a.buffer(p,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),d=!0),this.ya<this.EA.I()){var g=new h.Da;this.Yv.copyTo(g)}else g=this.Yv;if(!d){d=new h.Dd;var w=p.Lg()-this.$H;p=p.ih()-this.bI,d.gg(w,p),g.Oc(d)}return g},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c})(),r=(function(){function c(p,d){this.Wa=p,this.ya=0,this.oq=d}return c.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var d=this.ya;if(this.ya++,!p.Nn(d))for(var g=p.Na(p.Vc(d)-1);this.ya<p.da();){var w=p.Na(p.Ba(this.ya));if(p.Nn(this.ya)||w!=g)break;g=p.Na(p.Vc(this.ya)-1),this.ya++}if(this.ya-d==1)return this.Wa.kE(this.Wa.X,d,this.oq);for((g=new h.Ta(this.Wa.X.description)).addPath(this.Wa.X,d,!0),d+=1;d<this.ya;d++)g.Dr(this.Wa.X,d,0,p.rv(d),!1);return this.Wa.kE(g,0,this.oq)}return null},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c})(),n=(function(){function c(p){this.Wa=p,this.ya=0}return c.prototype.next=function(){var p=this.Wa.X;if(this.ya<p.da()){var d=this.ya;for(p.Ir(this.ya),this.ya++;this.ya<p.da()&&!(0<p.Ir(this.ya));)this.ya++;return d==0&&this.ya==p.da()?this.Wa.py(p,0,p.da()):this.Wa.py(p,d,this.ya)}return null},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c})(),a=(function(){function c(p){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=p,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return c.buffer=function(p,d,g,w,x,M){if(p==null||0>w)throw h.i.N();if(p.B())return new h.Da(p.description);var $=new h.l;return p.xc($),0<d&&$.W(d,d),(M=new c(M)).Mj=g,M.X=p,M.qa=h.ta.Wd(g,$,!0),M.ct=h.ta.Wd(null,$,!0),M.Ka=d,M.JT=p.getType(),0>=x&&(x=96),M.rb=Math.abs(M.Ka),M.Kv=M.rb!=0?1/M.rb:0,isNaN(w)||w==0?w=1e-5*M.rb:w>.5*M.rb&&(w=.5*M.rb),12>x&&(x=12),(p=Math.abs(d)*(1-Math.cos(Math.PI/x)))>w?w=p:(p=Math.PI/Math.acos(1-w/Math.abs(d)))<x-1&&12>(x=h.O.truncate(p))&&(x=12,w=Math.abs(d)*(1-Math.cos(Math.PI/x))),M.vk=w,M.Dq=x,M.tA=Math.min(M.ct,.25*w),M.lE()},c.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var p=this.qE();p=h.O.truncate((p+3)/4);var d=.5*Math.PI/p;this.oA=d;for(var g=0;g<4*p;g++)this.Id.push(null);var w=Math.cos(d);d=Math.sin(d);var x=h.h.construct(0,1);for(g=0;g<p;g++)this.Id[g+0*p]=h.h.construct(x.y,-x.x),this.Id[g+1*p]=h.h.construct(-x.x,-x.y),this.Id[g+2*p]=h.h.construct(-x.y,x.x),this.Id[g+3*p]=x,(x=h.h.construct(x.x,x.y)).Bt(w,d)},c.prototype.lE=function(){var p=this.X.getType();if(h.aa.yd(p))return(p=new h.Ta(this.X.description)).oc(this.X,!0),this.X=p,this.lE();if(this.Ka<=this.qa){if(!h.aa.US(p))return new h.Da(this.X.description);if(0>=this.Ka&&(p=new h.l,this.X.A(p),p.R()<=2*-this.Ka||p.ca()<=2*this.Ka))return new h.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw h.i.Qa()}},c.prototype.RN=function(){if(this.EG(this.X)){var p=new h.Sa;this.X.ve(0,p);var d=new h.l;return this.X.A(d),p.Cb(d.sf()),this.Gu(p)}return this.X=this.WV(this.X),p=new r(this,this.oq),h.Gh.local().V(p,this.Mj,this.Ub).next()},c.prototype.QN=function(){if(this.Ka==0)return this.X;var p=h.Yl.local();if(this.cv(),this.X=p.V(this.X,null,!1,this.Ub),0>this.Ka){var d=this.X;return d=this.py(d,0,d.da()),p.V(d,this.Mj,!1,this.Ub)}return this.EG(this.X)?(p=new h.Sa,this.X.ve(0,p),d=new h.l,this.X.A(d),p.Cb(d.sf()),this.Gu(p)):(p=new n(this),h.Gh.local().V(p,this.Mj,this.Ub).next())},c.prototype.py=function(p,d,g){for(var w=new h.Da(p.description);d<g;d++)if(!(1>p.Ja(d))){var x=p.Ir(d),M=new h.l;if(p.Rj(d,M),0<this.Ka){if(0<x)if(this.FG(p,d))x=new h.Sa,p.ve(p.Ba(d),x),x.Cb(M.sf()),this.yu(w,x);else{var $=x=new h.Ta(p.description);$=h.Zt.JG(this.X,d)||this.zn(this.X,d,$,!0,1)==2?this.jE(p,d):this.yn(x),w.add($,!1)}else if(!(M.R()+this.qa<=2*this.rb||M.ca()+this.qa<=2*this.rb||($=x=new h.Ta(p.description),this.zn(this.X,d,$,!0,1),x.B()))){var I=new h.l;for(I.K(M),I.W(this.rb,this.rb),$.tp(I),M=1,x=($=this.yn(x)).da();M<x;M++)w.addPath($,M,!0)}}else if(0<x){if(!(M.R()+this.qa<=2*this.rb||M.ca()+this.qa<=2*this.rb||($=x=new h.Ta(p.description),this.zn(this.X,d,$,!0,-1),x.B())))for(I=new h.l,$.xc(I),I.W(this.rb,this.rb),$.tp(I),M=1,x=($=this.yn(x)).da();M<x;M++)w.addPath($,M,!0)}else for($=x=new h.Ta(p.description),this.zn(this.X,d,$,!0,-1),M=0,x=($=this.yn(x)).da();M<x;M++)w.addPath($,M,!0)}if(0<this.Ka)return 1<w.da()?w=this.yn(w):c.kx(w);if(p=new h.l,w.xc(p),w.B())return c.kx(w);for(p.W(this.rb,this.rb),w.tp(p),w=this.yn(w),p=new h.Da(w.description),M=1,x=w.da();M<x;M++)p.addPath(w,M,!1);return c.kx(p)},c.prototype.PN=function(){return this.Gu(this.X)},c.prototype.Gu=function(p){var d=new h.Da(this.X.description);return this.yu(d,p),this.sX(d)},c.prototype.ON=function(){var p=new o(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return h.Gh.local().V(p,this.Mj,this.Ub).next()},c.prototype.LN=function(){var p=new h.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)p.ad(this.X,!1);else{var d=new h.Fh;this.X.bn(d),d.W(this.Ka,this.Ka),p.ad(d,!1)}return p}return p.ad(this.X,!1),this.X=p,this.jE(p,0)},c.prototype.jE=function(p,d){this.cv();var g=new h.Da(p.description),w=new h.h,x=new h.h,M=new h.h,$=new h.h,I=new h.h,R=new h.h,N=new h.h,j=new h.h,z=p.Ja(d),D=p.Ba(d),U=0;for(d=p.Ja(d);U<d;U++){if(p.D(D+U,x),p.D(D+(U+1)%z,$),p.D(D+(U+2)%z,R),N.uc($,x),N.length()==0||(N.Hv(),N.normalize(),N.scale(this.rb),w.add(N,x),M.add(N,$),U==0?g.Lt(w):g.Ci(w),g.Ci(M),j.uc(R,$),j.length()==0))throw h.i.Qa();j.Hv(),j.normalize(),j.scale(this.rb),I.add(j,$),this.GD(g,$,M,I,!1)}return c.kx(g)},c.prototype.kE=function(p,d,g){if(this.cv(),1>p.Ja(d))return null;if(this.FG(p,d)&&0<this.Ka){g=new h.Sa,p.ve(p.Ba(d),g);var w=new h.l;return p.Rj(d,w),g.Cb(w.sf()),this.Gu(g)}if(w=new h.Ta(p.description),p.Nn(d))this.zn(p,d,w,g,1),this.zn(p,d,w,g,-1);else{var x=new h.Ta(p.description);x.addPath(p,d,!1),x.Dr(p,d,0,p.rv(d),!1),this.zn(x,0,w,g,1)}return this.yn(w)},c.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw h.i.fu("user_canceled")},c.prototype.yn=function(p){return h.Fg.Mk(p,this.ct,!0,!0,this.Ub)},c.prototype.qE=function(){if(this.vk==0)return this.Dq;var p=1-this.vk*Math.abs(this.Kv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Dq&&(p=this.Dq),h.O.truncate(p)},c.prototype.GD=function(p,d,g,w,x){this.cv();var M=new h.h;M.uc(g,d),M.scale(this.Kv);var $=new h.h;$.uc(w,d),$.scale(this.Kv),0>(M=Math.atan2(M.y,M.x)/this.oA)&&(M=this.Id.length+M),M=this.Id.length-M,0>($=Math.atan2($.y,$.x)/this.oA)&&($=this.Id.length+$),($=this.Id.length-$)<M&&($+=this.Id.length);var I=h.O.truncate($);$=h.O.truncate(Math.ceil(M)),(M=new h.h).L(this.Id[$%this.Id.length]),M.Ct(this.rb,d);var R=10*this.qa;for(M.sub(g),M.length()<R&&($+=1),M.L(this.Id[I%this.Id.length]),M.Ct(this.rb,d),M.sub(w),M.length()<R&&--I,g=I-$,g++,I=0,$%=this.Id.length;I<g;I++,$=($+1)%this.Id.length)M.L(this.Id[$]),M.Ct(this.rb,d),p.Ci(M),this.Xq();x&&p.Ci(w)},c.prototype.zn=function(p,d,g,w,x){var M=new h.gd,$=M.mN(p,d);if(M.Gp(this.tA,!1,!1),2>M.I($))return 0>x||(x=p,M=new h.Sa,x.ve(x.Ba(d),M),this.yu(g,M)),1;var I=M.Na(M.Xa(M.Ob($))),R=new h.Dd;if(R.gg(-I.x,-I.y),M.Oc(R),w&&(this.tQ(M,$,x),2>M.I($)))return 0>x||(x=p,M=new h.Sa,x.ve(x.Ba(d),M),this.yu(g,M)),1;this.Zd.length=0;var N=M.Ob($);d=M.Xa(N);var j=x==1?M.Ma(d):M.U(d);p=x==1?M.U(d):M.Ma(d);var z=!0;w=new h.h,$=new h.h;var D=new h.h,U=new h.h,V=new h.h,W=new h.h,Z=new h.h,it=new h.h,ot=new h.h,dt=new h.h,ft=this.rb;N=M.Ja(N);for(var $t=0;$t<N;$t++)M.D(p,$),z&&(M.D(d,w),M.D(j,D),it.uc(w,D),it.normalize(),dt.MG(it),dt.scale(ft),U.add(dt,w)),Z.uc($,w),Z.normalize(),ot.MG(Z),ot.scale(ft),V.add(w,ot),j=it.wi(Z),z=it.Qh(Z),0>j||0>z&&j==0?this.Zd.push(u.Qu(U,V,w,2,this.Zd.length+1,this.Zd.length-1)):U.qb(V)||(this.Zd.push(u.construct(U,w,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(u.construct(w,V,this.Zd.length+1,this.Zd.length-1,"dummy"))),W.add($,ot),this.Zd.push(u.Qu(V,W,w,1,this.Zd.length+1,this.Zd.length-1)),U.L(W),dt.L(ot),D.L(w),w.L($),it.L(Z),j=d,d=p,z=!1,p=x==1?M.U(d):M.Ma(d);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(g),R.gg(I.x,I.y),g.YD(R,g.da()-1),1},c.prototype.YV=function(p){for(var d=this.zO(),g=!0,w=d+1,x=d;w!=d;x=w){var M=this.Zd[x];w=M.qh!=-1?M.qh:(x+1)%this.Zd.length,M.Co!=0&&(g&&p.Lt(M.Im),M.Co==2?this.GD(p,M.aw,M.Im,M.Vm,!0):p.Ci(M.Vm),g=!1)}},c.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var p=0,d=0,g=this.Zd.length;d<g;){var w=this.Zd[d];if(3&w.Co){p=d;break}d=w.qh}for(g=p+1,d=p;g!=p;d=g){g=(w=this.Zd[d]).qh;for(var x=1,M=null;g!=d&&!(3&(M=this.Zd[g]).Co);)g=M.qh,x++;x!=1&&(w.Co&M.Co)==1&&(this.Ls==null&&(this.Ls=new h.yb,this.lw=new h.yb),this.Ls.Dc(w.Im),this.Ls.Qc(w.Vm),this.lw.Dc(M.Im),this.lw.Qc(M.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(w.Vm.L(this.Ks[0]),M.Im.L(this.Ks[0]),w.qh=g,M.sh=d))}return p},c.prototype.Fv=function(p,d,g){var w=new h.h;if(w.uc(g,p),g=w.length(),0<(g=this.rb*this.rb-g*g*.25)){g=Math.sqrt(g),w.normalize(),w.ar();var x=new h.h;if(x.uc(d,p),x.Qh(w)+g>=this.rb)return!0}return!1},c.prototype.tQ=function(p,d,g){for(var w=0;1>w;w++){var x=!1,M=p.Ob(d),$=p.Ja(M);if($==0)break;var I=$;if(3>$)break;!p.dc(M)&&(I=$-1),M=p.Xa(M),$=0<g?p.Ma(M):p.U(M);for(var R=0<g?p.U(M):p.Ma(M),N=$,j=!0,z=new h.h,D=new h.h,U=new h.h,V=new h.h,W=new h.h,Z=h.h.construct(0,0),it=new h.h,ot=new h.h,dt=new h.h,ft=new h.h,$t=this.rb,ut=0,qt=0;qt<I&&(p.D(R,D),j&&(p.D(M,z),p.D($,U),N=$),ot.uc(z,U),ot.normalize(),it.uc(D,z),it.normalize(),N!=R);){var Ut=ot.wi(it),le=ot.Qh(it),Ee=!0;if(0>Ut||0>le&&Ut==0||!this.Fv(U,z,D)||(Z.L(D),Ee=!1,++ut,x=!0),Ee){if(0<ut)for(;(Ut=0<g?p.Ma(N):p.U(N))!=M;){if(p.D(Ut,V),!this.Fv(V,U,Z)){Ut!=R&&this.Fv(V,U,D)&&this.Fv(V,z,D)&&(U.L(V),N=Ut,Ee=!1,++ut);break}U.L(V),N=Ut,Ee=!1,++ut}if(!Ee)continue;if(0<ut){for(N=0<g?p.Ma($):p.U($),j=1;j<ut;j++)Ee=0<g?p.Ma(N):p.U(N),p.pd(N,!0),N=Ee;dt.uc(z,U),ut=$t*$t-(ut=dt.length())*ut*.25,$t-(ut=Math.sqrt(ut))>.5*this.vk?(W.add(U,z),W.scale(.5),dt.normalize(),dt.ar(),ft.L(dt),ft.scale($t-ut),W.add(ft),p.mf($,W)):p.pd($,!0),ut=0}U.L(z),N=M}z.L(D),$=M,M=R,R=0<g?p.U(M):p.Ma(M),qt++,j=!1}if(0<ut){for(N=0<g?p.Ma($):p.U($),j=1;j<ut;j++)Ee=0<g?p.Ma(N):p.U(N),p.pd(N,!0),N=Ee;W.add(U,z),W.scale(.5),dt.uc(z,U),ut=$t*$t-(ut=dt.length())*ut*.25,ut=Math.sqrt(ut),dt.normalize(),dt.ar(),ft.L(dt),ft.scale($t-ut),W.add(ft),p.mf($,W)}if(p.Gp(this.tA,!1,!1),!x)break}},c.prototype.FG=function(p,d){if(p.Ja(d)==1)return!0;var g=new h.l;return p.Rj(d,g),Math.max(g.R(),g.ca())<.5*this.vk},c.prototype.EG=function(p){var d=new h.l;return p.A(d),Math.max(d.R(),d.ca())<.5*this.vk},c.prototype.WV=function(p){for(var d=0,g=0,w=(p=h.EC.local().V(p,.25*this.vk,!1,this.Ub)).da();g<w;g++)d=Math.max(p.Ja(g),d);return 32>d?(this.oq=!1,p):(this.oq=!0,h.Fg.Mk(p,this.ct,!1,!0,this.Ub))},c.prototype.yu=function(p,d){if(d=d.D(),this.Id!=null&&this.Id.length!==0){var g=new h.h;g.L(this.Id[0]),g.Ct(this.rb,d),p.Lt(g);for(var w=1,x=this.Id.length;w<x;w++)g.L(this.Id[w]),g.Ct(this.rb,d),p.Ci(g)}else{w=this.qE(),g=h.O.truncate((w+3)/4),w=.5*Math.PI/g,x=Math.cos(w);for(var M=Math.sin(w),$=new h.h,I=3;0<=I;I--){switch($.ma(0,this.rb),I){case 0:for(w=0;w<g;w++)p.yj($.x+d.x,$.y+d.y),$.Bt(x,M);break;case 1:for(w=0;w<g;w++)p.yj(-$.y+d.x,$.x+d.y),$.Bt(x,M);break;case 2:for(w=0;w<g;w++)p.yj(-$.x+d.x,-$.y+d.y),$.Bt(x,M);break;default:for(p.sx($.y+d.x,-$.x+d.y),w=1;w<g;w++)$.Bt(x,M),p.yj($.y+d.x,-$.x+d.y)}this.Xq()}}},c.kx=function(p){return p.Ch(1,0),p},c.prototype.sX=function(p){return p.Ch(2,this.qa),p.fm(),p},c})();h.HK=a})(B||(B={})),(function(h){var O=(function(){function m(u){this.Ca=u,this.g=new h.gd,this.dd=new h.ia(0)}return m.prototype.Lh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},m.prototype.Ay=function(u,o){return u.getType()==1736?this.Cy(u,o):this.Dy(u)},m.prototype.Cy=function(u,o){if(this.Ca.R()==0||this.Ca.ca()==0)return u.Ia();var r=new h.l;u.xc(r),this.X=this.g.Ib(u);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,d=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0];new h.ig;var w=new h.yb,x=new h.ia(0);x.Jb(Math.min(100,u.I()));for(var M=!1,$=0;!M&&4>$;$++){var I=!1,R=!!(1&$),N=0;switch($){case 0:N=this.Ca.v,I=r.v<=N&&r.C>=N;break;case 1:N=this.Ca.G,I=r.G<=N&&r.H>=N;break;case 2:N=this.Ca.C,I=r.v<=N&&r.C>=N;break;case 3:N=this.Ca.H,I=r.G<=N&&r.H>=N}if(I)for(M=!0,I=this.g.Ob(this.X);I!=-1;){var j=-1,z=-1,D=this.g.Xa(I),U=D;do{var V=this.g.bc(U);V==null&&(V=w,this.g.D(U,c),V.Dc(c),this.g.D(this.g.U(U),p),V.Qc(p)),V.A(n);var W=this.Lh(n,$,N),Z=0,it=-1;if(W==-1){Z=0<(V=V.cq(R,N,d,g))?this.g.Ul(U,g,V):0,Z+=1;var ot=U,dt=this.g.U(ot);for(V=0;V<Z;V++){if(this.g.D(ot,c),this.g.D(dt,p),(it=this.g.bc(ot))==null&&((it=w).Dc(c),it.Qc(p)),it.A(a),(it=this.Lh(a,$,N))==-1){if(R)(it=Math.abs(c.y-N))<(ft=Math.abs(p.y-N))?(c.y=N,this.g.mf(ot,c)):(p.y=N,this.g.mf(dt,p));else{it=Math.abs(c.x-N);var ft=Math.abs(p.x-N);it<ft?(c.x=N,this.g.mf(ot,c)):(p.x=N,this.g.mf(dt,p))}(it=this.g.bc(ot))==null&&((it=w).Dc(c),it.Qc(p)),it.A(a),it=this.Lh(a,$,N)}ft=j,j=it,z==-1&&(z=j),ft==0&&j==1||ft==1&&j==0||ft!=0||j!=0||x.add(ot),j==1&&(M=!1),it=ot=dt,dt=this.g.U(dt)}}Z==0&&(ft=j,j=W,z==-1&&(z=j),ft==0&&j==1||ft==1&&j==0||ft!=0||j!=0||x.add(U),j==1&&(M=!1),it=this.g.U(U)),U=it}while(U!=D);for(z==0&&j==0&&x.add(D),V=0,j=x.size;V<j;V++)z=x.get(V),this.g.pd(z,!1);x.clear(!1),I=3>this.g.Ja(I)?this.g.Zq(I):this.g.Rb(I)}}return M?u.Ia():(this.FB(),0<o&&this.My(o),this.g.Ne(this.X))},m.prototype.Dy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.ig,p=u,d=new h.l;u.xc(d);for(var g=0;4>g;g++){var w=!1,x=!!(1&g),M=0;switch(g){case 0:M=this.Ca.v,w=d.v<=M&&d.C>=M;break;case 1:M=this.Ca.G,w=d.G<=M&&d.H>=M;break;case 2:M=this.Ca.C,w=d.v<=M&&d.C>=M;break;case 3:M=this.Ca.H,w=d.G<=M&&d.H>=M}if(w){w=p,p=u.Ia(),(w=w.Ga()).Zi();for(var $,I=new h.h;w.$a();)for(var R,N=!0;w.Ha();){var j=w.ha();j.A(o);var z=this.Lh(o,g,M);if(z==-1){if(0<(z=j.cq(x,M,n,a))){var D=0;$=j.ac();for(var U=0;U<=z;U++)if(D!=(R=U<z?a[U]:1)){j.ah(D,R,c);var V=c.get();V.Dc($),U<z&&(x?(I.x=n[U],I.y=M):(I.x=M,I.y=n[U]),V.Qc(I)),V.A(r);var W=this.Lh(r,g,M);if(W==-1){if($=V.ac(),D=V.wc(),x)(W=Math.abs($.y-M))<(Z=Math.abs(D.y-M))?($.y=M,V.Dc($)):(D.y=M,V.Qc(D));else{W=Math.abs($.x-M);var Z=Math.abs(D.x-M);W<Z?($.x=M,V.Dc($)):(D.x=M,V.Qc(D))}V.A(r),W=this.Lh(r,g,M)}$=V.wc(),D=R,(R=W)==1?(p.oc(V,N),N=!1):N=!0}}}else(R=z)==1?(p.oc(j,N),N=!1):N=!0}}}return p},m.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var u=new h.h,o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))for(var r=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a;n++,r=this.g.U(r))this.g.D(r,u),(this.Ca.v==u.x||this.Ca.C==u.x||this.Ca.G==u.y||this.Ca.H==u.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},m.prototype.My=function(u){for(var o=new h.h,r=new h.h,n=h.O.lg(2048,0),a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a)){var c=this.g.Xa(a),p=c;do{var d=this.g.U(p);this.g.D(p,o);var g=-1;if(o.x==this.Ca.v?(this.g.D(d,r),r.x==this.Ca.v&&(g=1)):o.x==this.Ca.C&&(this.g.D(d,r),r.x==this.Ca.C&&(g=1)),o.y==this.Ca.G?(this.g.D(d,r),r.y==this.Ca.G&&(g=0)):o.y==this.Ca.H&&(this.g.D(d,r),r.y==this.Ca.H&&(g=0)),g!=-1&&(g=h.h.tb(o,r),!(1>=(g=h.O.truncate(Math.min(Math.ceil(g/u),2048)))))){for(var w=1;w<g;w++)n[w-1]=1*w/g;this.g.Ul(p,n,g-1)}p=d}while(p!=c)}},m.prototype.Vl=function(u,o){var r=this.g.Gd(),n=new h.h,a=new h.ia(0);a.Jb(100);for(var c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var p=this.g.Xa(c),d=0,g=this.g.Ja(c);d<g;d++){var w=this.g.U(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(this.g.Pa(p,r)!=1&&(a.add(p),this.g.Ra(p,r,1)),this.g.Pa(w,r)!=1&&(a.add(w),this.g.Ra(w,r,1)))),p=w}if(this.g.Td(r),!(3>a.size)){var x=this;a.Vd(0,a.size,(function(W,Z){return x.Mh(W,Z)})),r=new h.h,c=new h.h,p=new h.h,c.Rc();var M=-1;d=new h.ia(0),g=new h.ia(0),w=this.g.Gd();for(var $=this.g.Gd(),I=0,R=a.size;I<R;I++){var N=a.get(I);if(this.g.D(N,n),!n.qb(c)){if(M!=-1){for(var j=M;j<I;j++){M=a.get(j);var z=this.g.U(M);N=this.g.Ma(M);var D=!1;0>this.Mh(M,z)&&(this.g.D(z,r),u?r.y==o:r.x==o)&&(d.add(M),D=!0,this.g.Ra(M,$,1)),0>this.Mh(M,N)&&(this.g.D(N,r),u?r.y==o:r.x==o)&&(D||d.add(M),this.g.Ra(M,w,1))}for(j=0,D=d.size;j<D;j++){if(M=d.get(j),N=this.g.Pa(M,w),z=this.g.Pa(M,$),N==1){N=this.g.Ma(M),this.g.D(N,p);var U=[0];if(U[0]=0,!p.qb(n)){var V=h.h.tb(c,p);U[0]=h.h.tb(p,n)/V,U[0]==0?U[0]=2220446049250313e-31:U[0]==1&&(U[0]=.9999999999999998),this.g.Ul(N,U,1),N=this.g.Ma(M),this.g.mf(N,n),g.add(N),this.g.Ra(N,w,1),this.g.Ra(N,$,-1)}}z==1&&(z=this.g.U(M),this.g.D(z,p),(U=[0])[0]=0,p.qb(n)||(V=h.h.tb(c,p),U[0]=h.h.tb(c,n)/V,U[0]==0?U[0]=2220446049250313e-31:U[0]==1&&(U[0]=.9999999999999998),this.g.Ul(M,U,1),N=this.g.U(M),this.g.mf(N,n),g.add(N),this.g.Ra(N,w,-1),this.g.Ra(N,$,1)))}M=d,d=g,(g=M).clear(!1)}M=I,c.L(n)}}this.g.Td(w),this.g.Td($)}},m.prototype.Nl=function(u,o){var r=new h.h,n=new h.ia(0);n.Jb(100);for(var a=this.g.Gd(),c=0,p=this.dd.size;c<p;c++){var d=this.dd.get(c);if(d!=-1){var g=this.g.U(d);this.g.D(d,r),(u?r.y==o:r.x==o)&&(this.g.D(g,r),(u?r.y==o:r.x==o)&&(this.g.Pa(d,a)!=-2&&(n.add(d),this.g.Ra(d,a,-2)),this.g.Pa(g,a)!=-2&&(n.add(g),this.g.Ra(g,a,-2))))}}if(n.size!=0){var w=this;for(n.Vd(0,n.size,(function(Z,it){return w.Mh(Z,it)})),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Ra(x,a,c)}d=new h.h,(g=new h.h).Rc();var M=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.qb(g))){if(M!=-1)for(;;){x=!1;for(var $=1<c-M?c-1:c,I=M;I<$;I++){var R=n.get(I);if(R!=-1){var N=-1,j=this.g.U(R);0>this.Mh(R,j)&&(this.g.D(j,d),u?d.y==o:d.x==o)&&(N=j),j=-1;var z=this.g.Ma(R);if(0>this.Mh(R,z)&&(this.g.D(z,d),u?d.y==o:d.x==o)&&(j=z),N!=-1&&j!=-1)this.Kh(R,n,a),this.g.pd(R,!1),this.Kh(N,n,a),this.g.pd(N,!1),x=!0;else if(N!=-1||j!=-1){for(z=I+1;z<c;z++){var D=n.get(z);if(D!=-1){var U=this.g.U(D),V=-1;0>this.Mh(D,U)&&(this.g.D(U,d),u?d.y==o:d.x==o)&&(V=U),U=this.g.Ma(D);var W=-1;if(0>this.Mh(D,U)&&(this.g.D(U,d),u?d.y==o:d.x==o)&&(W=U),V!=-1&&W!=-1){this.Kh(D,n,a),this.g.pd(D,!1),this.Kh(V,n,a),this.g.pd(V,!1),x=!0;break}if(N!=-1&&W!=-1){this.zt(n,R,N,D,W,a),x=!0;break}if(j!=-1&&V!=-1){this.zt(n,D,V,R,j,a),x=!0;break}}}if(x)break}}}if(!x)break}M=c,g.L(r)}}this.g.Td(a)},m.prototype.Kh=function(u,o,r){r=this.g.Pa(u,r),o.set(r,-1),r=this.g.Pa(u,this.ji),this.dd.set(r,-1),(o=this.g.bd(u))!=-1&&this.g.Xa(o)==u&&(this.g.Jf(o,-1),this.g.Wg(o,-1))},m.prototype.zt=function(u,o,r,n,a,c){this.g.Bc(o,n),this.g.Cc(n,o),this.g.Cc(r,a),this.g.Bc(a,r),this.Kh(n,u,c),this.g.mi(n,!1),this.Kh(a,u,c),this.g.mi(a,!0)},m.prototype.Ty=function(){for(var u=0,o=this.dd.size;u<o;u++){var r=this.dd.get(u);r!=-1&&this.g.aj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.X);c!=-1;){var p=this.g.Xa(c);if(p==-1||c!=this.g.bd(p)){var d=c;c=this.g.Rb(c),this.g.Jf(d,-1),this.g.$q(d)}else{r=p,d=0;do this.g.aj(r,c),d++,r=this.g.U(r);while(r!=p);2>=d?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),d==2&&(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),this.g.pd(p,!1)),d=c,c=this.g.Rb(c),this.g.Jf(d,-1),this.g.$q(d)):(this.g.cp(c,!1),this.g.Wg(c,this.g.Ma(p)),this.g.Vj(c,d),a+=d,n++,c=this.g.Rb(c))}}for(u=0,o=this.dd.size;u<o;u++)if((r=this.dd.get(u))!=-1&&(c=this.g.bd(r))==-1){c=this.g.vf(this.X,-1),d=0,p=r;do this.g.aj(r,c),d++,r=this.g.U(r);while(r!=p);2>=d?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),d==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),d=c,this.g.Jf(d,-1),this.g.$q(d)):(this.g.kn(c,!0),this.g.Vj(c,d),this.g.Jf(c,p),this.g.Wg(c,this.g.Ma(p)),this.g.cp(c,!1),a+=d,n++)}for(this.g.Rl(this.X,n),this.g.Tj(this.X,a),u=0,o=this.g.ld;o!=-1;o=this.g.ue(o))u+=this.g.I(o);this.g.bC(u)},m.By=function(u,o,r){return new m(o).Ay(u,r)},m.clip=function(u,o,r,n){if(u.B())return u;if(o.B())return u.Ia();if((r=u.getType())==33)return n=u.D(),o.contains(n)?u:u.Ia();if(r==197)return n=new h.l,u.A(n),n.Ea(o)?(o=new h.Fh,u.copyTo(o),o.Xo(n),o):u.Ia();var a=new h.l;if(u.xc(a),o.contains(a))return u;if(!o.isIntersecting(a))return u.Ia();if((a=u.Bb)!=null&&(a=a.Fk)!=null){if((a=a.Ro(o))==1){if(r!=1736)throw h.i.Qa();return(u=new h.Da(u.description)).tp(o),u}if(a==0)return u.Ia()}switch(r){case 550:r=null,a=u.I();for(var c=u.ub(0),p=0,d=0;d<a;d++)n=new h.h,c.tc(2*d,n),o.contains(n)||(p==0&&(r=u.Ia()),p<d&&r.Fd(u,p,d),p=d+1);return 0<p&&r.Fd(u,p,a),p==0?u:r;case 1736:case 1607:return m.By(u,o,n);default:throw h.i.Qa()}},m.prototype.Mh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},m})();h.Ud=O})(B||(B={})),(function(h){var O=(function(){function m(u,o){this.Ca=u,this.g=new h.gd,this.dd=new h.ia(0),this.nd=o}return m.prototype.Lh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},m.prototype.Ay=function(u,o){return u.getType()==1736?this.Cy(u,o):this.Dy(u)},m.prototype.Cy=function(u,o){if(this.Ca.R()==0||this.Ca.ca()==0)return u.Ia();var r=new h.l;u.xc(r),this.X=this.g.Ib(u);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,d=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0],w=new h.yb,x=new h.ia(0);x.Jb(256);for(var M=!1,$=0;!M&&4>$;$++){var I=!1,R=!!(1&$),N=0;switch($){case 0:N=this.Ca.v,I=r.v<=N&&r.C>=N;break;case 1:N=this.Ca.G,I=r.G<=N&&r.H>=N;break;case 2:N=this.Ca.C,I=r.v<=N&&r.C>=N;break;case 3:N=this.Ca.H,I=r.G<=N&&r.H>=N}if(I)for(M=!0,I=this.g.Ob(this.X);I!=-1;){var j=!0,z=-1,D=-1,U=this.g.Xa(I),V=U;do{var W=this.g.bc(V);W==null&&(W=w,this.g.D(V,c),W.Dc(c),this.g.D(this.g.U(V),p),W.Qc(p)),W.A(n);var Z=this.Lh(n,$,N),it=0,ot=-1;if(Z==-1){it=0<(W=W.cq(R,N,d,g))?this.g.LX(V,g,W):0,it+=1;var dt=V,ft=this.g.U(dt);for(W=0;W<it;W++){if(this.g.D(dt,c),this.g.D(ft,p),(ot=this.g.bc(dt))==null&&((ot=w).Dc(c),ot.Qc(p)),ot.A(a),(ot=this.Lh(a,$,N))==-1){if(R)(ot=Math.abs(c.y-N))<($t=Math.abs(p.y-N))?(c.y=N,this.g.mf(dt,c)):(p.y=N,this.g.mf(ft,p));else{ot=Math.abs(c.x-N);var $t=Math.abs(p.x-N);ot<$t?(c.x=N,this.g.mf(dt,c)):(p.x=N,this.g.mf(ft,p))}(ot=this.g.bc(dt))==null&&((ot=w).Dc(c),ot.Qc(p)),ot.A(a),ot=this.Lh(a,$,N)}$t=z,z=ot,D==-1&&(D=z),$t==0&&z==1||$t==1&&z==0||$t!=0||z!=0||x.add(dt),z==1&&(j=M=!1),ot=dt=ft,ft=this.g.U(ft)}}if(it==0&&($t=z,z=Z,D==-1&&(D=z),$t==0&&z==1||$t==1&&z==0||$t!=0||z!=0||x.add(V),z==1&&(j=M=!1),ot=this.g.U(V)),V=ot,256<=x.size){for(W=1,Z=x.size-1;W<Z;W++)it=x.get(W),this.g.pd(it,!1);x.set(1,x.Fc()),x.Bh(2)}}while(V!=U);if(!j)for(D==0&&z==0&&x.add(U),W=0,Z=x.size;W<Z;W++)it=x.get(W),this.g.pd(it,!1);x.clear(!1),I=j||this.g.Ja(I)==0?this.g.Zq(I):this.g.Rb(I)}}return M?u.Ia():(this.FB(),0<o&&this.My(o),this.g.Ne(this.X))},m.prototype.Dy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.ig,p=u,d=new h.l;u.xc(d);for(var g=new h.h,w=new h.h,x=null,M=null,$=0;4>$;$++){var I=!1,R=!!(1&$),N=0;switch($){case 0:N=this.Ca.v,I=d.v<=N&&d.C>=N;break;case 1:N=this.Ca.G,I=d.G<=N&&d.H>=N;break;case 2:N=this.Ca.C,I=d.v<=N&&d.C>=N;break;case 3:N=this.Ca.H,I=d.G<=N&&d.H>=N}if(I)for(I=p,p=u.Ia(),(I=I.Ga()).Zi();I.$a();)for(var j,z=!0;I.Ha();){var D=I.ha();D.A(o);var U=this.Lh(o,$,N);if(U==-1){if(0<(U=D.cq(R,N,n,a))){var V=0;D.Yp(g);for(var W=0;W<=U;W++)if(V!=(j=W<U?a[W]:1)){D.ah(V,j,c);var Z=c.get();Z.Dc(g),W<U&&(R?(w.x=n[W],w.y=N):(w.x=N,w.y=n[W]),Z.Qc(w)),Z.A(r);var it=this.Lh(r,$,N);it==-1&&(x==null&&(x=new h.h),M==null&&(M=new h.h),Z.Yp(x),Z.Tr(M),R?(V=Math.abs(x.y-N))<(it=Math.abs(M.y-N))?(x.y=N,Z.Dc(x)):(M.y=N,Z.Qc(M)):(V=Math.abs(x.x-N))<(it=Math.abs(M.x-N))?(x.x=N,Z.Dc(x)):(M.x=N,Z.Qc(M)),Z.A(r),it=this.Lh(r,$,N)),Z.Tr(g),V=j,(j=it)==1?(p.oc(Z,z),z=!1):z=!0}}}else(j=U)==1?(p.oc(D,z),z=!1):z=!0}}return p},m.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var u=new h.h,o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))for(var r=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a;n++,r=this.g.U(r))this.g.D(r,u),(this.Ca.v==u.x||this.Ca.C==u.x||this.Ca.G==u.y||this.Ca.H==u.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},m.prototype.My=function(u){for(var o=new h.h,r=new h.h,n=null,a=null,c=h.O.lg(2048,0),p=this.g.Ob(this.X);p!=-1;p=this.g.Rb(p)){var d=this.g.Xa(p),g=d;do{var w=this.g.U(g);this.g.D(g,o);var x=-1;if(o.x==this.Ca.v?(this.g.D(w,r),r.x==this.Ca.v&&(x=1)):o.x==this.Ca.C&&(this.g.D(w,r),r.x==this.Ca.C&&(x=1)),o.y==this.Ca.G?(this.g.D(w,r),r.y==this.Ca.G&&(x=0)):o.y==this.Ca.H&&(this.g.D(w,r),r.y==this.Ca.H&&(x=0)),x!=-1){if(n==null&&(n=new h.h),a==null&&(a=new h.h),n.L(o),a.ma(0,0),x==0){var M=o.x-this.Ca.v;a.x=h.lc.sign(r.x-o.x),n.x=u*h.lc.Cn(Math.floor(Math.abs(M/u)),M)+this.Ca.v,0>n.x&&(n.x+=u)}else M=o.y-this.Ca.G,a.y=h.lc.sign(r.y-o.y),n.y=u*h.lc.Cn(Math.floor(Math.abs(M/u)),M)+this.Ca.G,0>n.y&&(n.y+=u);M=x!=0?r.y-o.y:r.x-o.x;var $=Math.abs(M);if(65536<$/u)throw h.i.fa("internal error");if(0<$){$=h.O.truncate($/u)+2,c.length<$&&(c=h.O.lg($));for(var I=$=0;;I++){var R=new h.h;if(R.x=n.x+a.x*I*u,R.y=n.y+a.y*I*u,1<=(R=(x!=0?R.y-o.y:R.x-o.x)/M))break;0>=R||(c[$]=R,$++)}$!=0&&this.g.Ul(g,c,$)}}g=w}while(g!=d)}},m.prototype.Vl=function(u,o){for(var r=-1,n=new h.h,a=null,c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var p=this.g.Xa(c),d=0,g=this.g.Ja(c);d<g;d++){var w=this.g.U(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(r==-1&&(r=this.g.Gd()),a==null&&(a=new h.ia(0)).Jb(100),this.g.Pa(p,r)!=1&&(a.add(p),this.g.Ra(p,r,1)),this.g.Pa(w,r)!=1&&(a.add(w),this.g.Ra(w,r,1)))),p=w}if(r!=-1&&this.g.Td(r),!(a==null||3>a.size)){var x=this;a.Vd(0,a.size,(function(W,Z){return x.Mh(W,Z)})),r=new h.h,c=new h.h,p=new h.h,c.Rc();var M=-1;d=new h.ia(0),g=new h.ia(0),w=null;for(var $=this.g.Gd(),I=this.g.Gd(),R=0,N=a.size;R<N;R++){var j=a.get(R);if(this.g.D(j,n),!n.qb(c)){if(M!=-1){for(var z=M;z<R;z++){M=a.get(z);var D=this.g.U(M);j=this.g.Ma(M);var U=!1;this.g.D(D,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(d.add(M),U=!0,this.g.Ra(M,I,1)),this.g.D(j,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(U||d.add(M),this.g.Ra(M,$,1))}for(z=0,U=d.size;z<U;z++){if(M=d.get(z),j=this.g.Pa(M,$),D=this.g.Pa(M,I),j==1&&(j=this.g.Ma(M),this.g.D(j,p),!p.qb(n))){w==null&&(w=[]);var V=h.h.tb(c,p);w[0]=h.h.tb(p,n)/V,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Ul(j,w,1),j=this.g.Ma(M),this.g.mf(j,n),g.add(j),this.g.Ra(j,$,1),this.g.Ra(j,I,-1)}D==1&&(D=this.g.U(M),this.g.D(D,p),p.qb(n)||(w==null&&(w=[]),V=h.h.tb(c,p),w[0]=h.h.tb(c,n)/V,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Ul(M,w,1),j=this.g.U(M),this.g.mf(j,n),g.add(j),this.g.Ra(j,$,-1),this.g.Ra(j,I,1)))}M=d,d=g,(g=M).clear(!1)}M=R,c.L(n)}}this.g.Td($),this.g.Td(I)}},m.prototype.Nl=function(u,o){for(var r=new h.h,n=null,a=-1,c=0,p=this.dd.size;c<p;c++){var d=this.dd.get(c);if(d!=-1){var g=this.g.U(d);this.g.D(d,r),(u?r.y==o:r.x==o)&&(this.g.D(g,r),(u?r.y==o:r.x==o)&&(a==-1&&(a=this.g.Gd()),n==null&&(n=new h.ia(0)).Jb(100),this.g.Pa(d,a)!=-2&&(n.add(d),this.g.Ra(d,a,-2)),this.g.Pa(g,a)!=-2&&(n.add(g),this.g.Ra(g,a,-2))))}}if(n==null)a!=-1&&this.g.Td(a);else{var w=this;for(n.Vd(0,n.size,(function(Z,it){return w.Mh(Z,it)})),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Ra(x,a,c)}d=new h.h,(g=new h.h).Rc();var M=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.qb(g))){if(M!=-1)for(;;){x=!1;for(var $=1<c-M?c-1:c,I=M;I<$;I++){var R=n.get(I);if(R!=-1){var N=-1,j=this.g.U(R);this.g.D(j,d),0>g.compare(d)&&(u?d.y==o:d.x==o)&&(N=j),j=-1;var z=this.g.Ma(R);if(this.g.D(z,d),0>g.compare(d)&&(u?d.y==o:d.x==o)&&(j=z),N!=-1&&j!=-1)this.Kh(R,n,a),this.g.pd(R,!1),this.Kh(N,n,a),this.g.pd(N,!1),x=!0;else if(N!=-1||j!=-1){for(z=I+1;z<c;z++){var D=n.get(z);if(D!=-1){var U=this.g.U(D),V=-1;this.g.D(U,d),0>g.compare(d)&&(u?d.y==o:d.x==o)&&(V=U),U=this.g.Ma(D);var W=-1;if(this.g.D(U,d),0>g.compare(d)&&(u?d.y==o:d.x==o)&&(W=U),V!=-1&&W!=-1){this.Kh(D,n,a),this.g.pd(D,!1),this.Kh(V,n,a),this.g.pd(V,!1),x=!0;break}if(N!=-1&&W!=-1){this.zt(n,R,N,D,W,a),x=!0;break}if(j!=-1&&V!=-1){this.zt(n,D,V,R,j,a),x=!0;break}}}if(x)break}}}if(!x)break}M=c,g.L(r)}this.g.Td(a)}},m.prototype.Kh=function(u,o,r){r=this.g.Pa(u,r),o.set(r,-1),r=this.g.Pa(u,this.ji),this.dd.set(r,-1),(o=this.g.bd(u))!=-1&&this.g.Xa(o)==u&&(this.g.Jf(o,-1),this.g.Wg(o,-1))},m.prototype.zt=function(u,o,r,n,a,c){this.g.Bc(o,n),this.g.Cc(n,o),this.g.Cc(r,a),this.g.Bc(a,r),this.Kh(n,u,c),this.g.mi(n,!1),this.Kh(a,u,c),this.g.mi(a,!0)},m.prototype.Ty=function(){for(var u=0,o=this.dd.size;u<o;u++){var r=this.dd.get(u);r!=-1&&this.g.aj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.X);c!=-1;){var p=this.g.Xa(c);if(p==-1||c!=this.g.bd(p)){var d=c;c=this.g.Rb(c),this.g.Jf(d,-1),this.g.$q(d)}else{r=p,d=0;do this.g.aj(r,c),d++,r=this.g.U(r);while(r!=p);this.g.cp(c,!1),this.g.Wg(c,this.g.Ma(p)),this.g.Vj(c,d),a+=d,n++,c=this.g.Rb(c)}}for(u=0,o=this.dd.size;u<o;u++)if((r=this.dd.get(u))!=-1&&(c=this.g.bd(r))==-1){c=this.g.vf(this.X,-1),d=0,p=r;do this.g.aj(r,c),d++,r=this.g.U(r);while(r!=p);2>=d?(r=this.g.Pa(p,this.ji),this.dd.set(r,-1),p=this.g.pd(p,!1),d==2&&(0<=(r=this.g.Pa(p,this.ji))&&this.dd.set(r,-1),this.g.pd(p,!1)),d=c,this.g.Jf(d,-1),this.g.$q(d)):(this.g.kn(c,!0),this.g.Vj(c,d),this.g.Jf(c,p),this.g.Wg(c,this.g.Ma(p)),this.g.cp(c,!1),a+=d,n++)}for(this.g.Rl(this.X,n),this.g.Tj(this.X,a),u=0,o=this.g.ld;o!=-1;o=this.g.ue(o))u+=this.g.I(o);this.g.bC(u)},m.By=function(u,o,r,n){return new m(o,n).Ay(u,r)},m.clip=function(u,o,r,n,a){return m.Nu(u,o,null,r,n,a)},m.Nu=function(u,o,r,n,a,c){var p=u.getType();if(p==33)return a=u.D(),o.contains(a)?u:u.Ia();if(p==197)return a=new h.l,u.A(a),a.Ea(o)?(o=new h.Fh,u.copyTo(o),o.Xo(a),o):u.Ia();if(u.B())return u;if(o.B())return u.Ia();var d=new h.l;if(u.xc(d),o.contains(d))return u;if(!o.isIntersecting(d))return u.Ia();if((r!=null||isNaN(n))&&h.ta.ty(r,o,!1),!h.aa.xj(p))throw h.i.N();if((r=u.Bb)!=null&&(r=r.Fk)!=null){if((r=r.Ro(o))==1){if(p!=1736)throw h.i.fa("internal error");return(u=new h.Da(u.description)).tp(o),u}if(r==0)return u.Ia()}switch(p){case 550:for(c=null,p=u.I(),r=u.ub(0),n=0,a=new h.h,d=0;d<p;d++)r.tc(2*d,a),o.contains(a)||(n==0&&(c=u.Ia()),n<d&&c.Fd(u,n,d),n=d+1);return 0<n&&c.Fd(u,n,p),n==0?u:c;case 1736:case 1607:return m.By(u,o,a,c);default:throw h.i.fa("internal error")}},m.prototype.Mh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},m})();h.ri=O})(B||(B={})),(function(h){var O=new h.h,m=(function(){function o(r,n,a,c,p){this.Pm=new h.h,this.Dk=new h.h,this.Pi=new h.h,this.g=r,this.Aw=a,this.no=c,this.Pm=n,this.yl=p,this.Dk.Rc(),this.Pi.Rc()}return o.prototype.xE=function(r){this.g.D(r,this.Dk),r=h.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var n=h.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return u.jG(r,n)},o.prototype.jz=function(r){return this.g.Pa(r,this.yl)},o.prototype.Py=function(r,n){return this.g.D(r,this.Dk),this.g.D(n,this.Pi),u.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},o})();h.sY=function(){};var u=(function(){function o(){this.Pm=new h.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return o.iQ=function(r,n){var a=new o;return a.g=r,a.qa=n,a.Aw=n*n,a.$v=2*n,a.no=1/a.$v,a.BO()},o.Cv=function(r,n,a,c,p){return(r-=a)*r+(n-=c)*n<=p},o.jG=function(r,n){return h.O.Th(n,h.O.Th(r))},o.prototype.DO=function(r,n){this.g.Gc(r,O);for(var a=(O.y-this.Pm.y)*this.no,c=h.O.truncate((O.x-this.Pm.x)*this.no),p=h.O.truncate(a),d=a=0;1>=d;d+=1)for(var g=0;1>=g;g+=1){var w=o.jG(c+d,p+g),x=this.xl.rR(w);x!=-1&&(this.pq[a]=x,this.xs[a]=w,a++)}for(c=a-1;1<=c;c--)for(x=this.pq[c],p=c-1;0<=p;p--)if(x==this.pq[p]){this.xs[p]=-1,c!=--a&&(this.xs[c]=this.xs[a],this.pq[c]=this.pq[a]);break}for(p=0;p<a;p++)this.EO(r,this.xs[p],O,this.pq[p],n)},o.prototype.EO=function(r,n,a,c,p){for(var d=new h.h;c!=-1;c=this.xl.ER(c)){var g=this.xl.ja(c);r==g||n!=-1&&this.g.Pa(g,this.yl)!=n||(this.g.Gc(g,d),o.Cv(a.x,a.y,d.x,d.y,this.Aw)&&p.add(c))}},o.prototype.Xm=function(r,n,a){var c=this.g.Pa(r,this.qo),p=this.g.Pa(n,this.qo);return c==-1&&(c=this.zd.Ph(),this.zd.addElement(c,r),this.g.Ra(r,this.qo,c)),p==-1?this.zd.addElement(c,n):this.zd.Hy(c,p),this.g.Ra(n,this.qo,-2),n=this.YT(r,n),a&&(a=this.kw.xE(r),this.g.Ra(r,this.yl,a)),n},o.WT=function(r,n,a){r.Nb(n),a=r;var c=new h.h;o.XT(r.D(),n.D(),c),a.Cb(c)},o.XT=function(r,n,a){var c=r.x;r.x!=n.x&&(c=(1*r.x+1*n.x)/2);var p=r.y;r.y!=n.y&&(p=(1*r.y+1*n.y)/2),a.ma(c,p)},o.prototype.YT=function(r,n){var a=new h.h;this.g.D(r,a);var c=new h.h;this.g.D(n,c);var p=this.g.cG(r),d=p+(n=this.g.cG(n)),g=0,w=a.x;a.x!=c.x&&(w=(a.x*p+c.x*n)/d,g++);var x=a.y;return a.y!=c.y&&(x=(a.y*p+c.y*n)/d,g++),0<g&&this.g.Cb(r,w,x),this.g.vX(r,d),g!=0},o.prototype.BO=function(){var r=this.g.fd,n=this.g.IF();for(this.Pm=n.mz(),n=Math.max(n.ca(),n.R())/2147483646,this.$v<n&&(this.$v=n,this.no=1/this.$v),this.zd=new h.au,this.zd.At(h.O.truncate(this.g.fd/3+1)),this.zd.fn(h.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new m(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new h.dL(h.O.truncate(4*r/3),this.kw),this.xl.AW(this.g.fd),r=!1,n=this.g.ld;n!=-1;n=this.g.ue(n))for(var a=this.g.Ob(n);a!=-1;a=this.g.Rb(a))for(var c=this.g.Xa(a),p=0,d=this.g.Ja(a);p<d;p++){var g=this.kw.xE(c);this.g.Ra(c,this.yl,g),this.xl.addElement(c,g),c=this.g.U(c)}var w=new h.ia(0);for(w.Jb(10),n=this.g.ld;n!=-1;n=this.g.ue(n))for(a=this.g.Ob(n);a!=-1;a=this.g.Rb(a))for(c=this.g.Xa(a),p=0,d=this.g.Ja(a);p<d;p++){if(this.g.Pa(c,this.qo)!=-2)for(g=this.g.Pa(c,this.yl),this.xl.jd(c,g);this.DO(c,w),w.size!=0;){g=!1;for(var x=0,M=w.size;x<M;x++){var $=w.get(x),I=this.xl.ja($);this.xl.vd($),g=this.Xm(c,I,x+1==M)||g}if(r=r||g,w.clear(!1),!g)break}c=this.g.U(c)}return r&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),r},o.prototype.vN=function(){for(var r=new h.h,n=this.zd.je;n!=-1;n=this.zd.qz(n)){var a=this.zd.rc(n);for(this.g.D(this.zd.ja(a),r),a=this.zd.lb(a);a!=-1;a=this.zd.lb(a))this.g.mf(this.zd.ja(a),r)}},o})();h.Yt=u})(B||(B={})),(function(h){var O=(function(){function m(u){u===void 0&&(u=null),this.yg=null,this.Pb=!1,this.yg=u===null?[]:u}return m.prototype.copyTo=function(u){if(u.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");for(var o=0;o<this.yg.length;o++)u.yg.push(this.yg[o].Of())},m.prototype.count=function(){return this.yg.length},m.prototype.add=function(u){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(u.Of())},m.prototype.clear=function(){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},m.prototype.remove=function(u){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(u,1)},m.prototype.jg=function(){var u=new m;return this.copyTo(u),u},m.prototype.Of=function(){return this.jg()},m.prototype.transform=function(u,o,r,n){if(u.length<o)throw h.i.fa("invalid Argument");var a=r;for(r=0;r<this.yg.length;r++){var c=this.yg[r];if(c.qm()!=null){var p=c.Un,d=p?1:0,g=p?c.qm().getGeogcs2():c.qm().getGeogcs1();if(g=a/(g=g.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(g-1))for(a=0;a<o;a++)u[a][0]*=g,u[a][1]*=g;h.MC.geogToGeog(c.qm(),o,u,null,d),a=(p?c.qm().getGeogcs1():c.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(g=a/n,3552713678800501e-30<Math.abs(g-1))for(a=0;a<o;a++)u[a][0]*=g,u[a][1]*=g;return o},m.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof m)||this.yg.length!=u.yg.length)return!1;for(var o=0;o<this.yg.length;o++)if(!this.yg[o].Nb(u.yg[o]))return!1;return!0},m.prototype.ix=function(){this.Pb=!0},m.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,r=this.count();o<r;++o)u+=this.yg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},m.create=function(){return new m},m})();h.wC=O})(B||(B={})),(function(h){var O,m=Math.PI,u=2*Math.PI,o=Math.PI/2,r=(function(){function c(){}return c.TO=function(p,d){var g=new c;return g.x=p,g.y=d,g.type=0,g.Uh=0,g},c.al=function(p){var d=new c;return d.x=p.x,d.y=p.y,d.type=0,d.Uh=0,d},c.SO=function(p){var d=new c;return d.x=p.x,d.y=p.y,d.type=p.type,d.Uh=p.Uh,d},c.Pd=function(p,d,g){var w=new c;return w.x=p.x+d*Math.cos(g),w.y=p.y+d*Math.sin(g),w.type=p.type,w.Uh=p.Uh,w},c.Pu=function(p,d){var g=new c;return g.x=.5*(p.x+d.x),g.y=.5*(p.y+d.y),g.type=p.type,g.Uh=p.Uh,g},c.TE=function(p,d){var g=new c;return g.x=p.x+.001*(d.x-p.x),g.y=p.y+.001*(d.y-p.y),g.type=p.type,g.Uh=p.Uh,g},c})(),n=function(){};(O=h.fL||(h.fL={}))[O.Round=0]="Round",O[O.Bevel=1]="Bevel",O[O.Miter=2]="Miter",O[O.Square=3]="Square";var a=(function(){function c(p){this.NA=this.Yb=this.wg=null,this.nd=p}return c.V=function(p,d,g,w,x,M){if(p==null||1>p.Db())throw h.i.N();return d==0||p.B()?p:((M=new c(M)).ko=p,M.Ka=d,M.qa=x,M.Ki=g,M.CA=w,M.Rx())},c.prototype.eM=function(){var p=this.ko,d=p.ac(),g=p.wc(),w=new h.h;return w.uc(g,d),w.normalize(),w.Hv(),w.scale(this.Ka),d.add(w),g.add(w),w=p.Ia(),p.Dc(d),p.Qc(g),w},c.prototype.dM=function(){var p=this.ko;if(0<this.Ka&&this.Ki!=2){var d=new h.Da;return d.ad(p,!1),this.ko=d,this.Rx()}return(p=new h.Fh(p.$)).W(this.Ka,this.Ka),p},c.prototype.tJ=function(p,d,g,w){return(d.x-p.x)*(w.x-g.x)+(d.y-p.y)*(w.y-g.y)},c.prototype.fc=function(p,d){if(d===void 0)this.Yb.push(p),this.gf++;else if(this.gf==0)this.fc(p);else{var g=this.Bw,w=this.wg[d==0?g-1:d-1],x=this.wg[d],M=this.tJ(w,x,this.Yb[this.gf-1],p);0<M?this.fc(p):0>M&&(0<this.tJ(w,x,x,this.Yb[this.gf-1])?(x=this.wg[d==0?g-2:d==1?g-1:d-2],g=r.Pd(w,this.Ka,Math.atan2(w.y-x.y,w.x-x.x)-o),this.Yb[this.gf-1]=g,this.Ki==1||this.Ki==2?(g=r.Pu(g,w),this.fc(g),g=r.Pd(w,this.Ka,this.Jv+o),(w=r.Pu(g,w)).type|=256,this.fc(w)):(g=r.Pd(w,this.Ka,this.Jv+o)).type|=256,this.fc(g),this.fc(p,d)):(g=r.Pd(x,this.Ka,this.Jv+o),this.fc(g),this.Ki==1||this.Ki==2?(g=r.Pu(g,x),this.fc(g),g=r.Pd(x,this.Ka,this.aA-o),(w=r.Pu(g,x)).type|=256,this.fc(w)):(g=r.Pd(x,this.Ka,this.aA-o)).type|=256,this.fc(g)))}},c.prototype.mE=function(){var p,d=this.Bw;this.gf=0;var g=.5*this.qa,w=0,x=0;for(p=0;p<d;p++){var M=this.wg[p],$=p==0?this.wg[d-1]:this.wg[p-1],I=p==d-1?this.wg[0]:this.wg[p+1],R=$.x-M.x,N=$.y-M.y,j=I.x-M.x,z=I.y-M.y,D=Math.atan2(N,R),U=Math.atan2(z,j);if(this.Jv=D,this.aA=U,p==0&&(w=D,x=U),R=R*z-j*N,N=U,U<D&&(U+=u),0<R*this.Ka)this.Ki==1||this.Ki==2?(D=r.Pd(M,this.Ka,D+o),this.fc(D),D=r.TE(M,D),this.fc(D),D=r.Pd(M,this.Ka,U-o),(M=r.TE(M,D)).type|=256,this.fc(M),this.fc(D)):(R=.5*(U-D),R=this.Ka/Math.abs(Math.sin(R)),D=r.Pd(M,R,.5*(D+U)),this.fc(D,p));else if(512&M.type){for(R=1-g/Math.abs(this.Ka),$=1,I=0>this.Ka?-m:m,-1<R&&1>R&&(.017453292519943295>(N=2*Math.acos(R))&&(N=.017453292519943295),1<($=h.O.truncate(m/N+1.5))&&(I/=$)),N=D+o,D=r.Pd(M,this.Ka,N),p==0&&(D.type|=1024),this.fc(D,p),R=this.Ka/Math.cos(I/2),N+=I/2,(D=r.Pd(M,R,N)).type|=1024,this.fc(D);0<--$;)N+=I,(D=r.Pd(M,R,N)).type|=1024,this.fc(D);(D=r.Pd(M,this.Ka,U-o)).type|=1024,this.fc(D)}else if(this.Ki==1)D=r.Pd(M,this.Ka,D+o),this.fc(D,p),D=r.Pd(M,this.Ka,U-o),this.fc(D);else if(this.Ki==0)for(R=1-g/Math.abs(this.Ka),$=1,I=U-o-(D+o),-1<R&&1>R&&(.017453292519943295>(N=2*Math.acos(R))&&(N=.017453292519943295),1<($=h.O.truncate(Math.abs(I)/N+1.5))&&(I/=$)),R=this.Ka/Math.cos(.5*I),N=D+o+.5*I,D=r.Pd(M,R,N),this.fc(D,p);0<--$;)N+=I,D=r.Pd(M,R,N),this.fc(D);else this.Ki==2?(R=$.x-M.x,N=$.y-M.y,.99999999<($=(R*(j=I.x-M.x)+N*(z=I.y-M.y))/Math.sqrt(R*R+N*N)/Math.sqrt(j*j+z*z))?(D=r.Pd(M,1.4142135623730951*this.Ka,U-.25*m),this.fc(D,p),D=r.Pd(M,1.4142135623730951*this.Ka,U+.25*m),this.fc(D)):($=Math.abs(this.Ka/Math.sin(.5*Math.acos($))))>(I=Math.abs(this.CA*this.Ka))?(R=.5*(U-D),R=this.Ka/Math.abs(Math.sin(R)),D=r.Pd(M,R,.5*(D+U)),U=h.h.construct(D.x,D.y),D=h.h.construct(M.x,M.y),(M=new h.h).uc(U,D),(U=new h.h).HW(I/M.length(),M,D),D=($-I)*Math.abs(this.Ka)/Math.sqrt($*$-this.Ka*this.Ka),0<this.Ka?M.Hv():M.ar(),M.scale(D/M.length()),(D=new h.h).add(U,M),($=new h.h).uc(U,M),D=r.al(D),this.fc(D,p),D=r.al($),this.fc(D)):(R=.5*(U-D),R=this.Ka/Math.abs(Math.sin(R)),D=r.Pd(M,R,.5*(D+U)),this.fc(D,p))):(U=N,0<this.Ka?(U>D&&(U-=u),$=D-U<o):(U<D&&(U+=u),$=U-D<o),$?(N=0>(R=1.4142135623730951*this.Ka)?D+.25*m:D+.75*m,D=r.Pd(M,R,N),this.fc(D,p),N=0>R?U-.25*m:U-.75*m,D=r.Pd(M,R,N),this.fc(D)):(R=.5*(U-D),R=this.Ka/Math.abs(Math.sin(R)),U<D&&(U+=u),D=r.Pd(M,R,(D+U)/2),this.fc(D,p)))}return this.Jv=w,this.aA=x,this.fc(this.Yb[0],0),M=r.SO(this.Yb[this.gf-1]),this.Yb[0]=M,this.wW()},c.prototype.Au=function(p,d){if(!(2>d))for(var g=0;g<d;g++){var w=this.Yb[p+g];g!=0?this.NA.Ci(h.h.construct(w.x,w.y)):this.NA.Lt(h.h.construct(w.x,w.y))}},c.prototype.fM=function(p,d,g){var w=p.Ba(d),x=p.Vc(d);if(this.Yb=[],this.NA=g,p.dc(d)){for(d=p.Na(w);p.Na(x-1).qb(d);)x--;if(2<=x-w){for(this.Bw=x-w,this.wg=[],d=w;d<x;d++)this.wg.push(r.al(p.Na(d)));this.mE()&&this.Au(0,this.gf-1)}}else{for(d=p.Na(w);w<x&&p.Na(w+1).qb(d);)w++;for(d=p.Na(x-1);w<x&&p.Na(x-2).qb(d);)x--;if(2<=x-w){for(this.Bw=2*(x-w)-2,this.wg=[],(g=r.al(p.Na(w))).type|=1536,this.wg.push(g),d=w+1;d<x-1;d++)g=r.al(p.Na(d)),this.wg.push(g);for((g=r.al(p.Na(x-1))).type|=512,this.wg.push(g),d=x-2;d>=w+1;d--)(g=r.al(p.Na(d))).type|=1024,this.wg.push(g);if(this.mE())if(2<=this.Yb.length){for(p=-1,(x=!!(1024&this.Yb[this.gf-1].type))||(p=0),d=1;d<this.gf;d++)(w=!!(1024&this.Yb[d].type))?x||1<(x=d-1)-p+1&&this.Au(p,x-p+1):x&&(p=d-1),x=w;x||1<(x=this.gf-1)-p+1&&this.Au(p,x-p+1)}else p=0,x=this.gf-1,0<=p&&1<=x-p&&this.Au(p,x-p+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},c.prototype.wW=function(){for(var p=!1,d=0;d<this.gf;d++){var g=this.Yb[d];g.qh=d+1,g.sh=d-1,this.Yb[d]=g}for((g=this.Yb[0]).sh=this.gf-2,this.Yb[0]=g,(g=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=g,d=g=0;d<this.gf;d++)if(256&this.Yb[g].type){var w=this.GP(g);if(w==-1){p=!0;break}g=w}else g=this.Yb[g].qh;return!p&&(this.QO(g),!0)},c.prototype.GP=function(p){for(var d,g,w=this.gf-1,x=p,M=1;M<=w-2;M++){d=x=this.Yb[x].qh,g=p;for(var $=1;$<=M;$++){if(g=this.Yb[g].sh,!(256&this.Yb[g].type||256&this.Yb[d].type)){var I=this.gS(g,d);if(I!=-1)return I}d=this.Yb[d].sh}}return-1},c.prototype.gS=function(p,d){var g=this.Yb[this.Yb[p].sh],w=this.Yb[p],x=this.Yb[this.Yb[d].sh],M=this.Yb[d];if(!this.JW(g,w,x,M))return-1;var $=new n;return this.xQ(g,w,x,M,$)&&!$.bE&&h.O.bK((w.x-g.x)*(M.y-x.y)-(w.y-g.y)*(M.x-x.x))!=h.O.bK(this.Ka)?(g=this.Yb[p].sh,$.an.type=w.type,$.an.qh=d,$.an.sh=g,this.Yb[p]=$.an,$.an=this.Yb[d],$.an.sh=p,this.Yb[d]=$.an,d):-1},c.prototype.JW=function(p,d,g,w){return Math.max(p.x,d.x)>=Math.min(g.x,w.x)&&Math.max(g.x,w.x)>=Math.min(p.x,d.x)&&Math.max(p.y,d.y)>=Math.min(g.y,w.y)&&Math.max(g.y,w.y)>=Math.min(p.y,d.y)},c.prototype.xQ=function(p,d,g,w,x){x.bE=!1;var M=(d.y-p.y)*(w.x-g.x)-(d.x-p.x)*(w.y-g.y),$=(g.y-p.y)*(d.x-p.x)-(g.x-p.x)*(d.y-p.y);if(0<=(M=M==0?2:$/M)&&1>=M){var I=M;if(M=(w.y-g.y)*(d.x-p.x)-(w.x-g.x)*(d.y-p.y),$=(p.y-g.y)*(w.x-g.x)-(p.x-g.x)*(w.y-g.y),0<=(M=M==0?2:$/M)&&1>=M)return x.an=r.TO(p.x+M*(d.x-p.x),p.y+M*(d.y-p.y)),x.an.Uh=g.Uh+I*(w.Uh-g.Uh),I!=0&&I!=1||M!=0&&M!=1||(x.bE=!0),x.VY=M,x.WY=I,!((I==0||I==1)&&0<M&&1>M||(M==0||M==1)&&0<I&&1>I)}return!1},c.prototype.QO=function(p){for(;this.Yb[p].sh<p;)p=this.Yb[p].sh;var d=0,g=p;do g=this.Yb[g],this.Yb[d]=g,g=g.qh,d++;while(g!=p);this.Yb[d]=this.Yb[0],this.gf=d+1},c.prototype.$C=function(p){var d=this.ko,g=d.Ga();if(g!=null){g.Zi();for(var w=-1;g.$a();)w++,this.fM(d,w,p)}},c.prototype.Rx=function(){var p=this.ko.getType();return p==322?this.eM():p==197?this.dM():h.aa.yd(p)?((p=new h.Ta).oc(this.ko,!0),this.ko=p,this.Rx()):p==1607?(p=new h.Ta,this.$C(p),p):p==1736?(p=new h.Da,this.$C(p),p):null},c})();h.IK=a})(B||(B={})),(function(h){var O=(function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){this.qk.g.D(n,a)},r.prototype.vd=function(n){var a=this.qk.Fa.ja(n);this.qk.Fa.vd(n,-1),this.qk.g.pd(a,!1)},r})(),m=(function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){this.qk.IT.D(n,a)},r.prototype.vd=function(n){this.qk.Fa.vd(n,-1)},r})(),u=(function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){a.L(this.qk.LT[n])},r.prototype.vd=function(n){this.qk.Fa.vd(n,-1)},r})(),o=(function(){function r(n){n===void 0?(this.Fa=new h.Yj,this.Fa.De(20),this.g=new h.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new O(this)):n instanceof Array?(this.Fa=new h.Yj,this.Fa.De(20),this.LT=n,this.Xh=new u(this)):(this.Fa=new h.Yj,this.Fa.De(20),this.IT=n,this.Xh=new m(this))}return r.prototype.Ib=function(n){var a=n.getType();if(h.Gx.xj(a))this.jN(n);else if(h.Vk.yd(a))this.oN(n);else if(a==197)this.gN(n);else{if(a!=33)throw h.i.N("invalid shape type");this.nN(n)}},r.prototype.cR=function(){var n=new h.Sa,a=this.Fa.rc(-1),c=new h.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(a),n),c.nf(n),a=this.Fa.lb(a);a!=-1;a=this.Fa.lb(a))this.g.Vi(this.Fa.ja(a),n),c.lineTo(n);return c},r.RO=function(n){var a=new r(n),c=n.I(),p=1,d=new h.h,g=new h.h,w=new h.h;for(n.D(0,d);n.D(p,g),g.Rz(d)&&p<c-1;)p++;for(a.Fa.addElement(0,-1),a.Fa.xn(p),c=p+1;c<n.I();c++)n.D(c,w),(p=a.pC(w))!=-1&&a.Fa.Sj(p,c);for(w=new h.Sa,p=a.Fa.rc(-1),c=new h.Da(n.description),n.ve(a.Fa.ja(p),w),c.nf(w),p=a.Fa.lb(p);p!=-1;p=a.Fa.lb(p))n.ve(a.Fa.ja(p),w),c.lineTo(w);return c},r.construct=function(n,a,c){for(var p=new r(n),d=1,g=n[0];n[d].Rz(g)&&d<a-1;)d++;for(p.Fa.addElement(0,-1),p.Fa.xn(d),d+=1;d<a;d++)(g=p.pC(n[d]))!=-1&&p.Fa.Sj(g,d);for(n=0,a=p.Fa.rc(-1);a!=-1;a=p.Fa.lb(a))c[n++]=p.Fa.ja(a);return n},r.JG=function(n,a){var c=n.Ba(a),p=n.Vc(a);if(a=!n.dc(a)&&n.Nn(a),n=n.ub(0),p*=2,a&&(p-=2),6>p-(c*=2))return!0;a=new h.h;var d=new h.h,g=new h.h;n.tc(c,a),n.tc(c+2,d),n.tc(c+4,g);var w=r.Wu(d,g,a);if(w.ps()||!r.um(w.value()))return!1;var x=h.h.construct(d.x,d.y),M=new h.h;for(c+=6;c<p;c+=2)if(M.L(d),d.L(g),n.tc(c,g),(w=r.Wu(d,g,a)).ps()||!r.um(w.value())||(w=r.Wu(x,g,a)).ps()||!r.um(w.value())||(w=r.Wu(d,g,M)).ps()||!r.um(w.value()))return!1;return!0},r.prototype.jN=function(n){for(var a=new h.Sa,c=new h.h,p=0;p<n.I();p++){n.D(p,c);var d=this.Cr(c);if(d!=-1){n.ve(p,a);var g=this.g.fc(this.Ss,a);this.Fa.Sj(d,g)}}},r.prototype.gN=function(n){for(var a=new h.Sa,c=new h.h,p=0;4>p;p++){n.mB(p,c);var d=this.Cr(c);if(d!=-1){n.Hf(p,a);var g=this.g.fc(this.Ss,a);this.Fa.Sj(d,g)}}},r.prototype.oN=function(n){var a=new h.Sa,c=n.ac();if((c=this.Cr(c))!=-1){n.To(a);var p=this.g.fc(this.Ss,a);this.Fa.Sj(c,p)}c=n.wc(),(c=this.Cr(c))!=-1&&(n.Po(a),n=this.g.fc(this.Ss,a),this.Fa.Sj(c,n))},r.prototype.nN=function(n){var a=n.D();(a=this.Cr(a))!=-1&&(n=this.g.fc(this.Ss,n),this.Fa.Sj(a,n))},r.prototype.Cr=function(n){var a=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var c=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return n.Rz(c)||(a=this.Fa.xn(-5)),a}return this.pC(n)},r.prototype.pC=function(n){var a=-1;do{var c=this.Fa.rc(-1),p=this.Fa.Fc(-1),d=this.Fa.ja(c),g=this.Fa.ja(p),w=new h.h,x=new h.h;if(this.Xh.D(d,w),this.Xh.D(g,x),d=h.h.Uq(x,n,w),r.um(d))a=this.Fa.xn(-1),(w=this.nC(n,p,c))!=c&&this.oC(n,c,this.Fa.we(w));else if(r.CG(d)){x=this.Fa.sv(-1);var M=this.Fa.rc(-1),$=this.Fa.Fc(-1);for(d=new h.h,g=new h.h;M!=this.Fa.we($);){var I=this.Fa.ja(x);this.Xh.D(I,d),I=h.h.Uq(d,n,w),r.CG(I)?($=x,x=this.Fa.ll(x)):(M=x,x=this.Fa.Xp(x))}if(x=$,w=M,I=this.Fa.ja(x),M=this.Fa.ja(w),this.Xh.D(I,d),this.Xh.D(M,g),w!=c&&(d=h.h.Uq(g,n,d),!r.um(d)))continue;a=this.Fa.zu(w,x,-2,!1),this.oC(n,x,p),this.nC(n,w,c)}else this.sb==null&&(this.sb=new h.yb),this.sb.Dc(x),this.sb.Qc(w),0>(w=this.sb.fe(n,!0))?(w=this.Fa.we(p),this.Fa.vd(p,-1),a=this.Fa.xn(-3),this.nC(n,w,c)):1<w&&(w=this.Fa.lb(c),this.Fa.vd(c,-1),a=this.Fa.zu(-1,w,-3,!1),this.oC(n,w,p))}while(!1);return a},r.prototype.oC=function(n,a,c){if(a!=c){var p=this.Fa.ja(a),d=this.Fa.lb(a),g=new h.h,w=new h.h;for(this.Xh.D(p,g);a!=c&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(d),w),p=h.h.Uq(w,n,g),!r.um(p));)p=a,a=d,g.L(w),d=this.Fa.lb(a),this.Xh.vd(p)}},r.prototype.nC=function(n,a,c){if(a==c)return c;var p=this.Fa.ja(a),d=this.Fa.we(a),g=new h.h,w=new h.h;for(this.Xh.D(p,g);a!=c&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(d),w),p=h.h.Uq(g,n,w),!r.um(p));)p=a,a=d,g.L(w),d=this.Fa.we(a),this.Xh.vd(p);return a},r.Wu=function(n,a,c){var p=new h.Wb;p.set(a.x),p.sub(n.x);var d=new h.Wb;d.set(c.y),d.sub(n.y);var g=new h.Wb;return g.set(a.y),g.sub(n.y),(a=new h.Wb).set(c.x),a.sub(n.x),p.Ag(d),g.Ag(a),p.sub(g),p},r.um=function(n){return 0>n},r.CG=function(n){return 0<n},r})();h.Zt=o})(B||(B={})),(function(h){var O=(function(){function m(u){this.g=null,this.tH=!0,this.nd=u}return m.zU=function(u,o,r){return u=h.ta.Er(u),h.Yt.Cv(o.Lg(),o.ih(),r.Lg(),r.ih(),h.lc.ox(u))},m.CO=function(u,o){var r=new h.Sa;return h.Yt.WT(u,o,r),r},m.V=function(u,o,r,n){return(r=new m(r)).g=u,r.qa=o,r.tH=n,r.EM()},m.prototype.nM=function(u){return h.Yt.iQ(this.g,u)},m.prototype.sM=function(u){return h.$t.V(this.g,u,this.nd)},m.prototype.EM=function(){var u=this.qa,o=h.ta.Er(u),r=1.00001*(u=h.ta.rN(u));u*=1.000001;for(var n=!1,a=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),c=0,p=this.g.jS();;c++){if(c>a)throw h.i.fa("Internal Error: max number of iterations exceeded");var d=this.nM(o);if(n=n||d,this.tH&&(d=this.g.Gp(o,!0,!1)!=0,n=n||d),d=!1,(c==0||p||h.$t.kI(!0,this.g,u,null,this.nd))&&(d=this.sM(r),n=n||d),!d)break;h.mp.zp(this.nd)}return n},m})();h.Tk=O})(B||(B={})),(function(h){var O=(function(){function u(o){this.$d=this.Mc=null,this.Ys=0,this.Ub=o,this.cA=!0}return u.prototype.uv=function(o,r){var n=this.g.bc(o);if(n==null){if(!this.g.ed(o,r))return null;n=r}return n},u.prototype.Xq=function(){var o;o===void 0&&(o=!1),this.Ys++,!o&&4095&this.Ys||(this.Ys=0,h.mp.zp(this.Ub))},u.prototype.nP=function(){var o=this.g.Yq(!1),r=!1,n=new h.yb,a=new h.yb,c=new h.l;c.Oa();var p=new h.l;p.Oa();for(var d=new h.Sa,g=new h.TC,w=o.next();w!=-1;w=o.next()){h.mp.zp(this.Ub);var x=null,M=!1;if(!h.aa.Rn(this.g.ic(o.ck))){if((x=this.uv(w,n))==null)continue;if(x.A(c),c.W(this.qa,this.qa),x.Bi(this.qa)){if(!x.Bi(0))continue;M=!0,x=null}}var $=this.g.Yq(o),I=$.next();for(I!=-1&&(I=$.next());I!=-1;I=$.next()){var R=null,N=!1;if(!h.aa.Rn(this.g.ic($.ck))){if((R=this.uv(I,a))==null)continue;if(R.A(p),R.Bi(this.qa)){if(!R.Bi(0))continue;N=!0,R=null}}var j=0,z=0;if(x!=null&&R!=null)c.HG(p)&&(g.Oo(x),g.Oo(R),g.Ea(this.qa,!1),0<(j=g.ol(0))+(z=g.ol(1))&&(this.g.jr(w,g,0,!0),this.g.jr(I,g,1,!0)),g.clear());else if(x!=null){var D=new h.h;if(this.g.D(I,D),c.contains(D)){if(g.Oo(x),this.g.Vi(I,d),g.Kz(this.qa,d,!1),0<(j=g.ol(0)))if(this.g.jr(w,g,0,!0),N){for(N=-1,D=this.g.U(I);D!=-1&&D!=I&&(N=D,(R=this.uv(D,a))!=null&&R.Bi(0));D=this.g.U(D));for(D=I;D!=-1&&(this.g.Dh(D,g.Bf),D!=N);D=this.g.U(D));}else this.g.Dh(I,g.Bf);g.clear()}}else{if(R==null)continue;if(D=new h.h,this.g.D(w,D),p.W(this.qa,this.qa),p.contains(D)){if(g.Oo(R),this.g.Vi(w,d),g.Kz(this.qa,d,!1),0<(z=g.ol(0)))if(this.g.jr(I,g,0,!0),M){for(N=-1,D=this.g.U(w);D!=-1&&D!=w&&(N=D,(R=this.uv(D,a))!=null&&R.Bi(0));D=this.g.U(D));for(D=w;D!=-1&&(this.g.Dh(D,g.Bf),D!=N);D=this.g.U(D));}else this.g.Dh(w,g.Bf);g.clear()}}if(j+z!=0){if(j!=0){if((x=this.g.bc(w))==null){if(!this.g.ed(w,n))continue;x=n,n.A(c)}else x.A(c);if(x.Bi(this.qa))break}r=!0}}}return r},u.prototype.oP=function(){return this.QU()},u.prototype.QU=function(){return new h.RC().PX(this.g,this.qa)},u.prototype.lI=function(){var o=!1;this.Mc==null&&(this.Mc=new h.Yj);var r=new h.ia(0);r.Jb(this.g.fd+1);for(var n=this.g.Yq(),a=n.next();a!=-1;a=n.next())r.add(a);this.g.nx(r,r.size),r.add(-1),n=this.g.Gd(),a=this.g.Gd(),this.$d=new h.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var c=new h.ia(0),p=new h.ia(0),d=0;new h.h;var g=this.g.td;this.g.vb.mc();for(var w,x,M=this.g.vb.za[0].o,$=r.get(d++);$!=-1;){var I=w=M[2*(x=g.T($,0))],R=x=M[2*x+1];do{var N=g.T($,2),j=g.T($,1);if(N!=-1){var z=g.T(N,0),D=M[2*z];0>(R<(z=M[2*z+1])?-1:R>z?1:I<D?-1:I>D?1:0)&&(p.add($),p.add(N))}j!=-1&&(D=M[2*(z=g.T(j,0))],0>(R<(z=M[2*z+1])?-1:R>z?1:I<D?-1:I>D?1:0)&&(p.add(j),p.add(j))),(D=this.g.Pa($,n))!=-1&&(c.add(D),this.g.Ra($,n,-1)),(D=this.g.Pa($,a))!=-1&&(c.add(D),this.g.Ra($,a,-1)),($=r.get(d++))!==-1&&(I=M[2*(R=g.T($,0))],R=M[2*R+1])}while($!=-1&&I===w&&R===x);for(I=c.size==1&&p.size==2,D=R=-1,N=0,j=c.size;N<j;N++){z=c.get(N);var U=this.Mc.we(z);if(U==-1||c.hG(U)||(R=U),(z=this.Mc.lb(z))==-1||c.hG(z)||(D=z),R!=-1&&D!=-1)break}for(this.$d.$J(x,w),N=0,j=c.size;N<j;N++)z=c.get(N),this.Mc.vd(z,-1);if(c.clear(!1),!I&&R!=-1&&D!=-1&&this.qO(R,D)){o=!0,this.Ni=this.$d.rm();break}for(N=0,j=p.size;N<j;N+=2){if(x=p.get(N),w=p.get(N+1),I?(x=this.Mc.zu(R,D,x,!0),I=!1):x=this.Mc.addElement(x,-1),this.$d.rg){this.Ni=this.$d.rm(),o=!0;break}this.g.Pa(w,n)==-1?this.g.Ra(w,n,x):this.g.Ra(w,a,x)}if(o)break;p.Bh(0)}return this.g.Td(n),this.g.Td(a),o},u.prototype.qO=function(o,r){return this.$d.compare(this.Mc,this.Mc.ja(o),r),o=this.$d.rg,this.$d.Kr(),o},u.yE=function(o){for(var r=o.ld;r!=-1;r=o.ue(r))if(h.aa.Hc(o.ic(r)))return!0;return!1},u.fQ=function(o,r,n,a){return!!u.yE(o)&&((r=new u(a)).g=o,r.qa=n,15>o.fd?o=r.nP():r.oP())},u.V=function(o,r,n){return u.fQ(o,o.IF(),r,n)},u.kI=function(o,r,n,a,c){if(!u.yE(r))return!1;var p=new u(c);if(p.g=r,p.qa=n,p.cA=o,p.lI())return a?.Wt(p.Ni),!0;var d=new h.Dd;return d.$B(),r.Oc(d),(p=new u(c)).g=r,p.qa=n,p.cA=o,o=p.lI(),d.$B(),r.Oc(d),!!o&&(a?.Wt(p.Ni),!0)},u.Ml=function(o,r){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*r<1*o*r},u.lP=function(o,r,n,a){var c=r.getType();if(h.aa.Hc(c))return new u(a).mP(o,r,n);throw h.i.fa("crack_A_with_B")},u.prototype.mP=function(o,r,n){var a=new h.l;o.xc(a);var c=new h.l;if(r.xc(c),c.W(n,n),!c.isIntersecting(a))return o;var p=o.Bb,d=null;p!=null&&(d=p.Fb),u.Ml(o,o.I())&&(d=h.ta.jj(o,c));var g=d!=null?d.getIterator():null,w=r.Ga();r=o.Ga();var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];w.$a();)for(;w.Ha();){var M=w.ha();if(d!=null){for(g.Uo(M,n),p=g.next();p!=-1;p=g.next())if(this.Xq(),r.Vb(d.ja(p),-1),r.Ha()){var $=(p=r.ha()).Ea(M,null,x,null,n);for(p=0;p<$;++p){var I=x[p];if(I!=0&&I!=1){var R=r.wb(),N=new m;N.t=I,N.index=R,c.push(N)}}}}else{var j=new h.l;if(M.xc(j),j.W(n,n),a.isIntersecting(j)){for(r.Zi();r.$a();)for(;r.Ha();)if(this.Xq(),p=r.ha(),I=new h.l,p.xc(I),I.isIntersecting(j))for($=p.Ea(M,null,x,null,n),p=0;p<$;++p)(I=x[p])!=0&&I!=1&&(R=r.wb(),(N=new m).t=I,N.index=R,c.push(N))}}}if(c.length==0)return o;for(c=c.sort(m.Ey),o=o.Ia(),r.Zi();r.$a()&&!r.Ha(););for(n=r.ha(),a=new h.ig,d=-1,p=0,g=c.length;p<g;){for(x=c[p].index,w=p+1;w<g&&c[w].index==x;)++w;for(;r.wb()<x;){if(this.Xq(),M=r.Ha(),I=r.gb,(j=M||!r.On()||r.Pn())&&o.oc(n,d!=I),d=I,!M)for(;r.$a()&&!r.Ha(););n=r.ha()}for(x=0;p<w;p++)(I=c[p].t)!=x&&(n.ah(x,I,a),x=I,I=r.gb,o.oc(a.get(),d!=I),d=I);if((j=(M=r.Ha())||!r.On()||r.Pn())&&(n.ah(x,1,a),o.oc(a.get(),!1)),M)n=r.ha();else{for(;r.$a()&&!r.Ha(););n=r.Ha()?r.ha():null}p=w}for(n!=null&&(I=r.gb,(j=(M=r.Ha())||!r.On()||r.Pn())&&o.oc(n,d!=I),d=I),M=r.Ha();;){if(!M){for(;r.$a()&&!(M=r.Ha()););if(!M)break}n=r.ha(),I=r.gb,(j=(M=r.Ha())||!r.On()||r.Pn())&&o.oc(n,d!=I),d=I}return o},u})();h.$t=O;var m=(function(){function u(){}return u.Ey=function(o,r){return o.index==r.index?o.t>r.t?1:o.t<r.t?-1:0:o.index>r.index?1:-1},u})()})(B||(B={})),(function(h){var O;(O=h.KK||(h.KK={}))[O.Left=0]="Left",O[O.Right=1]="Right",O[O.Coincident=2]="Coincident",O[O.Undefined=3]="Undefined",O[O.Uncut=4]="Uncut";var m=function(r,n,a,c,p,d,g,w,x,M,$){this.X=r,this.bt=n,this.Ns=a,this.tg=c,this.Lm=M,this.Al=$};h.uY=m;var u=(function(){function r(n,a){this.JH=n,this.Hi=a}return r.prototype.qM=function(n,a){var c=new h.h;this.Hi.D(n,c);var p=new h.h;return this.Hi.D(a,p),(c=c.compare(p))!=0?c:(n=this.Hi.Pa(n,this.JH))<(a=this.Hi.Pa(a,this.JH))?-1:n==a?0:1},r})(),o=function(r,n,a,c,p,d,g,w,x){this.tg=r,this.Ns=n,this.OA=a,this.UH=c,this.Ei=p,this.Al=d,this.Lm=g,this.VH=w,this.OT=x};h.tY=o,h.LK=(function(){function r(){}return r.JK=function(n,a,c,p,d,g){if(a.B())n=new m(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),d.push(n);else if(c.B())n=new m(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),d.push(n);else{var w=new h.gd;if(w.Ib(a),w.Ib(c),h.Tk.V(w,p,g,!0),w.fd==0)n=new m(a.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),d.push(n);else{for(a=0,c=w.Gd(),p=w.ld;p!=-1;p=w.ue(p))for(g=w.Ob(p);g!=-1;g=w.Rb(g))for(var x=w.Xa(g),M=0,$=w.Ja(g);M<$;x=w.U(x),M++)w.Ra(x,c,a++);a=r.HM(c,w),r.cM(n,a,w,d)}}},r.HM=function(n,a){for(var c=a.fd,p=new h.ia(0),d=a.ld;d!=-1;d=a.ue(d))for(var g=a.Ob(d);g!=-1;g=a.Rb(g))for(var w=a.Xa(g),x=0,M=a.Ja(g);x<M;w=a.U(w),x++)p.add(w);var $=new u(n,a);p.Vd(0,c,(function(dt,ft){return $.qM(dt,ft)})),n=[];var I=[],R=a.Gd(),N=a.Gd();d=a.ld,g=a.ue(d),M=new h.h;var j=new h.h,z=p.get(0),D=a.bd(z),U=a.Qf(D);a.D(z,M);var V=1;for(w=0;V<c-1;){var W=!1;for(x=V;x<c;x++)if(x!=w){var Z=p.get(x),it=a.bd(Z),ot=a.Qf(it);if(a.D(Z,j),!M.qb(j))break;U==d&&ot==g&&(W=r.uM(R,N,a,n,I,D,z,it,Z))}if(W||w==V-1){if(W&&w==V-1&&V--,++w==c)break;z=p.get(w),D=a.bd(z),U=a.Qf(D),a.D(z,M)}W||(V=w+1)}for(c=[],d=a.ld;d!=-1;d=a.ue(d))for(g=a.Ob(d);g!=-1;g=a.Rb(g))for(p=a.Xa(g),x=0,M=a.Ja(g);x<M;p=a.U(p),x++){if(0<=(w=a.Pa(p,N)))for(;w<I.length&&I[w].tg==p;)c.push(I[w++]);if(0<=(w=a.Pa(p,R)))for(;w<n.length&&n[w].tg==p;)c.push(n[w++])}return a.Td(R),a.Td(N),c},r.uM=function(n,a,c,p,d,g,w,x,M){var $=c.rj(g),I=c.rj(x),R=c.Xa(g),N=c.Xa(x),j=c.Ma(w),z=c.Ma(M),D=!1,U=!1,V=!1,W=!1;return w!=R&&(M!=N&&(D=r.vM(n,c,p,g,j,x,z)),M!=I&&(U=r.wM(n,c,p,g,j,x,M))),w!=$&&(M!=N&&(V=r.xM(a,c,d,g,w,x,z,R)),M!=I&&(W=r.yM(a,c,d,g,w,x,M,R))),D&&U&&V?(n=p.length-1,d[W?d.length-2:d.length-1].Ei==2&&(p[n-1]=p[n],--p.length)):D&&U&&W&&d[d.length-1].Ei==2&&(d=p[p.length-1],--p.length,c.Pa(d.tg,n)==p.length&&c.Ra(d.tg,n,-1)),D||U||V||W},r.vM=function(n,a,c,p,d,g,w){var x=new h.yb,M=new h.yb,$=[0,0],I=[0,0],R=a.bc(d);return R==null&&(a.ed(d,x),R=x),(x=a.bc(w))==null&&(a.ed(w,M),x=M),2>(R=R.Ea(x,null,$,I,0))&&(p=new o(d,p,$[0],NaN,R,w,g,I[0],NaN),c.push(p),0>(p=a.Pa(d,n))&&a.Ra(d,n,c.length-1)),!0},r.wM=function(n,a,c,p,d,g,w){var x=new h.yb,M=new h.yb,$=[0,0],I=[0,0],R=a.bc(d);return R==null&&(a.ed(d,x),R=x),(x=a.bc(w))==null&&(a.ed(w,M),x=M),2>(R=R.Ea(x,null,$,I,0))&&(p=new o(d,p,$[0],NaN,R,w,g,I[0],NaN),c.push(p),0>(p=a.Pa(d,n))&&a.Ra(d,n,c.length-1),!0)},r.xM=function(n,a,c,p,d,g,w,x){var M=new h.yb,$=new h.yb,I=[0,0],R=[0,0],N=a.bc(d);return N==null&&(a.ed(d,M),N=M),(M=a.bc(w))==null&&(a.ed(w,$),M=$),(N=N.Ea(M,null,I,R,0))==2?(p=new o(d,p,I[0],I[1],N,w,g,R[0],R[1]),c.push(p),0>(p=a.Pa(d,n))&&a.Ra(d,n,c.length-1),!0):($=!1,d==x&&(p=new o(d,p,I[0],NaN,N,w,g,R[0],NaN),c.push(p),0>(p=a.Pa(d,n))&&a.Ra(d,n,c.length-1),$=!0),$)},r.yM=function(n,a,c,p,d,g,w,x){var M=new h.yb,$=new h.yb,I=[0,0],R=[0,0],N=a.bc(d);return N==null&&(a.ed(d,M),N=M),(M=a.bc(w))==null&&(a.ed(w,$),M=$),(N=N.Ea(M,null,I,R,0))==2?(p=new o(d,p,I[0],I[1],N,w,g,R[0],R[1]),c.push(p),0>(p=a.Pa(d,n))&&a.Ra(d,n,c.length-1),!0):($=!1,d==x&&(p=new o(d,p,I[0],NaN,N,w,g,R[0],NaN),c.push(p),0>(p=a.Pa(d,n))&&a.Ra(d,n,c.length-1),$=!0),$)},r.cM=function(n,a,c,p){var d=[];d[0]=new h.h,d[1]=new h.h,d[2]=new h.h,d[3]=new h.h;var g=new h.h,w=new h.h,x=new h.h,M=new h.h,$=null;p!=null&&($=new h.ig).Or();var I=0,R=null,N=new h.yb;new h.yb;for(var j=c.Ob(c.ld);j!=-1;j=c.Rb(j)){for(var z=4,D=-1,U=-1,V=-1,W=-1,Z=NaN,it=!0,ot=!1,dt=!0,ft=!0,$t=!0,ut=0,qt=j,Ut=0,le=c.Xa(j),Ee=c.Ja(j),hi=0;hi<Ee;le=c.U(le),hi++){var Ne=c.bc(le);if(Ne==null){if(!c.ed(le,N))continue;Ne=N}U==-1&&(U=le);for(var ue=0;I<a.length&&le==a[I].tg;){D=a[I].Ns;var Vt=a[I].tg,te=a[I].OA,He=a[I].Lm,De=a[I].Al,ds=a[I].VH;if(a[I].Ei==2){if(ot||(qt=D,U=Vt,Ut=te,V=He,W=De,Z=ds,z=2,p!=null?R=new h.Ta:ut=0,$t=!1,ft=!0),te=a[I].UH,ds=a[I].OT,p!=null?(Ne.ah(ue,a[I].UH,$),R.oc($.get(),ft)):ut++,ue=te,ot=!0,ft=it=!1,I+1==a.length||a[I+1].Ei!=2||a[I+1].tg==Vt&&a[I+1].OA!=ue){if(p!=null){var oe=new m(R,2,D,Vt,te,z,qt,U,Ut,He,De);p.push(oe)}else null.add(ut);qt=D,U=Vt,Ut=te,V=He,W=De,Z=ds,z=2,ot=it=!1,ft=$t=!0}}else{var nr=c.U(Vt);if(I<a.length-1&&a[I+1].tg==nr&&a[I+1].Al==De&&a[I+1].Ei==2)te!=ue&&($t&&(p!=null?R=new h.Ta:ut=0),it=0<I&&a[I-1].Ns==D?z==1?0:z==0?1:3:3,p!=null?(Ne.ah(ue,te,$),R.oc($.get(),ft),oe=new m(R,it,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):(ut++,null.add(ut)),ue=te,qt=D,U=Vt,Ut=te,V=He,W=De,Z=ds,z=it,it=dt=!1,ft=$t=!0);else if(!r.CM(n,c,a,I,g,w)){r.zM(c,a,I,j,le,x,M);var ve=!1;if(nr=!1,oe=!0,!(g.qb(x)||w.qb(x)||g.qb(M)||w.qb(M))){d[0].L(g),d[1].L(w),d[2].L(x),d[3].L(M),d.sort(h.h.nu);var or=d[0],Lh=d[1],Dh=d[2],nu=d[3];or.qb(g)?Lh.qb(w)?n?(nr=ve=!0,oe=!1):ve=!1:nu.qb(w)?n?oe=nr=ve=!0:ve=!1:(ve=!0,oe=Lh.qb(x)):Lh.qb(g)?Dh.qb(w)?n?(nr=ve=!0,oe=!1):ve=!1:or.qb(w)?n?oe=nr=ve=!0:ve=!1:(ve=!0,oe=Dh.qb(x)):Dh.qb(g)?nu.qb(w)?n?(nr=ve=!0,oe=!1):ve=!1:Lh.qb(w)?n?oe=nr=ve=!0:ve=!1:(ve=!0,oe=nu.qb(x)):or.qb(w)?n?(nr=ve=!0,oe=!1):ve=!1:Dh.qb(w)?n?oe=nr=ve=!0:ve=!1:(ve=!0,oe=or.qb(x))}ve&&(ve=le==Vt,(te!=ue||ve&&ue==0)&&($t&&(p!=null?R=new h.Ta:ut=0),p!=null?(Ne.ah(ue,te,$),R.oc($.get(),ft)):ut++),oe?z!=1?((te!=ue||ve&&ue==0)&&(p!=null?(oe=new m(R,1,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):null.add(ut)),nr?(I>=a.length-2||a[I+2].Ns!=D)&&(z=0):z=1):((te!=ue||ve&&ue==0)&&(p!=null?(oe=new m(R,3,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):null.add(ut)),z=1):z!=0?((te!=ue||ve&&ue==0)&&(p!=null?(oe=new m(R,0,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):null.add(ut)),nr?(I>=a.length-2||a[I+2].Ns!=D)&&(z=1):z=0):((te!=ue||ve&&ue==0)&&(p!=null?(oe=new m(R,3,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):null.add(ut)),z=0),(te!=ue||ve&&ue==0)&&(ue=te,qt=D,U=Vt,Ut=te,V=He,W=De,Z=ds,it=dt=!1,ft=$t=!0))}}I++}ue!=1&&($t&&(p!=null?R=new h.Ta:ut=0),p!=null?(Ne.ah(ue,1,$),R.oc($.get(),ft)):ut++,ft=$t=!1,dt=!0)}dt&&(te=1,Vt=c.rj(j),Vt=c.Ma(Vt),De=He=-1,ds=NaN,it?p!=null?(oe=new m(R,4,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):null.add(ut):(it=z==1?0:z==0?1:3,p!=null?(oe=new m(R,it,D,Vt,te,z,qt,U,Ut,He,De),p.push(oe)):null.add(ut)))}},r.CM=function(n,a,c,p,d,g){var w=c[p].VH;if(w==1)return r.AM(n,a,c,p,d,g);if(w==0)return r.BM(n,a,c,p,d,g);throw h.i.Qa()},r.AM=function(n,a,c,p,d,g){var w=new h.yb,x=c[p].tg,M=c[p].Lm,$=c[p].Al,I=-1,R=-1,N=-1,j=-1;if(!n&&0<p){var z=c[p-1];I=z.tg,R=z.Lm,N=z.Al,j=z.Ei}var D=-1,U=-1,V=-1,W=-1;p<c.length-1&&(D=(z=c[p+1]).tg,U=z.Lm,V=z.Al,W=z.Ei);var Z=a.U(x);return z=a.U($),n?p==c.length-1||D!=x||U!=M||V!=z||W==2?((n=a.bc($))==null&&(a.ed($,w),n=w),g.L(n.kg()),d.mt(g),g.normalize(),d.normalize(),!1):((n=a.bc($))==null&&(a.ed($,w),n=w),d.L(n.kg()),(n=a.bc(z))==null&&(a.ed(z,w),n=w),g.L(n.kg()),d.Sq(),g.normalize(),d.normalize(),!1):0<p&&I==x&&R==M&&N==z&&j==2||p<c.length-1&&D==Z&&U==M&&V==z&&W==2?((n=a.bc($))==null&&(a.ed($,w),n=w),g.L(n.kg()),d.mt(g),g.normalize(),d.normalize(),!1):!(p<c.length-1&&D==x&&U==M&&V==z)||((n=a.bc($))==null&&(a.ed($,w),n=w),d.L(n.kg()),(n=a.bc(z))==null&&(a.ed(z,w),n=w),g.L(n.kg()),d.Sq(),g.normalize(),d.normalize(),!1)},r.BM=function(n,a,c,p,d,g){var w=new h.yb,x=c[p].tg,M=c[p].Lm,$=c[p].Al,I=-1,R=-1,N=-1,j=-1;if(!n&&p<c.length-1){var z=c[p+1];I=z.tg,R=z.Lm,N=z.Al,j=z.Ei}var D=-1,U=-1,V=-1;z=-1,0<p&&(D=(z=c[p-1]).tg,U=z.Lm,V=z.Al,z=z.Ei);var W=a.U(x),Z=a.Ma($);return n?p!=0&&D==x&&U==M&&V==Z&&z!=2||((n=a.bc($))==null&&(a.ed($,w),n=w),g.L(n.kg()),d.mt(g),g.normalize(),d.normalize(),!1):!(0<p&&D==x&&U==M&&V==Z&&z==2||p<c.length-1&&I==W&&R==M&&N==Z&&j==2)||((n=a.bc($))==null&&(a.ed($,w),n=w),g.L(n.kg()),d.mt(g),g.normalize(),d.normalize(),!1)},r.zM=function(n,a,c,p,d,g,w){var x=new h.yb,M=n.bc(d);if(M==null&&(n.ed(d,x),M=x),a=(c=a[c]).tg,c=c.OA,d=n.U(a),c==1)g.L(M.kg()),d!=-1&&d!=n.rj(p)?((M=n.bc(d))==null&&(n.ed(d,x),M=x),w.L(M.kg()),(M=n.bc(a))==null&&n.ed(a,x)):w.L(g),g.Sq(),w.normalize(),g.normalize();else{if(c!=0)throw h.i.Qa();w.L(M.kg()),g.mt(w),w.normalize(),g.normalize()}},r})()})(B||(B={})),(function(h){var O;(O=h.bM||(h.bM={}))[O.Linear=0]="Linear",O[O.Angular=1]="Angular",O[O.Area=2]="Area";var m=(function(){function p(d,g,w){this.od=g,this.ai=w,this.vA=d}return p.prototype.Nb=function(d){return d instanceof p&&this.ai===d.ai},p.aG=function(d){return d.od!==0?null:d.vA===-1?new p(-1,2,d.ai*d.ai):p.Zg(a[d.vA])},p.Zg=function(d){return(d=n[d])===void 0?null:d},p.ZO=function(d,g,w){var x=null;if(w!=null)try{w.values[0]==="EPSG"&&(x=p.Zg(parseInt(w.values[1])))}catch{}return x===null&&(x=new p(-1,d,g)),x},p.prototype.Ec=function(){return this.vA},p.prototype.CF=function(d){if(d.od!=this.od)throw h.i.Hb();return this.ai/d.ai},p.Nh=function(d,g,w){return g.CF(w)*d},p.XE=function(d,g,w,x,M){for(w=w.CF(x),x=0;x<g;x++)M[x]=d[x]*w},p})();h.Tc=m;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],a=[],c=0;c<u.length;c+=2)n[u[c]]=new m(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new m(o[c],1,o[c+1]);for(o=null,c=0;c<r.length;c+=3)n[r[c]]=new m(r[c],0,r[c+1]),a[r[c]]=r[c+2];r=null})(B||(B={})),(function(h){var O=(function(){function m(){this.xb=this.pb=0}return m.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.xb=o):typeof u=="number"?(this.pb=u,this.xb=0):(this.pb=u.pb,this.xb=u.xb)},m.prototype.value=function(){return this.pb},m.prototype.add=function(u){var o=this.pb+u.pb;u=this.xb+u.xb+2220446049250313e-31*Math.abs(o),this.pb=o,this.xb=u},m.prototype.kN=function(){var u=this.pb+1,o=this.xb+2220446049250313e-31*Math.abs(u);this.pb=u,this.xb=o},m.prototype.dN=function(u,o){this.pb=u.pb+o.pb,this.xb=u.xb+o.xb+2220446049250313e-31*Math.abs(this.pb)},m.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.xb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.xb+u.xb+2220446049250313e-31*Math.abs(o);this.pb=o,this.xb=u},m.prototype.Ag=function(u){var o=this.pb*u.pb;this.xb=this.xb*Math.abs(u.pb)+u.xb*Math.abs(this.pb)+this.xb*u.xb+2220446049250313e-31*Math.abs(o),this.pb=o},m.prototype.No=function(u){var o=this.pb*u;this.xb=this.xb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},m.prototype.Kl=function(u,o){var r=Math.abs(u.pb)*Math.abs(o.pb);this.xb=u.xb*Math.abs(o.pb)+o.xb*Math.abs(u.pb)+u.xb*o.xb+2220446049250313e-31*Math.abs(r),this.pb=r},m.prototype.jm=function(u){var o=Math.abs(u.pb),r=this.pb/u.pb,n=(this.xb+Math.abs(r)*u.xb)/o;u.xb>.01*o&&(n*=1+(1+(u=u.xb/o))*u),this.pb=r,this.xb=n+2220446049250313e-31*Math.abs(r)},m.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.xb?.5*this.xb/u:this.pb>this.xb?u-Math.sqrt(this.pb-this.xb):Math.max(u,Math.sqrt(this.pb+this.xb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.xb?o=u=NaN:(u=0,o=Math.sqrt(this.xb));this.pb=u,this.xb=o},m.prototype.sin=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.xb=(Math.abs(r)+.5*o*u.xb)*u.xb+2220446049250313e-31*o},m.prototype.cos=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=r,r=Math.abs(r),this.xb=(Math.abs(o)+.5*r*u.xb)*u.xb+2220446049250313e-31*r},m.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},m.prototype.ps=function(){return this.qg()&&this.xb!=0},m})();h.Wb=O})(B||(B={}));var Me=new B.h,mn=new B.h,Kn=new B.h,Zn=new B.h,Co=new B.h;(function(h){var O,m;(m=O||(O={}))[m.closedPath=1]="closedPath",m[m.exteriorPath=2]="exteriorPath",m[m.ringAreaValid=4]="ringAreaValid";var u=(function(){function o(r,n,a,c,p,d,g){n!==void 0?(this.ib=r,this.ck=n,this.bl=a,this.ii=c,this.ya=d,this.hA=g,this.ew=p):(this.ib=r.ib,this.ck=r.ck,this.bl=r.bl,this.ii=r.ii,this.ya=r.ya,this.hA=r.hA,this.ew=r.ew),this.bH=!0}return o.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},o.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!h.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},o.AP=function(r,n,a,c,p,d,g){return new o(r,n,a,c,p,d,g)},o})();h.zY=u,O=(function(){function o(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return o.prototype.Sh=function(r){return this.We!=null?this.We[r]:null},o.prototype.Xg=function(r,n){if(this.We==null){if(n==null)return;this.We=[];for(var a=0,c=this.vb.I();a<c;a++)this.We.push(null)}this.We[r]=n},o.prototype.bp=function(r,n){this.md.S(r,1,n)},o.prototype.ap=function(r,n){this.md.S(r,2,n)},o.prototype.VB=function(r,n){this.md.S(r,6,n)},o.prototype.Sp=function(r){return this.md.T(r,6)},o.prototype.gx=function(r,n){this.md.S(r,7,n)},o.prototype.qv=function(r){return this.md.T(r,0)},o.prototype.OJ=function(r,n){this.cd.S(r,1,n)},o.prototype.SJ=function(r,n){this.cd.S(r,0,n)},o.prototype.JF=function(r){return this.cd.T(r,7)},o.prototype.Zo=function(r,n){this.cd.S(r,3,n)},o.prototype.$o=function(r,n){this.cd.S(r,4,n)},o.prototype.uU=function(r){this.cd==null&&(this.cd=new h.$c(8));var n=this.cd.Ce();return this.cd.S(n,2,r),this.cd.S(n,5,0),this.cd.S(n,6,0),this.cd.S(n,7,n),n},o.prototype.OQ=function(r){this.cd.jd(r)},o.prototype.wU=function(r){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0));var n=this.md.Ce();return this.md.S(n,0,n),this.md.S(n,3,0),this.md.S(n,6,0),this.gx(n,r),n>=this.Oi.size&&(r=16>n?16:h.O.truncate(3*n/2),this.Oi.resize(r),this.vo.resize(r)),this.Oi.set(n,0),this.vo.set(n,0),n},o.prototype.sF=function(r){this.md.jd(r)},o.prototype.Vy=function(r){this.td.jd(r),this.fd--},o.prototype.oI=function(r){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0));var n=this.td.Ce(),a=0<=r?r:n;if(this.td.S(n,0,a),0>r){if(a>=this.vb.I()){if(r=16>a?16:h.O.truncate(3*a/2),this.vb.resize(r),this.We!=null)for(var c=0;c<r;c++)this.We.push(null);this.Sg!=null&&this.Sg.resize(r),this.it=this.vb.ub(0)}this.vb.Cb(a,-1e38,-1e38),this.We!=null&&(this.We[a]=null),this.Sg!=null&&this.Sg.write(a,1)}return this.td.S(n,4,2*a),this.fd++,n},o.prototype.wj=function(r,n,a){var c=n!=-1?this.Ma(n):this.rj(r),p=c!=-1?this.U(c):-1,d=this.oI(a==null?this.fd:-1),g=this.Ua(d);return a!=null&&this.vb.Ht(g,a),this.aj(d,r),this.Bc(d,p),this.Cc(d,c),p!=-1&&this.Cc(p,d),c!=-1&&this.Bc(c,d),a=this.dc(r),c=this.Xa(r),n==-1&&this.Wg(r,d),n==c&&this.Jf(r,d),a&&p==-1&&(this.Bc(d,d),this.Cc(d,d)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),d},o.prototype.nm=function(){return this.jo==null&&(this.jo=new h.Sa(this.vb.description)),this.jo},o.prototype.Yo=function(r,n){this.cd.S(r,2,-134217729&this.cd.T(r,2)||(n==1?134217728:0))},o.prototype.In=function(r){return 134217728&this.cd.T(r,2)?1:0},o.prototype.hN=function(r){var n=this.Ig(r.getType(),r.description);return r.getType()==1736&&this.Yo(n,r.In()),this.UD(n,r),n},o.prototype.iN=function(r){var n=this.Ig(r.getType(),r.description);return this.VD(n,r),n},o.prototype.XV=function(r,n){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0)),this.md.De(this.md.Hg+r),this.td.De(this.td.Hg+n),this.Oi.Jb(this.Oi.size+r),this.vo.Jb(this.vo.size+r)},o.prototype.UD=function(r,n){this.XV(n.da(),n.I()),this.Il.Fd(n,0,n.I()),this.it=this.vb.ub(0);for(var a=this.We!=null&&n.Ve!=null,c=0,p=n.da();c<p;c++)if(!(2>n.Ja(c))){var d=this.vf(r,-1);this.kn(d,n.dc(c));for(var g=n.Ba(c),w=n.Vc(c);g<w;g++){var x=this.wj(d,-1,null);if(a)if(x=this.Ua(x),1&n.ZF(g))this.Xg(x,null);else{var M=new h.ig;n.bc(g,M,!0),this.Xg(x,M.get())}}}},o.prototype.VD=function(r,n){this.Il.Fd(n,0,n.I()),this.it=this.vb.ub(0),r=this.vf(r,-1);var a=0;for(n=n.I();a<n;a++)this.wj(r,-1,null)},o.prototype.NX=function(r,n,a){var c=this.U(r);if(c==-1)throw h.i.Qa();for(var p=this.nm(),d=this.bd(r),g=0,w=n.ol(a);g<w;g++){var x=this.Ua(r),M=this.U(r),$=n.Vp(a,g);g==0&&($.To(p),this.Dh(r,p)),$.getType()==322?this.Xg(x,null):this.Xg(x,h.aa.jg($)),$.Po(p),g<w-1?r=this.wj(d,M,p):this.Dh(c,p)}},o.prototype.MX=function(r,n,a){var c=this.U(r);if(c==-1)throw h.i.Qa();for(var p=this.nm(),d=this.bd(r),g=0,w=n.ol(a);g<w;g++){var x=this.Ua(r),M=this.U(r),$=n.Vp(a,w-g-1);g==0&&($.Po(p),this.Dh(r,p)),$.getType()==322?this.Xg(x,null):this.Xg(x,h.aa.jg($)),$.To(p),g<w-1?r=this.wj(d,M,p):this.Dh(c,p)}},o.prototype.IF=function(){var r=new h.l;r.Oa();for(var n=this.Yq(),a=new h.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,a),c?r.Zb(a.x,a.y):r.Lk(a.x,a.y),c=!1;return r},o.prototype.Ib=function(r){var n=r.getType();if(h.aa.Hc(n))return this.hN(r);if(n==550)return this.iN(r);throw h.i.Qa()},o.prototype.uN=function(r,n){var a=n.getType();if(h.aa.Hc(a))this.UD(r,n);else{if(a!=550)throw h.i.Qa();this.VD(r,n)}},o.prototype.mN=function(r,n){var a=this.Ig(1736,r.description);if(2>r.Ja(n))return a;this.Il.Fd(r,r.Ba(n),r.Vc(n)),this.it=this.vb.ub(0);var c=this.vf(a,-1);this.kn(c,r.dc(n)||!0);var p=this.We!=null&&r.Ve!=null,d=r.Ba(n);for(n=r.Vc(n);d<n;d++){var g=this.wj(c,-1,null);if(p)if(g=this.Ua(g),1&r.ZF(d))this.Xg(g,null);else{var w=new h.ig;r.bc(d,w,!0),this.Xg(g,w.get())}}return a},o.prototype.Ne=function(r){var n=this.ic(r),a=h.ZK.Ig(n,this.Il.description),c=this.I(r);if(c==0)return a;if(h.aa.Hc(n)){n=this.da(r);for(var p=h.Yc.Oh(n+1),d=h.Yc.Mr(n+1,0),g=a.description,w=0,x=g.Aa;w<x;w++){for(var M=g.kd(w),$=h.ra.Va(M),I=h.Yc.YE(M,c),R=this.vb.ub(M),N=0,j=0,z=0,D=this.Ob(r);D!=-1;D=this.Rb(D)){var U=0;this.dc(D)&&(U|=1),this.YS(D)&&(U|=4),U!=0&&d.zJ(j,U);var V=this.Ja(D);if(p.write(j++,z),z+=V,M==0){V=R;var W=I,Z=new h.h;for(U=this.Xa(D);N<z;U=this.U(U),N++){var it=this.Ua(U);V.tc(2*it,Z),W.Tt(2*N,Z)}}else for(U=this.Xa(D);N<z;U=this.U(U),N++)for(it=this.Ua(U),W=0;W<$;W++)Z=R.eg(it*$+W),I.pr(N*$+W,Z)}a.hn(M,I),p.write(n,c)}a.PJ(d),a.QJ(p),a.Pc(16777215)}else if(n==550){for(g=a.description,a.resize(c),w=0,x=g.Aa;w<x;w++){for(M=g.kd(w),$=h.ra.Va(M),I=a.ub(M),R=this.vb.ub(M),N=0,D=this.Ob(r),V=this.Ja(D),U=this.Xa(D);N<V;U=this.U(U),N++)for(it=this.Ua(U),W=0;W<$;W++)Z=R.eg(it*$+W),I.pr(N*$+W,Z);a.hn(M,I)}a.Pc(16777215)}return a},o.prototype.BB=function(r){for(var n=this.Ob(r);n!=-1;n=this.Zq(n));n=this.PR(r);var a=this.ue(r);n!=-1?this.OJ(n,a):this.ld=a,a!=-1?this.SJ(a,n):this.qw=n,this.OQ(r)},o.prototype.Ig=function(r,n){return n===void 0?this.$E(r,h.ee.og()):this.$E(r,n)},o.prototype.$E=function(r,n){return r=this.uU(r),this.vb==null?this.vb=this.Il=new h.de(n):this.Il.Jl(n),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=r:(this.SJ(r,this.qw),this.OJ(this.qw,r)),this.qw=r},o.prototype.ue=function(r){return this.cd.T(r,1)},o.prototype.PR=function(r){return this.cd.T(r,0)},o.prototype.ic=function(r){return 2147483647&this.cd.T(r,2)},o.prototype.HJ=function(r,n,a){n=this.wk[n],(r=this.JF(r))>=n.size&&n.resize(Math.max(h.O.truncate(1.25*r),16),-1),n.write(r,a)},o.prototype.KF=function(r,n){return(r=this.JF(r))<(n=this.wk[n]).size?n.read(r):-1},o.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var r=0;r<this.wk.length;r++)if(this.wk[r]==null)return this.wk[r]=h.Yc.Oh(0),r;return this.wk.push(h.Yc.Oh(0)),this.wk.length-1},o.prototype.xW=function(r){this.wk[r]=null},o.prototype.Ob=function(r){return this.cd.T(r,3)},o.prototype.kv=function(r){return this.cd.T(r,4)},o.prototype.I=function(r){return this.cd.T(r,5)},o.prototype.da=function(r){return this.cd.T(r,6)},o.prototype.Gp=function(r,n,a){for(var c=0,p=this.ld;p!=-1;p=this.ue(p)){var d=this.ic(p);if(h.aa.Hc(d)&&(!a||d==1736)){d=this.ic(p)==1736;for(var g=this.Ob(p);g!=-1;){for(var w=0,x=this.Xa(g);w<h.O.truncate(this.Ja(g)/2);){var M=this.U(x);if(M==-1)break;var $=this.Ua(x),I=this.Sh($);I!=null?$=I.Qb():(I=this.Ua(M),$=this.vb.yr($,I)),$<=r?($==0?c==0&&(c=-1):c=1,M!=this.rj(g)&&(this.lC(M,x),this.pd(M,!0))):x=this.U(x),w++}for(w=this.Xa(g),x=this.dc(g)?w:this.rj(g);0<this.Ja(g);){if((M=this.Ma(x))==-1){this.pd(x,!0),c==0&&(c=-1);break}var R=this.Ua(M);if((I=this.Sh(R))!=null?$=I.Qb():($=this.Ua(x),$=this.vb.yr($,R)),$<=r)$==0?c==0&&(c=-1):c=1,this.lC(M,x),this.pd(M,!1),w==M&&(w=this.Xa(g));else if((x=this.Ma(x))==w)break}x=this.Ja(g),n&&(d?3>x:2>x)?(g=this.Zq(g),c=0<x?1:c==0?-1:c):g=this.Rb(g)}}}return c},o.prototype.lC=function(r,n){var a=this.Ua(r),c=this.Ua(n);if(this.Sg!=null&&(a=this.Sg.read(a),this.Sg.write(c,a)),this.bi!=null){for(c=0,a=this.bi.length;c<a;c++)if(this.bi[c]!=null){var p=this.Pa(r,c);p!=-1&&this.Ra(n,c,p)}}},o.prototype.Ul=function(r,n,a){var c=0,p=this.U(r);if(p==-1)throw h.i.Qa();for(var d=this.Ua(r),g=this.Ua(p),w=this.Sh(d),x=w==null?this.vb.yr(d,g):w.Qb(),M=0;M<a;M++){var $=n[M];if(0<$&&1>$){var I=$;w!=null&&(I=0<x?w.Ux($)/x:0),this.vb.kD(d,g,I,this.nm());var R=this.wj(this.bd(r),p,this.nm());if(c++,w!=null){var N=w.dl(0,$);I=this.Ua(this.Ma(R)),this.Xg(I,N),this.mf(R,N.wc()),M!=a-1&&n[M+1]!=1||($=w.dl($,1),this.Xg(I,$))}}}return c},o.prototype.LX=function(r,n,a){var c=0,p=this.U(r);if(p==-1)throw h.i.fa("internal error");var d=this.Ua(r),g=this.Ua(p),w=this.Sh(d),x=w==null?this.vb.yr(d,g):w.Qb(),M=0;r=this.bd(r);for(var $=0;$<a;$++){var I=n[$];if(M<I&&1>I){var R=I;if(w!=null&&(R=0<x?w.Ux(I)/x:0),this.vb.kD(d,g,R,this.nm()),R=this.yS(r,p,this.nm()),c++,w!=null){M=w.dl(M,I);var N=this.Ua(this.Ma(R));this.Xg(N,M),this.Cb(R,M.pa,M.la),$!=a-1&&n[$+1]!=1||(M=w.dl(I,1),R=this.Ua(R),this.Xg(R,M))}}M=I}return c},o.prototype.yS=function(r,n,a){var c=n!=-1?this.Ma(n):this.rj(r),p=c!=-1?this.U(c):-1,d=this.oI(a==null?this.fd:-1),g=this.Ua(d);return a!=null&&this.vb.Ht(g,a),this.aj(d,r),this.Bc(d,p),this.Cc(d,c),p!=-1&&this.Cc(p,d),c!=-1&&this.Bc(c,d),a=this.dc(r),c=this.Xa(r),n==-1&&this.Wg(r,d),n==c&&(a&&c!=-1||this.Jf(r,d)),a&&p==-1&&(this.Bc(d,d),this.Cc(d,d)),this.Vj(r,this.Ja(r)+1),r=this.Qf(r),this.Tj(r,this.I(r)+1),d},o.prototype.uE=function(r,n,a){var c=this.Ua(n),p=this.Ua(a);if(0>c||p>this.fd-1)throw h.i.N("invalid call");if(c>p&&!this.dc(r))throw h.i.N("cannot iterate across an open path");for(r=0;n!=a;n=this.U(n))c=this.Ua(n),(p=this.Sh(c))!=null?r+=p.Qb():(p=this.Ua(this.U(n)),r+=this.vb.yr(c,p));return r},o.prototype.Dh=function(r,n){var a=this.Ua(r);this.vb.Ht(a,n),(a=this.Sh(a))!=null&&a.setStart(n),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&a.setEnd(n))},o.prototype.Vi=function(r,n){r=this.Ua(r),this.vb.ve(r,n)},o.prototype.mf=function(r,n){this.Cb(r,n.x,n.y)},o.prototype.Cb=function(r,n,a){var c=this.Ua(r);this.vb.Cb(c,n,a),(c=this.Sh(c))!=null&&c.ZB(n,a),(r=this.Ma(r))!=-1&&(r=this.Ua(r),this.Sh(r)!=null&&c.Ql(n,a))},o.prototype.D=function(r,n){this.vb.D(this.td.T(r,0),n)},o.prototype.Gc=function(r,n){this.vb.za[0].tc(2*this.td.T(r,0),n)},o.prototype.Na=function(r){var n=new h.h;return this.vb.D(this.td.T(r,0),n),n},o.prototype.dG=function(r,n){this.it.tc(2*r,n)},o.prototype.Uc=function(r,n,a){return this.vb.Uc(r,this.Ua(n),a)},o.prototype.setAttribute=function(r,n,a,c){this.vb.setAttribute(r,this.Ua(n),a,c)},o.prototype.Ua=function(r){return this.td.T(r,0)},o.prototype.ih=function(){var r=new h.h;return this.D(void 0,r),r.y},o.prototype.fq=function(r,n){r=this.Ua(r),n=this.Ua(n);var a=this.vb.za[0].o;return a[2*r]===a[2*n]&&a[2*r+1]===a[2*n+1]},o.prototype.Dv=function(r,n){r=this.Ua(r);var a=this.vb.za[0].o;return a[2*r]===n.x&&a[2*r+1]===n.y},o.prototype.vX=function(r,n){if(1>n&&(n=1),this.Sg==null){if(n==1)return;this.Sg=h.Yc.Dn(this.vb.I(),1)}(r=this.Ua(r))>=this.Sg.size&&this.Sg.resize(r+1,1),this.Sg.write(r,n)},o.prototype.cG=function(r){return r=this.Ua(r),this.Sg==null||r>=this.Sg.size?1:this.Sg.read(r)},o.prototype.Ra=function(r,n,a){n=this.bi[n],r=this.Ua(r),n.size<this.vb.I()&&n.resize(this.vb.I(),-1),n.write(r,a)},o.prototype.Pa=function(r,n){return(r=this.Ua(r))<(n=this.bi[n]).size?n.read(r):-1},o.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var r=0;r<this.bi.length;r++)if(this.bi[r]==null)return this.bi[r]=h.Yc.Oh(0,-1),r;return this.bi.push(h.Yc.Oh(0,-1)),this.bi.length-1},o.prototype.Td=function(r){this.bi[r]=null},o.prototype.bc=function(r){return this.We!=null?(r=this.Ua(r),this.We[r]):null},o.prototype.ed=function(r,n){var a=this.td.T(r,2);if(a==-1)return!1;if(this.fA){var c=new h.Sa;this.Vi(r,c),n.setStart(c),this.Vi(a,c),n.setEnd(c)}else this.vb.Gc(this.td.T(r,0),Me),n.em(0,Me),this.vb.Gc(this.td.T(a,0),Me),n.em(1,Me);return!0},o.prototype.mW=function(r,n,a){if(this.fA){var c=new h.Sa;this.Vi(r,c),a.setStart(c),this.Vi(n,c),a.setEnd(c)}else this.vb.Gc(r,Me),a.em(0,Me),this.vb.Gc(n,Me),a.em(1,Me)},o.prototype.vf=function(r,n){if(n!=-1){if(r!=this.Qf(n))throw h.i.Qa();var a=this.cs(n)}else a=this.kv(r);var c=this.wU(r);return n!=-1&&this.bp(n,c),this.ap(c,n),this.bp(c,a),a!=-1?this.ap(a,c):this.Zo(r,c),n==-1&&this.$o(r,c),this.Rl(r,this.da(r)+1),c},o.prototype.nG=function(r,n,a,c){r=this.vf(r,-1);for(var p=0,d=n,g=!1;d==a&&(g=!0),this.aj(d,r),p++,(d=this.U(d))!=n;);return this.kn(r,!0),this.Vj(r,p),g&&(n=a),this.Jf(r,n),this.Wg(r,this.Ma(n)),this.cp(r,!1),c!=null&&(c[0]=g),r},o.prototype.Zq=function(r){var n=this.cs(r),a=this.Rb(r),c=this.Qf(r);return n!=-1?this.ap(n,a):this.Zo(c,a),a!=-1?this.bp(a,n):this.$o(c,n),this.AO(r),this.Rl(c,this.da(c)-1),this.sF(r),a},o.prototype.AO=function(r){var n=this.Xa(r);if(n!=-1){for(var a=0,c=this.Ja(r);a<c;a++){var p=n;n=this.U(n),this.Vy(p)}n=this.Qf(r),this.Tj(n,this.I(n)-this.Ja(r))}this.Vj(r,0)},o.prototype.Rb=function(r){return this.md.T(r,2)},o.prototype.cs=function(r){return this.md.T(r,1)},o.prototype.Ja=function(r){return this.md.T(r,3)},o.prototype.dc=function(r){return!!(1&this.Sp(r))},o.prototype.kn=function(r,n){if(this.dc(r)!=n){if(0<this.Ja(r)){var a=this.Xa(r),c=this.rj(r);n?(this.Bc(c,a),this.Cc(a,c),a=this.Ua(c)):(this.Bc(c,-1),this.Cc(a,-1),a=this.Ua(c)),this.Xg(a,null)}this.VB(r,(1|this.Sp(r))-1|(n?1:0))}},o.prototype.Qf=function(r){return this.md.T(r,7)},o.prototype.YS=function(r){return!!(2&this.Sp(r))},o.prototype.PB=function(r,n){this.VB(r,(2|this.Sp(r))-2|(n?2:0))},o.prototype.wz=function(r){if(this.cT(r))return this.Oi.get(this.qv(r));var n=new h.yb,a=this.Xa(r);if(a==-1)return 0;var c=new h.h;this.D(a,c);for(var p=0,d=0,g=this.Ja(r);d<g;d++,a=this.U(a)){var w=this.bc(a);if(w==null){if(!this.ed(a,n))continue;w=n}p+=w.Tx(c.x,c.y)}return this.cp(r,!0),this.Oi.set(this.qv(r),p),p},o.prototype.gr=function(r,n,a){n=this.Ck[n],r=this.qv(r),n.size<this.Oi.size&&n.resize(this.Oi.size,-1),n.write(r,a)},o.prototype.sj=function(r,n){return(r=this.qv(r))<(n=this.Ck[n]).size?n.read(r):-1},o.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var r=0;r<this.Ck.length;r++)if(this.Ck[r]==null)return this.Ck[r]=h.Yc.Oh(0),r;return this.Ck.push(h.Yc.Oh(0)),this.Ck.length-1},o.prototype.CB=function(r){this.Ck[r]=null},o.prototype.ZT=function(r,n,a){if(a==-1)throw h.i.N();if(n!=a){var c=this.Rb(a),p=this.cs(a),d=this.Qf(a);p==-1?this.Zo(d,c):this.ap(p,c),c==-1?this.$o(d,p):this.bp(c,p),this.Tj(d,this.I(d)-this.Ja(a)),this.Rl(d,this.da(d)-1),p=n==-1?this.kv(r):this.cs(n),this.bp(a,p),this.ap(a,n),n==-1?this.$o(r,a):this.bp(n,a),p==-1?this.Zo(r,a):this.ap(p,a),this.Tj(r,this.I(r)+this.Ja(a)),this.Rl(r,this.da(r)+1),this.gx(a,r)}},o.prototype.ij=function(r,n){this.vb.ve(this.Ua(n),this.nm()),this.wj(r,-1,this.nm())},o.prototype.pd=function(r,n){var a=this.bd(r),c=this.Ma(r),p=this.U(r);c!=-1&&this.Bc(c,p);var d=this.Ja(a);if(r==this.Xa(a)&&this.Jf(a,1<d?p:-1),p!=-1&&this.Cc(p,c),r==this.rj(a)&&this.Wg(a,1<d?c:-1),c!=-1&&p!=-1){c=this.Ua(c);var g=this.Ua(p);n?(n=this.Sh(c))!=null&&(c=new h.h,this.vb.D(g,c),n.Qc(c)):(g=this.Ua(r),n=this.Sh(g),this.Xg(c,n),n!=null&&(c=this.vb.Na(c),n.Dc(c)))}return this.Vj(a,d-1),a=this.Qf(a),this.Tj(a,this.I(a)-1),this.Vy(r),p},o.prototype.Xa=function(r){return this.md.T(r,4)},o.prototype.rj=function(r){return this.md.T(r,5)},o.prototype.U=function(r){return this.td.T(r,2)},o.prototype.Ma=function(r){return this.td.T(r,1)},o.prototype.bd=function(r){return this.td.T(r,3)},o.prototype.fc=function(r,n){return this.wj(r,-1,n)},o.prototype.Yq=function(r){if(r===void 0)return this.Yq(!1);if(r instanceof u)return new u(r);var n,a=-1,c=-1,p=-1,d=0,g=!1;for(n=this.ld;n!=-1;n=this.ue(n))if(!r||h.aa.Hc(this.ic(n))){for(a=this.Ob(n);a!=-1;a=this.Rb(a))if(p=c=this.Xa(a),d=0,c!=-1){g=!0;break}if(g)break}return u.AP(this,n,a,c,p,d,r)},o.prototype.Oc=function(r){if(this.Il.Oc(r),this.We!=null)for(var n=0,a=this.We.length;n<a;n++)this.We[n]!=null&&this.We[n].Oc(r)},o.prototype.jr=function(r,n,a,c){c?this.NX(r,n,a):this.MX(r,n,a)},o.prototype.Cc=function(r,n){this.td.S(r,1,n)},o.prototype.Bc=function(r,n){this.td.S(r,2,n)},o.prototype.aj=function(r,n){this.td.S(r,3,n)},o.prototype.Vj=function(r,n){this.md.S(r,3,n)},o.prototype.Jf=function(r,n){this.md.S(r,4,n)},o.prototype.Wg=function(r,n){this.md.S(r,5,n)},o.prototype.Rl=function(r,n){this.cd.S(r,6,n)},o.prototype.Tj=function(r,n){this.cd.S(r,5,n)},o.prototype.pJ=function(r){var n=r;do{var a=this.U(n);this.Bc(n,this.Ma(n)),this.Cc(n,a),n=a}while(n!=r)},o.prototype.bC=function(r){this.fd=r},o.prototype.$q=function(r){var n=this.cs(r),a=this.Rb(r),c=this.Qf(r);n!=-1?this.ap(n,a):this.Zo(c,a),a!=-1?this.bp(a,n):this.$o(c,n),this.Jf(r,-1),this.Wg(r,-1),this.sF(r)},o.prototype.mi=function(r,n){var a=this.Ma(r),c=this.U(r);if(a!=-1&&this.Bc(a,c),c!=-1&&this.Cc(c,a),a!=-1&&c!=-1)if(a=this.Ua(a),c=this.Ua(c),n){if((n=this.Sh(a))!=null){var p=new h.h;this.vb.D(c,p),n.Qc(p)}}else n=this.Ua(r),n=this.Sh(n),this.Xg(a,n),n!=null&&(p=new h.h,this.vb.D(a,p),n.Dc(p));this.Vy(r)},o.prototype.cT=function(r){return!!(4&this.Sp(r))},o.prototype.cp=function(r,n){this.VB(r,(4|this.Sp(r))-4|(n?4:0))},o.prototype.nx=function(r,n){var a=this.td.o;this.vb.mc();var c=this.vb.za[0].o;r.Vd(0,n,(function(p,d){var g=a[5*p];p=a[5*d],d=c[2*g],g=c[2*g+1];var w=c[2*p];return g<(p=c[2*p+1])?-1:g>p?1:d<w?-1:d>w?1:0}))},o.prototype.jS=function(){for(var r=this.ld;r!=-1;r=this.ue(r))if(!h.aa.Hc(this.ic(r)))return!0;return!1},o.prototype.hC=function(r,n){for(var a=this.Ob(r),c=this.Ob(n),p=this.kv(r),d=this.kv(n),g=this.Ob(r);g!=-1;g=this.Rb(g))this.gx(g,n);for(g=this.Ob(n);g!=-1;g=this.Rb(g))this.gx(g,r);this.Zo(r,c),this.Zo(n,a),this.$o(r,d),this.$o(n,p),a=this.I(r),c=this.da(r),p=this.da(n),this.Tj(r,this.I(n)),this.Tj(n,a),this.Rl(r,p),this.Rl(n,c),a=this.cd.T(r,2),this.cd.S(r,2,this.cd.T(n,2)),this.cd.S(n,2,a)},o})(),h.gd=O})(B||(B={})),(function(h){var O=(function(m){function u(o,r,n,a){var c=m.call(this)||this;return c.$=new h.l,o===void 0?c.UE():typeof o=="number"?c.VO(o,r,n,a):o instanceof h.Sa?r!==void 0?c.Qu(o,r,n):c.WO(o):o instanceof h.ra?r!==void 0?c.YO(o,r):c.XO(o):o instanceof h.l?c.UO(o):c.UE(),c}return ce(u,m),u.prototype.Qu=function(o,r,n){this.description=h.ee.og(),this.$.Oa(),o.B()||this.tu(o,r,n)},u.prototype.UO=function(o){this.description=h.ee.og(),this.$.K(o),this.$.normalize()},u.prototype.XO=function(o){if(o==null)throw h.i.N();this.description=o,this.$.Oa()},u.prototype.YO=function(o,r){if(o==null)throw h.i.N();this.description=o,this.$.K(r),this.$.normalize()},u.prototype.UE=function(){this.description=h.ee.og(),this.$.Oa()},u.prototype.WO=function(o){this.description=h.ee.og(),this.$.Oa(),o.B()||this.tu(o)},u.prototype.VO=function(o,r,n,a){this.description=h.ee.og(),this.K(o,r,n,a)},u.prototype.K=function(o,r,n,a){if(this.vc(),typeof o=="number")this.$.K(o,r,n,a);else for(this.Oa(),r=0,n=o.length;r<n;r++)this.Zb(o[r])},u.prototype.Xo=function(o){if(this.vc(),!o.fT())throw h.i.N();this.$.K(o)},u.prototype.Oa=function(){this.vc(),this.$.Oa()},u.prototype.B=function(){return this.$.B()},u.prototype.R=function(){return this.$.R()},u.prototype.ca=function(){return this.$.ca()},u.prototype.gk=function(){return this.$.gk()},u.prototype.Jp=function(){return this.$.Jp()},u.prototype.Ip=function(){return this.$.sf()},u.prototype.Zb=function(o){if(o instanceof h.h)this.vc(),this.$.Zb(o);else if(o instanceof h.l)this.vc(),this.$.Zb(o);else if(o instanceof h.Sa){if(this.vc(),!o.Ac()){var r=o.description;if(this.description!=r&&this.Jl(r),this.B())this.tu(o);else{this.$.Zb(o.D());for(var n=1,a=r.Aa;n<a;n++)for(var c=r.Ed(n),p=h.ra.Va(c),d=0;d<p;d++){var g=o.Uc(c,d),w=this.Tg(c,d);w.Zb(g),this.setInterval(c,d,w)}}}}else if(o instanceof u&&!o.B())for((r=o.description)!=this.description&&this.Jl(r),this.$.Zb(o.$),n=1,a=r.Aa;n<a;n++)for(c=r.kd(n),p=h.ra.Va(c),d=0;d<p;d++)g=o.Tg(c,d),(w=this.Tg(c,d)).Zb(g),this.setInterval(c,d,w)},u.prototype.tu=function(o,r,n){if(r!==void 0){this.$.K(o.D(),r,n),n=1;for(var a=(r=o.description).Aa;n<a;n++)for(var c=r.Ed(n),p=h.ra.Va(c),d=0;d<p;d++){var g=o.Uc(c,d);this.setInterval(c,d,g,g)}}else for(this.$.K(o.ka[0],o.ka[1]),n=1,a=(r=o.description).Aa;n<a;n++)for(c=r.Ed(n),p=h.ra.Va(c),d=0;d<p;d++)g=o.Uc(c,d),this.setInterval(c,d,g,g)},u.prototype.setInterval=function(o,r,n,a){if(n=typeof n=="number"?new h.Nc(n,a):n,this.vc(),o==0)if(r==0)this.$.v=n.oa,this.$.C=n.va;else{if(r!=1)throw h.i.ce();this.$.G=n.oa,this.$.H=n.va}else this.vD(0,o,r,n.oa),this.vD(1,o,r,n.va)},u.prototype.W=function(o,r){this.vc(),this.$.W(o,r)},u.prototype.Oc=function(o){if(o instanceof h.Dd)this.vc(),o.mC(this.$);else if(this.vc(),!this.$.B()){var r=new h.OK;this.Qo(r),r.XS()?r.Oa():o.mC(r)}},u.prototype.copyTo=function(o){if(o.getType()!=this.getType())throw h.i.N();if(o.vc(),o.description=this.description,o.$.K(this.$),o.ka=null,this.ka!=null){o.ou();for(var r=0;r<2*(this.description.Ae.length-2);r++)o.ka[r]=this.ka[r]}},u.prototype.Ia=function(){return new u(this.description)},u.prototype.Ke=function(){return this.$.wF()},u.prototype.Qb=function(){return this.$.yR()},u.prototype.getType=function(){return 197},u.prototype.Db=function(){return 2},u.prototype.bn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.$.v,o.G=this.$.G,o.C=this.$.C,o.H=this.$.H},u.prototype.Qo=function(o){o.v=this.$.v,o.G=this.$.G,o.C=this.$.C,o.H=this.$.H,o.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},u.prototype.Tg=function(o,r){var n=new h.Nc;return n.K(this.Od(0,o,r),this.Od(1,o,r)),n},u.prototype.Hf=function(o,r){r.Nf(this.description);var n=this.description.Aa-1;switch(o){case 0:for(o=0;o<n;o++)for(var a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(0,a,p));r.Cb(this.$.v,this.$.G);break;case 1:for(o=0;o<n;o++)for(a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(1,a,p));r.Cb(this.$.v,this.$.H);break;case 2:for(o=0;o<n;o++)for(a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(0,a,p));r.Cb(this.$.C,this.$.H);break;case 3:for(o=0;o<n;o++)for(a=this.description.kd(o),c=h.ra.Va(a),p=0;p<c;p++)r.setAttribute(a,p,this.Od(1,a,p));r.Cb(this.$.C,this.$.G);break;default:throw h.i.ce()}},u.prototype.mB=function(o,r){o=this.$.mB(o),r.ma(o.x,o.y)},u.prototype.kR=function(o,r){return r*(o.Oq-2)},u.prototype.xF=function(o,r,n){if(this.$.B())throw h.i.fa("empty geometry");if(r==0)return o!=0?n!=0?this.$.H:this.$.C:n!=0?this.$.G:this.$.v;if(n>=h.ra.Va(r))throw h.i.N();var a=this.description.Pf(r);return this.ou(),0<=a?this.ka[this.kR(this.description,o)+this.description.LR(a)-2+n]:h.ra.se(r)},u.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var o=u.Gg(this.description,0),r=u.Gg(this.description,1),n=0,a=1,c=this.description.Aa;a<c;a++){var p=this.description.kd(a),d=h.ra.Va(p);p=h.ra.se(p);for(var g=0;g<d;g++)this.ka[o+n]=p,this.ka[r+n]=p,n++}}},u.prototype.sn=function(o){if(this.ka!=null)if(2<o.Ae.length){for(var r=h.ee.Iw(o,this.description),n=[],a=u.Gg(this.description,0),c=u.Gg(this.description,1),p=u.Gg(o,0),d=u.Gg(o,1),g=0,w=1,x=o.Aa;w<x;w++){var M=o.kd(w),$=h.ra.Va(M);if(r[w]==-1){var I=h.ra.se(M);for(M=0;M<$;M++)n[p+g]=I,n[d+g]=I,g++}else for(I=this.description.$j(r[w])-2,M=0;M<$;M++)n[p+g]=this.ka[a+I],n[d+g]=this.ka[c+I],g++,I++}this.ka=n}else this.ka=null;this.description=o},u.prototype.Od=function(o,r,n){if(this.$.B())throw h.i.fa("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.$.H:this.$.C:n!=0?this.$.G:this.$.v;if(n>=h.ra.Va(r))throw h.i.ce();var a=this.description.Pf(r);return 0<=a?(this.ou(),this.ka[u.Gg(this.description,o)+this.description.$j(a)-2+n]):h.ra.se(r)},u.prototype.vD=function(o,r,n,a){if(this.vc(),r==0)o!=0?n!=0?this.$.H=a:this.$.C=a:n!=0?this.$.G=a:this.$.v=a;else{if(n>=h.ra.Va(r))throw h.i.ce();if(!this.hasAttribute(r)){if(h.ra.DG(r,a))return;this.re(r)}r=this.description.Pf(r),this.ou(),this.ka[u.Gg(this.description,o)+this.description.$j(r)-2+n]=a}},u.Gg=function(o,r){return r*(o.Ae.length-2)},u.prototype.Ea=function(o){this.vc();var r=new h.l;return o.A(r),this.$.Ea(r)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.$.isIntersecting(o):this.$.isIntersecting(o.$)},u.prototype.Ju=function(o,r){this.vc(),o.B()?this.Oa():r!==void 0?this.tu(o,r):this.$.Ju(o.Lg(),o.ih())},u.prototype.offset=function(o,r){this.vc(),this.$.offset(o,r)},u.prototype.normalize=function(){this.vc(),this.$.normalize()},u.prototype.sf=function(o){if(o===void 0){if(o=new h.Sa(this.description),this.B())return o;for(r=this.description.Aa,n=1;n<r;n++)for(a=this.description.Ed(n),c=h.ra.Va(a),p=0;p<c;p++)d=.5*(this.Od(0,a,p)+this.Od(1,a,p)),o.setAttribute(a,p,d);return o.Cb(this.$.gk(),this.$.Jp()),o}if(o.Nf(this.description),this.B())o.Oa();else{for(var r=this.description.Aa,n=1;n<r;n++)for(var a=this.description.kd(n),c=h.ra.Va(a),p=0;p<c;p++){var d=.5*(this.xF(0,a,p)+this.xF(1,a,p));o.setAttribute(a,p,d)}o.Cb(this.$.sf())}},u.prototype.mz=function(){return new h.Sa(this.$.mz())},u.prototype.contains=function(o){return o instanceof h.Sa?!o.B()&&this.$.contains(o.Lg(),o.ih()):this.$.contains(o.$)},u.prototype.dP=function(o){return this.$.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.$.Nb(o.$))return!1;for(var r=0,n=2*(this.description.Ae.length-2);r<n;r++)if(this.ka[r]!=o.ka[r])return!1;return!0},u.prototype.cc=function(){var o=this.description.cc();if(o=h.O.Th(o,this.$.cc()),!this.B()&&this.ka!=null)for(var r=0,n=2*(this.description.Ae.length-2);r<n;r++)o=h.O.Th(o,this.ka[r]);return o},u.prototype.es=function(){return this.$.v},u.prototype.gs=function(){return this.$.G},u.prototype.ds=function(){return this.$.C},u.prototype.fs=function(){return this.$.H},u.prototype.mg=function(){return h.pi.gm(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},u})(h.aa);h.Fh=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n){u===void 0?this.Oa():(this.v=u,this.G=o,this.C=r,this.H=n)}return m.construct=function(u,o,r,n){var a=new m;return a.v=u,a.G=o,a.C=r,a.H=n,a},m.prototype.K=function(u,o,r,n){typeof u=="number"?r!==void 0?(this.v=u,this.G=o,this.C=r,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof m?this.K(u.v,u.G,u.C,u.H):u instanceof h.Nc&&(u.B()||o.B()?this.Oa():(this.v=u.oa,this.C=u.va,this.G=o.oa,this.H=o.va))},m.prototype.Zw=function(u,o){if(o!==void 0)if(o==0)this.Oa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<o;r++){var n=u[r];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Oa();else for(n=u[0],this.K(n.x,n.y),r=1;r<u.length;r++)o=u[r],this.Lk(o.x,o.y)},m.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},m.prototype.B=function(){return isNaN(this.v)},m.prototype.Zb=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Nd?this.Zb(u.x,u.y):u instanceof m&&!u.B()&&(this.Zb(u.v,u.G),this.Zb(u.C,u.H))},m.prototype.Lk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},m.prototype.W=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Oa())},m.prototype.scale=function(u){0>u&&this.Oa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},m.prototype.zoom=function(u,o){this.B()||this.K(this.sf(),u*this.R(),o*this.ca())},m.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},m.prototype.HG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},m.prototype.Ea=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Oa(),u)},m.prototype.mB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.ce()}},m.prototype.nB=function(u){if(u==null||4>u.length)throw h.i.N();u[0]!=null?u[0].ma(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].ma(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].ma(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].ma(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},m.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},m.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},m.prototype.gk=function(){return(this.C+this.v)/2},m.prototype.Jp=function(){return(this.H+this.G)/2},m.prototype.R=function(){return this.C-this.v},m.prototype.ca=function(){return this.H-this.G},m.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},m.prototype.Ju=function(u,o){if(o!==void 0)this.move(u-this.gk(),o-this.Jp());else if(u instanceof h.h)this.Ju(u.x,u.y);else{if(!(u instanceof h.Sa))throw h.i.N();o=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=u.Lg()-o,this.C=u.Lg()+o,this.G=u.ih()-r,this.H=u.ih()+r}},m.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},m.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},m.prototype.dn=function(u){u.ma(this.v,this.G)},m.prototype.$I=function(u){u.ma(this.C,this.G)},m.prototype.cJ=function(u){u.ma(this.v,this.H)},m.prototype.en=function(u){u.ma(this.C,this.H)},m.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},m.prototype.sf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},m.prototype.mz=function(){return h.h.construct(this.v,this.G)},m.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Sa)return this.contains(u.Lg(),u.ih());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof m)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.N()},m.prototype.hm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.hm(u.x,u.y);if(u instanceof m)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.N()},m.prototype.Nb=function(u){return u==this||u instanceof m&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},m.prototype.cc=function(){var u=this.v;u=h.O.truncate(u^u>>>32);var o=h.O.Th(u);return u=this.C,u=h.O.truncate(u^u>>>32),o=h.O.Th(u,o),u=this.G,u=h.O.truncate(u^u>>>32),o=h.O.Th(u,o),u=this.H,u=h.O.truncate(u^u>>>32),h.O.Th(u,o)},m.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},m.prototype.zy=function(u,o){var r=this.Zj(u),n=this.Zj(o);if((r&n)!=0)return 0;if((r|n)==0)return 4;var a=(r!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,p=o.y-u.y;if(c>p?(r&m.YC)!=0?((r&m.ju)!=0?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.Zj(u)):(n&m.YC)!=0?((n&m.ju)!=0?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)):r!=0?((r&m.ku)!=0?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.Zj(u)):((n&m.ku)!=0?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.Zj(o)):(r&m.ZC)!=0?((r&m.ku)!=0?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.Zj(u)):(n&m.ZC)!=0?((n&m.ku)!=0?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.Zj(o)):r!=0?((r&m.ju)!=0?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.Zj(u)):((n&m.ju)!=0?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)),(r&n)!=0)return 0}while((r|n)!=0);return a},m.prototype.Zj=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},m.prototype.Bi=function(u){return!this.B()&&(this.R()<=u||this.ca()<=u)},m.prototype.tb=function(u){return u instanceof h.h?Math.sqrt(this.iK(u)):Math.sqrt(this.px(u))},m.prototype.px=function(u){var o=0,r=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>r&&(r=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>r&&(r=n),o*o+r*r},m.prototype.iK=function(u){var o=0,r=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>r&&(r=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>r&&(r=n),o*o+r*r},m.prototype.cn=function(u){this.B()?u.Oa():u.K(this.v,this.C)},m.ju=1,m.ku=4,m.YC=3,m.ZC=12,m})();h.l=O})(B||(B={})),(function(h){var O,m;(m=O||(O={}))[m.initialize=0]="initialize",m[m.initializeRed=1]="initializeRed",m[m.initializeBlue=2]="initializeBlue",m[m.initializeRedBlue=3]="initializeRedBlue",m[m.sweep=4]="sweep",m[m.sweepBruteForce=5]="sweepBruteForce",m[m.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",m[m.sweepRedBlue=7]="sweepRedBlue",m[m.sweepRed=8]="sweepRed",m[m.sweepBlue=9]="sweepBlue",m[m.iterate=10]="iterate",m[m.iterateRed=11]="iterateRed",m[m.iterateBlue=12]="iterateBlue",m[m.iterateBruteForce=13]="iterateBruteForce",m[m.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",m[m.resetRed=15]="resetRed",m[m.resetBlue=16]="resetBlue";var u=(function(){function o(r,n){this.ci=r,this.dH=n}return o.prototype.nr=function(r,n,a){this.ci.JX(a,r,n,this.dH)},o.prototype.$p=function(r){return this.ci.Rr(r,this.dH)},o})();O=(function(){function o(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new h.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return o.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new h.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},o.prototype.ad=function(r,n){if(!this.Pv)throw h.i.Hb();var a=new h.l;a.K(n),this.fo.add(r),this.Eb.push(a)},o.prototype.Fp=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},o.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new h.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},o.prototype.JD=function(r,n){if(!this.Ov)throw h.i.Hb();var a=new h.l;a.K(n),this.fo.add(r),this.Eb.push(a)},o.prototype.iF=function(){if(!this.Ov)throw h.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},o.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new h.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},o.prototype.ED=function(r,n){if(!this.Nv)throw h.i.Hb();var a=new h.l;a.K(n),this.cw.add(r),this.qd.push(a)},o.prototype.hF=function(){if(!this.Nv)throw h.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},o.prototype.next=function(){if(this.Ic)return!1;for(var r=!0;r;)switch(this.Xb){case 0:r=this.Gz();break;case 1:r=this.rS();break;case 2:r=this.oS();break;case 3:r=this.qS();break;case 4:r=this.UX();break;case 5:r=this.QX();break;case 6:r=this.RX();break;case 7:r=this.SX();break;case 8:r=this.ux();break;case 9:r=this.iC();break;case 10:r=this.Uz();break;case 11:r=this.jT();break;case 12:r=this.gT();break;case 13:r=this.hT();break;case 14:r=this.iT();break;case 15:r=this.kJ();break;case 16:r=this.jJ();break;default:throw h.i.Qa()}return!this.Ic},o.prototype.aC=function(r){this.qa=r},o.prototype.uz=function(r){return this.Eb[r]},o.prototype.az=function(r){return this.qd[r]},o.prototype.nl=function(r){return this.fo.read(r)},o.prototype.hl=function(r){return this.cw.read(r)},o.Tz=function(r){return!(1&~r)},o.eq=function(r){return!(1&r)},o.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},o.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var n=this.Eb[r];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},o.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var n=this.Eb[r];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},o.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new h.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new h.ia(0)),this.ff.kr();for(var r=0;r<this.qd.length;r++){var n=this.qd[r];this.ff.Br(n.v,n.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},o.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.ff==null&&(this.ff=new h.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new h.ia(0)),this.rd.kr();for(var r=0;r<this.Eb.length;r++){var n=this.Eb[r];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.ff.kr(),r=0;r<this.qd.length;r++)n=this.qd[r],this.ff.Br(n.v,n.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),r=0;r<2*this.Eb.length;r++)this.Ld.add(r);for(r=0;r<2*this.qd.length;r++)this.Ef.add(r);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},o.prototype.UX=function(){var r=this.Ld.get(--this.pe),n=r>>1;return o.eq(r)?(this.rd.remove(n),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[n].v,this.Eb[n].C,this.qa),this.Vf=n,this.Xb=10,!0)},o.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},o.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},o.prototype.SX=function(){var r=this.Ld.get(this.pe-1),n=this.Ef.get(this.Rg-1),a=this.Rr(r,!0),c=this.Rr(n,!1);return a>c?this.ux():a<c?this.iC():o.Tz(r)?this.ux():o.Tz(n)?this.iC():this.ux()},o.prototype.ux=function(){var r=this.Ld.get(--this.pe),n=r>>1;if(o.eq(r))return this.Df!=-1&&this.Ij.get(n)!=-1?(this.Ad.jd(this.Df,this.Ij.get(n)),this.Ij.set(n,-1)):this.rd.remove(n),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(r=this.Ad.rc(this.Cf);r!=-1;){var a=this.Ad.getData(r);this.ff.vj(a),this.Hj.set(a,-1),a=this.Ad.lb(r),this.Ad.jd(this.Cf,r),r=a}return 0<this.ff.size()?(this.ow.EB(this.Eb[n].v,this.Eb[n].C,this.qa),this.Vf=n,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new h.jp),this.Ij=new h.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(n,this.Ad.addElement(this.Df,n)),this.Xb=7),!0},o.prototype.iC=function(){var r=this.Ef.get(--this.Rg),n=r>>1;if(o.eq(r))return this.Cf!=-1&&this.Hj.get(n)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(n)),this.Hj.set(n,-1)):this.ff.remove(n),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(r=this.Ad.rc(this.Df);r!=-1;){var a=this.Ad.getData(r);this.rd.vj(a),this.Ij.set(a,-1),a=this.Ad.lb(r),this.Ad.jd(this.Df,r),r=a}return 0<this.rd.size()?(this.oo.EB(this.qd[n].v,this.qd[n].C,this.qa),this.Af=n,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new h.jp),this.Hj=new h.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(n,this.Ad.addElement(this.Cf,n)),this.Xb=7),!0},o.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=4,!0},o.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var r=this.Ef.get(this.Rg)>>1;return this.ff.vj(r),this.Xb=7,!0},o.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var r=this.Ld.get(this.pe)>>1;return this.rd.vj(r),this.Xb=7,!0},o.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var r=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},o.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var r=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(r)||(this.Af=this.Rg,!1)},o.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},o.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},o.prototype.Kt=function(r,n,a){this.Am==null&&(this.Am=new h.Xt),a=new u(this,a),this.Am.sort(r,0,n,a)},o.prototype.JX=function(r,n,a,c){var p=this;r.Vd(n,a,(function(d,g){var w=p.Rr(d,c),x=p.Rr(g,c);return w<x||w==x&&o.eq(d)&&o.Tz(g)?-1:1}))},o.prototype.Rr=function(r,n){var a=.5*this.qa;return n?(n=this.Eb[r>>1],o.eq(r)?n.G-a:n.H+a):(n=this.qd[r>>1],o.eq(r)?n.G-a:n.H+a)},o})(),h.xC=O})(B||(B={})),(function(h){var O=(function(){function m(){}return m.construct=function(u,o,r,n,a,c){var p=new m;return p.v=u,p.G=o,p.Ye=r,p.C=n,p.H=a,p.Bg=c,p},m.prototype.Oa=function(){this.Ye=this.v=NaN},m.prototype.B=function(){return isNaN(this.v)},m.prototype.XS=function(){return isNaN(this.Ye)},m.prototype.K=function(u,o,r,n,a,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Ye=r,this.C=n,this.H=a,this.Bg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.Ye=u.z-.5*n,this.Bg=this.Ye+n):(this.v=u,this.G=o,this.Ye=r,this.C=u,this.H=o,this.Bg=r)},m.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Ye+=u.z,this.C+=u.x,this.H+=u.y,this.Bg+=u.z},m.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},m.prototype.Lk=function(u,o,r){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Ye)==0?this.Ye>r?this.Ye=r:this.Bg<r&&(this.Bg=r):this.Bg=this.Ye=r},m.prototype.Zb=function(u,o,r){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Ye=r,this.C=u,this.H=o,this.Bg=r):this.Lk(u,o,r);else if(u instanceof h.Nd)this.Zb(u.x,u.y,u.z);else{if(!(u instanceof m))throw h.i.N();u.B()||(this.Zb(u.v,u.G,u.Ye),this.Zb(u.C,u.H,u.Bg))}},m.prototype.construct=function(u,o,r){u.B()||o.B()?this.Oa():(this.v=u.oa,this.C=u.va,this.G=o.oa,this.H=o.va,this.Ye=r.oa,this.Bg=r.va)},m.prototype.nB=function(u){if(u==null||8>u.length)throw h.i.N();u[0]=new h.Nd(this.v,this.G,this.Ye),u[1]=new h.Nd(this.v,this.H,this.Ye),u[2]=new h.Nd(this.C,this.H,this.Ye),u[3]=new h.Nd(this.C,this.G,this.Ye),u[4]=new h.Nd(this.v,this.G,this.Bg),u[5]=new h.Nd(this.v,this.H,this.Bg),u[6]=new h.Nd(this.C,this.H,this.Bg),u[7]=new h.Nd(this.C,this.G,this.Bg)},m.prototype.Zw=function(u){if(u==null||u.length==0)this.Oa();else{var o=u[0];for(this.K(o.x,o.y,o.z),o=1;o<u.length;o++){var r=u[o];this.Lk(r.x,r.y,r.z)}}},m})();h.OK=O})(B||(B={})),(function(h){(function(O){O.Qa=function(){var m=Error();return m.message="Internal Error",m},O.Ie=function(){var m=Error();return m.message="Not Implemented",m},O.Xk=function(){var m=Error();return m.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",m},O.Hb=function(){var m=Error();return m.message="Invalid Call",m},O.N=function(m){var u=Error();return u.message="Illegal Argument Exception",m!==void 0&&(u.message+=": "+m),u},O.fu=function(m){var u=Error();return u.message=m!==void 0?"Runtime Exception: "+m:"Runtime Exception.",u},O.fa=function(m){var u=Error();return u.message="Geometry Exception: "+m,u},O.GK=function(){var m=Error();return m.message="Assert Failed Exception",m},O.ce=function(){var m=Error();return m.message="IndexOutOfBoundsException",m},O.WC=function(){var m=Error();return m.message="UserCancelException",m}})(h.i||(h.i={}))})(B||(B={})),(function(h){(h=h.bm||(h.bm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"})(B||(B={})),(function(h){var O=(function(){function o(r,n){this.Wa=r,this.FH=n,this.LH=-1,this.sl=!1}return o.prototype.qe=function(){},o.prototype.next=function(){if(++this.LH==this.FH.I())return null;var r=this.FH.Na(this.LH);r.scale(this.Wa.ec);var n=new h.Da;return this.Wa.sy(r,this.sl,n),n},o.prototype.La=function(){return 0},o})(),m=(function(){function o(r,n,a){this.Wa=r,this.rw=n,this.Xn=!1,this.co=a,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new h.Da,this.uk=[]}return o.prototype.qe=function(){},o.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var r=h.aa.jg(this.qq);return h.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}r=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var n=this.uk.length=0,a=new h.h,c=new h.h,p=[0];this.sd.Ha()&&8>this.FA;){var d=this.sd.ha();if(a.L(d.ac()),c.L(d.wc()),a.scale(this.Wa.ec),c.scale(this.Wa.ec),h.cj.Mu(a,c)?a.x=c.x:h.cj.Ku(a,c)&&(c.x=a.x),this.uk.length=0,h.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,a,c,this.Wa.QA,this.Wa.Zs,p,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(d=this.uk.slice(0),this.co.qG(this.co.da()-1,d,d.length-1)),h.cj.Lu(a,c)?(this.qq.Oa(),this.Wa.sy(a,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(p[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}r==null&&(r=new h.Da).Yk(null,0),this.OD(r),n++}if(this.bw[0]=0,0<n){for(p=this.sd.wb();0<n;)this.sd.li(),a.L(this.rw.Na(this.sd.wb())),c.L(this.rw.Na(this.sd.ik())),a.scale(this.Wa.ec),c.scale(this.Wa.ec),this.sl&&(h.cj.Mu(a,c)?a.x=c.x:h.cj.Ku(a,c)&&(c.x=a.x)),this.uk.length=0,h.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,c,a,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(r),n--;return a.L(this.rw.Na(this.sd.wb())),a.scale(this.Wa.ec),u.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,a,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.sd.Vb(p),this.sd.ha(),n=h.ta.kj(null,r,!0),h.Fg.Mk(r,n,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),r=h.aa.jg(this.qq),h.Fg.Mk(r,this.Wa.Aq,!0,!0,this.Wa.Ub)},o.prototype.OD=function(r){var n=this.uk[0],a=this.Nj[0]-1.570796326794897,c=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var p=this.di+1.570796326794897;a=p+3.141592653589793-(this.di-this.Nj[0])}else a=(p=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var d=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),g=!1;if(Math.abs(a-p)<=.5*this.Wa.ao)if(d){var w=r.Na(r.I()-2);w.scale(this.Wa.ec);var x=new h.ga(0);for(h.kb.Xy(this.Wa.Tb,this.Wa.kc,n.x,n.y,w.x,w.y,x),w=x.u;w<=p;)w+=6.283185307179586;for(;w>p;)w-=6.283185307179586;w<a&&(g=!0)}else g=!0;g?(r.DB(0,r.I()-1),this.sl||((n=new h.h).L(r.Na(r.I()-1)),n.scale(this.Wa.ec),-3.141592653589793>n.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<n.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),d||(a=.5*(a+p))):(d?((p=new h.h).L(n),p.scale(1/this.Wa.ec),r.wf(0,-1,p)):u.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],p,a,this.Wa.ao,this.sl,this.sk,r,NaN,NaN),this.FA+=1)}u.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,a,c,this.sl,this.sk,r),this.di=this.Gs[0]},o.prototype.xy=function(r,n){return this.Wa.xy(this.uk,r,this.Nj[0],this.Gs[0],this.sl,n)},o.prototype.La=function(){return 0},o})(),u=(function(){function o(){}return o.buffer=function(r,n,a,c,p,d){if(r==null)throw h.i.N("Geometry::Geodesic_bufferer::buffer");if(r.B())return new h.Da(r.description);var g=new o;g.Qg=n,g.Jc=h.cb.sc(n);var w=h.cb.vv(g.Jc);if(g.Ub=d,g.Tb=h.cb.ev(g.Jc),g.kc=w*(2-w),g.ec=g.Jc.Hd().ai,g.qa=g.Qg.Kn(),g.Aq=g.Jc.Kn(),g.Zs=g.Aq*g.ec,g.zq=1.570796326794897/g.ec,g.OY=3.141592653589793/g.ec,g.Js=6.283185307179586/g.ec,g.PY=g.Js/6,g.LA=0,g.NY=1.5707963267948966*g.Tb/g.LA,a==4?(g.ze=2,g.Wv=!0):(g.ze=a,g.Wv=!1),g.Ka=c,g.rb=Math.abs(c),isNaN(p)||.001>p?g.xX():g.$n=p,a=r.getType(),h.aa.yd(a)?((a=new h.Ta(r.description)).oc(r,!0),r=a,a=1607):a==197&&(a=new h.l,r.A(a),a.R()<=g.qa||a.ca()<=g.qa?((a=new h.Ta(r.description)).ad(r,!1),r=a,a=1607):((a=new h.Da(r.description)).ad(r,!1),r=a,a=1736)),g.yX(),h.aa.Rn(a)||g.zX(),g.rb<=.5*g.$n)return a!=1736?new h.Da(r.description):g.Wv?r:h.cj.Qr(r,g.Qg,g.ze,g.QA,-1,d);if(0>g.Ka&&a!=1736)return new h.Da(r.description);if(g.Wv&&h.aa.Hc(a)?(n=h.cj.Qr(r,n,4,NaN,g.$n,d),r=h.cb.zh(n,g.Qg,g.Jc)):r=h.cb.zh(r,g.Qg,g.Jc),(r=h.Hh.lj(r,g.Jc)).B())return new h.Da(r.description);switch(!g.Wv&&h.aa.Hc(a)&&(r=h.cj.pI(g.ec,r)),r=o.KX(r,g.Jc),a){case 1736:n=g.UN(r);break;case 1607:n=g.VN(r);break;case 550:n=g.SN(r);break;case 33:n=g.TN(r);break;default:throw h.i.fa("corrupted_geometry")}return(g=h.cb.zh(n,g.Jc,g.Qg)).Jl(r.description),g},o.prototype.UN=function(r){var n=new h.Da;r=new m(this,r,n),r=h.Gh.local().V(r,this.Jc,this.Ub).next(),r=h.ip.nj(r,this.Jc,2);var a=new h.Dd;return a.scale(1/this.ec,1/this.ec),n.Oc(a),n=h.ip.nj(n,this.Jc,2),0<=this.Ka?h.Gh.local().V(n,r,this.Jc,this.Ub):h.kp.local().V(n,r,this.Jc,this.Ub)},o.prototype.VN=function(r){return r=new m(this,r,null),r=h.Gh.local().V(r,this.Jc,this.Ub).next(),h.ip.nj(r,this.Jc,2)},o.prototype.SN=function(r){return r=new O(this,r),r=h.Gh.local().V(r,this.Jc,this.Ub).next(),h.ip.nj(r,this.Jc,2)},o.prototype.TN=function(r){(r=r.D()).scale(this.ec);var n=new h.Da;return this.sy(r,!1,n),h.ip.nj(n,this.Jc,2)},o.prototype.xy=function(r,n,a,c,p,d){var g=r[0],w=r[r.length-1],x=g.y>w.y?g.y:w.y,M=h.F.q(this.Tb,this.kc,g.y<w.y?g.y:w.y);if(x=h.F.q(this.Tb,this.kc,x),.001<this.LA-(M+n+this.rb)&&.001<this.LA+(x-n-this.rb))return!1;M=(n=a-1.570796326794897)-3.141592653589793,x=n+3.141592653589793;var $=(a=c+1.570796326794897)+3.141592653589793,I=[NaN],R=[NaN],N=[NaN],j=[NaN];if(c=!1,o.dJ(this.Tb,this.kc,this.rb,g,n,M,w,a,I,R),o.dJ(this.Tb,this.kc,this.rb,w,$,a,g,M,N,j),(a<I[0]&&I[0]<$||a<R[0]&&R[0]<$)&&(c=!0),c||(M<N[0]&&N[0]<n||M<j[0]&&j[0]<n)&&(c=!0),!c&&p)return!1;for(var z=[],D=r.length-1;0<=D;D--)z.push(r[D]);return d.Oa(),d.Yk(null,0),D=[0],o.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,r,n,a,p,D,d),o.Hr(this.Tb,this.kc,this.ec,this.rb,w,a,$,this.ao,p,D,d,I[0],R[0]),o.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,z,$,x,p,D,d),o.Hr(this.Tb,this.kc,this.ec,this.rb,g,M,n,this.ao,p,D,d,N[0],j[0]),r=!1,p||(r=this.IE(this.ec,d)),c||r},o.prototype.sy=function(r,n,a){a.Oa(),a.Yk(null,0),o.Hr(this.Tb,this.kc,this.ec,this.rb,r,-this.ao,6.283185307179586,this.ao,n,[0],a,NaN,NaN),n||this.IE(this.ec,a)},o.prototype.IE=function(r,n){var a=this.vO(r,n);return r=this.wO(r,n),a||r},o.prototype.vO=function(r,n){var a=n.I(),c=!1,p=new h.l;if(n.A(p),!h.s.Y(p.H*r,1.570796326794897)&&!h.s.Y(p.G*r,-1.570796326794897))return!1;var d=new h.h;for(--a;0<=a;a--)n.D(a,d),(d.y==p.H&&h.s.Y(d.y*r,1.570796326794897)||d.y==p.G&&h.s.Y(d.y*r,-1.570796326794897))&&(c=!0,this.OI(d,a,n));return c},o.prototype.wO=function(r,n){var a=n.Na(0),c=n.Na(n.I()-1);return 3.141592653589793<Math.abs(a.x-c.x)*r?(this.VV(n),!0):this.uO(n)},o.prototype.uO=function(r){return 0>r.Ke()&&(this.UV(r),!0)},o.prototype.OI=function(r,n,a){var c=a.I(),p=0<n?n-1:c-1;if(c=a.Na(n<c-1?n+1:0),p=a.Na(p),!h.s.Y(c.y,r.y)&&!h.s.Y(c.x,r.x)){var d=new h.h;d.ma(c.x,r.y),a.Cb(n,d)}h.s.Y(p.y,r.y)||h.s.Y(p.x,r.x)||((c=new h.h).ma(p.x,r.y),a.wf(0,n,c))},o.prototype.VV=function(r){var n=new h.Da,a=new h.Da,c=new h.Dd,p=r.Na(0),d=r.Na(r.I()-1),g=new h.h;p.x>d.x?(d=this.zq,c.gg(-this.Js,0)):(d=-this.zq,c.gg(this.Js,0)),n.add(r,!1),r.Oa(),a.add(n,!1),a.Oc(c),p=new h.l,a.A(p),p.W((this.Js-p.R())/2,0),p.G=-this.zq,p.H=this.zq;for(var w=0;w<a.I();w++)a.D(w,g),n.wf(0,-1,g);for(a.Oc(c),w=0;w<a.I();w++)a.D(w,g),n.wf(0,-1,g);a=n.Na(0),c=n.Na(n.I()-1),g.ma(c.x,d),n.wf(0,-1,g),g.ma(.5*(c.x+a.x),d),n.wf(0,-1,g),g.ma(a.x,d),n.wf(0,-1,g),n=h.Hh.ks(n,this.Jc,2,!0,p.v),n=h.Hh.ks(n,this.Jc,2,!0,p.C),n=h.Ud.clip(n,p,this.Aq,NaN),r.add(n,!1)},o.prototype.UV=function(r){var n=new h.l;r.A(n),n.W((this.Js-n.R())/2,0),n.G=-this.zq,n.H=this.zq,r.Yk(null,0);var a=new h.h;a.ma(n.v,n.G),r.wf(1,-1,a),a.ma(n.v,n.H),r.wf(1,-1,a),a.ma(.5*(n.v+n.C),n.H),r.wf(1,-1,a),a.ma(n.C,n.H),r.wf(1,-1,a),a.ma(n.C,n.G),r.wf(1,-1,a),a.ma(.5*(n.v+n.C),n.G),r.wf(1,-1,a)},o.qy=function(r,n,a,c,p,d,g,w,x,M,$){var I=null;x||((I=new h.h).Rc(),0<$.I()&&(I.L($.Na($.I()-1)),I.scale(a)));var R=new h.ga(0),N=new h.ga(0),j=new h.ga(0),z=new h.h,D=new h.h,U=d[d.length-1];a=1/a;for(var V=0;V<d.length;V++){var W=d[V];if(V==0)var Z=g;else V==d.length-1?Z=w:(h.kb.wd(r,n,U.x,U.y,W.x,W.y,null,null,R,p),Z=R.u-1.570796326794897);h.kb.yi(r,n,W.x,W.y,c,Z,N,j),x?D.ma(N.u,j.u):(z.ma(N.u,j.u),o.gJ(W.x,z.x,I.x,M),D.ma(M[0]+z.x,z.y),I.L(D)),D.scale(a),$.wf(0,-1,D)}},o.Hr=function(r,n,a,c,p,d,g,w,x,M,$,I,R){if(!(g-d<w)){var N=new h.ga(0),j=new h.ga(0),z=new h.h,D=new h.h,U=null;x||((U=new h.h).Rc(),0<$.I()&&(U.L($.Na($.I()-1)),U.scale(a)));var V=h.O.truncate(Math.ceil(d/w)),W=V++*w;for(W==d&&(W=V++*w),a=1/a;W<g+w&&(d<I&&I<W?(W=I,V--):d<R&&R<W&&(W=R,V--),!(W>=g));)h.kb.yi(r,n,p.x,p.y,c,W,N,j),x?D.ma(N.u,j.u):(z.ma(N.u,j.u),o.gJ(p.x,z.x,U.x,M),D.ma(M[0]+z.x,z.y),U.L(D)),D.scale(a),$.wf(0,-1,D),d=W,W=V++*w}},o.dJ=function(r,n,a,c,p,d,g,w,x,M){var $=new h.h,I=new h.h,R=new h.ga(0),N=new h.ga(0);for(h.kb.yi(r,n,c.x,c.y,a,p,R,N),$.ma(R.u,N.u),h.kb.yi(r,n,c.x,c.y,a,d,R,N),I.ma(R.u,N.u),a=new h.ga(0),h.kb.Xy(r,n,g.x,g.y,$.x,$.y,a),x[0]=a.u,h.kb.Xy(r,n,g.x,g.y,I.x,I.y,a),M[0]=a.u;x[0]<=M[0];)x[0]+=6.283185307179586;for(;x[0]>M[0];)x[0]-=6.283185307179586;for(;x[0]>=w;)x[0]-=6.283185307179586,M[0]-=6.283185307179586;for(;x[0]<w;)x[0]+=6.283185307179586,M[0]+=6.283185307179586},o.gJ=function(r,n,a,c){if(isNaN(a)){for(;3.141592653589793<c[0]+n-r;)c[0]-=6.283185307179586;for(;3.141592653589793<r-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-a?c[0]-=6.283185307179586:3.141592653589793<a-(c[0]+n)&&(c[0]+=6.283185307179586)},o.KX=function(r,n){var a=r.getType(),c=h.aa.Hc(a)?r.da():a==550?r.I():1;if(c==1)return r;var p=new h.ia(0);p.resize(c);for(var d=[],g=new h.l,w=0;w<c;w++){if(p.write(w,w),h.aa.Hc(a)){r.Rj(w,g);var x=g.sf()}else x=r.Na(w);x=h.XK.$X(n,x),d[w]=x}for(p.Vd(0,p.size,(function(M,$){return d[M]<d[$]?-1:d[M]>d[$]?1:0})),n=r.Ia(),w=0;w<c;w++)g=p.read(w),h.aa.Hc(a)?n.addPath(r,g,!0):n.Fd(r,g,g+1);return n},o.prototype.yX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var n=new h.h;n.ma(0,10*this.ec);var a=45*this.ec,c=new h.ga(0),p=new h.ga(0),d=new h.ga(0),g=new h.ga(0),w=new h.ga(0),x=new h.ga(0),M=new h.ga(0),$=new h.ga(0),I=new h.h,R=new h.h,N=new h.h,j=new h.h;h.kb.yi(this.Tb,this.kc,n.x,n.y,r,0,c,p),I.ma(c.u,p.u),h.kb.yi(this.Tb,this.kc,n.x,n.y,r,a,d,g),R.ma(d.u,g.u),c=new h.ga(0),p=new h.ga(0);for(var z=new h.ga(0);h.kb.yi(this.Tb,this.kc,n.x,n.y,r,.5*(0+a),w,x),N.ma(w.u,x.u),h.kb.wd(this.Tb,this.kc,I.x,I.y,R.x,R.y,c,p,null,2),h.kb.oj(this.Tb,this.kc,I.x,I.y,.5*c.u,p.u,M,$,2),j.ma(M.u,$.u),h.kb.wd(this.Tb,this.kc,N.x,N.y,j.x,j.y,z,null,null,2),!(z.u<=this.$n);)a*=.9,h.kb.yi(this.Tb,this.kc,n.x,n.y,r,a,d,g),R.ma(d.u,g.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(a-0))},o.prototype.zX=function(){var r=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);r=Math.min(r,.39269908169872414*this.Tb);var n=new h.h,a=new h.h;n.ma(0,10*this.ec),a.ma(10*this.ec,10*this.ec);var c=new h.ga(0),p=new h.ga(0),d=new h.ga(0);h.kb.wd(this.Tb,this.kc,n.x,n.y,a.x,a.y,d,c,p,this.ze);var g=new h.ga(0),w=new h.ga(0),x=new h.ga(0),M=new h.ga(0),$=new h.h,I=new h.ga(0),R=new h.ga(0),N=new h.ga(0),j=new h.ga(0),z=new h.ga(0),D=new h.ga(0),U=new h.ga(0),V=new h.ga(0),W=new h.ga(0),Z=new h.h,it=new h.h,ot=new h.h,dt=new h.h,ft=1;c=c.u,p=p.u+1.570796326794897,d=d.u,h.kb.yi(this.Tb,this.kc,n.x,n.y,r,c-1.570796326794897,R,N),Z.ma(R.u,N.u),h.kb.yi(this.Tb,this.kc,a.x,a.y,r,p,j,z),it.ma(j.u,z.u),R=new h.ga(0),N=new h.ga(0),p=new h.ga(0);for(var $t=new h.ga(0);h.kb.oj(this.Tb,this.kc,n.x,n.y,.5*(0+ft)*d,c,g,w,this.ze),$.ma(g.u,w.u),h.kb.wd(this.Tb,this.kc,n.x,n.y,$.x,$.y,null,null,I,this.ze),h.kb.yi(this.Tb,this.kc,$.x,$.y,r,I.u+1.570796326794897,D,U),ot.ma(D.u,U.u),h.kb.wd(this.Tb,this.kc,Z.x,Z.y,it.x,it.y,R,N,null,2),h.kb.oj(this.Tb,this.kc,Z.x,Z.y,.5*R.u,N.u,V,W,2),dt.ma(V.u,W.u),h.kb.wd(this.Tb,this.kc,ot.x,ot.y,dt.x,dt.y,p,null,null,2),!(p.u<=this.$n);)ft*=.9,h.kb.oj(this.Tb,this.kc,n.x,n.y,ft*d,c,x,M,this.ze),a.ma(x.u,M.u),h.kb.wd(this.Tb,this.kc,n.x,n.y,a.x,a.y,null,null,$t,this.ze),h.kb.yi(this.Tb,this.kc,a.x,a.y,r,$t.u+1.570796326794897,j,z),it.ma(j.u,z.u);1e5<(r=ft*d)&&(r=1e5),this.QA=r},o.prototype.xX=function(){var r=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/r&&(r=this.rb/500),.01>r&&(r=.01),this.$n=r},o})();h.VK=u})(B||(B={})),(function(h){var O=(function(){function m(){}return m.Mf=function(u,o){var r=new h.h;r.L(o),u.push(r)},m.up=function(u,o){u.add(o.x),u.add(o.y)},m.hB=function(u){u.Bh(u.size-2)},m.oB=function(u,o){o.ma(u.get(u.size-2),u.get(u.size-1))},m.Qr=function(u,o,r,n,a,c){if(u==null)throw h.i.N();var p=u.getType();if(u.B()||h.aa.Rn(p))return u;var d=new m;d.Qg=o,d.Jc=h.cb.sc(o);var g=h.cb.vv(d.Jc);if(d.Ub=c,d.Tb=h.cb.ev(d.Jc),d.kc=g*(2-g),d.ec=d.Jc.Hd().ai,d.Aq=d.Jc.Kn(),d.Zs=d.Aq*d.ec,d.AA=n,d.zA=a,d.ze=r,p==197?(r=new h.Da(u.description)).ad(u,!1):h.aa.yd(p)?(r=new h.Ta(u.description)).oc(u,!0):r=u,d.ze!=4){if((o=d.Qg.Nb(d.Jc)==0?h.cb.zh(r,d.Qg,d.Jc):h.Hh.lj(r,d.Jc)).B())return o;o=m.pI(d.ec,o),o=d.Zy(o),o=h.ip.nj(o,d.Jc,d.ze),d=h.cb.zh(o,d.Jc,d.Qg)}else{if(h.Eg.Sb(o)==2?(u=h.cb.ml(),(o=h.Xj.local().V(r,u,o,c))==u&&(o=new h.Da,u.copyTo(o))):o=h.Hh.lj(r,d.Jc),o.B())return o;d=d.CX(o)}return d},m.pI=function(u,o){var r=new h.l;if(o.xc(r),3.141592653589793>r.R()*u)return o;var n=!1;r=o.Ga();for(var a=new h.h,c=new h.h;r.$a();)for(;r.Ha();){var p=r.ha();if(a.L(p.ac()),c.L(p.wc()),a.scale(u),c.scale(u),3.141592653589793<Math.abs(a.x-c.x)){var d=m.Lu(a,c);if(!d){n=!0;break}if(6.283185307179586<Math.abs(a.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ia();var g=1<o.description.Aa,w=new h.h,x=new h.h,M=new h.h,$=new h.h,I=new h.Sa;for(r.Zi();r.$a();)for(var R=NaN,N=[0];r.Ha();){if(p=r.ha(),a.L(p.ac()),c.L(p.wc()),a.scale(u),c.scale(u),isNaN(R)?(m.Wi(a.x,NaN,N),x.L(a)):x.L(M),R=x.x,d=m.Lu(a,c)){if(6.283185307179586<c.x-a.x)for(;6.283185307179586<c.x-a.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-a.x)for(;-6.283185307179586>c.x-a.x;)c.x+=6.283185307179586;m.Wi(c.x,NaN,N),M.L(c)}else w.L(c),m.AU(w),m.Wi(w.x,R,N),M.ma(N[0]+w.x,w.y);.5>Math.abs(M.x-c.x)&&M.L(c),g?(p.Tw(0,I),$.L(x),$.scale(1/u),I.Cb($),(d=r.vm())?n.nf(I):n.lineTo(I),r.Qn()&&!o.dc(r.gb)&&(p.Tw(1,I),$.L(M),$.scale(1/u),I.Cb($),n.lineTo(I))):((d=r.vm())&&n.Hz(null,0),p=n.da()-1,$.L(x),$.scale(1/u),n.wf(p,-1,$),r.Qn()&&!o.dc(r.gb)&&($.L(M),$.scale(1/u),n.wf(p,-1,$)))}return n},m.tF=function(u,o,r,n,a,c,p,d,g,w,x,M){var $=new h.h,I=new h.h,R=0<n.compare(a);m.fJ(R,n,a,$,I),m.uF(u,o,r,$,I,c,NaN,p,d,g,w,null,x,M),R&&m.fC(g,w,null,x)},m.prototype.Zy=function(u){var o=u.Ia(),r=u.Ga(),n=[],a=null,c=null,p=1<u.description.Aa;p&&(a=new h.be(0),c=new h.ig);for(var d=[0],g=new h.h,w=new h.h,x=new h.h,M=new h.h;r.$a();)for(d[0]=0;r.Ha();){var $=r.ha();g.L($.ac()),w.L($.wc()),g.scale(this.ec),w.scale(this.ec);var I=0<g.compare(w);m.fJ(I,g,w,x,M),n.length=0,a?.Bh(0),0<this.AA?m.uF(this.Tb,this.kc,this.ze,x,M,this.AA,this.zA,this.Zs,null,null,null,p?a:null,n,d):m.aR(this.Tb,this.kc,this.ze,x,M,this.zA,this.Zs,p?a:null,n,d),I&&m.fC(null,null,p?a:null,n),n[0].L($.ac()),n[n.length-1].L($.wc());for(var R=1;R<n.length-1;R++)n[R].scale(1/this.ec);p?(I=m.eJ(I,$,c),m.TD(r.vm(),r.Qn()&&!u.dc(r.gb),$,I,a,n,o)):m.SD(r.vm(),r.Qn()&&!u.dc(r.gb),n,o)}return o},m.prototype.CX=function(u){var o=u.Ia(),r=u.Ga(),n=[],a=null,c=new h.ig,p=1<u.description.Aa;for(p&&(a=new h.be(0));r.$a();)for(;r.Ha();){var d=r.ha(),g=d.ac(),w=d.wc();g=0<g.compare(w),w=m.eJ(g,d,c),n.length=0,a?.Bh(0),m.BX(this.Tb,this.kc,this.ec,w,this.Qg,this.AA,this.zA,p?a:null,n),g&&m.fC(null,null,p?a:null,n),p?m.TD(r.vm(),r.Qn()&&!u.dc(r.gb),d,w,a,n,o):m.SD(r.vm(),r.Qn()&&!u.dc(r.gb),n,o)}return o},m.SD=function(u,o,r,n){u&&n.Hz(null,0),u=n.da()-1;var a=r.slice(0);n.qG(u,a,a.length-1),o&&n.wf(u,-1,r[r.length-1])},m.TD=function(u,o,r,n,a,c,p){var d=new h.Sa;if(r.To(d),u?p.nf(d):p.lineTo(d),2<c.length){u=n.Qb();for(var g=1;g<c.length-1;g++){var w=n.NG(a.get(g)*u);n.Tw(w,d),d.Cb(c[g]),p.lineTo(d)}}o&&(r.Po(d),p.lineTo(d))},m.uF=function(u,o,r,n,a,c,p,d,g,w,x,M,$,I){var R=new h.ga(0),N=new h.ga(0),j=new h.ga(0);h.kb.wd(u,o,n.x,n.y,a.x,a.y,j,R,N,r),j=j.u;var z=R=R.u;0>z&&(z+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),g!=null&&(g[0]=j),w!=null&&(w[0]=z),x!=null&&(x[0]=N),w=g=NaN,M!=null&&(g=((w=h.F.Ah(u,o))-(x=h.F.q(u,o,n.y)))/j,w=(w+x)/j),x=m.Mu(n,a),N=m.Ku(n,a),z=x||N;var D=m.FE(n,a,d),U=new h.ga(0),V=new h.ga(0),W=new h.h,Z=new h.h,it=new h.h;m.Wi(n.x,NaN,I);var ot=[I[0]];if(j<=c)m.Mf($,n),m.Wi(a.x,NaN,I),M?.add(0),z?(x&&m.kB(n,a,M,$),N&&m.iB(n,a,M,$)):D?m.jB(n,a,R,g,w,M,$):0<p&&(Z.ma(n.x-ot[0],n.y),W.ma(a.x-I[0],a.y),m.Yy(u,o,r,n,j,R,Z,W,0,1,p,M,$,ot)),m.Mf($,a);else{var dt=j/((c=1+h.O.truncate(Math.ceil(j/c)))-1),ft=new h.h,$t=0;m.Mf($,n),ft.L(n),Z.ma(n.x-I[0],n.y),M?.add(0);for(var ut=1;ut<c;ut++){if(ut<c-1){h.kb.oj(u,o,n.x,n.y,ut*dt,R,U,V,r),W.ma(U.u,V.u),m.Wi(W.x,ft.x,I),it.ma(I[0]+W.x,W.y);var qt=ut/(c-1)}else m.Wi(a.x,NaN,I),W.ma(a.x-I[0],a.y),it.L(a),qt=1;z?(ut==1&&x&&m.kB(n,it,M,$),ut==c-1&&N&&m.iB(ft,a,M,$)):D?m.EE(ft,it,d)&&(n.x<a.x?ft.x>it.x&&(I[0]+=6.283185307179586,it.ma(I[0]+W.x,W.y)):ft.x<it.x&&(I[0]-=6.283185307179586,it.ma(I[0]+W.x,W.y)),m.jB(ft,it,R,g,w,M,$)):0<p&&m.Yy(u,o,r,n,j,R,Z,W,$t,qt,p,M,$,ot),m.Mf($,it),M?.add(qt),ft.L(it),Z.L(W),ot[0]=I[0],$t=qt}}},m.aR=function(u,o,r,n,a,c,p,d,g,w){var x=new h.ga(0),M=new h.ga(0),$=new h.ga(0);h.kb.wd(u,o,n.x,n.y,a.x,a.y,$,x,M,r),M=$.u,x=x.u;var I=$=NaN;if(d!=null){I=h.F.Ah(u,o);var R=h.F.q(u,o,n.y);$=(I-R)/M,I=(I+R)/M}R=m.Mu(n,a);var N=m.Ku(n,a),j=R||N;p=m.FE(n,a,p);var z=m.Lu(n,a);z=j||p||z,m.Wi(n.x,NaN,w);var D=new h.h;m.Mf(g,n),D.L(n),d?.add(0),z?(j?(R&&m.kB(n,a,d,g),N&&m.iB(n,a,d,g)):p&&m.jB(n,a,x,$,I,d,g),m.Wi(a.x,NaN,w),m.Mf(g,a)):M<=c?(m.Wi(a.x,NaN,w),m.Mf(g,a)):($=new h.h,p=new h.h,$.L(n),p.L(a),$.x-=w[0],p.x-=w[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),m.Yy(u,o,r,n,M,x,$,p,0,1,c,d,g,w),m.Mf(g,a),m.Wi(a.x,NaN,w)),d?.add(1)},m.Yy=function(u,o,r,n,a,c,p,d,g,w,x,M,$,I){var R=new h.h,N=new h.h;R.ma(p.x+I[0],p.y),new h.ga(0),new h.ga(0),new h.ga(0),new h.ga(0);var j=new h.ga(0),z=new h.ga(0),D=new h.ga(0),U=new h.h,V=new h.h,W=new h.h,Z=new h.h;U.L(p),V.L(d),p=new h.be(0),d=new h.be(0),m.up(p,V),d.add(w);var it=new h.h,ot=new h.yb,dt=[];for(m.YJ(4,dt);0<p.size;){for(var ft,$t=!1,ut=NaN,qt=0;3>qt;qt++)if(ft=dt[qt]*w+(1-dt[qt])*g,h.kb.oj(u,o,n.x,n.y,ft*a,c,j,z,r),W.ma(j.u,z.u),qt==0&&(ut=ft,Z.L(W)),m.WW(U,W,V,ot),ot.hc(ot.fe(W,!0),it),h.kb.wd(u,o,W.x,W.y,it.x,it.y,D,null,null,2),D.u>x){$t=!0;break}$t?(V.L(Z),w=ut,m.up(p,V),d.add(w)):(m.hB(p),d.En(d.size-1,1,d.size-1),0<p.size&&(m.Wi(V.x,R.x,I),N.ma(I[0]+V.x,V.y),m.Mf($,N),R.L(N),M?.add(w),U.L(V),g=w,m.oB(p,V),w=d.get(d.size-1)))}},m.BX=function(u,o,r,n,a,c,p,d,g){var w=new h.h,x=new h.h,M=new h.h,$=new h.h,I=new h.h,R=new h.h,N=new h.h,j=new h.h,z=new h.h,D=new h.h,U=new h.ga(0),V=new h.ga(0),W=new h.h,Z=[[],[]],it=h.Eg.Sb(a)==1;a=a.Xd(0);var ot=n.ac(),dt=n.wc();it?(R.ma(ot.x*r,ot.y*r),N.ma(dt.x*r,dt.y*r)):(Z[0][0]=ot.x,Z[0][1]=ot.y,Z[1][0]=dt.x,Z[1][1]=dt.y,h.cb.vt(),R.x=Z[0][0]*r,R.y=Z[0][1]*r,N.x=Z[1][0]*r,N.y=Z[1][1]*r);var ft=0,$t=0,ut=1,qt=n.Pn();w.L(ot),x.L(dt),dt=new h.be(0);var Ut=new h.be(0),le=new h.be(0);m.up(dt,x),m.up(Ut,N),le.add(ut),m.Mf(g,w),d?.add($t);var Ee=[],hi=0<p?qt?5:3:qt?5:1;m.YJ(hi,Ee);for(var Ne=new h.ga(0),ue=new h.ga(0),Vt=new h.ga(0),te=new h.ga(0),He=new h.ga(0),De=new h.ga(0),ds=new h.ga(0);0<Ut.size;){var oe=!1,nr=NaN;for(h.kb.wd(u,o,R.x,R.y,N.x,N.y,Ne,ue,null,2),ot=0;ot<hi&&!(ot==0&&(!qt&&0>=p&&Ne.u<=c&&3.141592653589793>Math.abs(R.x-N.x)||n.Ux($t,ut)<=a));ot++){var ve=Ee[ot]*ut+(1-Ee[ot])*$t;if(n.hc(ve,M),it?j.ma(M.x*r,M.y*r):(Z[0][0]=M.x,Z[0][1]=M.y,h.cb.vt(),j.x=Z[0][0]*r,j.y=Z[0][1]*r),ot==0&&(nr=ve,I.L(M),D.L(j),0<c&&(Ne.u>c||3.141592653589793<=Math.abs(R.x-N.x)))){oe=!0;break}if(qt&&0<c){if(h.kb.wd(u,o,R.x,R.y,j.x,j.y,Vt,null,null,2),Vt.u>c||3.141592653589793<=Math.abs(R.x-j.x)){oe=!0;break}}else if(0<p){if(qt?($.NS(w,x,Ee[ot]),it?z.ma($.x*r,$.y*r):(Z[0][0]=$.x,Z[0][1]=$.y,h.cb.vt(),z.x=Z[0][0]*r,z.y=Z[0][1]*r)):($.L(M),z.L(j)),h.kb.wd(u,o,R.x,R.y,z.x,z.y,te,null,null,2),!(te.u<=Ne.u)){oe=!0;break}if(h.kb.oj(u,o,R.x,R.y,te.u,ue.u,U,V,2),W.ma(U.u,V.u),h.kb.wd(u,o,W.x,W.y,j.x,j.y,He,null,null,2),He.u>p){oe=!0;break}if(qt){if(h.kb.wd(u,o,W.x,W.y,z.x,z.y,De,null,null,2),De.u>p){oe=!0;break}if(h.kb.wd(u,o,z.x,z.y,j.x,j.y,ds,null,null,2),ds.u>p){oe=!0;break}}}}oe?(x.L(I),N.L(D),ut=nr,m.up(dt,x),m.up(Ut,N),le.add(ut)):(m.hB(dt),m.hB(Ut),le.En(le.size-1,1,le.size-1),m.Mf(g,x),ft+=Ne.u,d?.add(ft),0<Ut.size&&(w.L(x),R.L(N),$t=ut,m.oB(dt,x),m.oB(Ut,N),ut=le.get(le.size-1)))}if(d!=null)for(u=1/ft,ot=0;ot<d.size;ot++)d.write(ot,d.read(ot)*u)},m.fC=function(u,o,r,n){n.reverse(),r?.ni(0,r.size,1),r=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=r)},m.fJ=function(u,o,r,n,a){u?(n.L(r),a.L(o)):(n.L(o),a.L(r))},m.eJ=function(u,o,r){return u?(r.create(o.getType()),o.copyTo(r.get()),r.get().reverse(),r.get()):o},m.Wi=function(u,o,r){if(isNaN(o)){for(;3.141592653589793<r[0]-u;)r[0]-=6.283185307179586;for(;3.141592653589793<u-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+u-o?r[0]-=6.283185307179586:3.141592653589793<o-(r[0]+u)&&(r[0]+=6.283185307179586)},m.WW=function(u,o,r,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Dc(u),3.141592653589793<=r.x-u.x?n.Ql(r.x-6.283185307179586,r.y):3.141592653589793<=u.x-r.x?n.Ql(r.x+6.283185307179586,r.y):n.Ql(r.x,r.y)):(n.Dc(r),3.141592653589793<=u.x-r.x?n.Ql(u.x-6.283185307179586,u.y):3.141592653589793<=r.x-u.x?n.Ql(u.x+6.283185307179586,u.y):n.Ql(u.x,u.y))},m.YJ=function(u,o){for(var r=0;r<u;r++){var n=Math.ceil(r/2)/(u+1);r%2!=0&&(n=-n),o[r]=.5+n}},m.Mu=function(u,o){return!!(h.s.Y(u.y,1.570796326794897)&&!h.s.Y(o.y,1.570796326794897)||h.s.Y(u.y,-1.570796326794897)&&!h.s.Y(o.y,-1.570796326794897))},m.Ku=function(u,o){return!!(h.s.Y(o.y,1.570796326794897)&&!h.s.Y(u.y,1.570796326794897)||h.s.Y(o.y,-1.570796326794897)&&!h.s.Y(u.y,-1.570796326794897))},m.FE=function(u,o,r){return!(!m.EE(u,o,r)||h.s.Y(u.y,1.570796326794897)||h.s.Y(u.y,-1.570796326794897)||h.s.Y(o.y,1.570796326794897)||h.s.Y(o.y,-1.570796326794897))},m.EE=function(u,o,r){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=r},m.Lu=function(u,o){return!!(h.s.Y(u.y,1.570796326794897)&&h.s.Y(o.y,1.570796326794897)||h.s.Y(u.y,-1.570796326794897)&&h.s.Y(o.y,-1.570796326794897))},m.kB=function(u,o,r,n){if(0<u.y){var a=new h.h;a.ma(o.x,1.570796326794897)}else(a=new h.h).ma(o.x,-1.570796326794897);h.s.Y(u.x,a.x)||h.s.Y(o.y,a.y)||(m.Mf(n,a),r?.add(0))},m.iB=function(u,o,r,n){if(0<o.y){var a=new h.h;a.ma(u.x,1.570796326794897)}else(a=new h.h).ma(u.x,-1.570796326794897);h.s.Y(o.x,a.x)||h.s.Y(u.y,a.y)||(m.Mf(n,a),r?.add(1))},m.jB=function(u,o,r,n,a,c,p){h.s.Cd(r)?(0<1.570796326794897-u.y&&((r=new h.h).ma(u.x,1.570796326794897),m.Mf(p,r),c?.add(n)),0<1.570796326794897-o.y&&((r=new h.h).ma(o.x,1.570796326794897),m.Mf(p,r),c?.add(n))):(0<1.570796326794897+u.y&&((r=new h.h).ma(u.x,-1.570796326794897),m.Mf(p,r),c?.add(a)),0<1.570796326794897+o.y&&((r=new h.h).ma(o.x,-1.570796326794897),m.Mf(p,r),c?.add(a)))},m.AU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},m})();h.cj=O})(B||(B={})),(function(h){h.ip=(function(){function O(){}return O.nj=function(m,u,o){if(m==null||u==null||!h.cb.Wc(u))throw h.i.N();if(m.B())return m;var r=m,n=r.getType();if(h.aa.Hc(n)){r=h.Hh.lj(m,u),m=new h.l,r.A(m),n=h.ta.Wd(u,m,!1);for(var a=h.cb.gh(u),c=Math.floor((m.v-a.v)/a.R())*a.R()+a.v;c<m.C;)c>m.v+n&&c<m.C-n&&(r=h.Hh.ks(r,u,o,!0,c)),c+=a.R()}else{if(n==197)return(m=new h.Da(r.description)).ad(r,!1),O.nj(m,u,o);if(h.aa.yd(n))return(m=new h.Ta(r.description)).oc(r,!0),O.nj(m,u,o)}return O.Uy(r,u)},O.Uy=function(m,u){if(m==null||u==null||!h.cb.Wc(u))throw h.i.N();if(m.B())return m;var o=m.getType();return o==197?(o=new h.Da(m.description)).ad(m,!1):h.aa.yd(o)?(o=new h.Ta(m.description)).oc(m,!0):o=m,(o=h.Hh.lj(o,u)).B()?o:h.Eg.Sb(u)==1?h.Hh.Fn(o,u,0,o!=m,0):O.NQ(o,u,o!=m)},O.NQ=function(m,u,o){if(!h.cb.Wc(u))throw h.i.N();if(m.B())return m;var r=h.cb.bf(u),n=-180*r;return r*=360,h.Eg.Sb(u)==2&&(r=(n=h.cb.gh(u)).C,r-=n=n.v),h.Hh.Hp(m,n,r,u,o,0,!0)},O})()})(B||(B={})),(function(h){h.BY=(function(){function O(){}return O.P=function(m){return 0>m?-m:m},O.Mb=function(m,u){return 0<=u?O.P(m):-O.P(m)},O.Y=function(m,u){return m==u||O.P(m-u)<=O.JC*(1+(O.P(m)+O.P(u))/2)},O.Cd=function(m){return m==0||O.P(m)<=O.JC},O.Ah=function(m,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return m/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*O.EL},O.EL=1.5707963267948966,O.JC=3552713678800501e-30,O})()})(B||(B={})),(function(h){var O=function(u){this.Wf=u,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};h.DY=O;var m=(function(){function u(o){o===void 0&&(o=null),this.Cj=null,this.Un=!1,o!==null&&(this.Cj=new O(o))}return u.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},u.prototype.Of=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Cj=this.Cj,o.Un=this.Un},u.prototype.Qz=function(){this.Un=!this.Un},u.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},u.prototype.LJ=function(o){if(0>=o)throw h.i.N();if(o!=this.Ec()){if((o=h.pf.geogtran(o))==null)throw h.i.N("Geogtran not found.");this.Cj=new O(o)}},u.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},u.prototype.tX=function(o){if(o==null)throw h.i.N();var r=null;try{r=h.pf.fromString(h.Sc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.N()}this.Cj=new O(r)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Ec()||this.Ec()!=o.Ec())&&!this.qm().isEqual(o.qm()))&&this.Un==o.Un},u.prototype.toString=function(){var o="GeographicTransformation: "+this.Bz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,r){var n=new u;return n.LJ(o),r&&n.Qz(),n},u.uP=function(o,r){var n=new u;return n.tX(o),r&&n.Qz(),n},u})();h.Dx=m})(B||(B={})),(function(h){var O=(function(){function u(){}return u.construct=function(o,r,n,a){var c=new u;return c.hw=o,c.iw=r,c.QY=n,c.RY=a,c},u.Ey=function(o,r){return o.hw==r.hw?o.iw==r.iw?0:o.iw<r.iw?-1:1:o.hw<r.hw?-1:1},u})(),m=(function(){function u(){this.yT=[],this.zT=[],this.qp()}return u.kz=function(){return u.jK==null&&(u.jK=new u),u.jK},u.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},u.prototype.iD=function(o){try{var r=[];r=r.sort(O.Ey);for(var n=0;n<r.length;n++)o.push(r[n])}catch{}},u})();h.CY=m})(B||(B={})),(function(h){var O=(function(){function m(){}return m.prototype.yD=function(u){this.Fk=u},m.prototype.WM=function(u){this.Fb=u},m.prototype.xD=function(u){this.zo=u},m.CE=function(u){return!(u.B()||u.getType()!=1607&&u.getType()!=1736)},m.AE=function(u){return!(u.B()||u.getType()!=1607&&u.getType()!=1736||20>u.I())},m.BE=function(u){return!(u.B()||u.getType()!=1607&&u.getType()!=1736||20>u.I())},m})();h.Uk=O})(B||(B={})),(function(h){h.$b=(function(){function O(){}return O.TT=function(m){var u=new h.Da;return u.sx(m.es(),m.gs()),u.yj(m.es(),m.fs()),u.yj(m.ds(),m.fs()),u.yj(m.ds(),m.gs()),u},O.zh=function(m,u){return m===null?null:h.Hx.local().V(m,u,null)},O.jY=function(m,u){var o=h.Gh.local();return m=new h.Zc(m),o.V(m,u,null).next()},O.im=function(m,u,o){return h.kp.local().V(m,u,o,null)},O.ep=function(m,u,o){return h.Kx.local().V(m,u,o,null)},O.VX=function(m,u,o){var r=h.Kx.local();for(m=new h.Zc(m),u=new h.Zc(u),o=r.V(m,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},O.Nb=function(m,u,o){return h.dj.local().V(3,m,u,o,null)},O.TP=function(m,u,o){return h.dj.local().V(4,m,u,o,null)},O.RS=function(m,u,o){var r=h.Xj.local();for(m=new h.Zc(m),u=new h.Zc(u),o=r.V(m,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},O.QP=function(m,u,o){var r=h.kp.local();for(m=new h.Zc(m),u=new h.Zc(u),o=r.V(m,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},O.Ea=function(m,u,o){return h.Xj.local().V(m,u,o,null)},O.QS=function(m,u,o){if((m=h.Xj.local().V(m,u,o,null,1))===null)return[];if(m.getType()===550){for(u=[],o=0;o<m.wa;o++)u.push(m.KR(o));return u}return m.getType()===33?[m]:[]},O.qY=function(m,u,o){return h.dj.local().V(2,m,u,o,null)},O.contains=function(m,u,o){return h.dj.local().V(1,m,u,o,null)},O.BP=function(m,u,o){return h.dj.local().V(16,m,u,o,null)},O.touches=function(m,u,o){return h.dj.local().V(8,m,u,o,null)},O.DU=function(m,u,o){return h.dj.local().V(32,m,u,o,null)},O.TS=function(m,u,o){return h.dj.local().V(1073741824,m,u,o,null)},O.yB=function(m,u,o,r){return h.zL.local().V(m,u,o,r,null)},O.tb=function(m,u,o,r){var n=null;if(o!=null){if(n=o.Hd(),r!=null&&n.Ec()!=r.Ec()&&n.od!=r.od)throw h.i.Xk()}else if(r!=null)throw h.i.N();return m=h.rL.local().V(m,u,null),n!==null&&r!==null&&(m=h.Tc.Nh(m,n,r)),m},O.clip=function(m,u,o){return h.kL.local().V(m,h.l.construct(u.es(),u.gs(),u.ds(),u.fs()),o,null)},O.dl=function(m,u,o){if(m==null||u==null)return null;for(m=h.mL.local().V(!0,m,u,o,null),u=[];(o=m.next())!=null;)o.B()||u.push(o);return u.slice(0)},O.MN=function(m,u,o,r,n,a,c,p){if(n===!0)return O.NN(m,u,o,r,a,c,p);if(n=o,u!=null){if(c=u.Hd(),r!=null&&c.Ec()!=r.Ec()){if(c.od!=r.od)throw h.i.Xk();n=[],h.Tc.XE(o,o.length,r,c,n)}}else if(r!=null)throw h.i.N();if(o=h.AC.local(),a){for(m=new h.Zc(m),u=o.V(m,u,n,a,null),m=[];(a=u.next())!=null;)m.push(a);a=m.slice(0)}else for(a=[],r=0;r<m.length;r++)a[r]=o.V(m[r],u,n[r],null);return a},O.NN=function(m,u,o,r,n,a,c){if(u===null||(r==null&&(r=u.Ec()!==4326?u.Hd():h.Tc.Zg(9001)),r.od!==0))throw h.i.N();if(h.Tc.XE(o,o.length,r,h.Tc.Zg(9001),o),r=h.FC.local(),n){for(m=new h.Zc(m),u=r.V(m,u,a,o,c,!1,n,null),o=[];(a=u.next())!=null;)o.push(a);n=o.slice(0)}else{n=[];for(var p=0;p<m.length;p++)n[p]=r.V(m[p],u,a,o[p],c,!1,null)}return n},O.buffer=function(m,u,o,r,n,a,c){var p=o;if(n===!1){if(u!=null){if(n=u.Hd(),r!=null&&n.Ec()!=r.Ec()){if(n.od!=r.od)throw h.i.Xk();p=h.Tc.Nh(o,r,n)}}else if(r!=null)throw h.i.N();m=h.AC.local().V(m,u,p,null)}else{if(u===null||(r==null&&(r=u.Ec()!==4326?u.Hd():h.Tc.Zg(9001)),r.od!==0))throw h.i.N();p=h.Tc.Nh(o,r,h.Tc.Zg(9001)),m=h.FC.local().V(m,u,a,p,c,!1,null)}return m},O.BU=function(m,u,o,r,n,a,c){if(u!=null){var p=u.Hd();if(c!=null&&p.Ec()!=c.Ec()){if(p.od!=c.od)throw h.i.Xk();o=h.Tc.Nh(o,c,p)}}else if(c!=null)throw h.i.N();for(m=new h.Zc(m),u=h.IC.local().V(m,u,o,r,n,a,null),o=[];(r=u.next())!=null;)o.push(r);return o.slice(0)},O.offset=function(m,u,o,r,n,a,c){if(u!=null){var p=u.Hd();if(c!=null&&p.Ec()!=c.Ec()){if(p.od!=c.od)throw h.i.Xk();o=h.Tc.Nh(o,c,p)}}else if(c!=null)throw h.i.N();return h.IC.local().V(m,u,o,r,n,a,null)},O.iP=function(m){return h.CC.local().V(m,null)},O.jP=function(m,u){var o=h.CC.local();for(m=new h.Zc(m),u=o.V(m,u,null),o=[];(m=u.next())!=null;)o.push(m);return o},O.nz=function(m,u,o){return h.Ix.local().nz(m,u,o)},O.oz=function(m,u){return h.Ix.local().oz(m,u)},O.pz=function(m,u,o,r){return h.Ix.local().pz(m,u,o,r)},O.eC=function(m,u){return h.Yl.local().V(m,u,!1,null)},O.dT=function(m,u){return h.Yl.local().rs(m,u,null)},O.QQ=function(m,u,o,r,n){var a=h.EC.local();if(u!=null){if(u=u.Hd(),n!=null&&u.Ec()!=n.Ec()){if(u.od!=n.od)throw h.i.Xk();o=h.Tc.Nh(o,n,u)}}else if(n!=null)throw h.i.N();return a.V(m,o,r,null)},O.Qr=function(m,u,o,r){var n=h.Xl.local();if(u!=null){if(u=u.Hd(),r!=null&&u.Ec()!=r.Ec()){if(u.od!=r.od)throw h.i.Xk();o=h.Tc.Nh(o,r,u)}}else if(r!=null)throw h.i.N();return n.V(m,o,null)},O.Wy=function(m,u,o,r,n){n===void 0&&(n=0);var a=h.tL.local();if(n==4||n!==0)throw h.i.Ie();if(r!==null){if(r.od!==0)throw h.i.N("Unit must be a linear unit type");o=h.Tc.Nh(o,r,h.Tc.Zg(9001))}return a.V(m,o,u,n,null)},O.WQ=function(m,u,o,r){if(m===null)return 0;if(r==4||r!==0)throw h.i.Ie();if(m.getType()==197)m=O.TT(m);else if(m.getType()!=1736)return 0;if(r=h.cb.sc(u),m=h.cb.zh(m,u,r),m=h.UK.XQ([m])[0],o!==null){if(o.od!==2)throw h.i.N("Unit must be a area unit type");m=h.Tc.Nh(m,h.Tc.Zg(109404),o)}return m},O.ZQ=function(m,u,o,r){if(m=h.vL.local().V(m,u,r,null),o!==null){if(o.od!==0)throw h.i.N("Unit must be a linear unit type");m=h.Tc.Nh(m,h.Tc.Zg(9001),o)}return m},O.JU=function(m,u,o){if(m===null)return 0;var r=null;if(u!=null){if((r=u.Hd()).od==0&&(r=h.Tc.aG(r))==null&&o!==null)throw h.i.N();if(o!=null&&r.Ec()!=o.Ec()&&r.od!=o.od)throw h.i.Xk()}else if(o!=null)throw h.i.N();return m.getType()==1736||m.getType()==197?(m=m.Ke(),o!==null?h.Tc.Nh(m,r,o):m):0},O.KU=function(m,u,o){if(m===null||m.B()||1>m.Db())return 0;var r=null;if(u!=null){if(r=u.Hd(),o!=null&&r.Ec()!=o.Ec()&&r.od!=o.od)throw h.i.Xk()}else if(o!=null)throw h.i.N();m.getType()==1736||m.getType()==197?u=m.mg():h.aa.yd(m.getType())?(u=new h.Ta(m.description)).oc(m,!0):u=m,m=0,u=u.Ga();for(var n=new h.h,a=new h.h;u.$a();)for(;u.Ha();){var c=u.ha();c.Yp(n),c.Tr(a),m+=h.h.tb(n,a)}return r!==null&&o!==null&&(m=h.Tc.Nh(m,r,o)),m},O.fP=function(m){return m.points!==void 0?O.mS(m,m.hasZ!==void 0&&m.hasZ,m.hasM!==void 0&&m.hasM):m.rings!==void 0?O.lG(m.rings,m.hasZ!==void 0&&m.hasZ,m.hasM!==void 0&&m.hasM,"P"):m.paths!==void 0?O.lG(m.paths,m.hasZ!==void 0&&m.hasZ,m.hasM!==void 0&&m.hasM,"L"):m.x!==void 0?O.nS(m):m.xmin!==void 0?O.lS(m):null},O.nS=function(m){if(m.x==null||m.x=="NaN")return new h.Sa;var u=new h.Sa(m.x,m.y);return m.z!==void 0&&m.z!==null&&u.wX(m.z),m.m!==void 0&&m.m!==null&&u.hX(m.m),u},O.lS=function(m){if(m.xmin==null||m.xmin=="NaN")return new h.Fh;var u=new h.Fh(m.xmin,m.ymin,m.xmax,m.ymax);return m.zmin!==void 0&&m.zmin!==null&&u.setInterval(1,0,m.zmin,m.zmax),m.mmin!==void 0&&m.mmin!==null&&u.setInterval(2,0,m.mmin,m.mmax),u},O.mS=function(m,u,o){var r=0,n=new h.de,a=3*m.points.length;a%2!=0&&a++,2>a&&(a=2);var c=h.O.truncate(3*m.points.length/2);4>c?c=4:16>c&&(c=16),a=h.Yc.Dn(a,0);var p=h.Yc.Dn(c);c=h.Yc.Dn(c);for(var d=0;d<m.points.length;d++)a.write(2*d,m.points[d][0]),a.write(2*d+1,m.points[d][1]),p.write(d,u||o?m.points[d][2]:NaN),c.write(d,o&&u?m.points[d][3]:NaN),r++;return r!=0&&(n.resize(r),n.hn(0,a)),u&&(n.re(1),n.hn(1,p)),o&&(n.re(2),n.hn(2,u==0?p:c)),n.Pc(16777215),n},O.lG=function(m,u,o,r){var n=0,a=2;if(r=="P"){var c=new h.Da;n=1,a=3}else c=new h.Ta;for(var p=h.Yc.Oh(0),d=h.Yc.Mr(0),g=0,w=0,x=[],M=[],$=0;$<m.length;$++){var I=m[$].length;if(x[$]=!1,r==="P"&&m[$][0][0]===m[$][m[$].length-1][0]&&m[$][0][1]===m[$][m[$].length-1][1]){var R=o==0||m[$][0][3]===m[$][m[$].length-1][3]||m[$][0][3]===void 0&&m[$][m[$].length-1][3]===void 0;(u==0||m[$][0][2]===m[$][m[$].length-1][2]||m[$][0][2]===void 0&&m[$][m[$].length-1][2]===void 0)&&R&&(x[$]=!0,--I)}I>=a?(M[$]=!1,w+=1,p.add(g),d.add(n),g+=I):M[$]=!0}for((r=3*g)%2!=0&&r++,2>r&&(r=2),4>($=h.O.truncate(3*g/2))?$=4:16>$&&($=16),r=h.Yc.Dn(r,0),n=h.Yc.Dn($),a=h.Yc.Dn($),$=I=0;$<m.length;$++)if(M[$]===!1)for(R=0;R<m[$].length;R++){var N=!1;R===m[$].length-1&&x[$]===!0&&(N=!0),N||(r.write(2*I,m[$][R][0]),r.write(2*I+1,m[$][R][1]),n.write(I,u||o?m[$][R][2]:NaN),a.write(I,o&&u?m[$][R][3]:NaN),I++)}return g!=0&&(m=c,p.resize(w),d.resize(w),0<g&&(p.add(g),d.add(0)),m.hn(0,r),m.PJ(d),m.QJ(p)),u&&(c.re(1),c.hn(1,n)),o&&(c.re(2),c.hn(2,u==0?n:a)),c.Pc(16777215),c},O})()})(B||(B={})),(function(h){h.Ex=(function(){function O(){}return O.br=function(m){var u,o=0,r=m.length,n=m[0];for(u=0;u<r-1;u++){var a=m[u+1];o+=(a[0]-n[0])*(a[1]+n[1]),n=a}return 0<=o},O.rotate=function(m,u,o){u=u*Math.PI/180;var r=Math.cos(u),n=Math.sin(u);if(m.paths!==void 0){u={paths:[]};for(var a=0;a<m.paths.length;a++){for(var c=m.paths[a],p=[],d=0;d<c.length;d++){var g=c[d].slice(0);p.push(g);var w=r*(c[d][0]-o.x)-n*(c[d][1]-o.y)+o.x,x=n*(c[d][0]-o.x)+r*(c[d][1]-o.y)+o.y;g[0]=w,g[1]=x}u.paths.push(p),m.hasZ!==void 0&&(u.hasZ=m.hasZ),m.hasM!==void 0&&(u.hasM=m.hasM)}return u}if(m.rings!==void 0){for(u={rings:[]},a=0;a<m.rings.length;a++){c=m.rings[a],p=[];var M=O.br(c);for(d=0;d<c.length;d++)g=c[d].slice(0),p.push(g),w=r*(c[d][0]-o.x)-n*(c[d][1]-o.y)+o.x,x=n*(c[d][0]-o.x)+r*(c[d][1]-o.y)+o.y,g[0]=w,g[1]=x;O.br(p)!==M&&p.reverse(),u.rings.push(p),m.hasZ!==void 0&&(u.hasZ=m.hasZ),m.hasM!==void 0&&(u.hasM=m.hasM)}return u}if(m.x!==void 0)return u={x:r*(m.x-o.x)-n*(m.y-o.y)+o.x,y:n*(m.x-o.x)+r*(m.y-o.y)+o.y},m.z!==void 0&&(u.z=m.z),m.m!==void 0&&(u.m=m.m),m.hasZ!==void 0&&(u.hasZ=m.hasZ),m.hasM!==void 0&&(u.hasM=m.hasM),u;if(m.points!==void 0){for(u={points:[]},a=m.points,d=0;d<a.length;d++)(c=a[d].slice(0))[0]=r*(a[d][0]-o.x)-n*(a[d][1]-o.y)+o.x,c[1]=n*(a[d][0]-o.x)+r*(a[d][1]-o.y)+o.y,u.points.push(c);return m.hasZ!==void 0&&(u.hasZ=m.hasZ),m.hasM!==void 0&&(u.hasM=m.hasM),u}return null},O.JQ=function(m,u){if(m.paths!==void 0){for(var o={paths:[]},r=0;r<m.paths.length;r++){for(var n=m.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var d=u.x-n[c][0];p[0]=n[c][0]+2*d}o.paths.push(a)}return m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o}if(m.rings!==void 0){for(o={rings:[]},r=0;r<m.rings.length;r++){n=m.rings[r];var g=O.br(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),d=u.x-n[c][0],p[0]=n[c][0]+2*d;O.br(a)!==g&&a.reverse(),o.rings.push(a)}return m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o}if(m.x!==void 0)return d=u.x-m.x,o={x:m.x+2*d,y:m.y},m.z!==void 0&&(o.z=m.z),m.m!==void 0&&(o.m=m.m),m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o;if(m.points!==void 0){for(o={points:[]},r=m.points,c=0;c<r.length;c++)n=r[c].slice(0),d=u.x-n[0],n[0]+=2*d,o.points.push(n);return m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o}return m.xmin!==void 0?(o={v:m.xmin,G:m.ymin,C:m.xmax,H:m.ymax},m.zmin!==void 0&&(o.zmin=m.zmin,o.zmax=m.zmax),m.mmin!==void 0&&(o.mmin=m.mmin,o.mmax=m.mmax),d=u.x-m.xmin,o.xmax=m.xmin+2*d,d=u.x-m.xmax,o.xmin=m.xmax+2*d,m.zmin!==void 0&&(o.zmin=m.zmin),m.zmax!==void 0&&(o.zmax=m.zmax),m.mmin!==void 0&&(o.mmin=m.mmin),m.mmax!==void 0&&(o.mmax=m.mmax),m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o):null},O.KQ=function(m,u){if(m.paths!==void 0){for(var o={paths:[]},r=0;r<m.paths.length;r++){for(var n=m.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var d=u.y-n[c][1];p[1]=n[c][1]+2*d}o.paths.push(a)}return m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o}if(m.rings!==void 0){for(o={rings:[]},r=0;r<m.rings.length;r++){n=m.rings[r];var g=O.br(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),d=u.y-n[c][1],p[1]=n[c][1]+2*d;O.br(a)!==g&&a.reverse(),o.rings.push(a)}return m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o}if(m.x!==void 0)return d=u.y-m.y,o={y:m.y+2*d,x:m.x},m.z!==void 0&&(o.z=m.z),m.m!==void 0&&(o.m=m.m),m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o;if(m.points!==void 0){for(o={points:[]},r=m.points,c=0;c<r.length;c++)n=r[c].slice(0),d=u.y-n[1],n[1]+=2*d,o.points.push(n);return m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o}return m.xmin!==void 0?(o={v:m.xmin,G:m.ymin,C:m.xmax,H:m.ymax},m.zmin!==void 0&&(o.zmin=m.zmin,o.zmax=m.zmax),m.mmin!==void 0&&(o.mmin=m.mmin,o.mmax=m.mmax),d=u.y-m.ymin,o.ymax=m.ymin+2*d,d=u.y-m.ymax,o.ymin=m.ymax+2*d,m.zmin!==void 0&&(o.zmin=m.zmin),m.zmax!==void 0&&(o.zmax=m.zmax),m.mmin!==void 0&&(o.mmin=m.mmin),m.mmax!==void 0&&(o.mmax=m.mmax),m.hasZ!==void 0&&(o.hasZ=m.hasZ),m.hasM!==void 0&&(o.hasM=m.hasM),o):null},O})()})(B||(B={})),(function(h){h.ZK=(function(){function O(){}return O.Ig=function(m,u){switch(u==null&&(u=h.ee.og()),m){case 33:return new h.Sa(u);case 322:return new h.yb(u);case 197:return new h.Fh(u);case 550:return new h.de(u);case 1607:return new h.Ta(u);case 1736:return new h.Da(u);default:throw h.i.fa("invalid argument.")}},O})()})(B||(B={})),(function(h){var O=(function(){function m(u,o){this.Te=h.ia.qf(u,-1),this.ua=new h.au,this.wl=o}return m.prototype.AW=function(u){this.ua.At(Math.min(this.Te.size,u)),this.ua.fn(u)},m.prototype.addElement=function(u,o){if(o===void 0)return this.eN(u);o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);return r==-1&&(r=this.ua.Ph(),this.Te.set(o,r)),this.ua.addElement(r,u)},m.prototype.eN=function(u){var o=this.wl.jz(u);o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);return r==-1&&(r=this.ua.Ph(),this.Te.set(o,r)),this.ua.addElement(r,u)},m.prototype.jd=function(u,o){if(o===void 0)this.KP(u);else{o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);if(r==-1)throw h.i.N();for(var n=this.ua.rc(r),a=-1;n!=-1;){var c=this.ua.lb(n);this.ua.ja(n)==u?(this.ua.jd(r,a,n),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(o,-1))):a=n,n=c}}},m.prototype.KP=function(u){var o=this.wl.jz(u);o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);if(r==-1)throw h.i.N();for(var n=this.ua.rc(r),a=-1;n!=-1;){var c=this.ua.lb(n);this.ua.ja(n)==u?(this.ua.jd(r,a,n),this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(o,-1))):a=n,n=c}},m.prototype.rR=function(u){return u=h.O.truncate(u%this.Te.size),(u=this.Te.get(u))==-1?-1:this.ua.rc(u)},m.prototype.ER=function(u){return this.ua.lb(u)},m.prototype.vd=function(u){var o=this.wl.jz(this.ja(u));o=h.O.truncate(o%this.Te.size);var r=this.Te.get(o);if(r==-1)throw h.i.N();for(var n=this.ua.rc(r),a=-1;n!=-1;){if(n==u)return this.ua.jd(r,a,n),void(this.ua.rc(r)==-1&&(this.ua.bh(r),this.Te.set(o,-1)));a=n,n=this.ua.lb(n)}throw h.i.N()},m.prototype.ja=function(u){return this.ua.ja(u)},m.prototype.clear=function(){this.Te=h.ia.qf(this.Te.size,-1),this.ua.clear()},m.prototype.size=function(){return this.ua.TF()},m})();h.dL=O})(B||(B={})),(function(h){var O=(function(){function m(){this.Li=new h.$c(3),this.ua=new h.$c(6),this.sT=!1,this.je=-1}return m.prototype.fl=function(u){this.Li.jd(u)},m.prototype.Pw=function(){return this.Li.Ce()},m.prototype.bv=function(u){this.ua.jd(u)},m.prototype.$A=function(){return this.ua.Ce()},m.prototype.WB=function(u,o){this.Li.S(u,1,o)},m.prototype.ex=function(u,o){this.Li.S(u,2,o)},m.prototype.gX=function(u,o){this.Li.S(u,3,o)},m.prototype.UB=function(u,o){this.ua.S(u,4,o)},m.prototype.jX=function(u,o){this.ua.S(u,3,o)},m.prototype.TJ=function(u,o){this.ua.S(u,2,o)},m.prototype.Ph=function(u){var o=this.$A();return this.ua.S(o,3,this.je),this.ua.S(o,4,0),this.ua.S(o,5,u),this.je!=-1&&this.TJ(this.je,o),this.je=o},m.prototype.bh=function(u){this.LE(u);var o=this.ua.T(u,2),r=this.ua.T(u,3);return o!=-1?this.jX(o,r):this.je=r,r!=-1&&this.TJ(r,o),this.bv(u),r},m.prototype.At=function(u){this.ua.De(u)},m.prototype.PF=function(u){return this.ua.T(u,5)},m.prototype.fX=function(u,o){this.ua.S(u,5,o)},m.prototype.addElement=function(u,o){return this.tS(u,o)},m.prototype.tS=function(u,o){var r=this.Pw();this.ex(r,-1),this.ua.T(u,0)==-1&&this.ua.S(u,0,r);var n=this.ua.T(u,1);return this.WB(r,n),n!=-1&&this.ex(n,r),this.ua.S(u,1,r),this.setData(r,o),this.UB(u,this.bs(u)+1),this.sT&&this.gX(r,u),r},m.prototype.jd=function(u,o){var r=this.we(o),n=this.lb(o);return r!=-1?this.ex(r,n):this.ua.S(u,0,n),n!=-1?this.WB(n,r):this.ua.S(u,1,r),this.fl(o),this.UB(u,this.bs(u)-1),n},m.prototype.fn=function(u){this.Li.De(u)},m.prototype.getData=function(u){return this.Li.T(u,0)},m.prototype.setData=function(u,o){this.Li.S(u,0,o)},m.prototype.lb=function(u){return this.Li.T(u,2)},m.prototype.we=function(u){return this.Li.T(u,1)},m.prototype.rc=function(u){return this.ua.T(u,0)},m.prototype.Fc=function(u){return this.ua.T(u,1)},m.prototype.clear=function(){for(var u=this.je;u!=-1;)u=this.bh(u)},m.prototype.LE=function(u){for(var o=this.Fc(u);o!=-1;){var r=o;o=this.we(r),this.fl(r)}this.ua.S(u,0,-1),this.ua.S(u,1,-1),this.UB(u,0)},m.prototype.B=function(){return this.Li.size==0},m.prototype.TF=function(){return this.Li.size},m.prototype.bs=function(u){return this.ua.T(u,4)},m.prototype.qz=function(u){return this.ua.T(u,3)},m})();h.jp=O})(B||(B={})),(function(h){var O=(function(){function m(u){u===void 0?(this.ug=new h.$c(2),this.ua=new h.$c(4),this.je=-1,this.Qv=!0):(this.ug=new h.$c(2),this.ua=new h.$c(u?4:2),this.je=-1,this.Qv=u)}return m.prototype.fl=function(u){this.ug.jd(u)},m.prototype.Pw=function(){return this.ug.Ce()},m.prototype.bv=function(u){this.ua.jd(u)},m.prototype.$A=function(){return this.ua.Ce()},m.prototype.Ph=function(){var u=this.$A();return this.Qv&&(this.ua.S(u,3,this.je),this.je!=-1&&this.ua.S(this.je,2,u),this.je=u),u},m.prototype.bh=function(u){for(var o=this.rc(u);o!=-1;){var r=o;o=this.lb(o),this.fl(r)}this.Qv&&(o=this.ua.T(u,2),r=this.ua.T(u,3),o!=-1?this.ua.S(o,3,r):this.je=r,r!=-1&&this.ua.S(r,2,o)),this.bv(u)},m.prototype.At=function(u){this.ua.De(u)},m.prototype.addElement=function(u,o){var r=this.ua.T(u,1),n=this.Pw();return r!=-1?this.ug.S(r,1,n):this.ua.S(u,0,n),this.ua.S(u,1,n),this.ug.S(n,0,o),n},m.prototype.fn=function(u){this.ug.De(u)},m.prototype.jd=function(u,o,r){o!=-1?(this.ug.S(o,1,this.ug.T(r,1)),this.ua.T(u,1)==r&&this.ua.S(u,1,o)):(this.ua.S(u,0,this.ug.T(r,1)),this.ua.T(u,1)==r&&this.ua.S(u,1,-1)),this.fl(r)},m.prototype.Hy=function(u,o){var r=this.ua.T(u,1),n=this.ua.T(o,0);n!=-1&&(r!=-1?this.ug.S(r,1,n):this.ua.S(u,0,n),this.ua.S(u,1,this.ua.T(o,1))),this.Qv&&(u=this.ua.T(o,2),r=this.ua.T(o,3),u!=-1?this.ua.S(u,3,r):this.je=r,r!=-1&&this.ua.S(r,2,u)),this.bv(o)},m.prototype.ja=function(u){return this.ug.T(u,0)},m.prototype.Sj=function(u,o){this.ug.S(u,0,o)},m.prototype.lb=function(u){return this.ug.T(u,1)},m.prototype.rc=function(u){return this.ua.T(u,0)},m.prototype.Jn=function(u){return this.ja(this.rc(u))},m.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},m.prototype.B=function(){return this.ug.size==0},m.prototype.TF=function(){return this.ug.size},m.prototype.qz=function(u){return this.ua.T(u,3)},m})();h.au=O})(B||(B={})),(function(h){h.ta=(function(){function O(){}return O.Wd=function(m,u,o){return u=u.xr(),m=m!=null&&m.Xd!==void 0?m.Xd(0):0,o&&(u*=4,m*=1.1),Math.max(m,u)},O.Er=function(m){return 2*Math.sqrt(2)*m},O.rN=function(m){return Math.sqrt(2)*m},O.kj=function(m,u,o){var r=new h.l;return u.A(r),O.Wd(m,r,o)},O.wE=function(m,u,o){return u=u.Tg(1,0).xr(),m=m!=null?m.Xd(1):0,o&&(u*=4,m*=1.1),Math.max(m,u)},O.mv=function(m,u){var o=new h.l;return m.xc(o),m=new h.l,u.xc(m),o.Zb(m),o},O.YN=function(m){var u=new h.l;if(m.xc(u),u.B())return null;var o=new h.du(u,8),r=-1,n=new h.l,a=!1;do for(var c=0,p=m.da();c<p;c++){if(m.Rj(c,n),(r=o.Jz(c,n,r))==-1){if(a)throw h.i.fa("internal error");m.yp(u,!1),a=!0,o.reset(u,8);break}a=!1}while(a);return o},O.nE=function(m){var u=new h.l;m.xc(u);for(var o=new h.du(u,8),r=-1,n=m.Ga(),a=new h.l,c=!1;n.$a();)for(;n.Ha();){var p=n.ha(),d=n.wb();if(p.A(a),(r=o.Jz(d,a,r))==-1){if(c)throw h.i.Qa();m.yp(u,!1),c=!0,o.reset(u,8),n.Zi();break}}return o},O.jj=function(m,u){var o=new h.l;m.xc(o);for(var r=new h.du(o,8),n=-1,a=new h.l,c=m.Ga(),p=!1;c.$a();)for(;c.Ha();){var d=c.ha(),g=c.wb();if(d.A(a),a.isIntersecting(u)&&(n=r.Jz(g,a,n))==-1){if(p)throw h.i.fa("internal error.");m.yp(o,!1),p=!0,r.reset(o,8),c.Zi();break}}return r},O.oE=function(m,u){for(var o=new h.du(u,8),r=new h.h,n=!1,a=new h.l,c=0;c<m.I();c++)if(m.D(c,r),u.contains(r)&&(a.K(r),o.vj(c,a)==-1)){if(n)throw h.i.Qa();n=!0,c=new h.l,m.yp(c,!1),o.reset(c,8),c=-1}return o},O.lR=function(m,u,o){var r=new h.l,n=new h.l;m.xc(r),u.xc(n),r.W(o,o),n.W(o,o);var a=new h.l;a.K(r),a.Ea(n),m=m.Ga(),u=u.Ga();var c=new h.xC;c.aC(o);var p=!1;for(c.pK();m.$a();)for(;m.Ha();)m.ha().A(r),r.isIntersecting(a)&&(p=!0,(o=new h.l).K(r),c.JD(m.wb(),o));if(c.iF(),!p)return null;for(r=!1,c.oK();u.$a();)for(;u.Ha();)u.ha().A(n),n.isIntersecting(a)&&(r=!0,(o=new h.l).K(n),c.ED(u.wb(),o));return c.hF(),r?c:null},O.mR=function(m,u,o,r,n){var a=m.getType(),c=u.getType(),p=new h.l,d=new h.l;m.xc(p),u.xc(d),p.W(o,o),d.W(o,o);var g=new h.l;g.K(p),g.Ea(d);var w=new h.xC;w.aC(o);var x=!1;w.pK();var M=0;for(o=m.da();M<o;M++)r&&a==1736&&!m.Ev(M)||(m.Rj(M,p),p.isIntersecting(g)&&(x=!0,w.JD(M,p)));if(w.iF(),!x)return null;for(m=!1,w.oK(),r=0,o=u.da();r<o;r++)n&&c==1736&&!u.Ev(r)||(u.Rj(r,d),d.isIntersecting(g)&&(m=!0,w.ED(r,d)));return w.hF(),m?w:null},O.Ru=function(m,u,o){if(m!=u)for(var r=0;r<o;r++)m[r]==null?m[r]=h.h.al(u[r]):m[r].L(u[r])},O.Jy=function(m,u,o,r){var n=0;for(r+=0;n<r;o++,n++)m[n]==null&&(m[n]=[0,0]),m[n][0]=u[o].x,m[n][1]=u[o].y},O.Iy=function(m,u,o,r){var n=u,a=0;for(u=r+u;n<u;a++,n++)m[n]==null?m[n]=h.h.construct(o[a][0],o[a][1]):m[n].ma(o[a][0],o[a][1])},O.kP=function(m,u,o){if(m!=u)for(var r=0;r<o;r++)m[r]==null?m[r]=new h.Sa(u[r]):u[r].copyTo(m[r])},O.vE=function(m,u,o,r){var n=0;return m!=null&&(n=m.Xd(0),r&&!o||m==null||(n+=1.01*m.vz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},O.ty=function(m,u,o){return O.vE(m,u.xr(),o,!1)},O.gO=function(m,u){var o=new h.l;return u.A(o),O.ty(m,o,!0)},O.uy=function(m,u){return O.vE(m,u.xr(),!1,!0)},O.Hu=function(m,u){var o=new h.l;return u.A(o),O.uy(m,o)},O.AG=function(m,u,o,r){r*=r;var n=new h.h;if(n.uc(m,u),(m=new h.h).uc(o,u),u=n.Sk(),o=m.Sk(),u<=r&&o<=r)return!0;var a=h.lc.ox(n.wi(m));return(a<=r*u||a<=r*o)&&0<=n.Qh(m)},O.dK=function(m,u,o,r){for(var n=0;n<u;n++){var a=m[n].y,c=h.O.Rk(a,o,r);c!=a&&(m[n].y=c)}},O})()})(B||(B={})),(function(h){var O,m,u=(function(){function a(c){this.Ya=c}return a.prototype.compare=function(c,p,d){c=c.ja(d),d=this.Ya.nk(p);var g=this.Ya.nk(c);return d<g?-1:d==g?n.gq(p)&&n.Gv(c)?-1:n.gq(c)&&n.Gv(p)?1:0:1},a})(),o=(function(){function a(c){this.Ya=c}return a.prototype.nr=function(c,p,d){this.Ya.GX(d,c,p)},a.prototype.$p=function(c){return this.Ya.nk(c)},a})();(m=O||(O={}))[m.initialize=0]="initialize",m[m.pIn=1]="pIn",m[m.pL=2]="pL",m[m.pR=3]="pR",m[m.pT=4]="pT",m[m.right=5]="right",m[m.left=6]="left",m[m.all=7]="all";var r=(function(){function a(){this.Ya=null,this.Qi=new h.Nc,this.hi=new h.ia(0),this.sg=[0,0]}return a.prototype.Xi=function(c,p){this.Qi.oa=c.oa-p,this.Qi.va=c.va+p,this.hi.resize(0),this.he=0,this.sg[0]=0},a.prototype.EB=function(c,p,d){if(c>p)throw h.i.N();this.Qi.oa=c-d,this.Qi.va=p+d,this.hi.resize(0),this.he=0,this.sg[0]=0},a.prototype.Uo=function(c,p){this.Qi.oa=c-p,this.Qi.va=c+p,this.hi.resize(0),this.he=0,this.sg[0]=0},a.prototype.next=function(){if(!this.Ya.lq)throw h.i.Hb();if(0>this.he)return-1;for(var c=!0;c;)switch(this.sg[this.he]){case 1:c=this.FU();break;case 2:c=this.GU();break;case 3:c=this.HU();break;case 4:c=this.IU();break;case 5:c=this.GW();break;case 6:c=this.kT();break;case 7:c=this.tN();break;case 0:c=this.Gz();break;default:throw h.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},a.construct=function(c){var p=new a;return p.Ya=c,p.hi.Jb(20),p.he=-1,p},a.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},a.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var c=this.Ya.Np(this.Lc);return this.Qi.va<c?(c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=6),!0):c<this.Qi.oa?(c=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.Zr(c),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),!0)},a.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var c=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.Zr(c),this.sg[++this.he]=5),!0}return c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),(c=this.Ya.lk(this.Lc))!=-1&&this.hi.add(c),!0},a.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var c=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=6),!0}return c=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),(c=this.Ya.qj(this.Lc))!=-1&&this.hi.add(c),!0},a.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var c=this.Ya.mk(this.Lc);return c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},a.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&n.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},a.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&n.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},a.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&n.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},a.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},a.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},a.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},a})();h.EY=r;var n=(function(){function a(c){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=c,this.lq=this.Sv=!1}return a.prototype.kr=function(){this.Nk(!0)},a.prototype.Br=function(c,p){if(!this.Sv)throw h.i.Hb();this.Fj.push(new h.Nc(c,p))},a.prototype.Fp=function(){if(!this.Sv)throw h.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},a.prototype.vj=function(c){if(!this.Sf||!this.lq)throw h.i.N("invalid call");if(this.kf==-1){var p=this.Fj.length;if(this.iA){var d=new h.ia(0);d.Jb(2*p),this.bJ(d),this.$h.Jb(2*p),this.$h.resize(0),this.aJ(d),this.Km.resize(p,-1),this.Km.Wj(-1,0,p),this.iA=!1}else this.Km.Wj(-1,0,p);this.kf=this.Tu()}p=this.pG(c<<1,this.kf),d=this.$f.addElement(1+(c<<1),this.xz(p)),this.VJ(p,d),this.Km.set(c,p),this.Zv++},a.prototype.remove=function(c){if(!this.Sf||!this.lq)throw h.i.fa("invalid call");var p=this.Km.get(c);if(p==-1)throw h.i.N("the interval does not exist in the interval tree");this.Km.set(c,-1),this.Zv--;var d=this.xz(p),g=this.$f.ZR(d);this.$f.vd(this.wR(p),d),this.$f.vd(this.TR(p),d),(c=this.$f.size(d))==0&&(this.$f.MP(d),this.ZJ(g,-1)),this.Ej.jd(p),d=this.UF(g);var w=this.qj(g),x=this.lk(g);for(p=0;!(0<c||g==this.kf||w!=-1&&x!=-1);)g==this.qj(d)?w!=-1?(this.Ok(d,w),this.Uj(w,d),this.Ok(g,-1)):x!=-1?(this.Ok(d,x),this.Uj(x,d),this.Qk(g,-1)):this.Ok(d,-1):w!=-1?(this.Qk(d,w),this.Uj(w,d),this.Ok(g,-1)):x!=-1?(this.Qk(d,x),this.Uj(x,d),this.Qk(g,-1)):this.Qk(d,-1),this.Uj(g,-1),p++,g=d,c=(d=this.mk(g))!=-1?this.$f.size(d):0,w=this.qj(g),x=this.lk(g),d=this.UF(g)},a.prototype.reset=function(){if(!this.Sf||!this.lq)throw h.i.N("invalid call");this.Nk(!1)},a.prototype.size=function(){return this.Zv},a.prototype.getIterator=function(){return r.construct(this)},a.prototype.bJ=function(c){for(var p=this.Fj.length,d=0;d<2*p;d++)c.add(d);this.HX(c,2*p)},a.prototype.aJ=function(c){for(var p=NaN,d=0;d<c.size;d++){var g=c.get(d),w=this.nk(g);w!=p&&(this.$h.add(g),p=w)}},a.prototype.vS=function(){var c=this.Fj.length,p=new h.ia(0);p.Jb(2*c),this.bJ(p),this.$h.Jb(2*c),this.$h.resize(0),this.aJ(p),this.Ej.De(c),this.Ti.fn(2*c);var d=h.Yc.Oh(c);for(d.Wj(-1,0,c),this.kf=this.Tu(),c=0;c<p.size;c++){var g=p.get(c),w=d.get(g>>1);w!=-1?this.VJ(w,this.Ti.addElement(this.xz(w),g)):(w=this.pG(g,this.kf),d.set(g>>1,w))}},a.prototype.pG=function(c,p){var d=p,g=p,w=-1,x=0,M=this.$h.size-1,$=0,I=c>>1,R=NaN,N=NaN,j=!0,z=this.DR(I);for(I=this.AR(I);j;){x<M?($=x+h.O.truncate((M-x)/2),this.gz(d)==-1&&this.FJ(d,this.$h.get($),this.$h.get($+1))):this.gz(d)==-1&&this.FJ(d,this.$h.get(x),this.$h.get(x));var D=this.Np(d);if(I<D)p!=-1&&(p==d?(g=d,R=D,N=(p=this.qj(d))!=-1?this.Np(p):NaN):N>D&&(D<R?this.Ok(g,d):this.Qk(g,d),this.Qk(d,p),this.Sf&&(this.Uj(d,g),this.Uj(p,d)),g=d,R=D,p=-1,N=NaN)),(M=this.xR(d))==-1&&(M=this.Tu(),this.dX(d,M)),d=M,M=$;else if(z>D)p!=-1&&(p==d?(g=d,R=D,N=(p=this.lk(d))!=-1?this.Np(p):NaN):N<D&&(D<R?this.Ok(g,d):this.Qk(g,d),this.Ok(d,p),this.Sf&&(this.Uj(d,g),this.Uj(p,d)),g=d,R=D,p=-1,N=NaN)),(x=this.UR(d))==-1&&(x=this.Tu(),this.oX(d,x)),d=x,x=$+1;else{(j=this.mk(d))==-1&&(j=this.zP(d),this.ZJ(d,j));var U=this.fN(j,c);w=this.xP(),this.qX(w,j),this.cX(w,U),d!=p&&(D<R?this.Ok(g,d):this.Qk(g,d),this.Sf&&this.Uj(d,g),p!=-1&&(N<D?this.Ok(d,p):this.Qk(d,p),this.Sf&&this.Uj(p,d))),j=!1}}return w},a.prototype.Tu=function(){return this.me.Ce()},a.prototype.zP=function(c){return this.Sf?this.$f.Pr(c):this.Ti.Ph(c)},a.prototype.xP=function(){return this.Ej.Ce()},a.prototype.Nk=function(c){c?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=h.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=h.Yc.Oh(0),this.$f=new h.Yj,this.$f.Vo(new u(this))):this.$f.clear():this.Ti==null?this.Ti=new h.jp:this.Ti.clear(),this.me==null?(this.Ej=new h.$c(3),this.me=new h.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},a.prototype.FJ=function(c,p,d){this.XW(c,p),this.YW(c,d)},a.prototype.Np=function(c){var p=this.gz(c);return p==-1?NaN:(p=this.nk(p))==(c=this.nk(this.gR(c)))?p:.5*(p+c)},a.prototype.XW=function(c,p){this.me.S(c,0,p)},a.prototype.YW=function(c,p){this.me.S(c,1,p)},a.prototype.dX=function(c,p){this.me.S(c,3,p)},a.prototype.oX=function(c,p){this.me.S(c,4,p)},a.prototype.ZJ=function(c,p){this.me.S(c,2,p)},a.prototype.Ok=function(c,p){this.me.S(c,5,p)},a.prototype.Qk=function(c,p){this.me.S(c,6,p)},a.prototype.Uj=function(c,p){this.me.S(c,7,p)},a.prototype.qX=function(c,p){this.Ej.S(c,0,p)},a.prototype.fN=function(c,p){return this.Sf?this.$f.addElement(p,c):this.Ti.addElement(c,p)},a.prototype.cX=function(c,p){this.Ej.S(c,1,p)},a.prototype.VJ=function(c,p){this.Ej.S(c,2,p)},a.prototype.kl=function(c){return this.Sf?this.$f.rc(c):this.Ti.rc(c)},a.prototype.Zr=function(c){return this.Sf?this.$f.Fc(c):this.Ti.Fc(c)},a.gq=function(c){return!(1&c)},a.Gv=function(c){return!(1&~c)},a.prototype.gz=function(c){return this.me.T(c,0)},a.prototype.gR=function(c){return this.me.T(c,1)},a.prototype.mk=function(c){return this.me.T(c,2)},a.prototype.xR=function(c){return this.me.T(c,3)},a.prototype.UR=function(c){return this.me.T(c,4)},a.prototype.qj=function(c){return this.me.T(c,5)},a.prototype.lk=function(c){return this.me.T(c,6)},a.prototype.UF=function(c){return this.me.T(c,7)},a.prototype.xz=function(c){return this.Ej.T(c,0)},a.prototype.wR=function(c){return this.Ej.T(c,1)},a.prototype.TR=function(c){return this.Ej.T(c,2)},a.prototype.DR=function(c){return this.Fj[c].oa},a.prototype.AR=function(c){return this.Fj[c].va},a.prototype.HX=function(c,p){this.Am==null&&(this.Am=new h.Xt);var d=new o(this);this.Am.sort(c,0,p,d)},a.prototype.GX=function(c,p,d){var g=this;c.Vd(p,d,(function(w,x){var M=g.nk(w),$=g.nk(x);return M<$||M==$&&a.gq(w)&&a.Gv(x)?-1:1}))},a.prototype.nk=function(c){var p=this.Fj[c>>1];return a.gq(c)?p.oa:p.va},a})();h.sr=n})(B||(B={})),(function(h){var O=(function(){function m(u){if(u==null)throw h.i.fa("Invalid arguement");this.hf=u;var o=u.nR();o.hS()?u.ef.IG()?this.lo=h.si.PannableFold:this.lo=h.si.Clip:this.lo=h.si.DontClip,o.iS()?u.Yf.IG()?this.Qm=h.si.PannableFold:this.Qm=h.si.Clip:this.Qm=h.si.DontClip,this.Bm=o.Jr,this.mH=o.Vu,u=this.hf.sH,this.aH=u.hs(2147483648),this.Uv=u.hs(1073741824)}return m.zh=function(u,o,r){return o.ww.zh(u,r)},m.Rt=function(u,o,r,n){return u.ww.Rt(o,r,n)},m.Qt=function(u,o,r,n){if(r=0>r?o.length:r,(u=u.ww.Rt(o,r,n))==r)return u;for(var a=o=0;a<r;a++){var c=n[a];c.isNaN()||(o<a&&n[o].L(c),o++)}for(;o<r;o++)n[o].Rc();return u},m.transform=function(u,o,r,n,a){if(u.isIdentity())return h.ta.kP(n,o,r),r;for(var c=[],p=0,d=0;d<r;){for(var g=Math.min(c.length,r-d),w=d,x=0;w<g;w++,x++)c[x]==null?c[x]=o[w].D():o[w].D(c[x]);var M=a?m.Qt(u,c,g,c):m.Rt(u,c,g,c);for(x=w=0;w<M;w++,x++)n[d]==null&&(n[d]=new h.Sa(o[d])),n[d].Cb(c[x]);d+=g,p+=M}return p},m.prototype.Rt=function(u,o,r){if(this.hf.isIdentity())return u!=r&&h.ta.Ru(r,u,o),o;var n=this.hf.ef,a=this.hf.Yf,c=n.Sb(),p=a.Sb();if(c==0&&c===p){var d=n.Qp();return a=d/(a=a.Qp()),(d=new h.Dd).setScale(a,a),d.eY(u,o,r),o}if(d=h.O.Fu(Math.min(o,64)),c==3){var g=n.Ji;c=(n=g.fk()).Sb(),r!=u&&h.ta.Ru(r,u,o),h.zb.$k(g,r,o,!0),g.Qt(h.bm.forward,r,o),h.zb.Zk(g,r,o,!0)}if(c==3||p===3)throw h.i.fa("image: transform_in_place_");if(c==2)this.lo==h.si.Clip?(r!=u&&h.ta.Ru(r,u,o),u=n.ml(),h.zb.OS(u,n,r,o)):(r!=u&&h.ta.Ru(r,u,o),n.Wc()&&(c=n.Xd(0),g=n.Oe(),h.zb.EX(r,o,g,c),h.zb.qF(r,o,n,0))),h.zb.IL(n,r,o,d);else for(c=n.Xd(0),g=n.Oe(),n=0;n<o;n++)h.zb.FX(u[n],g,c,r[n]);for(h.zb.GL(this.hf,r,o,d),u=0,(p=p==2)?u=a.zi():isNaN(this.Bm)||(u=this.Bm),p&&this.Qm!=h.si.Clip||h.zb.qF(r,o,a.sc(),u),p&&(h.zb.yG(r,o,a,this.Qm),h.zb.HL(a,r,o,d)),u=o,n=0;n<o;++n)r[n].isNaN()&&u--;return u},m.prototype.zh=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.getType()==33)return this.XI(u);var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb();if(a==0&&a==c)return o=r.Qp(),o/=n=n.Qp(),(n=new h.Dd).setScale(o,o),(u=h.aa.jg(u)).Oc(n),u;switch(u.getType()){case 1607:case 1736:u=this.VI(u,o);break;case 550:u=this.fW(u,o);break;case 197:u=this.eW(u,o);break;default:throw h.i.fa("")}return u},m.prototype.XI=function(u){var o=u.D(),r=[];return r[0]=o,this.Rt(r,1,r),(u=new h.Sa(u)).Cb(r[0]),u},m.prototype.VI=function(u,o){if(u.tm())throw h.i.fa("curves not supported");var r=u.getType();if(r==1736)return this.gW(u,o);if(r==1607)return this.hW(u,o);throw h.i.fa("projectMultiPath")},m.prototype.gW=function(u,o){var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb(),p=h.O.Fu(Math.min(u.I(),64)),d=h.Da.jg(u);a==3&&(a=(r=(u=r.Ji).fk()).Sb(),d=u.$k(d,!0),this.wp(u,h.bm.forward,d),d=u.Zk(d,!0)),u=null,c==3&&(c=(n=(u=n.Ji).fk()).Sb());var g=a==2,w=c==2,x=w?n.sc():n,M=!w&&!this.Uv;c=!1;var $=d;if(g){if(($=h.zb.UI($,r,this.lo,o)).B())return $}else{if(d=new h.l,$.xc(d),a=r.Oe(),d.G<a.G||d.H>a.H){var I=h.l.construct(d.v-1,a.G,d.C+1,a.H);if(($=h.ri.Nu($,I,r,NaN,0,o)).B())return $}d.R()>2*a.R()&&($=h.zb.Hp($,-2*a.R(),2*a.R(),r,!0,0,!0,o))}d=this.mH,(a=!isNaN(d))&&($=h.Xl.local().V($,d,o)),I=w?n.kk():null;var R=NaN;g&&(R=r.zi());var N=n.Wr()!=null;if(this.aH)g&&(h.zb.ur(r,R,$,p),a&&(g=r.hh(),d*=(R=r.sc().hh())/g)),h.zb.tr(this.hf,$,M,p),a&&(g=r.sc().hh(),d*=(R=n.sc().hh())/g),r=$;else{var j=new h.Ta($.description);j.DD($),g&&(h.zb.ur(r,R,j,p),a&&(g=r.hh(),d*=(R=r.sc().hh())/g)),h.zb.tr(this.hf,j,M,p),a&&(g=r.sc().pm(),d*=(R=n.sc().pm())/g),M=NaN,w?(I=n.kk(),M=n.zi()):isNaN(this.Bm)||(M=this.Bm),g=m.tv(r)|m.tv(n),R=10*x.Xd(0),this.Uv&&(g=3,R=0),r=h.zb.UQ($,r,j,x,M,o,g,R)}return N&&(r=h.zb.XD(r,n,o)),w&&(c||(w=x.Oe().R(),r.Tg(0,0).R()>=w-x.Xd(0)&&(x=I.getNorthPoleLocation(),w=I.getSouthPoleLocation(),$=I.getNorthPoleGeometry(),I=I.getSouthPoleGeometry(),M=0,$==h.Cg.PE_POLE_POINT&&x!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(M=1),I==h.Cg.PE_POLE_POINT&&w!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(M|=2),M!==0&&(c=!0))),r=h.zb.Mz(r,n,this.Qm,o),a&&(r=h.Xl.local().V(r,d,o)),h.zb.Lx(n,r,p)),r.B()||(c&&(r=h.Yl.local().V(r,n,!1,o)),u!=null&&(r=u.Zk(r,!1),this.wp(u,h.bm.reverse,r),r=u.$k(r,!1))),r},m.tv=function(u){if(u.Sb()!=2)return 0;var o=0,r=u.kk();u=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),a=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),a==h.Cg.PE_POLE_POINT&&u!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),r==h.Cg.PE_POLE_POINT&&n!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},m.prototype.hW=function(u,o){var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb(),p=h.O.Fu(Math.min(u.I(),64)),d=h.Ta.jg(u);a==3&&(a=(r=(u=r.Ji).fk()).Sb(),d=u.$k(d,!0),this.wp(u,h.bm.forward,d),d=u.Zk(d,!0)),u=null,c==3&&(c=(n=(u=n.Ji).fk()).Sb());var g=a==2;a=(c=c==2)?n.sc():n;var w=!c&&!this.Uv;if(g){if((d=h.zb.UI(d,r,this.lo,o)).B())return d}else{var x=new h.l;d.xc(x);var M=r.Oe();if((x.G<M.G||x.H>M.H)&&(x=h.l.construct(x.v-1,M.G,x.C+1,M.H),(d=h.ri.Nu(d,x,r,NaN,0,o)).B()))return d}var $=NaN;g&&($=r.zi()),x=n.Wr()!=null,M=this.mH;var I=!isNaN(M);if(I&&(d=h.Xl.local().V(d,M,o)),this.aH)g&&h.zb.ur(r,$,d,p),I&&(g=r.hh(),M*=($=r.sc().hh())/g),h.zb.tr(this.hf,d,w,p),I&&(g=r.sc().hh(),M*=($=n.sc().hh())/g),r=d;else{var R=new h.Ta(d.description);R.DD(d),g&&(h.zb.ur(r,$,R,p),I&&(g=r.hh(),M*=($=r.sc().hh())/g)),h.zb.tr(this.hf,R,w,p),I&&(g=r.sc().hh(),M*=($=n.sc().hh())/g),w=NaN,c?w=n.zi():isNaN(this.Bm)||(w=this.Bm),g=m.tv(r)|m.tv(n),$=10*a.Xd(0),this.Uv&&(g=3,$=0),r=h.zb.VQ(d,r,R,a,w,o,g,$)}return x&&(r=h.zb.XD(r,n,o)),c&&(r=h.zb.Mz(r,n,this.Qm,o),I&&(r=h.Xl.local().V(r,M,o)),h.zb.Lx(n,r,p)),r.B()||u!=null&&(r=u.Zk(r,!1),this.wp(u,h.bm.reverse,r),r=u.$k(r,!1)),r},m.prototype.eW=function(u,o){var r=(u.ca()+u.R())/400;return r!=0?(r=h.Xl.local().V(u,r,o),r=this.VI(r,o),o=u.Ia(),r.bn(o)):(o=new h.Sa(u.Ip()),r=this.XI(o),o=u.Ia(),r.B()?o.Oa():(u.copyTo(o),u=r.D(),o.K(u.x,u.y,u.x,u.y))),o},m.prototype.fW=function(u,o){u=h.aa.jg(u);var r=this.hf.ef,n=this.hf.Yf,a=r.Sb(),c=n.Sb(),p=h.O.Fu(Math.min(u.I(),64));if(a==3){var d=r.Ji;a=(r=d.fk()).Sb(),u=d.Zk(u,!0),this.wp(d,h.bm.forward,u),u=d.$k(u,!0)}if(a==2){if(this.lo==h.si.Clip?u=h.Xj.local().V(u,r.ml(),r,o):r.Wc()&&(a=new h.l,u.xc(a),r.Oe().contains(a)||(this.lo==h.si.PannableFold&&(u=h.zb.lj(u,r)),h.zb.Jt(u,r.Oe(),r.Xd(0),!0),u=h.zb.Fn(u,r,0,!0,0,o))),u.B())return u;h.zb.ur(r,0,u,p)}else h.zb.Jt(u,r.Oe(),r.Xd(0),!0);return h.zb.tr(this.hf,u,!1,p),r=0,a=!1,d=null,c==3&&(a=!0,c=(n=(d=n.Ji).fk()).Sb()),(c=c==2)?r=n.zi():isNaN(this.Bm)||(r=this.Bm),c&&this.Qm!=h.si.Clip||(u=h.zb.Fn(u,n.sc(),r,!1,0,o)),c&&(u=h.zb.Mz(u,n,this.Qm,o),h.zb.Lx(n,u,p),u.B())||a&&(u=d.Zk(u,!0),this.wp(d,h.bm.reverse,u),u=d.$k(u,!0)),u},m.prototype.wp=function(u,o,r){var n=r.I();if(n!=0){for(var a=r.ub(0),c=h.O.lg(200,0),p=[],d=0;d<n;){var g=Math.min(100,n-d);a.Vw(2*d,2*g,c,2,!0);for(var w=0;w<g;++w)p[w]=h.h.construct(c[2*d],c[2*d+1]);u.Qt(o,p,g),d+=g}r.Pc(1993)}},m.Uy=function(u,o,r){if(u==null||o==null||!o.Wc())throw h.i.fa("Invalid Arguement");if(u.B())return u;var n=u.getType();return n==197?(n=new h.Da(u.description)).ad(u,!1):h.aa.yd(n)?(n=new h.Ta(u.description)).oc(u,!0):n=u,(n=h.zb.lj(n,o)).B()?n:h.zb.Fn(n,o,0,n!=u,0,r)},m.nj=function(u,o,r,n){if(u==null||o==null||!o.Wc())throw h.i.fa("Invalid Arguement");if(u.B())return u;var a=u.getType();if(h.aa.Hc(a)){u=h.zb.lj(u,o),a=new h.l,u.A(a);for(var c=h.ta.ty(o,a,!1),p=o.gh(),d=Math.floor((a.v-p.v)/p.R())*p.R()+p.v;d<a.C;)d>a.v+c&&d<a.C-c&&(u=h.zb.uS(u,o,r,d)),d+=p.R()}else{if(a==197)return(a=new h.Da(u.description)).ad(u,!1),m.nj(a,o,r,n);if(h.aa.yd(a))return(a=new h.Ta(u.description)).oc(u,!0),m.nj(a,o,r,n)}return m.Uy(u,o,n)},m})();h.bu=O})(B||(B={})),(function(h){var O=(function(m){function u(o,r,n,a){var c=m.call(this)||this;return o===void 0?c.description=h.ee.og():n===void 0?c.description=o:(c.description=h.ee.og(),c.ZB(o,r),c.Ql(n,a)),c}return ce(u,m),u.prototype.getType=function(){return 322},u.prototype.Qb=function(){var o=this.sa-this.pa,r=this.na-this.la;return Math.sqrt(o*o+r*r)},u.prototype.Bi=function(o){var r=this.sa-this.pa,n=this.na-this.la;return Math.sqrt(r*r+n*n)<=o},u.prototype.Pn=function(){return!1},u.prototype.kg=function(){var o=new h.h;return o.uc(this.wc(),this.ac()),o},u.cP=function(o,r){return new u(o.x,o.y,r.x,r.y)},u.prototype.bn=function(o){o.Oa(),o.Nf(this.description);var r=new h.l;this.A(r),o.Xo(r),r=1;for(var n=this.description.Aa;r<n;r++)for(var a=this.description.kd(r),c=h.ra.Va(a);r<c;r++){var p=this.Tg(a,0);o.setInterval(a,0,p)}},u.prototype.A=function(o){o.K(this.sa,this.na,this.pa,this.la),o.normalize()},u.prototype.Qo=function(o){o.Oa(),o.Zb(this.sa,this.na,this.Od(0,1,0)),o.Zb(this.pa,this.la,this.Od(1,1,0))},u.prototype.Oc=function(o){if(o instanceof h.Dd){this.vc();var r=new h.h;r.x=this.sa,r.y=this.na,o.Eh(r,r),this.sa=r.x,this.na=r.y,r.x=this.pa,r.y=this.la,o.Eh(r,r),this.pa=r.x,this.la=r.y}else this.vc(),(r=new h.Nd).x=this.sa,r.y=this.na,r.z=this.Od(0,1,0),r=o.fp(r),this.sa=r.x,this.na=r.y,this.tn(0,1,0,r.z),r.x=this.pa,r.y=this.la,r.z=this.Od(1,1,0),r=o.fp(r),this.pa=r.x,this.la=r.y,this.tn(1,1,0,r.z)},u.prototype.Ia=function(){return new u(this.description)},u.prototype.Tx=function(o,r){return(this.pa-o-(this.sa-o))*(this.la-r+(this.na-r))*.5},u.prototype.vx=function(o){return o*this.Qb()},u.prototype.NG=function(o){return o/this.Qb()},u.prototype.DF=function(o){return h.lc.hq(this.sa,this.pa,o)},u.prototype.fR=function(o){return h.lc.hq(this.na,this.la,o)},u.prototype.dl=function(o,r){var n=new h.ig;return this.ah(o,r,n),n.get()},u.prototype.ah=function(o,r,n){if(n==null)throw h.i.N();n.Or(),(n=n.get()).Nf(this.description);var a=new h.h;this.hc(o,a),n.ZB(a.x,a.y),this.hc(r,a),n.Ql(a.x,a.y),a=1;for(var c=this.description.Aa;a<c;a++)for(var p=this.description.Ed(a),d=h.ra.Va(p),g=0;g<d;g++){var w=this.Uc(o,p,g);n.YB(p,g,w),w=this.Uc(r,p,g),n.OB(p,g,w)}},u.prototype.Uc=function(o,r,n){if(r==0)return n==0?this.hc(o).x:this.hc(o).y;switch(h.ra.lz(r)){case 0:return .5>o?this.wv(r,n):this.gv(r,n);case 1:var a=this.wv(r,n);return r=this.gv(r,n),h.lc.hq(a,r,o);case 2:throw h.i.fa("not implemented")}throw h.i.Qa()},u.prototype.fe=function(o,r){var n=this.pa-this.sa,a=this.la-this.na,c=n*n+a*a;return c==0?.5:(o=((o.x-this.sa)*n+(o.y-this.na)*a)/c,r||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.cq=function(o,r,n,a){if(o){if((o=this.la-this.na)==0)return r==this.la?-1:0;if(0>(r=(r-this.na)/o)||1<r)return 0;n!=null&&(n[0]=this.DF(r))}else{if((o=this.pa-this.sa)==0)return r==this.pa?-1:0;if(0>(r=(r-this.sa)/o)||1<r)return 0;n!=null&&(n[0]=this.fR(r))}return a!=null&&(a[0]=r),1},u.prototype.Pe=function(o,r){var n=this.la-this.na;return n==0?o==this.la?r:NaN:(o=(o-this.na)/n,r=this.DF(o),o==1&&(r=this.pa),r)},u.prototype.ru=function(o,r,n){return 0<=this.rp(o.x,o.y,r,n)},u.prototype.vi=function(o,r,n){return 0<=this.rp(o,r,n,!0)},u.prototype.qs=function(o,r){return this.ru(o,r,!1)},u.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var o=this.sa;this.sa=this.pa,this.pa=o,o=this.na,this.na=this.la,this.la=o,o=0;for(var r=this.description.Oq-2;o<r;o++){var n=this.ka[o];this.ka[o]=this.ka[o+r],this.ka[o+r]=n}}},u.prototype.uu=function(o,r){(r=h.h.construct(o,r)).sub(this.ac());var n=new h.h;return n.uc(this.wc(),this.ac()),(o=n.wi(r))>(r=8881784197001252e-31*(Math.abs(n.x*r.y)+Math.abs(n.y*r.x)))?-1:o<-r?1:0},u.prototype.rp=function(o,r,n,a){var c=this.sa,p=this.na,d=o-c,g=r-p;if((d=Math.sqrt(d*d+g*g))<=Math.max(n,6661338147750939e-31*d))return a&&d==0?NaN:0;if(d=o-this.pa,g=r-this.la,(d=Math.sqrt(d*d+g*g))<=Math.max(n,6661338147750939e-31*d))return a&&d==0?NaN:1;if(d=this.pa-this.sa,g=this.la-this.na,0<(a=Math.sqrt(d*d+g*g))){var w=1/a,x=o-c,M=r-p,$=x*(d*=w)+M*(g*=w),I=17763568394002505e-31*(Math.abs(x*d)+Math.abs(M*g)),R=d;if(d=-g,g=R,$<-(I=Math.max(n,I))||$>a+I)return NaN;if(Math.abs(x*d+M*g)<=Math.max(n,17763568394002505e-31*(Math.abs(x*d)+Math.abs(M*g)))&&(.5>=(d=h.O.Rk($*w,0,1))?(g=this.sa+(this.pa-this.sa)*d,a=this.na+(this.la-this.na)*d):(g=this.pa-(this.pa-this.sa)*(1-d),a=this.la-(this.la-this.na)*(1-d)),h.h.Oy(g,a,o,r)<=n)){if(.5>d){if(h.h.Oy(g,a,c,p)<=n)return 0}else if(h.h.Oy(g,a,this.pa,this.la)<=n)return 1;return d}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.FM(o))},u.prototype.rD=function(o,r,n){var a=n?this.sa:this.pa;n=n?this.na:this.la;var c=new h.h;return c.x=o.pa-a,c.y=o.la-n,!(r.Qh(c)>6661338147750939e-31*r.fD(c))||(c.x=o.sa-a,c.y=o.na-n,r.Qh(c)<=6661338147750939e-31*r.fD(c))},u.prototype.qD=function(o){var r=new h.h;return r.x=this.pa-this.sa,r.y=this.la-this.na,!!this.rD(o,r,!1)&&(r.Sq(),!!this.rD(o,r,!0))},u.NM=function(o,r){var n=o.uu(r.sa,r.na),a=o.uu(r.pa,r.la);return!(0>n&&0>a||0<n&&0<a)&&(n=r.uu(o.sa,o.na),a=r.uu(o.pa,o.la),!(0>n&&0>a||0<n&&0<a)&&((n=o.Qb())>(a=r.Qb())?o.qD(r):r.qD(o)))},u.LM=function(o,r,n){var a=h.h.construct(NaN,NaN),c=o.pa-o.sa,p=o.la-o.na,d=r.pa-r.sa,g=r.la-r.na,w=d*p-c*g;if(w==0)return a;var x=8881784197001252e-31*(Math.abs(d*p)+Math.abs(c*g)),M=r.sa-o.sa,$=r.na-o.na,I=d*$-M*g,R=I/w,N=Math.abs(w);return R<-(d=(8881784197001252e-31*(Math.abs(d*$)+Math.abs(M*g))*N+x*Math.abs(I))/(w*w)+2220446049250313e-31*Math.abs(R))||R>1+d||(d=(g=c*$-M*p)/w)<-(c=(8881784197001252e-31*(Math.abs(c*$)+Math.abs(M*p))*N+x*Math.abs(g))/(w*w)+2220446049250313e-31*Math.abs(d))||d>1+c||(R=h.O.Rk(R,0,1),c=h.O.Rk(d,0,1),p=o.hc(R),w=r.hc(c),(x=new h.h).uc(p,w),x.length()>n&&(x.add(p,w),x.scale(.5),R=o.fe(x,!1),c=r.fe(x,!1),o=o.hc(R),r=r.hc(c),o.sub(r),o.length()>n)||a.ma(R,c)),a},u.OM=function(o,r,n,a){var c=0;if((o.sa==r.sa&&o.na==r.na||o.sa==r.pa&&o.na==r.la)&&(c++,!a))return 1;if(o.pa==r.sa&&o.la==r.na||o.pa==r.pa&&o.la==r.la){if(++c==2)return 2;if(!a)return 1}return r.vi(o.sa,o.na,n)||r.vi(o.pa,o.la,n)||o.vi(r.sa,r.na,n)||o.vi(r.pa,r.la,n)?1:a&&c!=0||u.NM(o,r)==0?0:1},u.Zx=function(o,r,n,a,c,p){var d=0,g=o.rp(r.sa,r.na,p,!1),w=o.rp(r.pa,r.la,p,!1),x=r.rp(o.sa,o.na,p,!1),M=r.rp(o.pa,o.la,p,!1);return isNaN(g)||(a!=null&&(a[d]=g),c!=null&&(c[d]=0),n!=null&&(n[d]=h.h.construct(r.sa,r.na)),d++),isNaN(w)||(a!=null&&(a[d]=w),c!=null&&(c[d]=1),n!=null&&(n[d]=h.h.construct(r.pa,r.la)),d++),d==2||isNaN(x)||g==0&&x==0||w==0&&x==1||(a!=null&&(a[d]=0),c!=null&&(c[d]=x),n!=null&&(n[d]=h.h.construct(o.sa,o.na)),d++),d==2||isNaN(M)||g==1&&M==0||w==1&&M==1||(a!=null&&(a[d]=1),c!=null&&(c[d]=M),n!=null&&(n[d]=h.h.construct(r.pa,r.la)),d++),0<d?(d==2&&a!=null&&a[0]>a[1]&&(o=a[0],a[0]=a[1],a[1]=o,c!=null&&(a=c[0],c[0]=c[1],c[1]=a),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),d):(d=u.LM(o,r,p),isNaN(d.x)?0:(n!=null&&(n[0]=o.hc(d.x)),a!=null&&(a[0]=d.x),c!=null&&(c[0]=d.y),1))},u.prototype.eG=function(){return 0},u.prototype.op=function(){},u.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},u})(h.SC);h.yb=O})(B||(B={})),(function(h){var O=(function(){function m(){this.Jm=[],this.ya=-1}return m.prototype.La=function(){return this.ya},m.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var u=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),u}return this.Jm=null},m.prototype.ZX=function(u){this.Jm.push(u)},m.prototype.qe=function(){},m})();h.gL=O})(B||(B={})),(function(h){var O;(O=h.SL||(h.SL={}))[O.enumFillRuleOddEven=0]="enumFillRuleOddEven",O[O.enumFillRuleWinding=1]="enumFillRuleWinding";var m=(function(u){function o(r,n){var a=u.call(this)||this;if(a.xf=!1,a.Eq=null,a.sq=0,a.rq=0,a.Aj=null,a.Mg=!1,a.nb=null,a.mb=null,a.Ve=null,a.Lj=null,a.Sd=null,a.tq=0,a.gb=0,a.xq=0,n===void 0)a.xf=r,a.Mg=!1,a.tq=0,a.sq=0,a.rq=0,a.wa=0,a.description=h.ee.og();else{if(n==null)throw h.i.N();a.xf=r,a.Mg=!1,a.tq=0,a.sq=0,a.rq=0,a.wa=0,a.description=n}return a.Aj=null,a.gb=0,a}return ce(o,u),o.prototype.tm=function(){return 0<this.tq},o.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new h.Sa(this.description):this.Eq.Nf(this.description)},o.prototype.sx=function(r,n){var a=new h.h;a.x=r,a.y=n,this.Lt(a)},o.prototype.Lt=function(r){this.Yx(),this.Eq.Cb(r),this.Mg=!0},o.prototype.nf=function(r){if(r.B())throw h.i.N();this.Jl(r.description),this.Yx(),r.copyTo(this.Eq),this.Mg=!0},o.prototype.Sx=function(){var r=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=h.Yc.Oh(2),this.nb.write(0,0),this.mb=h.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),r++);var n=this.wa;this.nb.write(this.nb.size-1,this.wa+r),this.dm(n+r),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(n,this.Eq),this.Mg=!1)},o.prototype.yj=function(r,n){this.Sx(),this.Cb(this.wa-1,r,n)},o.prototype.Ci=function(r){this.Sx(),this.Cb(this.wa-1,r)},o.prototype.lineTo=function(r){this.Sx(),this.Ht(this.wa-1,r)},o.prototype.CU=function(r){if(this.vc(),this.xf)throw h.i.Qa();var n=this.da();if(r>n)throw h.i.Qa();if(this.dc(r)){if(this.mb==null)throw h.i.Qa();var a=this.wa,c=this.Ba(r),p=this.Vc(r);this.dm(this.wa+1),this.mc();for(var d=0,g=this.description.Aa;d<g;d++)if(this.za[d]!=null){var w=h.ra.Va(this.description.Ed(d));this.za[d].Mn(w*p,this.za[d],w*c,w,!0,1,w*a)}for(;n>r;n--)a=this.nb.read(n),this.nb.write(n,a+1);this.mb.KE(r,1)}},o.prototype.Ap=function(){if(this.wx(),r===void 0){this.Mg=!1;var r=this.da()-1}var n=this.mb.read(r);this.mb.write(r,1|n),this.Ve!=null&&(r=this.Vc(r)-1,this.Ve.write(r,1),this.Lj.write(r,-1))},o.prototype.dc=function(r){return!!(1&this.mb.read(r))},o.prototype.Nn=function(r){if(this.dc(r))return!0;var n=this.Ba(r);return!(n>(r=this.Vc(r)-1))&&(n=this.Na(n),r=this.Na(r),n.qb(r))},o.prototype.yv=function(r){return!!(2&this.mb.read(r))},o.prototype.oc=function(r,n){if(this.Jl(r.description),r.getType()!=322)throw h.i.Qa();var a=new h.Sa;(n||this.B())&&(r.To(a),this.nf(a)),r.Po(a),this.lineTo(a)},o.prototype.tp=function(r){var n=this.wa==0;this.sx(r.v,r.G),this.yj(r.v,r.H),this.yj(r.C,r.H),this.yj(r.C,r.G),this.Ap(),this.Mg=!1,n&&this.Lf(256,!1)},o.prototype.ad=function(r,n){if(!r.B()){for(var a=this.wa==0,c=new h.Sa(this.description),p=0;4>p;p++)r.Hf(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Ap(),this.Mg=!1,a&&!n&&this.Lf(256,!1)}},o.prototype.add=function(r,n){for(var a=0;a<r.da();a++)this.addPath(r,a,!n)},o.prototype.addPath=function(r,n,a){this.vf(-1,r,n,a)},o.prototype.Yk=function(r,n){this.Hz(r,n)},o.prototype.Dr=function(r,n,a,c,p){if(p||this.da()!=0||(p=!0),0>n&&(n=r.da()-1),n>=r.da()||0>a||0>c||c>r.rv(n))throw h.i.fa("index out of bounds");if(c!=0){var d=r.dc(n)&&a+c==r.rv(n);if(!d||c!=1){if(this.Mg=!1,this.Jl(r.description),a=r.Ba(n)+a+1,p&&(c++,a--),d&&c--,d=this.wa,this.dm(this.wa+c),this.mc(),p){if(c==0)return;this.nb.add(this.wa),p=r.mb.read(n),p&=-5,this.xf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);p=0;for(var g=this.description.Aa;p<g;p++){var w=this.description.kd(p),x=h.ra.Va(w),M=r.description.Pf(w);0>M||r.za[M]==null?this.za[p].Ln(x*d,h.ra.se(w),c*x,x*d):this.za[p].Mn(x*d,r.za[M],x*a,c*x,!0,x,x*d)}if(this.tm()||r.yv(n))throw h.i.Qa();this.Pc(1993)}}},o.prototype.oJ=function(){for(var r=0,n=this.da();r<n;r++)this.FW(r)},o.prototype.FW=function(r){if(this.mc(),r>=this.da())throw h.i.N();var n=this.Ba(r),a=this.Ja(r);r=this.dc(r)?1:0;for(var c=0,p=this.description.Aa;c<p;c++)if(this.za[c]!=null){var d=h.ra.Va(this.description.Ed(c));this.za[c].ni(d*(n+r),d*(a-r),d)}this.Pc(1993)},o.prototype.Zq=function(r){this.mc();var n=this.da();if(0>r&&(r=n-1),r>=n)throw h.i.N();for(var a=this.Ba(r),c=this.Ja(r),p=0,d=this.description.Aa;p<d;p++)if(this.za[p]!=null){var g=h.ra.Va(this.description.Ed(p));this.za[p].En(g*a,g*c,g*this.wa)}for(a=r+1;a<=n;a++)p=this.nb.read(a),this.nb.write(a-1,p-c);if(this.mb==null)for(a=r+1;a<=n;a++)r=this.mb.read(a),this.mb.write(a-1,r);this.nb.resize(n),this.mb.resize(n),this.wa-=c,this.Pg-=c,this.Pc(1993)},o.prototype.vf=function(r,n,a,c){if(n==this||a>=n.da())throw h.i.N();var p=this.da();if(r>p)throw h.i.N();0>r&&(r=p),0>a&&(a=n.da()-1),this.Mg=!1,this.Jl(n.description),n.mc();var d=n.Ba(a),g=n.Ja(a),w=this.wa,x=n.dc(a)&&!c?1:0;this.dm(this.wa+g),this.mc();for(var M=r<p?this.Ba(r):w,$=0,I=this.description.Aa;$<I;$++){var R=this.description.Ed($),N=n.description.Pf(R),j=h.ra.Va(R);0<=N&&n.za[N]!=null?(x!=0&&this.za[$].Mn(M*j,n.za[N],j*d,j,!0,j,j*w),this.za[$].Mn((M+x)*j,n.za[N],j*(d+x),j*(g-x),c,j,j*(w+x))):this.za[$].Ln(M*j,h.ra.se(R),j*g,j*w)}for(this.nb.add(w+g),c=p;c>=r+1;c--)d=this.nb.read(c-1),this.nb.write(c,d+g);for(n.yv(a),this.mb.add(0),c=p-1;c>=r+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.JR().read(a),p&=-5,this.xf&&(p|=1),this.mb.write(r,p)},o.prototype.Hz=function(r,n){var a=-1,c=this.da();if(a>c)throw h.i.N();0>a&&(a=c),this.Mg=!1;var p=this.wa;this.dm(this.wa+n),this.mc();var d=a<c?this.Ba(a):p;if(r!=null)this.za[0].Iz(2*d,r,0,n,!0,2*p);else{var g=h.ra.se(0);this.za[0].Ln(2*d,g,2*n,2*p)}r=1;for(var w=this.description.Aa;r<w;r++){g=this.description.kd(r);var x=h.ra.Va(g);g=h.ra.se(g),this.za[r].Ln(d*x,g,x*n,x*p)}for(this.nb.add(this.wa),p=c;p>=a+1;p--)d=this.nb.read(p-1),this.nb.write(p,d+n);for(this.mb.add(0),p=c-1;p>=a+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.xf&&this.mb.write(a,1)},o.prototype.qG=function(r,n,a){var c=-1;if(0>r&&(r=this.da()),r>this.da()||c>this.Ja(r)||a>n.length)throw h.i.fa("index out of bounds");if(a!=0){r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ja(r)),this.mc();var p=this.wa;this.dm(this.wa+a),this.mc();for(var d=0,g=this.description.Aa;d<g;d++){var w=this.description.Ed(d),x=h.ra.Va(w);this.za[d].Ut(x*(this.Ba(r)+c+a),(p-this.Ba(r)-c)*x,this.za[d],x*(this.Ba(r)+c),!0,x),d==0?this.za[d].vC(x*(this.Ba(r)+c),a,n,0,!0):this.za[d].Wj(h.ra.se(w),(this.Ba(r)+c)*x,a*x)}for(this.tm()&&(this.Ve.Ut(this.Ba(r)+c+a,p-this.Ba(r)-c,this.Ve,this.Ba(r)+c,!0,1),this.Lj.Ut(this.Ba(r)+c+a,p-this.Ba(r)-c,this.Lj,this.Ba(r)+c,!0,1),this.Ve.Wj(1,this.Ba(r)+c,a),this.Lj.Wj(-1,this.Ba(r)+c,a)),r+=1,n=this.da();r<=n;r++)this.nb.write(r,this.nb.read(r)+a)}},o.prototype.wf=function(r,n,a){var c=this.da();if(0>r&&(r=this.da()),r>=c||n>this.Ja(r))throw h.i.fa("index out of bounds");r==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ja(r));var p=this.wa;this.dm(this.wa+1),this.mc();var d=this.Ba(r);this.za[0].vj(2*(d+n),a,2*p),a=1;for(var g=this.description.Aa;a<g;a++){var w=this.description.Ed(a),x=h.ra.Va(w);this.za[a].Ln(x*(d+n),h.ra.se(w),x,x*p)}for(r+=1;r<=c;r++)this.nb.write(r,this.nb.read(r)+1)},o.prototype.DB=function(r,n){var a=this.da();if(0>r&&(r=a-1),r>=a||n>=this.Ja(r))throw h.i.fa("index out of bounds");this.mc();var c=this.Ba(r);0>n&&(n=this.Ja(r)-1),n=c+n,c=0;for(var p=this.description.Aa;c<p;c++)if(this.za[c]!=null){var d=h.ra.Va(this.description.Ed(c));this.za[c].En(d*n,d,d*this.wa)}for(;a>=r+1;a--)n=this.nb.read(a),this.nb.write(a,n-1);this.wa--,this.Pg--,this.Pc(1993)},o.prototype.uE=function(r,n,a){var c=this.Ba(r)+n;if((a=this.Ba(a)+void 0)<c||0>c||a>this.I()-1)throw h.i.N();n=0,(r=this.Ga()).Vb(c);do{for(;r.Ha()&&(c=r.ha(),r.wb()!=a);)n+=c=c.Qb();if(r.wb()==a)break}while(r.$a());return n},o.prototype.fO=function(r,n,a){if(n=this.Ba(r)+n,a=this.Ba(r)+a,0>n||a>this.I()-1)throw h.i.N();var c=this.Ga();if(n>a){if(!this.dc(r))throw h.i.N("cannot iterate across an open path");c.JB()}var p=r=0;c.Vb(n);do p+=r,r=c.ha().Qb();while(c.wb()!=a);return p},o.prototype.mg=function(){return h.pi.gm(this,null)},o.prototype.KS=function(r,n,a){for(var c=r;c<a-1;c++)if(this.dc(c))throw h.i.N("cannot interpolate across closed paths");if((c=this.description.Aa)!=1){var p=this.uE(r,n,a);if(p!=0)for(var d=1;d<c;d++){var g=this.description.kd(d);if(h.ra.lz(g)!=2)for(var w=h.ra.Va(g),x=0;x<w;x++)this.MS(g,r,n,a,p,x)}}},o.prototype.JS=function(r,n,a){var c=this.description.Aa;if(c!=1){var p=this.fO(r,n,a);if(p!=0)for(var d=1;d<c;d++){var g=this.description.kd(d);if(h.ra.lz(g)!=2)for(var w=h.ra.Va(g),x=0;x<w;x++)this.LS(g,r,n,a,p,x)}}},o.prototype.MS=function(r,n,a,c,p,d){var g=this.Ga(),w=this.Ba(n)+a;c=this.Ba(c)+void 0,n=this.Uc(r,w,d),a=this.Uc(r,c,d);var x=n,M=0;g.Vb(w);do if(g.Ha()){if(g.ha(),g.wb()==c)break;this.setAttribute(r,g.wb(),d,x),g.li();do{if(w=g.ha(),g.ik()==c)return;M+=w=w.Qb(),x=h.lc.hq(n,a,M/p),g.On()||this.setAttribute(r,g.ik(),d,x)}while(g.Ha())}while(g.$a())},o.prototype.LS=function(r,n,a,c,p,d){var g=this.Ga(),w=this.Ba(n)+a;if((n=this.Ba(n)+c)!=w){c=this.Uc(r,w,d),a=this.Uc(r,n,d);var x=0;g.Vb(w),g.JB(),w=c;do{var M=g.ha();this.setAttribute(r,g.wb(),d,w),x+=w=M.Qb(),w=h.lc.hq(c,a,x/p)}while(g.ik()!=n)}},o.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},o.prototype.Oc=function(r){r instanceof h.Dd?this.YD(r,-1):this.wN(r)},o.prototype.YD=function(r,n){if(!this.B()&&!r.isIdentity()){this.mc();var a=this.za[0],c=new h.h,p=new h.h;if(0>n){var d=this.tm(),g=0;n=this.wa}else d=this.yv(n),g=this.Ba(n),n=this.Vc(n);for(;g<n;g++){if(c.x=a.read(2*g),c.y=a.read(2*g+1),d){var w=this.Lj.read(g);if(0<=w)switch(7&this.Ve.read(g)){case 2:p.x=this.Sd.read(w),p.y=this.Sd.read(w+1),r.Eh(p,p),this.Sd.write(w,p.x),this.Sd.write(w+1,p.y),p.x=this.Sd.read(w+3),p.y=this.Sd.read(w+4),r.Eh(p,p),this.Sd.write(w+3,p.x),this.Sd.write(w+4,p.y);break;case 4:throw h.i.Qa()}}r.Eh(c,c),a.write(2*g,c.x),a.write(2*g+1,c.y)}this.Pc(1993)}},o.prototype.wN=function(r){if(!this.B()){this.re(1),this.mc();for(var n=this.za[0],a=this.za[1],c=new h.Nd,p=new h.Nd,d=this.tm(),g=0;g<this.wa;g++){if(c.x=n.read(2*g),c.y=n.read(2*g+1),c.z=a.read(g),d){var w=this.Lj.read(g);if(0<=w)switch(7&this.Ve.read(g)){case 2:p.x=this.Sd.read(w),p.y=this.Sd.read(w+1),p.z=this.Sd.read(w+2),p=r.fp(p),this.Sd.write(w,p.x),this.Sd.write(w+1,p.y),this.Sd.write(w+1,p.z),p.x=this.Sd.read(w+3),p.y=this.Sd.read(w+4),p.z=this.Sd.read(w+5),p=r.fp(p),this.Sd.write(w+3,p.x),this.Sd.write(w+4,p.y),this.Sd.write(w+5,p.z);break;case 4:throw h.i.Qa()}}c=r.fp(c),n.write(2*g,c.x),n.write(2*g+1,c.y),a.write(g,c.z)}this.Pc(1993)}},o.prototype.iy=function(){this.nb==null&&(this.nb=h.Yc.Oh(1,0),this.mb=h.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},o.prototype.op=function(r){r.Mg=!1,r.tq=this.tq,r.xq=this.xq,r.nb=this.nb!=null?h.ia.Bn(this.nb):null,r.mb=this.mb!=null?h.pn.Bn(this.mb):null,r.Lj=this.Lj!=null?h.ia.Bn(this.Lj):null,r.Ve=this.Ve!=null?h.pn.Bn(this.Ve):null,r.Sd=this.Sd!=null?h.be.Bn(this.Sd):null,r.sq=this.sq,r.rq=this.rq,r.Aj=this.ak(1024)?null:this.Aj},o.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var r=this.Ga(),n=new h.Fx(0);r.$a();)for(;r.Ha();)n.add(r.ha().Qb());return this.sq=n.rm(),this.Lf(512,!1),n.rm()},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&u.prototype.Nb.call(this,r)))return!1;var n=this.da();return!(n!=r.da()||this.nb!=null&&!this.nb.Nb(r.nb,0,n+1)||this.xq!=r.xq||this.mb!=null&&!this.mb.Nb(r.mb,0,n))&&u.prototype.Nb.call(this,r)},o.prototype.Ga=function(){return new h.YL(this)},o.prototype.hy=function(r){if(u.prototype.hy.call(this,r),this.tm())for(r=this.Ga();r.$a();)r.Ha()},o.prototype.yp=function(r,n){if(u.prototype.yp.call(this,r,n),this.tm())for(r=this.Ga();r.$a();)r.Ha()},o.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},o.prototype.Ev=function(r){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(r)):!!(4&this.mb.read(r)))},o.prototype.Ir=function(r){return this.xf?(this.xu(),this.Aj.read(r)):0},o.prototype.xu=function(){if(this.ak(1024)){var r=this.da();this.Aj==null?this.Aj=new h.be(r):this.Aj.size!=r&&this.Aj.resize(r),r=new h.Fx(0);for(var n=new h.Fx(0),a=new h.h,c=0,p=this.Ga();p.$a();){for(n.reset(),this.D(this.Ba(p.gb),a);p.Ha();)n.add(p.ha().Tx(a.x,a.y));r.add(n.rm());var d=c++;this.Aj.write(d,n.rm())}this.rq=r.rm(),this.Lf(1024,!1)}},o.prototype.FR=function(){if(this.xf){this.fm();for(var r=this.da(),n=0;n<r;n++)4&this.mb.read(n)}},o.prototype.fm=function(){if(this.ak(8)){this.xu();var r=this.da();(this.mb==null||this.mb.size<r)&&(this.mb=h.Yc.Mr(r+1));for(var n=1,a=0;a<r;a++){var c=this.Aj.read(a);a==0&&(n=0<c?1:-1),0<c*n?this.mb.zJ(a,4):this.mb.KE(a,4)}this.Lf(8,!1)}},o.prototype.sz=function(r){var n=this.gb,a=this.da();if(0<=n&&n<a){if(r<this.Vc(n)){if(r>=this.Ba(n))return n;n--}else n++;if(0<=n&&n<a&&r>=this.Ba(n)&&r<this.Vc(n))return this.gb=n}if(5>a){for(n=0;n<a;n++)if(r<this.Vc(n))return this.gb=n;throw h.i.fa("corrupted geometry")}for(n=0,--a;a>n;){var c=n+(a-n>>1);if(r<this.Ba(c))a=c-1;else{if(!(r>=(n=this.Vc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.yz=function(){var r=this.I();if(!this.xf){r-=this.da();for(var n=0,a=this.da();n<a;n++)this.dc(n)&&r++}return r},o.prototype.rv=function(r){var n=this.Ja(r);return this.dc(r)||n--,n},o.prototype.Ia=function(){return new o(this.xf,this.description)},o.prototype.Db=function(){return this.xf?2:1},o.prototype.getType=function(){return this.xf?1736:1607},o.prototype.QJ=function(r){this.nb=r,this.Pc(16777215)},o.prototype.VR=function(){return this.wx(),this.Ve},o.prototype.JR=function(){return this.wx(),this.mb},o.prototype.PJ=function(r){this.mb=r,this.Pc(16777215)},o.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Vc=function(r){return this.nb.read(r+1)},o.prototype.Ja=function(r){return this.nb.read(r+1)-this.nb.read(r)},o.prototype.Ba=function(r){return this.nb.read(r)},o.prototype.lu=function(r,n){this.Bb==null&&(this.Bb=new h.Uk),n=h.Nx.pW(n);var a=this.Bb.Fk;if(a!=null){if(!(a.Ik<r||n>a.RR()))return!0;this.Bb.yD(null)}return a=h.Nx.create(this,r,n),this.Bb.yD(a),!0},o.prototype.cc=function(){var r=u.prototype.cc.call(this);if(!this.Ac()){var n=this.da();this.nb!=null&&this.nb.An(r,0,n+1),this.mb!=null&&this.mb.An(r,0,n)}return r},o.prototype.ZF=function(r){return this.Ve!=null?this.Ve.read(r):1},o.prototype.bc=function(r,n,a){var c=this.sz(r);if(r==this.Vc(c)-1&&!this.dc(c))throw h.i.fa("index out of bounds");this.mc();var p=this.Ve,d=1;if(p!=null&&(d=7&p.read(r)),d!==1)throw h.i.Qa();if(n.Or(),n=n.get(),a?n.Nf(h.ee.og()):n.Nf(this.description),c=r==this.Vc(c)-1&&this.dc(c)?this.Ba(c):r+1,p=new h.h,this.D(r,p),n.Dc(p),this.D(c,p),n.Qc(p),!a)for(a=1,p=this.description.Aa;a<p;a++){d=this.description.Ed(a);for(var g=h.ra.Va(d),w=0;w<g;w++){var x=this.Uc(d,r,w);n.YB(d,w,x),x=this.Uc(d,c,w),n.OB(d,w,x)}}},o.prototype.Rj=function(r,n){if(r>=this.da())throw h.i.N();if(this.B())n.Oa();else{if(this.yv(r))throw h.i.fa("not implemented");var a=this.ub(0),c=new h.h,p=new h.l;p.Oa();var d=this.Ba(r);for(r=this.Vc(r);d<r;d++)a.tc(2*d,c),p.Zb(c);n.K(p)}},o.prototype.fj=function(r){return this.Bb==null&&(this.Bb=new h.Uk),!(r==0||16>this.I())&&(r=h.ta.nE(this),this.Bb.WM(r),!0)},o.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new h.Uk),this.Bb.zo==null){this.Bb.xD(null);var r=h.ta.YN(this);this.Bb.xD(r)}},o.prototype.Yo=function(r){this.xq=r},o.prototype.In=function(){return this.xq},o.prototype.DD=function(r){if(this==r)throw h.i.fa("MultiPathImpl.add");for(var n=this.da(),a=0;a<r.da();a++)this.addPath(r,a,!0),this.CU(n),n++},o.prototype.kO=function(r){var n=this.sz(r),a=this.Ba(n);if(a!=r){if(r>=(n=this.Vc(n))||r<a)throw h.i.fa("change_ring_start_point");for(var c=0,p=this.description.Aa;c<p;c++){var d=this.description.kd(c);d=h.ra.Va(d),this.za[c].rotate(a*d,r*d,n*d)}}},o})(h.Gx);h.Vk=m})(B||(B={})),(function(h){var O=(function(m){function u(o){var r=m.call(this)||this;if(o!==void 0){if(o==null)throw h.i.N();r.description=o}else r.description=h.ee.og();return r.wa=0,r}return ce(u,m),u.prototype.Ia=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.wa+1),this.Dh(this.wa-1,o)},u.prototype.Bu=function(o,r){this.resize(this.wa+1);var n=new h.h;n.ma(o,r),this.Cb(this.wa-1,n)},u.prototype.Fd=function(o,r,n){if(n=0>n?o.I():n,0>r||r>o.I()||n<r)throw h.i.N();if(r!=n){this.Jl(o.description),n-=r;var a=this.wa;this.resize(this.wa+n),this.mc();for(var c=0,p=o.description.Aa;c<p;c++){var d=o.description.Ed(c),g=h.ra.Va(d),w=this.ub(d);d=o.ub(d),w.Mn(a*g,d,r*g,n*g,!0,1,a*g)}}},u.prototype.HD=function(o,r){var n=o.length;if(r=0>r?n:r,0>n||0>r)throw h.i.N();if(r!=0){n=r-0,r=this.wa,this.resize(this.wa+n);for(var a=0;a<n;a++)this.Cb(r+a,o[0+a])}},u.prototype.DB=function(o){if(0>o||o>=this.I())throw h.i.fa("index out of bounds");this.mc();for(var r=0,n=this.description.Aa;r<n;r++)if(this.za[r]!=null){var a=h.ra.Va(this.description.Ed(r));this.za[r].En(a*o,a,a*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},u.prototype.resize=function(o){this.dm(o)},u.prototype.op=function(){},u.prototype.Oa=function(){m.prototype.wD.call(this)},u.prototype.Oc=function(o){if(o instanceof h.Dd){if(this.B())return;this.mc();for(var r=this.za[0],n=new h.h,a=0;a<this.wa;a++)n.x=r.read(2*a),n.y=r.read(2*a+1),o.Eh(n,n),r.write(2*a,n.x),r.write(2*a+1,n.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),r=this.za[0],n=this.za[1];var c=new h.Nd;for(a=0;a<this.wa;a++){c.x=r.read(2*a),c.y=r.read(2*a+1),c.z=n.read(a);var p=o.fp(c);r.write(2*a,p.x),r.write(2*a+1,p.y),n.write(a,p.z)}}this.Pc(1993)},u.prototype.Db=function(){return 0},u.prototype.getType=function(){return 550},u.prototype.Ke=function(){return 0},u.prototype.Qb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&m.prototype.Nb.call(this,o)},u.prototype.lW=function(o,r){var n=this.wa;if(n=Math.min(n,r+1e3),0>r||r>=this.wa||n<r||o.length!=1e3)throw h.i.N();var a=n-r,c=[];for(this.ub(0).Vw(2*r,2*a,c,0,!0),r=0;r<a;r++)o[r]=h.h.construct(c[2*r],c[2*r+1]);return n},u.prototype.$x=function(){},u.prototype.iy=function(){},u.prototype.lu=function(){return!1},u.prototype.fj=function(){return!1},u.prototype.mg=function(){return null},u})(h.Gx);h.de=O})(B||(B={})),(function(h){var O;(O=h.iL||(h.iL={}))[O.NotDetermined=0]="NotDetermined",O[O.Structure=1]="Structure",O[O.DegenerateSegments=2]="DegenerateSegments",O[O.Clustering=3]="Clustering",O[O.Cracking=4]="Cracking",O[O.CrossOver=5]="CrossOver",O[O.RingOrientation=6]="RingOrientation",O[O.RingOrder=7]="RingOrder",O[O.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",O[O.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",O[O.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var m=(function(){function u(o,r,n){o===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=o,this.Jo=r,this.Ko=n)}return u.prototype.Wt=function(o){this.Jj=o.Jj,this.Jo=o.Jo,this.Ko=o.Ko},u})();h.Md=m})(B||(B={})),(function(h){h.O=(function(){function O(){}return O.assert=function(m){if(m===!1)throw h.i.GK()},O.bK=function(m){return isNaN(m)?NaN:m===0?m:0<m?1:-1},O.Fu=function(m){var u;u===void 0&&(u=0);for(var o=[],r=0;r<m;r++)o[r]=O.lg(2,u);return o},O.lg=function(m,u){u===void 0&&(u=0);for(var o=[],r=0;r<m;r++)o[r]=u;return o},O.$u=function(m,u){var o,r;for(o===void 0&&(o=0),r===void 0&&(r=m.length-1);o<=r;o++)m[o]=u},O.Rk=function(m,u,o){return m<u?u:m>o?o:m},O.Th=function(m,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&m):(o<<5)+o+(255&m))<<5)+o+(m>>8&255))<<5)+o+(m>>16&255))<<5)+o+(m>>24&255)&2147483647},O.uj=function(){throw Error("Not Implemented")},O.bB=function(m){return O.aU(m)+12345&2147483647},O.XG=function(m){var u=32,o=m%O.Qx|0,r=m/O.Qx|0;return(u&=63)==0?m:(32>u?(m=o>>>u|r<<32-u,u=r>>u):(m=r>>u-32,u=0<=r?0:-1),u*O.Qx+(m>>>0))},O.aU=function(m){var u=1103515245,o=65535&u;return((u-o)*(m|=0)|0)+(o*m|0)|0},O.truncate=function(m){return 0>m?-1*Math.floor(Math.abs(m)):Math.floor(m)},O.MAX_SAFE_INTEGER=Math.pow(2,53)-1,O.MIN_SAFE_INTEGER=-O.MAX_SAFE_INTEGER,O.VC=65536,O.Qx=O.VC*O.VC,O})()})(B||(B={})),(function(h){var O;(O=h.CL||(h.CL={}))[O.Project=0]="Project",O[O.Union=1]="Union",O[O.Difference=2]="Difference",O[O.Proximity2D=3]="Proximity2D",O[O.Relate=4]="Relate",O[O.Equals=5]="Equals",O[O.Disjoint=6]="Disjoint",O[O.Intersects=7]="Intersects",O[O.Within=8]="Within",O[O.Contains=9]="Contains",O[O.Crosses=10]="Crosses",O[O.Touches=11]="Touches",O[O.Overlaps=12]="Overlaps",O[O.Buffer=13]="Buffer",O[O.Distance=14]="Distance",O[O.Intersection=15]="Intersection",O[O.Clip=16]="Clip",O[O.Cut=17]="Cut",O[O.DensifyByLength=18]="DensifyByLength",O[O.DensifyByAngle=19]="DensifyByAngle",O[O.LabelPoint=20]="LabelPoint",O[O.GeodesicBuffer=21]="GeodesicBuffer",O[O.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",O[O.ShapePreservingDensify=23]="ShapePreservingDensify",O[O.GeodeticLength=24]="GeodeticLength",O[O.GeodeticArea=25]="GeodeticArea",O[O.Simplify=26]="Simplify",O[O.SimplifyOGC=27]="SimplifyOGC",O[O.Offset=28]="Offset",O[O.Generalize=29]="Generalize",O[O.SymmetricDifference=30]="SymmetricDifference",O[O.ConvexHull=31]="ConvexHull",O[O.Boundary=32]="Boundary",O[O.SimpleRelation=33]="SimpleRelation";var m=(function(){function u(){}return u.prototype.getType=function(){return null},u.prototype.wn=function(){},u.prototype.Iu=function(){return!1},u})();h.Je=m})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a,c){return o instanceof h.aa?(c=new h.Zc(o),this.V(c,r,[n],!1,a).next()):a===!0?(n=new h.BC(o,r,n,!1,c),h.Gh.local().V(n,r,c)):new h.BC(o,r,n,!1,c)},u.instance=null,u})(h.Je);h.AC=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n,a){this.ya=-1,this.Rd=u,this.$z=o,this.Cs=r,this.tT=new h.l,this.tT.Oa(),this.eo=-1,this.Ub=a}return m.prototype.next=function(){for(var u;(u=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(u,this.Cs[this.eo]);return null},m.prototype.La=function(){return this.ya},m.prototype.buffer=function(u,o){return h.HK.buffer(u,o,this.$z,NaN,96,this.Ub)},m.prototype.qe=function(){},m})();h.BC=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a).next()):new h.lL(o,r,n,a)},u.instance=null,u})(h.Je);h.kL=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r){if(this.ya=-1,u==null)throw h.i.N();this.$=o,this.yk=u,this.qa=h.ta.Wd(r,o,!1)}return m.prototype.next=function(){var u;return(u=this.yk.next())!=null?(this.ya=this.yk.La(),h.Ud.clip(u,this.$,this.qa,0)):null},m.prototype.La=function(){return this.ya},m.prototype.qe=function(){},m})();h.lL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n){return o instanceof h.aa?h.DC.rE(o):new h.DC(r,o,n)},u.instance=null,u})(h.Je);h.CC=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r){if(this.uA=new h.Zt,this.ya=-1,o==null)throw h.i.N();this.cH=u,this.Ic=!1,this.yk=o,this.Ub=r}return m.prototype.next=function(){if(this.cH){if(!this.Ic){var u=this.dO(this.yk);return this.Ic=!0,u}return null}if(!this.Ic){if((u=this.yk.next())!=null)return this.ya=this.yk.La(),m.rE(u);this.Ic=!0}return null},m.prototype.La=function(){return this.ya},m.prototype.dO=function(u){for(var o;(o=u.next())!=null;)this.uA.Ib(o);return this.uA.cR()},m.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw h.i.fa("Invalid call for non merging convex hull.");var u=this.yk.next();if(u==null)throw h.i.fa("Expects a non-null geometry.");this.uA.Ib(u)}},m.rE=function(u){if(m.VS(u))return u;var o=u.getType();if(h.Vk.yd(o))return(o=new h.Ta(u.description)).oc(u,!0),o;if(o==550&&u.I()==2){var r=new h.Sa;return o=new h.Ta(u.description),u.ve(0,r),o.nf(r),u.ve(1,r),o.lineTo(r),o}return h.Zt.RO(u)},m.VS=function(u){if(u.B())return!0;var o=u.getType();return o==33||o==197||!h.Vk.yd(o)&&(o==550?u.I()==1:o==1607?u.da()==1&&2>=u.I():u.da()==1&&(2>=u.I()||h.Zt.JG(u,0)))},m})();h.DC=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a,c){return new h.nL(o,r,n,a,c)},u.instance=null,u})(h.Je);h.mL=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n,a){if(this.Tf=null,o==null||r==null)throw h.i.fa("invalid argument");this.qT=u,this.nA=o,this.lH=r,u=h.ta.mv(o,r),this.qa=h.ta.Wd(n,u,!0),this.kH=-1,this.nd=a}return m.prototype.La=function(){return 0},m.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},m.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},m.prototype.TQ=function(){var u=new h.Ta,o=new h.Ta,r=new h.Ta;this.Tf.push(u),this.Tf.push(o);var n=[];h.LK.JK(this.qT,this.nA,this.lH,this.qa,n,this.nd);for(var a=0;a<n.length;a++){var c=n[a];if(c.bt==0)u.add(c.X,!1);else if(c.bt==1||c.bt==2)o.add(c.X,!1);else if(c.bt==3)this.Tf.push(c.X);else{if(c.bt!=4)throw h.i.fa("internal");r.add(c.X,!1)}}r.B()||u.B()&&o.B()&&!(3<=this.Tf.length)||this.Tf.push(r),u.B()&&o.B()&&3>this.Tf.length&&(this.Tf.length=0)},m.prototype.SQ=function(){var u=new h.ia(0),o=new h.gd,r=o.aF(),n=o.Ib(this.nA),a=o.Ib(this.lH),c=new h.Fg;try{c.Ft(o,this.qa,this.nd),c.dl(r,n,a,u);var p=o.Ne(n),d=new h.Da,g=new h.Da;for(this.Tf.length=0,this.Tf.push(d),this.Tf.push(g),n=0;n<u.size;n++){var w=new h.gd,x=w.Ib(p),M=w.Ib(o.Ne(u.get(n)));c.dr(w,this.nd);var $=c.Av(x,M),I=w.Ne($);if(!I.B()){var R=o.KF(u.get(n),r);R==2?d.add(I,!1):R==1?g.add(I,!1):this.Tf.push(I);var N=new h.gd;x=N.Ib(p),M=N.Ib(o.Ne(u.get(n))),c.dr(N,this.nd),p=N.Ne(c.im(x,M))}}!p.B()&&0<u.size&&this.Tf.push(p),d.B()&&g.B()&&(this.Tf.length=0)}finally{c.Ug()}},m.prototype.qe=function(){},m})();h.nL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n){if(o instanceof h.aa)return o=new h.Zc(o),this.V(o,r,n).next();if(0>=r)throw h.i.N();return new h.oL(o,r,n)},u.instance=null,u})(h.Je);h.Xl=O})(B||(B={})),(function(h){var O=(function(){function m(u,o){this.ya=-1,this.Rd=u,this.Ps=o}return m.prototype.La=function(){return this.ya},m.prototype.next=function(){var u;return(u=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(u)):null},m.prototype.NP=function(u){if(u.B()||1>u.Db())return u;var o=u.getType();if(o==1736||o==1607)return this.Ny(u);if(h.aa.yd(o))return this.PP(u);if(o==197)return this.OP(u);throw h.i.Qa()},m.prototype.PP=function(u){if(u.Qb()<=this.Ps)return u;var o=new h.Ta(u.description);return o.oc(u,!0),this.Ny(o)},m.prototype.OP=function(u){var o=new h.Da(u.description);o.ad(u,!1);var r=new h.l;return u.A(r),u=r.ca(),r.R()<=this.Ps&&u<=this.Ps?o:this.Ny(o)},m.prototype.Ny=function(u){for(var o=u.Ia(),r=u.Ga();r.$a();)for(var n=!0;r.Ha();){var a=r.ha();if(a.getType()!=322)throw h.i.fa("not implemented");var c=r.On(),p=a.Qb();if(p>this.Ps){var d=Math.ceil(p/this.Ps);p=new h.Sa(u.description),n&&(a.To(p),o.nf(p));var g=n=1/d,w=0;for(--d;w<d;w++)a.Tw(g,p),o.lineTo(p),g+=n;c?o.Ap():(a.Po(p),o.lineTo(p))}else c?o.Ap():o.oc(a,n);n=!1}return o},m.prototype.qe=function(){},m})();h.oL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.getType=function(){return 2},u.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),r=new h.Zc(r),this.V(o,r,n,a).next()):new h.qL(o,r,n,a)},u.im=function(o,r,n,a){if(o.B()||r.B())return o;var c=o.Db(),p=r.Db();if(c>p)return o;var d=o.getType(),g=r.getType(),w=new h.l,x=new h.l,M=new h.l;o.A(w),r.A(x),M.K(w),M.Zb(x);var $=(M=h.ta.Wd(n,M,!0))*Math.sqrt(2)*1.00001,I=new h.l;if(I.K(w),I.W($,$),!I.isIntersecting(x))return o;if(c==1&&p==2)return u.KV(o,r,g,n,a);if(d==33)switch(h.Vk.yd(g)?(n=new h.Ta(r.description),n.oc(r,!0)):n=r,g){case 1736:return u.XU(o,n,M);case 1607:return u.YU(o,n,M);case 550:return u.VU(o,n,M);case 197:return u.UU(o,n,M);case 33:return u.WU(o,n,M);default:throw h.i.N()}else if(d==550)switch(g){case 1736:return u.nU(o,r,M);case 197:return u.lU(o,r,M);case 33:return u.mU(o,r,M)}return h.Fg.im(o,r,n,a)},u.XU=function(o,r,n){return h.hd.KG(r,o,n)==0?o:o.Ia()},u.YU=function(o,r,n){var a=o.D();r=r.Ga();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,d=new h.l;r.$a();)for(;r.Ha();){var g=r.ha();if(g.A(d),d.W(c,c),d.contains(a)){if(g.qs(a,n))return o.Ia();var w=g.ac();if(h.h.yc(a,w)<=p||(w=g.wc(),h.h.yc(a,w)<=p))return o.Ia()}}return o},u.VU=function(o,r,n){var a=r.ub(0);r=r.I();var c=o.D(),p=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var d=0;d<r;d++)if(a.tc(2*d,p),h.h.yc(p,c)<=n)return o.Ia();return o},u.UU=function(o,r,n){var a=new h.l;return r.A(a),a.W(n,n),r=o.D(),a.contains(r)?o.Ia():o},u.WU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D();return r=r.D(),h.h.yc(a,r)<=n?o.Ia():o},u.nU=function(o,r,n){var a=new h.l;r.A(a),a.W(n,n);for(var c=o.I(),p=!1,d=[],g=0;g<c;g++)d[g]=!1;var w=new h.h;for(g=0;g<c;g++)o.D(g,w),a.contains(w)&&h.hd.Yd(r,w,n)!=0&&(p=!0,d[g]=!0);if(!p)return o;for(r=o.Ia(),g=0;g<c;g++)d[g]||r.Fd(o,g,g+1);return r},u.lU=function(o,r,n){var a=new h.l;r.A(a),a.W(n,n),r=o.I();var c=!1;n=[];for(var p=0;p<r;p++)n[p]=!1;var d=new h.h;for(p=0;p<r;p++)o.D(p,d),a.contains(d)&&(c=!0,n[p]=!0);if(!c)return o;for(a=o.Ia(),p=0;p<r;p++)n[p]||a.Fd(o,p,p+1);return a},u.mU=function(o,r,n){var a=o.ub(0),c=o.I(),p=r.D(),d=new h.h,g=!1;r=[];for(var w=0;w<c;w++)r[w]=!1;for(n=(w=n*Math.sqrt(2)*1.00001)*w,w=0;w<c;w++)a.tc(2*w,d),h.h.yc(d,p)<=n&&(g=!0,r[w]=!0);if(!g)return o;for(a=o.Ia(),w=0;w<c;w++)r[w]||a.Fd(o,w,w+1);return a},u.KV=function(o,r,n,a,c){var p=new h.Fh;o.bn(p);var d=new h.l;return r.A(d),p.Zb(d),p.W(.1*p.R(),.1*p.ca()),(d=new h.Da).ad(p,!1),n==1736?d.add(r,!0):d.ad(r,!0),h.Xj.local().V(o,d,a,c)},u.instance=null,u})(h.Je);h.kp=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n){this.ts=o==null,this.ya=-1,this.Rd=u,this.$z=r,this.wT=o.next(),this.Ub=n}return m.prototype.next=function(){return this.ts?null:(u=this.Rd.next())!=null?(this.ya=this.Rd.La(),h.kp.im(u,this.wT,this.$z,this.Ub)):null;var u},m.prototype.La=function(){return this.ya},m.prototype.qe=function(){},m})();h.qL=O})(B||(B={})),(function(h){var O=(function(){function u(o){this.nd=o,this.Bj=new h.l,this.Bj.Oa(),this.oh=new h.l,this.oh.Oa()}return u.prototype.Nt=function(){var o=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=o,o=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=o,o=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=o,o=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=o},u.prototype.eQ=function(o,r){if(this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.fu("user_canceled");var n=!this.Bj.isIntersecting(this.oh);return h.aa.Hc(o.getType())&&h.aa.Hc(r.getType())?o.I()>r.I()?this.gE(o,r,n):(this.Nt(),o=this.gE(r,o,n),this.Nt(),o):o.getType()==550&&h.aa.Hc(r.getType())?(o=this.hE(r,o,n),this.Nt(),o):r.getType()==550&&h.aa.Hc(o.getType())?this.hE(o,r,n):o.getType()==550&&r.getType()==550?o.I()>r.I()?this.iE(o,r):(this.Nt(),o=this.iE(r,o),this.Nt(),o):0},u.prototype.gE=function(o,r,n){var a=o.Ga(),c=r.Ga(),p=new h.l,d=new h.l,g=17976931348623157e292;if(!n&&this.pY(o,r,a,c))return 0;for(;a.$a();)for(;a.Ha();)if((o=a.ha()).A(p),!(p.px(this.oh)>g)){for(;c.$a();)for(;c.Ha();)if((r=c.ha()).A(d),p.px(d)<g&&(r=o.tb(r,n),(r*=r)<g)){if(r==0)return 0;g=r}c.Zi()}return Math.sqrt(g)},u.prototype.hE=function(o,r,n){var a=o.Ga(),c=new h.l,p=17976931348623157e292,d=new h.h,g=r.I();for(n=!n&&o.getType()==1736;a.$a();)for(;a.Ha();){var w=a.ha();if(w.A(c),!(1<g&&c.px(this.oh)>p)){for(var x=0;x<g;x++){if(r.D(x,d),n&&h.hd.Yd(o,d,0)!=0)return 0;var M=w.fe(d,!1);if(d.sub(w.hc(M)),(M=d.Sk())<p){if(M==0)return 0;p=M}}n=!1}}return Math.sqrt(p)},u.prototype.iE=function(o,r){for(var n,a=17976931348623157e292,c=new h.h,p=new h.h,d=o.I(),g=r.I(),w=0;w<d;w++)if(o.D(w,c),!(1<g&&this.oh.iK(c)>a)){for(var x=0;x<g;x++)if(r.D(x,p),(n=h.h.yc(c,p))<a){if(n==0)return 0;a=n}}return Math.sqrt(a)},u.prototype.pY=function(o,r,n,a){if(o.getType()==1736){for(;a.$a();)if(a.Ha()){var c=a.ha();if(h.hd.Yd(o,c.wc(),0)!=0)return!0}a.Zi()}if(r.getType()==1736){for(;n.$a();)if(n.Ha()&&(o=n.ha(),h.hd.Yd(r,o.wc(),0)!=0))return!0;n.Zi()}return!1},u.prototype.gm=function(o,r){return o.B()||r.B()?NaN:(o.A(this.Bj),r.A(this.oh),this.eQ(o,r))},u})(),m=(function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return ce(o,u),o.prototype.V=function(r,n,a){if(r==null||n==null)throw h.i.N();if(r.B()||n.B())return NaN;var c=r.getType(),p=n.getType();if(c==33){if(p==33)return h.h.tb(r.D(),n.D());if(p==197)return a=new h.l,n.A(a),a.tb(r.D());(c=new h.de).add(r),r=c}else if(c==197){if(p==197)return p=new h.l,r.A(p),a=new h.l,n.A(a),a.tb(p);(c=new h.Da).ad(r,!1),r=c}return p==33?((p=new h.de).add(n),n=p):p==197&&((p=new h.Da).ad(n,!1),n=p),new O(a).gm(r,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.getType=function(){return 14},o.instance=null,o})(h.Je);h.rL=m})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n){this.zH=u,this.DH=o,this.nd=n,this.$G=r}return m.prototype.next=function(){var u=this.zH.next();return u==null?null:this.zC(u)},m.prototype.La=function(){return this.zH.La()},m.prototype.zC=function(u){var o=u.getType();if(h.aa.Rn(o))return u;if(o==197)return(o=new h.Da(u.description)).ad(u,!1),this.zC(o);if(u.B())return u;if(u==null)throw h.i.Qa();o=u.Ia();for(var r=new h.yb,n=0,a=u.da();n<a;n++)this.TK(u,n,o,r);return o},m.prototype.TK=function(u,o,r,n){if(!(2>u.Ja(o))){var a=u.Ba(o),c=u.Vc(o)-1,p=u.ub(0),d=u.dc(o),g=new h.ia(0);g.Jb(u.Ja(o)+1);var w=new h.ia(0);for(w.Jb(u.Ja(o)+1),g.add(d?a:c),g.add(a),a=new h.h;1<g.size;){var x=g.Fc();g.If();var M=g.Fc();u.D(x,a),n.Dc(a),u.D(M,a),n.Qc(a),0<=(M=this.SK(n,a,p,x,M,c))?(g.add(M),g.add(x)):w.add(x)}if(d||w.add(g.get(0)),w.size==g.size)r.addPath(u,o,!0);else if(2<=w.size&&(!this.$G||w.size!=2||!(d||h.h.tb(u.Na(w.get(0)),u.Na(w.get(1)))<=this.DH))){for(o=new h.Sa,n=0,c=w.size;n<c;n++)u.ve(w.get(n),o),n==0?r.nf(o):r.lineTo(o);d&&(this.$G||w.size!=2||r.lineTo(o),r.Ap())}}},m.prototype.SK=function(u,o,r,n,a,c){var p=a-1;for(a<=n&&(p=c),c=a=-1,n+=1;n<=p;n++){r.tc(2*n,o);var d=o.x,g=o.y;u.hc(u.fe(o,!1),o),o.x-=d,o.y-=g,(d=o.length())>this.DH&&d>c&&(a=n,c=d)}return a},m.prototype.qe=function(){},m})();h.sL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 29},u.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a).next()):new h.sL(o,r,n,a)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u})(h.Je);h.EC=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a,c,p,d,g){return o instanceof h.aa?(g=new h.Zc(o),this.V(g,r,n,[a],c,p,!1,d).next()):d===!0?(n=new h.GC(o,r,n,a,c,!1,!1,g),h.Gh.local().V(n,r,g)):new h.GC(o,r,n,a,c,!1,!1,g)},u.instance=null,u})(h.Je);h.FC=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n,a,c,p,d){if(c)throw h.i.Ie();if(o==null)throw h.i.N();this.ya=-1,this.Ms=u,this.vg=o,this.ze=r,this.Cs=n,this.$n=a,this.eo=-1,this.Ub=d,this.uT=new h.l,this.uT.Oa()}return m.prototype.next=function(){for(var u;(u=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(u,this.Cs[this.eo]);return null},m.prototype.La=function(){return this.ya},m.prototype.$Q=function(u,o){return h.VK.buffer(u,this.vg,this.ze,o,this.$n,this.Ub)},m.prototype.qe=function(){},m})();h.GC=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n){if(r==null)throw h.i.N();if(o.B()||1>o.Db())return 0;if(n==4)throw h.i.Ie();var a=h.cb.sc(r),c=h.cb.vv(a),p=h.cb.ev(a);c*=2-c;var d=a.Hd().ai,g=o.getType();if(g==1736||g==197)var w=o.mg();else h.aa.yd(g)?(w=new h.Ta(o.description)).oc(o,!0):w=o;if(a.Nb(r)==0){if(h.cb.Wc(r)){w=h.Hh.lj(w,r),g==1607&&w==o&&(w=h.aa.jg(o)),o=new h.Nc,h.cb.gh(r).cn(o),g=0;for(var x=w.I();g<x;g++){var M=w.Na(g);M.x=h.Hh.Zm(M.x,o),w.Cb(g,M)}}o=w.Ia(),w=h.Hh.WI(r,a,w,o)?o:h.cb.zh(w,r,a)}return this.hQ(w,n,p,c,d)},u.prototype.hQ=function(o,r,n,a,c){var p=new h.ga(0),d=0;for(o=o.Ga();o.$a();)for(;o.Ha();){var g=o.ha(),w=g.ac();g=g.wc(),w.scale(c),g.scale(c),h.kb.wd(n,a,w.x,w.y,g.x,g.y,p,null,null,r),d+=p.u}return d},u.instance=null,u})(h.Je);h.vL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a,c){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a,c).next()):new h.uL(o,n,a,r,-1,-1,c)},u.instance=null,u})(h.Je);h.tL=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n,a,c){if(0<c||r!=4&&0<a)throw h.i.Ie();if(o==null)throw h.i.N();this.ya=-1,this.Ms=u,this.vg=o,this.ze=r,this.DT=n,this.CT=a}return m.prototype.next=function(){for(var u;(u=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(u);return null},m.prototype.La=function(){return this.ya},m.prototype.Zy=function(u){return h.cj.Qr(u,this.vg,this.ze,this.DT,this.CT,this.Ub)},m.prototype.qe=function(){},m})();h.uL=O})(B||(B={})),(function(h){(function(O){O[O.Unknown=0]="Unknown",O[O.Contains=1]="Contains",O[O.Within=2]="Within",O[O.Equals=3]="Equals",O[O.Disjoint=4]="Disjoint",O[O.Touches=8]="Touches",O[O.Crosses=16]="Crosses",O[O.Overlaps=32]="Overlaps",O[O.NoThisRelation=64]="NoThisRelation",O[O.Intersects=1073741824]="Intersects",O[O.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.cL||(h.cL={})),h.wL=(function(){function O(){}return O.nW=function(m,u){var o=m.getType(),r=u.getType();if(h.aa.xj(o)){var n=m.Bb;if(n!=null&&(n=n.Fk)!=null){if(r==33){var a=u.D();n=n.So(a.x,a.y)}else a=new h.l,u.A(a),n=n.Ro(a);if(n==1)return 1;if(n==0)return 4}}if(h.aa.xj(r)&&(n=u.Bb)!=null&&(n=n.Fk)!=null){if(o==33?(m=m.D(),n=n.So(m.x,m.y)):(u=new h.l,m.A(u),n=n.Ro(u)),n==1)return 2;if(n==0)return 4}return 0},O})()})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.getType=function(){return 15},u.prototype.V=function(o,r,n,a,c){return o instanceof h.aa?(o=new h.Zc(o),r=new h.Zc(r),this.V(o,r,n,a,c===void 0?-1:c).next()):c===void 0?new h.HC(o,r,n,a,-1):new h.HC(o,r,n,a,c)},u.prototype.wn=function(o,r,n){this.Iu(o)&&(r=h.ta.kj(r,o,!1),o.fj(n)||o.lu(r,n))},u.prototype.Iu=function(o){return h.Nx.zE(o)},u.instance=null,u})(h.Je);h.Xj=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n,a){if(this.ts=o==null,this.ya=-1,this.Rd=u,this.vg=r,this.Se=o.next(),this.Dj=this.Se.getType(),this.Ub=n,this.Fi=a,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw h.i.N("bad dimension mask")}return m.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var u=this.zw.next();if(u!=null)return u;this.zw=null}for(;(u=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?u=this.Ea(u):(this.zw=this.PS(u),u=this.zw.next()),u;return null},m.prototype.La=function(){return this.ya},m.prototype.Ea=function(u){var o=this.zK(u);if(o!=null)return o;o=h.ta.mv(this.Se,u);var r=h.ta.Wd(this.vg,o,!0);o=new h.l,this.Se.A(o);var n=new h.l;return u.A(n),o.W(2*r,2*r),o.Ea(n),o.W(100*r,100*r),r=h.Ud.clip(this.Se,o,0,0),u=h.Ud.clip(u,o,0,0),h.Fg.Av(u,r,this.vg,this.Ub)},m.prototype.QI=function(u,o,r){var n=0;if(1&o)r[0]==null&&(r[0]=new h.de(u)),n++;else for(var a=0;a<r.length-1;a++)r[a]=r[a+1];if(2&o)r[n]==null&&(r[n]=new h.Ta(u)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if(4&o)r[n]==null&&(r[n]=new h.Da(u)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if(n!=3){for(u=[],a=0;a<n;a++)u[a]=r[a];return new h.Zc(u)}return new h.Zc(r)},m.prototype.PS=function(u){var o=this.zK(u);if(o!=null){var r=[null,null,null];return r[o.Db()]=o,this.QI(u.description,this.Fi,r)}o=h.ta.mv(this.Se,u),r=h.ta.Wd(this.vg,o,!0),o=new h.l,this.Se.A(o),o.W(2*r,2*r);var n=new h.l;return u.A(n),o.Ea(n),o.W(100*r,100*r),r=h.Ud.clip(this.Se,o,0,0),o=h.Ud.clip(u,o,0,0),r=h.Fg.Pz(o,r,this.vg,this.Ub),this.QI(u.description,this.Fi,r)},m.prototype.zK=function(u){var o=h.ta.mv(u,this.Se),r=h.ta.Wd(this.vg,o,!0);o=u.getType();var n=u.B(),a=this.Se.B();if(!(a=n||a)){a=new h.l,u.A(a);var c=new h.l;this.Se.A(c),c.W(2*r,2*r),a=!a.isIntersecting(c)}if(!a)if((c=h.wL.nW(this.Se,u))==4)a=!0;else{if(2&c)return this.Se;if(1&c)return u}if(a)return(r=h.aa.tf(o))<(a=h.aa.tf(this.Dj))?m.HB(u,n):r>a||r==0&&o==550&&this.Dj==33?this.nJ():m.HB(u,n);if((this.Fi==-1||this.Fi==4)&&o==197&&this.Dj==197)return r=this.Se,o=new h.l,u.A(o),n=new h.l,r.A(n),o.Ea(n),r=new h.Fh,u.copyTo(r),r.Xo(o),r;if(o==197&&h.aa.tf(this.Dj)==0||this.Dj==197&&h.aa.tf(o)==0)return n=o==197?u:this.Se,u=o==197?this.Se:u,o=new h.l,n.A(o),h.Ud.clip(u,o,r,0);if(h.aa.tf(o)==0&&0<h.aa.tf(this.Dj)||0<h.aa.tf(o)&&h.aa.tf(this.Dj)==0){if(r=h.ta.kj(this.vg,u,!1),o==550||o==33)return h.Fg.zG(u,this.Se,r);if(this.Dj==550||this.Dj==33)return h.Fg.zG(this.Se,u,r);throw h.i.Qa()}return this.Fi!=-1&&this.Fi!=2||o!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||o!=1736||this.Dj!=1607?null:this.wK(this.Se,u):this.wK(u,this.Se)},m.prototype.wK=function(u,o){var r=u,n=o,a=h.ta.kj(this.vg,o,!1),c=new h.l;n.A(c);var p=new h.l;r.A(p),p.W(2*a,2*a),c.Ea(p),c.W(10*a,10*a),r=u=h.Ud.clip(u,c,0,0),p=new h.ia(0);var d=-1,g=n.Bb;if(g!=null){var w=g.Fk;if(w!=null){d=0,p.Jb(r.I()+r.da());for(var x=new h.l,M=r.Ga();M.$a();)for(;M.Ha();){M.ha().A(x);var $=w.Ro(x);$==1?p.add(1):$==0?p.add(0):(p.add(-1),d++)}}}if(5<o.I()&&(g=(n=o=h.Ud.clip(o,c,0,0)).Bb),0>d&&(d=r.yz()),c=r.I()+n.I(),d*n.I()>Math.log(c)*c*4)return null;c=null,d=n.Ga(),g!=null&&g.Fb!=null&&(c=g.Fb),c==null&&20<n.I()&&(c=h.ta.nE(n)),u=u.Ia(),n=null,g=r.Ga(),w=[0,0,0,0,0,0,0,0,0],x=new h.be(0),M=new h.ig,$=-1;for(var I=0,R=0,N=0<p.size,j=-1;g.$a();){j=g.gb;var z=0;for($=-1,I=0;g.Ha();){var D=N?h.O.truncate(p.get(R)):-1;R++;var U=g.ha();if(0>D){if(c!=null)for(n==null?n=c.vR(U,a):n.Uo(U,a),D=n.next();D!=-1;D=n.next()){d.Vb(c.ja(D)),D=d.ha();var V=U.Ea(D,null,w,null,a);for(D=0;D<V;D++)x.add(w[D])}else for(d.Zi();d.$a();)for(;d.Ha();)for(D=d.ha(),V=U.Ea(D,null,w,null,a),D=0;D<V;D++)x.add(w[D]);if(0<x.size){x.Vd(0,x.size,(function(dt,ft){return dt-ft}));var W=0;x.add(1),V=-1,D=0;for(var Z=x.size;D<Z;D++){var it=x.get(D);if(it!=W){var ot=!1;if(W!=0||it!=1?(U.ah(W,it,M),W=M.get()):(W=U,ot=!0),2<=z){if(u.Dr(r,j,$,I,z==3),this.QD(o,W.ac(),a)!=1&&this.RD(o,W,a)!=1)return null;u.oc(W,!1),z=1,I=0}else switch(V=this.RD(o,W,a),V){case 1:ot?2>z?($=g.wb()-r.Ba(j),I=1,z=z==0?3:2):I++:(u.oc(W,z==0),z=1);break;case 0:z=0,$=-1,I=0;break;default:return null}W=it}}}else{if(0>(D=this.QD(o,U.ac(),a)))return null;D==1?(2>z&&($=g.wb()-r.Ba(j),z=z==0?3:2),I++):($=-1,I=0)}x.clear(!1)}else D!=0&&D==1&&(z==0?(z=3,$=g.wb()-r.Ba(j)):z==1?(z=2,$=g.wb()-r.Ba(j)):I++)}2<=z&&(u.Dr(r,j,$,I,z==3),$=-1)}return u},m.prototype.QD=function(u,o,r){return h.Dg.wm(u,o,r)},m.prototype.RD=function(u,o,r){var n=o.ac();o=o.wc();var a=h.Dg.wm(u,n,r),c=h.Dg.wm(u,o,r);return a==1&&c==0||a==0&&c==1?-1:a==0||c==0?0:a==1||c==1?1:((a=new h.h).add(n,o),a.scale(.5),(u=h.Dg.wm(u,a,r))==0?0:u==1?1:-1)},m.HB=function(u,o){return o?u:u.Ia()},m.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},m.prototype.qe=function(){},m})();h.HC=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a,c,p,d){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a,c,p,d).next()):new h.xL(o,r,n,a,c,p,d)},u.instance=null,u})(h.Je);h.IC=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n,a,c,p){this.ya=-1,this.Rd=u,this.Mj=o,this.Ka=r,this.Ki=n,this.CA=a,this.uH=c,this.nd=p}return m.prototype.next=function(){var u=this.Rd.next();return u!=null?(this.ya=this.Rd.La(),this.jL(u)):null},m.prototype.La=function(){return this.ya},m.prototype.jL=function(u){var o=0>=this.uH?h.ta.kj(this.Mj,u,!1):this.uH;return h.IK.V(u,this.Ka,this.Ki,this.CA,o,this.nd)},m.prototype.qe=function(){},m})();h.xL=O})(B||(B={})),(function(h){var O;(O=h.NK||(h.NK={}))[O.clipToDomainOnly=1]="clipToDomainOnly",O[O.clipWithHorizon=2]="clipWithHorizon",O[O.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var m=(function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return ce(o,u),o.prototype.getType=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.V=function(r,n,a){return r instanceof h.aa?(r=new h.Zc(r),this.V(r,n,a).next()):new h.yL(r,n,a)},o.prototype.transform=function(r,n,a,c){return h.bu.transform(r,n,a,c,!0)},o.prototype.Qt=function(r,n,a,c){return h.bu.Qt(r,n,a,c)},o.instance=null,o})(h.Je);h.Hx=m})(B||(B={})),(function(h){var O=(function(){function m(u,o,r){this.ya=-1,this.Rd=u,this.MT=o,this.nd=r}return m.prototype.next=function(){var u=this.Rd.next();return u!=null?(this.ya=this.Rd.La(),h.bu.zh(u,this.MT,this.nd)):null},m.prototype.La=function(){return this.ya},m.prototype.qe=function(){},m})();h.yL=O})(B||(B={})),(function(h){var O=(function(){function u(){}return u.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},u.prototype.AQ=function(o,r,n){for(o.Vb(r,n);o.Ha();){var a=o.ha();if((a=a.Qb())!=0)return o.wb()}for(o.Vb(r,n);o.Ez();)if((a=(a=o.li()).Qb())!=0)return o.wb();return-1},u.prototype.BQ=function(o,r){for(o.Vb(r,-1);o.Ez();)if(o.li().Qb()!=0)return o.wb();return-1},u.prototype.zQ=function(o,r){for(o.Vb(r,-1),o.ha();o.Ha();)if(o.ha().Qb()!=0)return o.wb();return-1},u.prototype.yQ=function(o,r,n,a){if(this.xk=this.AQ(r,n,a),this.xk!=-1){r.Vb(this.xk,-1);var c=r.ha(),p=c.hc(c.fe(o,!1));if(n=h.h.yc(p,o),(a=new h.h).L(p),a.sub(c.ac()),(p=new h.h).L(o),p.sub(c.ac()),this.kq=0>a.wi(p),this.ph=this.zQ(r,this.xk),this.ph!=-1){r.Vb(this.ph,-1);var d=(c=r.ha()).fe(o,!1);d=c.hc(d);var g=h.h.yc(d,o);g>n?this.ph=-1:(a.L(d),a.sub(c.ac()),p.L(o),p.sub(c.ac()),this.us=0>a.wi(p))}this.ph==-1&&(this.ph=this.BQ(r,this.xk),this.ph!=-1&&(r.Vb(this.ph,-1),d=(c=r.ha()).fe(o,!1),d=c.hc(d),(g=h.h.yc(d,o))>n?this.ph=-1:(a.L(d),a.sub(c.ac()),p.L(o),p.sub(c.ac()),this.us=0>a.wi(p),o=this.xk,this.xk=this.ph,this.ph=o,o=this.kq,this.kq=this.us,this.us=o)))}},u.prototype.cO=function(o,r,n,a,c){return n=n.Ga(),this.yQ(o,n,a,c),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(n.Vb(this.xk,-1),o=n.ha().kg(),n.Vb(this.ph,-1),r=n.ha().kg(),0<=o.wi(r)):r},u})(),m=(function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return ce(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.getType=function(){return 3},o.prototype.nz=function(r,n,a){var c;if(c===void 0&&(c=!1),r.B())return new h.$l;n=n.D();var p=r,d=r.getType();switch(d==197&&((p=new h.Da).ad(r,!1),d=1736),d){case 33:return this.xI(p,n);case 550:return this.jI(p,n);case 1607:case 1736:return this.bU(p,n,a,c);default:throw h.i.fa("not implemented")}},o.prototype.oz=function(r,n){if(r.B())return new h.$l;n=n.D();var a=r,c=r.getType();switch(c==197&&((a=new h.Da).ad(r,!1),c=1736),c){case 33:return this.xI(a,n);case 550:case 1607:case 1736:return this.jI(a,n);default:throw h.i.fa("not implemented")}},o.prototype.pz=function(r,n,a,c){if(0>c)throw h.i.N();if(r.B())return[];n=n.D();var p=r,d=r.getType();switch(d==197&&((p=new h.Da).ad(r,!1),d=1736),d){case 33:return this.TU(p,n,a,c);case 550:case 1607:case 1736:return this.tU(p,n,a,c);default:throw h.i.fa("not implemented")}},o.prototype.bU=function(r,n,a,c){if(r.getType()==1736&&a&&(a=new h.l,r.A(a),a=h.ta.Wd(null,a,!1),(c?h.hd.Yd(r,n,0):h.hd.Yd(r,n,a))!=0)){var p=new h.$l(n,0,0);return c&&p.WJ(!0),p}var d=r.Ga();p=new h.h;for(var g=a=-1,w=17976931348623157e292,x=0;d.$a();)for(;d.Ha();){var M=d.ha();M=M.hc(M.fe(n,!1));var $=h.h.yc(M,n);$<w?(x=1,p=M,a=d.wb(),g=d.gb,w=$):$==w&&x++}return p=new h.$l(p,a,Math.sqrt(w)),c&&(d.Vb(a,g),M=d.ha(),c=0>h.h.Uq(n,M.ac(),M.wc()),1<x&&((x=new O).reset(),c=x.cO(n,c,r,a,g)),p.WJ(c)),p},o.prototype.xI=function(r,n){return r=r.D(),n=h.h.tb(r,n),new h.$l(r,0,n)},o.prototype.jI=function(r,n){for(var a=r.ub(0),c=r.I(),p=r=0,d=0,g=17976931348623157e292,w=0;w<c;w++){var x=new h.h;a.tc(2*w,x);var M=h.h.yc(x,n);M<g&&(p=x.x,d=x.y,r=w,g=M)}return(n=new h.$l).ey(p,d,r,Math.sqrt(g)),n},o.prototype.TU=function(r,n,a,c){return c==0?[]:(a*=a,r=r.D(),(n=h.h.yc(r,n))<=a?(a=[],(c=new h.$l).ey(r.x,r.y,0,Math.sqrt(n)),a[0]=c):a=[],a)},o.prototype.tU=function(r,n,a,c){if(c==0)return[];var p=r.ub(0),d=r.I();r=[],a*=a;for(var g=0;g<d;g++){var w=p.read(2*g),x=p.read(2*g+1),M=n.x-w,$=n.y-x;(M=M*M+$*$)<=a&&(($=new h.$l).ey(w,x,g,Math.sqrt(M)),r.push($))}return n=r.length,r.sort((function(I,R){return I.Ka<R.Ka?-1:I.Ka==R.Ka?0:1})),c>=n||(r.length=c),r.slice(0)},o.instance=null,o})(h.Je);h.Ix=m})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 4},u.prototype.V=function(o,r,n,a,c){return h.am.yB(o,r,n,a,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Iu=function(o){return h.Vt.wy(o)},u.prototype.wn=function(o,r,n){h.Vt.CD(o,r,n)},u.instance=null,u})(h.Je);h.zL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 33},u.prototype.V=function(o,r,n,a,c){return o===1073741824?!h.ud.zB(r,n,a,4,c):h.ud.zB(r,n,a,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Iu=function(o){return h.Vt.wy(o)},u.prototype.wn=function(o,r,n){h.Vt.CD(o,r,n)},u.instance=null,u})(h.Je);h.dj=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n){if(this.nd=n,this.rT=r,this.ya=-1,u==null)throw h.i.N();this.yk=u,this.Mj=o}return m.prototype.next=function(){var u;if((u=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.fu("user_canceled");return this.eC(u)}return null},m.prototype.La=function(){return this.ya},m.prototype.eC=function(u){if(u==null)throw h.i.N();return h.Jx.cK(u,this.Mj,this.rT,this.nd)},m.prototype.qe=function(){},m})();h.AL=O})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 26},u.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,r,n,a).next()):new h.AL(o,r,n,a)},u.prototype.rs=function(o,r,n,a,c){return 0<(a!==void 0?h.Jx.rs(o,r,n,a,c):h.Jx.rs(o,r,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u})(h.Je);h.Yl=O})(B||(B={})),(function(h){var O=(function(){function c(){this.yq=0}return c.prototype.nX=function(p){this.yq&=-2,this.yq|=p?1:0},c.prototype.Wp=function(){return!!(1&this.yq)},c.prototype.XF=function(){return this.Wp()?0:1},c})();h.xY=O;var m=function(){},u=function(c,p,d,g){this.x=c,this.y=p,this.Ai=d,this.xm=g},o=(function(){function c(p){this.Be=p}return c.prototype.compare=function(p,d,g){return p=p.ja(g),d=this.Be.lf.read(2*d),0>(d-=p=this.Be.lf.read(2*p))?-1:0<d?1:0},c})(),r=(function(){function c(p){this.Be=p}return c.prototype.compare=function(p,d,g){d=this.Be.hb[d],p=this.Be.hb[p.ja(g)];var w=d.Wp(),x=p.Wp();g=d.ne.Pe(this.Be.Mo,0);var M=p.ne.Pe(this.Be.Mo,0);return g==M&&((w=.5*((g=Math.min(w?d.ne.na:d.ne.la,x?p.ne.na:p.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(w=g),g=d.ne.Pe(w,0),M=p.ne.Pe(w,0)),g<M?-1:g>M?1:0},c})(),n=(function(){function c(p,d){this.YI=new h.h,this.parent=p,this.dS=d}return c.prototype.nr=function(p,d,g){var w=this.parent,x=this.dS;g.Vd(p,d,(function(M,$){return w.Mh(M,$,x)}))},c.prototype.$p=function(p){return p=this.parent.gi.get(p),this.parent.lf.tc(2*(p>>1),this.YI),this.YI.y+(1&p?this.parent.Oj:-this.parent.Oj)},c})(),a=(function(){function c(p,d,g,w,x){this.nH=p.description,this.X=p,this.Qg=d,this.Oj=h.ta.kj(this.Qg,p,!1),this.Bo=h.ta.kj(this.Qg,p,!0),this.xA=g,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new h.jp,this.fb=new h.Yj,this.ke=new h.Md,this.ZG=this.ql=x}return c.prototype.eT=function(){return this.ZG=!0,(!h.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?h.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},c.prototype.kC=function(p,d){var g=this.lf.read(2*p);p=this.lf.read(2*p+1);var w=this.lf.read(2*d);d=this.lf.read(2*d+1);var x=!h.Yt.Cv(g,p,w,d,this.Oj*this.Oj);return x||this.X.Db()!=0&&g==w&&p==d},c.prototype.GE=function(){for(var p=this.X,d=p.xf?3:2,g=0,w=p.da();g<w;g++)if(p.Ja(g)<d)return this.ke=new h.Md(1,g,0),!1;return!0},c.prototype.DE=function(p){var d=this.X,g=d.Ga(),w=d.hasAttribute(1);for(d=w?h.ta.wE(this.Qg,d,!1):0;g.$a();)for(;g.Ha();){var x=g.ha();if(!(x.Qb()>this.Oj)){if(p&&w){var M=x.wv(1,0);if(x=x.wv(1,0),Math.abs(x-M)>d)continue}return this.ke=new h.Md(2,g.wb(),-1),!1}}return!0},c.prototype.mO=function(){var p=this.X,d=null;h.aa.Hc(this.X.getType())&&(d=this.X);var g=(this.ZG||this.ql)&&d!=null,w=p.I();this.lf=p.ub(0),this.gi=new h.ia(0),this.gi.Jb(2*w),this.fi=new h.ia(0),this.fi.Jb(2*w),g&&(this.Fl==null&&(this.Fl=new h.ia(0)),this.Fl.Jb(w));for(var x=p=0;x<w;x++)if(this.gi.add(2*x),this.gi.add(2*x+1),this.fi.add(2*x),this.fi.add(2*x+1),g){for(;x>=d.Vc(p);)p++;this.Fl.add(p)}for(new h.Xt().sort(this.fi,0,2*w,new n(this,g)),this.fb.clear(),this.fb.Vo(new o(this)),this.fb.De(w),d=0,w*=2;d<w;d++)if(g=this.fi.get(d),g=(p=this.gi.get(g))>>1,1&p){if(p=this.fb.search(g,-1),x=this.fb.we(p),M=this.fb.lb(p),this.fb.vd(p,-1),x!=-1&&M!=-1&&!this.kC(this.fb.ja(x),this.fb.ja(M)))return this.ke=new h.Md(3,this.fb.ja(x),this.fb.ja(M)),!1}else{if(p=this.fb.addElement(g,-1),(x=this.fb.we(p))!=-1&&!this.kC(this.fb.ja(x),g))return this.ke=new h.Md(3,g,this.fb.ja(x)),!1;var M=this.fb.lb(p);if(M!=-1&&!this.kC(this.fb.ja(M),g))return this.ke=new h.Md(3,g,this.fb.ja(M)),!1}return!0},c.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},c.prototype.oO=function(){var p=new h.gd;p.Ib(this.X);var d=new h.Md;return!h.$t.kI(!1,p,this.Oj,d,this.nd)||(d.Jo=p.Ua(d.Jo),d.Ko=p.Ua(d.Ko),this.ke.Wt(d),!1)},c.prototype.nO=function(){var p=this.X,d=p.Ga();for(p=p.Ga();d.$a();)for(;d.Ha();){var g=d.ha();if(!d.Qn()||!d.$S()){p.BW(d);do for(;p.Ha();){var w=p.ha();if((w=g.zr(w,this.Oj,!0))!=0)return this.ke=new h.Md(w==2?5:4,d.wb(),p.wb()),!1}while(p.$a())}}return!0},c.prototype.sO=function(){var p=this.X;this.hb.length=0,this.po.length=0,this.Zf=p.Ga(),this.Zf.JB();var d=new h.ia(0);d.Jb(10);var g=NaN,w=0,x=0;for(p=2*p.I();x<p;x++){var M=this.fi.get(x);if(!(1&(M=this.gi.get(M)))){M>>=1;var $=this.lf.read(2*M),I=this.lf.read(2*M+1);if(d.size!=0&&($!=g||I!=w)){if(!this.RI(d))return!1;d?.clear(!1)}d.add(M),g=$,w=I}}return!!this.RI(d)},c.prototype.rO=function(){for(var p=this.X,d=Array(p.da()),g=0,w=p.da();g<w;g++)d[g]=p.Nn(g);w=new m;var x=new h.h;g=this.fi.get(0);var M=(g=this.gi.get(g))>>1;this.lf.tc(2*M,x);var $=d[g=this.Fl.get(M)],I=p.Ba(g),R=p.Vc(g)-1;w.el=M==I||M==R,w.ny=this.ql?!$&&w.el:w.el,w.Ai=g,w.x=x.x,w.y=x.y,w.xm=M;for(var N=new m,j=1,z=this.fi.size;j<z;j++)if(g=this.fi.get(j),!(1&(g=this.gi.get(g)))){M=g>>1,this.lf.tc(2*M,x),(g=this.Fl.get(M))!=w.Ai&&($=d[g],I=p.Ba(g),R=p.Vc(g)-1);var D=M==I||M==R,U=this.ql?!$&&w.el:w.el;if(N.x=x.x,N.y=x.y,N.Ai=g,N.xm=M,N.ny=U,N.el=D,N.x==w.x&&N.y==w.y){if(this.ql){if(!(N.ny&&w.ny||N.Ai==w.Ai&&(N.el||w.el)))return this.ke=new h.Md(8,N.xm,w.xm),!1}else if(!N.el||!w.el)return this.ke=new h.Md(5,N.xm,w.xm),!1}g=w,w=N,N=g}return!0},c.prototype.JE=function(){for(var p=this.X,d=[],g=-1,w=!1,x=0,M=p.da();x<M;x++)p.Ev(x)&&(w=!1,g++,x<M-1&&(p.Ev(x+1)||(w=!0))),d[x]=w?g:-1;w=new h.h,x=this.fi.get(0);var $=(x=this.gi.get(x))>>1;this.lf.tc(2*$,w),x=this.Fl.get($),g=new u(w.x,w.y,x,$,d[x]),p=[];var I=1;for(M=this.fi.size;I<M;I++)if(x=this.fi.get(I),!(1&(x=this.gi.get(x)))){if($=x>>1,this.lf.tc(2*$,w),x=this.Fl.get($),(x=new u(w.x,w.y,x,$,d[x])).x==g.x&&x.y==g.y){if(x.Ai==g.Ai)return this.ke=new h.Md(9,x.xm,g.xm),!1;0<=d[x.Ai]&&d[x.Ai]==d[g.Ai]&&(p.length!=0&&p[p.length-1]==g||p.push(g),p.push(x))}g=x}if(p.length==0)return!0;for(x=new h.jp(!0),h.O.$u(d,-1),w=-1,(I=new h.h).Rc(),g=0,M=p.length;g<M;g++){($=p[g]).x==I.x&&$.y==I.y||(w=x.Ph(0),I.x=$.x,I.y=$.y);var R=d[$.Ai];R==-1&&(R=x.Ph(2),d[$.Ai]=R),x.addElement(R,w),x.addElement(w,R)}for((M=new h.ia(0)).Jb(10),g=x.je;g!=-1;g=x.qz(g))if(!(1&(p=x.PF(g)))&&2&p){for(p=-1,M.add(g),M.add(-1);0<M.size;){if(w=M.Fc(),M.If(),I=M.Fc(),M.If(),1&($=x.PF(I))){p=2&$?I:w;break}for(x.fX(I,1|$),$=x.rc(I);$!=-1;$=x.lb($))(R=x.getData($))!=w&&(M.add(R),M.add(I))}if(p!=-1){for(x=-1,g=0,M=d.length;g<M;g++)if(d[g]==p){x=g;break}return this.ke=new h.Md(10,x,-1),!1}}return!0},c.prototype.tO=function(){var p=this.X;if(0>=p.Ke())return this.ke=new h.Md(6,p.da()==1?1:-1,-1),0;if(p.da()==1)return this.ql&&!this.JE()?0:2;this.to=h.ia.qf(p.da(),0),this.JA=h.ia.qf(p.da(),-1);for(var d=-1,g=0,w=0,x=p.da();w<x;w++){var M=p.Ir(w);if(this.to.write(w,0>M?0:256),0<M)d=w,g=M;else{if(M==0)return this.ke=new h.Md(6,w,-1),0;if((0>d||g<Math.abs(M))&&(this.ke=new h.Md(7,w,-1),this.ql))return 0;this.JA.write(w,d)}}for(this.dt=p.da(),this.Om=new h.ia(0),this.Om.Jb(10),x=p.I(),this.Mo=NaN,(p=new h.ia(0)).Jb(10),this.Qq=h.ia.qf(x,-1),this.Hw=h.ia.qf(x,-1),this.zj!=null?this.zj.clear(!1):this.zj=new h.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new r(this)),d=0,x*=2;0<this.dt&&d<x;d++)if(g=this.fi.get(d),!(1&(g=this.gi.get(g)))){if(g>>=1,(w=this.lf.read(2*g+1))!=this.Mo&&p.size!=0){if(!this.ut(p))return 0;p?.clear(!1)}p.add(g),this.Mo=w}return 0<this.dt&&!this.ut(p)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},c.prototype.RI=function(p){if(p.size==1)return!0;for(var d=0,g=p.size;d<g;d++){var w=p.get(d);this.Zf.Vb(w);var x=this.Zf.li();this.hb.push(this.Su(x,w,this.Zf.gb,!0)),this.Zf.ha(),x=this.Zf.ha(),this.hb.push(this.Su(x,w,this.Zf.gb,!1))}var M=this;for(this.hb.sort((function(R,N){return M.XP(R,N)})),(w=this.mh.je)==-1&&(w=this.mh.Ph(0)),this.mh.fn(this.hb.length),d=0,g=this.hb.length;d<g;d++)this.mh.addElement(w,d);d=!0;for(var $=g=-1;d&&(d=!1,(x=this.mh.rc(w))!=-1);)for(var I=this.mh.lb(x);I!=-1;)if(g=this.mh.getData(x),$=this.mh.getData(I),(g=this.hb[g].Io)!=($=this.hb[$].Io))x=I,I=this.mh.lb(x);else if(d=!0,this.mh.jd(w,x),x=this.mh.we(I),(I=this.mh.jd(w,I))==-1||x==-1)break;if(d=this.mh.bs(w),this.mh.LE(w),0<d)return this.ke=new h.Md(5,g,$),!1;for(d=0,g=p.size;d<g;d++)this.vB(this.hb[d]);return this.hb.length=0,!0},c.prototype.ut=function(p){for(var d=0,g=p.size;d<g;d++){var w=p.get(d),x=this.Qq.read(w);if(x!=-1){var M=this.fb.ja(x);this.zj.add(M),this.fb.vd(x,-1),this.vB(this.hb[M]),this.hb[M]=null,this.Qq.write(w,-1)}(x=this.Hw.read(w))!=-1&&(M=this.fb.ja(x),this.zj.add(M),this.fb.vd(x,-1),this.vB(this.hb[M]),this.hb[M]=null,this.Hw.write(w,-1))}for(d=0,g=p.size;d<g;d++){if(w=p.get(d),this.Zf.Vb(w),(x=this.Zf.li()).na>x.la){var $=this.Zf.wb(),I=this.Su(x,w,this.Zf.gb,!0);0<this.zj.size?(M=this.zj.Fc(),this.zj.If(),this.hb[M]=I):(M=this.hb.length,this.hb.push(I)),x=this.fb.addElement(M,-1),this.Qq.read($)==-1?this.Qq.write($,x):this.Hw.write($,x),!(3&this.to.read(this.Zf.gb))&&this.Om.add(x)}this.Zf.ha(),(x=this.Zf.ha()).na<x.la&&($=this.Zf.ik(),I=this.Su(x,w,this.Zf.gb,!1),0<this.zj.size?(M=this.zj.Fc(),this.zj.If(),this.hb[M]=I):(M=this.hb.length,this.hb.push(I)),x=this.fb.addElement(M,-1),this.Qq.read($)==-1?this.Qq.write($,x):this.Hw.write($,x),!(3&this.to.read(this.Zf.gb))&&this.Om.add(x))}for(d=0,g=this.Om.size;d<g&&0<this.dt;d++)if(x=this.Om.get(d),!(3&this.to.read(this.hb[this.fb.ja(x)].IA))){p=-1,w=this.fb.we(x);var R=x;I=null,M=-1;for(var N=0;w!=-1&&(M=this.fb.ja(w),M=(I=this.hb[M]).IA,!(3&(N=this.to.read(M))));)R=w,w=this.fb.we(w);w==-1?($=1,w=R):(p=(3&N)==1?M:this.JA.read(M),$=I.XF()!=0?0:1,w=this.fb.lb(w));do{if(M=this.fb.ja(w),M=(I=this.hb[M]).IA,!(3&(R=this.to.read(M)))){if($!=I.XF())return this.ke=new h.Md(6,M,-1),!1;if(R=252&R|(N=$==0||I.Wp()?2:1),this.to.write(M,N),N==2&&this.ke.Jj==0&&this.JA.read(M)!=p&&(this.ke=new h.Md(7,M,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&R)==1&&(p=M),R=w,w=this.fb.lb(w),$=$!=0?0:1}while(R!=x)}return this.Om!=null?this.Om.clear(!1):this.Om=new h.ia(0),!0},c.prototype.Su=function(p,d,g,w){if(p.getType()!=322)throw h.i.Qa();return(p=this.sP(p)).Io=d,p.IA=g,p.yq=0,p.nX(w),p},c.prototype.sP=function(p){if(0<this.po.length){var d=this.po[this.po.length-1];--this.po.length,p.copyTo(d.ne)}else(d=new O).ne=h.SC.jg(p);return d},c.prototype.vB=function(p){p.ne.getType()==322&&this.po.push(p)},c.prototype.kU=function(){for(var p=this.X.I(),d=new h.ia(0),g=0;g<p;g++)d.add(g);var w=this;for(d.Vd(0,p,(function(x,M){return w.Ou(x,M)})),g=1;g<p;g++)if(this.Ou(d.get(g-1),d.get(g))==0)return this.ke=new h.Md(3,d.get(g-1),d.get(g)),0;return 2},c.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},c.prototype.oV=function(){return this.eT()},c.prototype.pU=function(){for(var p=this.X.I(),d=new h.ia(0),g=0;g<p;g++)d.add(g);var w=this;d.Vd(0,p,(function(R,N){return w.PO(R,N)}));var x=Array(p);for(h.O.$u(x,!1),x[d.get(0)]=!0,g=1;g<p;g++){var M=d.get(g-1),$=d.get(g);this.Ou(M,$)==0?x[$]=!1:x[$]=!0}d=this.X.Ia(),M=this.X,$=0;var I=1;for(g=0;g<p;g++)x[g]?I=g+1:($<I&&d.Fd(M,$,I),$=g+1);return $<I&&d.Fd(M,$,I),d.Ch(2,this.Bo),d},c.prototype.NV=function(){var p=this.X,d=p.Ga(),g=p.Ga(),w=this.X.Ia(),x=this.X,M=p.hasAttribute(1),$=M?h.ta.wE(this.Qg,p,!0):0,I=new h.ia(0),R=new h.ia(0);for(I.Jb(h.O.truncate(p.I()/2+1)),R.Jb(h.O.truncate(p.I()/2+1));d.$a();)if(g.$a(),!(2>p.Ja(d.gb))){g.EW();for(var N,j,z=!0;d.Ha();){var D=d.ha(),U=g.li();if(d.wb()>g.wb())break;z&&(I.add(d.wb()),R.add(g.ik()),z=!1),j=I.Fc();var V=d.ik();if(1<V-j){var W=new h.h;W.uc(p.Na(j),p.Na(V)),N=W.length()}else N=D.Qb();j=R.Fc(),1<(V=g.wb())-j?((W=new h.h).uc(p.Na(j),p.Na(V)),j=W.length()):j=U.Qb(),N>this.Bo?I.add(d.ik()):M&&(N=p.Uc(1,I.Fc(),0),D=D.gv(1,0),Math.abs(D-N)>$&&I.add(d.ik())),j>this.Bo?R.add(g.wb()):M&&(N=p.Uc(1,R.Fc(),0),D=U.gv(1,0),Math.abs(D-N)>$&&R.add(g.wb()))}if(I.Fc()<R.Fc()?I.size>R.size?I.If():R.If():(I.Fc()!=R.Fc()&&R.If(),R.If()),2<=R.size+I.size){for(z=new h.Sa,U=0,D=I.size;U<D;U++)x.ve(I.get(U),z),U==0?w.nf(z):w.lineTo(z);for(U=R.size-1;0<U;U--)x.ve(R.get(U),z),w.lineTo(z);x.dc(d.gb)?w.Ap():0<R.size&&(x.ve(R.get(0),z),w.lineTo(z))}I?.clear(!1),R?.clear(!1)}return w.Ch(2,this.Bo),w},c.prototype.rV=function(){return this.DX()},c.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?h.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new h.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&h.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&h.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},c.rs=function(p,d,g,w,x){if(w!=null&&(w.Jj=0,w.Jo=-1,w.Ko=-1),p.B())return 1;var M=p.getType();if(M==33)return 1;var $=h.ta.kj(d,p,!1);if(M==197)return d=new h.l,p.A(d),d.Bi($)?(w!=null&&(w.Jj=2,w.Jo=-1,w.Ko=-1),0):1;if(h.aa.yd(M))return($=new h.Ta(p.description)).oc(p,!0),c.rs($,d,g,w,x);var I=p.om($);if((g=g?-1:I)!=-1)return g;if(d=new c(p,d,g,x,!1),M==550)g=d.kU();else if(M==1607)g=d.JV();else{if(M!=1736)throw h.i.Qa();g=d.oV()}return p.Ch(g,$),w!=null&&g==0&&w.Wt(d.ke),g},c.cK=function(p,d,g,w){if(p.B())return p;var x=p.getType();if(x==33)return p;var M=h.ta.kj(d,p,!1);if(x==197)return d=new h.l,p.A(d),d.Bi(M)?p.Ia():p;if(h.aa.yd(x))return(x=new h.Ta(p.description)).oc(p,!0),c.cK(x,d,g,w);if(M=p.om(M),(g=g?-1:M)==2)return p;if(p=new c(p,d,g,w,!1),x==550)p=p.pU();else if(x==1607)p=p.NV();else{if(x!=1736)throw h.i.Qa();p=p.rV()}return p},c.prototype.Mh=function(p,d,g){if(p==d)return 0;p=this.gi.get(p);var w=this.gi.get(d);d=p>>1;var x=w>>1,M=new h.h,$=new h.h;return this.lf.tc(2*d,M),M.y+=1&p?this.Oj:-this.Oj,this.lf.tc(2*x,$),$.y+=1&w?this.Oj:-this.Oj,(p=M.compare($))==0&&g?0>(g=this.Fl.get(d)-this.Fl.get(x))?-1:0<g?1:0:p},c.prototype.Ou=function(p,d){if(p==d)return 0;var g=this.X,w=g.Na(p),x=g.Na(d);if(w.x<x.x)return-1;if(w.x>x.x)return 1;if(w.y<x.y)return-1;if(w.y>x.y)return 1;for(w=1;w<this.oT;w++){x=this.nH.kd(w);for(var M=h.ra.Va(x),$=0;$<M;$++){var I=g.Uc(x,p,$),R=g.Uc(x,d,$);if(I<R)return-1;if(I>R)return 1}}return 0},c.prototype.PO=function(p,d){var g=this.Ou(p,d);return g==0?p<d?-1:1:g},c.prototype.XP=function(p,d){if(p===d)return 0;var g=p.ne.kg();p.Wp()&&g.Sq(),p=d.ne.kg(),d.Wp()&&p.Sq(),d=g.qu();var w=p.qu();return w==d?(d=g.wi(p),Math.abs(d)<=8881784197001252e-31*(Math.abs(p.x*g.y)+Math.abs(p.y*g.x))&&(d--,d++),0>d?1:0<d?-1:0):d<w?-1:1},c})();h.Jx=a})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,r,n,a){return o instanceof h.aa?(o=new h.Zc(o),r=new h.Zc(r),this.V(o,r,n,a).next()):new h.BL(o,r,n,a)},u.ep=function(o,r,n,a){var c=o.Db(),p=r.Db();if(o.B()&&r.B())return c>p?o:r;if(o.B())return r;if(r.B())return o;var d=new h.l,g=new h.l,w=new h.l;return o.A(d),r.A(g),w.K(d),w.Zb(g),d=h.ta.Wd(n,w,!0),g=o.getType(),w=r.getType(),g==33&&w==33?u.aV(o,r,d):g!=w?0<c||0<p?c>p?o:r:g==550?u.iI(o,r,d):u.iI(r,o,d):h.Fg.ep(o,r,n,a)},u.aV=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D(),c=r.D(),p=new h.de(o.description);return h.h.yc(a,c)>n&&(p.add(o),p.add(r)),p},u.iI=function(o,r,n){var a=o.ub(0),c=o.I(),p=r.D(),d=o.Ia();n=n*Math.sqrt(2)*1.00001;var g=new h.l;if(o.A(g),g.W(n,n),g.contains(p)){n*=n,g=!1;for(var w=[],x=0;x<c;x++)w[x]=!1;for(x=0;x<c;x++){var M=a.read(2*x),$=a.read(2*x+1);(M-=p.x)*M+($-=p.y)*$<=n&&(g=!0,w[x]=!0)}if(g)for(x=0;x<c;x++)w[x]||d.Fd(o,x,x+1);else d.Fd(o,0,c),d.add(r)}else d.Fd(o,0,c),d.add(r);return d},u.instance=null,u})(h.Je);h.Kx=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r,n){this.ts=o==null,this.ya=-1,this.Rd=u,this.vg=r,this.NT=o.next(),this.Ub=n}return m.prototype.next=function(){return this.ts?null:(u=this.Rd.next())!=null?(this.ya=this.Rd.La(),h.Kx.ep(u,this.NT,this.vg,this.Ub)):null;var u},m.prototype.La=function(){return this.ya},m.prototype.qe=function(){},m})();h.BL=O})(B||(B={})),(function(h){var O=(function(){function o(){}return o.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},o})(),m=(function(){function o(){this.Gr=0,this.pj=[]}return o.prototype.pN=function(r){this.Gr+=r.Ax,this.pj.push(r)},o.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},o.prototype.my=function(){return this.pj[this.pj.length-1]},o.prototype.Nb=function(r){return r===this},o})(),u=(function(){function o(r,n,a){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=r,this.vg=n,this.Ub=a}return o.dE=function(r){var n=[],a=0;for(r=Object.keys(r);a<r.length;a++)n.push(Number(r[a]));return n.sort((function(c,p){return c-p})),n},o.prototype.fG=function(r){var n=this.Do[r],a=o.dE(n)[0],c=n[a],p=c.my().$y;return c=c.my().AK,delete n[a],c&&(p=h.Yl.local().V(p,this.vg,!1,this.Ub),r==0&&p.getType()==33&&(r=new h.de(p.description),p.B()||r.add(p),p=r)),p},o.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw h.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},o.prototype.La=function(){return this.ya},o.prototype.qK=function(){if(this.Ic)return!0;var r=null;if(this.Rd!=null&&(r=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),h.mp.zp(this.Ub),r!=null){var n=r.Db();this.AH[n]=!0,n>=this.zk&&!this.jA&&(this.ND(n,!1,r),n>this.zk&&!this.jA&&this.zW(n))}if(0<this.iq)for(n=0;n<=this.zk;n++)for(;1<this.uq[n]&&(r=this.FO(n)).length!=0;)r=h.Fg.VP(r,this.vg,this.Ub),this.ND(n,!0,r);return this.Ic},o.prototype.FO=function(r){for(var n=[],a=[],c=this.Do[r],p=o.dE(c),d=0;d<p.length;d++){var g=p[d],w=c[g];if(this.Ic||1e4<w.Gr&&1<w.pj.length){for(this.uq[r]-=w.pj.length,this.iq-=w.pj.length;0<w.pj.length;)n.push(w.my().$y),w.TV();a.push(g)}}for(d=0;d<a.length;d++)delete c[a[d]];return n},o.prototype.zW=function(r){for(var n=0;n<r;n++)this.Do[n]=[],this.iq-=this.uq[n],this.uq[n]=0},o.prototype.ND=function(r,n,a){var c=new O;if(c.Fz(),c.$y=a,a=o.eS(a),c.Ax=a,a=o.cS(a),r+1>this.Do.length)for(var p=0,d=Math.max(2,r+1);p<d;p++)this.Do.push([]);(p=this.Do[r][a])===void 0&&(p=new m,this.Do[r][a]=p),c.AK=n,p.pN(c),this.uq[r]++,this.iq++,this.zk=Math.max(this.zk,r)},o.cS=function(r){return 0<r?h.O.truncate(Math.log(r)/Math.log(4)+.5):0},o.eS=function(r){var n=r.getType();if(h.aa.xj(n))return r.I();if(n==33)return 1;if(n==197)return 4;if(h.aa.yd(n))return 2;throw h.i.Qa()},o.prototype.qe=function(){this.qK()},o})();h.DL=u})(B||(B={})),(function(h){var O=(function(m){function u(){return m!==null&&m.apply(this,arguments)||this}return ce(u,m),u.prototype.getType=function(){return 1},u.prototype.V=function(o,r,n,a){return a===void 0?new h.DL(o,r,n):this.gQ(o,r,n,a)},u.prototype.gQ=function(o,r,n,a){return o=new h.Zc([o,r]),this.V(o,n,a).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u})(h.Je);h.Gh=O})(B||(B={})),(function(h){var O,m;(m=O||(O={}))[m.nextPath=0]="nextPath",m[m.nextSegment=1]="nextSegment",m[m.iterate=2]="iterate",O=(function(){function u(o,r,n,a){this.Ts=new h.l,this.GT=o,this.HT=r,this.mq=a,this.uo=-1,this.rl=!1;var c=o.Bb;c!=null&&(c=a?c.zo:c.Fb)!=null&&(this.Ic=!1,this.qa=n,this.Fb=c,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,a?this.uo=r.da():this.sd=r.Ga()),this.rl||(c=r.Bb)!=null&&(c=a?c.zo:c.Fb)!=null&&(this.Ic=!1,this.qa=n,this.Fb=c,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,a?this.uo=o.da():this.sd=o.Ga()),this.rl||(this.ci=a?h.ta.mR(o,r,n,1<=o.om(0),1<=r.om(0)):h.ta.lR(o,r,n))}return u.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var o=!0;o;)switch(this.Xb){case 0:o=this.xU();break;case 1:o=this.yU();break;case 2:o=this.Uz();break;default:throw h.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},u.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},u.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},u.prototype.uz=function(){if(!this.mq)throw h.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},u.prototype.az=function(){if(!this.mq)throw h.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},u.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},u.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var o=this.sd.ha();return this.xw.Uo(o,this.qa),this.Xb=2,!0},u.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},u})(),h.Zl=O})(B||(B={})),(function(h){(h=h.OL||(h.OL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"})(B||(B={})),(function(h){h.QC=(function(){function O(){}return O.tb=function(m,u,o,r,n,a,c,p,d){var g=[0,0,0],w=[0,0,0],x=[0,0,0],M=[0,0,0,0],$=new h.ga(0),I=new h.ga(0),R=new h.ga(0);if(c!=null||p!=null||d!=null)if(h.s.ti(u))h.Yg.tb(m,o,r,n,a,c,p,d);else{n=h.F.ba(n),o=h.F.ba(o);var N=h.F.ba(n-o);if(h.s.Y(r,a)&&(h.s.Y(o,n)||h.s.Y(h.s.P(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),d!=null&&(d.u=0);else{if(h.s.Y(r,-a)){if(h.s.Y(h.s.P(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(m,u)),p!=null&&(p.u=0<r?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(d!=null&&(d.u=0<r?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(N),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(m,u)),p!=null&&(p.u=0),d!=null&&(d.u=0))}else if(h.s.Y(h.s.P(r),1.570796326794897)||h.s.Y(h.s.P(a),1.570796326794897)||h.s.Y(o,n)||h.s.Y(h.s.P(N),3.141592653589793)||h.s.Cd(r))return void h.Wk.tb(m,u,o,r,n,a,c,p,d);var j=Math.sqrt(1-u);n=h.F.ba(n-o),o=0,h.F.cl(1,u,r,o,0,$,I,R),g[0]=$.u,g[1]=I.u,g[2]=R.u,h.F.cl(1,u,a,n,0,$,I,R),w[0]=$.u,w[1]=I.u,w[2]=R.u,x[0]=0,x[1]=0,x[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),0>n?h.F.Wq(x,w,g,M,0):h.F.Wq(x,g,w,M,0),I=[0,0,0],R=[0,0,0];var z=[0,0,0];g=[0,0,0],$=[0,0,0];var D=Math.acos(M[2]/1),U=1-u,V=Math.tan(D),W=1+V*V/U,Z=2*x[2]*V/U;for(U=(-Z+(V=Math.sqrt(Z*Z-4*W*(x[2]*x[2]/U-1))))/(W*=2),Z=(-Z-V)/W,V=Math.tan(D),D=(U+Z)/2,x=((W=V*U+x[2])+(V*Z+x[2]))/2,V=h.F.gp(U-D,W-x),U=x/j*1.570796326794897,Z=0;100>Z&&(W=(W=h.F.w(u,U))*W/Math.cos(U)*(Math.sin(U)-x*W/(1-u)),!h.s.Cd(W));Z++)U-=W;x=h.F.n(1,u,U)*Math.cos(U),V=1-V/(x=Math.sqrt((x-D)*(x+D))),V*=2-V,W=h.F.on(I),D=h.F.on(R),U=h.F.on(z);var it=h.F.St(z,I);Z=h.F.St(z,R),h.F.zx(z,I,g),h.F.zx(z,R,$),I=Math.acos(it/(U*W)),R=Math.acos(Z/(U*D)),R*=h.s.Mb(1,h.F.St(g,$)),(1.570796326794897<=h.s.P(I)&&1.570796326794897<=h.s.P(R)||3.141592653589793<h.s.P(I-R))&&(I=(3.141592653589793-h.s.P(I))*h.s.Mb(1,I),R=(3.141592653589793-h.s.P(R))*h.s.Mb(1,R)),g=h.F.Qj(V,R),$=h.F.q(x,V,h.F.Qj(V,I)),g=h.F.q(x,V,g),g=h.s.P(g-$)*m,I=new h.ga(0),R=new h.ga(0),z=M[1]/1,z*=-h.s.Mb(1,N),$=Math.acos(z)*h.s.Mb(1,N),O.rf(m,u,o,r,g,$,I,R),h.s.Y(n,I.u)&&h.s.Y(a,R.u)||(V=h.F.gp(h.F.ba(n-I.u),a-R.u),O.rf(m,u,o,r,g,h.F.ba($+3.141592653589793),I,R),(W=h.F.gp(h.F.ba(n-I.u),a-R.u))<V&&($=h.F.ba($+3.141592653589793))),I=[0,0,0,0],R=[0,0,0,0],V=[0,0,0],m=[0,0,0],o=[0,0,0],r=[0,0,0],z=[0,0,0],(x=[0,0,0])[0]=0,x[1]=0,x[2]=j,V[0]=0,V[1]=0,V[2]=0,h.F.Wq(V,x,w,I,0),h.s.Cd(a)?(m[0]=w[0],m[1]=w[1],m[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,a)*Math.cos(a),m[0]=0,m[1]=0,w[2]+=Math.tan(1.570796326794897-h.s.P(a))*u*h.s.Mb(1,a),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=w[2],h.F.Wq(w,o,m,R,1),h.F.zx(R,I,r),h.F.zx(R,M,z),z=h.F.St(r,z)/(h.F.on(r)*h.F.on(z)),z*=h.s.Mb(1,N),n=Math.acos(z)*-h.s.Mb(1,N),(0<$&&0<n||0>$&&0>n)&&(n=h.F.ba(n+3.141592653589793)),c!=null&&(c.u=g),p!=null&&(p.u=$),d!=null&&(d.u=n)}}},O.rf=function(m,u,o,r,n,a,c,p){var d=[0,0,0],g=[0,0,0],w=[0,0,0],x=[0,0,0],M=[0,0,0],$=[0,0,0],I=[0,0,0],R=[0,0,0,0],N=new h.ga(0),j=new h.ga(0),z=new h.ga(0),D=new h.ga(0),U=new h.ga(0),V=new h.ga(0);if(c!=null&&p!=null)if(h.s.ti(u))h.Yg.rf(m,o,r,n,a,c,p);else if(h.s.Cd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ba(a),0>n&&(n=h.s.P(n),a=h.F.ba(a+3.141592653589793)),o=h.F.ba(o),r=h.F.ba(r),1.570796326794897<h.s.P(r)&&(o=h.F.ba(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.Y(h.s.P(r),1.570796326794897)||h.s.Cd(r)||h.s.Cd(a)||h.s.Y(h.s.P(a),3.141592653589793))h.Wk.rf(m,u,o,r,n,a,c,p);else{var W=Math.sqrt(1-u);for(m=n/m,h.F.cl(1,u,r,0,0,D,U,V),d[0]=D.u,d[1]=U.u,d[2]=U.u,I[0]=0,I[1]=0,I[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),D=h.F.n(1,u,r),U=h.F.ba(1.570796326794897-a),V=Math.sin(U),n=Math.cos(r),r=Math.sin(r),M[0]=D*n-r*V,M[1]=Math.cos(U),M[2]=(1-u)*D*r+n*V,0>a?h.F.Wq(I,M,d,R,0):h.F.Wq(I,d,M,R,0),d=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),r=1-u,U=1+(M=Math.tan(d))*M/r,r=(-(D=2*I[2]*M/r)+(M=Math.sqrt(D*D-4*U*(I[2]*I[2]/r-1))))/(U*=2),D=(-D-M)/U,M=Math.tan(d),d=(r+D)/2,I=((U=M*r+I[2])+(M*D+I[2]))/2,M=h.F.gp(r-d,U-I),W=I/W*1.570796326794897,r=0;100>r&&(D=(D=h.F.w(u,W))*D/Math.cos(W)*(Math.sin(W)-I*D/(1-u)),!h.s.Cd(D));r++)W-=D;W=h.F.n(1,u,W)*Math.cos(W),I=1-M/(W=Math.sqrt((W-d)*(W+d))),I*=2-I,$=Math.acos(h.F.St($,g)/(h.F.on($)*h.F.on(g))),$*=h.s.Mb(1,g[0]),a=(h.F.q(W,I,h.F.Qj(I,$))+m*h.s.Mb(1,a))/h.F.Ah(W,I),a=h.F.ba(1.570796326794897*a),a=h.F.Rq(I,a),h.F.n(W,I,a),M=h.F.ba(R+o),o=Math.cos(M),a=Math.sin(M),w[0]=x[0]*o+x[1]*-a,w[1]=x[0]*a+x[1]*o,w[2]=x[2],h.F.jO(u,w[0],w[1],w[2],z,j,N),c!=null&&(c.u=j.u),p!=null&&(p.u=z.u)}},O})()})(B||(B={})),(function(h){var O=(function(){function n(a){this.Ya=null,this.wt=new h.h,this.xt=new h.h,this.g=a}return n.prototype.compare=function(a,c,p){return this.g.Gc(c,this.wt),this.g.Gc(a.ja(p),this.xt),this.wt.compare(this.xt)},n})(),m=(function(){function n(a){this.Bf=new h.h,this.Dk=new h.h,this.g=a}return n.prototype.Dh=function(a){this.Bf.L(a)},n.prototype.compare=function(a,c){return this.g.Gc(a.ja(c),this.Dk),this.Bf.compare(this.Dk)},n})(),u=(function(n){function a(c){var p=n.call(this,c.g,c.qa,!1)||this;return p.ib=c,p}return ce(a,n),a.prototype.compare=function(c,p,d){if(this.rg)return-1;var g=this.ib.Qd.Jn(this.ib.Rh(p));c=c.ja(d);var w=this.ib.Qd.Jn(this.ib.Rh(c));return this.Dm=d,this.RE(p,g,c,w)},a})(h.UC),o=(function(n){function a(c){var p=n.call(this,c.g,c.qa)||this;return p.ib=c,p}return ce(a,n),a.prototype.compare=function(c,p){return this.rg?-1:(c=this.ib.Qd.Jn(this.ib.Rh(c.ja(p))),this.Dm=p,this.SE(p,c))},a})(h.aM),r=(function(){function n(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new h.h,this.Pi=new h.h,this.hb=new h.$c(8),this.zd=new h.$c(5),this.lh=new h.au,this.Qd=new h.au,this.Ng=!1,this.vh=new h.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new h.Yj,this.Mc=new h.Yj,this.nh=new h.ia(0),this.Gk=new h.TC,this.Ff=new h.ia(0),this.Ak=new h.ia(0),this.jo=new h.Sa}return n.prototype.PX=function(a,c){var p=new h.Dd;return p.$B(),a.Oc(p),this.er(a),this.Wn=!1,this.qa=c,this.UA=c*c,c=this.jC(),a.Oc(p),c||(this.qQ(),c||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},n.prototype.TX=function(a,c){this.er(a),this.Wn=!1,this.qa=c,this.UA=c*c,this.Ng=!1,this.jC(),this.Ng||(this.Ng=a.Gp(c,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},n.prototype.pg=function(a,c){return this.hb.T(a,0+c)},n.prototype.LB=function(a,c,p){this.hb.S(a,0+c,p)},n.prototype.Rh=function(a){return this.hb.T(a,2)},n.prototype.ZW=function(a,c){this.hb.S(a,2,c)},n.prototype.RF=function(a,c){return this.hb.T(a,3+c)},n.prototype.Pp=function(a){return this.hb.T(a,7)},n.prototype.Pl=function(a,c){this.hb.S(a,7,c)},n.prototype.Rp=function(a,c){return this.hb.T(a,3+this.Op(a,c))},n.prototype.fr=function(a,c,p){this.hb.S(a,3+this.Op(a,c),p)},n.prototype.NR=function(a,c){return this.hb.T(a,5+this.Op(a,c))},n.prototype.hr=function(a,c,p){this.hb.S(a,5+this.Op(a,c),p)},n.prototype.Sr=function(a){return this.zd.T(a,0)},n.prototype.UW=function(a,c){this.zd.S(a,0,c)},n.prototype.ez=function(a){return this.zd.T(a,4)},n.prototype.cr=function(a,c){this.zd.S(a,4,c)},n.prototype.il=function(a){return this.zd.T(a,1)},n.prototype.ln=function(a,c){this.zd.S(a,1,c)},n.prototype.dz=function(a){return this.zd.T(a,3)},n.prototype.Et=function(a,c){this.zd.S(a,3,c)},n.prototype.Ym=function(a){var c=this.zd.Ce(),p=this.lh.Ph();return this.UW(c,p),a!=-1?(this.lh.addElement(p,a),this.g.Ra(a,this.xh,c),this.cr(c,this.g.Ua(a))):this.cr(c,-1),c},n.prototype.HP=function(a){this.zd.jd(a)},n.prototype.LD=function(a,c){this.lh.addElement(this.Sr(a),c),this.g.Ra(c,this.xh,a)},n.prototype.nt=function(a){var c=this.hb.Ce(),p=this.Qd.Ph();return this.ZW(c,p),a!=-1&&this.Qd.addElement(p,a),c},n.prototype.MD=function(a,c){this.Qd.addElement(this.Rh(a),c)},n.prototype.Uu=function(a){this.hb.jd(a),0<=(a=this.nh.lF(a))&&this.nh.SV(a)},n.prototype.hj=function(a,c){if(this.pg(a,0)==-1)this.LB(a,0,c);else{if(this.pg(a,1)!=-1)throw h.i.Qa();this.LB(a,1,c)}this.ky(a,c)},n.prototype.ky=function(a,c){var p=this.il(c);if(p!=-1){var d=this.Rp(p,c);this.hr(d,c,a),this.fr(a,c,d),this.fr(p,c,a),this.hr(a,c,p)}else this.hr(a,c,a),this.fr(a,c,a),this.ln(c,a)},n.prototype.Op=function(a,c){return this.pg(a,0)==c?0:1},n.prototype.Xm=function(a,c){var p,d=this.dz(c);if(d!=-1&&(this.df.vd(d,-1),this.Et(c,-1)),(d=this.il(c))!=-1){var g=p=d;do{var w=!1,x=this.Op(p,c),M=this.RF(p,x);if(this.pg(p,x+1&1)==a){if(this.Xu(p),this.Qd.bh(this.Rh(p)),this.Uu(p),p==M){d=-1;break}d==p&&(d=this.il(c),g=M,w=!0)}p=M}while(p!=g||w);if(d!=-1){do x=this.Op(p,c),M=this.RF(p,x),this.LB(p,x,a),p=M;while(p!=g);(p=this.il(a))!=-1?(g=this.Rp(p,a),w=this.Rp(d,a),g==p?(this.ln(a,d),this.ky(p,a),this.ln(a,p)):w==d&&this.ky(d,a),this.fr(d,a,g),this.hr(g,a,d),this.fr(p,a,w),this.hr(w,a,p)):this.ln(a,d)}}for(d=this.Sr(a),p=this.Sr(c),g=this.lh.rc(p);g!=-1;g=this.lh.lb(g))this.g.Ra(this.lh.ja(g),this.xh,a);this.lh.Hy(d,p),this.HP(c)},n.prototype.UT=function(a,c){var p=this.pg(a,0),d=this.pg(a,1),g=this.pg(c,0),w=this.pg(c,1);this.Qd.Hy(this.Rh(a),this.Rh(c)),c==this.il(p)&&this.ln(p,a),c==this.il(d)&&this.ln(d,a),this.Xu(c),this.Uu(c),p==g&&d==w||d==g&&p==w||(this.Hn(p,this.yo),this.Hn(g,this.Pi),this.yo.qb(this.Pi)?(p!=g&&this.Xm(p,g),d!=w&&this.Xm(d,w)):(d!=g&&this.Xm(d,g),p!=w&&this.Xm(p,w)))},n.prototype.Xu=function(a){var c=this.pg(a,1);this.dF(a,this.pg(a,0)),this.dF(a,c)},n.prototype.dF=function(a,c){var p=this.Rp(a,c),d=this.NR(a,c),g=this.il(c);p!=a?(this.fr(d,c,p),this.hr(p,c,d),g==a&&this.ln(c,p)):this.ln(c,-1)},n.prototype.WD=function(a,c,p){var d=this.Qd.rc(a),g=this.Qd.ja(d);a=this.Le(g);var w=this.Le(this.g.U(g));for(this.g.jr(g,c,p,!0),d=this.Qd.lb(d);d!=-1;d=this.Qd.lb(d)){g=this.Qd.ja(d);var x=this.Le(g)==a;this.g.jr(g,c,p,x)}d=c.Vp(p,0).ac(),c=c.Vp(p,c.ol(p)-1).wc(),this.BK(a,d),this.BK(w,c)},n.prototype.ZE=function(a,c,p){var d=this.Rh(a),g=this.pg(a,0),w=this.pg(a,1),x=this.nt(-1);for(this.nh.add(x),this.Pl(x,-3),this.Ff.add(x),this.hj(x,g),a=1,c=c.ol(p);a<c;a++)p=this.Ym(-1),this.Ak.add(p),this.Ff.add(p),this.hj(x,p),x=this.nt(-1),this.nh.add(x),this.Pl(x,-3),this.Ff.add(x),this.hj(x,p);for(this.hj(x,w),d=this.Qd.rc(d);d!=-1;d=this.Qd.lb(d))if(w=this.Qd.ja(d),this.Le(w)==g){a=0;do 0<a&&(x=this.Ff.get(a-1),this.LD(x,w),this.ez(x)==-1&&this.cr(x,this.g.Ua(w))),x=this.Ff.get(a),a+=2,this.MD(x,w),w=this.g.U(w);while(a<this.Ff.size)}else{a=this.Ff.size-1;do a<this.Ff.size-2&&(x=this.Ff.get(a+1),this.LD(x,w),0>this.ez(x)&&this.cr(x,this.g.Ua(w))),x=this.Ff.get(a),a-=2,this.MD(x,w),w=this.g.U(w);while(0<=a)}this.Ff.clear(!1)},n.prototype.Le=function(a){return this.g.Pa(a,this.xh)},n.prototype.TI=function(a,c,p){var d=this.pg(c,0),g=new h.h;this.Hn(d,g);var w=new h.h,x=this.pg(c,1);this.Hn(x,w);var M=p.ol(a),$=p.Vp(a,0),I=new h.h;if($.Yp(I),!g.qb(I)){if(!this.Ng){var R=g.compare(this.vh);0>R*(I=I.compare(this.vh))&&(this.Ng=!0)}this.vF(d,this.Ff),this.Ak.add(d)}for(!this.Ng&&1<M&&(R=g.compare(w),$=$.wc(),(g.compare($)!=R||$.compare(w)!=R||0>$.compare(this.vh))&&(this.Ng=!0)),a=($=p.Vp(a,M-1)).wc(),w.qb(a)||(this.Ng||0>(R=w.compare(this.vh))*(I=a.compare(this.vh))&&(this.Ng=!0),this.vF(x,this.Ff),this.Ak.add(x)),this.Ff.add(c),w=0,x=this.Ff.size;w<x;w++)a=this.Ff.get(w),p=this.Pp(a),h.$c.LG(p)&&(this.Mc.vd(p,-1),this.Pl(a,-1)),a!=c&&this.Pp(a)!=-3&&(this.nh.add(a),this.Pl(a,-3));this.Ff.clear(!1)},n.prototype.lO=function(a,c){this.$d.compare(this.Mc,this.Mc.ja(a),c),this.$d.rg&&(this.$d.Kr(),this.oF(a,c))},n.prototype.oF=function(a,c){this.Wn=!0,a=this.Mc.ja(a),c=this.Mc.ja(c);var p=this.Qd.Jn(this.Rh(a)),d=this.Qd.Jn(this.Rh(c)),g=this.g.bc(p);g==null&&(this.ie==null&&(this.ie=new h.yb),this.g.ed(p,this.ie),g=this.ie),(p=this.g.bc(d))==null&&(this.Nm==null&&(this.Nm=new h.yb),this.g.ed(d,this.Nm),p=this.Nm),this.Gk.Oo(g),this.Gk.Oo(p),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(a,c,-1,this.Gk),this.Gk.clear()},n.prototype.GQ=function(a,c){this.Wn=!0,c=this.Mc.ja(c);var p=this.Qd.Jn(this.Rh(c)),d=this.g.bc(p);d==null&&(this.ie==null&&(this.ie=new h.yb),this.g.ed(p,this.ie),d=this.ie),p=this.BF(a),this.Gk.Oo(d),this.g.Vi(p,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(c,-1,a,this.Gk),this.Gk.clear()},n.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var a=this.nh.Fc();this.nh.If(),this.Pl(a,-1),this.WS(a)!=-1&&this.wS(a),this.Vn=!1}},n.prototype.wS=function(a){if(this.Vn){var c=this.Mc.zu(this.MH,this.GH,a,!0);this.Vn=!1}else c=this.Mc.KD(a);c==-1?this.UT(this.Mc.ja(this.Mc.FF()),a):(this.Pl(a,c),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,c)))},n.prototype.WS=function(a){var c=this.pg(a,0);if(a=this.pg(a,1),this.Hn(c,this.yo),this.Hn(a,this.Pi),h.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var p=this.yo.compare(this.vh),d=this.Pi.compare(this.vh);return 0>=p&&0<d?a:0>=d&&0<p?c:-1},n.prototype.oQ=function(){var a=new h.ia(0);a.Jb(this.g.fd);for(var c=this.g.Yq(),p=c.next();p!=-1;p=c.next())this.g.Pa(p,this.xh)!=-1&&a.add(p);this.g.nx(a,a.size),this.pQ(a)},n.prototype.pQ=function(a){this.df.clear(),this.df.De(a.size),this.df.Vo(new O(this.g));var c=new h.h;c.Rc();for(var p=-1,d=new h.h,g=0,w=a.size;g<w;g++){var x=a.get(g);this.g.Gc(x,d),d.qb(c)?(x=this.g.Pa(x,this.xh),this.Xm(p,x)):(p=this.Le(x),this.g.Gc(x,c),x=this.df.xn(x),this.Et(p,x))}},n.prototype.qQ=function(){var a=new h.ia(0);a.Jb(this.g.fd);for(var c=this.df.rc(-1);c!=-1;c=this.df.lb(c))a.add(this.df.ja(c));this.df.clear(),this.g.nx(a,a.size),c=0;for(var p=a.size;c<p;c++){var d=a.get(c),g=this.Le(d);d=this.df.xn(d),this.Et(g,d)}},n.prototype.vF=function(a,c){var p=this.il(a);if(p!=-1){var d=p;do h.$c.LG(this.Pp(d))&&c.add(d),d=this.Rp(d,a);while(d!=p)}},n.prototype.BK=function(a,c){for(a=this.lh.rc(this.Sr(a));a!=-1;a=this.lh.lb(a))this.g.mf(this.lh.ja(a),c)},n.prototype.hK=function(a,c,p,d){this.Xu(a),c!=-1&&this.Xu(c),this.TI(0,a,d),c!=-1&&this.TI(1,c,d),p!=-1&&(d.Bf.D(this.yo),this.Hn(p,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(p)),p=0;for(var g=this.Ak.size;p<g;p++){var w=this.Ak.get(p),x=this.dz(w);x!=-1&&(this.df.vd(x,-1),this.Et(w,-1))}for(p=this.Rh(a),g=c!=-1?this.Rh(c):-1,this.WD(p,d,0),c!=-1&&this.WD(g,d,1),this.ZE(a,d,0),c!=-1&&this.ZE(c,d,1),this.Qd.bh(p),this.Uu(a),c!=-1&&(this.Qd.bh(g),this.Uu(c)),p=0,g=this.Ak.size;p<g;p++)(w=this.Ak.get(p))==this.Jq&&(this.Xv=!0),(x=this.dz(w))==-1&&((x=this.df.KD(this.BF(w)))==-1?(a=this.Le(this.df.ja(this.df.FF())),this.Xm(a,w)):this.Et(w,x));this.Ak.clear(!1)},n.prototype.Hn=function(a,c){this.g.dG(this.ez(a),c)},n.prototype.BF=function(a){return this.lh.Jn(this.Sr(a))},n.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new u(this),this.Mc.Zn=this.$d);var a=new h.ia(0),c=null,p=null;this.GH=this.MH=-1,this.Vn=!1;for(var d=this.df.rc(-1);d!=-1;){this.Vn=!1;var g=this.df.ja(d);this.Jq=this.Le(g),this.g.Gc(g,this.vh),this.$d.$J(this.vh.y,this.vh.x);var w=this.il(this.Jq),x=w==-1;if(!x){g=w;do{var M=this.Pp(g);M==-1?(this.nh.add(g),this.Pl(g,-3)):M!=-3&&a.add(M),g=this.Rp(g,this.Jq)}while(g!=w)}if(0<a.size){for(this.Vn=a.size==1&&this.nh.size==1,x=0,w=a.size;x<w;x++)g=this.Mc.ja(a.get(x)),this.Pl(g,-2);var $=-2,I=-2;for(x=0,w=a.size;x<w;x++){if(M=a.get(x),$==-2){var R=this.Mc.we(M);R!=-1?(g=this.Mc.ja(R),(g=this.Pp(g))!=-2&&($=R)):$=-1}if(I==-2&&((M=this.Mc.lb(M))!=-1?(g=this.Mc.ja(M),(g=this.Pp(g))!=-2&&(I=M)):I=-1),$!=-2&&I!=-2)break}for(x=0,w=a.size;x<w;x++)M=a.get(x),g=this.Mc.ja(M),this.Mc.vd(M,-1),this.Pl(g,-1);a.clear(!1),this.MH=$!=-1?$:-1,this.GH=I!=-1?I:-1,$!=-1&&I!=-1?this.Vn||this.lO($,I):$==-1&&I==-1&&(this.Vn=!1)}else x&&(c==null&&(c=new o(this)),c.Dh(this.vh),this.Mc.uJ(c),c.rg&&(c.Kr(),this.GQ(this.Jq,c.Dm)));this.xS(),this.Xv?(this.Xv=!1,p==null&&(p=new m(this.g)),p.Dh(this.vh),d=this.df.uJ(p)):d=this.df.lb(d)}return this.Wn},n.prototype.er=function(a){for(this.g=a,this.xh=this.g.Gd(),this.hb.De(a.fd+32),this.zd.De(a.fd),this.lh.At(a.fd),this.lh.fn(a.fd),this.Qd.At(a.fd+32),this.Qd.fn(a.fd+32),a=this.g.ld;a!=-1;a=this.g.ue(a))if(h.aa.Hc(this.g.ic(a)))for(M=this.g.Ob(a);M!=-1;M=this.g.Rb(M)){var c=this.g.Ja(M),p=this.g.Xa(M),d=this.Ym(p),g=this.nt(p);for(this.hj(g,d),$=this.g.U(p),p=0,c-=2;p<c;p++){var w=this.g.U($),x=this.Ym($);this.hj(g,x),g=this.nt($),this.hj(g,x),$=w}this.g.dc(M)?(x=this.Ym($),this.hj(g,x),g=this.nt($),this.hj(g,x),this.hj(g,d)):(x=this.Ym($),this.hj(g,x))}else for(var M=this.g.Ob(a);M!=-1;M=this.g.Rb(M)){var $=this.g.Xa(M);for(d=0,c=this.g.Ja(M);d<c;d++)this.Ym($),$=this.g.U($)}this.oQ()},n})();h.RC=r})(B||(B={})),(function(h){var O=(function(m){function u(o,r,n){var a=m.call(this)||this;if(o!==void 0)if(n!==void 0){a.description=h.ee.og();var c=new h.Nd;c.K(o,r,n),a.dC(c)}else if(r!==void 0)a.description=h.ee.og(),a.Cb(o,r);else if(o instanceof h.ra)a.description=o;else if(o instanceof h.h)a.description=h.ee.og(),a.Cb(o);else{if(!(o instanceof u))throw h.i.N();a.description=o.description,a.Cb(o.Lg(),o.ih()),o.ka!==null&&(a.ka=o.ka.slice(0))}else a.description=h.ee.og();return a}return ce(u,m),u.prototype.D=function(o){if(o===void 0){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return(o=new h.h).ma(this.ka[0],this.ka[1]),o}if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");o.ma(this.ka[0],this.ka[1])},u.prototype.Cb=function(o,r){typeof o=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=o,this.ka[1]=r):(this.vc(),this.Cb(o.x,o.y))},u.prototype.Cz=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");var o=new h.Nd;return o.x=this.ka[0],o.y=this.ka[1],o.z=this.description.iG()?this.ka[2]:h.ra.se(1),o},u.prototype.dC=function(o){this.vc();var r=this.hasAttribute(1);r||h.ra.DG(1,o.z)||(this.re(1),r=!0),this.ka==null&&this.un(),this.ka[0]=o.x,this.ka[1]=o.y,r&&(this.ka[2]=o.z)},u.prototype.Lg=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},u.prototype.cC=function(o){this.setAttribute(0,0,o)},u.prototype.ih=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},u.prototype.aK=function(o){this.setAttribute(0,1,o)},u.prototype.bS=function(){return this.Uc(1,0)},u.prototype.wX=function(o){this.setAttribute(1,0,o)},u.prototype.zR=function(){return this.Uc(2,0)},u.prototype.hX=function(o){this.setAttribute(2,0,o)},u.prototype.Ec=function(){return this.yF(3,0)},u.prototype.LJ=function(o){this.setAttribute(3,0,o)},u.prototype.Uc=function(o,r){var n=this.description.Pf(o);return 0<=n?this.ka[this.description.$j(n)+r]:h.ra.se(o)},u.prototype.yF=function(o,r){var n=this.description.Pf(o);return 0<=n?this.ka[this.description.$j(n)+r]:h.ra.se(o)},u.prototype.setAttribute=function(o,r,n){this.vc();var a=this.description.Pf(o);0>a&&(this.re(o),a=this.description.Pf(o)),this.ka==null&&this.un(),this.ka[this.description.$j(a)+r]=n},u.prototype.getType=function(){return 33},u.prototype.Db=function(){return 0},u.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},u.prototype.sn=function(o){if(this.ka!=null){for(var r=h.ee.Iw(o,this.description),n=[],a=0,c=0,p=o.Aa;c<p;c++){var d=o.kd(c),g=h.ra.Va(d);if(r[c]==-1){var w=h.ra.se(d);for(d=0;d<g;d++)n[a]=w,a++}else for(w=this.description.$j(r[c]),d=0;d<g;d++)n[a]=this.ka[w],a++,w++}this.ka=n}this.description=o},u.prototype.un=function(){this.lJ(this.description.Ae.length),u.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},u.prototype.Oc=function(o){if(o instanceof h.Dd){if(!this.Ac()){var r=this.D();o.Eh(r,r),this.Cb(r)}}else this.Ac()||(this.re(1),r=this.Cz(),this.dC(o.fp(r)))},u.prototype.copyTo=function(o){if(o.getType()!=33)throw h.i.N();o.vc(),this.ka==null?(o.Oa(),o.ka=null,o.Nf(this.description)):(o.Nf(this.description),o.lJ(this.description.Ae.length),u.cE(this.ka,o.ka,this.description.Ae.length))},u.prototype.Ia=function(){return new u(this.description)},u.prototype.B=function(){return this.Ac()},u.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},u.prototype.bn=function(o){o.Oa(),this.description!=o.description&&o.Nf(this.description),o.Zb(this)},u.prototype.A=function(o){this.Ac()?o.Oa():(o.v=this.ka[0],o.G=this.ka[1],o.C=this.ka[0],o.H=this.ka[1])},u.prototype.Qo=function(o){if(this.Ac())o.Oa();else{var r=this.Cz();o.v=r.x,o.G=r.y,o.Ye=r.z,o.C=r.x,o.H=r.y,o.Bg=r.z}},u.prototype.Tg=function(o,r){var n=new h.Nc;return this.Ac()?(n.Oa(),n):(o=this.Uc(o,r),n.oa=o,n.va=o,n)},u.prototype.lJ=function(o){if(this.ka==null)this.ka=h.O.lg(o);else if(this.ka.length<o){for(var r=this.ka.slice(0),n=this.ka.length;n<o;n++)r[n]=0;this.ka=r}},u.cE=function(o,r,n){if(0<n)for(n=0;n<o.length;n++)r[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Ac())return!!o.Ac();for(var r=0,n=this.description.Ae.length;r<n;r++)if(this.ka[r]!=o.ka[r])return!1;return!0},u.prototype.cc=function(){var o=this.description.cc();if(!this.Ac())for(var r=0,n=this.description.Ae.length;r<n;r++){var a=this.ka[r];a=h.O.truncate(a^a>>>32),o=h.O.Th(a,o)}return o},u.prototype.mg=function(){return null},u})(h.aa);h.Sa=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r){u!==void 0&&(this.x=u,this.y=o,this.z=r)}return m.construct=function(u,o,r){var n=new m;return n.x=u,n.y=o,n.z=r,n},m.prototype.K=function(u,o,r){this.x=u,this.y=o,this.z=r},m.prototype.lx=function(){this.z=this.y=this.x=0},m.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},m.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},m.prototype.sub=function(u){return new m(this.x-u.x,this.y-u.y,this.z-u.z)},m.prototype.Ag=function(u){new m(this.x*u,this.y*u,this.z*u)},m.prototype.Qh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},m})();h.Nd=O})(B||(B={})),(function(h){var O=(function(){function m(u,o,r){this.Gw=this.DA=null,this.Xf=o,this.FT=o.y-r,this.ET=o.y+r,this.Ew=0,this.dA=u,this.qa=r,this.RT=r*r,this.eA=r!=0,this.Lv=!1}return m.prototype.result=function(){return this.Ew!=0?1:0},m.prototype.ZM=function(u){return u=u.hc(u.fe(this.Xf,!1)),h.h.yc(u,this.Xf)<=this.RT},m.prototype.fF=function(u){if(!this.eA&&(this.dA&&this.Xf.qb(u.ac())||this.Xf.qb(u.wc())))this.Lv=!0;else if(u.na==this.Xf.y&&u.na==u.la){if(this.dA&&!this.eA){var o=Math.max(u.sa,u.pa);this.Xf.x>Math.min(u.sa,u.pa)&&this.Xf.x<o&&(this.Lv=!0)}}else{var r=!1;if(o=Math.max(u.sa,u.pa),this.Xf.x>o?r=!0:this.Xf.x>=Math.min(u.sa,u.pa)&&(r=0<u.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),r){if(this.Xf.y==u.ac().y){if(this.Xf.y<u.wc().y)return}else if(this.Xf.y==u.wc().y&&this.Xf.y<u.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(u.ac().y>u.wc().y?1:-1)}}},m.prototype.SI=function(u){var o=u.Tg(0,1);if(o.oa>this.ET||o.va<this.FT)return!1;if(this.eA&&this.ZM(u))return!0;if(o.oa>this.Xf.y||o.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(o=u.eG()))for(u=0;u<o;u++){var r=this.DA[u].get();if(this.fF(r),this.Lv)return!0}else if(this.fF(u),this.Lv)return!0;return!1},m.PM=function(u,o,r){for(o=new m(u.In()==0,o,r),u=u.Ga();u.$a();)for(;u.Ha();)if(r=u.ha(),o.SI(r))return-1;return o.result()},m.QM=function(u,o,r,n){var a=new h.l;u.xc(a),a.W(n,n);var c=new m(u.In()==0,r,n);u=u.Ga();var p=new h.l;for(p.K(a),p.C=r.x+n,p.G=r.y-n,p.H=r.y+n,n=(r=o.MF(p,n)).next();n!=-1;n=r.next())if(u.Vb(o.ja(n)),u.Ha()&&(n=u.ha(),c.SI(n)))return-1;return c.result()},m.wm=function(u,o,r){if(u.B())return 0;var n=new h.l;if(u.xc(n),n.W(r,r),!n.contains(o))return 0;if((n=u.Bb)!=null){var a=n.Fk;if(a!=null){if((a=a.So(o.x,o.y))==1)return 1;if(a==0)return 0}if((n=n.Fb)!=null)return m.QM(u,n,o,r)}return m.PM(u,o,r)},m.bT=function(u,o,r){return o.B()?0:m.wm(u,o.D(),r)},m.Ml=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},m})();h.Dg=O})(B||(B={})),(function(h){var O=(function(m){function u(o){return m.call(this,!0,o)||this}return ce(u,m),u.prototype.Ia=function(){return new u(this.description)},u.prototype.Db=function(){return 2},u.prototype.getType=function(){return 1736},u.prototype.xG=function(o,r,n){this.JS(o,r,n)},u.prototype.qR=function(){this.FR()},u})(h.Vk);h.Da=O})(B||(B={})),(function(h){(function(O){O[O.PiPOutside=0]="PiPOutside",O[O.PiPInside=1]="PiPInside",O[O.PiPBoundary=2]="PiPBoundary"})(h.RL||(h.RL={})),h.hd=(function(){function O(){}return O.KG=function(m,u,o){return(m=h.Dg.bT(m,u,o))==0?0:m==1?1:2},O.Yd=function(m,u,o){return(m=h.Dg.wm(m,u,o))==0?0:m==1?1:2},O.WX=function(m,u,o,r,n){if(u.length<o||n.length<o)throw h.i.N();for(var a=0;a<o;a++)n[a]=O.Yd(m,u[a],r)},O.sK=function(m,u,o,r,n){if(m.getType()==1736)O.WX(m,u,o,r,n);else{if(m.getType()!=197)throw h.i.fa("invalid_call");var a=new h.l;m.A(a),O.$M(a,u,o,r,n)}},O.$M=function(m,u,o,r,n){if(u.length<o||n.length<o)throw h.i.N();if(m.B())for(r=0;r<o;r++)n[r]=0;else for(m.W(.5*-r,.5*-r),m.W(.5*r,.5*r),r=0;r<o;r++)m.contains(u[r])?n[r]=1:m.contains(u[r])?n[r]=2:n[r]=0},O.YX=function(m,u,o,r,n){for(var a=0;a<o;a++)n[a]=m.qs(u[a],r)?2:0},O.XX=function(m,u,o,r,n){var a=m.Bb,c=null;a!=null&&(c=a.Fk),a=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var d=u[p];c.So(d.x,d.y)==0&&(n[p]=0,a--)}if(a!=0)for(m=m.Ga();m.$a()&&a!=0;)for(;m.Ha()&&a!=0;)for(c=m.ha(),p=0;p<o&&a!=0;p++)n[p]==1&&c.qs(u[p],r)&&(n[p]=2,a--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},O.tK=function(m,u,o,r,n){var a=m.getType();if(a==1607)O.XX(m,u,o,r,n);else{if(!h.aa.yd(a))throw h.i.fa("Invalid call.");O.YX(m,u,o,r,n)}},O})()})(B||(B={})),(function(h){var O=(function(m){function u(o,r){if(arguments.length==2){var n=m.call(this,!1,o.description)||this;n.nf(o),n.lineTo(r)}else n=m.call(this,!1,o)||this;return n}return ce(u,m),u.prototype.Ia=function(){return new u(this.description)},u.prototype.Db=function(){return 1},u.prototype.getType=function(){return 1607},u.prototype.xG=function(o,r,n){this.KS(o,r,n)},u})(h.Vk);h.Ta=O})(B||(B={})),(function(h){var O=(function(){function m(){}return m.prototype.progress=function(){return!0},m.zp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.WC()},m})();h.mp=O})(B||(B={})),(function(h){var O;(O=h.PK||(h.PK={}))[O.clipWithInputHorizon=1]="clipWithInputHorizon",O[O.clipWithOutputHorizon=2]="clipWithOutputHorizon";var m=(function(){function r(){this.Kg=3,this.Vu=this.Jr=NaN}return r.prototype.PW=function(n){this.QB(1,n)},r.prototype.QW=function(n){this.QB(2,n)},r.prototype.hS=function(){return this.hs(1)},r.prototype.iS=function(){return this.hs(2)},r.prototype.QB=function(n,a){this.Kg=a?this.Kg|n:this.Kg&~n},r.prototype.hs=function(n){return(this.Kg&n)!=0},r.prototype.Of=function(){var n=new r;return n.Jr=this.Jr,n.Vu=this.Vu,n.Kg=this.Kg,n},r})();h.yC=m,(function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"})(h.QK||(h.QK={}));var u=(function(){function r(){this.Kg=0}return r.prototype.QB=function(n,a){this.Kg=a?this.Kg|n:this.Kg&~n},r.prototype.hs=function(n){return(this.Kg&n)!=0},r.jg=function(n){var a=new r;return a.Kg=n.Kg,a},r.prototype.mM=function(n){this.Kg=n.Kg},r})();h.AY=u;var o=(function(){function r(n,a,c){this.ef=n,this.Yf=a,this.Uf=new h.l,this.Uf.K(c),this.AT=n.cc()+a.cc()+this.Uf.cc().toString()}return r.prototype.cc=function(){return this.AT},r.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.Yf.Nb(n.Yf)&&this.Uf.Nb(n.Uf)},r})();h.FY=o,o=(function(){function r(){this.Yf=this.ef=null,this.rH=new m,this.sH=new u,this.ww=this.Wf=null,this.mw=this.Tn=!0}return r.Nr=function(n,a,c,p){var d;p===void 0&&(p=null),d===void 0&&(d=null);var g=new r;return g.qp(n,a,c,p,d),g},r.prototype.qp=function(n,a,c,p,d){if(n==null||a==null)throw h.i.fa("invalidArgument");if(this.ef=n,this.Yf=a,this.mw=this.Tn=!1,p!=null&&(this.rH=p.Of()),d!=null&&this.sH.mM(d),d=!1,a.Sb()==1&&p!=null&&(p=p.Jr,isNaN(p)||p==0||(d=!0)),n==a)this.Tn=!d,this.mw=!0;else{p=n.Sb();var g=a.Sb();if(p==0||g==0){if(c!=null)throw h.i.N();n.Hd()!=null&&a.Hd()!=null&&(this.Tn=n.Hd().Nb(a.Hd()))}else p==3||g==3?this.Tn=n.Nb(a):this.ef.kS(this.Yf)?this.Tn=!d:this.Tn=!1,this.Wf=c,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},r.prototype.isIdentity=function(){return this.Tn},r.prototype.nR=function(){return this.rH.Of()},r.prototype.Nb=function(n){return n==this||!!(n instanceof r&&this.ef.Nb(n.ef)&&this.Yf.Nb(n.Yf))&&(this.Wf==n.Wf||!(this.Wf==null||n.Wf==null||!this.Wf.Nb(n.Wf)))},r.prototype.oY=function(){this.ww=new h.bu(this)},r})(),h.vr=o})(B||(B={})),(function(h){var O=(function(){function m(){}return m.Cp=function(u){return u*m.oW},m.mx=function(u,o){return m.gP(o-u)},m.hP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.lc.RK(u))&&(u+=360),u)},m.gP=function(u){return 180<(u=m.hP(u))&&(u-=360),u},m.oW=57.29577951308232,m})();h.qr=O,h.Hh=(function(){function m(){}return m.lj=function(u,o){var r=new h.l;u.A(r);var n=h.cb.gh(o),a=new h.l;return a.K(n),a.v=r.v,a.C=r.C,a.W(.01*a.ca(),0),o=h.ta.Wd(o,r,!1),a.contains(r)?u:h.Ud.clip(u,a,o,0)},m.ks=function(u,o,r,n,a){if(!h.cb.Wc(o))throw h.i.N();var c=h.ta.kj(o,u,!1),p=h.cb.gh(o),d=h.cb.sc(o),g=d.Hd().ai,w=h.cb.vv(d);d=h.cb.ev(d),w*=2-w;var x=new h.Nc;p.cn(x);var M=[[0,0],[0,0]];if(h.Eg.Sb(o)==2?n?(M[0][0]=m.Zm(a,x),M[0][1]=p.Jp(),h.cb.vt(),p=M[0][0]*g):(M[0][0]=p.gk(),M[0][1]=a,h.cb.vt(),p=M[0][1]*g):p=a*g,!n&&p!=0)throw h.i.N();var $=new h.ga,I=new h.gd;u=I.Ib(u);for(var R=[0],N=new h.h,j=new h.h,z=new h.h,D=new h.h,U=new h.h,V=new h.h,W=I.Ob(u);W!=-1;W=I.Rb(W)){var Z=I.Xa(W);I.D(Z,z);for(var it=!1,ot=Z=I.U(Z);ot!=-1;ot=I.U(ot)){if(ot==Z){if(it)break;it=!0}if(I.D(ot,D),n&&c<a-z.x&&D.x-a>c||c<a-D.x&&z.x-a>c||!n&&c<-z.y&&D.y>c||c<-D.y&&z.y>c)do if(!(Math.abs(z.x-D.x)>=.5*x.R())){if(h.Eg.Sb(o)==2?(M[0][0]=m.Zm(z.x,x),M[0][1]=z.y,M[1][0]=m.Zm(D.x,x),M[1][1]=D.y,h.cb.dW(),U.x=M[0][0]*g,U.y=M[0][1]*g,V.x=M[1][0]*g,V.y=M[1][1]*g):(U.x=z.x*g,U.y=z.y*g,V.x=D.x*g,V.y=D.y*g),V.x=6.283185307179586*(D.x-z.x)/x.R()+U.x,n){if(j.x=p,j.y=m.Nz(d,w,U,V,p,r),isNaN(j.y))break}else{if(j.x=m.Lz(d,w,U,V,r),isNaN(j.x))break;j.y=0}h.kb.wd(d,w,U.x,U.y,V.x,V.y,$,null,null,r);var dt=$.u;h.kb.wd(d,w,U.x,U.y,j.x,j.y,$,null,null,r);var ft=$.u;h.Eg.Sb(o)==2?(M[0][0]=j.x/g,M[0][1]=j.y/g,h.cb.bR(),n?(N.y=M[0][1],N.x=a):(N.x=m.os(M[0][0],z.x,D.x,x),N.y=a)):n?(N.x=a,N.y=j.y/g):(N.x=m.os(j.x/g,z.x,D.x,x),N.y=a),R[0]=0<dt?h.O.Rk(ft/dt,0,1):.5,R[0]!=0&&R[0]!=1&&(dt=I.Ma(ot),I.Ul(dt,R,1),I.Cb(I.U(dt),N.x,N.y))}while(!1);z.L(D)}}return I.Ne(u)},m.Fn=function(u,o,r,n,a){if(u.B())return u;var c=h.cb.bf(o);return m.Hp(u,r-180*c,360*c,o,n,a,!0)},m.Nz=function(u,o,r,n,a,c){if(3.141592653589793<=Math.abs(r.x-n.x)||!m.Sn(r.x,n.x,a))return NaN;if(r.x>n.x)var p=n;else p=r,r=n;n=new h.ga(0);var d=new h.ga(0),g=new h.ga(0);h.kb.wd(u,o,p.x,p.y,r.x,r.y,d,n,null,c);var w=d.u,x=0,M=1,$=new h.h;for($.L(p);w*(M-x)>1e-12*u;){var I=.5*(x+M);if(h.kb.oj(u,o,p.x,p.y,w*I,n.u,d,g,c),$.x=d.u,$.y=g.u,$.x==a)break;if(m.Sn(p.x,$.x,a))M=I;else{if(!m.Sn(r.x,$.x,a))return NaN;x=I}}return $.y},m.Sn=function(u,o,r){return u=O.Cp(u),o=O.mx(u,O.Cp(o)),(r=O.mx(u,O.Cp(r)))==0||0<o&&0<r&&r<=o||0>o&&0>r&&r>=o},m.Zm=function(u,o){var r=o.va-o.oa;return o.It(u-Math.floor((u-o.oa)/r)*r)},m.os=function(u,o,r,n){var a=new h.Nc;for(a.K(o,r),r=n.R(),u=Math.floor((u-o)/r)*r+u,a=a.sf();Math.abs(u-a)>Math.abs(u+r-a);)u+=r;return u},m.Lz=function(u,o,r,n,a){if(r.y>n.y)var c=n;else c=r,r=n;if((n=new h.Nc).K(c.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-r.x))return NaN;if(c.x==r.x)return c.x;var p=new h.ga(0),d=new h.ga(0),g=new h.ga(0);h.kb.wd(u,o,c.x,c.y,r.x,r.y,d,p,null,a);var w=d.u,x=0,M=1,$=new h.h;for($.L(c);w*(M-x)>1e-12*u;){var I=.5*(x+M);if(h.kb.oj(u,o,c.x,c.y,w*I,p.u,d,g,a),$.x=d.u,$.y=g.u,n.K(c.y,$.y),$.y==0)break;if(n.contains(0))M=I;else{if(n.K(r.y,$.y),!n.contains(0))return NaN;x=I}}return $.x},m.Hp=function(u,o,r,n,a,c,p){var d=new h.l;if(u.A(d),d.B())return u;var g=new h.Nc;d.cn(g);var w=new h.Nc;if(w.K(o,o+r),w.contains(g)&&w.va!=g.va)return u;var x=new h.l;x.K(d);var M=u.getType();if(M==33)return((d=(x=a?u:u.Of()).Lg())<w.oa||d>=w.va||p&&d==w.va)&&(d+=Math.ceil((w.oa-d)/r)*r,d=w.It(d),x.cC(d)),x;if(M==550){for(n=(x=a?u:u.Of()).ub(0),M=2*x.I(),u=!1,a=0;a<M;a+=2)((d=n.read(a))<w.oa||d>=w.va||p&&d==w.va)&&(u=!0,d+=Math.ceil((w.oa-d)/r)*r,d=w.It(d),n.write(a,d));return u&&x.Pc(1993),x}if(w.contains(g))return u;if(M==197)return r=a?u:u.Of(),d.Ea(x),r.Xo(d),r;var $=.1*Math.max(d.ca(),d.R());for(x.W(0,$),p=u,w=n.Xd(0),u=h.Gh.local(),a=new h.Dd;;){var I=Math.floor((g.oa-o)/r),R=Math.ceil((g.va-o)/r);if(!(3<R-I))break;I=Math.floor(.5*(R+I)),x.v=d.v-$,x.C=o+r*I;var N=h.Ud.clip(p,x,w,c);x.v=x.C,x.C=d.C+$;var j=h.Ud.clip(p,x,w,c);a.gg((I-R)*r,0),j.Oc(a),M==1736?p=u.V(N,j,n,null):(p=N).add(j,!1),p.A(d),d.cn(g)}for(x.v=o,x.C=o+r,(o=new h.l).K(x),o.W(w,0),(o=Math.floor((d.v-x.v)/r)*r)!=0?(x.move(o,0),a.gg(-o,0)):a.RB(),o=M==1607?new h.Ta(p.description):new h.Da(p.description),c=new h.l,g=new h.l;d.C>x.v;)($=h.Ud.clip(p,x,w,0)).A(g),(M==1607?!$.B()&&(g.R()>w||g.ca()>w):!$.B()&&(M!=1736||g.R()>w))&&($.Oc(a),$.A(g),o.A(c),c.W(w,w),c.isIntersecting(g)&&M==1736?o=u.V(o,$,n,null):o.add($,!1)),x.move(r,0),a.shift(-r,0);return o},m.WI=function(u,o,r,n){var a=new h.de(r.description);a.Fd(r,0,-1),a=h.cb.zh(a,u,o);var c=r.I();if(n.Oa(),!h.cb.Wc(u)||c!=a.I())return!1;var p=new h.l;r.A(p);var d=new h.l;if(a.A(d),p=p.R(),d=d.R(),p!=0&&d!=0){if(d/=p,u=h.cb.gh(o).R()/h.cb.gh(u).R(),1e-10<Math.abs(d/u-1))return!1}else if(p!=0||d!=0)return!1;for(n.add(r,!1),r=0;r<c;r++)u=a.Na(r),n.Cb(r,u);return!0},m.Oz=function(){throw h.i.Ie()},m})()})(B||(B={})),(function(h){var O,m,u;(m=O=h.si||(h.si={}))[m.Clip=0]="Clip",m[m.DontClip=1]="DontClip",m[m.PannableFold=2]="PannableFold",(function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"})(u=h.WK||(h.WK={})),h.zb=(function(){function o(){}return o.xv=function(r,n,a){if(a||0<n){for(r=r.toString(h.Sc.PE_STR_NAME_CANON|h.Sc.PE_STR_AUTH_NONE),n=[],a=0;a<r.length;a++)n[a]="a"<=r[a]&&"z">=r[a]?n[a]=r[a].toUpperCase():r[a];return n.join()}return r.toString(h.Sc.PE_STR_AUTH_TOP)},o.ur=function(r,n,a,c){var p=c.length,d=a.I();if(d!=0){var g=a.ub(0),w=Math.min(d,p),x=0,M=r.eh();isNaN(n)&&(n=0);for(var $=r.Wc(),I=179*(r=$?r.sc().Oe().R():0)/360;0<d;){if(g.uB(x<<1,w,c),h.ej.projToGeogCenter(M,w,c,n),$)for(var R=0;R<w;R++){var N=c[R][0]-n,j=h.lc.sign(N),z=g.read(2*(x+R));0>j*h.lc.sign(z)&&Math.abs(N)>I&&(c[R][0]+=-j*r)}g.uC(x<<1,w,c),x+=w,d-=w,w=Math.min(d,p)}a.Pc(1993)}},o.IL=function(r,n,a,c){var p=0,d=r.eh();isNaN(p)&&(p=0);var g=r.Wc(),w=r.bf();r=360*w,w*=179;for(var x=c.length,M=0;M<a;){for(var $=M;$<a&&n[$].isNaN();++$)M++;var I=Math.min(x,a-M);if(0<I){$=1;for(var R=M+1;$<I;++$,++R)if(n[R].isNaN()){I=$;break}if(h.ta.Jy(c,n,M,I),h.ej.projToGeogCenter(d,I,c,p),g)for($=0,R=M;$<I;++$,++R){var N=n[R].x,j=c[$][0]-p,z=h.lc.sign(j);0>z*h.lc.sign(N)&&Math.abs(j)>w&&(c[$][0]-=z*r)}h.ta.Iy(n,M,c,I),M+=I}}},o.Lx=function(r,n,a){var c=a.length,p=n.I();if(!(1>p)){var d=n.ub(0),g=Math.min(p,c),w=0,x=r.eh(),M=r.Wc(),$=M?r.Oe().R():0,I=179*$/360,R=0;for(M&&(R=r.zi());0<p;){if(d.uB(w<<1,g,a),h.ej.geogToProj(x,g,a),M)for(r=0;r<g;r++){var N=a[r][0],j=h.lc.sign(N),z=d.read(2*(w+r))-R;0>j*h.lc.sign(z)&&Math.abs(N)>I&&(a[r][0]+=-j*$)}d.uC(w<<1,g,a),w+=g,p-=g,g=Math.min(p,c)}n.Pc(1993)}},o.HL=function(r,n,a,c){if(a!=0){var p=r.eh(),d=r.Wc(),g=d?r.Oe().R():0,w=179*g/360,x=0;for(d&&(x=r.zi()),r=0;r<a;){for(var M=r;M<a&&n[M].isNaN();++M)r++;var $=Math.min(c.length,a-r);if(0<$){M=1;for(var I=r+1;M<$;++M,++I)if(n[I].isNaN()){$=M;break}if(h.ta.Jy(c,n,r,$),h.ej.geogToProj(p,$,c),d)for(M=0,I=r;M<$;M++){var R=c[M][0],N=h.lc.sign(R);0>N*h.lc.sign(n[I].x-x)&&Math.abs(R)>w&&(c[M][0]-=N*g)}h.ta.Iy(n,r,c,$),r+=$}}}},o.tr=function(r,n,a,c){var p=n.I();if(p!=0){var d=n.ub(0),g=r.ef,w=r.Yf,x=g.sc().Qp(),M=w.sc().Qp(),$=g.bf(),I=w.bf();if((r=r.Wf)==null||r.count()==0){for(a=x/M,c=(g.Up()-w.Up())*I,M=-90*$,r=90*$,x=!1,I=1,g=2*p;I<g;)$=d.get(I),(w=h.O.Rk($,M,r))!=$&&(d.set(I,w),x=!0),I+=2;if(c!=0||a!=1)for(x=!0,M=new h.h,I=0;I<p;I++)d.tc(2*I,M),M.x*=a,M.x+=c,M.y*=a,d.Tt(2*I,M);x&&n.Pc(1993)}else{g=c.length,w=Math.min(p,g);var R=h.O.lg(w),N=null,j=0,z=NaN,D=NaN,U=360*I,V=I/$;a&&(D=90*I,z=89.9*$,N=h.O.lg(w));for(var W=!0,Z=0;p!=0;){for($=!1,d.uB(j<<1,w,c),I=0;I<w;I++)R[I]=c[I][0];if(a)for(I=0;I<w;I++){var it=Math.abs(c[I][1])-z;0<it&&($=c[I][1],c[I][1]=h.lc.Cn(z,$),N[I]=h.lc.Cn(it,$),$=!0)}for(I=c[0][0],r.transform(c,w,x,M),W&&(Z=c[0][0]-V*I,W=!1),I=0;I<w;I++)it=c[I][0]-R[I]*V-Z,200<Math.abs(it)&&(c[I][0]=0<it?c[I][0]-U:c[I][0]+U);if($){for(I=0;I<w;I++)N[I]!=0&&(c[I][1]+=V*N[I],c[I][1]>D?c[I][1]=D:c[I][1]<-D&&(c[I][1]=-D));for($=0;$<w;$++)N[$]=0}d.uC(j<<1,w,c),j+=w,p-=w,w=Math.min(p,g)}n.Pc(1993)}}},o.GL=function(r,n,a,c){if(r.mw)c=90*r.ef.bf(),h.ta.dK(n,a,-c,c);else{var p=r.Wf,d=r.ef,g=r.Yf;r=d.Xr();var w=g.Xr(),x=d.bf(),M=90*x,$=g.bf();if(p==null||p.count()==0){if(c=r/w,p=(d.Up()-g.Up())*$,h.ta.dK(n,a,-M,M),p!=0||c!=1)for($=0;$<a;$++)n[$].x*=c,n[$].x+=p,n[$].y*=c}else{d=Math.min(a,c.length),M=h.O.lg(d),g=360*$,x=$/x;for(var I=!0,R=0,N=0;a!=0;){for($=0;$<d;$++)M[$]=n[$+N].x;for($=n[0].x,h.ta.Jy(c,n,N,d),p.transform(c,d,r,w),h.ta.Iy(n,N,c,d),I&&(R=n[0].x-x*$,I=!1),$=0;$<d;$++){var j=n[N+$].x-M[$]*x-R;200<Math.abs(j)&&(n[N+$].x=0<j?n[N+$].x-g:n[N+$].x+g)}N+=d,a-=d,d=Math.min(a,c.length)}}}},o.dv=function(r,n){return r=r.gh(),isNaN(n)||r.Ju(n,0),r},o.UQ=function(r,n,a,c,p,d,g,w){for(var x=o.dv(c,p),M=x.R(),$=M/360,I=o.pE*$,R=r.ub(0),N=n.Wc(),j=N?M/n.Oe().R():0,z=!1,D=new h.Da(a.description),U=0,V=a.da();U<V;++U){var W=N,Z=new h.Ta(a.description);if(Z.addPath(a,U,!0),g!=0){var it=o.PD(!0,Z,x.H-w,x.H,g);(z=z||it)&&(W=!1)}var ot=-1;W&&(ot=r.Ba(U));var dt=Z.ub(0),ft=Z.I(),$t=0,ut=dt.read(0),qt=0;it=3*c.Xd(0);var Ut=!1,le=new h.h;le.Rc();var Ee=new h.h;Ee.Rc();for(var hi=!1,Ne=1;Ne<ft;++Ne){var ue=h.h.construct(dt.eg(2*Ne),dt.eg(2*Ne+1)),Vt=ue.x,te=Vt+$t,He=te-ut;if(ue.x=te,Math.abs(He)>I){if(W){var De=ot+(Ne+1<ft?Ne:0),ds=R.read(2*(ot+Ne-1));De=(R.read(2*De)-ds)*j,Math.abs(He-De)>1*$&&(W=!1)}W||(te=Vt+($t-=h.lc.Cn(M,te-ut)),++qt,hi=$t!=0,ue.x=te)}else Ut||h.ta.AG(Ee,le,ue,it)&&(Ut=!0);hi&&dt.write(2*Ne,te),ut=te,Ee.L(le),le.L(ue)}0<qt&&Z.Pc(1993),W=Z.Na(0),ft=Z.Na(ft-1),Z=h.h.tb(W,ft)<it?o.uQ(Z,c,p,d,Ut):o.vQ(r,U,Z,c,p),D.add(Z,!1)}return p=c.Xd(0),a=x.R()/180,o.Jt(D,x,.1*p,!1),D=D!=(p=h.ri.clip(D,x,p,a,d)),r=r.Ke(),g=0,0<(w=p.Ke())&&0>r?g=1:0>=w&&0<r&&(w==0?(w=NaN,n.Sb()==2?w=n.ml().Ke():n.Sb()==1&&(w=n.Oe().wF()),r>.99*w&&(g=-1)):g=-1),g!=0&&((n=new h.Da(p.description)).tp(x),(n=h.Xl.local().V(n,a,d)).add(p,!1),D=!0,p=n),D&&(p=h.Yl.local().V(p,c,!1,d)),p},o.vQ=function(r,n,a,c,p){var d=a.I(),g=a.Na(0),w=a.Na(d-1);p=(c=o.dv(c,p)).R(),g=h.lc.sign(w.x-g.x);var x=new h.l;a.xc(x);var M=c.gk();if(w=M-p,M+=p,0<=g){var $=Math.ceil((w-x.v)/p);for($*=p;w>x.v+$;)$+=p;for(;w<x.C+$;)$-=p;var I=$;720<x.R()&&(M=w+360*Math.ceil(x.R()/360))}else{for($=Math.ceil((M-x.C)/p),$*=p;M<x.C+$;)$-=p;for(;M>x.v+$;)$+=p;I=$,720<x.R()&&(w=M-360*Math.ceil(x.R()/360))}$=g*p;var R=h.l.construct(x.v,x.G,x.C,x.H);R.move(I,0);var N=new h.Dd;N.gg(I,0),a.Oc(N),(x=new h.Ta(a.description)).add(a,!1),I=a.Na(d-1),p=0;for(var j=x.Na(0).x,z=0;0<g?R.C<M:R.v>w;)1024<=z&&(z=0),R.move($,0),N.Gb=$,a.Oc(N),j+=$,c.v<=j&&c.C>=j&&(p=x.I()-1),a.Cb(0,I),I=a.Na(d-1),x.Dr(a,0,0,d-1,!1);return a=new h.Da(x.description),d=0<r.Ir(n),a.add(x,!1),r=x.Na(0),w=x.Na(x.I()-1),n=a.da()-1,(0>g?d:!d)?(g=h.h.construct(w.x,c.H),a.Ci(g),g=h.h.construct(c.gk(),c.H),a.Ci(g),c=h.h.construct(r.x,c.H)):(g=h.h.construct(w.x,c.G),a.Ci(g),g=h.h.construct(c.gk(),c.G),a.Ci(g),c=h.h.construct(r.x,c.G)),a.Ci(c),a.xG(0,n,0),a.kO(p),a},o.uQ=function(r,n,a,c,p){var d=new h.Da(r.description);d.add(r,!1),d.DB(0,d.I()-1);var g=new h.l;d.xc(g);var w=(a=o.dv(n,a)).R(),x=Math.ceil((a.v-g.v)/w);for(x*=w;a.v>g.v+x;)x+=w;for(;a.v<g.C+x;)x-=w;if((x+=w)!=0){g.move(x,0);var M=new h.Dd;M.gg(x,0),d.Oc(M)}if(a.v<=g.v&&a.C>g.C)return p&&(p=d.Ke(),n=(d=h.Yl.local().V(d,n,!0,c)).Ke(),(n=h.lc.sign(p)!=h.lc.sign(n))&&d.oJ()),d;for((r=new h.Da(r.description)).add(d,!1),p=p||g.R()>w-n.Xd(0);g.v<a.C;)g.move(w,0),(M=new h.Dd).gg(w,0),d.Oc(M),r.add(d,!1);return p&&(p=r.Ke(),r.Yo(1),n=(r=h.Yl.local().V(r,n,!0,c)).Ke(),(n=h.lc.sign(p)!=h.lc.sign(n))&&r.oJ()),r},o.PD=function(r,n,a,c,p){for(var d=n.ub(0),g=n.I(),w=!1,x=0;x<g;x++){var M=h.h.construct(d.eg(2*x),d.eg(2*x+1));if(1&p&&M.y>=a){w=!0;break}if(2&p&&M.y<=-a){w=!0;break}}if(!w)return!1;d=!1,r&&(d=n.Nn(0)),g=(r=new h.gd).Ib(n),w=r.Ob(g);var $=-1,I=!0,R=new h.h;R.Rc(),x=new h.Sa;for(var N=-1,j=r.Xa(w);j!=-1;j=r.U(j)){M=r.Na(j);var z=1&p&&90<=M.y?1:0;if(z|=2&p&&M.y<=-a?2:0,0<$&&$!=z){if(R.x!=M.x){R.x=M.x,r.Vi(r.Ma(j),x);var D=r.wj(w,j,x);r.mf(D,R)}if(d)for(N=N!=-1?r.U(N):r.Xa(w),D=r.Ma(j);N!=D;)N=r.pd(N,!1);N=-1}0<z&&(M.y=h.lc.Cn(c,M.y),r.mf(j,M),I||$==z||(M.x!=R.x?(r.Vi(j,x),D=r.wj(w,j,x),r.Cb(D,R.x,M.y),N=D):N=j)),$=z,R=M,I=!1}if(d){if(N!=-1)for(N=r.U(N);N!=-1;)N=r.pd(N,!1);a=r.Xa(w),r.fq(a,r.rj(w))||(r.Vi(a,x),r.wj(w,-1,x))}return r.Ne(g).copyTo(n),!0},o.Mz=function(r,n,a,c){var p=r;if(p.B()||a==O.DontClip)return p;var d=p.getType();if(d==33)return p=[(c=p).D()],o.yG(p,1,n,a),p[0].isNaN()?c.Oa():c.Cb(p[0]),r;var g=(r=n.sc()).bf(),w=90*g,x=180*g,M=360*g,$=n.zi(),I=.5*g,R=new h.l;p.A(R);var N=n.Vr(),j=n.PQ(),z=N.getType()==197;if(n=new h.l,N.A(n),a==O.PannableFold&&(a=r.Oe().R(),n.v=$-.5*a,n.C=n.v+a),R.G<-w||R.H>w){if(new h.l().K(R.v-g,-w,R.C+g,w),(p=h.ri.Nu(p,n,r,NaN,0,c)).B())return p;p.A(R)}if(j&&(n.H<R.G||n.G>R.H))return p.Ia();if(R.R()>M&&(p=o.Hp(p,$-x,M,r,!0,0,!0,c)).A(R),(w=o.eO(R.v,R.C,n.v,n.C,M))!=0&&R.move(w,0),R.C>n.C||R.v<n.v){if(R.C>n.C)for(;R.v>=n.C;)R.move(-M,0),w-=M;for(;R.v<n.C-M;)R.move(M,0),w+=M}if(a=h.ta.Hu(r,N),w!=0&&((g=new h.Dd).gg(w,0),p.Oc(g)),j){if(z&&n.contains(R))return p;for(j=[null,null],w=0;2>w;w++){if(z?g=h.aa.Hc(d)?h.ri.clip(p,n,a,I,c):h.ri.clip(p,n,a,0,c):(g=h.Xj.local().V(p,N,r,c))==N&&(g=h.aa.jg(g)),n.v<=R.v&&n.C>=R.C||n.v>=R.v&&n.C<=R.C)return g;j[w]=g,w==0&&(R.move(-M,0),(g=new h.Dd).gg(-M,0),p.Oc(g))}if(d==550)j[0].Fd(j[1],0,-1);else if(h.aa.Hc(d))j[0].add(j[1],!1);else{if(d!=33)throw h.i.fa("intersect_with_GCS_horizon: unexpected geometry type");j[0].B()&&(j[0]=j[1])}return j[0]}if(n.H<R.G||n.G>R.H)return p;for(d=0;!p.B()&&R.C>n.v;)d!=0&&((g=new h.Dd).gg(d,0),p.Oc(g)),h.dj.local().V(4,p,N,r,c)||N==(p=h.kp.local().V(p,N,r,c))&&(p=h.aa.jg(p)),d!=0&&((I=new h.Dd).gg(-d,0),p.Oc(I)),d-=M,R.move(-M,0);return p},o.yG=function(r,n,a,c){if(n!=0&&c!=O.DontClip)if(c==O.PannableFold){c=a.HR();for(var p=n,d=0;d<n;d++)(r[d].y>c.H||r[d].y<c.G)&&(r[d].Rc(),p--);p!=0&&o.av(r,n,c.v,c.R())}else{var g=90*(c=a.bf()),w=180*c;for(c*=360,p=n,d=0;d<n;d++)(r[d].y>g||r[d].y<-g)&&(r[d].Rc(),p--);if(p!=0){(p=new h.l).Zw(r,n),g=a.Vr();var x=a.hv();d=g.getType()==197;var M=new h.l;if(g.A(M),!x||!(M.H<p.G||M.G>p.H))if(x)if(o.av(r,n,M.gk()-w,c),p=n,d)for(d=0;d<n;d++)M.contains(r[d])||(r[d].Rc(),p--);else for(a=h.ta.Hu(a.sc(),g),d=0;d<n;d++)(w=h.hd.Yd(g,r[d],a)!=0)||(r[d].Rc(),p--);else for(o.av(r,n,-w,c),p=n,a=h.ta.Hu(a.sc(),g),d=0;d<n;d++)(w=r[d]).isNaN()&&p--,x=o.tE(w.x,M.v,M.C,c),w.x+=x,(w=h.hd.Yd(g,w,a)!=0)&&(r[d].Rc(),p--)}}},o.Hp=function(r,n,a,c,p,d,g,w){var x=r.getType(),M=n+a;if(x===33){var $=(c=p?r:r.Of()).Lg();return($<n||$>=M||g&&$==M)&&($+=Math.ceil((n-$)/a)*a,$=h.O.Rk($,n,M),c.cC($)),c}if(r.B()||($=new h.l,r.A($),$.B()))return r;var I=new h.Nc;$.cn(I);var R=new h.Nc;if(R.K(n,M),R.contains(I))return r;if((M=new h.l).K($),x===550){for(w=(c=p?r:r.Of()).ub(0),x=2*c.I(),M=!1,n=0;n<x;n+=2)(($=w.read(n))<R.oa||$>=R.va||g&&$==R.va)&&(M=!0,$+=Math.ceil((R.oa-$)/a)*a,$=R.It($),w.write(n,$));return M&&c.Pc(1993),c}if(x==197)return a=p?r:r.Of(),$.Ea(M),a.Xo($),a;var N=.1*Math.max($.ca(),$.R());for(M.W(0,N),g=r,R=c.Xd(0),r=h.Gh.local(),p=new h.Dd;;){var j=Math.floor((I.oa-n)/a),z=Math.ceil((I.va-n)/a);if(!(3<z-j))break;j=Math.floor(.5*(z+j)),M.v=$.v-N,M.C=n+a*j;var D=h.ri.clip(g,M,R,d,w);M.v=M.C,M.C=$.C+N;var U=h.ri.clip(g,M,R,d,w);p.gg((j-z)*a,0),U.Oc(p),x==1736?g=r.V(D,U,c,null):(g=D).add(U,!1),g.A($),$.cn(I)}for(M.v=n,M.C=n+a,(n=new h.l).K(M),n.W(R,0),(n=Math.floor(($.v-M.v)/a)*a)!=0?(M.move(n,0),p.gg(-n,0)):p.RB(),n=x==1607?new h.Ta(g.description):new h.Da(g.description),d=new h.l,I=new h.l;$.C>M.v;)(N=h.ri.clip(g,M,R,0,w)).A(I),(x==1607?!N.B()&&(I.R()>R||I.ca()>R):!N.B()&&(x!=1736||I.R()>R))&&(N.Oc(p),N.A(I),n.A(d),d.W(R,R),d.isIntersecting(I)&&x==1736?n=r.V(n,N,c,null):n.add(N,!1)),M.move(a,0),p.shift(-a,0);return n},o.av=function(r,n,a,c){for(var p=a+c,d=0;d<n;d++){var g=r[d].x;a<=g&&g<p||!(g<a||g>p||g==p)||(g+=Math.ceil((a-g)/c)*c,g=h.O.Rk(g,a,p),r[d].x=g)}},o.Fn=function(r,n,a,c,p,d){if(!n.Wc())throw h.i.fa("fold_into_360_degree_range");if(r.B())return r;if(n.Sb()==2){a=n.pv();var g=n.ov()-a}else{var w=n.bf();g=360*w,a-=180*w}return o.Hp(r,a,g,n,c,p,!0,d)},o.qF=function(r,n,a,c){if(a.Sb()==2)c=a.pv(),a=a.ov()-c;else{var p=a.bf();a=360*p,c-=180*p}o.av(r,n,c,a)},o.lj=function(r,n){var a=n.Oe();if(r.getType()==33){var c=r.ih();return a.G<=c&&c<=a.H?r:r.Ia()}c=new h.l,r.A(c);var p=new h.l;return p.K(a),p.v=c.v,p.C=c.C,p.W(.01*p.ca(),0),a=h.ta.uy(n,c),p.contains(c)?r:h.ri.clip(r,p,a,0,null)},o.ir=function(r,n,a){return r>n.C&&r-n.C<a?n.C:r<n.v&&n.v-r<a?n.v:r},o.FX=function(r,n,a,c){c.x=o.ir(r.x,n,a),c.y=r.y},o.EX=function(r,n,a,c){for(var p=0;p<n;p++)r[p].y<a.G||r[p].y>a.H?r[p].Rc():r[p].x=o.ir(r[p].x,a,c)},o.Jt=function(r,n,a,c){if(!r.B()){var p=r.getType();if(!c||p!=1736)if(h.aa.xj(p)){c=r.ub(0),p=0;for(var d=r.I();p<d;p++){var g=c.read(2*p),w=o.ir(g,n,a);w!=g&&c.write(2*p,w)}r.Pc(1993)}else if(p==197)c=new h.l,r.A(c),c.v=o.ir(c.v,n,a),c.C=o.ir(c.C,n,a),r.Xo(c);else{if(p!=33)throw h.i.fa("internal error");r.cC(o.ir(r.Lg(),n,a))}}},o.uS=function(r,n,a,c){var p=new h.gd,d=p.Ib(r);return r=h.ta.Hu(n,r),o.ks(p,d,n,r,a,!0,c),p.Ne(d)},o.ks=function(r,n,a,c,p,d,g){if(!a.Wc())throw h.i.N("invalid call");var w=a.Oe(),x=a.sc(),M=x.eh().getDatum().getSpheroid();x=x.Hd().ai;var $=M.getFlattening();M=M.getAxis(),$*=2-$;var I=new h.Nc;w.cn(I);var R=null,N=[[0,0],[0,0]];if(a.Sb()==2?(R=a.eh(),d?(N[0][0]=o.Zm(g,I),N[0][1]=w.Jp(),h.ej.projToGeog(R,1,N),w=N[0][0]*x):(N[0][0]=w.gk(),N[0][1]=g,h.ej.projToGeog(R,1,N),w=N[0][1]*x)):w=g*x,!d&&w!=0&&p!=u.GreatElliptic)throw h.i.fa("invalid argument");var j=new h.ga,z=[0],D=new h.h,U=new h.h,V=new h.h,W=[null,null],Z=new h.h,it=new h.h,ot=new h.h,dt=new h.h;for(n=r.Ob(n);n!=-1;n=r.Rb(n)){var ft=r.Xa(n);r.D(ft,Z);for(var $t=!1,ut=ft=r.U(ft);ut!=-1;ut=r.U(ut)){if(ut==ft){if($t)break;$t=!0}if(r.D(ut,it),d&&(c<g-Z.x&&it.x-g>c||c<g-it.x&&Z.x-g>c)||!d&&(g!=0||c<-Z.y&&it.y>c||c<-it.y&&Z.y>c))do if(!(Math.abs(Z.x-it.x)>=.5*I.R())){if(a.Sb()==2?(N[0][0]=o.Zm(Z.x,I),N[0][1]=Z.y,N[1][0]=o.Zm(it.x,I),N[1][1]=it.y,h.ej.projToGeogCenter(R,2,N,0),ot.x=N[0][0]*x,ot.y=N[0][1]*x,dt.y=N[1][1]*x):(ot.x=Z.x*x,ot.y=Z.y*x,dt.y=it.y*x),dt.x=2*(it.x-Z.x)*Math.PI/I.R()+ot.x,d){if(U.x=w,U.y=o.Nz(M,$,ot,dt,w,p),isNaN(U.y))break;W[0]=U;var qt=1}else if(p==u.GreatElliptic){var Ut=[0,0];if((qt=h.Ox.Oz($,ot,dt,w,Ut))==0)break;U.x=Ut[0],U.y=w,W[0]=U,qt==2&&(V.x=Ut[1],V.y=w,W[1]=V)}else{if(U.x=o.Lz(M,$,ot,dt,p),isNaN(U.x))break;U.y=0,W[0]=U,qt=1}var le=-1;for(Ut=0;Ut<qt;Ut++){h.kb.wd(M,$,ot.x,ot.y,dt.x,dt.y,j,null,null,p);var Ee=j.u;h.kb.wd(M,$,ot.x,ot.y,W[Ut].x,W[Ut].y,j,null,null,p);var hi=j.u;if(a.Sb()==2?(N[0][0]=W[Ut].x/x,N[0][1]=W[Ut].y/x,h.ej.geogToProj(R,1,N),d?(D.y=N[0][1],D.x=g):(D.x=o.os(N[0][0],Z.x,it.x,I),D.y=g)):d?(D.x=g,D.y=W[Ut].y/x):(D.x=o.os(W[Ut].x/x,Z.x,it.x,I),D.y=g),z[0]=0<Ee?h.O.Rk(hi/Ee,0,1):.5,z[0]==0||z[0]==1)break;le>z[0]||(le=r.Ma(ut),r.Ul(le,z,1),r.Cb(r.U(le),D.x,D.y),le=z[0])}}while(!1);Z.L(it)}}},o.Zm=function(r,n){var a=n.va-n.oa;return n.It(r-Math.floor((r-n.oa)/a)*a)},o.os=function(r,n,a,c){var p=new h.Nc;for(p.K(n,a),a=c.R(),r=Math.floor((r-n)/a)*a+r,p=p.sf();Math.abs(r-p)>Math.abs(r+a-p);)r+=a;return r},o.Sn=function(r,n,a){return r=h.qr.Cp(r),n=h.qr.mx(r,h.qr.Cp(n)),(a=h.qr.mx(r,h.qr.Cp(a)))==0||0<n&&0<a&&a<=n||0>n&&0>a&&a>=n},o.Nz=function(r,n,a,c,p,d){if(d==u.GreatElliptic)return h.Ox.SS(n,a,c,p);if(Math.abs(a.x-c.x)>=Math.PI||!o.Sn(a.x,c.x,p))return NaN;if(a.x>c.x)var g=c;else g=a,a=c;c=new h.ga;var w=new h.ga,x=new h.ga;h.kb.wd(r,n,g.x,g.y,a.x,a.y,w,c,null,d);var M=w.u,$=0,I=1,R=new h.h;for(R.L(g);M*(I-$)>1e-12*r;){var N=.5*($+I);if(h.kb.oj(r,n,g.x,g.y,M*N,c.u,w,x,d),R.x=w.u,R.y=x.u,R.x==p)break;if(o.Sn(g.x,R.x,p))I=N;else{if(!o.Sn(a.x,R.x,p))return NaN;$=N}}return R.y},o.Lz=function(r,n,a,c,p){if(p==u.GreatElliptic)return r=[0,0],h.Ox.Oz(n,a,c,0,r),r[0];if(a.y>c.y)var d=c;else d=a,a=c;if((c=new h.Nc).K(d.y,a.y),!c.contains(0)||Math.abs(d.x-a.x)>=Math.PI)return NaN;if(d.x==a.x)return d.x;var g=new h.ga,w=new h.ga,x=new h.ga;h.kb.wd(r,n,d.x,d.y,a.x,a.y,w,g,null,p);var M=w.u,$=0,I=1,R=new h.h;for(R.L(d);M*(I-$)>1e-12*r;){var N=.5*($+I);if(h.kb.oj(r,n,d.x,d.y,M*N,g.u,w,x,p),R.x=w.u,R.y=x.u,c.K(d.y,R.y),R.y==0)break;if(c.contains(0))I=N;else{if(c.K(a.y,R.y),!c.contains(0))return NaN;$=N}}return R.x},o.WI=function(r,n,a,c){if(!r.ef.Wc())return!1;var p=new h.de(n.description);if(p.Fd(n,0,-1),c=h.Hx.local().V(p,r,c),p=n.I(),a.Oa(),p!=c.I())return!1;var d=new h.l;n.A(d);var g=new h.l;if(c.A(g),d=d.R(),g=g.R(),d!=0&&g!=0){if(g/=d,r=r.Yf.gh().R()/r.ef.gh().R(),1e-10<Math.abs(g/r-1))return!1}else if(d!=0||g!=0)return!1;for(a.add(n,!1),n=new h.h,r=0;r<p;r++)c.D(r,n),a.Cb(r,n);return!0},o.qN=function(r,n){return(r%=360*n)>=180*n&&(r-=360*n),r},o.UI=function(r,n,a,c){if(a==O.Clip){var p=n.ml();p.getType()==197?(a=new h.l,p.A(a),p=h.ta.uy(n,a),r=h.ri.clip(r,a,p,5e4*n.pm(),c)):h.dj.local().V(1,p,r,n,c)||(r=h.Xj.local().V(r,p,n,c))==p&&(r=h.Vk.jg(r))}else n.Wc()&&(c=new h.l,r.xc(c),n.Oe().contains(c)||(o.Jt(r,n.Oe(),n.Xd(0),!0),a==O.PannableFold&&(r=o.lj(r,n)),r=o.Fn(r,n,0,!0,1e5*n.pm(),null)));return r},o.XD=function(r,n,a){var c=n.Wr();if(c==null)return r;var p=(n=n.sc()).Oe().R(),d=new h.l;r.xc(d);var g=new h.Nc;d.cn(g),d=c.Ga(),c=null;for(var w=new h.Dd;d.$a();)for(;d.Ha();){var x=d.ha(),M=x.Tg(0,0),$=new h.Nc;for($.K(M.oa,M.va),M=0;$.va>g.oa;)$.move(-p),--M;for(;$.oa<=g.va;){if($.isIntersecting(g)){c==null&&(c=new h.Ta);var I=h.yb.cP(x.ac(),x.wc());M!=0&&(w.gg(M*p,0),I.Oc(w)),c.oc(I,!0)}$.move(p),++M}}return c!=null?(n=h.ta.gO(n,c),n=h.ta.Er(n),h.$t.lP(r,c,n,a)):r},o.eO=function(r,n,a,c,p){return r>=a&&n<=c?0:o.tE(.5*(n+r),a,c,p)},o.tE=function(r,n,a,c){return h.lc.round((.5*(a+n)-r)/c)*c},o.VQ=function(r,n,a,c,p,d,g,w){var x=o.dv(c,p),M=x.R(),$=M/360,I=o.pE*$,R=r.ub(0),N=n.Wc(),j=N?M/n.Oe().R():0;n=r.Ia();for(var z=0,D=a.da();z<D;++z){var U=N,V=new h.Ta(a.description);V.addPath(a,z,!0);var W=a.dc(z);g!=0&&(W=o.PD(W,V,x.H-w,x.H,g))&&(U=!1);var Z=-1;W=V.I();var it=!1;U&&(Z=r.Ba(z),it=r.dc(z));var ot=V.ub(0),dt=0,ft=ot.read(0),$t=0,ut=3*c.Xd(0),qt=!1,Ut=new h.h;Ut.Rc();var le=new h.h;le.Rc();for(var Ee=!1,hi=1;hi<W;++hi){var Ne=h.h.construct(ot.eg(2*hi),ot.eg(2*hi+1)),ue=Ne.x,Vt=ue+dt,te=Vt-ft;if(Ne.x=Vt,Math.abs(te)>I){if(U){var He=Z+hi-1,De=Z;(!it||hi+1<W)&&(De+=hi),He=R.read(2*He),De=(R.read(2*De)-He)*j,Math.abs(te-De)>1*$&&(N=!1)}U||(Vt=ue+(dt-=h.lc.Cn(M,Vt-ft)),++$t,Ee=dt!=0,Ne.x=Vt)}else qt||h.ta.AG(Ut,le,Ne,ut)&&(qt=!0);Ee&&ot.write(2*hi,Vt),ft=Vt,Ut.L(le),le.L(Ne)}$t!=0&&V.Pc(1993),U=V.Na(0),W=V.Na(W-1),h.h.tb(U,W),V=o.wQ(V,c,isNaN(p)?0:p,d),n.add(V,!1)}return r=c.Xd(0),a=x.R()/180,o.Jt(n,x,.1*r,!1),h.ri.clip(n,x,r,a,d)},o.wQ=function(r,n,a,c){return o.Fn(r,n,a,!0,0,c)},o.OS=function(r,n,a,c){var p=r.getType();if(p==1736)for(n=n!=null?n.Xd(0):0,p=0;p<c;p++)h.hd.Yd(r,a[p],n)!=1&&a[p].Rc();else{if(p!=197)throw h.i.N();for(p=0;p<c;p++)r.dP(a[p])||a[p].Rc()}},o.$k=function(r,n,a,c){if(32>a)for(var p=new h.Sa,d=0;d<a;d++)p.Cb(n[d]),r.$k(p,c).D(n[d]);else{var g=new h.de;for(g.re(3),g.HD(n,a),p=g.ub(3),d=0;d<a;d++)p.write(d,d);for(d=r.$k(g,c),r=d.ub(0),p=d.ub(3),c=h.h.construct(NaN,NaN),g=0;g<a;g++)n[g]=c;for(a=d.I(),d=0;d<a;d++)c=p.read(d),r.tc(2*d,n[c])}},o.Zk=function(r,n,a,c){if(32>a)for(var p=new h.Sa,d=0;d<a;d++)p.Cb(n[d]),r.Zk(p,c).D(n[d]);else{var g=new h.de;for(g.re(3),g.HD(n,a),p=g.ub(3),d=0;d<a;d++)p.write(d,d);for(d=r.Zk(g,c),r=d.ub(0),p=d.ub(3),c=h.h.construct(NaN,NaN),g=0;g<a;g++)n[g]=c;for(a=d.I(),d=0;d<a;d++)c=p.read(d),r.tc(2*d,n[c])}},o.pE=210,o})()})(B||(B={})),(function(h){var O;(O=h.UL||(h.UL={}))[O.rightSide=1]="rightSide";var m=(function(){function u(o,r,n){this.Bs=new h.h,o===void 0?this.Io=-1:(this.Bs.L(o),this.Io=r,this.Ka=n,this.nw=0)}return u.prototype.WJ=function(o){this.nw=o?1|this.nw:-2&this.nw},u.prototype.B=function(){return 0>this.Io},u.prototype.fz=function(){if(this.B())throw h.i.fa("invalid call");return new h.Sa(this.Bs.x,this.Bs.y)},u.prototype.Ua=function(){if(this.B())throw h.i.fa("invalid call");return this.Io},u.prototype.hz=function(){if(this.B())throw h.i.fa("invalid call");return this.Ka},u.prototype.Sz=function(){return!!(1&this.nw)},u.prototype.ey=function(o,r,n,a){this.Bs.x=o,this.Bs.y=r,this.Io=n,this.Ka=a},u})();h.$l=m})(B||(B={})),(function(h){var O=(function(){function u(){}return u.prototype.Uo=function(o,r){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,o.xc(this.Ek),this.Ek.W(r,r),this.Ek.isIntersecting(this.Fb.Ca)){var n=o.getType();(this.vs=h.aa.yd(n))?(this.TH=o.ac(),this.SH=o.wc(),this.qa=r):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},u.prototype.Xi=function(o,r){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(o),this.Ek.W(r,r),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},u.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var o=null,r=null,n=null,a=null;this.vs&&(o=new h.h,r=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.tk!=-1;){var p=this.Fb.bz(this.Fb.fv(this.tk));if(p.isIntersecting(this.Ek)){if(!this.vs){c=!0;break}if(o.L(this.TH),r.L(this.SH),n.K(p),n.W(this.qa,this.qa),0<n.zy(o,r)){c=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){p=this.th.Fc();var d=this.Ii[this.Ii.length-1];for(a==null&&((a=[])[0]=new h.l,a[1]=new h.l,a[2]=new h.l,a[3]=new h.l),m.EJ(d,a),this.th.If(),--this.Ii.length,d=0;4>d;d++){var g=this.Fb.Lp(p,d);if(g!=-1&&0<this.Fb.WR(g)&&a[d].isIntersecting(this.Ek))if(this.vs){if(o.L(this.TH),r.L(this.SH),n.K(a[d]),n.W(this.qa,this.qa),0<n.zy(o,r)){var w=new h.l;w.K(a[d]),this.th.add(g),this.Ii.push(w)}}else(w=new h.l).K(a[d]),this.th.add(g),this.Ii.push(w)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},u.bP=function(o,r,n){var a=new u;return a.Fb=o,a.Ek=new h.l,a.th=new h.ia(0),a.Ii=[],a.Uo(r,n),a},u.aP=function(o,r,n){var a=new u;return a.Fb=o,a.Ek=new h.l,a.th=new h.ia(0),a.Ii=[],a.Xi(r,n),a},u.$O=function(o){var r=new u;return r.Fb=o,r.Ek=new h.l,r.th=new h.ia(0),r.Ii=[],r},u})();h.GY=O;var m=(function(){function u(o,r){this.jf=new h.$c(11),this.Zh=new h.$c(5),this.ws=[],this.gw=new h.ia(0),this.Ca=new h.l,this.Nk(o,r)}return u.prototype.reset=function(o,r){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(o,r)},u.prototype.vj=function(o,r){return this.zv(o,r,0,this.Ca,this.kf,!1,-1)},u.prototype.Jz=function(o,r,n){n=n==-1?this.kf:this.WF(n);var a=this.ca(n),c=this.oR(n);return this.zv(o,r,a,c,n,!1,-1)},u.prototype.ja=function(o){return this.jR(o)},u.prototype.GF=function(o){return this.bz(this.fv(o))},u.prototype.ca=function(o){return this.jv(o)},u.prototype.oR=function(o){var r=new h.l;r.K(this.Ca);var n=this.jv(o);o=this.QF(o);for(var a=0;a<2*n;a+=2){var c=h.O.truncate(3&o>>a);c==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):c==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(c==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},u.prototype.WR=function(o){return this.Az(o)},u.prototype.vR=function(o,r){return O.bP(this,o,r)},u.prototype.MF=function(o,r){return O.aP(this,o,r)},u.prototype.getIterator=function(){return O.$O(this)},u.prototype.Nk=function(o,r){if(0>r||32<2*r)throw h.i.N("invalid height");this.BT=r,this.Ca.K(o),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},u.prototype.zv=function(o,r,n,a,c,p,d){if(!a.contains(r))return n==0?-1:this.zv(o,r,0,this.Ca,this.kf,p,d);if(!p)for(var g=c;g!=-1;g=this.IR(g))this.jx(g,this.Az(g)+1);(g=new h.l).K(a),a=c;var w=[];for(w[0]=new h.l,w[1]=new h.l,w[2]=new h.l,w[3]=new h.l;n<this.BT&&this.iO(a);n++){u.EJ(g,w);for(var x=!1,M=0;4>M;M++)if(w[M].contains(r)){x=!0;var $=this.Lp(a,M);$==-1&&($=this.rP(a,M)),this.jx($,this.Az($)+1),a=$,g.K(w[M]);break}if(!x)break}return this.sS(o,r,n,g,a,p,c,d)},u.prototype.sS=function(o,r,n,a,c,p,d,g){var w=this.NF(c);if(p){if(c==d)return g;this.SP(g),p=g}else p=this.tP(),this.NB(p,o),this.KW(this.fv(p),r);return this.mX(p,c),w!=-1?(this.hx(p,w),this.bx(w,p)):this.GJ(c,p),this.SB(c,p),this.ax(c,this.lv(c)+1),this.hO(c)&&this.MQ(n,a,c),p},u.prototype.SP=function(o){var r=this.WF(o),n=this.NF(r),a=this.OR(o),c=this.nv(o);this.Ur(r)==o?(c!=-1?this.hx(c,-1):this.SB(r,-1),this.GJ(r,c)):n==o?(this.bx(a,-1),this.SB(r,a)):(this.hx(c,a),this.bx(a,c)),this.hx(o,-1),this.bx(o,-1),this.ax(r,this.lv(r)-1)},u.EJ=function(o,r){var n=.5*(o.v+o.C),a=.5*(o.G+o.H);r[0].K(n,a,o.C,o.H),r[1].K(o.v,a,n,o.H),r[2].K(o.v,o.G,n,a),r[3].K(n,o.G,o.C,a)},u.prototype.hO=function(o){return this.lv(o)==8&&!this.gG(o)},u.prototype.MQ=function(o,r,n){var a=this.Ur(n);do{var c=this.fv(a),p=this.Zh.T(a,0);c=this.bz(c),this.zv(p,c,o,r,n,!0,a),a=p=this.nv(a)}while(a!=-1)},u.prototype.iO=function(o){return 8<=this.lv(o)||this.gG(o)},u.prototype.gG=function(o){return this.Lp(o,0)!=-1||this.Lp(o,1)!=-1||this.Lp(o,2)!=-1||this.Lp(o,3)!=-1},u.prototype.rP=function(o,r){var n=this.jf.Ce();return this.OW(o,r,n),this.jx(n,0),this.ax(n,0),this.Pk(n,o),this.KJ(n,this.jv(o)+1),this.NJ(n,r<<2*this.jv(o)|this.QF(o)),n},u.prototype.tP=function(){var o=this.Zh.Ce();if(0<this.gw.size){var r=this.gw.Fc();this.gw.If()}else r=this.ws.length,this.ws.push(new h.l);return this.LW(o,r),o},u.prototype.Lp=function(o,r){return this.jf.T(o,r)},u.prototype.OW=function(o,r,n){this.jf.S(o,r,n)},u.prototype.Ur=function(o){return this.jf.T(o,4)},u.prototype.GJ=function(o,r){this.jf.S(o,4,r)},u.prototype.NF=function(o){return this.jf.T(o,5)},u.prototype.SB=function(o,r){this.jf.S(o,5,r)},u.prototype.QF=function(o){return this.jf.T(o,6)},u.prototype.NJ=function(o,r){this.jf.S(o,6,r)},u.prototype.lv=function(o){return this.jf.T(o,7)},u.prototype.Az=function(o){return this.jf.T(o,8)},u.prototype.ax=function(o,r){this.jf.S(o,7,r)},u.prototype.jx=function(o,r){this.jf.S(o,8,r)},u.prototype.IR=function(o){return this.jf.T(o,9)},u.prototype.Pk=function(o,r){this.jf.S(o,9,r)},u.prototype.jv=function(o){return this.jf.T(o,10)},u.prototype.KJ=function(o,r){this.jf.S(o,10,r)},u.prototype.jR=function(o){return this.Zh.T(o,0)},u.prototype.NB=function(o,r){this.Zh.S(o,0,r)},u.prototype.OR=function(o){return this.Zh.T(o,1)},u.prototype.nv=function(o){return this.Zh.T(o,2)},u.prototype.hx=function(o,r){this.Zh.S(o,1,r)},u.prototype.bx=function(o,r){this.Zh.S(o,2,r)},u.prototype.WF=function(o){return this.Zh.T(o,3)},u.prototype.mX=function(o,r){this.Zh.S(o,3,r)},u.prototype.fv=function(o){return this.Zh.T(o,4)},u.prototype.LW=function(o,r){this.Zh.S(o,4,r)},u.prototype.bz=function(o){return this.ws[o]},u.prototype.KW=function(o,r){this.ws[o].K(r)},u})();h.du=m})(B||(B={})),(function(h){var O;(O=h.aL||(h.aL={}))[O.Outside=0]="Outside",O[O.Inside=1]="Inside",O[O.Border=2]="Border";var m=(function(){function o(r,n){this.PT=n,this.Vh=r}return o.prototype.setColor=function(r,n){this.iH!=n&&r.flush(),this.iH=n},o.prototype.gF=function(r,n){for(var a=0;a<n;)for(var c=r[a++],p=r[a++],d=r[a++]*this.PT;c<p;c++)this.Vh[d+(c>>4)]|=this.iH<<2*(15&c)},o})();h.HY=m;var u=(function(){function o(r,n,a){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(r,n,a)}return o.create=function(r,n,a){if(!o.zE(r))throw h.i.N();return o.wP(r,n,a)},o.pW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw h.i.fa("Internal Error")}return r},o.zE=function(r){return!(r.B()||r.getType()!=1607&&r.getType()!=1736)},o.prototype.rQ=function(r,n){n=n.Ga();for(var a=new h.h,c=new h.h;n.$a();)for(;n.Ha();){var p=n.ha();if(p.getType()!=322)throw h.i.fa("Internal Error");r.Eh(p.ac(),a),r.Eh(p.wc(),c),this.Ri.jy(a.x,a.y,c.x,c.y)}this.Ri.iJ(h.Px.Cx)},o.prototype.sQ=function(){throw h.i.fa("Internal Error")},o.prototype.Ry=function(r,n){for(var a=1;4>a;a++)r.jy(n[a-1].x,n[a-1].y,n[a].x,n[a].y);r.jy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ri.iJ(h.Px.Cx)},o.prototype.rK=function(r,n,a){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new h.h;n=n.Ga(),a=this.Jk.dY(a)+1.5,p=new h.h;for(var d=new h.h,g=new h.h,w=new h.h,x=new h.h,M=new h.l,$=new h.h;n.$a();){var I=!1,R=!0;for($.ma(0,0);n.Ha();){var N=n.ha();if(w.x=N.sa,w.y=N.na,x.x=N.pa,x.y=N.la,M.Oa(),M.Zb(w.x,w.y),M.Lk(x.x,x.y),this.vl.HG(M)){this.Jk.Eh(x,x),R?(this.Jk.Eh(w,w),$.L(w),R=!1):w.L($),p.uc(x,w);var j=.5>(N=p.length());N==0?p.ma(1,0):(j||$.L(x),p.scale(a/N),d.ma(-p.y,p.x),g.ma(p.y,-p.x),w.sub(p),x.add(p),c[0].add(w,d),c[1].add(w,g),c[2].add(x,g),c[3].add(x,d),j?I=!0:this.Ry(r,c))}else I&&(this.Ry(r,c),I=!1),R=!0}I&&this.Ry(r,c)}},o.prototype.sC=function(r){return h.O.truncate(r*this.qH+this.aI)},o.prototype.tC=function(r){return h.O.truncate(r*this.Es+this.cI)},o.wP=function(r,n,a){return new o(r,n,a)},o.prototype.Fz=function(r,n,a){this.Gf=Math.max(h.O.truncate(2*Math.sqrt(a)+.5),64),this.Um=h.O.truncate((2*this.Gf+31)/32),this.vl=new h.l,this.Ik=n,a=0;for(var c=this.Gf,p=this.Um;8<=c;)a+=c*p,c=h.O.truncate(c/2),p=h.O.truncate((2*c+31)/32);this.Vh=h.O.lg(a,0),this.Ri=new h.Px,a=new m(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,a),r.A(this.vl),this.vl.W(n,n),c=new h.l;var d=n*(p=h.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(n*=p.ca(),c.K(this.vl.sf(),Math.max(d,this.vl.R()),Math.max(n,this.vl.ca())),this.SA=this.Ik,this.Jk=new h.Dd,this.Jk.pS(c,p),new h.Dd,r.getType()){case 550:a.setColor(this.Ri,2),this.sQ();break;case 1607:a.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA);break;case 1736:a.setColor(this.Ri,1),this.rQ(this.Jk,r),a.setColor(this.Ri,2),this.rK(this.Ri,r,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},o.prototype.XN=function(){this.Ri.flush();for(var r=0,n=this.Gf*this.Um,a=this.Gf,c=h.O.truncate(this.Gf/2),p=this.Um,d=h.O.truncate((2*c+31)/32);8<a;){for(a=0;a<c;a++)for(var g=2*a,w=2*a+1,x=0;x<c;x++){var M=2*x,$=2*x+1,I=M>>4;M=2*(15&M);var R=$>>4;$=2*(15&$);var N=this.Vh[r+p*g+I]>>M&3;N|=this.Vh[r+p*g+R]>>$&3,N|=this.Vh[r+p*w+I]>>M&3,N|=this.Vh[r+p*w+R]>>$&3,this.Vh[n+d*a+(x>>4)]|=N<<2*(15&x)}a=c,p=d,r=n,c=h.O.truncate(a/2),d=h.O.truncate((2*c+31)/32),n=r+p*a}},o.prototype.So=function(r,n){return this.vl.contains(r,n)?(r=this.sC(r),n=this.tC(n),0>r||r>=this.Gf||0>n||n>=this.Gf||(n=this.Vh[this.Um*n+(r>>4)]>>2*(15&r)&3)==0?0:n==1?1:2):0},o.prototype.Ro=function(r){if(!r.Ea(this.vl))return 0;var n=this.sC(r.v),a=this.sC(r.C),c=this.tC(r.G);if(r=this.tC(r.H),0>n&&(n=0),0>c&&(c=0),a>=this.Gf&&(a=this.Gf-1),r>=this.Gf&&(r=this.Gf-1),n>a||c>r)return 0;for(var p=Math.max(a-n,1)*Math.max(r-c,1),d=0,g=this.Um,w=this.Gf,x=0;;){if(32>p||16>w){for(p=c;p<=r;p++)for(var M=n;M<=a;M++)if(1<(x=this.Vh[d+g*p+(M>>4)]>>2*(15&M)&3))return 2;if(x==0)return 0;if(x==1)return 1}d+=g*w,w=h.O.truncate(w/2),g=h.O.truncate((2*w+31)/32),n=h.O.truncate(n/2),c=h.O.truncate(c/2),a=h.O.truncate(a/2),r=h.O.truncate(r/2),p=Math.max(a-n,1)*Math.max(r-c,1)}},o.prototype.RR=function(){return this.Gf*this.Um},o})();h.Nx=u})(B||(B={})),(function(h){var O;(O=h.VL||(h.VL={}))[O.contains=1]="contains",O[O.within=2]="within",O[O.equals=3]="equals",O[O.disjoint=4]="disjoint",O[O.touches=8]="touches",O[O.crosses=16]="crosses",O[O.overlaps=32]="overlaps",O[O.unknown=0]="unknown",O[O.intersects=1073741824]="intersects";var m=(function(){function o(){}return o.construct=function(r,n,a,c,p,d,g,w){var x=new o;return x.pw=r,x.Mm=n,x.Kj=a,x.Si=c,x.BH=p,x.SY=d,x.TY=g,x.UY=w,x},o})();h.Vt=(function(){function o(){}return o.CD=function(r,n,a){if(o.wy(r)){var c=h.ta.kj(n,r,!1);n=!1,h.Uk.CE(r)&&(n=n||r.lu(c,a)),(c=r.getType())!=1736&&c!=1607||!h.Uk.AE(r)||a==0||(n=n||r.fj(a)),c!=1736&&c!=1607||!h.Uk.BE(r)||a==0||n||r.hM()}},o.wy=function(r){return h.Uk.CE(r)||h.Uk.AE(r)||h.Uk.BE(r)},o})();var u=(function(){function o(){this.rh=[]}return o.zB=function(r,n,a,c,p){var d=r.getType(),g=n.getType();if(d==197){if(g==197)return o.tW(r,n,a,c);if(g==33)return c==2?c=1:c==1&&(c=2),o.hJ(n,r,a,c)}else if(d==33){if(g==197)return o.hJ(r,n,a,c);if(g==33)return o.vW(r,n,a,c)}if(r.B()||n.B())return c==4;var w=new h.l;r.A(w);var x=new h.l;n.A(x);var M=new h.l;if(M.K(w),M.Zb(x),a=h.ta.Wd(a,M,!1),o.dk(w,x,a))return c==4;switch(w=!1,h.Vk.yd(d)&&((d=new h.Ta(r.description)).oc(r,!0),r=d,d=1607),h.Vk.yd(g)&&((g=new h.Ta(n.description)).oc(n,!0),n=g,g=1607),d!=197&&g!=197?(r.Db()<n.Db()||d==33&&g==550)&&(c==2?c=1:c==1&&(c=2)):d!=1736&&g!=197&&(c==2?c=1:c==1&&(c=2)),d){case 1736:switch(g){case 1736:w=o.rt(r,n,a,c,p);break;case 1607:w=o.$m(r,n,a,c,p);break;case 33:w=o.qt(r,n,a,c);break;case 550:w=o.pt(r,n,a,c,p);break;case 197:w=o.GI(r,n,a,c,p)}break;case 1607:switch(g){case 1736:w=o.$m(n,r,a,c,p);break;case 1607:w=o.gB(r,n,a,c,p);break;case 33:w=o.tt(r,n,a,c,p);break;case 550:w=o.st(r,n,a,c,p);break;case 197:w=o.MI(r,n,a,c)}break;case 33:switch(g){case 1736:w=o.qt(n,r,a,c);break;case 1607:w=o.tt(n,r,a,c,p);break;case 550:w=o.lt(n,r,a,c)}break;case 550:switch(g){case 1736:w=o.pt(n,r,a,c,p);break;case 1607:w=o.st(n,r,a,c,p);break;case 550:w=o.ZA(r,n,a,c,p);break;case 33:w=o.lt(r,n,a,c);break;case 197:w=o.hI(r,n,a,c)}break;case 197:switch(g){case 1736:w=o.GI(n,r,a,c,p);break;case 1607:w=o.MI(n,r,a,c);break;case 550:w=o.hI(n,r,a,c)}}return w},o.tW=function(r,n,a,c){if(r.B()||n.B())return c==4;var p=new h.l,d=new h.l,g=new h.l;switch(r.A(p),n.A(d),g.K(p),g.Zb(d),r=h.ta.Wd(a,g,!1),c){case 4:return o.dk(p,d,r);case 2:return o.jF(d,p,r);case 1:return o.jF(p,d,r);case 3:return o.ek(p,d,r);case 8:return o.cQ(p,d,r);case 32:return o.bQ(p,d,r);case 16:return o.aQ(p,d,r)}return!1},o.hJ=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D();var p=new h.l,d=new h.l;switch(n.A(p),d.K(r),d.Zb(p),n=h.ta.Wd(a,d,!1),c){case 4:return o.Rw(r,p,n);case 2:return o.eB(r,p,n);case 1:return o.RU(r,p,n);case 3:return o.vI(r,p,n);case 8:return o.dB(r,p,n)}return!1},o.vW=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D(),n=n.D();var p=new h.l;switch(p.K(r),p.Zb(n),a=h.ta.Wd(a,p,!1),c){case 4:return o.SU(r,n,a);case 2:return o.uI(n,r,a);case 1:return o.uI(r,n,a);case 3:return o.wI(r,n,a)}return!1},o.rt=function(r,n,a,c,p){switch(c){case 4:return o.kV(r,n,a);case 2:return o.Sw(n,r,a,p);case 1:return o.Sw(r,n,a,p);case 3:return o.nV(r,n,a);case 8:return o.vV(r,n,a);case 32:return o.qV(r,n,a,p)}return!1},o.$m=function(r,n,a,c,p){switch(c){case 4:return o.lV(r,n,a);case 1:return o.fB(r,n,a,p);case 8:return o.wV(r,n,a,p);case 16:return o.gV(r,n,a)}return!1},o.qt=function(r,n,a,c){switch(c){case 4:return o.jV(r,n,a);case 1:return o.dV(r,n,a);case 8:return o.uV(r,n,a)}return!1},o.pt=function(r,n,a,c){switch(c){case 4:return o.iV(r,n,a);case 1:return o.cV(r,n,a);case 8:return o.tV(r,n,a);case 16:return o.fV(r,n,a)}return!1},o.GI=function(r,n,a,c,p){if(o.hV(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.xV(r,n,a);case 1:return o.bV(r,n,a);case 3:return o.mV(r,n,a);case 8:return o.sV(r,n,a,p);case 32:return o.pV(r,n,a,p);case 16:return o.eV(r,n,a,p)}return!1},o.gB=function(r,n,a,c){switch(c){case 4:return o.GV(r,n,a);case 2:return o.KI(n,r,a);case 1:return o.KI(r,n,a);case 3:return o.IV(r,n,a);case 8:return o.NI(r,n,a);case 32:return o.MV(r,n,a);case 16:return o.LI(r,n,a)}return!1},o.tt=function(r,n,a,c){switch(c){case 4:return o.FV(r,n,a);case 1:return o.AV(r,n,a);case 8:return o.QV(r,n,a)}return!1},o.st=function(r,n,a,c){switch(c){case 4:return o.EV(r,n,a);case 1:return o.zV(r,n,a);case 8:return o.PV(r,n,a);case 16:return o.CV(r,n,a)}return!1},o.MI=function(r,n,a,c){if(o.DV(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.RV(r,n,a);case 1:return o.yV(r,n,a);case 3:return o.HV(r,n,a);case 8:return o.OV(r,n,a);case 32:return o.LV(r,n,a);case 16:return o.BV(r,n,a)}return!1},o.ZA=function(r,n,a,c){switch(c){case 4:return o.gU(r,n,a);case 2:return o.eI(n,r,a);case 1:return o.eI(r,n,a);case 3:return o.iU(r,n,a);case 32:return o.oU(r,n,a)}return!1},o.lt=function(r,n,a,c){switch(c){case 4:return o.fI(r,n,a);case 2:return o.sU(r,n,a);case 1:return o.dU(r,n,a);case 3:return o.Nw(r,n,a)}return!1},o.hI=function(r,n,a,c){switch(c){case 4:return o.fU(r,n,a);case 2:return o.rU(r,n,a);case 1:return o.cU(r,n,a);case 3:return o.hU(r,n,a);case 8:return o.qU(r,n,a);case 16:return o.eU(r,n,a)}return!1},o.nV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=1&&c!=2&&(!!o.dI(r,n,a)||(c=r.Qb(),p=n.Qb(),!(Math.abs(c-p)>4*Math.max(r.I(),n.I())*a)&&o.Wz(r,n,a,!0)))},o.kV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.EI(r,n,a)},o.vV=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&c!=2&&o.II(r,n,a,null)},o.qV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&p!=2&&o.FI(r,n,a,c)},o.Sw=function(r,n,a,c){var p=new h.l,d=new h.l;return r.A(p),n.A(d),!!o.zc(p,d,a)&&(p=o.qc(r,n,!1))!=4&&p!=2&&(p==1||o.BI(r,n,a,c))},o.lV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=1073741824&&o.EI(r,n,a)},o.wV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&o.JI(r,n,a,c)},o.gV=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&o.DI(r,n,a,null)},o.fB=function(r,n,a,c){var p=new h.l,d=new h.l;return r.A(p),n.A(d),!!o.zc(p,d,a)&&(p=o.qc(r,n,!1))!=4&&(p==1||o.CI(r,n,a,c))},o.jV=function(r,n,a){return h.hd.KG(r,n,a)==0},o.uV=function(r,n,a){return n=n.D(),o.HI(r,n,a)},o.dV=function(r,n,a){return n=n.D(),o.AI(r,n,a)},o.iV=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,r.A(c),c.W(a,a);for(var p=new h.h,d=0;d<n.I();d++)if(n.D(d,p),c.contains(p)){var g=h.hd.Yd(r,p,a);if(g==1||g==2)return!1}return!0},o.tV=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;c=new h.l,r.A(c),c.W(a,a);for(var p=!1,d=r,g=!1,w=0;w<n.I();w++){var x=n.Na(w);if(c.contains(x)){if((x=h.hd.Yd(d,x,a))==2)p=!0;else if(x==1)return!1}g||(!h.Dg.Ml(r,n.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?d=r:(d=new h.Da,r.copyTo(d),d.fj(1)),g=!0)}return!!p},o.fV=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;var p=new h.l;c=new h.l;var d=new h.l;r.A(p),n.A(d),c.K(p),c.W(a,a),d=p=!1;for(var g=r,w=!1,x=0;x<n.I();x++){var M=n.Na(x);if(c.contains(M)?(M=h.hd.Yd(g,M,a))==0?d=!0:M==1&&(p=!0):d=!0,p&&d)return!0;w||(!h.Dg.Ml(r,n.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?g=r:(g=new h.Da,r.copyTo(g),g.fj(1)),w=!0)}return!1},o.cV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!this.zc(c,p,a)||(p=this.qc(r,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var d=r,g=!1,w=0;w<n.I();w++){var x=n.Na(w);if(!c.contains(x))return!1;if((x=h.hd.Yd(d,x,a))==1)p=!0;else if(x==0)return!1;g||(!h.Dg.Ml(r,n.I()-1)||r.Bb!=null&&r.Bb.Fb!=null?d=r:(d=new h.Da,r.copyTo(d),d.fj(1)),g=!0)}return p},o.mV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&((c=new h.Da).ad(n,!1),o.Wz(r,c,a,!0))},o.hV=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new h.l;if(c=new h.l,r.A(p),n.A(c),o.zc(c,p,a)||(p=new h.h,c.dn(p),(n=h.hd.Yd(r,p,a))!=0)||(c.$I(p),(n=h.hd.Yd(r,p,a))!=0)||(c.en(p),(n=h.hd.Yd(r,p,a))!=0)||(c.cJ(p),(n=h.hd.Yd(r,p,a))!=0))return!1;n=r.ub(0),(p=new h.l).K(c),p.W(a,a);for(var d=0,g=r.I();d<g;d++){var w=n.read(2*d),x=n.read(2*d+1);if(p.contains(w,x))return!1}return!o.TG(r,c,a)},o.sV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var d=new h.l;return r.A(p),n.A(d),!o.zc(d,p,a)&&(d.R()<=a&&d.ca()<=a?(n=n.Ip(),o.HI(r,n,a)):d.R()<=a||d.ca()<=a?(p=new h.Ta,d=new h.Sa,n.Hf(0,d),p.nf(d),n.Hf(2,d),p.lineTo(d),o.JI(r,p,a,c)):((p=new h.Da).ad(n,!1),o.II(r,p,a,c)))},o.pV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var d=new h.l;return r.A(p),n.A(d),!(o.zc(d,p,a)||d.R()<=a||d.ca()<=a)&&((p=new h.Da).ad(n,!1),o.FI(r,p,a,c))},o.xV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.zc(p,c,a)},o.bV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.zc(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=2&&(c==1||(p.R()<=a&&p.ca()<=a?(n=n.Ip(),o.AI(r,n,a)):p.R()<=a||p.ca()<=a?(p=new h.Ta,c=new h.Sa,n.Hf(0,c),p.nf(c),n.Hf(2,c),p.lineTo(c),o.CI(r,p,a,null)):((p=new h.Da).ad(n,!1),o.BI(r,p,a,null))))},o.eV=function(r,n,a,c){var p=new h.l,d=new h.l;return r.A(p),n.A(d),!(o.zc(d,p,a)||d.ca()>a&&d.R()>a||d.ca()<=a&&d.R()<=a)&&(p=new h.Ta,d=new h.Sa,n.Hf(0,d),p.nf(d),n.Hf(2,d),p.lineTo(d),o.DI(r,p,a,c))},o.IV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.ek(c,p,a)||o.qc(r,n,!1)==4)&&(!!o.dI(r,n,a)||o.Wz(r,n,a,!1))},o.GV=function(r,n,a){return this.qc(r,n,!1)==4||!!new h.Zl(r,n,a,!0).next()&&!this.UG(r,n,a)},o.NI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.be(0);if(o.Xz(r,n,a,c)!=0)return!1;for(var p=new h.de,d=0;d<c.size;d+=2){var g=c.read(d),w=c.read(d+1);p.Bu(g,w)}return r=r.mg(),n=n.mg(),r.Fd(n,0,n.I()),o.Mw(r,p,a)},o.LI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.be(0);if(o.Xz(r,n,a,c)!=0)return!1;for(var p=new h.de,d=0;d<c.size;d+=2){var g=c.read(d),w=c.read(d+1);p.Bu(g,w)}return r=r.mg(),n=n.mg(),r.Fd(n,0,n.I()),!o.Mw(r,p,a)},o.MV=function(r,n,a){return o.qc(r,n,!1)!=4&&o.WG(r,n,a)},o.KI=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.zc(c,p,a)||o.qc(r,n,!1)==4)&&o.ym(n,r,a,!1)},o.FV=function(r,n,a){return o.qc(r,n,!1)==4||(n=n.D(),!o.Yz(r,n,a))},o.QV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.Zz(r,n,a))},o.AV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.SG(r,n,a))},o.EV=function(r,n,a){return o.qc(r,n,!1)==4||!o.VG(r,n,a,!1)},o.PV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ga(),p=new h.l,d=new h.l,g=new h.l;r.A(p),n.A(d),p.W(a,a),d.W(a,a),g.K(p),g.Ea(d),p=null;var w=r.Bb;if(w!=null){var x=w.Fb;p=w.zo,x==null&&(x=w=h.ta.jj(r,g))}else x=w=h.ta.jj(r,g);var M=x.getIterator(),$=null;p!=null&&($=p.getIterator());var I=new h.h,R=new h.h,N=!1,j=a*a;for(p=new h.pn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,I),g.contains(I)){if(d.K(I.x,I.y,I.x,I.y),$!=null&&($.Xi(d,a),$.next()==-1))continue;M.Xi(d,a);for(var z=M.next();z!=-1;z=M.next())if(c.Vb(x.ja(z)),(z=c.ha()).hc(z.fe(I,!1),R),h.h.yc(I,R)<=j){p.write(w,1),N=!0;break}}if(!N)return!1;for(r=r.mg(),c=new h.de,d=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,d),c.Bu(d.x,d.y));return this.Mw(r,c,a)},o.CV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ga(),p=new h.l,d=new h.l,g=new h.l;r.A(p),n.A(d),p.W(a,a),d.W(a,a),g.K(p),g.Ea(d),p=null;var w=r.Bb;if(w!=null){var x=w.Fb;p=w.zo,x==null&&(x=w=h.ta.jj(r,g))}else x=w=h.ta.jj(r,g);var M=x.getIterator(),$=null;p!=null&&($=p.getIterator());var I=new h.h,R=new h.h,N=!1,j=!1,z=a*a;for(p=new h.pn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,I),g.contains(I)){if(d.K(I.x,I.y,I.x,I.y),$!=null&&($.Xi(d,a),$.next()==-1)){j=!0;continue}M.Xi(d,a);for(var D=!1,U=M.next();U!=-1;U=M.next())if(c.Vb(x.ja(U)),(U=c.ha()).hc(U.fe(I,!1),R),h.h.yc(I,R)<=z){p.write(w,1),D=N=!0;break}D||(j=!0)}else j=!0;if(!N||!j)return!1;for(r=r.mg(),c=new h.de,d=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,d),c.Bu(d.x,d.y));return!this.Mw(r,c,a)},o.zV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.zc(c,p,a)||o.qc(r,n,!1)==4||!o.VG(r,n,a,!0))&&(r=r.mg(),!o.gI(r,n,a))},o.HV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.ca()>a&&p.R()>a)&&o.ek(c,p,a)},o.DV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!o.zc(p,c,a)&&!o.TG(r,p,a)},o.OV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),p.ca()<=a&&p.R()<=a)return p=n.Ip(),o.Zz(r,p,a);if(p.ca()<=a||p.R()<=a)return p=new h.Ta,c=new h.Sa,n.Hf(0,c),p.nf(c),n.Hf(2,c),p.lineTo(c),o.NI(r,p,a);r=r.Ga(),n=new h.l,c=new h.l,n.K(p),c.K(p),n.W(-a,-a),c.W(a,a),p=!1;for(var d=new h.l,g=new h.l;r.$a();)for(;r.Ha();){if(r.ha().A(d),g.K(n),g.Ea(d),!g.B()&&(g.ca()>a||g.R()>a))return!1;g.K(c),g.Ea(d),g.B()||(p=!0)}return p},o.LV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(o.zc(c,p,a)||o.zc(p,c,a)||o.zc(p,c,a)||p.ca()>a&&p.R()>a||p.ca()<=a&&p.R()<=a)&&(c=new h.Ta,p=new h.Sa,n.Hf(0,p),c.nf(p),n.Hf(2,p),c.lineTo(p),o.WG(r,c,a))},o.RV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.zc(p,c,a)||p.ca()<=a&&p.R()<=a)return!1;if(p.ca()<=a||p.R()<=a)return o.zc(p,c,a);r=r.Ga(),(n=new h.l).K(p),n.W(-a,-a),p=!1,c=new h.l;for(var d=new h.l;r.$a();)for(;r.Ha();)r.ha().A(c),n.hm(c)?p=!0:(d.K(n),d.Ea(c),!d.B()&&(d.ca()>a||d.R()>a)&&(p=!0));return p},o.yV=function(r,n,a){var c=new h.l,p=new h.l;return n.A(p),r.A(c),!(!o.zc(c,p,a)||p.ca()>a&&p.R()>a)&&(p.ca()<=a&&p.R()<=a?(n=n.Ip(),o.SG(r,n,a)):(c=new h.Ta,p=new h.Sa,n.Hf(0,p),c.nf(p),n.Hf(2,p),c.lineTo(p),o.ym(c,r,a,!1)))},o.BV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.zc(p,c,a)||p.ca()<=a&&p.R()<=a)return!1;if(p.ca()<=a||p.R()<=a)return c=new h.Ta,p=new h.Sa,n.Hf(0,p),c.nf(p),n.Hf(2,p),c.lineTo(p),o.LI(r,c,a);r=r.Ga(),n=new h.l,(c=new h.l).K(p),n.K(p),c.W(-a,-a),n.W(a,a);for(var d=p=!1,g=new h.l,w=new h.l;r.$a();)for(;r.Ha();)if(r.ha().A(g),d||n.contains(g)||(d=!0),p||(w.K(c),w.Ea(g),!w.B()&&(w.ca()>a||w.R()>a)&&(p=!0)),p&&d)return!0;return!1},o.iU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&(!!o.jU(r,n,a)||o.YA(r,n,a,!1,!0,!1))},o.gU=function(r,n,a){return!o.gI(r,n,a)},o.oU=function(r,n,a){return o.YA(r,n,a,!1,!1,!0)},o.eI=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.zc(c,p,a)&&o.YA(n,r,a,!0,!1,!1)},o.Mw=function(r,n,a){a*=a;for(var c=new h.h,p=new h.h,d=0;d<n.I();d++){n.D(d,p);for(var g=!1,w=0;w<r.I();w++)if(r.D(w,c),h.h.yc(c,p)<=a){g=!0;break}if(!g)return!1}return!0},o.Nw=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.ek(c,p,a)},o.fI=function(r,n,a){return n=n.D(),o.kt(r,n,a)},o.sU=function(r,n,a){return o.Nw(r,n,a)},o.dU=function(r,n,a){return!o.fI(r,n,a)},o.hU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.ca()>a||p.R()>a)&&o.ek(c,p,a)},o.fU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.zc(p,c,a))return!1;for((n=new h.l).K(p),n.W(a,a),a=new h.h,p=0;p<r.I();p++)if(r.D(p,a),n.contains(a))return!1;return!0},o.qU=function(r,n,a){var c=new h.l,p=new h.l,d=new h.l;if(n.A(c),c.ca()<=a&&c.R()<=a)return!1;if(c.ca()<=a||c.R()<=a){n=new h.h;var g=!1;p.K(c),d.K(c),p.W(a,a),c.ca()>a?d.W(0,-a):d.W(-a,0);for(var w=0;w<r.I();w++)if(r.D(w,n),p.contains(n)){if(c.ca()>a){if(n.y>d.G&&n.y<d.H)return!1}else if(n.x>d.v&&n.x<d.C)return!1;g=!0}return g}for(p.K(c),d.K(c),p.W(a,a),d.W(-a,-a),n=new h.h,g=!1,w=0;w<r.I();w++)if(r.D(w,n),p.contains(n)){if(d.hm(n))return!1;g=!0}return g},o.rU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.zc(p,c,a))return!1;if(p.ca()<=a&&p.R()<=a)return o.ek(c,p,a);if(p.ca()<=a||p.R()<=a){n=!1,c=new h.l;var d=new h.l;c.K(p),d.K(p),p.ca()>a?c.W(0,-a):c.W(-a,0),d.W(a,a);for(var g=new h.h,w=0;w<r.I();w++){if(r.D(w,g),!d.contains(g))return!1;p.ca()>a?g.y>c.G&&g.y<c.H&&(n=!0):g.x>c.v&&g.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,d=new h.l,c.K(p),d.K(p),c.W(-a,-a),d.W(a,a),g=new h.h,w=0;w<r.I();w++){if(r.D(w,g),!d.contains(g))return!1;c.hm(g)&&(n=!0)}return n},o.cU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.zc(c,p,a)||p.ca()>a||p.R()>a)&&(n=n.Ip(),!o.kt(r,n,a))},o.eU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.zc(p,c,a)||p.ca()<=a&&p.R()<=a)return!1;if(p.ca()<=a||p.R()<=a){n=new h.l,c=new h.l,n.K(p),p.ca()>a?n.W(0,-a):n.W(-a,0),c.K(p),c.W(a,a);for(var d=new h.h,g=!1,w=!1,x=0;x<r.I();x++)if(r.D(x,d),g||(p.ca()>a?d.y>n.G&&d.y<n.H&&(g=!0):d.x>n.v&&d.x<n.C&&(g=!0)),w||c.contains(d)||(w=!0),g&&w)return!0;return!1}for(n=new h.l,c=new h.l,n.K(p),n.W(-a,-a),c.K(p),c.W(a,a),d=new h.h,w=g=!1,x=0;x<r.I();x++)if(r.D(x,d),!g&&n.hm(d)&&(g=!0),w||c.contains(d)||(w=!0),g&&w)return!0;return!1},o.wI=function(r,n,a){return h.h.yc(r,n)<=a*a},o.SU=function(r,n,a){return h.h.yc(r,n)>a*a},o.uI=function(r,n,a){return o.wI(r,n,a)},o.vI=function(r,n,a){var c=new h.l;return c.K(r),o.ek(c,n,a)},o.Rw=function(r,n,a){var c=new h.l;return c.K(n),c.W(a,a),!c.contains(r)},o.dB=function(r,n,a){if(n.ca()<=a&&n.R()<=a)return!1;var c=new h.l,p=new h.l;if(c.K(n),c.W(a,a),!c.contains(r))return!1;if(n.ca()<=a||n.R()<=a){if(p.K(n),n.ca()>a?p.W(0,-a):p.W(-a,0),n.ca()>a){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.K(n),p.W(-a,-a),!p.hm(r)},o.eB=function(r,n,a){if(n.ca()<=a&&n.R()<=a)return!0;if(n.ca()<=a||n.R()<=a){var c=new h.l;c.K(n),n.ca()>a?c.W(0,-a):c.W(-a,0);var p=!1;return n.ca()>a?r.y>c.G&&r.y<c.H&&(p=!0):r.x>c.v&&r.x<c.C&&(p=!0),p}return(c=new h.l).K(n),c.W(-a,-a),c.hm(r)},o.RU=function(r,n,a){return o.vI(r,n,a)},o.ek=function(r,n,a){return o.zc(r,n,a)&&o.zc(n,r,a)},o.dk=function(r,n,a){var c=new h.l;return c.K(n),c.W(a,a),!r.isIntersecting(c)},o.cQ=function(r,n,a){if(r.ca()<=a&&r.R()<=a){var c=r.sf();return o.dB(c,n,a)}if(n.ca()<=a&&n.R()<=a)return c=n.sf(),o.dB(c,r,a);if(r.ca()>a&&r.R()>a&&(n.ca()<=a||n.R()<=a)?c=n:(c=r,r=n),c.ca()<=a||c.R()<=a){if(r.ca()<=a||r.R()<=a){n=new h.yb;var p=new h.yb,d=[0,0],g=[0,0],w=new h.h;return c.dn(w),n.Dc(w),c.en(w),n.Qc(w),r.dn(w),p.Dc(w),r.en(w),p.Qc(w),n.Ea(p,null,d,g,a),n.Ea(p,null,null,null,a)==1&&(d[0]==0||d[1]==1||g[0]==0||g[1]==1)}return n=new h.l,p=new h.l,n.K(r),n.W(-a,-a),p.K(n),p.Ea(c),!(!p.B()&&(p.ca()>a||p.R()>a))}return r.W(a,a),(p=new h.l).K(c),p.Ea(r),!(p.B()||!p.B()&&p.ca()>a&&p.R()>a)},o.bQ=function(r,n,a){if(o.zc(r,n,a)||o.zc(n,r,a)||r.ca()<=a&&r.R()<=a||n.ca()<=a&&n.R()<=a)return!1;if(r.ca()<=a||r.R()<=a){if(n.ca()>a&&n.R()>a)return!1;var c=new h.yb,p=new h.yb,d=[0,0],g=[0,0],w=new h.h;return r.dn(w),c.Dc(w),r.en(w),c.Qc(w),n.dn(w),p.Dc(w),n.en(w),p.Qc(w),c.Ea(p,null,d,g,a),c.Ea(p,null,null,null,a)==2&&(0<d[0]||1>d[1])&&(0<g[0]||1>g[1])}return!(n.ca()<=a||n.R()<=a)&&((c=new h.l).K(r),c.Ea(n),!(c.B()||c.ca()<=a||c.R()<=a))},o.jF=function(r,n,a){if(!o.zc(r,n,a))return!1;if(r.ca()<=a&&r.R()<=a)return r=r.sf(),o.eB(r,n,a);if(n.ca()<=a&&n.R()<=a)return n=n.sf(),o.eB(n,r,a);if(r.ca()<=a||r.R()<=a)return o.zc(r,n,a);if(n.ca()<=a||n.R()<=a){var c=new h.l;return c.K(r),c.W(-a,-a),c.hm(n)?!0:((r=new h.l).K(c),r.Ea(n),!(r.B()||r.ca()<=a&&r.R()<=a))}return o.zc(r,n,a)},o.aQ=function(r,n,a){if(o.zc(r,n,a)||o.zc(n,r,a)||r.ca()<=a&&r.R()<=a||n.ca()<=a&&n.R()<=a||n.ca()>a&&n.R()>a&&r.ca()>a&&r.R()>a)return!1;if(r.ca()>a&&r.R()>a)var c=n;else c=r,r=n;if(r.ca()>a&&r.R()>a){n=new h.l;var p=new h.l;return p.K(r),p.W(-a,-a),n.K(p),n.Ea(c),!(n.B()||n.ca()<=a&&n.R()<=a)}n=new h.yb,p=new h.yb;var d=[0,0],g=[0,0],w=new h.h;return c.dn(w),n.Dc(w),c.en(w),n.Qc(w),r.dn(w),p.Dc(w),r.en(w),p.Qc(w),n.Ea(p,null,d,g,a),n.Ea(p,null,null,null,a)==1&&0<d[0]&&1>d[1]&&0<g[0]&&1>g[1]},o.EI=function(r,n,a){var c=new h.l,p=new h.l,d=new h.Zl(r,n,a,!0);if(!d.next())return!0;if(this.UG(r,n,a))return!1;var g=r,w=null;n.getType()==1736&&(w=n);var x=!1,M=!1;do{var $=d.nl(),I=d.hl();if(I=n.Na(n.Ba(I)),c.K(d.uz()),c.W(a,a),c.contains(I)&&(I=h.hd.Yd(g,I,0))!=0||n.getType()==1736&&($=r.Na(r.Ba($)),p.K(d.az()),p.W(a,a),p.contains($)&&(I=h.hd.Yd(w,$,0))!=0))return!1;x||(!h.Dg.Ml(r,n.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?g=r:(g=new h.Da,r.copyTo(g),g.fj(1)),x=!0),n.getType()!=1736||M||(M=n,!h.Dg.Ml(M,r.da()-1)||n.Bb!=null&&n.Bb.Fb!=null?w=n:(w=new h.Da,M.copyTo(w),w.fj(1)),M=!0)}while(d.next());return!0},o.zc=function(r,n,a){var c=new h.l;return c.K(r),c.W(a,a),c.contains(n)},o.ls=function(r,n,a){var c=new h.l;return c.K(n),c.W(a,a),n=new h.h,r.dn(n),!c.contains(n)||(r.$I(n),!c.contains(n)||(r.cJ(n),!c.contains(n)||(r.en(n),!c.contains(n))))},o.dI=function(r,n,a){if(r.da()!=n.da()||r.I()!=n.I())return!1;var c=new h.h,p=new h.h,d=!0;a*=a;for(var g=0;g<r.da();g++){if(r.Vc(g)!=n.Vc(g)){d=!1;break}for(var w=r.Ba(g);w<n.Vc(g);w++)if(r.D(w,c),n.D(w,p),h.h.yc(c,p)>a){d=!1;break}if(!d)break}return!!d},o.jU=function(r,n,a){if(r.I()!=n.I())return!1;var c=new h.h,p=new h.h,d=!0;a*=a;for(var g=0;g<r.I();g++)if(r.D(g,c),n.D(g,p),h.h.yc(c,p)>a){d=!1;break}return!!d},o.YA=function(r,n,a,c,p,d){var g=!1;if(r.I()>n.I()){c&&(c=!1,g=!0);var w=n}else w=r,r=n;if(n=null,p||d||g){n=new h.pn(r.I());for(var x=0;x<r.I();x++)n.write(x,0)}x=new h.l;var M=new h.l,$=new h.l;w.A(x),r.A(M),x.W(a,a),M.W(a,a),$.K(x),$.Ea(M),M=new h.h;for(var I=new h.h,R=!0,N=h.ta.oE(r,$),j=N.getIterator(),z=a*a,D=0;D<w.I();D++)if(w.D(D,M),$.contains(M)){var U=!1;x.K(M.x,M.y,M.x,M.y),j.Xi(x,a);for(var V=j.next();V!=-1&&(V=N.ja(V),r.D(V,I),!(h.h.yc(M,I)<=z&&((p||d||g)&&n.write(V,1),U=!0,c)));V=j.next());if(!U&&(R=!1,p||c))return!1}else{if(p||c)return!1;R=!1}if(d&&R)return!1;if(c)return!0;for(x=0;x<r.I();x++)if(n.read(x)==1){if(d)return!0}else if(p||g)return!1;return!d},o.gI=function(r,n,a){if(r.I()>n.I())var c=n;else c=r,r=n;n=new h.l;var p=new h.l,d=new h.l;c.A(n),r.A(p),n.W(a,a),p.W(a,a),d.K(n),d.Ea(p),p=new h.h;for(var g=new h.h,w=a*a,x=h.ta.oE(r,d),M=x.getIterator(),$=0;$<c.I();$++)if(c.D($,p),d.contains(p)){n.K(p.x,p.y,p.x,p.y),M.Xi(n,a);for(var I=M.next();I!=-1;I=M.next())if(r.D(x.ja(I),g),h.h.yc(p,g)<=w)return!0}return!1},o.Wz=function(r,n,a,c){return o.ym(r,n,a,c)&&o.ym(n,r,a,c)},o.ym=function(r,n,a,c){function p($t,ut){return I.QE($t,ut)}var d,g=!0,w=[0,0],x=[0,0],M=0,$=new h.ia(0),I=new o,R=new h.l,N=new h.l,j=new h.l;r.A(R),n.A(N),R.W(a,a),N.W(a,a),j.K(R),j.Ea(N),r=r.Ga(),N=n.Ga();var z=null,D=z=null,U=n.Bb;for(U!=null?(z=U.Fb,D=U.zo,z==null&&(z=h.ta.jj(n,j))):z=h.ta.jj(n,j),n=z.getIterator(),U=null,D!=null&&(U=D.getIterator());r.$a();)for(;r.Ha();){var V=!1,W=r.ha();if(W.A(R),!R.isIntersecting(j)||U!=null&&(U.Xi(R,a),U.next()==-1))return!1;for(D=W.Qb(),n.Uo(W,a),d=n.next();d!=-1;d=n.next()){N.Vb(z.ja(d)),d=N.ha();var Z=W.Ea(d,null,w,x,a);if(Z==2&&(!c||x[0]<=x[1])){Z=w[0];var it=w[1],ot=x[0],dt=x[1];if(Z*D<=a&&(1-it)*D<=a){V=!0,M=0,$.resize(0),I.rh.length=0;var ft=r.wb();for(ot=!0;ot;){if(r.Ha()){if(D=(W=r.ha()).Qb(),(Z=W.Ea(d,null,w,x,a))==2&&(!c||x[0]<=x[1])&&(Z=w[0],it=w[1],Z*D<=a&&(1-it)*D<=a)){ft=r.wb();continue}if(N.Ha()&&(d=N.ha(),(Z=W.Ea(d,null,w,x,a))==2&&(!c||x[0]<=x[1])&&(Z=w[0],it=w[1],Z*D<=a&&(1-it)*D<=a))){ft=r.wb();continue}}ot=!1}ft!=r.wb()&&(r.Vb(ft),r.ha());break}ft=r.wb(),d=m.construct(ft,r.gb,Z,it,N.wb(),N.gb,ot,dt),I.rh.push(d),$.add($.size)}}if(!V){if(M==I.rh.length)return!1;for(1<$.size-M&&$.Vd(M,$.size,p),V=0;M<I.rh.length;M++)if(!((d=I.rh[$.get(M)]).Kj<V&&d.Si<V)){if(D*(d.Kj-V)>a)return!1;if(D*(1-(V=d.Si))<=a||V==1)break}if(D*(1-V)>a)return!1;M=0,$.resize(0),I.rh.length=0}}return g},o.WG=function(r,n,a){if(1>o.Xz(r,n,a,null))return!1;var c=new h.l,p=new h.l;r.A(c),n.A(p);var d=o.ls(c,p,a);return c=o.ls(p,c,a),!(!d||!c)||(d&&!c?!o.ym(n,r,a,!1):c&&!d?!o.ym(r,n,a,!1):!o.ym(r,n,a,!1)&&!o.ym(n,r,a,!1))},o.Xz=function(r,n,a,c){function p(le,Ee){return R.QE(le,Ee)}if(r.yz()>n.yz())var d=n,g=r;else d=r,g=n;r=d.Ga(),n=g.Ga();var w=[0,0],x=[0,0],M=-1,$=0,I=new h.ia(0),R=new o,N=new h.l,j=new h.l,z=new h.l;d.A(N),g.A(j),N.W(a,a),j.W(a,a),z.K(N),z.Ea(j),d=null,c!=null&&(d=new h.h);var D=j=j=null,U=g.Bb;for(U!=null?(j=U.Fb,D=U.zo,j==null&&(j=h.ta.jj(g,z))):j=h.ta.jj(g,z),g=j.getIterator(),U=null,D!=null&&(U=D.getIterator());r.$a();)for(D=0;r.Ha();){var V=r.ha();if(V.A(N),N.isIntersecting(z)){if(U!=null&&(U.Xi(N,a),U.next()==-1))continue;var W=V.Qb();g.Uo(V,a);for(var Z=g.next();Z!=-1;Z=g.next()){var it=j.ja(Z);n.Vb(it);var ot=n.ha(),dt=ot.Qb(),ft=V.Ea(ot,null,w,x,a);if(0<ft){Z=w[0],M=x[0];var $t=ft==2?w[1]:NaN,ut=ft==2?x[1]:NaN;if(ft==2){if(W*($t-Z)>a)return 1;var qt=W*($t-Z);if(n.Ha()){if(ot=n.ha(),(ft=V.Ea(ot,null,w,null,a))==2){ft=w[0];var Ut=w[1];if(qt+(ft=W*(Ut-ft))>a)return 1}n.Vb(it),n.ha()}if(!n.vm()){if(n.li(),ot=n.li(),(ft=V.Ea(ot,null,w,null,a))==2&&(ft=w[0],qt+(ft=W*((Ut=w[1])-ft))>a))return 1;n.Vb(it),n.ha()}if(r.Ha()){if(it=r.wb(),(ft=(V=r.ha()).Ea(ot,null,w,null,a))==2&&(ft=w[0],qt+(ft=W*((Ut=w[1])-ft))>a))return 1;r.Vb(it),r.ha()}if(!r.vm()){if(it=r.wb(),r.li(),(ft=(V=r.li()).Ea(ot,null,w,null,a))==2&&(ft=w[0],qt+(ft=dt*((Ut=w[1])-ft))>a))return 1;r.Vb(it),r.ha()}ot=m.construct(r.wb(),r.gb,Z,$t,n.wb(),n.gb,M,ut),R.rh.push(ot),I.add(I.size)}M=0,c!=null&&(V.hc(Z,d),c.add(d.x),c.add(d.y))}}if($<R.rh.length){for(I.Vd($,I.size,p),V=0,Z=R.rh[I.get($)].Mm;$<R.rh.length;$++)if(!((ot=R.rh[I.get($)]).Kj<V&&ot.Si<V))if(W*(ot.Kj-V)>a)D=W*(ot.Si-ot.Kj),V=ot.Si,Z=ot.Mm;else{if(ot.Mm!=Z?(D=W*(ot.Si-ot.Kj),Z=ot.Mm):D+=W*(ot.Si-ot.Kj),D>a)return 1;if((V=ot.Si)==1)break}W*(1-V)>a&&(D=0),$=0,I.resize(0),R.rh.length=0}}}return M},o.UG=function(r,n,a){var c=r.Ga(),p=n.Ga();for(r=new h.Zl(r,n,a,!1);r.next();){n=r.nl();var d=r.hl();if(c.Vb(n),p.Vb(d),n=c.ha(),0<p.ha().Ea(n,null,null,null,a))return!0}return!1},o.VG=function(r,n,a,c){var p=r.Ga(),d=new h.l,g=new h.l,w=new h.l;r.A(d),n.A(g),d.W(a,a),d.contains(g),g.W(a,a),w.K(d),w.Ea(g),(d=r.Bb)!=null?(d=d.Fb)==null&&(d=h.ta.jj(r,w)):d=h.ta.jj(r,w),r=d.getIterator();for(var x=new h.h,M=new h.h,$=a*a,I=0;I<n.I();I++)if(n.D(I,x),w.contains(x)){g.K(x.x,x.y,x.x,x.y),r.Xi(g,a);for(var R=!1,N=r.next();N!=-1;N=r.next())if(p.Vb(d.ja(N)),(N=p.ha()).hc(N.fe(x,!1),M),h.h.yc(M,x)<=$){R=!0;break}if(c){if(!R)return!1}else if(R)return!0}return!!c},o.Yz=function(r,n,a){var c=new h.h,p=a*a,d=r.Ga();if((r=r.Bb)!=null&&(r=r.Fb)!=null){var g=new h.l;for(g.K(n),g=(a=r.MF(g,a)).next();g!=-1;g=a.next())if(d.Vb(r.ja(g)),d.Ha()){var w=(g=d.ha()).fe(n,!1);if(g.hc(w,c),h.h.yc(n,c)<=p)return!0}return!1}for(r=new h.l;d.$a();)for(;d.Ha();)if((g=d.ha()).A(r),r.W(a,a),r.contains(n)&&(w=g.fe(n,!1),g.hc(w,c),h.h.yc(n,c)<=p))return!0;return!1},o.SG=function(r,n,a){return o.Yz(r,n,a)&&!o.Zz(r,n,a)},o.Zz=function(r,n,a){return r=r.mg(),!o.kt(r,n,a)},o.TG=function(r,n,a){if(r.tm()){var c=new h.yb(n.v,n.G,n.v,n.H),p=new h.yb(n.v,n.H,n.C,n.H),d=new h.yb(n.C,n.H,n.C,n.G);for(n=new h.yb(n.C,n.G,n.v,n.G),r=r.Ga();r.$a();)for(;r.Ha();){var g=r.ha();if(g.isIntersecting(c,a)||g.isIntersecting(p,a)||g.isIntersecting(d,a)||g.isIntersecting(n,a))return!0}}else{(c=new h.l).K(n),c.W(a,a),a=r.ub(0),p=new h.h,d=new h.h,n=new h.h,g=new h.h;for(var w=0,x=r.da();w<x;w++)for(var M=!0,$=r.Ba(w),I=r.Vc(w);$<I;$++)if(M)a.tc(2*$,d),M=!1;else{if(a.tc(2*$,p),n.L(d),g.L(p),c.zy(n,g)!=0)return!0;d.L(p)}}return!1},o.qc=function(r,n,a){var c=r.getType(),p=n.getType();if(h.aa.xj(c)){var d=r.Bb;if(d!=null&&(d=d.Fk)!=null)if(p==33){var g=n.D();if((g=d.So(g.x,g.y))==1)return 1;if(g==0)return 4}else{if(g=new h.l,n.A(g),(g=d.Ro(g))==1)return 1;if(g==0)return 4;if(a&&h.aa.xj(p)&&o.HE(n,d))return 1073741824}}if(h.aa.xj(p)&&(d=n.Bb)!=null&&(d=d.Fk)!=null)if(c==33){if(r=r.D(),(g=d.So(r.x,r.y))==1)return 2;if(g==0)return 4}else{if(n=new h.l,r.A(n),(g=d.Ro(n))==1)return 2;if(g==0)return 4;if(a&&h.aa.xj(c)&&o.HE(r,d))return 1073741824}return 0},o.HE=function(r,n){for(var a=r.I(),c=new h.h,p=0;p<a;p++)if(r.D(p,c),n.So(c.x,c.y)==1)return!0;return!1},o.II=function(r,n,a,c){for(var p=1<=r.om(0)&&1<=n.om(0),d=r.Ga(),g=n.Ga(),w=[0,0],x=[0,0],M=new h.Zl(r,n,a,!1),$=!1;M.next();){var I=M.nl(),R=M.hl();if(d.Vb(I),g.Vb(R),I=d.ha(),(R=g.ha().Ea(I,null,x,w,a))==2){if($=w[0],R=w[1],I=I.Qb(),p&&(R-$)*I>a)return!1;$=!0}else if(R!=0){if($=w[0],I=x[0],0<$&&1>$&&0<I&&1>I)return!1;$=!0}}return!!$&&(d=new h.l,g=new h.l,p=new h.l,r.A(d),n.A(g),d.W(1e3*a,1e3*a),g.W(1e3*a,1e3*a),p.K(d),p.Ea(g),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Ud.clip(n,p,a,0),n.B()))&&h.am.rt(r,n,a,"F********",c))},o.FI=function(r,n,a,c){var p=1<=r.om(0)&&1<=n.om(0),d=new h.l,g=new h.l,w=new h.l;r.A(d),n.A(g);for(var x=!1,M=o.ls(d,g,a),$=o.ls(g,d,a),I=r.Ga(),R=n.Ga(),N=[0,0],j=[0,0],z=new h.Zl(r,n,a,!1);z.next();){var D=z.nl(),U=z.hl();if(I.Vb(D),R.Vb(U),U=I.ha(),(D=R.ha().Ea(U,null,j,N,a))==2){D=N[0];var V=N[1];if(U=U.Qb(),p&&(V-D)*U>a&&(x=!0,M&&$))return!0}else if(D!=0&&(D=N[0],U=j[0],0<D&&1>D&&0<U&&1>U))return!0}if(p=new h.l,I=new h.l,p.K(d),p.W(1e3*a,1e3*a),I.K(g),I.W(1e3*a,1e3*a),w.K(p),w.Ea(I),d="",d=x?d+"**":d+"T*",M){if(10<n.I()&&(n=h.Ud.clip(n,w,a,0)).B())return!1;d+="****"}else d+="T***";if($){if(10<r.I()&&(r=h.Ud.clip(r,w,a,0)).B())return!1;d+="***"}else d+="T**";return h.am.rt(r,n,a,d.toString(),c)},o.BI=function(r,n,a,c){var p=[!1],d=o.zI(r,n,a,p);return p[0]?d:(p=new h.l,n.A(p),p.W(1e3*a,1e3*a),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B()))&&h.am.Sw(r,n,a,c))},o.zI=function(r,n,a,c){c[0]=!1;for(var p=r.Ga(),d=n.Ga(),g=[0,0],w=[0,0],x=new h.Zl(r,n,a,!1),M=!1;x.next();){var $=x.nl(),I=x.hl();if(p.Vb($,-1),d.Vb(I,-1),$=p.ha(),($=d.ha().Ea($,null,w,g,a))!=0&&(M=!0,$==1&&($=g[0],I=w[0],0<$&&1>$&&0<I&&1>I)))return c[0]=!0,!1}if(!M){for(c[0]=!0,g=new h.l,r.A(g),g.W(a,a),x=r,M=!1,w=new h.l,c=0,p=n.da();c<p;c++)if(0<n.Ja(c)){if(n.Rj(c,w),!g.isIntersecting(w)||(d=n.Na(n.Ba(c)),(d=h.Dg.wm(x,d,0))==0))return!1;M||(!h.Dg.Ml(r,n.da()-1)||r.Bb!=null&&r.Bb.Fb!=null?x=r:(d=new h.Da,r.copyTo(d),d.fj(1),x=d),M=!0)}if(r.da()==1||n.getType()==1607)return!0;for(g=new h.l,n.A(g),g.W(a,a),w=n,x=!1,a=new h.l,c=0,p=r.da();c<p;c++)if(0<r.Ja(c)){if(r.Rj(c,a),g.isIntersecting(a)&&(d=r.Na(r.Ba(c)),(d=h.Dg.wm(w,d,0))==1))return!1;x||(!h.Dg.Ml(n,r.da()-1)||n.Bb!=null&&n.Bb.Fb!=null?w=n:(d=new h.Da,n.copyTo(d),d.fj(1),w=d),x=!0)}return!0}return!1},o.JI=function(r,n,a,c){for(var p=r.Ga(),d=n.Ga(),g=[0,0],w=[0,0],x=new h.Zl(r,n,a,!1),M=!1;x.next();){var $=x.nl(),I=x.hl();if(p.Vb($),d.Vb(I),$=p.ha(),($=d.ha().Ea($,null,w,g,a))==2)M=!0;else if($!=0){if(M=g[0],$=w[0],0<M&&1>M&&0<$&&1>$)return!1;M=!0}}return!!M&&(d=new h.l,g=new h.l,p=new h.l,r.A(d),n.A(g),d.W(1e3*a,1e3*a),g.W(1e3*a,1e3*a),p.K(d),p.Ea(g),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Ud.clip(n,p,a,0),n.B()))&&h.am.$m(r,n,a,"F********",c))},o.DI=function(r,n,a,c){for(var p=r.Ga(),d=n.Ga(),g=[0,0],w=[0,0],x=new h.Zl(r,n,a,!1),M=!1;x.next();){var $=x.nl(),I=x.hl();if(p.Vb($),d.Vb(I),$=p.ha(),($=d.ha().Ea($,null,w,g,a))==2)M=!0;else if($!=0){if(M=g[0],$=w[0],0<M&&1>M&&0<$&&1>$)return!0;M=!0}}return!!M&&(d=new h.l,g=new h.l,w=new h.l,x=new h.l,p=new h.l,r.A(d),n.A(g),o.ls(g,d,a)?(w.K(d),w.W(1e3*a,1e3*a),x.K(g),x.W(1e3*a,1e3*a),p.K(w),p.Ea(x),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Ud.clip(n,p,a,0),n.B()))&&(a=h.am.$m(r,n,a,"T********",c))):a=h.am.$m(r,n,a,"T*****T**",c))},o.CI=function(r,n,a,c){var p=[!1],d=o.zI(r,n,a,p);return p[0]?d:(p=new h.l,n.A(p),p.W(1e3*a,1e3*a),!(10<r.I()&&(r=h.Ud.clip(r,p,a,0),r.B()))&&h.am.fB(r,n,a,c))},o.AI=function(r,n,a){return h.hd.Yd(r,n,a)==1},o.HI=function(r,n,a){return h.hd.Yd(r,n,a)==2},o.kt=function(r,n,a){var c=new h.h;a*=a;for(var p=0;p<r.I();p++)if(r.D(p,c),h.h.yc(c,n)<=a)return!1;return!0},o.prototype.QE=function(r,n){return r=this.rh[r],n=this.rh[n],r.Mm<n.Mm||r.Mm==n.Mm&&(r.pw<n.pw||r.pw==n.pw&&(r.Kj<n.Kj||r.Kj==n.Kj&&(r.Si<n.Si||r.Si==n.Si&&r.BH<n.BH)))?-1:1},o})();h.ud=u})(B||(B={})),(function(h){var O,m,u;(m=O||(O={}))[m.InteriorInterior=0]="InteriorInterior",m[m.InteriorBoundary=1]="InteriorBoundary",m[m.InteriorExterior=2]="InteriorExterior",m[m.BoundaryInterior=3]="BoundaryInterior",m[m.BoundaryBoundary=4]="BoundaryBoundary",m[m.BoundaryExterior=5]="BoundaryExterior",m[m.ExteriorInterior=6]="ExteriorInterior",m[m.ExteriorBoundary=7]="ExteriorBoundary",m[m.ExteriorExterior=8]="ExteriorExterior",(function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"})(u||(u={})),O=(function(){function o(){this.le=0,this.j=new h.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return o.yB=function(r,n,a,c,p){if(c.length!=9)throw h.i.fa("relation string length has to be 9 characters");for(var d=0;9>d;d++){var g=c.charAt(d);if(g!="*"&&g!="T"&&g!="F"&&g!="0"&&g!="1"&&g!="2")throw h.i.fa("relation string")}if((d=this.MR(c,r.Db(),n.Db()))!=0)return h.ud.zB(r,n,a,d,p);d=new h.l,r.A(d),g=new h.l,n.A(g);var w=new h.l;if(w.K(d),w.Zb(g),a=h.ta.Wd(a,w,!1),r=this.WE(r,a),n=this.WE(n,a),r.B()||n.B())return this.uW(r,n,c);switch(d=r.getType(),g=n.getType(),w=!1,d){case 1736:switch(g){case 1736:w=this.rt(r,n,a,c,p);break;case 1607:w=this.$m(r,n,a,c,p);break;case 33:w=this.qt(r,n,a,c);break;case 550:w=this.pt(r,n,a,c,p)}break;case 1607:switch(g){case 1736:w=this.$m(n,r,a,this.Zp(c),p);break;case 1607:w=this.gB(r,n,a,c,p);break;case 33:w=this.tt(r,n,a,c,p);break;case 550:w=this.st(r,n,a,c,p)}break;case 33:switch(g){case 1736:w=this.qt(n,r,a,this.Zp(c));break;case 1607:w=this.tt(n,r,a,this.Zp(c),p);break;case 33:w=this.$U(r,n,a,c);break;case 550:w=this.lt(n,r,a,this.Zp(c))}break;case 550:switch(g){case 1736:w=this.pt(n,r,a,this.Zp(c),p);break;case 1607:w=this.st(n,r,a,this.Zp(c),p);break;case 550:w=this.ZA(r,n,a,c,p);break;case 33:w=this.lt(r,n,a,c)}break;default:w=!1}return w},o.rt=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.xJ();var g=new h.l,w=new h.l;return r.A(g),n.A(w),c=!1,h.ud.dk(g,w,a)&&(d.Cu(r,n),c=!0),c||((g=h.ud.qc(r,n,!1))==4?(d.Cu(r,n),c=!0):g==1?(d.ly(n),c=!0):g==2&&(d.ZD(r),c=!0)),c||(r=(c=new h.gd).Ib(r),n=c.Ib(n),d.Wo(c,a,p),d.Bp(r,n),d.j.Ug()),o.fg(d.J,d.Xc)},o.Sw=function(r,n,a,c){var p=new o;p.Yi(),p.bj("T*****F**"),p.xJ();var d=new h.l,g=new h.l;r.A(d),n.A(g);var w=!1;return h.ud.dk(d,g,a)&&(p.Cu(r,n),w=!0),w||((d=h.ud.qc(r,n,!1))==4?(p.Cu(r,n),w=!0):d==1?(p.ly(n),w=!0):d==2&&(p.ZD(r),w=!0)),w?this.fg(p.J,p.Xc):(r=(w=new h.gd).Ib(r),d=w.Ib(n),h.Tk.V(w,a,c,!1),a=w.Ne(d).mg(),w.Gp(0,!0,!0),h.rn.V(w,r,-1,!1,c),w.I(r)!=0&&(h.rn.V(w,d,-1,!1,c),p.er(w,c),(n=w.I(d)==0)||(p.Bp(r,d),p.j.Ug(),d=this.fg(p.J,p.Xc))?(r=w.Ne(r),r=(w=new h.gd).Ib(r),d=w.Ib(a),p.er(w,c),p.le=0,p.Yi(),p.bj(n?"T*****F**":"******F**"),p.IB(),p.Bp(r,d),p.j.Ug(),this.fg(p.J,p.Xc)):d))},o.$m=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.IB();var g=new h.l,w=new h.l;return r.A(g),n.A(w),c=!1,h.ud.dk(g,w,a)&&(d.Du(r,n),c=!0),c||((g=h.ud.qc(r,n,!1))==4?(d.Du(r,n),c=!0):g==1&&(d.$D(n),c=!0)),c||(r=(c=new h.gd).Ib(r),n=c.Ib(n),d.Wo(c,a,p),d.kh=d.j.Dp(),o.Jw(n,d.j,d.kh),d.Bp(r,n),d.j.Ep(d.kh),d.j.Ug()),o.fg(d.J,d.Xc)},o.fB=function(r,n,a,c){var p=new o;p.Yi(),p.bj("T*****F**"),p.IB();var d=new h.l,g=new h.l;r.A(d),n.A(g);var w=!1;return h.ud.dk(d,g,a)&&(p.Du(r,n),w=!0),w||((d=h.ud.qc(r,n,!1))==4?(p.Du(r,n),w=!0):d==1&&(p.$D(n),w=!0)),w?this.fg(p.J,p.Xc):(r=(w=new h.gd).Ib(r),n=w.Ib(n),p.Wo(w,a,c),w.I(r)!=0&&(p.Bp(r,n),p.j.Ug(),this.fg(p.J,p.Xc)))},o.pt=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.yJ();var g=new h.l,w=new h.l;return r.A(g),n.A(w),c=!1,h.ud.dk(g,w,a)&&(d.Eu(r),c=!0),c||((g=h.ud.qc(r,n,!1))==4?(d.Eu(r),c=!0):g==1&&(d.zN(),c=!0)),c||(r=(c=new h.gd).Ib(r),n=c.Ib(n),d.Wo(c,a,p),d.Gy(r,n),d.j.Ug()),o.fg(d.J,d.Xc)},o.gB=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.eX(),c=new h.l;var g=new h.l;r.A(c),n.A(g);var w=!1;return h.ud.dk(c,g,a)&&(d.PG(r,n),w=!0),w||h.ud.qc(r,n,!1)!=4||(d.PG(r,n),w=!0),w||(r=(c=new h.gd).Ib(r),n=c.Ib(n),d.Wo(c,a,p),d.Yh=d.j.Dp(),d.kh=d.j.Dp(),o.Jw(r,d.j,d.Yh),o.Jw(n,d.j,d.kh),d.Bp(r,n),d.j.Ep(d.Yh),d.j.Ep(d.kh),d.j.Ug()),o.fg(d.J,d.Xc)},o.st=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.MJ(),c=new h.l;var g=new h.l;r.A(c),n.A(g);var w=!1;return h.ud.dk(c,g,a)&&(d.Vz(r),w=!0),w||h.ud.qc(r,n,!1)!=4||(d.Vz(r),w=!0),w||(r=(c=new h.gd).Ib(r),n=c.Ib(n),d.Wo(c,a,p),d.Yh=d.j.Dp(),o.Jw(r,d.j,d.Yh),d.Gy(r,n),d.j.Ep(d.Yh),d.j.Ug()),o.fg(d.J,d.Xc)},o.ZA=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.RJ(),c=new h.l;var g=new h.l;r.A(c),n.A(g);var w=!1;return h.ud.dk(c,g,a)&&(d.yI(),w=!0),w||(r=(c=new h.gd).Ib(r),n=c.Ib(n),d.Wo(c,a,p),d.Gy(r,n),d.j.Ug()),o.fg(d.J,d.Xc)},o.qt=function(r,n,a,c){var p=new o;p.Yi(),p.bj(c),p.yJ();var d=new h.l;r.A(d),n=n.D();var g=!1;return h.ud.Rw(n,d,a)&&(p.Eu(r),g=!0),g||((a=h.hd.Yd(r,n,a))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):a==2?(p.J[6]=-1,r.Ke()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,a=new h.l,r.A(a),p.J[2]=a.ca()==0&&a.R()==0?-1:1)):p.Eu(r)),this.fg(p.J,c)},o.tt=function(r,n,a,c,p){var d=new o;d.Yi(),d.bj(c),d.MJ();var g=new h.l;r.A(g),c=n.D();var w=!1;if(h.ud.Rw(c,g,a)&&(d.Vz(r),w=!0),!w){g=null;var x=w=!1;(d.ea[0]||d.ea[6])&&(h.ud.Yz(r,c,a)?(d.ea[0]&&(g=h.pi.gm(r,p),x=!h.ud.kt(g,c,a),w=!0,d.J[0]=x?-1:0),d.J[6]=-1):(d.J[0]=-1,d.J[6]=0)),d.ea[3]&&(g!=null&&g.B()?d.J[3]=-1:(w||(g==null&&(g=h.pi.gm(r,p)),x=!h.ud.kt(g,c,a),w=!0),d.J[3]=x?0:-1)),d.ea[5]&&(g!=null&&g.B()?d.J[5]=-1:w&&!x?d.J[5]=0:(g==null&&(g=h.pi.gm(r,p)),p=h.ud.Nw(g,n,a),d.J[5]=p?-1:0)),d.ea[2]&&(r.Qb()!=0?d.J[2]=1:((p=new h.de(r.description)).Fd(r,0,r.I()),r=h.ud.Nw(p,n,a),d.J[2]=r?-1:0))}return this.fg(d.J,d.Xc)},o.lt=function(r,n,a,c){var p=new o;p.Yi(),p.bj(c),p.RJ();var d=new h.l;r.A(d),n=n.D();var g=!1;if(h.ud.Rw(n,d,a)&&(p.yI(),g=!0),!g){d=!1,g=!0,a*=a;for(var w=0;w<r.I();w++){var x=r.Na(w);if(h.h.yc(x,n)<=a?d=!0:g=!1,d&&!g)break}d?(p.J[0]=0,p.J[2]=g?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.fg(p.J,c)},o.$U=function(r,n,a,c){r=r.D(),n=n.D();for(var p=[],d=0;9>d;d++)p[d]=-1;return h.h.yc(r,n)<=a*a?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.fg(p,c)},o.fg=function(r,n){for(var a=0;9>a;a++)switch(n.charAt(a)){case"T":if(r[a]==-1)return!1;break;case"F":if(r[a]!=-1)return!1;break;case"0":if(r[a]!=0)return!1;break;case"1":if(r[a]!=1)return!1;break;case"2":if(r[a]!=2)return!1}return!0},o.uW=function(r,n,a){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.fg(c,a)}return p=!1,r.B()&&(r=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=r.getType(),h.aa.Hc(n)?n==1736?r.Ke()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,r.A(n),c[2]=n.ca()==0&&n.R()==0?0:1):(n=r.Qb()!=0,c[2]=n?1:0,c[5]=h.pi.aq(r)?0:-1):(c[2]=0,c[5]=-1),p&&this.vK(c),this.fg(c,a)},o.MR=function(r,n,a){return o.dQ(r)?3:o.UP(r)?4:o.cY(r,n,a)?8:o.CP(r,n,a)?16:o.eP(r)?1:o.EU(r,n,a)?32:0},o.dQ=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.UP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.cY=function(r,n,a){return(n!=0||a!=0)&&((n!=2||a!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||n==1&&a==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||a!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},o.CP=function(r,n,a){return n>a?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":n==1&&a==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.eP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.EU=function(r,n,a){if(n==a){if(n!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},o.Jw=function(r,n,a){r=n.La(r);for(var c=n.Re;c!=-1;c=n.Rf(c))if((n.xd(c)&r)!=0){var p=n.Me(c);if(p==-1)n.nn(c,a,0);else{var d=p,g=0;do(n.dh(d)&r)!=0&&g++,d=n.jc(n.xa(d));while(d!=p);n.nn(c,a,g)}}},o.Zp=function(r){var n=""+r.charAt(0);return n+=r.charAt(3),n+=r.charAt(6),n+=r.charAt(1),n+=r.charAt(4),n+=r.charAt(7),n+=r.charAt(2),(n+=r.charAt(5))+r.charAt(8)},o.prototype.Yi=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.Za[r]=-2},o.vK=function(r){var n=r[1],a=r[2],c=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=n,r[6]=a,r[7]=c},o.prototype.bj=function(r){for(this.Xc=r,r=0;9>r;r++)this.Xc.charAt(r)!="*"?(this.ea[r]=!0,this.le++):this.ea[r]=!1},o.prototype.UJ=function(){for(var r=0;9>r;r++)this.ea[r]&&this.J[r]==-2&&(this.J[r]=-1,this.ea[r]=!1)},o.prototype.pc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.ea[r]=!1,this.le--,!0):this.Xc.charAt(r)!="T"&&this.Xc.charAt(r)!="F"?!(this.J[r]<this.Za[r])&&(this.ea[r]=!1,this.le--,!0):(this.ea[r]=!1,this.le--,!0))},o.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.xN=function(r,n,a){var c=!0;return this.ea[0]&&(this.CS(r,n,a),c=c&&this.pc(0)),this.ea[1]&&(this.sG(r,n,1),c=c&&this.pc(1)),this.ea[2]&&(this.tG(r,n,a,2),c=c&&this.pc(2)),this.ea[3]&&(this.sG(r,a,3),c=c&&this.pc(3)),this.ea[4]&&(this.BN(r,n,a),c=c&&this.pc(4)),this.ea[5]&&(this.eE(r,a,5),c=c&&this.pc(5)),this.ea[6]&&(this.tG(r,a,n,6),c=c&&this.pc(6)),this.ea[7]&&(this.eE(r,n,7),c=c&&this.pc(7)),c},o.prototype.Cu=function(r,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(n,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},o.prototype.Fr=function(r,n,a,c,p){n==-1&&c==-1||((a!="T"&&a!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&r.Ke()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(a=new h.l,r.A(a),this.J[n]=a.ca()==0&&a.R()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.ly=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(r,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},o.prototype.ZD=function(r){this.ly(r),o.vK(this.J)},o.prototype.Du=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var a=this.Xc.charAt(6);a=a=="T"||a=="F"||n.Qb()!=0,this.J[6]=a?1:0}this.ea[7]&&(n=h.pi.aq(n),this.J[7]=n?0:-1),this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},o.prototype.$D=function(r){if(this.ea[0]){var n=this.Xc.charAt(0);n=n=="T"||n=="F"||r.Qb()!=0,this.J[0]=n?1:0}this.ea[1]&&(r=h.pi.aq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Eu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(r,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},o.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.PG=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var a=this.Xc.charAt(2);a=a=="T"||a=="F"||r.Qb()!=0,this.J[2]=a?1:0}this.ea[5]&&(r=h.pi.aq(r),this.J[5]=r?0:-1),this.ea[6]&&(a=(a=this.Xc.charAt(6))=="T"||a=="F"||n.Qb()!=0,this.J[6]=a?1:0),this.ea[7]&&(n=h.pi.aq(n),this.J[7]=n?0:-1)},o.prototype.Vz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var n=this.Xc.charAt(2);n=n=="T"||n=="F"||r.Qb()!=0,this.J[2]=n?1:0}this.ea[5]&&(r=h.pi.aq(r),this.J[5]=r?0:-1),this.J[6]=0},o.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.yN=function(r,n,a){var c=!0;return this.ea[0]&&(this.DS(r,n),c=c&&this.pc(0)),this.ea[1]&&(this.zS(r,n,a,this.kh),c=c&&this.pc(1)),this.ea[2]&&(this.AS(r,n),c=c&&this.pc(2)),this.ea[3]&&(this.FN(r,n,a,this.kh),c=c&&this.pc(3)),this.ea[4]&&(this.CN(r,n,a,this.kh),c=c&&this.pc(4)),this.ea[5]&&(this.DN(r,n,a),c=c&&this.pc(5)),this.ea[6]&&(this.lQ(r,n),c=c&&this.pc(6)),this.ea[7]&&(this.kQ(r,n,a,this.kh),c=c&&this.pc(7)),c},o.prototype.mT=function(r,n,a){var c=!0;return this.ea[0]&&(this.GS(r,n,a,this.Yh,this.kh),c=c&&this.pc(0)),this.ea[1]&&(this.uG(r,n,a,this.Yh,this.kh,1),c=c&&this.pc(1)),this.ea[2]&&(this.vG(r,n,a,2),c=c&&this.pc(2)),this.ea[3]&&(this.uG(r,a,n,this.kh,this.Yh,3),c=c&&this.pc(3)),this.ea[4]&&(this.HN(r,n,a,this.Yh,this.kh),c=c&&this.pc(4)),this.ea[5]&&(this.fE(r,a,this.Yh,5),c=c&&this.pc(5)),this.ea[6]&&(this.vG(r,a,n,6),c=c&&this.pc(6)),this.ea[7]&&(this.fE(r,n,this.kh,7),c=c&&this.pc(7)),c},o.prototype.aE=function(r,n,a){var c=!0;return this.ea[0]&&(this.ES(r,n),c=c&&this.pc(0)),this.ea[2]&&(this.BS(r,n),c=c&&this.pc(2)),this.ea[3]&&(this.GN(r,n,a),c=c&&this.pc(3)),this.ea[5]&&(this.EN(r,n),c=c&&this.pc(5)),this.ea[6]&&(this.mQ(r,n),c=c&&this.pc(6)),c},o.prototype.QG=function(r,n,a){var c=!0;return this.ea[0]&&(this.HS(r,n,a,this.Yh),c=c&&this.pc(0)),this.ea[2]&&(this.FS(r,a),c=c&&this.pc(2)),this.ea[3]&&(this.JN(r,n,a,this.Yh),c=c&&this.pc(3)),this.ea[5]&&(this.IN(r,n,a,this.Yh),c=c&&this.pc(5)),this.ea[6]&&(this.nQ(r,n,a),c=c&&this.pc(6)),c},o.prototype.ZU=function(r,n,a){var c=!0;return this.ea[0]&&(this.IS(r,n,a),c=c&&this.pc(0)),this.ea[2]&&(this.wG(r,n,a,2),c=c&&this.pc(2)),this.ea[6]&&(this.wG(r,a,n,6),c=c&&this.pc(6)),c},o.prototype.CS=function(r,n,a){this.J[0]!=2&&((r=this.j.af(r))&n)!=0&&(r&a)!=0&&(this.J[0]=2)},o.prototype.sG=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.xa(r));(this.j.af(r)&n)!=0&&(c&n)!=0&&(this.J[a]=1)}},o.prototype.tG=function(r,n,a,c){this.J[c]!=2&&((r=this.j.af(r))&n)!=0&&(r&a)==0&&(this.J[c]=2)},o.prototype.BN=function(r,n,a){if(this.J[4]!=1){var c=this.j.dh(r);(c&n)!=0&&(c&a)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&((r=this.j.xd(this.j.uf(r)))&n)!=0&&(r&a)!=0&&(this.J[4]=0)}},o.prototype.eE=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.xa(r));(this.j.af(r)&n)==0&&(c&n)==0&&(this.J[a]=1)}},o.prototype.DS=function(r,n){if(this.J[0]!=1){var a=this.j.af(this.j.xa(r));(this.j.af(r)&n)!=0&&(a&n)!=0&&(this.J[0]=1)}},o.prototype.zS=function(r,n,a,c){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),d=this.j.xd(p);(d&n)==0&&(this.j.af(r)&n)!=0&&(r=this.j.ng(p,c),(d&a)!=0&&r%2!=0&&(this.J[1]=0))}},o.prototype.AS=function(r,n){this.J[2]!=2&&(this.j.dh(r)&n)!=0&&(this.J[2]=2)},o.prototype.FN=function(r,n,a,c){if(this.J[3]!=1){var p=this.j.dh(r);(p&n)!=0&&(p&a)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(p=this.j.uf(r),((r=this.j.xd(p))&n)!=0&&(n=this.j.ng(p,c),(r&a)!=0&&n%2==0&&(this.J[3]=0)))}},o.prototype.CN=function(r,n,a,c){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r);((r=this.j.xd(p))&n)!=0&&(n=this.j.ng(p,c),(r&a)!=0&&n%2!=0&&(this.J[4]=0))}},o.prototype.DN=function(r,n,a){this.J[5]!=1&&((r=this.j.dh(r))&n)!=0&&(r&a)==0&&(this.J[5]=1)},o.prototype.lQ=function(r,n){if(this.J[6]!=1){var a=this.j.af(this.j.xa(r));(this.j.af(r)&n)==0&&(a&n)==0&&(this.J[6]=1)}},o.prototype.kQ=function(r,n,a,c){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){var p=this.j.uf(r),d=this.j.xd(p);(d&n)==0&&(this.j.af(r)&n)==0&&(r=this.j.ng(p,c),(d&a)!=0&&r%2!=0&&(this.J[7]=0))}},o.prototype.GS=function(r,n,a,c,p){if(this.J[0]!=1){var d=this.j.dh(r);(d&n)!=0&&(d&a)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),((d=this.j.xd(r))&n)!=0&&(d&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.uG=function(r,n,a,c,p,d){if(this.J[d]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var g=this.j.xd(r);(g&n)!=0&&(g&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2!=0&&(this.J[d]=0))}},o.prototype.vG=function(r,n,a,c){this.J[c]!=1&&((r=this.j.dh(r))&n)!=0&&(r&a)==0&&(this.J[c]=1)},o.prototype.HN=function(r,n,a,c,p){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1){r=this.j.uf(r);var d=this.j.xd(r);(d&n)!=0&&(d&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.fE=function(r,n,a,c){this.J[c]!=0&&this.j.Ab(this.j.te(this.j.xa(r)),this.Ui)!=1&&(r=this.j.uf(r),(this.j.xd(r)&n)==0&&this.j.ng(r,a)%2!=0&&(this.J[c]=0))},o.prototype.ES=function(r,n){this.J[0]!=0&&(this.j.xd(r)&n)==0&&(this.j.hk(this.j.cz(r))&n)!=0&&(this.J[0]=0)},o.prototype.BS=function(r,n){this.J[2]!=2&&(this.j.xd(r)&n)!=0&&(this.J[2]=2)},o.prototype.GN=function(r,n,a){this.J[3]!=0&&((r=this.j.xd(r))&n)!=0&&(r&a)!=0&&(this.J[3]=0)},o.prototype.EN=function(r,n){this.J[5]!=1&&(this.j.xd(r)&n)!=0&&(this.J[5]=1)},o.prototype.mQ=function(r,n){this.J[6]!=0&&(this.j.xd(r)&n)==0&&(this.j.hk(this.j.cz(r))&n)==0&&(this.J[6]=0)},o.prototype.HS=function(r,n,a,c){if(this.J[0]!=0){var p=this.j.xd(r);(p&n)!=0&&(p&a)!=0&&this.j.ng(r,c)%2==0&&(this.J[0]=0)}},o.prototype.FS=function(r,n){this.J[2]!=1&&(this.j.Me(r)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.xd(r)&n)==0&&(this.J[2]=0))},o.prototype.JN=function(r,n,a,c){if(this.J[3]!=0){var p=this.j.xd(r);(p&n)!=0&&(p&a)!=0&&this.j.ng(r,c)%2!=0&&(this.J[3]=0)}},o.prototype.IN=function(r,n,a,c){if(this.J[5]!=0){var p=this.j.xd(r);(p&n)!=0&&(p&a)==0&&this.j.ng(r,c)%2!=0&&(this.J[5]=0)}},o.prototype.nQ=function(r,n,a){this.J[6]!=0&&((r=this.j.xd(r))&n)==0&&(r&a)!=0&&(this.J[6]=0)},o.prototype.IS=function(r,n,a){this.J[0]!=0&&((r=this.j.xd(r))&n)!=0&&(r&a)!=0&&(this.J[0]=0)},o.prototype.wG=function(r,n,a,c){this.J[c]!=0&&((r=this.j.xd(r))&n)!=0&&(r&a)==0&&(this.J[c]=0)},o.prototype.Bp=function(r,n){var a=!1;r=this.j.La(r),n=this.j.La(n),this.Ui=this.j.$g();for(var c=this.j.Re;c!=-1;c=this.j.Rf(c)){var p=this.j.Me(c);if(p==-1){if(this.Sm!=-1)switch(this.Sm){case 3:a=this.aE(c,r,n);break;case 4:a=this.QG(c,r,n);break;default:throw h.i.fa("internal error")}}else{var d=p;do{var g=d;if(this.j.Ab(g,this.Ui)!=1)do{switch(this.vw){case 0:a=this.xN(g,r,n);break;case 1:a=this.yN(g,r,n);break;case 2:a=this.mT(g,r,n);break;default:throw h.i.fa("internal error")}if(a)break;this.j.Kb(g,this.Ui,1),g=this.j.jc(g)}while(g!=d&&!a);if(a)break;d=this.j.jc(this.j.xa(g))}while(d!=p);if(a)break}}a||this.UJ(),this.j.Jg(this.Ui)},o.prototype.Gy=function(r,n){var a=!1;r=this.j.La(r),n=this.j.La(n);for(var c=this.j.Re;c!=-1;c=this.j.Rf(c)){switch(this.Sm){case 3:a=this.aE(c,r,n);break;case 4:a=this.QG(c,r,n);break;case 5:a=this.ZU(c,r,n);break;default:throw h.i.Qa()}if(a)break}a||this.UJ()},o.prototype.er=function(r,n){this.j.dr(r,n)},o.prototype.Wo=function(r,n,a){this.YP(r,n,a),this.er(r,a)},o.prototype.YP=function(r,n,a){for(h.Tk.V(r,n,a,!1),r.Gp(0,!0,!0),n=r.ld;n!=-1;n=r.ue(n))r.ic(n)==1736&&h.rn.V(r,n,-1,!1,a)},o.WE=function(r,n){var a=r.getType();return h.aa.yd(a)?((n=new h.Ta(r.description)).oc(r,!0),n):a==197?(a=new h.l,r.A(a),a.ca()<=n&&a.R()<=n?(n=new h.Sa(r.description),r.sf(n),n):a.ca()<=n||a.R()<=n?(n=new h.Ta(r.description),a=new h.Sa,r.Hf(0,a),n.nf(a),r.Hf(2,a),n.lineTo(a),n):((n=new h.Da(r.description)).ad(r,!1),n)):r},o})(),h.am=O})(B||(B={})),(function(h){var O=(function(){function o(r){this.Em=new h.ia(0),this.dw=new h.ia(0),this.wt=new h.h,this.xt=new h.h,this.g=r,this.Hs=-1}return o.prototype.bc=function(r){return this.g.bc(this.zz(r))},o.prototype.Bv=function(r){var n=this.iz(r);if(r=this.HF(r),this.g.Ma(n)==r){var a=n;n=r,r=a}return this.g.Gc(n,this.wt),this.g.Gc(r,this.xt),this.wt.y<this.xt.y},o.prototype.zz=function(r){var n=this.iz(r);return r=this.HF(r),this.g.U(n)==r?n:r},o.prototype.iz=function(r){return this.Em.get(r)},o.prototype.HF=function(r){return this.dw.get(r)},o.prototype.rF=function(r){this.Em.set(r,this.Hs),this.Hs=r},o.prototype.nI=function(r){if(this.Hs!=-1){var n=this.Hs;return this.Hs=this.Em.get(n),this.Em.set(n,r),this.dw.set(n,this.g.U(r)),n}return this.Em==null&&(this.Em=new h.ia(0),this.dw=new h.ia(0)),n=this.Em.size,this.Em.add(r),this.dw.add(this.g.U(r)),n},o.prototype.rz=function(r){return this.g.bd(this.iz(r))},o})();h.yY=O;var m=(function(){function o(r){this.Be=r,this.ie=new h.yb,this.Nm=new h.yb,this.CH=0,this.Ao=null,this.yA=-1}return o.prototype.compare=function(r,n,a){a=r.ja(a);var c=this.Be.hb;if(this.yA==n)var p=this.CH;else this.Ao=c.bc(n),this.Ao==null?((r=c.g).ed(c.zz(n),this.ie),this.Ao=this.ie,p=this.ie.Pe(this.Be.yh,0)):p=this.Ao.Pe(this.Be.yh,0),this.CH=p,this.yA=n;if((r=c.bc(a))==null){(r=c.g).ed(c.zz(a),this.Nm),r=this.Nm;var d=this.Nm.Pe(this.Be.yh,0)}else d=r.Pe(this.Be.yh,0);return p==d&&(n=c.Bv(n),a=c.Bv(a),(n=.5*((a=Math.min(n?this.Ao.la:this.Ao.na,a?r.la:r.na))+this.Be.yh))==this.Be.yh&&(n=a),p=this.Ao.Pe(n,0),d=r.Pe(n,0)),p<d?-1:p>d?1:0},o.prototype.reset=function(){this.yA=-1},o})(),u=(function(){function o(){this.Wm=this.Gl=null,this.fb=new h.Yj,this.fb.RP(),this.$d=new m(this),this.fb.Vo(this.$d)}return o.prototype.HQ=function(){var r=!1;if(this.fw&&(r=this.IQ()),this.g.da(this.X)==1){var n=this.g.Ob(this.X);return r=this.g.wz(n),this.g.PB(n,!0),0>r&&(r=this.g.Xa(n),this.g.pJ(r),this.g.Wg(n,this.g.Ma(r)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),n=this.g.Ob(this.X);n!=-1;n=this.g.Rb(n))this.g.gr(n,this.El,0),this.g.gr(n,this.wo,-1);n=new h.ia(0),this.yh=NaN;var a=new h.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var c=this.Gl.rc(this.Gl.je);c!=-1;c=this.Gl.lb(c)){var p=this.Gl.getData(c);if(this.g.Gc(p,a),a.y!=this.yh&&n.size!=0&&(r=this.ut(n)||r,this.$d.reset(),n.clear(!1)),n.add(p),this.yh=a.y,this.et==0)break}for(0<this.et&&(r=this.ut(n)||r,n.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),n=this.g.Ob(this.X);n!=-1;)if(this.g.sj(n,this.El)==3){for(this.g.PB(n,!0),a=n,n=this.g.sj(n,this.wo);n!=-1;)c=this.g.sj(n,this.wo),this.g.ZT(this.X,this.g.Rb(a),n),a=n,n=c;n=this.g.Rb(a)}else this.g.PB(n,!1),n=this.g.Rb(n);return this.g.CB(this.El),this.g.CB(this.wo),r},o.prototype.ut=function(r){return this.$V(r)},o.prototype.$V=function(r){var n=!1;this.hb==null&&(this.hb=new O(this.g)),this.Wm==null?(this.Wm=new h.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(r);for(var a=0,c=r.size;a<c;a++){var p=r.get(a);p!=-1&&this.oG(p,-1)}for(a=0;a<this.Wm.size&&0<this.et;a++)if(r=this.Wm.get(a),p=this.hb.rz(this.fb.ja(r)),c=-1,this.g.sj(p,this.El)==0){p=this.fb.we(r);for(var d,g=r;p!=-1;){var w=this.fb.ja(p),x=this.hb.rz(w),M=this.g.sj(x,this.El);if(M!=0){c=x;break}g=p,p=this.fb.we(p)}p==-1?(d=!0,p=g):(w=this.fb.ja(p),d=this.hb.Bv(w),p=this.fb.lb(p),d=!d);do{if(w=this.fb.ja(p),x=this.hb.rz(w),(M=this.g.sj(x,this.El))==0&&(d!=this.hb.Bv(w)&&(n=this.g.Xa(x),this.g.pJ(n),this.g.Wg(x,this.g.Ma(n)),n=!0),this.g.gr(x,this.El,d?3:2),d||(g=this.g.sj(c,this.wo),this.g.gr(c,this.wo,x),this.g.gr(x,this.wo,g)),this.et--,this.et==0))return n;c=x,g=p,p=this.fb.lb(p),d=!d}while(g!=r)}return n},o.prototype.ZV=function(r){for(var n=0,a=r.size;n<a;n++){var c=r.get(n),p=this.g.Pa(c,this.ro),d=this.g.Pa(c,this.Rs);if(p!=-1){var g=this.fb.ja(p);this.hb.rF(g),this.g.Ra(c,this.ro,-1)}d!=-1&&(g=this.fb.ja(d),this.hb.rF(g),this.g.Ra(c,this.Rs,-1)),g=-1,p!=-1&&d!=-1?(this.fb.vd(p,-1),this.fb.vd(d,-1),r.set(n,-1)):g=p!=-1?p:d,g!=-1&&(this.oG(c,g)||this.fb.vd(g,-1),r.set(n,-1))}},o.prototype.oG=function(r,n){var a=new h.h,c=new h.h;this.g.Gc(r,a);var p=this.g.U(r);this.g.Gc(p,c);var d=!1;if(a.y<c.y){d=!0;var g=this.hb.nI(r);if(n==-1)var w=this.fb.addElement(g,-1);else w=n,this.fb.Sj(w,g);(g=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,w):this.g.Ra(p,this.Rs,w),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(w)}return p=this.g.Ma(r),this.g.Gc(p,c),a.y<c.y&&(d=!0,g=this.hb.nI(p),n==-1?w=this.fb.addElement(g,-1):(w=n,this.fb.Sj(w,g)),(g=this.g.Pa(p,this.ro))==-1?this.g.Ra(p,this.ro,w):this.g.Ra(p,this.Rs,w),p=this.g.bd(r),this.g.sj(p,this.El)==0&&this.Wm.add(w)),d},o.V=function(r,n,a,c){var p=new o;return p.g=r,p.X=n,p.Gl=a,p.fw=c,p.HQ()},o.prototype.IQ=function(){var r=new h.ia(0),n=new h.ia(0),a=-1,c=-1,p=new h.h;p.Rc();for(var d=-1,g=-1,w=-1,x=new h.h,M=this.Gl.rc(this.Gl.je);M!=-1;M=this.Gl.lb(M)){var $=this.Gl.getData(M);this.g.Gc($,x);var I=this.g.bd($);p.qb(x)&&g==I?(c==-1&&(a=this.g.Ky(),c=this.g.Gd()),w==-1&&(w=n.size,this.g.Ra(d,c,w),n.add(1),this.g.sj(I,a)==-1&&(this.g.gr(I,a,d),r.add(I))),this.g.Ra($,c,w),n.bX(n.Fc()+1)):(w=-1,p.L(x)),d=$,g=I}if(r.size==0)return!1;for(p=new h.ia(0),d=new h.ia(0),g=0,w=r.size;g<w;g++){I=r.get(g);var R=this.g.sj(I,a);for($=this.g.Pa(R,c),p.clear(!1),d.clear(!1),p.add(R),d.add($),$=this.g.U(R);$!=R;$=this.g.U($)){var N=$;if((x=this.g.Pa(N,c))!=-1)if(d.size==0)d.add(x),p.add(N);else if(d.Fc()==x){M=p.Fc();var j=this.g.U(M);R=this.g.U(N),this.g.Bc(M,R),this.g.Cc(R,M),this.g.Bc(N,j),this.g.Cc(j,N),N=[!1],j=this.g.nG(this.X,j,this.g.Xa(I),N),this.g.Ra($,c,-1),N[0]&&this.g.Jf(I,R),$=this.g.Ja(I),$-=R=this.g.Ja(j),this.g.Vj(I,$),n.set(x,n.get(x)-1),n.get(x)==1&&(n.set(x,0),d.If(),p.If()),$=R=M}else p.add($),d.add(x)}}return this.g.CB(a),this.g.Td(c),!0},o})();h.WL=u})(B||(B={})),(function(h){var O=(function(){function m(){}return m.prototype.ig=function(){this.PA=this.sb=null},m.prototype.get=function(){return this.PA},m.prototype.set=function(u){if(this.PA=u,u!=null)throw u.getType()==322&&(this.sb=u),h.i.Qa()},m.prototype.create=function(u){if(u!=322)throw h.i.fa("Not Implemented");this.Or()},m.prototype.Or=function(){this.sb==null&&(this.sb=new h.yb),this.PA=this.sb},m})();h.ig=O})(B||(B={})),(function(h){(h=h.XL||(h.XL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"})(B||(B={})),(function(h){var O=function(u){this.$i=u,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},m=(function(){function u(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new h.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return u.prototype.wB=function(o){if(o!=null){for(var r=0,n=o.length;r<n;r++)this.rW(o[r]);o.length=0}},u.prototype.rW=function(o){o.$i=null,this.Iq.push(o)},u.prototype.Ow=function(o){if(this.Iq.length===0)var r=new O(o);else(r=this.Iq[this.Iq.length-1]).$i=o,--this.Iq.length;return r},u.prototype.SR=function(o,r){return o==0?this.$s[r]:this.yw[r]},u.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new h.ig);var o=this.MA[this.Cw];return this.Cw++,o},u.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},u.prototype.Oo=function(o){this.mo.push(this.Ow(o))},u.prototype.ol=function(o){return o==0?this.$s.length:this.yw.length},u.prototype.Vp=function(o,r){return this.SR(o,r).$i},u.prototype.Ea=function(o,r){if(this.mo.length!=2)throw h.i.Qa();this.qa=o;var n=h.lc.ox(.01*o),a=!1,c=this.mo[0],p=this.mo[1];if(r||5&c.$i.zr(p.$i,o,!0)){if(c.$i.getType()==322){var d=c.$i;if(p.$i.getType()==322){r=p.$i;var g=h.yb.Zx(d,r,null,this.Fq,this.Bk,o);if(g==0)throw h.yb.Zx(d,r,null,this.Fq,this.Bk,o),h.i.Qa();o=Array(9),h.O.$u(o,null);for(var w=0;w<g;w++){var x=this.Fq[w],M=this.Bk[w],$=c.sB,I=1;x==0?($=c.tB,I=c.rC):x==1&&($=c.rB,I=c.qC);var R=p.sB,N=1;M==0?(R=p.tB,N=p.rC):M==1&&(R=p.rB,N=p.qC);var j=new h.h;$==R?($=new h.h,d.hc(x,$),x=new h.h,r.hc(M,x),N/=M=I+N,h.lc.OG($,x,N,j),h.h.yc(j,$)+h.h.yc(j,x)>n&&(a=!0)):$>R?(d.hc(x,j),x=new h.h,r.hc(M,x),h.h.yc(j,x)>n&&(a=!0)):(r.hc(M,j),$=new h.h,d.hc(x,$),h.h.yc(j,$)>n&&(a=!0)),o[w]=j}for(c=0,p=-1,w=0;w<=g;w++)(N=w<g?this.Fq[w]:1)!=c&&(n=this.aB(),d.ah(c,N,n),p!=-1&&n.get().Dc(o[p]),w!=g&&n.get().Qc(o[w]),c=N,this.$s.push(this.Ow(n.get()))),p=w;for(d=[0,0,0,0,0,0,0,0,0],w=0;w<g;w++)d[w]=w;for(1<g&&this.Bk[0]>this.Bk[1]&&(N=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=N,w=d[0],d[0]=d[1],d[1]=w),c=0,p=-1,w=0;w<=g;w++)(N=w<g?this.Bk[w]:1)!=c&&(n=this.aB(),r.ah(c,N,n),p!=-1&&(c=d[p],n.get().Dc(o[c])),w!=g&&(c=d[w],n.get().Qc(o[c])),c=N,this.yw.push(this.Ow(n.get()))),p=w;return a}}throw h.i.Qa()}return!1},u.prototype.Kz=function(o,r,n){if(r.copyTo(this.Bf),this.mo.length!=1)throw h.i.Qa();this.qa=o;var a=this.mo[0];if(n||a.$i.ru(r.D(),o,!0)){if(a.$i.getType()!=322)throw h.i.Qa();var c=(o=a.$i).fe(r.D(),!1);this.Fq[0]=c;var p=a.sB;for(n=1,c==0?(p=a.tB,n=a.rC):c==1&&(p=a.rB,n=a.qC),a=new h.h,p==0?(p=new h.h,o.hc(c,p),r=r.D(),h.lc.OG(p,r,1/(n+1),a)):0<p?(a=new h.h,o.hc(c,a)):a=r.D(),n=0,c=-1,p=0;1>=p;p++){if((r=1>p?this.Fq[p]:1)!=n){var d=this.aB();o.ah(n,r,d),c!=-1&&d.get().Dc(a),p!=1&&d.get().Qc(a),n=r,this.$s.push(this.Ow(d.get()))}c=p}this.Bf.Cb(a)}},u})();h.TC=m})(B||(B={})),(function(h){var O=(function(){function m(u){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=u,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new h.h}return m.prototype.BW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.zf=u.zf,this.Jd=u.Jd,this.gb=u.gb,this.Cl=u.Cl,this.ag=u.ag,this.zm=u.zm,this.rk=null},m.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw h.i.ce();this.Jd++}return this.rk},m.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw h.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},m.prototype.DW=function(){this.zf=-1,this.Jd=0},m.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},m.prototype.Vb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.da()){var r=this.IM();if(u>=r&&u<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=u-r)}o=0<=o&&o<this.ib.da()&&u>=this.ib.Ba(o)&&u<this.ib.Vc(o)?o:this.ib.sz(u),this.Cl=o+1,this.gb=o,this.zf=-1,this.Jd=u-this.ib.Ba(o),this.ag=this.Wx(o),this.ib.Ba(this.gb),this.ib.dc(this.gb)},m.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},m.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},m.prototype.Wx=function(u){if(this.ib.Ac())return 0;var o=1;return this.ib.dc(u)&&(o=0),this.ib.Ja(u)-o},m.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},m.prototype.JB=function(){this.zm=!0},m.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},m.prototype.IM=function(){return this.ib.Ba(this.gb)},m.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},m.prototype.vm=function(){return this.zf==0},m.prototype.Qn=function(){return this.zf==this.ag-1},m.prototype.Ha=function(){return this.Jd<this.ag},m.prototype.Ez=function(){return 0<this.Jd},m.prototype.Of=function(){var u=new m(this.ib);return u.zf=this.zf,u.Jd=this.Jd,u.ag=this.ag,u.gb=this.gb,u.Cl=this.Cl,u.ib=this.ib,u.zm=this.zm,u},m.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw h.i.ce();this.zf=this.Jd;var u=this.wb();this.ib.mc();var o=this.ib.Ve,r=1;switch(o!=null&&(r=7&o.read(u)),o=this.ib.description,r){case 1:this.sb==null&&(this.sb=new h.yb),this.rk=this.sb;break;case 2:throw h.i.fa("internal error");default:throw h.i.Qa()}this.rk.Nf(o),r=this.ik(),this.ib.Gc(u,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(r,this.Ds),this.rk.Qc(this.Ds);for(var n=1,a=o.Aa;n<a;n++)for(var c=o.kd(n),p=h.ra.Va(c),d=0;d<p;d++){var g=this.ib.Uc(c,u,d);this.rk.YB(c,d,g),g=this.ib.Uc(c,r,d),this.rk.OB(c,d,g)}},m.prototype.$S=function(){return this.gb==this.ib.da()-1},m.prototype.Pn=function(){var u=this.ib.VR();return u!=null&&(7&u.read(this.zf))!=1},m})();h.YL=O})(B||(B={})),(function(h){var O=(function(){function m(u){u instanceof h.aa?(this.xH=u,this.ya=-1,this.Ei=1):(this.vT=u.slice(0),this.ya=-1,this.Ei=u.length)}return m.prototype.La=function(){return this.ya},m.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},m.prototype.qe=function(){},m})();h.Zc=O})(B||(B={})),(function(h){var O=function(){this.next=null},m=(function(){function u(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return u.prototype.AX=function(o,r,n){this.oi=o,this.pl=r,this.Jh=this.Wl=null,this.Tq=0,this.vy=n,this.gn==null&&(this.gn=h.O.lg(384,0)),this.nK()},u.prototype.R=function(){return this.oi},u.prototype.ca=function(){return this.pl},u.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},u.prototype.nK=function(){if(0<this.Tq){for(var o=0;o<this.pl;o++){for(var r=this.Wl[o];r!=null;){var n=r;r=r.next,n.next=null}this.Wl[o]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},u.prototype.iJ=function(o){for(this.kF=o==u.Cx,o=this.Lw;o<=this.Kw;o++)this.sN(),this.lN(o),this.ZP();this.nK()},u.prototype.jy=function(o,r,n,a){if(r!=a){var c=1;if(r>a&&(c=o,o=n,n=c,c=r,r=a,a=c,c=-1),!(0>a||r>=this.pl)){0>o&&0>n?n=o=-1:o>=this.oi&&n>=this.oi&&(n=o=this.oi);var p=(n-o)/(a-r);a>this.pl&&(n=p*((a=this.pl)-r)+o),0>r&&(o=p*(0-r)+o,r=0);var d=Math.max(this.oi+1,8388607);-8388607>o?(r=(0-o)/p+r,o=0):o>d&&(r=(this.oi-o)/p+r,o=this.oi),-8388607>n?a=(0-o)/p+r:n>d&&(a=(this.oi-o)/p+r),(r=h.O.truncate(r))!=(a=h.O.truncate(a))&&((n=new O).x=h.O.truncate(4294967296*o),n.y=r,n.H=a,n.WP=h.O.truncate(4294967296*p),n.dir=c,this.Wl==null&&(this.Wl=h.O.lg(this.pl,null)),n.next=this.Wl[n.y],this.Wl[n.y]=n,n.y<this.Lw&&(this.Lw=n.y),n.H>this.Kw&&(this.Kw=n.H),this.Tq++)}}},u.prototype.sN=function(){if(this.Jh!=null){for(var o=!1,r=null,n=this.Jh;n!=null;)if(n.y++,n.y==n.H){var a=n;n=n.next,r!=null?r.next=n:this.Jh=n,a.next=null}else n.x+=n.WP,r!=null&&r.x>n.x&&(o=!0),r=n,n=n.next;o&&(this.Jh=this.fK(this.Jh))}},u.prototype.lN=function(o){if(!(o>=this.pl)){var r=this.Wl[o];if(r!=null){this.Wl[o]=null,r=this.fK(r),this.Tq-=this.gK,o=this.Jh;for(var n=!0,a=r,c=null;o!=null&&a!=null;)o.x>a.x?(n&&(this.Jh=a),n=a.next,a.next=o,c!=null&&(c.next=a),c=a,a=n):(n=o.next,o.next=a,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Jh==null&&(this.Jh=r)}}},u.eK=function(o,r){return 0>o?0:o>r?r:o},u.prototype.ZP=function(){if(this.Jh!=null){for(var o=0,r=this.Jh,n=h.O.truncate(h.O.XG(r.x)),a=r.next;a!=null;a=a.next)if(o=this.kF?1^o:o+a.dir,a.x>r.x){var c=h.O.truncate(h.O.XG(a.x));o!=0&&(r=u.eK(n,this.oi),(n=u.eK(c,this.oi))>r&&r<this.oi&&(this.gn[this.Ol++]=r,this.gn[this.Ol++]=n,this.gn[this.Ol++]=a.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),r=a,n=c}}},u.prototype.fK=function(o){for(var r=0,n=o;n!=null;n=n.next)r++;if(this.gK=r,r==1)return o;this.Kf==null?this.Kf=h.O.lg(Math.max(r,16),null):this.Kf.length<r&&(this.Kf=h.O.lg(Math.max(r,2*this.Kf.length),null));var a=0;for(n=o;n!=null;n=n.next)this.Kf[a++]=n;for(r==2?this.Kf[0].x>this.Kf[1].x&&(o=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=o):u.AN(this.Kf,r,(function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0})),o=this.Kf[0],this.Kf[0]=null,n=o,a=1;a<r;a++)n.next=this.Kf[a],n=this.Kf[a],this.Kf[a]=null;return n.next=null,o},u.AN=function(o,r,n){if(r==o.length)o.sort(n);else{var a=o.slice(0,0),c=o.slice(r);r=o.slice(0,r).sort(n),o.length=0,o.push.apply(o,a.concat(r).concat(c))}},u.Cx=0,u})();h.Px=m})(B||(B={})),(function(h){var O=(function(){function m(){}return m.prototype.ui=function(u,o){var r=this.g.Pa(u,this.Pq);if(this.Dl==r&&(this.Dl=this.oe.lb(this.Dl)),this.ho==r&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,r),this.bk(u),o&&(o=this.g.bd(u))!=-1&&this.g.Xa(o)==u){var n=this.g.U(u);if(n!=u){if((r=this.g.bd(n))==o)return void this.g.Jf(o,n);if((n=this.g.Ma(u))!=u&&(r=this.g.bd(n))==o)return void this.g.Jf(o,n)}this.g.Jf(o,-1),this.g.Wg(o,-1)}},m.prototype.pD=function(){for(var u=!1,o=new h.h;;){this.Wh==null?(this.Wh=new h.ia(0),this.zs=new h.ia(0),this.xe=new h.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var r=this.ho,n=0,a=!0;r!=this.Dl;){var c=this.oe.getData(r),p=new h.h;this.g.Gc(c,p),a&&(this.g.Gc(c,o),a=!1),p=this.g.Ma(c);var d=this.g.U(c);this.g.Pa(p,this.zg)!=-559038737&&(this.Wh.add(p),this.g.Ra(p,this.zg,-559038737),this.zs.add(c),this.xe.add(n++)),this.g.Pa(d,this.zg)!=-559038737&&(this.Wh.add(d),this.g.Ra(d,this.zg,-559038737),this.zs.add(c),this.xe.add(n++)),r=this.oe.lb(r)}if(2>this.Wh.size)break;var g=this;for(this.xe.Vd(0,this.xe.size,(function(w,x){return g.pM(w,x)})),r=0,n=this.xe.size;r<n;r++)a=this.xe.get(r),a=this.Wh.get(a),this.g.Ra(a,this.zg,r),p=new h.h,this.g.Gc(a,p);for(p=this.TM(o),r=0,n=this.xe.size;r<n;r++)(a=this.xe.get(r))!=-1&&(a=this.Wh.get(a),this.g.Ra(a,this.zg,-1));if(!p)break;u=!0}return u},m.prototype.TM=function(u){for(var o=!1,r=!0;r;){r=!1;var n=0;this.xe.get(n)==-1&&(n=this.cm(n));for(var a=this.cm(n),c=0,p=this.xe.size;c<p&&n!=-1&&a!=-1&&n!=a;c++){var d=this.xe.get(n);a=this.xe.get(a),d=this.Wh.get(d),a=this.Wh.get(a);var g=this.g.U(d);this.g.Dv(g,u)||(g=this.g.Ma(d));var w=this.g.U(a);this.g.Dv(w,u)||(w=this.g.Ma(a));var x=this.pu(g,d),M=this.pu(w,a),$=x?this.g.Ma(g):this.g.U(g),I=M?this.g.Ma(w):this.g.U(w),R=!1;(this.sp(g)||this.sp(w)||this.sp(d)||this.sp(a)||this.sp($)||this.sp(I))&&(R=!0),!R&&this.g.fq(d,a)&&(R=!0,this.tD(x,M,g,d,w,a)),!R&&this.g.fq($,I)&&(R=!0,this.tD(!x,!M,g,$,w,I)),R&&(o=!0),r=r||R,n=this.cm(n),a=this.cm(n)}}if(!o)for(n=0,this.xe.get(n)==-1&&(n=this.cm(n)),a=this.cm(n),c=0,p=this.xe.size;c<p&&n!=-1&&a!=-1&&n!=a;c++)d=this.xe.get(n),a=this.xe.get(a),d=this.Wh.get(d),a=this.Wh.get(a),g=this.g.U(d),this.g.Dv(g,u)||(g=this.g.Ma(d)),w=this.g.U(a),this.g.Dv(w,u)||(w=this.g.Ma(a)),x=this.pu(g,d),M=this.pu(w,a),$=x?this.g.Ma(g):this.g.U(g),I=M?this.g.Ma(w):this.g.U(w),this.DM(x,M,d,g,$,a,w,I)&&(o=!0),n=this.cm(n),a=this.cm(n);return o},m.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new h.Fg().MU(this.fw,this.g,this.X,this.nd);var u=!1,o=!0;this.zg=this.Pq=-1;var r=this.g.I(this.X),n=new h.ia(0);n.Jb(r);for(var a=this.g.Ob(this.X);a!=-1;a=this.g.Rb(a))for(var c=this.g.Xa(a),p=0,d=this.g.Ja(a);p<d;p++)n.add(c),c=this.g.U(c);var g=this.g.td.o,w=this.g.td.stride;this.g.vb.mc();var x=this.g.vb.za[0].o;for(n.Vd(0,r,(function($,I){var R=g[w*$],N=g[w*I],j=x[2*R];R=x[2*R+1];var z=x[2*N];return(j=R<(N=x[2*N+1])?-1:R>N?1:j<z?-1:j>z?1:0)==0&&(j=($=g[w*$+3])<(I=g[w*I+3])?-1:$==I?0:1),j})),this.Pq=this.g.Gd(),this.oe=new h.jp,this.RA=this.oe.Ph(0),this.oe.fn(r),a=0;a<r;a++)c=n.get(a),p=this.oe.addElement(this.RA,c),this.g.Ra(c,this.Pq,p);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(u=!0);o;){o=!1,r=0,n=!1;do{n=!1,this.ho=-1,d=0,a=new h.h,p=new h.h;for(var M=this.oe.rc(this.RA);M!=-1;)c=this.oe.getData(M),this.ho!=-1?(this.g.Gc(c,p),a.qb(p)?d++:(a.L(p),this.Dl=M,0<d&&(c=this.pD())&&(n=!0,this.Dl!=-1&&(c=this.oe.getData(this.Dl),this.g.Gc(c,a))),this.ho=M=this.Dl,d=0)):(this.ho=M,this.g.Gc(this.oe.getData(M),a),d=0),M!=-1&&(M=this.oe.lb(M));if(this.Dl=-1,0<d&&(c=this.pD())&&(n=!0),10<r++)throw h.i.Qa();n&&this.GM(),this.cD()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Td(this.Pq),this.g.Td(this.zg),h.WL.V(this.g,this.X,this.oe,this.fw)||u},m.prototype.pu=function(u,o){return this.g.U(o)!=u},m.prototype.DM=function(u,o,r,n,a,c,p,d){if(n==p)return this.bk(r),this.bk(c),!1;var g=this.g.Pa(r,this.zg),w=this.g.Pa(a,this.zg),x=this.g.Pa(c,this.zg),M=this.g.Pa(d,this.zg),$=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,$[0]=g,r[1]=0,$[1]=w,r[2]=1,$[2]=x,r[3]=1,$[3]=M,g=1;4>g;g++){for(w=$[g],x=r[g],M=g-1;0<=M&&$[M]>w;)$[M+1]=$[M],r[M+1]=r[M],M--;$[M+1]=w,r[M+1]=x}return $=0,r[0]!=0&&($|=1),r[1]!=0&&($|=2),r[2]!=0&&($|=4),r[3]!=0&&($|=8),($==5||$==10)&&(u==o?u?(this.g.Bc(d,n),this.g.Cc(n,d),this.g.Bc(a,p),this.g.Cc(p,a)):(this.g.Cc(d,n),this.g.Bc(n,d),this.g.Cc(a,p),this.g.Bc(p,a)):u?(this.g.Cc(n,c),this.g.Bc(c,n),this.g.Cc(p,a),this.g.Bc(a,p)):(this.g.Bc(n,c),this.g.Cc(c,n),this.g.Bc(p,a),this.g.Cc(a,p)),!0)},m.prototype.tD=function(u,o,r,n,a,c){this.MY?this.VM():this.UM(u,o,r,n,a,c)},m.prototype.VM=function(){throw h.i.fa("not implemented.")},m.prototype.UM=function(u,o,r,n,a,c){if(u!=o)u?(this.g.Bc(r,a),this.g.Cc(a,r),this.g.Bc(c,n),this.g.Cc(n,c),this.vn(a,r),this.ui(a,!0),this.g.mi(a,!0),this.bk(r),this.vn(c,n),this.ui(c,!0),this.g.mi(c,!1)):(this.g.Bc(a,r),this.g.Cc(r,a),this.g.Bc(n,c),this.g.Cc(c,n),this.vn(a,r),this.ui(a,!0),this.g.mi(a,!1),this.bk(r),this.vn(c,n),this.ui(c,!0),this.g.mi(c,!0)),this.bk(n);else{var p=u?r:n,d=o?a:c;for(u=u?n:r,o=o?c:a,a=!1,this.g.Bc(p,d),this.g.Bc(d,p),this.g.Cc(u,o),this.g.Cc(o,u),c=o;c!=d;)r=this.g.Ma(c),n=this.g.U(c),this.g.Cc(c,n),this.g.Bc(c,r),a=a||c==p,c=n;a||(r=this.g.Ma(d),n=this.g.U(d),this.g.Cc(d,n),this.g.Bc(d,r)),this.vn(d,p),this.ui(d,!0),this.g.mi(d,!1),this.bk(p),this.vn(o,u),this.ui(o,!0),this.g.mi(o,!1),this.bk(u)}},m.prototype.cD=function(){for(var u=!1,o=this.g.Ob(this.X);o!=-1;){for(var r=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a&&1<a;){var c=this.g.Ma(r),p=this.g.U(r);this.g.fq(c,p)?(u=!0,this.ui(r,!1),this.g.pd(r,!0),this.ui(p,!1),this.g.pd(p,!0),r=c,n=0,a=this.g.Ja(o)):(r=p,n++)}if(2>this.g.Ja(o)){for(u=this.g.Xa(o),n=0,a=this.g.Ja(o);n<a;n++)this.ui(u,!1),u=this.g.U(u);o=this.g.Zq(o),u=!0}else o=this.g.Rb(o)}return u},m.prototype.sp=function(u){for(var o=!1;;){var r=this.g.U(u),n=this.g.Ma(u);if(r==u)return this.ui(u,!0),this.g.mi(u,!1),!0;if(!this.g.fq(r,n)||(o=!0,this.bk(n),this.bk(r),this.ui(u,!0),this.g.mi(u,!1),this.vn(r,n),this.ui(r,!0),this.g.mi(r,!0),r==n))break;u=n}return o},m.prototype.GM=function(){for(var u=0,o=this.oe.rc(this.oe.je);o!=-1;o=this.oe.lb(o)){var r=this.oe.getData(o);this.g.aj(r,-1)}for(var n=0,a=this.g.Ob(this.X);a!=-1;)if((o=this.g.Xa(a))==-1||this.g.bd(o)!=-1)r=a,a=this.g.Rb(a),this.g.$q(r);else{this.g.aj(o,a);var c=1;for(r=this.g.U(o);r!=o;r=this.g.U(r))this.g.aj(r,a),c++;this.g.cp(a,!1),this.g.Vj(a,c),this.g.Wg(a,this.g.Ma(o)),n+=c,u++,a=this.g.Rb(a)}for(o=this.oe.rc(this.oe.je);o!=-1;o=this.oe.lb(o))r=this.oe.getData(o),this.g.bd(r)==-1&&(a=this.g.nG(this.X,r,r,null),n+=this.g.Ja(a),u++);for(this.g.Rl(this.X,u),this.g.Tj(this.X,n),u=0,n=this.g.ld;n!=-1;n=this.g.ue(n))u+=this.g.I(n);this.g.bC(u)},m.prototype.cm=function(u){for(var o=0,r=this.xe.size-1;o<r;o++)if(u=(u+1)%this.xe.size,this.xe.get(u)!=-1)return u;return-1},m.prototype.vn=function(u,o){var r=this.g.Pa(o,this.Pq),n=this.g.Pa(o,this.zg);this.g.lC(u,o),this.g.Ra(o,this.Pq,r),this.g.Ra(o,this.zg,n)},m.prototype.bk=function(u){var o=this.g.Pa(u,this.zg);o!=-1&&(this.xe.set(o,-1),this.g.Ra(u,this.zg,-1))},m.V=function(u,o,r,n,a){var c=new m;return c.g=u,c.X=o,c.xA=r,c.fw=n,c.nd=a,c.XM()},m.prototype.pM=function(u,o){var r=this.Wh.get(u),n=new h.h;this.g.Gc(r,n),r=new h.h;var a=this.Wh.get(o);return this.g.Gc(a,r),n.qb(r)?0:(a=this.zs.get(u),u=new h.h,this.g.Gc(a,u),a=this.zs.get(o),o=new h.h,this.g.Gc(a,o),(a=new h.h).uc(n,u),(n=new h.h).uc(r,o),h.h.nu(a,n))},m})();h.rn=O})(B||(B={})),(function(h){var O;(O=h.$L||(h.$L={}))[O.Local=0]="Local",O[O.Geographic=1]="Geographic",O[O.Projected=2]="Projected",O[O.Image=3]="Image",O[O.Unknown=4]="Unknown",(function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"})(h.TL||(h.TL={}));var m=(function(){function u(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return u.prototype.Ec=function(){return this.dg},u.prototype.VF=function(){return 1},u.prototype.VW=function(o){this.mA=o},u.prototype.Xd=function(){if(this.mA!==null)return this.mA;var o=.001;return this.dg!=0?o=h.wr.CQ(this.dg):this.wh!=null&&(o=h.XC.DQ(this.wh)),o},u.prototype.Bz=function(){return this.wh},u.prototype.Hd=function(){return this.dg!=0?h.Tc.Zg(h.wr.Sy(this.dg)):this.wh!=null?h.XC.EQ(this.wh):void 0},u.Sb=function(o){if(o.dg!=0){if(h.wr.ZS(o.dg)===!0)return 1;if(h.wr.aT(o.dg)===!0)return 2}return 4},u.prototype.$r=function(){var o=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=h.wr.FK(o),this.Ho!=-1?this.Ho:o)},u.create=function(o){if(0>=o)throw h.i.N("Invalid or unsupported wkid: "+o);var r=new u;return r.dg=o,r},u.qP=function(o){if(o==null||o.length==0)throw h.i.N("Cannot create SpatialReference from null or empty text.");var r=new u;return r.wh=o,r},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.dg==o.dg&&(this.dg!=0||this.wh===o.wh)},u.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},u.prototype.cc=function(){if(this.pp!=="")return this.pp;var o=this.toString();if(Array.prototype.reduce)return this.pp="S"+o.split("").reduce((function(a,c){return(a=(a<<5)-a+c.charCodeAt(0))&a}),0);var r=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)r=(r<<5)-r+o.charCodeAt(n),r&=r;return this.pp="S"+r},u.prototype.Kn=function(){return this.Xd(0)},u.prototype.fh=function(){return this.su!==null?this.su:this.su=h.gu.yP(this)},u.ZN=2147483645,u.$N=9007199254740990,u})();h.Eg=m})(B||(B={})),(function(h){var O=(function(m){function u(){var o=m!==null&&m.apply(this,arguments)||this;return o.Ji=null,o.ST=null,o.Hq=new h.ZL,o.Eo=null,o.jw=null,o}return ce(u,m),u.yP=function(o){var r=new u;if(r.dg=o.dg,r.Ho=o.Ho,r.ZH=o.ZH,r.wh=o.wh,r.wh!==""&&r.wh!==null){o=u.kM(r.wh);var n=u.iM(r.wh);r.Hq.Xx(o,n,h.hu.Integer64),r.by(o),r.gy(n),r.dg=o.$r()}else o=u.jM(r.dg),r.by(o),r.gy(null),r.Hq.Xx(o,null,h.hu.Integer64);return r},u.prototype.Xd=function(o){return this.Hq.Kn(o)},u.iM=function(o){if(0>=o.length)throw h.i.N();var r=null;try{r=h.NC.fromString(o)}catch{r=null}return r==null?null:u.bD(r,!0)},u.prototype.by=function(o){this.Kd=o,this.Eo=this.Kd.Hd()},u.prototype.gy=function(o){this.KH=o,this.ST=this.KH!=null?this.KH.Eo:null},u.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},u.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},u.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},u.prototype.pm=function(){return this.Kd.pm()},u.prototype.bf=function(){return this.Kd.bf()},u.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},u.prototype.Up=function(){return this.Kd.Up()},u.prototype.Wr=function(){return this.Kd.Wr()},u.prototype.kk=function(){return this.Kd.kk()},u.prototype.kS=function(o){return h.OC.Py(this.Kd,o.Kd)},u.prototype.ml=function(){return this.Kd.ml()},u.prototype.Vr=function(){return this.Kd.Vr()},u.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},u.prototype.gh=function(){if(!this.Wc())throw h.i.N("!isPannable()");var o=new h.l;return this.Kd.gh(o),o},u.prototype.Oe=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.so},u.prototype.HR=function(){if(!this.Wc())throw h.i.N("!isPannable()");var o=new h.l;return this.Kd.GR(o),o},u.prototype.pv=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.pv()},u.prototype.ov=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.ov()},u.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},u.prototype.PQ=function(){return this.Kd.hv()},u.prototype.Qp=function(){return this.Eo.getUnitFactor()},u.prototype.vz=function(o){return this.Hq.vz(o)},u.prototype.sc=function(){var o=this.Sb();if(o==1)return this;if(o==3)return this.Ji.fk().sc();if(o==0||o===4)throw h.i.fa("invalid call");if(this.jw!==null)return this.jw;if((o=this.eh().getGeogcs())==null)throw h.i.Qa();return this.jw=u.bF(o,this.Hq.VF())},u.bF=function(o,r){if(o==null)throw h.i.N("null pointer.");var n=new u;return o=u.mu(o,!0),n.Hq.Xx(o,null,r),n.by(o),n.gy(null),n.dg=o.$r(),n},u.prototype.Sb=function(){var o=this.eh();if(o!=null)switch(o.getType()){case h.Sc.PE_TYPE_GEOGCS:return 1;case h.Sc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.hv=function(){return this.Kd.hv()},u.mu=function(o,r){var n=o.getCode();if(0>=n&&0<(n=h.pf.getCode(o))){if((o=h.pf.coordsys(n))==null)throw h.i.N("Text to wkid mapping had failed: "+n);return u.mu(o,r)}if(r&&0<n&&(r=u.qx[n]))return r;r=h.zb.xv(o,n,!1);var a=u.lK[r];return a||(o=0>=n?o:h.pf.coordsys(n),o=new h.OC(o),u.lK[r]=o,0<n&&(u.qx[n]=o),o)},u.jM=function(o){if(0>=o)throw h.i.N("Invalid or unsupported wkid: "+o);var r=u.qx[o];if(r!=null)return r;if((r=h.pf.coordsys(o))==null)throw h.i.N("Invalid or unsupported wkid: "+o);return(r=u.mu(r,!1)).$r()!=o&&(u.qx[o]=r),r},u.kM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.N("Cannot create SpatialReference from null or empty text.");var r=null;try{r=h.pf.fromString(h.Sc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.N("Cannot create SpatialReference from text. "+n.message)}if(r===null)throw h.i.N("Cannot create SpatialReference from text. ");return u.mu(r,!0)},u.bD=function(o,r){var n,a=o.getCode();if(0>=a&&0<(a=h.pf.getCode(o))){if((a=h.pf.vertcs(a))===null)throw h.i.N();return u.bD(a,r)}if(r&&0<a&&(r=u.kK[a])||(o=h.zb.xv(o,a,!1),r=u.mK[o]))return r;if(0>=a||(n=h.pf.vertcs(a)),n===null)throw h.i.N();return n=new h.PL(n),u.mK[o]=n,0<a&&(u.kK[a]=n),n},u.sI=function(o,r){if(r===null||r.B())return null;var n=new h.l;if(r!==null&&o.Sb()!=1){var a=o.sc(),c=a.eh();o=h.vr.Nr(o,a,null,null),(r=h.Hx.local().V(r,o,null)).A(n)}else c=o.eh(),r.A(n);return r=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.LC(n.v,n.G,n.C,n.H,r,c)},u.lD=function(o){var r={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var a=o[n],c={LY:!1,ZY:"",YY:-1,geogtran:null};a.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=a.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=a.getGeogtran().toString(),r.steps.push(c)}return r},u.XR=function(o,r,n,a){return n===void 0&&(n=null),n=u.sI(a,n),o=h.lp.getGTlist(o.eh(),r.eh(),2,h.lp.PE_GTLIST_OPTS_COMMON,n,1),r=null,o&&0<o.length&&(r=this.lD(o[0]),h.Mx.destroy(o)),n!==null&&n.destroy(),r},u.YR=function(o,r,n,a){var c;if(n===void 0&&(n=null),a===void 0&&(a=null),c===void 0&&(c=30),n=u.sI(a,n),o=h.lp.getGTlist(o.eh(),r.eh(),2,h.lp.PE_GTLIST_OPTS_COMMON,n,c),r=[],o&&0<o.length){for(c=0;c<o.length;c++)r.push(this.lD(o[c]));h.Mx.destroy(o)}return n!==null&&n.destroy(),r},u.qx={},u.lK={},u.kK={},u.mK={},u})(h.Eg);h.gu=O})(B||(B={})),(function(h){var O,m;(m=O=h.hu||(h.hu={}))[m.Integer32=0]="Integer32",m[m.Integer64=1]="Integer64",m[m.FloatingPoint=2]="FloatingPoint";var u=(function(){function o(){this.qp()}return o.prototype.assign=function(r){this.Fm=r.Fm,this.Gm=r.Gm,this.Pj=r.Pj,this.sA=r.sA,this.Fo=r.Fo,this.rA=r.rA,this.Ik=r.Ik,this.Mq=r.Mq,this.Lq=r.Lq,this.Rm=r.Rm},o.prototype.VF=function(){return this.Rm},o.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=O.FloatingPoint},o.prototype.Xx=function(r,n,a){if(this.qp(),this.Rm=a,a!=O.FloatingPoint){var c=new h.l;r.hR(c),this.Fm=c.v,this.Gm=c.G}else this.Gm=this.Fm=-17976931348623157e292;(c=r.Ue.getType())==h.Sc.PE_TYPE_GEOGCS?(c=(a==O.Integer64?1e-9:1/18e5)*r.bf(),this.Pj=1/c):c==h.Sc.PE_TYPE_PROJCS&&(c=(a==O.Integer64?1e-4:.001)*r.pm(),this.Pj=1/c),n!=null?(c=(a==O.Integer32?.001:1e-4)*n.IH,this.Fo=1/c):this.Fo=1e4,this.YM(),this.Ik=r.sw,this.Mq=n!=null?.001*n.IH:.001,this.Lq=2220446049250313e-29},o.prototype.YM=function(){if(this.Rm!=O.FloatingPoint){var r=this.Rm==O.Integer64?h.Eg.$N:h.Eg.ZN,n=r/this.Pj,a=this.Fm+n,c=h.O.truncate((a-this.Fm)*this.Pj);c>r&&(this.Pj=r/(a-this.Fm)),n=this.Gm+n,(c=h.O.truncate((n-this.Gm)*this.Pj))>r&&(this.Pj=r/(n-this.Gm))}},o.prototype.aC=function(r){switch(r){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},o.prototype.Kn=function(r){switch(r){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},o.prototype.vz=function(r){if(this.Rm==O.FloatingPoint)return 0;switch(r){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},o.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Ik.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},o})();h.ZL=u})(B||(B={})),(function(h){function O(a,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*a,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function m(a,c,p){return a=a/6378137*57.29577951308232,p?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(a,c,p){var d=a.Of();if(a.getType()===33)c=c(d.Lg(),d.ih()),d.Cb(c[0],c[1]);else if(a.getType()===197){var g=c(a.es(),a.gs(),p);c=c(a.ds(),a.fs(),p),d.K(g[0],g[1],c[0],c[1])}else for(g=new h.h,a=0;a<d.I();a++){d.D(a,g);var w=c(g.x,g.y,p);g.ma(w[0],w[1]),d.Cb(a,g)}return d}function o(a){return u(a,m,!0)}function r(a){return u(a,O,!0)}var n=Math.PI/180;h.UK=(function(){function a(){}return a.vu=function(c){var p=Math.sqrt(.006694379990197414),d=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(d/(1-.006694379990197414*d*d)-1/(2*p)*Math.log((1-p*d)/(1+p*d))))},a.Vx=function(c,p,d,g){var w=.0033528106647474805,x=Math.sin(d);d=Math.cos(d);var M=(1-w)*Math.tan(c),$=M*(c=1/Math.sqrt(1+M*M)),I=Math.atan2(M,d),R=(M=c*x)*M,N=1-R,j=27233160610754688e-5*N/4040829998466145e-2,z=1+j/16384*(4096+j*(j*(320-175*j)-768)),D=j/1024*(256+j*(j*(74-47*j)-128));j=g/(635675231424518e-8*z);for(var U,V,W,Z=2*Math.PI;1e-12<Math.abs(j-Z);)W=Math.cos(2*I+j),Z=j,j=g/(635675231424518e-8*z)+D*(U=Math.sin(j))*(W+D/4*((V=Math.cos(j))*(2*W*W-1)-D/6*W*(4*U*U-3)*(4*W*W-3)));return g=$*U-c*V*d,N=w/16*N*(4+w*(4-3*N)),h.h.construct((p+(Math.atan2(U*x,c*V-$*U*d)-(1-N)*w*M*(j+N*U*(W+N*V*(2*W*W-1)))))/n,Math.atan2($*V+c*U*d,(1-w)*Math.sqrt(R+g*g))/n)},a.MM=function(c,p,d,g){var w=.0033528106647474805,x=g-p,M=Math.atan((1-w)*Math.tan(c)),$=Math.atan((1-w)*Math.tan(d)),I=Math.sin(M);M=Math.cos(M);var R=Math.sin($);$=Math.cos($);var N=x,j=1e3;do{var z=Math.sin(N),D=Math.cos(N),U=Math.sqrt($*z*$*z+(M*R-I*$*D)*(M*R-I*$*D));if(U===0)return 0;D=I*R+M*$*D;var V=Math.atan2(U,D),W=M*$*z/U,Z=1-W*W;z=D-2*I*R/Z,isNaN(z)&&(z=0);var it=w/16*Z*(4+w*(4-3*Z)),ot=N;N=x+(1-it)*w*W*(V+it*U*(z+it*D*(2*z*z-1)))}while(1e-12<Math.abs(N-ot)&&0<--j);return j===0?(I=g-p,{azimuth:Math.atan2(Math.sin(I)*Math.cos(d),Math.cos(c)*Math.sin(d)-Math.sin(c)*Math.cos(d)*Math.cos(I)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos(g-p))}):(p=(c=27233160610754688e-5*Z/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2($*Math.sin(N),M*R-I*$*Math.cos(N)),YQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(V-p*U*(z+p/4*(D*(2*z*z-1)-p/6*z*(4*U*U-3)*(4*z*z-3)))),XY:Math.atan2(M*Math.sin(N),M*R*Math.cos(N)-I*$)})},a.jQ=function(c){var p=c.hasAttribute(1),d=c.hasAttribute(2),g=[],w=c.da(),x=null,M=null;p&&(x=c.ub(1)),d&&(M=c.ub(2));for(var $=new h.h,I=0;I<w;I++){for(var R=c.Ba(I),N=c.Ja(I),j=0,z=0,D=NaN,U=NaN,V=NaN,W=NaN,Z=c.dc(I),it=[],ot=R;ot<R+N;ot++){c.D(ot,$),W=V=NaN;var dt=[$.x,$.y];p&&(V=x.get(ot),dt.push(V)),d&&(w=M.get(ot),dt.push(W)),ot==R&&Z&&(j=$.x,z=$.y,D=V,U=W),it.push(dt)}!Z||j==$.x&&z==$.y&&(!p||isNaN(D)&&isNaN(V)||D==V)&&(!d||isNaN(U)&&isNaN(W)||U==W)||it.push(it[0].slice(0)),g.push(it)}return g},a.Wy=function(c,p){c=a.jQ(c),637.100877141506>p&&(p=637.100877141506);for(var d,g=[],w=0;w<c.length;w++){var x,M,$=c[w];g.push(d=[]),d.push([$[0][0],$[0][1]]);var I=$[0][0]*n,R=$[0][1]*n;for(x=0;x<$.length-1;x++){var N=$[x+1][0]*n,j=$[x+1][1]*n;if(I!==N||R!==j){N=(j=a.MM(R,I,j,N)).azimuth;var z=(j=j.YQ)/p;if(1<z){for(M=1;M<=z-1;M++){var D=a.Vx(R,I,N,M*p);d.push([D.x,D.y])}M=a.Vx(R,I,N,(j+Math.floor(z-1)*p)/2),d.push([M.x,M.y])}R=a.Vx(R,I,N,j),d.push([R.x,R.y]),I=R.x*n,R=R.y*n}}}return{qJ:g}},a.XQ=function(c){for(var p=[],d=0;d<c.length;d++){var g=c[d];g=a.Wy(g,1e4),p.push(g)}c=[];for(var w=0;w<p.length;w++){g=p[w];var x=0;for(d=0;d<g.qJ.length;d++){var M,$=g.qJ[d],I=a.vu(h.h.construct($[0][0],$[0][1])),R=a.vu(h.h.construct($[$.length-1][0],$[$.length-1][1])),N=R.x*I.y-I.x*R.y;for(M=0;M<$.length-1;M++)I=a.vu(h.h.construct($[M+1][0],$[M+1][1])),N+=(R=a.vu(h.h.construct($[M][0],$[M][1]))).x*I.y-I.x*R.y;x+=N}x/=1,c.push(x/-2)}return c},a})(),h.cb=(function(){function a(){}return a.xB=function(c,p,d,g,w,x,M){a.gD[c.cc()]=p,isNaN(d)==0&&(a.mD[c.cc()]=d),isNaN(g)==0&&(a.zD[c.cc()]=g),isNaN(w)==0&&(a.aD[c.cc()]=w),a.nD[c.cc()]=x,M!==null&&(a.oD[c.cc()]=M)},a.Ww=function(c,p,d){a.sD[c.cc()+"-"+p.cc()]=d},a.sc=function(c){if((c=a.gD[c.cc()])==null)throw h.i.Ie();return c},a.bf=function(c){if((c=a.mD[c.cc()])==null)throw h.i.Ie();return c},a.vv=function(c){if((c=a.zD[c.cc()])==null)throw h.i.Ie();return c},a.ev=function(c){if((c=a.aD[c.cc()])==null)throw h.i.Ie();return c},a.gh=function(c){if((c=a.oD[c.cc()])==null)throw h.i.Ie();return h.l.construct(c[0],c[1],c[2],c[3])},a.Wc=function(c){if((c=a.nD[c.cc()])==null)throw h.i.Ie();return c},a.zh=function(c,p,d){if(p.Nb(d))return c;var g=a.sD[p.cc()+"-"+d.cc()];if(g!==void 0)return g(c,p,d);throw h.i.Ie()},a.vt=function(){throw h.i.Ie()},a.bR=function(){throw h.i.Ie()},a.dW=function(){throw h.i.Ie()},a.ml=function(){throw h.i.Ie()},a.sW=function(){var c=h.Eg.create(102100),p=h.Eg.create(3857),d=h.Eg.create(4326);h.cb.xB(c,d,NaN,NaN,NaN,!1,null),h.cb.xB(d,d,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.xB(p,d,NaN,NaN,NaN,!1,null),h.cb.Ww(c,d,o),h.cb.Ww(d,c,r),h.cb.Ww(p,d,o),h.cb.Ww(d,p,r)},a.gD=[],a.mD=[],a.zD=[],a.aD=[],a.nD=[],a.oD=[],a.sD=[],a})()})(B||(B={})),B.cb.sW(),(function(h){var O=(function(){function m(u){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=u}return m.prototype.jd=function(u){u<this.Bl?(this.o[u*this.stride]=this.io,this.io=u):this.Bl--,this.size--},m.prototype.T=function(u,o){return this.o[u*this.stride+o]},m.prototype.S=function(u,o,r){this.o[u*this.stride+o]=r},m.prototype.Ce=function(){var u=this.io;if(u==-1){if(this.Bl==this.Hg){if(2147483647<(u=this.Hg!=0?h.O.truncate(3*(this.Hg+1)/2):1)&&(u=2147483647),u==this.Hg)throw h.i.ce();this.Dz(u)}u=this.Bl,this.Bl++}else this.io=this.o[u*this.stride];this.size++;for(var o=u*this.stride;o<u*this.stride+this.stride;o++)this.o[o]=-1;return u},m.prototype.Ll=function(u){var o=this.io;if(o==-1){if(this.Bl==this.Hg){if(2147483647<(o=this.Hg!=0?h.O.truncate(3*(this.Hg+1)/2):1)&&(o=2147483647),o==this.Hg)throw h.i.ce();this.Dz(o)}o=this.Bl,this.Bl++}else this.io=this.o[o*this.stride];this.size++;for(var r=o*this.stride,n=0;n<u.length;n++)this.o[r+n]=u[n];return o},m.prototype.mj=function(u){this.io=-1,this.size=this.Bl=0,u&&(this.o=null,this.Hg=0)},m.prototype.De=function(u){u>this.Hg&&this.Dz(u)},m.prototype.tx=function(u,o){u*=this.stride,o*=this.stride;for(var r=0;r<this.stride;r++){var n=this.o[o+r];this.o[o+r]=this.o[u+r],this.o[u+r]=n}},m.prototype.gC=function(u,o,r){var n=this.o[this.stride*o+r];this.o[this.stride*o+r]=this.o[this.stride*u+r],this.o[this.stride*u+r]=n},m.LG=function(u){return 0<=u},m.prototype.Dz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.stride*u);o.set(this.o,0),this.o=o,this.Hg=u},m})();h.$c=O})(B||(B={})),(function(h){var O,m;(m=O||(O={}))[m.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",m[m.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",m[m.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",m[m.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=(function(){function r(n){this.Be=n,this.yh=NaN,this.eH=new h.ig,this.fH=new h.ig,this.ms=new h.Nc,this.ns=new h.Nc}return r.prototype.compare=function(n,a,c){if(n=n.ja(c),this.Be.pB(a,this.eH),this.Be.pB(n,this.fH),a=this.eH.get(),n=this.fH.get(),this.ms.K(a.sa,a.pa),this.ns.K(n.sa,n.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;c=a.na==a.la;var p=n.na==n.la;if(c||p){if(c&&p)return 0;if(a.na==n.na&&a.sa==n.sa)return c?1:-1;if(a.la==n.la&&a.pa==n.pa)return c?-1:1}return(c=a.Pe(this.yh,this.ms.oa))==(p=n.Pe(this.yh,this.ns.oa))&&((p=.5*((c=Math.min(a.la,n.la))+this.yh))==this.yh&&(p=c),c=a.Pe(p,this.ms.oa),p=n.Pe(p,this.ns.oa)),c<p?-1:c>p?1:0},r.prototype.aK=function(n){this.yh=n},r})(),o=(function(){function r(n){this.ib=n,this.WH=new h.ig,this.Bf=new h.h,this.wA=new h.Nc}return r.prototype.kX=function(n){this.Bf.L(n)},r.prototype.compare=function(n,a){return this.ib.pB(n.ja(a),this.WH),n=this.WH.get(),this.wA.K(n.sa,n.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(n=n.Pe(this.Bf.y,this.Bf.x),this.Bf.x<n?-1:this.Bf.x>n?1:0)},r})();O=(function(){function r(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new h.Md,this.bO=2147483647,this.aO=h.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return r.prototype.yy=function(n){this.lA=n},r.prototype.Ym=function(){this.ge==null&&(this.ge=new h.$c(8));var n=this.ge.Ce();return this.ge.S(n,1,0),n},r.prototype.vU=function(){this.Kc==null&&(this.Kc=new h.$c(8));var n=this.Kc.Ce();this.Kc.S(n,2,0),this.Kc.S(n,3,0);var a=this.Kc.Ce();return this.Kc.S(a,2,0),this.Kc.S(a,3,0),this.JJ(n,a),this.JJ(a,n),n},r.prototype.mI=function(){this.ye==null&&(this.ye=new h.$c(8));var n=this.ye.Ce();return this.ye.S(n,2,0),n},r.prototype.TW=function(n,a){this.ge.S(n,7,a)},r.prototype.mn=function(n,a){this.ge.S(n,2,a)},r.prototype.SW=function(n,a){this.ge.S(n,1,a)},r.prototype.lX=function(n,a){this.ge.S(n,3,a)},r.prototype.iX=function(n,a){this.ge.S(n,4,a)},r.prototype.cr=function(n,a){this.ge.S(n,5,a)},r.prototype.eR=function(n){return this.ge.T(n,5)},r.prototype.RW=function(n,a){this.ge.S(n,6,a)},r.prototype.cN=function(n,a){this.RW(a,n)},r.prototype.IJ=function(n,a){this.Kc.S(n,1,a)},r.prototype.JJ=function(n,a){this.Kc.S(n,4,a)},r.prototype.Tl=function(n,a){this.Kc.S(n,5,a)},r.prototype.Sl=function(n,a){this.Kc.S(n,6,a)},r.prototype.$W=function(n,a){this.Kc.S(n,2,a)},r.prototype.$w=function(n,a){this.Kc.S(n,3,a)},r.prototype.LF=function(n){return this.Kc.T(n,3)},r.prototype.Gt=function(n,a){this.Kc.S(n,7,a)},r.prototype.EK=function(n,a){if(this.mm(n)!=-1)for(a=a?-1:n,n=this.mm(n);n!=-1;n=this.js(n))this.g.Ra(this.tj(n),this.Cq,a)},r.prototype.yx=function(n,a){n!=-1&&(this.EK(n,a),this.EK(this.xa(n),a))},r.prototype.Dt=function(n,a){this.ye.S(n,1,a)},r.prototype.Vg=function(n,a){this.ye.S(n,2,a)},r.prototype.jn=function(n,a){this.ye.S(n,3,a),this.NW(n,this.dR(a)),this.MW(a,n)},r.prototype.MW=function(n,a){this.ye.S(n,4,a)},r.prototype.NW=function(n,a){this.ye.S(n,5,a)},r.prototype.DJ=function(n,a){this.ye.S(n,6,a)},r.prototype.BJ=function(n,a){this.ye.S(n,7,a)},r.prototype.AJ=function(n,a){this.Yn.write(n,a)},r.prototype.CJ=function(n,a){this.kA.write(n,a)},r.prototype.kY=function(n){var a=0,c=0,p=this.AF(n),d=new h.h,g=new h.h,w=new h.h;this.Yr(p,d),g.L(d);var x=p;do this.lm(x,w),c+=h.h.tb(g,w),this.$e(this.xa(x))!=n&&(a+=(w.x-d.x-(g.x-d.x))*(w.y-d.y+(g.y-d.y))*.5),g.L(w),x=this.jc(x);while(x!=p);this.Yn.write(n,a),this.kA.write(n,c)},r.prototype.PU=function(n,a){var c=new u(this),p=new h.Yj;p.De(h.O.truncate(this.wa/2)),p.Vo(c);for(var d=new h.ia(0),g=this.$g(),w=null,x=0,M=new h.h,$=this.Re;$!=-1;$=this.Rf($)){if(!(255&++x||a==null||a.progress(-1,-1)))throw h.i.WC();var I=this.Me($);if(I!=-1){if(d.Bh(0),!this.gY(p,g,d,I)){this.D($,M),c.aK(M.y);var R=I;do{var N=this.Ab(R,g);N!=-1&&(p.vd(N,-1),this.Kb(R,g,-2)),R=this.jc(this.xa(R))}while(I!=R);R=I;do(N=this.Ab(R,g))==-1&&(N=p.addElement(R,-1),d.add(N)),R=this.jc(this.xa(R));while(I!=R)}for(I=d.size-1;0<=I;I--)N=d.get(I),R=p.ja(N),this.Kb(this.xa(R),g,N),this.OU(p,N,n)}else this.cz($)==-1&&(w==null&&(w=new o(this)),this.D($,M),w.kX(M),R=p.IW(w),I=this.Hl,R!=-1&&(N=p.ja(R),this.$e(N)==this.$e(this.xa(N))&&(N=this.OF(p,R)),N!=-1&&(I=this.$e(N))),this.cN(I,$))}this.Jg(g)},r.prototype.OU=function(n,a,c){var p=n.ja(a),d=this.$e(p);if(this.Gn(d)==-1){var g=this.OF(n,a),w=this.xa(p),x=this.$e(w);this.Kp(d),this.Kp(x);var M=this.Gn(d),$=this.Gn(x);if(g==-1&&M==-1&&(x==d?(this.jn(x,this.Hl),M=$=this.Hl):($==-1&&(this.jn(x,this.Hl),$=this.Hl),this.jn(d,x),M=x)),g!=-1){var I=this.$e(g);$==-1&&(0>=this.Kp(I)?($=this.Gn(I),this.jn(x,$)):(this.jn(x,I),$=I),x==d&&(M=$))}M==-1&&this.hY(d,x),c==0?this.jW(n,a,p,g,d,x):c==5?this.kW(n,a,p,w,d,x):c==4&&this.iW(p,g,d,x)}},r.prototype.jW=function(n,a,c,p,d,g){var w=this.hk(d);if(p!=-1){var x=this.hk(g),M=this.hk(this.$e(p));p=w&x&M,M^=M&this.dh(c),(M|=p)!=0&&(this.Vg(g,x|M),this.Vg(d,M|w),w=w||M)}for(a=n.lb(a);a!=-1&&(p=n.ja(a),c=this.$e(this.xa(p)),d=this.hk(c),g=this.dh(p),x=this.$e(p),p=d&(M=this.hk(x))&w,w^=w&g,(w|=p)!=0);a=n.lb(a))this.Vg(c,d|w),this.Vg(x,M|w)},r.prototype.kW=function(n,a,c,p,d,g){if(d!=g){c=this.Ab(c,this.cg),c+=this.Ab(p,this.cg),p=0;var w=new h.ia(0),x=new h.ia(0);x.add(0);for(var M=n.rc(-1);M!=a;M=n.lb(M)){var $=n.ja(M),I=this.xa($),R=this.$e($),N=this.$e(I);if(R!=N){if($=this.Ab($,this.cg),p+=$+=this.Ab(I,this.cg),I=!1,w.size!=0&&w.Fc()==N&&(x.If(),w.If(),I=!0),this.Gn(N)==-1)throw h.i.Qa();I&&this.Gn(N)==R||(x.add(p),w.add(R))}}p+=c,w.size!=0&&w.Fc()==g&&(x.If(),w.If()),p!=0?x.Fc()==0&&(n=this.g.ld,n=this.La(n),this.Vg(d,n)):x.Fc()!=0&&(n=this.g.ld,n=this.La(n),this.Vg(d,n))}},r.prototype.iW=function(n,a,c,p){var d=this.La(this.g.ld);if(a==-1)this.Vg(p,this.Go),1&(n=this.Ab(n,this.xg))?this.Vg(c,d):this.Vg(c,this.Go);else{var g=this.hk(p);g==0?(g=this.hk(this.$e(a)),this.Vg(p,g),1&(n=this.Ab(n,this.xg))?this.Vg(c,g==d?this.Go:d):this.Vg(c,g)):1&(n=this.Ab(n,this.xg))?this.Vg(c,g==d?this.Go:d):this.Vg(c,g)}},r.prototype.gY=function(n,a,c,p){var d=p,g=-1,w=-1,x=0;do{if(x==2)return!1;var M=this.Ab(d,a);if(M!=-1){if(g!=-1)return!1;g=M}else{if(w!=-1)return!1;w=d}x++,d=this.jc(this.xa(d))}while(p!=d);return w!=-1&&g!=-1&&(this.Kb(n.ja(g),a,-2),n.Sj(g,w),c.add(g),!0)},r.prototype.hY=function(n,a){var c=this.Kp(n);if(c!=0){var p=this.Kp(a);0<c&&0>p||0>c&&0<p?this.jn(n,a):(a=this.Gn(a))!=-1&&this.jn(n,a)}},r.prototype.vP=function(n,a){this.Cq=this.g.Gd();for(var c=0,p=a.size;c<p;c++){var d=a.get(c),g=this.g.Pa(d,this.Cm),w=this.g.Qf(this.g.bd(d)),x=this.g.ic(w);if(h.aa.Hc(x)){var M=this.g.U(d);if(M!=-1){var $=this.g.Pa(M,this.Cm);if(g!=$){var I=this.vU(),R=this.xa(I),N=this.jh.Ce();this.jh.S(N,0,d),this.jh.S(N,1,-1),this.Gt(I,N),this.IJ(I,g),(N=this.Me(g))==-1?(this.mn(g,I),this.Tl(I,R),this.Sl(R,I)):(g=this.te(N),this.Tl(N,R),this.Sl(R,N),this.Sl(g,I),this.Tl(I,g)),this.IJ(R,$),(g=this.Me($))==-1?(this.mn($,R),this.Sl(I,R),this.Tl(R,I)):($=this.te(g),this.Tl(g,I),this.Sl(I,g),this.Sl($,R),this.Tl(R,$)),w=this.La(w),n==0?(this.Kb(R,this.ae,0),this.Kb(I,this.ae,x==1736?w:0)):n==5?($=new h.h,this.g.D(d,$),d=new h.h,this.g.D(M,d),g=M=0,0>$.compare(d)?M=1:g=-1,this.Kb(R,this.ae,0),this.Kb(I,this.ae,0),this.Kb(I,this.cg,M),this.Kb(R,this.cg,g)):n==7?(this.Kb(R,this.ae,this.Go),this.Kb(I,this.ae,x==1736?w:0)):n==4&&(this.Kb(R,this.ae,0),this.Kb(I,this.ae,0),this.Kb(I,this.xg,1),this.Kb(R,this.xg,1)),x=x==1736?this.aO:0,this.$w(I,w|x),this.$w(R,w|x)}}}}},r.prototype.VT=function(n,a){var c=this.mm(a);if(c!=-1){var p=this.mm(n);this.jh.S(c,1,p),this.Gt(n,c),this.Gt(a,-1)}n=this.xa(n),a=this.xa(a),(c=this.mm(a))!=-1&&(p=this.mm(n),this.jh.S(c,1,p),this.Gt(n,c),this.Gt(a,-1))},r.prototype.IX=function(n){function a(V,W){return p.HO(V,W)}var c=new h.ia(0);c.Jb(10);for(var p=this,d=this.Re;d!=-1;d=this.Rf(d)){c.clear(!1);var g=this.Me(d);if(g!=-1){var w=g;do c.add(w),w=this.jc(this.xa(w));while(w!=g);if(1<c.size){if(w=!0,2<c.size)c.Vd(0,c.size,a),c.add(c.get(0));else if(0<this.GO(c.get(0),c.get(1))){var x=c.get(0);c.set(0,c.get(1)),c.set(1,x)}else w=!1;for(var M=x=c.get(0),$=this.uf(M),I=this.xa(M),R=-1,N=1,j=c.size;N<j;N++){var z=c.get(N),D=this.xa(z),U=this.jk(D);if(U==$&&z!=M){if(n==0)R=this.LF(M)|this.LF(z),this.$w(M,R),this.$w(I,R),this.Kb(M,this.ae,this.Ab(M,this.ae)|this.Ab(z,this.ae)),this.Kb(I,this.ae,this.Ab(I,this.ae)|this.Ab(D,this.ae));else if(this.cg!=-1)R=this.Ab(M,this.cg)+this.Ab(z,this.cg),D=this.Ab(I,this.cg)+this.Ab(D,this.cg),this.Kb(M,this.cg,R),this.Kb(I,this.cg,D);else{if(n==7)return void(this.Ni=new h.Md(5,d,-1));this.xg!=-1&&(R=this.Ab(M,this.xg)+this.Ab(z,this.xg),D=this.Ab(I,this.xg)+this.Ab(D,this.xg),this.Kb(M,this.xg,R),this.Kb(I,this.xg,D))}this.VT(M,z),this.Ly(z),R=M,c.set(N,-1),z==x&&(c.set(0,-1),x=-1)}else this.yx(R,!1),R=-1,M=z,$=U,I=D}if(this.yx(R,!1),R=-1,w){for(x=-1,N=0,j=c.size;N<j;N++)if((z=c.get(N))!=-1){if(x==-1)M=x=z,$=this.uf(M),I=this.xa(M);else if(z!=M&&(D=this.xa(z),U=this.jk(D),this.Sl(I,z),this.Tl(z,I),M=z,$=U,I=D,n==7&&(this.Ab(z,this.ae)|this.Ab(this.te(z),this.ae))==(1|this.Go)))return void(this.Ni=new h.Md(5,d,-1))}this.mn(d,x)}else{for(x=-1,N=0,j=c.size;N<j;N++)if((z=c.get(N))!=-1){x=z;break}g!=x&&this.mn(d,x)}}}}},r.prototype.WN=function(){for(var n=-1,a=this.$g(),c=this.Re;c!=-1;c=this.Rf(c)){var p=this.Me(c);if(p!=-1){var d=p;do{if(this.Ab(d,a)!=1){var g=this.mI();this.Dt(g,d),this.BJ(g,n),n!=-1&&this.DJ(n,g),n=g;var w=0,x=d;do w|=this.Ab(x,this.ae),this.$W(x,g),this.Kb(x,a,1),x=this.jc(x);while(x!=d);this.Vg(g,w)}d=this.jc(this.xa(d))}while(d!=p)}}g=this.mI(),this.Dt(g,-1),this.BJ(g,n),n!=-1&&this.DJ(n,g),this.Hl=g,this.Yn=h.be.qf(this.ye.size,NaN),this.kA=h.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(a)},r.prototype.sR=function(n,a,c){if((a=a!=-1?a:this.Me(n))==-1)return-1;for(n=a;;){if(this.Ab(a,c)!=1)return a;if((a=this.jc(this.xa(a)))==n)return-1}},r.prototype.yW=function(){for(var n=this.$g(),a=this.Re;a!=-1;a=this.Rf(a))for(var c=-1;;){var p=this.sR(a,c,n);if(p==-1)break;c=this.jc(this.xa(p));for(var d=p;;){var g=this.jc(d),w=this.te(d),x=this.xa(d);if(w==x){if(this.IP(d),c!=d&&c!=x||(c=-1),d==p||w==p){if(d==(p=g)||w==p)break;d=g;continue}}else this.Kb(d,n,1);if((d=g)==p)break}}this.Jg(n)},r.prototype.MB=function(n,a,c,p,d){this.Ug(),this.gH=d,this.g=n,this.Bq=this.g.aF(),(n=new h.ia(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.fd);var g=0,w=1,x=c!=null?c.get(0):this.g.ld;for(d=1;x!=-1;){this.g.HJ(x,this.Bq,w),w<<=1;for(var M=this.g.Ob(x);M!=-1;M=this.g.Rb(M))for(var $=this.g.Xa(M),I=0,R=this.g.Ja(M);I<R;I++)n.add($),$=this.g.U($);h.aa.Rn(this.g.ic(x))||(g+=this.g.da(x)),c!=null?(x=d<c.size?c.get(d):-1,d++):x=this.g.ue(x)}for(this.Go=w,this.wa=n.size,this.g.nx(n,this.wa),this.jh==null&&(this.jh=new h.$c(2),this.ge=new h.$c(8),this.Kc=new h.$c(8),this.ye=new h.$c(8)),this.jh.De(this.wa),h.mp.zp(p),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,g)),this.Cm=this.g.Gd(),c=new h.h,d=0,g=new h.h,c.Rc(),w=0;w<=this.wa;w++)if(w<this.wa?($=n.get(w),this.g.D($,g)):g.Rc(),!c.qb(g)){if(d<w){for($=this.Ym(),R=I=-1;d<w;d++)R=n.get(d),this.g.Ra(R,this.Cm,$),x=this.jh.Ce(),this.jh.S(x,0,R),this.jh.S(x,1,I),I=x,M=this.g.bd(R),x=this.g.Qf(M),x=this.La(x),this.SW($,this.xd($)|x);this.TW($,I),this.cr($,this.g.Ua(R)),this.Os!=-1&&this.iX(this.Os,$),this.lX($,this.Os),this.Os=$,this.Re==-1&&(this.Re=$)}d=w,c.L(g)}h.mp.zp(p),this.ae=this.$g(),a==5&&(this.cg=this.$g()),a==4&&(this.xg=this.$g()),this.vP(a,n),this.Ni.Jj==0&&(this.IX(a),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(a,p))):this.pA=!0))},r.prototype.Ly=function(n){var a=this.jc(n),c=this.te(n),p=this.xa(n),d=this.jc(p),g=this.te(p);a!=p&&(this.Sl(g,a),this.Tl(a,g)),c!=p&&(this.Sl(c,d),this.Tl(d,c)),c=this.jk(n),this.Me(c)==n&&(d!=n?this.mn(c,d):this.mn(c,-1)),d=this.jk(p),this.Me(d)==p&&(a!=p?this.mn(d,a):this.mn(d,-1)),this.Kc.jd(n),this.Kc.jd(p)},r.prototype.OF=function(n,a){for(;;){if((a=n.we(a))==-1)return-1;var c=n.ja(a);if(this.$e(c)!=this.$e(this.xa(c)))return c}},r.prototype.dr=function(n,a){var c;c===void 0&&(c=!0),this.MB(n,0,null,a,c)},r.prototype.vJ=function(n,a,c){var p=new h.ia(0);p.add(a),this.MB(n,4,p,c,n.ic(a)==1736)},r.prototype.wJ=function(n,a,c){var p=new h.ia(0);p.add(a),this.MB(n,5,p,c,!0)},r.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},r.prototype.Me=function(n){return this.ge.T(n,2)},r.prototype.D=function(n,a){this.g.dG(this.eR(n),a)},r.prototype.xd=function(n){return this.ge.T(n,1)},r.prototype.Rf=function(n){return this.ge.T(n,4)},r.prototype.cz=function(n){return this.ge.T(n,6)},r.prototype.km=function(n){return this.ge.T(n,7)},r.prototype.js=function(n){return this.jh.T(n,1)},r.prototype.tj=function(n){return this.jh.T(n,0)},r.prototype.ng=function(n,a){return(a=this.Di[a]).size<=n?-1:a.read(n)},r.prototype.nn=function(n,a,c){(a=this.Di[a]).size<=n&&a.resize(this.ge.size,-1),a.write(n,c)},r.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var n=h.ia.qf(this.ge.Hg,-1),a=0,c=this.Di.length;a<c;a++)if(this.Di[a]==null)return this.Di[a]=n,a;return this.Di.push(n),this.Di.length-1},r.prototype.Ep=function(n){this.Di[n]=null},r.prototype.jk=function(n){return this.Kc.T(n,1)},r.prototype.uf=function(n){return this.jk(this.xa(n))},r.prototype.xa=function(n){return this.Kc.T(n,4)},r.prototype.te=function(n){return this.Kc.T(n,5)},r.prototype.jc=function(n){return this.Kc.T(n,6)},r.prototype.$e=function(n){return this.Kc.T(n,2)},r.prototype.af=function(n){return this.hk(this.Kc.T(n,2))},r.prototype.mm=function(n){return this.Kc.T(n,7)},r.prototype.Yr=function(n,a){this.D(this.jk(n),a)},r.prototype.lm=function(n,a){this.D(this.uf(n),a)},r.prototype.dh=function(n){return this.Kc.T(n,3)&this.bO},r.prototype.Ab=function(n,a){return(a=this.Gi[a]).size<=n?-1:a.read(n)},r.prototype.Kb=function(n,a,c){(a=this.Gi[a]).size<=n&&a.resize(this.Kc.size,-1),a.write(n,c)},r.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var n=h.ia.qf(this.Kc.Hg,-1),a=0,c=this.Gi.length;a<c;a++)if(this.Gi[a]==null)return this.Gi[a]=n,a;return this.Gi.push(n),this.Gi.length-1},r.prototype.Jg=function(n){this.Gi[n]=null},r.prototype.IP=function(n){var a=this.$e(n),c=this.xa(n),p=this.jc(n);p==c&&(p=this.jc(p))==n&&(p=-1);var d=this.AF(a);d!==n&&d!=c||this.Dt(a,p),c=this.Yn.read(a),isNaN(c)||(this.AJ(a,NaN),this.CJ(a,NaN)),this.yx(n,!0),this.Ly(n)},r.prototype.JP=function(n){for(var a=0,c=n.size;a<c;a++){var p=n.get(a),d=this.$e(this.xa(p));this.Dt(this.$e(p),-1),this.Dt(d,-1),this.yx(p,!0),this.Ly(p)}},r.prototype.AF=function(n){return this.ye.T(n,1)},r.prototype.hk=function(n){return this.ye.T(n,2)},r.prototype.Gn=function(n){return this.ye.T(n,3)},r.prototype.dR=function(n){return this.ye.T(n,4)},r.prototype.Kp=function(n){var a=this.Yn.read(n);return isNaN(a)&&(this.kY(n),a=this.Yn.read(n)),a},r.prototype.La=function(n){return this.g.KF(n,this.Bq)},r.prototype.Le=function(n){return this.g.Pa(n,this.Cm)},r.prototype.uR=function(n){return this.g.Pa(n,this.Cq)},r.prototype.tR=function(n,a){var c=this.Me(n);if(c==-1)return-1;var p=c,d=-1,g=-1;do{if(this.uf(p)==a)return p;if(d==-1){if((d=this.Me(a))==-1)break;g=d}if(this.uf(g)==n)return this.xa(g);p=this.jc(this.xa(p)),g=this.jc(this.xa(g))}while(p!=c&&g!=d);return-1},r.prototype.pB=function(n,a){a.Or(),a=a.get();var c=new h.h;this.Yr(n,c),a.Dc(c),this.lm(n,c),a.Qc(c)},r.prototype.HO=function(n,a){if(n==a)return 0;var c=new h.h;this.lm(n,c);var p=new h.h;return this.lm(a,p),c.qb(p)?0:(a=new h.h,this.Yr(n,a),(n=new h.h).uc(c,a),(c=new h.h).uc(p,a),h.h.nu(n,c))},r.prototype.GO=function(n,a){if(n==a)return 0;var c=new h.h;this.lm(n,c);var p=new h.h;return this.lm(a,p),c.qb(p)?0:(a=new h.h,this.Yr(n,a),(n=new h.h).uc(c,a),(c=new h.h).uc(p,a),0<=c.y&&0<n.y?h.h.nu(n,c):0)},r.prototype.xO=function(){for(var n=h.lc.ox(this.lA),a=new h.h,c=new h.h,p=new h.h,d=new h.h,g=new h.h,w=this.Re;w!=-1;w=this.Rf(w)){var x=this.Me(w);if(x!=-1){var M=x;this.Yr(M,a),this.lm(M,c),g.uc(c,a);var $=g.Sk();do{var I=M;if((M=this.jc(this.xa(M)))!=I){this.lm(M,p),d.uc(p,a),I=d.Sk();var R=d.wi(g);if(R*R/(I*$)*Math.min(I,$)<=n)return!1;g.L(d),$=I,c.L(p)}}while(M!=x)}}return!0},r})(),h.iu=O})(B||(B={})),(function(h){var O=(function(){function m(){this.j=null,this.oH=new h.h,this.pH=new h.h,this.Gj=null,this.Mv=!1,this.tl=-1}return m.prototype.cf=function(u){return u<this.Gj.length&&this.Gj[u]},m.prototype.dl=function(u,o,r,n){var a=h.aa.tf(this.j.g.ic(r));if(h.aa.tf(this.j.g.ic(o))!=2||a!=1)throw h.i.Qa();this.FP(u,o,r,n)},m.prototype.dr=function(u,o){this.j==null&&(this.j=new h.iu),this.j.dr(u,o)},m.prototype.Ft=function(u,o,r){for(h.Tk.V(u,o,r,!0),o=u.ld;o!=-1;o=u.ue(o))u.ic(o)==1736&&h.rn.V(u,o,-1,this.Mv,r);this.dr(u,r)},m.prototype.ME=function(u,o,r,n,a){var c=this.j.g;if(c.ic(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Rb(u)){var p=c.Xa(u);this.j.Le(p),this.j.Le(c.U(p));var d=this.j.uR(p);if(d!=-1){var g=this.j.Ab(d,r);if(g!=1&&g!=2)if(this.cf(this.j.af(d))){this.j.Kb(d,r,1),g=c.vf(o,-1);var w=d,x=this.j.Le(p),M=1;do{var $=this.sm(p,a);c.ij(g,$),n!=-1&&this.j.nn(x,n,1),this.j.Kb(w,r,1),w=this.j.jc(w);do var I=($=M==1?c.U(p):c.Ma(p))!=-1?this.j.Le($):-1;while(I==x);var R=this.j.jk(w);if(R!=I){do I=($=M==1?c.Ma(p):c.U(p))!=-1?this.j.Le($):-1;while(I==x);R!=I?(I=R,$=this.j.tj(this.j.km(I))):M=-M}x=I,p=$}while(w!=d);c.kn(g,!0)}else this.j.Kb(d,r,2)}}},m.prototype.eF=function(){for(var u=this.j.$g(),o=new h.ia(0),r=this.j.Re;r!=-1;r=this.j.Rf(r)){var n=this.j.Me(r),a=n;if(n!=-1)do{if(this.j.Ab(a,u)!=1){var c=this.j.xa(a);this.j.Kb(c,u,1),this.j.Kb(a,u,1),this.cf(this.j.af(a))&&this.cf(this.j.af(c))&&o.add(a)}a=this.j.jc(this.j.xa(a))}while(a!=n)}this.j.Jg(u),this.j.JP(o)},m.prototype.sm=function(u,o){return o==-1?u:this.aS(u,o)},m.prototype.aS=function(u,o){var r=this.j.g,n=this.j.km(this.j.Le(u));do{var a=this.j.tj(n);if(r.Qf(r.bd(a))==o)return a;n=this.j.js(n)}while(n!=-1);return u},m.prototype.Ot=function(u,o,r){this.eF();var n=this.j.g,a=n.Ig(1736),c=this.j.$g();return this.uK(u,o,a,r,c,-1),this.j.Jg(c),h.rn.V(n,a,1,this.Mv,null),a},m.prototype.uK=function(u,o,r,n,a,c){for(this.ME(u,r,a,c,n),o!=-1&&this.ME(o,r,a,c,n),u=this.j.g,o=this.j.Re;o!=-1;o=this.j.Rf(o)){var p=this.j.Me(o);if(p!=-1){var d=p;do{var g=this.j.Ab(d,a);if(g!=1&&g!=2)if(this.cf(this.j.af(d))){g=u.vf(r,-1);var w=d;do{var x=this.j.mm(w);x!=-1?x=this.j.tj(x):(x=this.j.tj(this.j.mm(this.j.xa(w))),x=this.j.g.U(x)),x=this.sm(x,n),u.ij(g,x),this.j.Kb(w,a,1),c!=-1&&(x=this.j.Le(x),this.j.nn(x,c,1)),w=this.j.jc(w)}while(w!=d);u.kn(g,!0)}else this.j.Kb(d,a,2);d=this.j.jc(this.j.xa(d))}while(d!=p)}}},m.prototype.aY=function(u,o,r){var n=this.j.g,a=n.Ig(1736),c=n.Ig(1607),p=n.Ig(550);this.eF();var d=-1,g=this.j.$g(),w=this.j.Dp();for(this.uK(u,o,a,r,g,w),u=this.j.Re;u!=-1;u=this.j.Rf(u))if((o=this.j.Me(u))!=-1){var x=o;do{var M=this.j.Ab(x,g),$=this.j.Ab(this.j.xa(x),g);if((M|=$)==2)if(M=this.j.dh(x),this.cf(M)){var I=n.vf(c,-1),R=x;M=this.Yw(u,n),M=this.sm(M,r),n.ij(I,M),this.j.nn(u,w,1);do{if(M=this.j.uf(R),$=this.Yw(M,n),$=this.sm($,r),n.ij(I,$),this.j.Kb(R,g,1),this.j.Kb(this.j.xa(R),g,1),this.j.nn(M,w,1),R=this.j.jc(R),M=this.j.Ab(R,g),(M|=$=this.j.Ab(this.j.xa(R),g))!=2)break;if(M=this.j.dh(R),!this.cf(M)){this.j.Kb(R,g,1),this.j.Kb(this.j.xa(R),g,1);break}}while(R!=x)}else this.j.Kb(x,g,1),this.j.Kb(this.j.xa(x),g,1);x=this.j.jc(this.j.xa(x))}while(x!=o)}for(u=this.j.Re;u!=-1;u=this.j.Rf(u))(M=this.j.ng(u,w))!=1&&(M=this.j.xd(u),this.cf(M)&&(d==-1&&(d=n.vf(p,-1)),(o=this.j.km(u))!=-1&&(o=this.j.tj(o),M=this.sm(o,r),n.ij(d,M))));return this.j.Ep(w),this.j.Jg(g),h.rn.V(n,a,1,this.Mv,null),(r=[])[0]=p,r[1]=c,r[2]=a,r},m.prototype.Yw=function(u,o){var r=-1;for(u=this.j.km(u);u!=-1;u=this.j.js(u)){var n=this.j.tj(u);r==-1&&(r=n);var a=this.j.La(o.Qf(o.bd(n)));if(this.cf(a)){r=n;break}}return r},m.prototype.lB=function(u,o){for(var r=this.jl(o),n=this.j.jk(o),a=this.j.uf(o),c=0,p=0,d=this.j.km(n);d!=-1;d=this.j.js(d)){var g=this.j.tj(d),w=u.bd(g),x=this.j.La(u.Qf(w));w=u.Xa(w),(x=(x&r)!=0)&&w==g&&(this.tl=o);var M=u.U(g);M!=-1&&this.j.Le(M)==a?(c++,x&&(this.tl===-1&&w==M&&(g=this.j.jc(o),this.cf(this.jl(g))&&(this.tl=g)),p++)):(g=u.Ma(g))!=-1&&this.j.Le(g)==a&&(c--,x&&(this.tl===-1&&w===g&&(g=this.j.jc(o),this.cf(this.jl(g))&&(this.tl=g)),p--))}return this.j.D(n,this.oH),this.j.D(a,this.pH),(p!=0?p:c)*(u=h.h.tb(this.oH,this.pH))},m.prototype.jl=function(u){return this.j.dh(u)|this.j.af(u)|this.j.af(this.j.xa(u))},m.prototype.xK=function(u){for(var o=this.j.xa(this.j.te(u)),r=-1;o!=u;){if(this.cf(this.jl(o))){if(r!=-1)return-1;r=o}o=this.j.xa(this.j.te(o))}return r!=-1?this.j.xa(r):-1},m.prototype.yK=function(u){for(var o=this.j.xa(this.j.jc(u)),r=-1;o!=u;){if(this.cf(this.jl(o))){if(r!=-1)return-1;r=o}o=this.j.xa(this.j.jc(o))}return r!=-1?this.j.xa(r):-1},m.prototype.mJ=function(u,o,r,n,a){var c=this.j.g,p=u,d=this.j.xa(p);this.j.Kb(p,r,1),this.j.Kb(d,r,1),this.tl=-1;for(var g=this.lB(c,p),w=p,x=-1,M=!1,$=1;;){var I=this.j.te(p);if(I==d)break;if(d=this.j.jc(d),this.j.xa(I)!=d){if((p=this.xK(p))==-1){M=!0;break}d=this.j.xa(p)}else p=I;if(p==u){x=u;break}if(I=this.jl(p),!this.cf(I))break;this.j.Kb(p,r,1),this.j.Kb(d,r,1),w=p,g+=this.lB(c,p),$++}if(x==-1)for(p=u,d=this.j.xa(p),x=p;(u=this.j.jc(p))!=d;){if(d=this.j.te(d),this.j.xa(u)!=d){if((p=this.yK(p))==-1){M=!0;break}d=this.j.xa(p)}else p=u;if(I=this.jl(p),!this.cf(I))break;this.j.Kb(p,r,1),this.j.Kb(d,r,1),x=p,g+=this.lB(c,p),$++}else if(this.tl!=-1&&(w=this.tl,x=this.j.te(this.tl),this.j.xa(x)!=this.j.jc(this.j.xa(w))&&(x=this.xK(w))==-1))throw h.i.Qa();for(0<=g||(p=x,x=this.j.xa(w),w=this.j.xa(p)),r=c.vf(o,-1),p=w,w=this.j.jk(w),M=this.j.uf(x)==w&&M,g=this.Yw(w,c),g=this.sm(g,a),c.ij(r,g),n!=-1&&this.j.nn(w,n,1),w=0,$=M?h.O.truncate(($+1)/2):-1;u=this.j.uf(p),g=this.Yw(u,c),g=this.sm(g,a),c.ij(r,g),w++,n!=-1&&this.j.nn(u,n,1),M&&w==$&&(r=c.vf(o,-1),c.ij(r,g)),p!=x;)if(u=this.j.jc(p),this.j.te(this.j.xa(p))!=this.j.xa(u)){if((p=this.yK(p))==-1)throw h.i.Qa()}else p=u},m.prototype.Pt=function(u){for(var o=this.j.g.Ig(1607),r=this.j.$g(),n=this.j.Re;n!=-1;n=this.j.Rf(n)){var a=this.j.Me(n),c=a;do this.j.Ab(c,r)!=1&&this.cf(this.jl(c))&&this.mJ(c,o,r,-1,u),c=this.j.jc(this.j.xa(c));while(c!=a)}return this.j.Jg(r),o},m.prototype.bY=function(u){for(var o=this.j.g,r=o.Ig(1607),n=o.Ig(550),a=this.j.$g(),c=this.j.Dp(),p=-1,d=this.j.Re;d!=-1;d=this.j.Rf(d)){var g=this.j.Me(d),w=g;do{var x=this.j.Ab(w,a);x!=1&&(x=this.jl(w),this.cf(x)&&this.mJ(w,r,a,c,u)),w=this.j.jc(this.j.xa(w))}while(w!=g)}for(d=this.j.Re;d!=-1;d=this.j.Rf(d))(x=this.j.ng(d,c))!=1&&(x=this.j.xd(d),this.cf(x)&&(p==-1&&(p=o.vf(n,-1)),(g=this.j.km(d))!=-1&&(g=this.j.tj(g),g=this.sm(g,u),o.ij(p,g))));return this.j.Jg(a),this.j.Ep(c),(u=[])[0]=n,u[1]=r,u},m.prototype.mr=function(){for(var u=this.j.g,o=u.Ig(550),r=u.vf(o,-1),n=this.j.Re;n!=-1;n=this.j.Rf(n))if(this.cf(this.j.xd(n))){for(var a=-1,c=this.j.km(n);c!=-1;c=this.j.js(c)){var p=this.j.tj(c);a==-1&&(a=p);var d=this.j.La(u.Qf(u.bd(p)));if(this.cf(d)){a=p;break}}u.ij(r,a)}return o},m.prototype.bq=function(u){this.Gj=[];for(var o=0;o<u;o++)this.Gj[o]=!1},m.aW=function(u,o,r){var n=u.Ia(),a=Array(1e3);h.O.$u(a,null);var c=h.O.lg(1e3,0),p=u.I(),d=!0,g=o.Db()==2;if(o.Db()!=1&&o.Db()!=2)throw h.i.Qa();for(var w=0;w<p;){var x=h.O.truncate(u.lW(a,w)-w);g?h.hd.sK(o,a,x,r,c):h.hd.tK(o,a,x,r,c);for(var M=0,$=0;$<x;$++)c[$]==0&&(d&&(d=!1,n.Fd(u,0,w)),M!=$&&n.Fd(u,w+M,w+$),M=$+1);d||M==x||n.Fd(u,w+M,w+x),w+=x}return d?u:n},m.zG=function(u,o,r){return u instanceof h.de?m.aW(u,o,r):o instanceof h.Sa?u.B()||o.B()?u.Ia():h.Tk.zU(r,u,o)?h.Tk.CO(u,o):u.Ia():m.bW(u,o,r)},m.Av=function(u,o,r,n){var a=new h.l;u.A(a);var c=new h.l;o.A(c);var p=new h.l;if(p.K(a),p.Zb(c),r=h.ta.Wd(r,p,!0),(p=new h.l).K(c),c=h.ta.Er(r),p.W(c,c),!a.isIntersecting(p)){if(u.Db()<=o.Db())return m.ki(m.Xe(u.Ia()),u,"&");if(u.Db()>o.Db())return m.ki(m.Xe(o.Ia()),u,"&")}return c=new m,p=(a=new h.gd).Ib(m.Xe(u)),o=a.Ib(m.Xe(o)),c.Ft(a,r,n),n=c.Av(p,o),u=m.ki(a.Ne(n),u,"&"),h.aa.Hc(u.getType())&&(u.Ch(2,r),u.getType()==1736&&u.fm()),u},m.bW=function(u,o,r){if(u.B()||o.B())return u.Ia();var n=[null],a=[0],c=o.Db()==2;if(o.Db()!=1&&o.Db()!=2)throw h.i.Qa();return n[0]=u.D(),c?h.hd.sK(o,n,1,r,a):h.hd.tK(o,n,1,r,a),a[0]==0?u.Ia():u},m.prototype.LU=function(u,o,r,n,a){if(u.B())return u;var c=new h.gd;return u=c.Ib(u),this.Mk(c,u,o,r,n,a)},m.prototype.NU=function(u,o,r,n,a,c){if(a&&u.ic(o)!=550){var p=new h.RC;p.TX(u,r),p.Ng?(h.Tk.V(u,r,c,!0),a=!1):this.j.yy(r)}else h.Tk.V(u,r,c,!0),a=!1;if(n&&u.ic(o)!=550?this.j.wJ(u,o,c):this.j.vJ(u,o,c),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(u,o,r,n,!1,c);if(this.j.yy(NaN),c=this.j.La(o),this.bq(c+1),this.Gj[c]=!0,u.ic(o)==1736||n&&u.ic(o)!=550)return u.Yo(o,0),o=this.Ot(o,-1,-1),(u=u.Ne(o)).Yo(0),a?u.Ch(1,0):(u.Ch(2,r),u.fm()),u;if(u.ic(o)==1607)return o=this.Pt(-1),u=u.Ne(o),a||u.Ch(2,r),u;if(u.ic(o)==550)return o=this.mr(),u=u.Ne(o),a||u.Ch(2,r),u;throw h.i.Qa()},m.prototype.Mk=function(u,o,r,n,a,c){this.j=new h.iu;try{return this.NU(u,o,r,n,a,c)}finally{this.j.Ug()}},m.Mk=function(u,o,r,n,a){return new m().LU(u,o,r,n,a)},m.prototype.MU=function(u,o,r,n){this.Mv=u,this.j=new h.iu,u=o.In(r);var a=o.ic(r);if(u!=1||a==550?this.j.vJ(o,r,n):this.j.wJ(o,r,n),!this.j.pA)if(this.j.yy(NaN),n=this.j.La(r),this.bq(n+1),this.Gj[n]=!0,o.ic(r)==1736||u==1&&o.ic(r)!=550)o.Yo(r,0),n=this.Ot(r,-1,-1),o.hC(n,r),o.BB(n);else if(o.ic(r)==1607)n=this.Pt(-1),o.hC(n,r),o.BB(n);else{if(o.ic(r)!=550)throw h.i.fa("internal error");n=this.mr(),o.hC(n,r),o.BB(n)}},m.prototype.im=function(u,o){var r=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o));if(r>n)return u;var a=this.j.La(u),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(u)]=!0,r==2&&n==2)return this.Ot(u,o,-1);if(r==1&&n==2||r==1&&n==1)return this.Pt(-1);if(r==0)return this.mr();throw h.i.Qa()},m.prototype.Av=function(u,o){var r=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o)),a=this.j.La(u),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(u)|this.j.La(o)]=!0,a=-1,1<this.j.g.ht.Aa&&(a=u),r==2&&n==2)return this.Ot(u,o,a);if(r==1&&0<n||n==1&&0<r)return this.Pt(a);if(r==0||n==0)return this.mr();throw h.i.Qa()},m.prototype.Pz=function(u,o){var r=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o)),a=this.j.La(u),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(u)|this.j.La(o)]=!0,a=-1,1<this.j.g.ht.Aa&&(a=u),r==2&&n==2)return this.aY(u,o,a);if(r==1&&0<n||n==1&&0<r)return this.bY(a);if(r==0||n==0)return(u=[])[0]=this.mr(),u;throw h.i.Qa()},m.prototype.ep=function(u,o){var r=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o)),a=this.j.La(u),c=this.j.La(o);if(this.bq(1+(a|c)),this.Gj[this.j.La(u)]=!0,this.Gj[this.j.La(o)]=!0,r==2&&n==2)return this.Ot(u,o,-1);if(r==1&&n==1)return this.Pt(-1);if(r==0&&n==0)return this.mr();throw h.i.Qa()},m.Xe=function(u){var o=u.getType();return o==197?(o=new h.Da(u.description),u.B()||o.ad(u,!1),o):o==33?(o=new h.de(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ta(u.description),u.B()||o.oc(u,!0),o):u},m.ki=function(u,o,r){var n=u.getType();return n==197?(o=new h.Da(u.description),u.B()||o.ad(u,!1),o):n!=33||r!="|"&&r!="^"?n==322?(o=new h.Ta(u.description),u.B()||o.oc(u,!0),o):n==33&&r=="-"&&o.getType()==33||n==550&&r=="&"&&o.getType()==33?(o=new h.Sa(u.description),u.B()||u.ve(0,o),o):u:(o=new h.de(u.description),u.B()||o.add(u),o)},m.im=function(u,o,r,n){if(u.B()||o.B()||u.Db()>o.Db())return m.ki(m.Xe(u),u,"-");var a=new h.l;u.A(a);var c=new h.l;if(o.A(c),!a.isIntersecting(c))return m.ki(m.Xe(u),u,"-");var p=new h.l;return p.K(a),p.Zb(c),r=h.ta.Wd(r,p,!0),c=new m,p=(a=new h.gd).Ib(m.Xe(u)),o=a.Ib(m.Xe(o)),c.Ft(a,r,n),n=c.im(p,o),n=a.Ne(n),u=m.ki(n,u,"-"),h.aa.Hc(u.getType())&&(u.Ch(2,r),u.getType()==1736&&u.fm()),u},m.VP=function(u,o,r){if(2>u.length)throw h.i.N("not enough geometries to dissolve");for(var n=0,a=0,c=u.length;a<c;a++)n=Math.max(u[a].Db(),n);var p=new h.l;p.Oa();var d=new h.gd,g=-1,w=0,x=-1;for(a=0,c=u.length;a<c;a++)if(u[a].Db()==n)if(u[a].B())x==-1&&(x=a);else{x=a,g==-1?g=d.Ib(m.Xe(u[a])):d.uN(g,m.Xe(u[a]));var M=new h.l;u[a].xc(M),p.Zb(M),w++}return 2>w?m.Xe(u[x]):(u=n==2,o=h.ta.Wd(n==0?o:null,p,!0),new m().Mk(d,g,o,u,!0,r))},m.Pz=function(u,o,r,n){var a=[null,null,null],c=new h.l;u.A(c);var p=new h.l;o.A(p);var d=new h.l;if(d.K(c),d.Zb(p),r=h.ta.Wd(r,d,!0),(d=new h.l).K(p),p=h.ta.Er(r),d.W(p,p),!c.isIntersecting(d)){if(u.Db()<=o.Db())return a[(u=m.ki(m.Xe(u.Ia()),u,"&")).Db()]=u,a;if(u.Db()>o.Db())return a[(u=m.ki(m.Xe(o.Ia()),u,"&")).Db()]=u,a}for(p=new m,d=(c=new h.gd).Ib(m.Xe(u)),o=c.Ib(m.Xe(o)),p.Ft(c,r,n),n=p.Pz(d,o),o=0;o<n.length;o++)p=m.ki(c.Ne(n[o]),u,"&"),h.aa.Hc(p.getType())&&(p.Ch(2,r),p.getType()==1736&&p.fm()),a[p.Db()]=p;return a},m.ep=function(u,o,r,n){if(u.Db()>o.Db())return m.ki(m.Xe(u),u,"^");if(u.Db()<o.Db()||u.B())return m.ki(m.Xe(o),u,"^");if(o.B())return m.ki(m.Xe(u),u,"^");var a=new h.l;u.A(a);var c=new h.l;o.A(c);var p=new h.l;return p.K(a),p.Zb(c),r=h.ta.Wd(r,p,!0),c=new m,p=(a=new h.gd).Ib(m.Xe(u)),o=a.Ib(m.Xe(o)),c.Ft(a,r,n),n=c.ep(p,o),u=m.ki(a.Ne(n),u,"^"),h.aa.Hc(u.getType())&&(u.Ch(2,r),u.getType()==1736&&u.fm()),u},m.prototype.LQ=function(u,o){var r=this.j.g;u=r.vf(u,-1);for(var n=o.size,a=0;a<n;a++){var c=o.get(a);r.ij(u,c)}r.kn(u,!0)},m.prototype.aX=function(u,o){for(var r=this.j.g,n=r.ld;n!=-1;n=r.ue(n))if(n==o)for(var a=r.Ob(n);a!=-1;a=r.Rb(a)){var c=r.Xa(a);if(c!=-1)for(var p=r.U(c);p!=-1;){c=this.j.Le(c);var d=this.j.Le(p);(c=this.j.tR(c,d))!=-1&&(d=this.j.xa(c),this.j.Kb(c,u,1),this.j.Kb(d,u,2)),c=p,p=r.U(c)}}},m.prototype.cW=function(u,o,r,n){r=this.j.La(r),n=this.j.La(n);var a=new h.ia(0);a.Jb(256);for(var c=this.j.g,p=this.j.$g(),d=this.j.Re;d!=-1;d=this.j.Rf(d)){var g=this.j.Me(d);if(g!=-1){var w=g;do{if(this.j.Ab(w,p)!=1){var x=w,M=w,$=!1,I=0;do{if(this.j.Kb(x,p,1),!$){var R=this.j.dh(x);(R&n)!=0&&(this.j.af(x)&r)!=0&&(M=x,$=!0)}$&&(a.add(this.j.tj(this.j.km(this.j.jk(x)))),u!=-1&&((R=this.j.dh(x))&n)!=0&&(I|=R=this.j.Ab(x,u))),x=this.j.jc(x)}while(x!=M);$&&0<this.j.Kp(this.j.$e(M))&&(x=c.Ig(1736),this.LQ(x,a),o!=-1&&c.HJ(x,o,I)),a.clear(!1)}w=this.j.jc(this.j.xa(w))}while(w!=g)}}this.j.Jg(p)},m.prototype.FP=function(u,o,r,n){this.j.yW();var a=-1;u!=-1&&(a=this.j.$g(),this.aX(a,r)),this.cW(a,u,o,r),a!=-1&&(this.j.Jg(a),a=-1);var c=this.j.g;for(u=0,a=c.ld;a!=-1;a=c.ue(a))a!=o&&a!=r&&(n.add(a),u++);n.Vd(0,u,(function(p,d){return(p=c.wz(c.Ob(p)))<(d=c.wz(c.Ob(d)))?-1:p==d?0:1}))},m.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},m})();h.Fg=O})(B||(B={})),(function(h){var O=(function(){function m(u){u!==void 0?this.setScale(u):this.RB()}return m.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},m.prototype.Nb=function(u){return this==u||u instanceof m&&this.bb==u.bb&&this.eb==u.eb&&this.Gb==u.Gb&&this.jb==u.jb&&this.ab==u.ab&&this.Lb==u.Lb},m.prototype.cc=function(){return h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj()},m.prototype.Eh=function(u,o){var r=this.jb*u.x+this.ab*u.y+this.Lb;o.x=this.bb*u.x+this.eb*u.y+this.Gb,o.y=r},m.prototype.eY=function(u,o,r){for(var n=0;n<o;n++){var a=u[n].x,c=u[n].y,p=this.bb*a+this.eb*c+this.Gb;a=this.jb*a+this.ab*c+this.Lb,r[n]!=null?r[n].ma(p,a):r[n]=h.h.construct(p,a)}},m.prototype.multiply=function(u){m.multiply(this,u,this)},m.multiply=function(u,o,r){var n=u.bb*o.bb+u.jb*o.eb,a=u.eb*o.bb+u.ab*o.eb,c=u.Gb*o.bb+u.Lb*o.eb+o.Gb,p=u.bb*o.jb+u.jb*o.ab,d=u.eb*o.jb+u.ab*o.ab;u=u.Gb*o.jb+u.Lb*o.ab+o.Lb,r.bb=n,r.eb=a,r.Gb=c,r.jb=p,r.ab=d,r.Lb=u},m.prototype.Of=function(){var u=new m;return u.bb=this.bb,u.eb=this.eb,u.Gb=this.Gb,u.jb=this.jb,u.ab=this.ab,u.Lb=this.Lb,u},m.prototype.mC=function(u){if(!u.B()){for(var o=[],r=0;4>r;r++)o[r]=new h.h;u.nB(o),this.fY(o,o),u.Zw(o,4)}},m.prototype.fY=function(u,o){for(var r=0;r<u.length;r++){var n=new h.h,a=u[r];n.x=this.bb*a.x+this.eb*a.y+this.Gb,n.y=this.jb*a.x+this.ab*a.y+this.Lb,o[r]=n}},m.prototype.pS=function(u,o){u.B()||o.B()||u.R()==0||u.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=o.R()/u.R(),this.ab=o.ca()/u.ca(),this.Gb=o.v-u.v*this.bb,this.Lb=o.G-u.G*this.ab)},m.prototype.dY=function(u){var o=new h.h,r=new h.h;o.ma(this.bb,this.jb),r.ma(this.eb,this.ab),o.sub(o);var n=.5*o.Sk();return o.ma(this.bb,this.jb),r.ma(this.eb,this.ab),o.add(r),u*(n>(o=.5*o.Sk())?Math.sqrt(n):Math.sqrt(o))},m.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},m.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Eh(o,o),o.sub(h.h.construct(0,1)),o.Sk()>u*u?!1:(o.ma(0,0),this.Eh(o,o),!(o.Sk()>u*u)&&(o.ma(1,0),this.Eh(o,o),o.sub(h.h.construct(1,0)),o.Sk()<=u*u))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},m.prototype.Bi=function(u){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*u*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},m.prototype.gg=function(u,o){this.bb=1,this.eb=0,this.Gb=u,this.jb=0,this.ab=1,this.Lb=o},m.prototype.setScale=function(u,o){o!==void 0?(this.bb=u,this.jb=this.Gb=this.eb=0,this.ab=o,this.Lb=0):this.setScale(u,u)},m.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},m.prototype.setRotate=function(u){this.pX(Math.cos(u),Math.sin(u))},m.prototype.pX=function(u,o){this.bb=u,this.eb=-o,this.Gb=0,this.jb=o,this.ab=u,this.Lb=0},m.prototype.shift=function(u,o){this.Gb+=u,this.Lb+=o},m.prototype.scale=function(u,o){this.bb*=u,this.eb*=u,this.Gb*=u,this.jb*=o,this.ab*=o,this.Lb*=o},m.prototype.flipX=function(u,o){this.bb=-this.bb,this.eb=-this.eb,this.Gb=u+o-this.Gb},m.prototype.flipY=function(u,o){this.jb=-this.jb,this.ab=-this.ab,this.Lb=u+o-this.Lb},m.prototype.rotate=function(u){var o=new m;o.setRotate(u),this.multiply(o)},m.prototype.inverse=function(u){if(u!==void 0){var o=this.bb*this.ab-this.eb*this.jb;o==0?u.lx():(o=1/o,u.Gb=(this.eb*this.Lb-this.Gb*this.ab)*o,u.Lb=(this.Gb*this.jb-this.bb*this.Lb)*o,u.bb=this.ab*o,u.eb=-this.eb*o,u.jb=-this.jb*o,u.ab=this.bb*o)}else this.inverse(this)},m})();h.Dd=O})(B||(B={})),(function(h){var O=(function(){function m(){}return m.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},m.prototype.setScale=function(u,o,r){this.bb=u,this.eb=this.Ze=this.jb=0,this.ab=o,this.Fe=this.Ee=this.Ge=0,this.He=r,this.hg=this.Lb=this.Gb=0},m.prototype.setTranslate=function(u,o,r){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=u,this.Lb=o,this.hg=r},m.prototype.translate=function(u,o,r){this.Gb+=u,this.Lb+=o,this.hg+=r},m.prototype.mC=function(u){if(!u.B()){for(var o=new h.Nd[8],r=0;8>r;r++)o[r]=new h.Nd;u.nB(o),this.transform(o,8,o),u.Zw(o)}},m.prototype.transform=function(u,o,r){for(var n=0;n<o;n++){var a=new h.Nd,c=u[n];a.x=this.bb*c.x+this.eb*c.y+this.Ee*c.z+this.Gb,a.y=this.jb*c.x+this.ab*c.y+this.Fe*c.z+this.Lb,a.z=this.Ze*c.x+this.Ge*c.y+this.He*c.z+this.hg,r[n]=a}},m.prototype.fp=function(u){var o=new h.Nd;return o.x=this.bb*u.x+this.eb*u.y+this.Ee*u.z+this.Gb,o.y=this.jb*u.x+this.ab*u.y+this.Fe*u.z+this.Lb,o.z=this.Ze*u.x+this.Ge*u.y+this.He*u.z+this.hg,o},m.prototype.Ag=function(u){m.multiply(this,u,this)},m.multiply=function(u,o,r){var n=u.bb*o.bb+u.jb*o.eb+u.Ze*o.Ee,a=u.bb*o.jb+u.jb*o.ab+u.Ze*o.Fe,c=u.bb*o.Ze+u.jb*o.Ge+u.Ze*o.He,p=u.eb*o.bb+u.ab*o.eb+u.Ge*o.Ee,d=u.eb*o.jb+u.ab*o.ab+u.Ge*o.Fe,g=u.eb*o.Ze+u.ab*o.Ge+u.Ge*o.He,w=u.Ee*o.bb+u.Fe*o.eb+u.He*o.Ee,x=u.Ee*o.jb+u.Fe*o.ab+u.He*o.Fe,M=u.Ee*o.Ze+u.Fe*o.Ge+u.He*o.He,$=u.Gb*o.bb+u.Lb*o.eb+u.hg*o.Ee+o.Gb,I=u.Gb*o.jb+u.Lb*o.ab+u.hg*o.Fe+o.Lb;u=u.Gb*o.Ze+u.Lb*o.Ge+u.hg*o.He+o.hg,r.bb=n,r.jb=a,r.Ze=c,r.eb=p,r.ab=d,r.Ge=g,r.Ee=w,r.Fe=x,r.He=M,r.Gb=$,r.Lb=I,r.hg=u},m.inverse=function(u,o){var r=u.bb*(u.ab*u.He-u.Ge*u.Fe)-u.jb*(u.eb*u.He-u.Ge*u.Ee)+u.Ze*(u.eb*u.Fe-u.ab*u.Ee);if(r==0)throw h.i.fa("math singularity");var n=1/r;r=(u.ab*u.He-u.Ge*u.Fe)*n;var a=-(u.eb*u.He-u.Ge*u.Ee)*n,c=(u.eb*u.Fe-u.ab*u.Ee)*n,p=-(u.jb*u.He-u.Fe*u.Ze)*n,d=(u.bb*u.He-u.Ze*u.Ee)*n,g=-(u.bb*u.Fe-u.jb*u.Ee)*n,w=(u.jb*u.Ge-u.Ze*u.ab)*n,x=-(u.bb*u.Ge-u.Ze*u.eb)*n;n*=u.bb*u.ab-u.jb*u.eb;var M=-(u.Gb*r+u.Lb*a+u.hg*c),$=-(u.Gb*p+u.Lb*d+u.hg*g);u=-(u.Gb*w+u.Lb*x+u.hg*n),o.bb=r,o.jb=p,o.Ze=w,o.eb=a,o.ab=d,o.Ge=x,o.Ee=c,o.Fe=g,o.He=n,o.Gb=M,o.Lb=$,o.hg=u},m.prototype.Of=function(){var u=new m;return u.bb=this.bb,u.jb=this.jb,u.Ze=this.Ze,u.eb=this.eb,u.ab=this.ab,u.Ge=this.Ge,u.Ee=this.Ee,u.Fe=this.Fe,u.He=this.He,u.Gb=this.Gb,u.Lb=this.Lb,u.hg=this.hg,u},m})();h.JY=O})(B||(B={})),(function(h){var O=(function(u){function o(r){if(r!==void 0)r=u.call(this,r.cc(),r)||this;else{(r=u.call(this)||this).bg=[],r.bg[0]=0,r.Aa=1,r.uh=[];for(var n=0;10>n;n++)r.uh[n]=-1;r.uh[r.bg[0]]=0}return r.jq=!0,r}return ce(o,u),o.prototype.re=function(r){this.hasAttribute(r)||(this.uh[r]=0,this.jD())},o.prototype.removeAttribute=function(r){if(r==0)throw h.i.N("Position attribue cannot be removed");this.hasAttribute(r)&&(this.uh[r]=-1,this.jD())},o.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var r=0;r<this.uh.length;r++)this.uh[r]=-1;this.uh[this.bg[0]]=0,this.jq=!0},o.prototype.EF=function(){return m.kz().add(this)},o.og=function(){return m.kz().$R()},o.prototype.tM=function(){var r=this.cc();return new h.ra(r,this)},o.prototype.jD=function(){for(var r=this.Aa=0,n=0;10>r;r++)0<=this.uh[r]&&(this.bg[n]=r,this.uh[r]=n,n++,this.Aa++);this.jq=!0},o.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},o.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof o)||r.Aa!=this.Aa)return!1;for(var n=0;n<this.Aa;n++)if(this.bg[n]!=r.bg[n])return!1;return this.jq==r.jq},o.prototype.GG=function(r){if(r.Aa!=this.Aa)return!1;for(var n=0;n<this.Aa;n++)if(this.bg[n]!=r.bg[n])return!1;return!0},o.Iw=function(r,n){for(var a=[],c=0;c<r.Aa;c++)a[c]=-1;c=0;for(var p=r.Aa;c<p;c++)a[c]=n.Pf(r.kd(c));return a},o.BR=function(r,n){return(r=new o(r)).re(n),r.EF()},o.CR=function(r,n){for(var a=null,c=0;10>c;c++)!r.hasAttribute(c)&&n.hasAttribute(c)&&(a==null&&(a=new o(r)),a.re(c));return a!=null?a.EF():r},o})(h.ra);h.ee=O;var m=(function(){function u(){this.map=[];var o=new O;this.add(o),(o=new O).re(1),this.add(o)}return u.kz=function(){return u.bL},u.prototype.$R=function(){return u.ft},u.prototype.add=function(o){var r=o.cc();if(u.ft!=null&&u.ft.cc()==r&&o.GG(u.ft))return u.ft;if(u.Dw!=null&&u.Dw.cc()==r&&o.GG(u.Dw))return u.Dw;var n=null;return this.map[r]!==void 0&&(n=this.map[r]),n==null&&((n=o.tM()).Aa==1?u.ft=n:n.Aa==2&&n.kd(1)==1?u.Dw=n:this.map[r]=n),n},u.bL=new u,u})()})(B||(B={}));var R1={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},C1={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},No=new((function(){function h(){this.RM=50,this.np=new Map,this.gj=[]}return h.prototype.clear=function(){this.gj.length=0,this.np.clear()},h.prototype.delete=function(O){return!!this.np.delete(O)&&(this.gj.splice(this.gj.indexOf(O),1),!0)},h.prototype.get=function(O){var m=this.np.get(O);if(m!==void 0)return this.gj[0]!==O&&(this.gj.splice(this.gj.indexOf(O),1),this.gj.unshift(O)),m},h.prototype.has=function(O){return this.np.has(O)},h.prototype.set=function(O,m){return this.get(O)!==void 0&&this.delete(O),this.gj.unshift(O),this.np.set(O,m),this.oM(),this},h.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var O=this.gj.pop();this.np.delete(O)}},h})()),xt=((ki={}).convertJSONToGeometry=function(h){return B.$b.fP(h)},ki.hasM=function(h){return h.hasAttribute(B.Ih.M)},ki.hasZ=function(h){return h.hasAttribute(B.Ih.Z)},ki.getPointX=function(h){return h.Lg()},ki.getPointY=function(h){return h.ih()},ki.getPointZ=function(h){return h.bS()},ki.getPointM=function(h){return h.zR()},ki.getXMin=function(h){return h.es()},ki.getYMin=function(h){return h.gs()},ki.getXMax=function(h){return h.ds()},ki.getYMax=function(h){return h.fs()},ki.getZExtent=function(h){return h.Tg(B.Ih.Z,0)},ki.getMExtent=function(h){return h.Tg(B.Ih.M,0)},ki.exportPaths=function(h){var O=[],m=h.da(),u=null,o=null,r=h.hasAttribute(B.Ih.Z),n=h.hasAttribute(B.Ih.M);r&&(u=h.ub(B.Ih.Z)),n&&(o=h.ub(B.Ih.M));for(var a=new B.h,c=0;c<m;c++){for(var p=h.Ba(c),d=h.Ja(c),g=0,w=0,x=NaN,M=NaN,$=NaN,I=NaN,R=h.dc(c),N=[],j=p;j<p+d;j++){h.D(j,a),I=$=NaN;var z=[a.x,a.y];r&&($=u.get(j),z.push($)),n&&(I=o.get(j),z.push(I)),j==p&&R&&(g=a.x,w=a.y,x=$,M=I),N.push(z)}!R||g==a.x&&w==a.y&&(!r||isNaN(x)&&isNaN($)||x==$)&&(!n||isNaN(M)&&isNaN(I)||M==I)||N.push(N[0].slice(0)),O.push(N)}return O},ki.exportPathsFlat=function(){},ki.exportPoints=function(h){var O=h.hasAttribute(B.Ih.Z),m=h.hasAttribute(B.Ih.M),u=null,o=null;O&&(u=h.ub(B.Ih.Z)),m&&(o=h.ub(B.Ih.M));for(var r=new B.h,n=h.I(),a=[],c=0;c<n;c++){h.D(c,r);var p=[r.x,r.y];O&&p.push(u.get(c)),m&&p.push(o.get(c)),a.push(p)}return a},ki.exportPointsFlat=function(){},ki),Ca=new Map;return(function(){function h(){}return h.buffer=Lt,h.clip=P,h.contains=C,h.convexHull=St,h.crosses=L,h.cut=k,h.densify=Yn,h.difference=pt,h.disjoint=tt,h.distance=F,h.equals=q,h.extendedSpatialReferenceInfo=A,h.generalize=Cr,h.geodesicArea=xv,h.geodesicBuffer=Yt,h.geodesicDensify=su,h.geodesicLength=Sv,h.intersect=_t,h.intersects=H,h.isSimple=vt,h.nearestCoordinate=Jt,h.nearestVertex=ui,h.nearestVertices=si,h.offset=at,h.overlaps=et,h.planarArea=gf,h.planarLength=mf,h.relate=nt,h.simplify=Tt,h.symmetricDifference=ht,h.touches=J,h.union=gt,h.within=Q,h.rotate=B.Ex.rotate,h.flipHorizontal=B.Ex.JQ,h.flipVertical=B.Ex.KQ,h.intersectLinesToPoints=Pv,h.ExtendedParams=B.yC,h.clearDefaultSpatialReferenceTolerance=Iv,h.changeDefaultSpatialReferenceTolerance=Av,h._enableProjection=Tv,h._project=$v,h._getTransformation=Mv,h._getTransformationBySuitability=Ev,h})()}var i=e();i!==void 0&&(t.exports=i)})(tE)),tE.exports}var eD=Ppt();const ne=Apt(eD),Opt=Ipt({__proto__:null,default:ne},[eD]),kpt=Object.freeze(Object.defineProperty({__proto__:null,G:ne,g:Opt},Symbol.toStringTag,{value:"Module"})),me={convertToGEGeometry:Rpt,exportPoint:Cpt,exportPolygon:Npt,exportPolyline:Lpt,exportMultipoint:Dpt,exportExtent:jpt};function Rpt(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function Cpt(t,e,i){const s=t.hasZ(e),l=t.hasM(e),f=new Ct({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return s&&(f.z=t.getPointZ(e)),l&&(f.m=t.getPointM(e)),f.cache._geVersion=e,f}function Npt(t,e,i){const s=new Fe({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function Lpt(t,e,i){const s=new ei({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function Dpt(t,e,i){const s=new Ks({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return s.cache._geVersion=e,s}function jpt(t,e,i){const s=t.hasZ(e),l=t.hasM(e),f=new Zt({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(s){const y=t.getZExtent(e);f.zmin=y.vmin,f.zmax=y.vmax}if(l){const y=t.getMExtent(e);f.mmin=y.vmin,f.mmax=y.vmax}return f.cache._geVersion=e,f}const Fpt=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:me},Symbol.toStringTag,{value:"Module"}));function be(t){const e=Array.isArray(t)?t[0].spatialReference:t.spatialReference;return e?Kp(Et,e):Et.WGS84}function zpt(t){return ne.extendedSpatialReferenceInfo(t)}function Upt(t,e){return ee(t),ne.clip(me,be(t),t,e)}function Gpt(t,e){return ee(t),ne.cut(me,be(t),t,e)}function Bpt(t,e){return ee(t),ee(e),ne.contains(me,be(t),t,e)}function qpt(t,e){return ee(t),ee(e),ne.crosses(me,be(t),t,e)}function Vpt(t,e,i){return ee(t),ee(e),ne.distance(me,be(t),t,e,i)}function Hpt(t,e){return ee(t),ee(e),ne.equals(me,be(t),t,e)}function Wpt(t,e){return ee(t),ee(e),ne.intersects(me,be(t),t,e)}function Jpt(t,e){return ee(t),ee(e),ne.touches(me,be(t),t,e)}function Ypt(t,e){return ee(t),ee(e),ne.within(me,be(t),t,e)}function Kpt(t,e){return ee(t),ee(e),ne.disjoint(me,be(t),t,e)}function Zpt(t,e){return ee(t),ee(e),ne.overlaps(me,be(t),t,e)}function Xpt(t,e,i){return ee(t),ee(e),ne.relate(me,be(t),t,e,i)}function Qpt(t){return ee(t),ne.isSimple(me,be(t),t)}function tft(t){return ee(t),ne.simplify(me,be(t),t)}function eft(t,e=!1){return ne.convexHull(me,be(t),t,e)}function ift(t,e){return ee(e),ne.difference(me,be(t),t,e)}function rft(t,e){return ee(e),ne.symmetricDifference(me,be(t),t,e)}function sft(t,e){return ee(e),ne.intersect(me,be(t),t,e)}function nft(t){return ne.union(me,be(t),t)}function oft(t,e,i,s,l,f){return ne.offset(me,be(t),t,e,i,s,l,f)}function aft(t,e,i,s=!1){return ne.buffer(me,be(t),t,e,i,s)}function lft(t,e,i,s,l,f){return ne.geodesicBuffer(me,be(t),t,e,i,s,l,f)}function uft(t,e,i=!0){return ee(t),ne.nearestCoordinate(me,be(t),t,e,i)}function hft(t,e){return ee(t),ne.nearestVertex(me,be(t),t,e)}function cft(t,e,i,s){return ee(t),ne.nearestVertices(me,be(t),t,e,i,s)}function j6(t){return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?t.extent?.center??null:null}function pft(t,e,i){if(t==null)throw new Up;const s=t.spatialReference;if((i=i??j6(t))==null)throw new Up;const l=t.constructor.fromJSON(ne.rotate(t,e,i));return l.spatialReference=s,l}function fft(t,e){if(t==null)throw new Up;const i=t.spatialReference;if((e=e??j6(t))==null)throw new Up;const s=t.constructor.fromJSON(ne.flipHorizontal(t,e));return s.spatialReference=i,s}function dft(t,e){if(t==null)throw new Up;const i=t.spatialReference;if((e=e??j6(t))==null)throw new Up;const s=t.constructor.fromJSON(ne.flipVertical(t,e));return s.spatialReference=i,s}function yft(t,e,i,s){return ee(t),ne.generalize(me,be(t),t,e,i,s)}function gft(t,e,i){return ee(t),ne.densify(me,be(t),t,e,i)}function mft(t,e,i,s=0){return ee(t),ne.geodesicDensify(me,be(t),t,e,i,s)}function vft(t,e){return ee(t),ne.planarArea(me,be(t),t,e)}function wft(t,e){return ee(t),ne.planarLength(me,be(t),t,e)}function iD(t,e,i){return ee(t),ne.geodesicArea(me,be(t),t,e,i)}function rD(t,e,i){return ee(t),ne.geodesicLength(me,be(t),t,e,i)}function bft(t,e){return ne.intersectLinesToPoints(me,be(t),t,e)}function _ft(t,e){ne.changeDefaultSpatialReferenceTolerance(t,e)}function xft(t){ne.clearDefaultSpatialReferenceTolerance(t)}class Up extends Error{constructor(){super("Illegal Argument Exception")}}const Sft=Object.freeze(Object.defineProperty({__proto__:null,buffer:aft,changeDefaultSpatialReferenceTolerance:_ft,clearDefaultSpatialReferenceTolerance:xft,clip:Upt,contains:Bpt,convexHull:eft,crosses:qpt,cut:Gpt,densify:gft,difference:ift,disjoint:Kpt,distance:Vpt,equals:Hpt,extendedSpatialReferenceInfo:zpt,flipHorizontal:fft,flipVertical:dft,generalize:yft,geodesicArea:iD,geodesicBuffer:lft,geodesicDensify:mft,geodesicLength:rD,intersect:sft,intersectLinesToPoints:bft,intersects:Wpt,isSimple:Qpt,nearestCoordinate:uft,nearestVertex:hft,nearestVertices:cft,offset:oft,overlaps:Zpt,planarArea:vft,planarLength:wft,relate:Xpt,rotate:pft,simplify:tft,symmetricDifference:rft,touches:Jpt,union:nft,within:Ypt},Symbol.toStringTag,{value:"Module"}));function Tft(t){const e="measurement-layer",i=t.map;let s=null;if(!i)throw new Error("map not available");const l=typeof i.findLayerById=="function"?i.findLayerById(e):null;if(l)s=l;else{s=new Tr({id:e});try{i.add(s)}catch{}}const f=new Ms({color:[255,165,0,.25],outline:{color:[255,165,0],width:2}}),y=new Ms({color:[255,165,0,.6],outline:{color:[255,165,0],width:2}}),v=new Wi({color:[0,120,255],width:3}),b=new Wi({color:[0,120,255],width:4}),S=new ye({view:t,layer:s,polygonSymbol:f,polylineSymbol:v});let A=null,P=null;function k(){try{A&&A.remove&&A.remove()}catch{}A=null,P=null}function C(){if(P){try{S.cancel()}catch{}P(new Error("New measurement started")),k()}return new Promise((q,H)=>{P=H,A=S.on("create",async J=>{if(J.state==="complete"){let Q=J.graphic&&J.graphic.geometry?J.graphic.geometry:void 0;if(!Q){const nt=J.vertices||J&&J.graphic&&J.graphic.rings;nt&&nt.length&&(Q=new Fe({rings:nt,spatialReference:t.spatialReference}))}if(!Q){H(new Error("no geometry")),k();return}try{await aw.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"})}catch{try{J.graphic&&s&&s.remove(J.graphic)}catch{}q(null),k();return}try{J.graphic&&(J.graphic.symbol=y)}catch{}const tt=iD(Q,"square-meters"),et=Q.centroid||Q.extent&&Q.extent.center||null;if(et){const nt=new Pe({text:`${tt.toFixed(2)} m`,color:[255,0,0],font:{size:12}});try{s?.add(new oi({geometry:et,symbol:nt}))}catch{}}q({area:tt,rings:Q.rings[0]}),k()}else(J.state==="abort"||J.state==="cancel")&&(H(new Error("measure canceled")),k())});try{S.create("polygon",{mode:"click"})}catch(J){H(J),k()}})}function L(){if(P){try{S.cancel()}catch{}P(new Error("New measurement started")),k()}return new Promise((q,H)=>{P=H,A=S.on("create",async J=>{if(J.state==="complete"){let Q=J.graphic&&J.graphic.geometry?J.graphic.geometry:void 0;if(!Q){const nt=J.vertices||J&&J.graphic&&J.graphic.paths;nt&&nt.length&&(Q=new ei({paths:nt,spatialReference:t.spatialReference}))}if(!Q){H(new Error("no geometry")),k();return}try{await aw.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"})}catch{try{J.graphic&&s&&s.remove(J.graphic)}catch{}q(null),k();return}try{J.graphic&&(J.graphic.symbol=b)}catch{}const tt=rD(Q,"meters"),et=Q.paths&&Q.paths[0]?Q.paths[0]:J.vertices||[];if(et&&et.length){const nt=et[0],vt=et[et.length-1],Tt=new Ct({x:(nt[0]+vt[0])/2,y:(nt[1]+vt[1])/2,spatialReference:t.spatialReference}),St=new Pe({text:`${tt.toFixed(2)} m`,color:[255,0,0],font:{size:12}});try{s?.add(new oi({geometry:Tt,symbol:St}))}catch{}}q({length:tt,paths:et}),k()}else(J.state==="abort"||J.state==="cancel")&&(H(new Error("measure canceled")),k())});try{S.create("polyline",{mode:"click"})}catch(J){H(J),k()}})}function F(){let q=!1,H=!1,J=null,Q=null,tt=[],et=[],nt=[];function vt(at){nt.push(at)}function Tt(){if(q)return;q=!0,J=new Tr({id:`track-record-${Date.now()}`});const at=t.map;at&&at.add(J),tt=[],et=[]}function St(){return q=!1,{path:tt,timestamps:et}}function pt(at,Lt,Yt){if(!q||!J)return;const Dt=Yt??Date.now();tt.push([at,Lt]),et.push(Dt);const Jt=new oi({geometry:new Ct({x:at,y:Lt,spatialReference:{wkid:4326}}),symbol:new rr({size:6,color:[255,0,0]})});J.add(Jt);for(const ui of nt)ui({x:at,y:Lt,t:Dt})}let ht=null;function _t(at,Lt=500){if(H)return;H=!0,Q=new Tr({id:`track-play-${Date.now()}`});const Yt="track-route-layer";let Dt=null;try{const si=t.map;if(si){const Cr=typeof si.findLayerById=="function"?si.findLayerById(Yt):null;Cr?Dt=Cr:(Dt=new Tr({id:Yt}),si.add(Dt))}}catch{}try{if(Dt&&at&&at.length){const si=new ei({paths:[at],spatialReference:{wkid:4326}}),Cr=new Wi({color:[255,0,0],width:3}),Yn=new oi({geometry:si,symbol:Cr});Dt.add(Yn)}}catch(si){console.error("failed to create persistent route polyline",si)}const Jt=t.map;try{Jt&&Jt.add(Q)}catch(si){console.error("failed to add playLayer to map",si)}let ui=0;console.debug("tracker.play starting, points:",at.length,"interval:",Lt),ht=setInterval(()=>{if(ui>=at.length){gt();return}const si=at[ui],Cr=new Ct({x:si[0],y:si[1],spatialReference:{wkid:4326}}),Yn=new oi({geometry:Cr,symbol:new rr({size:10,color:[255,0,0]})});try{Q.add(Yn)}catch(su){console.error("add graphic to playLayer failed",su)}ui++},Lt)}function gt(){if(H=!1,ht&&(clearInterval(ht),ht=null),Q){Q.removeAll();const at=t.map;try{at&&at.remove(Q)}catch{}Q=null}}return{startRecording:Tt,stopRecording:St,pushPoint:pt,play:_t,stopPlay:gt,onData:vt}}return{measureArea:C,measureLength:L,createTracker:F}}const Mft={style:{position:"absolute",left:"274px",top:"272px","z-index":"999",padding:"8px","border-radius":"4px",background:"rgba(255, 255, 255, 0.95)"}},Eft={style:{"margin-bottom":"8px",display:"flex",gap:"8px","flex-wrap":"wrap"}},$ft=Q9({__name:"test",setup(t){const e=Ly([]),i=Ly(null),s=Ly("vec");function l(gt){i.value?.switchBasemap(gt)}function f(){const gt=i.value?.getBasemapMode?.();gt&&(s.value=gt),pD(()=>{const at=i.value?.getLayerList?.();console.log(at,"initial",at&&Array.isArray(at)),at&&Array.isArray(at)&&(e.value=at)}),_t()}function y(gt){s.value=gt}function v(gt){e.value=gt}function b(){i.value?.destroyMap()}function S(){i.value?.initMap()}function A(){i.value?.resizeMap()}function P(){i.value?.setCenter([116.397428,39.90923])}function k(){i.value?.setZoom(14)}function C(){const gt=new Tr({id:"sampleGraphics",title:""}),at=new rr({style:"circle",color:[226,119,40],size:"12px",outline:{color:[255,255,255],width:1}}),Lt=[{x:116.397428,y:39.90923,attrs:{name:"Point A"}},{x:116.407428,y:39.91923,attrs:{name:"Point B"}}];for(const si of Lt){const Cr=new oi({geometry:new Ct({x:si.x,y:si.y,spatialReference:{wkid:4326}}),symbol:at,attributes:si.attrs});gt.add(Cr)}const Yt=new Tr({id:"sampleArea",title:""}),Dt=new Fe({rings:[[[116.395,39.907],[116.405,39.907],[116.405,39.915],[116.395,39.915],[116.395,39.907]]],spatialReference:{wkid:4326}}),Jt=new Ms({color:[255,0,0,.7],style:"solid",outline:{color:[200,0,0,.9],width:1}}),ui=new oi({geometry:Dt,symbol:Jt,attributes:{name:""}});Yt.add(ui),i.value?.addLayer(gt),i.value?.addLayer(Yt)}let L=null;function F(){if(!L&&i.value?.getView){const gt=i.value.getView();gt&&(L=Tft(gt))}}async function q(){if(F(),!!L)try{const gt=await L.measureArea();console.log("measured area m2:",gt.area,gt.rings)}catch(gt){console.error(gt)}}async function H(){if(F(),!!L)try{const gt=await L.measureLength();console.log("measured length m:",gt.length,gt.paths)}catch(gt){console.error(gt)}}let J=null;function Q(){F(),L&&(J=L.createTracker(),J.startRecording(),console.log("recording started"))}function tt(){if(!J)return;const gt=J.stopRecording();console.log("record stopped, path:",gt.path.length,"timestamps:",gt.timestamps.length)}function et(){if(!J)return;const gt=116.397+Math.random()*.01,at=39.909+Math.random()*.01;J.pushPoint(gt,at)}async function nt(){if(F(),!L)return;const gt=[[116.397428,39.90923],[116.3985,39.9105],[116.3998,39.912]];J||(J=L.createTracker());try{const at=i.value?.getView?.();if(at&&gt.length>0){const Lt=gt[0];await at.goTo({center:[Lt[0],Lt[1]],zoom:16})}}catch(at){console.warn("goTo failed before playback:",at)}J.play(gt,400)}function vt(){i.value?.setLayerVisibility?.("sampleGraphics",!0)}function Tt(){i.value?.setLayerVisibility?.("sampleGraphics",!1)}function St(gt){i.value?.toggleLayerVisibility?.(gt)}function pt(gt){i.value?.removeLayer?.(gt)}function ht(gt){i.value?.setLayerVisibility?.(gt.id,gt.visible)}async function _t(){try{const{data:gt}=await fD();if(!gt||!Array.isArray(gt))return;const at=new Tr({id:"amapPoints",title:"(AMap)"}),Lt=new jr({url:dD,width:"28px",height:"28px"}),Yt=new vk({title:"{title}",content:function(Dt){const Jt=Dt.graphic?.attributes||Dt.attributes||{};return`<div style="display:flex;padding:10px;align-items:center">
                  <div><img src="${window.location.origin+yD}" width="200px" /></div>
                  <div style="width:180px;line-height:30px;margin-left:20px">
                    <h3>${Jt.title||Jt.name||""}</h3>
                    <p>${Jt.count??""}</p>
                    <p><span style="color:blue">${Jt.status==1?"":""}</span></p>
                  </div>
                </div>`}});for(const Dt of gt){const Jt=new oi({geometry:new Ct({x:Dt.position[0],y:Dt.position[1],spatialReference:{wkid:4326}}),symbol:Lt,attributes:Dt,popupTemplate:Yt});at.add(Jt)}i.value?.addLayer(at)}catch(gt){console.error("importAMapPointsToArcGIS error",gt)}}return(gt,at)=>{const Lt=Rc("el-radio-button"),Yt=Rc("el-radio-group"),Dt=Rc("el-button");return vc(),H0("div",null,[ll("div",Mft,[wi(Yt,{modelValue:s.value,"onUpdate:modelValue":at[0]||(at[0]=Jt=>s.value=Jt),onChange:l,style:{display:"flex","flex-direction":"column",gap:"6px"}},{default:Ni(()=>[wi(Lt,{label:"vec"},{default:Ni(()=>[...at[1]||(at[1]=[Qi(" + ",-1)])]),_:1}),wi(Lt,{label:"img"},{default:Ni(()=>[...at[2]||(at[2]=[Qi(" + ",-1)])]),_:1})]),_:1},8,["modelValue"])]),ll("div",Eft,[wi(Dt,{type:"danger",onClick:b},{default:Ni(()=>[...at[3]||(at[3]=[Qi("",-1)])]),_:1}),wi(Dt,{type:"primary",onClick:S},{default:Ni(()=>[...at[4]||(at[4]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:A},{default:Ni(()=>[...at[5]||(at[5]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:P},{default:Ni(()=>[...at[6]||(at[6]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:k},{default:Ni(()=>[...at[7]||(at[7]=[Qi(" 14",-1)])]),_:1}),wi(Dt,{type:"success",onClick:C},{default:Ni(()=>[...at[8]||(at[8]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:vt},{default:Ni(()=>[...at[9]||(at[9]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:Tt},{default:Ni(()=>[...at[10]||(at[10]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:q},{default:Ni(()=>[...at[11]||(at[11]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:H},{default:Ni(()=>[...at[12]||(at[12]=[Qi("",-1)])]),_:1}),wi(Dt,{type:"warning",onClick:Q},{default:Ni(()=>[...at[13]||(at[13]=[Qi("",-1)])]),_:1}),wi(Dt,{type:"warning",onClick:tt},{default:Ni(()=>[...at[14]||(at[14]=[Qi("",-1)])]),_:1}),wi(Dt,{onClick:et},{default:Ni(()=>[...at[15]||(at[15]=[Qi(" mock ",-1)])]),_:1}),wi(Dt,{onClick:nt},{default:Ni(()=>[...at[16]||(at[16]=[Qi(" mock ",-1)])]),_:1})]),wi(olt,{ref_key:"mapComp",ref:i,center:[116.397428,39.90923],zoom:12,onReady:f,onBasemapChange:y,onLayerListChanged:v},null,512),wi(ylt,{class:"layer-panel",layers:e.value,onToggle:St,onRemove:pt,onVisibilityChange:ht},null,8,["layers"])])}}}),Aft=X9($ft,[["__scopeId","data-v-d44044b6"]]),a9t=Object.freeze(Object.defineProperty({__proto__:null,default:Aft},Symbol.toStringTag,{value:"Module"}));export{Ye as $,N8 as A,Gr as B,Mp as C,Ht as D,wt as E,ul as F,xe as G,ii as H,qr as I,ru as J,Vft as K,yt as L,QI as M,sE as N,Ao as O,ps as P,Or as Q,b5t as R,hn as S,ge as T,un as U,At as V,g5t as W,Mi as X,sL as Y,ke as Z,Ct as _,o1t as a,Ks as a$,H3 as a0,pv as a1,Gut as a2,ZP as a3,g6 as a4,tu as a5,JR as a6,v5t as a7,fs as a8,Ns as a9,h2 as aA,c2 as aB,wv as aC,aut as aD,Ls as aE,dit as aF,Oi as aG,fut as aH,BN as aI,KN as aJ,rut as aK,lut as aL,YN as aM,d6 as aN,ZN as aO,e2 as aP,Zlt as aQ,y6 as aR,j2 as aS,m6 as aT,It as aU,KV as aV,vW as aW,kW as aX,Ms as aY,Pe as aZ,Zt as a_,QP as aa,aL as ab,Yct as ac,Ta as ad,_5t as ae,U1t as af,Vut as ag,Ge as ah,Y5t as ai,But as aj,x5t as ak,uit as al,t4 as am,S5t as an,A5t as ao,nf as ap,O1 as aq,Nl as ar,cn as as,l1 as at,Ft as au,cs as av,kt as aw,Ot as ax,uf as ay,Pp as az,Zbt as b,xg as b$,Fe as b0,d1 as b1,QV as b2,tH as b3,kP as b4,mW as b5,ait as b6,vO as b7,t1t as b8,Idt as b9,fo as bA,Pl as bB,rs as bC,ts as bD,PZ as bE,wgt as bF,x4 as bG,Hr as bH,Ei as bI,Wt as bJ,Y0 as bK,uw as bL,jft as bM,jrt as bN,iE as bO,Re as bP,Xt as bQ,_O as bR,f4 as bS,xO as bT,bO as bU,Ox as bV,Tmt as bW,Jgt as bX,FE as bY,p2 as bZ,K_ as b_,Te as ba,Odt as bb,p6 as bc,n_ as bd,Pdt as be,kdt as bf,Rdt as bg,Cdt as bh,Rr as bi,uE as bj,TD as bk,eT as bl,tT as bm,QS as bn,XS as bo,f1t as bp,jE as bq,oo as br,m1 as bs,Tl as bt,fn as bu,Ll as bv,ze as bw,rt as bx,Ol as by,Il as bz,sR as c,ks as c$,kp as c0,kd as c1,ri as c2,Vn as c3,y_ as c4,ln as c5,Be as c6,a1 as c7,Oo as c8,AN as c9,n5t as cA,act as cB,Dg as cC,Ds as cD,oit as cE,ko as cF,Tdt as cG,eh as cH,jt as cI,Bi as cJ,y4 as cK,ur as cL,k_ as cM,Ce as cN,Mo as cO,gT as cP,Wm as cQ,B3t as cR,wO as cS,r3t as cT,Yrt as cU,IK as cV,Eo as cW,V3t as cX,Lp as cY,LR as cZ,Br as c_,h1t as ca,u1t as cb,Wn as cc,h1 as cd,$gt as ce,ZK as cf,Ogt as cg,kgt as ch,Tgt as ci,Id as cj,U_ as ck,$r as cl,e1 as cm,Pgt as cn,zg as co,uq as cp,lgt as cq,vr as cr,Bt as cs,on as ct,Qft as cu,$0t as cv,LP as cw,Jn as cx,D4 as cy,UN as cz,oi as d,Qt as d$,ay as d0,iyt as d1,vR as d2,Ju as d3,SV as d4,Jp as d5,J0t as d6,nC as d7,Dq as d8,ae as d9,yh as dA,aZ as dB,e7 as dC,E_ as dD,vk as dE,hk as dF,xgt as dG,_gt as dH,fgt as dI,Dd as dJ,Ld as dK,cZ as dL,L7 as dM,di as dN,TH as dO,Iat as dP,Aat as dQ,w1t as dR,m1t as dS,v1t as dT,Xyt as dU,cyt as dV,Nh as dW,iat as dX,rh as dY,Rrt as dZ,Svt as d_,Vi as da,P0t as db,t7 as dc,kr as dd,Cyt as de,t_ as df,t1 as dg,kE as dh,Jdt as di,Ydt as dj,Dgt as dk,Qdt as dl,Rq as dm,Lgt as dn,Xdt as dp,Zdt as dq,Kdt as dr,Agt as ds,Igt as dt,ltt as du,Ah as dv,cr as dw,hgt as dx,yX as dy,_2 as dz,Gi as e,Es as e$,Mvt as e0,O4 as e1,of as e2,$a as e3,se as e4,fq as e5,Pn as e6,_X as e7,Vr as e8,zt as e9,zi as eA,BT as eB,xwt as eC,vwt as eD,awt as eE,Ti as eF,nwt as eG,Awt as eH,Iwt as eI,Nft as eJ,Lft as eK,J8 as eL,iU as eM,i1 as eN,btt as eO,Smt as eP,tyt as eQ,p1t as eR,lA as eS,gX as eT,Mgt as eU,d4 as eV,Vl as eW,QK as eX,Ngt as eY,Cgt as eZ,XK as e_,Pr as ea,Rs as eb,Nw as ec,ti as ed,lm as ee,eg as ef,Cw as eg,Dw as eh,lC as ei,Nt as ej,Bd as ek,ni as el,Bm as em,ust as en,Ii as eo,kv as ep,pe as eq,w1 as er,y5 as es,syt as et,omt as eu,Emt as ev,Ea as ew,U$ as ex,dK as ey,mo as ez,Et as f,NV as f$,x1t as f0,C_ as f1,eA as f2,x2 as f3,Xs as f4,M2 as f5,tgt as f6,Xj as f7,D0t as f8,XD as f9,jr as fA,sbt as fB,Wp as fC,$o as fD,ef as fE,cA as fF,Het as fG,Wet as fH,ls as fI,$bt as fJ,Tbt as fK,Ebt as fL,pV as fM,obt as fN,Jg as fO,wa as fP,yp as fQ,hs as fR,fv as fS,ao as fT,GE as fU,sA as fV,mbt as fW,Z$ as fX,Wdt as fY,q1t as fZ,OH as f_,gh as fa,f_ as fb,g1 as fc,A0t as fd,pJ as fe,Apt as ff,lV as fg,y1 as fh,M0t as fi,g_ as fj,Qd as fk,Nq as fl,$1t as fm,dp as fn,Rgt as fo,Oh as fp,xN as fq,rlt as fr,Hat as fs,Xat as ft,PN as fu,wN as fv,Xe as fw,hbt as fx,nbt as fy,Pi as fz,fe as g,vlt as g$,eyt as g0,Cs as g1,ka as g2,Aa as g3,Tr as g4,L8 as g5,qe as g6,re as g7,AM as g8,xd as g9,_D as gA,vct as gB,F_ as gC,Cft as gD,Gl as gE,gbt as gF,ybt as gG,Kat as gH,Yat as gI,lw as gJ,l1t as gK,Jat as gL,I2t as gM,utt as gN,b0t as gO,Le as gP,w0t as gQ,ye as gR,Mdt as gS,Edt as gT,o9t as gU,o0t as gV,y0t as gW,_wt as gX,hP as gY,zN as gZ,PM as g_,Ui as ga,VC as gb,HC as gc,fmt as gd,Amt as ge,lwt as gf,gwt as gg,sgt as gh,igt as gi,rgt as gj,v1 as gk,ir as gl,bc as gm,ngt as gn,th as go,V3 as gp,sct as gq,nct as gr,Zl as gs,NL as gt,df as gu,Sbt as gv,a5t as gw,zE as gx,vj as gy,Wlt as gz,Tj as h,Yl as h$,myt as h0,Rp as h1,LN as h2,qH as h3,mU as h4,aU as h5,_A as h6,uH as h7,st as h8,lW as h9,V1t as hA,Qr as hB,co as hC,Wmt as hD,a1t as hE,u0t as hF,zn as hG,Ai as hH,fd as hI,ya as hJ,hf as hK,vtt as hL,Llt as hM,d1t as hN,a3t as hO,k1t as hP,Yvt as hQ,_i as hR,By as hS,_b as hT,wc as hU,E2 as hV,nyt as hW,kh as hX,A1t as hY,YF as hZ,Xmt as h_,lH as ha,F2 as hb,Gmt as hc,Umt as hd,$s as he,mdt as hf,XV as hg,nL as hh,DZ as hi,imt as hj,J9 as hk,emt as hl,S9 as hm,iT as hn,Vm as ho,fu as hp,nE as hq,aE as hr,lE as hs,Gft as ht,S0t as hu,k3t as hv,Dft as hw,a6 as hx,_mt as hy,umt as hz,de as i,BP as i$,B2 as i0,o3 as i1,Ph as i2,Sd as i3,Yp as i4,Hp as i5,Yi as i6,_l as i7,iit as i8,Udt as i9,K5t as iA,mht as iB,lM as iC,ftt as iD,lJ as iE,oJ as iF,XW as iG,I8 as iH,DJ as iI,L0t as iJ,Xr as iK,I0t as iL,KE as iM,O0t as iN,k0t as iO,tn as iP,mh as iQ,y2 as iR,NH as iS,f0t as iT,UE as iU,ugt as iV,fbt as iW,rbt as iX,F9 as iY,ibt as iZ,ebt as i_,iet as ia,S1t as ib,Gtt as ic,qw as id,oA as ie,aA as ig,fi as ih,Lut as ii,b1t as ij,rW as ik,KP as il,Ket as im,XP as io,ept as ip,Ndt as iq,tpt as ir,nA as is,zy as it,Wft as iu,rit as iv,b6 as iw,Ji as ix,nht as iy,J5t as iz,os as j,nh as j$,Od as j0,t0t as j1,$yt as j2,pbt as j3,cbt as j4,lbt as j5,Twt as j6,Dbt as j7,Abt as j8,Vs as j9,Vet as jA,HR as jB,G as jC,_0t as jD,Os as jE,$8 as jF,u5t as jG,n1t as jH,Ir as jI,CM as jJ,hct as jK,R5t as jL,o2 as jM,dct as jN,Eh as jO,o5t as jP,ist as jQ,Hm as jR,M3t as jS,Qs as jT,sT as jU,qm as jV,aC as jW,E9 as jX,P3t as jY,Dp as jZ,A3t as j_,$5t as ja,T5t as jb,Uut as jc,hut as jd,zut as je,w6 as jf,uL as jg,E5t as jh,I1 as ji,cht as jj,V4 as jk,Pa as jl,Fut as jm,kut as jn,ZV as jo,YV as jp,f5t as jq,qet as jr,fit as js,Pm as jt,tet as ju,Jtt as jv,RP as jw,eU as jx,pA as jy,Am as jz,Jl as k,bN as k$,I3t as k0,Mg as k1,ZS as k2,O2t as k3,RR as k4,G4 as k5,h9 as k6,CR as k7,_T as k8,YS as k9,qat as kA,ca as kB,gj as kC,Ts as kD,DP as kE,mM as kF,R0t as kG,BO as kH,ba as kI,zz as kJ,Yft as kK,Kft as kL,Jft as kM,YD as kN,Ih as kO,Mwt as kP,tdt as kQ,Fu as kR,Iq as kS,i9t as kT,s1t as kU,N1t as kV,uP as kW,mi as kX,Ibt as kY,LV as kZ,DV as k_,T0t as ka,EF as kb,iJ as kc,_a as kd,l_ as ke,uj as kf,G1t as kg,Htt as kh,kR as ki,qtt as kj,Fi as kk,Rft as kl,gd as km,T9 as kn,ER as ko,p4 as kp,qC as kq,Dat as kr,gE as ks,er as kt,hj as ku,bE as kv,$E as kw,dbt as kx,T_ as ky,rc as kz,t2 as l,Sa as l$,HW as l0,WW as l1,JS as l2,Gvt as l3,Uvt as l4,zvt as l5,Fvt as l6,qvt as l7,Bvt as l8,jvt as l9,vet as lA,wet as lB,WR as lC,VQ as lD,oht as lE,Kbt as lF,wF as lG,Y0t as lH,ID as lI,Sut as lJ,wx as lK,rT as lL,O3t as lM,pT as lN,jU as lO,VU as lP,u1 as lQ,Gdt as lR,vdt as lS,Z1t as lT,x_ as lU,idt as lV,edt as lW,I1t as lX,OF as lY,w$ as lZ,W1t as l_,Dvt as la,F$ as lb,iP as lc,Vat as ld,Ytt as le,Q6 as lf,Lvt as lg,adt as lh,j_ as li,UU as lj,_nt as lk,xnt as ll,iwt as lm,Znt as ln,rwt as lo,Qnt as lp,N0 as lq,ewt as lr,i_ as ls,Zft as lt,r_ as lu,Xft as lv,A4 as lw,lmt as lx,nmt as ly,kN as lz,Kp as m,Jmt as m$,Hc as m0,cR as m1,jl as m2,ai as m3,Sdt as m4,nl as m5,q3t as m6,sv as m7,r6 as m8,us as m9,Bn as mA,nR as mB,O5t as mC,cct as mD,Nd as mE,k8 as mF,vD as mG,MP as mH,$V as mI,j1t as mJ,_k as mK,q4 as mL,jP as mM,WS as mN,m0t as mO,yR as mP,PR as mQ,Np as mR,yo as mS,l3t as mT,J2 as mU,a9 as mV,C4 as mW,rf as mX,fK as mY,T0 as mZ,Ac as m_,nv as ma,Owt as mb,xo as mc,int as md,hnt as me,MD as mf,a0t as mg,wE as mh,f2 as mi,d0t as mj,GN as mk,T1 as ml,l5t as mm,Flt as mn,Myt as mo,Tyt as mp,Hbt as mq,klt as mr,Oa as ms,xL as mt,li as mu,P5t as mv,uct as mw,a2 as mx,iu as my,Ia as mz,Mt as n,T1t as n$,Egt as n0,kq as n1,Oq as n2,Zmt as n3,Ymt as n4,Hmt as n5,aV as n6,Dl as n7,_st as n8,Sst as n9,sW as nA,LH as nB,C1t as nC,R1t as nD,AV as nE,_ut as nF,Mut as nG,b1 as nH,_1 as nI,x1 as nJ,aW as nK,nW as nL,oW as nM,$1 as nN,oE as nO,qn as nP,PE as nQ,n0t as nR,uA as nS,K6 as nT,VE as nU,Hst as nV,KO as nW,Spt as nX,c2t as nY,h2t as nZ,HQ as n_,Tst as na,rd as nb,cgt as nc,Mbt as nd,gm as ne,C0t as nf,i$ as ng,Nat as nh,egt as ni,yet as nj,Jvt as nk,Jrt as nl,mT as nm,Rvt as nn,tst as no,vZ as np,Ewt as nq,s0 as nr,ua as ns,bl as nt,Hi as nu,sX as nv,Eet as nw,hW as nx,Cut as ny,iW as nz,Wi as o,Z2 as o$,Vtt as o0,kQ as o1,y1t as o2,BE as o3,gp as o4,qp as o5,l0t as o6,db as o7,smt as o8,rmt as o9,s4 as oA,Gm as oB,fP as oC,Xvt as oD,Kvt as oE,Zvt as oF,Ktt as oG,Nf as oH,c1t as oI,zr as oJ,abt as oK,Yz as oL,wk as oM,ubt as oN,agt as oO,Kmt as oP,Bmt as oQ,qmt as oR,Vmt as oS,Ln as oT,Z_ as oU,E0t as oV,gl as oW,qft as oX,MR as oY,Hot as oZ,an as o_,c_ as oa,wW as ob,gW as oc,Zet as od,yW as oe,UZ as of,W4 as og,xdt as oh,HL as oi,q5t as oj,Op as ok,Cat as ol,Gh as om,bD as on,Dut as oo,nT as op,ml as oq,Vst as or,T3t as os,KS as ot,est as ou,hT as ov,uT as ow,Wtt as ox,_1t as oy,r4 as oz,r1 as p,kht as p$,TR as p0,$R as p1,Mtt as p2,k2t as p3,Ctt as p4,R2t as p5,ZH as p6,wyt as p7,hr as p8,tr as p9,qQ as pA,CQ as pB,Put as pC,A1 as pD,k5t as pE,oL as pF,NQ as pG,D1t as pH,ogt as pI,m3t as pJ,gU as pK,oh as pL,_o as pM,ntt as pN,N4 as pO,MV as pP,L1t as pQ,wlt as pR,Slt as pS,G0 as pT,NM as pU,G9 as pV,Qm as pW,Lht as pX,vA as pY,PL as pZ,O6 as p_,J1t as pa,Tut as pb,Imt as pc,Omt as pd,$mt as pe,$F as pf,x0t as pg,I5t as ph,Ql as pi,c5t as pj,oct as pk,Po as pl,lct as pm,FL as pn,Lbt as po,Ro as pp,zlt as pq,Nbt as pr,zbt as ps,Ubt as pt,as as pu,kM as pv,lv as pw,V5t as px,SA as py,YR as pz,h0t as q,$m as q$,jlt as q0,wA as q1,u6 as q2,Dht as q3,vpt as q4,Vbt as q5,Gbt as q6,Ud as q7,x$ as q8,xbt as q9,Adt as qA,$dt as qB,yU as qC,ant as qD,Wk as qE,AF as qF,lnt as qG,rnt as qH,pyt as qI,Wbt as qJ,O1t as qK,w3t as qL,v3t as qM,Ovt as qN,kvt as qO,fR as qP,M1 as qQ,Bl as qR,dX as qS,gk as qT,yZ as qU,w7 as qV,Ddt as qW,jdt as qX,c0t as qY,oj as qZ,Rut as q_,oS as qa,h6 as qb,mlt as qc,kn as qd,Ylt as qe,xlt as qf,p5t as qg,TQ as qh,MQ as qi,JQ as qj,dR as qk,xT as ql,yC as qm,f3t as qn,d3t as qo,y3t as qp,g3t as qq,t3t as qr,i3t as qs,e3t as qt,xst as qu,zw as qv,e1t as qw,Ldt as qx,z2 as qy,u2t as qz,ie as r,_Z as r$,Pvt as r0,Sgt as r1,dgt as r2,mgt as r3,ygt as r4,vgt as r5,ggt as r6,bgt as r7,Qyt as r8,U3t as r9,Drt as rA,p0t as rB,Ztt as rC,bV as rD,ryt as rE,PV as rF,FV as rG,F1t as rH,xV as rI,Hw as rJ,z1t as rK,kmt as rL,Utt as rM,B1t as rN,Y1t as rO,Ws as rP,lZ as rQ,X3t as rR,Q3t as rS,Uft as rT,pZ as rU,Z3t as rV,jd as rW,zd as rX,hZ as rY,e0t as rZ,bZ as r_,H6 as ra,pgt as rb,Fdt as rc,ZF as rd,e$ as re,o3t as rf,u3t as rg,n3t as rh,lst as ri,s3t as rj,wT as rk,Cvt as rl,Nvt as rm,h3t as rn,c3t as ro,b3t as rp,_3t as rq,Vvt as rr,x3t as rs,S3t as rt,Wrt as ru,Zrt as rv,Qvt as rw,$C as rx,wp as ry,p3t as rz,ct as s,bbt as s$,E4 as s0,Yot as s1,Q1t as s2,y2t as s3,MW as s4,rR as s5,AP as s6,v$ as s7,TW as s8,tht as s9,wmt as sA,bmt as sB,eet as sC,NW as sD,CW as sE,$P as sF,QN as sG,mK as sH,uC as sI,P2t as sJ,$wt as sK,ne as sL,Kl as sM,wwt as sN,Swt as sO,bwt as sP,_W as sQ,RW as sR,l9 as sS,JN as sT,fyt as sU,Q5t as sV,Jwt as sW,xut as sX,Kut as sY,uQ as sZ,x2t as s_,d5t as sa,pH as sb,FQ as sc,Iyt as sd,Brt as se,X1t as sf,SJ as sg,vp as sh,HS as si,G3t as sj,F3t as sk,z3t as sl,j3t as sm,D3t as sn,wst as so,dC as sp,Wvt as sq,Hvt as sr,gst as ss,Ivt as st,$j as su,SD as sv,t9t as sw,pit as sx,E3t as sy,$3t as sz,Fbt as t,K1t as t$,Bbt as t0,Mmt as t1,pmt as t2,gmt as t3,dmt as t4,i0t as t5,Dmt as t6,Lmt as t7,Hft as t8,hmt as t9,Cp as tA,GQ as tB,g1t as tC,IQ as tD,jZ as tE,m5t as tF,K0t as tG,AA as tH,OA as tI,CN as tJ,pct as tK,Z5t as tL,W5t as tM,Jct as tN,gyt as tO,Elt as tP,Qbt as tQ,t5t as tR,Xbt as tS,pn as tT,mmt as tU,glt as tV,_bt as tW,yyt as tX,Gx as tY,dyt as tZ,X5t as t_,H1t as ta,xmt as tb,sK as tc,Met as td,UR as te,g0t as tf,H8 as tg,w5t as th,S2t as ti,vU as tj,R6 as tk,VL as tl,qL as tm,ymt as tn,QH as to,amt as tp,Tc as tq,FZ as tr,Zgt as ts,zft as tt,wD as tu,Fft as tv,y5t as tw,iht as tx,cmt as ty,R3t as tz,rr as u,l6 as u0,Ux as u1,u4 as u2,LE as u3,v0t as u4,_lt as u5,vmt as u6,h5t as u7,pW as u8,uW as u9,$lt as ua,Ue as ub,e9t as uc,jbt as ud,Nut as ue,pf as uf,cf as ug,zx as uh,bW as ui,bpt as uj,oyt as uk,lyt as ul,H3t as um,vbt as un,a9t as uo,_ as v,E as w,Y as x,ei as y,Lq as z};
