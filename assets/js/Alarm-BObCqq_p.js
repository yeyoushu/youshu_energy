import{g as X}from"./index-CWtyz5ej.js";import{_ as Y}from"./stepForm.vue_vue_type_script_setup_true_lang-BYjEwCFo.js";import{k as Z,y as d,L as h,r as n,m as g,o as m,p as e,l as o,F as q,n as B,c,u as ee,z as i,t as V,E as le}from"./vendor-BrY8b94Q.js";const oe={AlarmList:"/alarmList"},ae=()=>X(oe.AlarmList),te={description:"故障描述",address:"设备地址",equNo:"设备号",level:"告警级别",time:"故障时间",code:"故障代码",status:"当前状态"},ne=k=>te[k]||k,ue={key:2},me=Z({__name:"Alarm",setup(k){const y=d(1),I=d([]),U=d([]),b=d(!1),D=[{title:"基本信息"},{title:"审批信息"},{title:"负责人信息"}],t=d({basicInfo:{name:"",email:"",tel:"",no:"",urgent:!0,other:[],remarks:""},shenpi:{a:"",b:""},info:{person:"",tel:""}}),E={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],tel:[{required:!0,message:"请输入电话",trigger:"blur"}],no:[{required:!0,message:"请输入工号",trigger:"blur"}]},M={a:[{required:!0,message:"不能为空",trigger:"blur"}],b:[{required:!0,message:"不能为空",trigger:"blur"}]},S={person:[{required:!0,message:"不能为空",trigger:"blur"}],tel:[{required:!0,message:"不能为空",trigger:"blur"}]},L=d(),C=d(),A=d(),F=()=>{console.log(t.value),le({message:"指派成功",type:"success"}),b.value=!1};h(async()=>{const{data:f}=await ae();I.value=f,U.value=I.value.filter(l=>l.level===y.value),console.log(f,"报警")});const T=f=>{console.log(f),U.value=I.value.filter(l=>l.level===f)};return(f,l)=>{const _=n("el-radio-button"),j=n("el-radio-group"),z=n("el-card"),G=n("el-alert"),H=n("el-tag"),J=n("el-text"),N=n("el-descriptions-item"),R=n("el-button"),K=n("el-descriptions"),p=n("el-input"),u=n("el-form-item"),O=n("el-switch"),v=n("el-checkbox"),P=n("el-checkbox-group"),w=n("el-form"),r=n("el-option"),$=n("el-select"),Q=n("el-result"),W=n("el-drawer");return m(),g(q,null,[e(z,null,{default:o(()=>[e(j,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),size:"large",class:"mt",onChange:T},{default:o(()=>[e(_,{label:"严重告警",value:1}),e(_,{label:"紧急告警",value:2}),e(_,{label:"重要告警",value:3}),e(_,{label:"一般告警",value:4})]),_:1},8,["modelValue"])]),_:1}),(m(!0),g(q,null,B(U.value,a=>(m(),c(z,{class:"mt",key:a.equNo},{default:o(()=>[e(G,{title:`${a.address}充电桩充电异常`,type:"warning","show-icon":""},null,8,["title"]),e(K,{border:!0,column:4,direction:"vertical",class:"mt"},{default:o(()=>[(m(!0),g(q,null,B(a,(s,x)=>(m(),c(N,{label:ee(ne)(x)},{default:o(()=>[x=="level"?(m(),c(H,{key:0,z:s==1?"danger":s==2?"warning":"info"},{default:o(()=>[i(V(s==1?"严重":s==2?"紧急":"一般"),1)]),_:2},1032,["z"])):x=="status"?(m(),c(J,{key:1,type:"danger"},{default:o(()=>[i(V(s==1?"待指派":s==2?"处理中":"处理异常"),1)]),_:2},1024)):(m(),g("span",ue,V(s),1))]),_:2},1032,["label"]))),256)),e(N,{label:"操作"},{default:o(()=>[e(R,{type:a.status==2?"warning":"primary",onClick:l[1]||(l[1]=s=>b.value=!0)},{default:o(()=>[i(V(a.status==1?"指派":a.status==2?"催办":"查看"),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(W,{modelValue:b.value,"onUpdate:modelValue":l[14]||(l[14]=a=>b.value=a),title:"报警任务指派"},{default:o(()=>[e(Y,{steps:D,form1:L.value,form2:C.value,form3:A.value,"on@handleSubmit":F},{"step-1":o(()=>[e(w,{model:t.value.basicInfo,rules:E,ref_key:"form1",ref:L},{default:o(()=>[e(u,{label:"姓名：",prop:"name"},{default:o(()=>[e(p,{modelValue:t.value.basicInfo.name,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.basicInfo.name=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"邮箱：",prop:"email"},{default:o(()=>[e(p,{modelValue:t.value.basicInfo.email,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.basicInfo.email=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"电话：",prop:"tel"},{default:o(()=>[e(p,{modelValue:t.value.basicInfo.tel,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.basicInfo.tel=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"工号：",prop:"no"},{default:o(()=>[e(p,{modelValue:t.value.basicInfo.no,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.basicInfo.no=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"是否加急："},{default:o(()=>[e(O,{modelValue:t.value.basicInfo.urgent,"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.basicInfo.urgent=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"其他选项："},{default:o(()=>[e(P,{modelValue:t.value.basicInfo.other,"onUpdate:modelValue":l[7]||(l[7]=a=>t.value.basicInfo.other=a)},{default:o(()=>[e(v,{value:"1"},{default:o(()=>[...l[15]||(l[15]=[i("更换设备",-1)])]),_:1}),e(v,{value:"2"},{default:o(()=>[...l[16]||(l[16]=[i("仅维修",-1)])]),_:1}),e(v,{value:"3"},{default:o(()=>[...l[17]||(l[17]=[i("需拍照片",-1)])]),_:1}),e(v,{value:"4"},{default:o(()=>[...l[18]||(l[18]=[i("需报备",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"其他备注信息："},{default:o(()=>[e(p,{modelValue:t.value.basicInfo.remarks,"onUpdate:modelValue":l[8]||(l[8]=a=>t.value.basicInfo.remarks=a),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),"step-2":o(()=>[e(w,{model:t.value.shenpi,ref_key:"form2",ref:C,rules:M},{default:o(()=>[e(u,{label:"审批部门",prop:"a"},{default:o(()=>[e($,{placeholder:"请选择审批部门",modelValue:t.value.shenpi.a,"onUpdate:modelValue":l[9]||(l[9]=a=>t.value.shenpi.a=a)},{default:o(()=>[e(r,{label:"总裁办",value:"1"}),e(r,{label:"运营部",value:"2"}),e(r,{label:"维修部",value:"3"}),e(r,{label:"市场部",value:"4"}),e(r,{label:"财务部",value:"5"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"抄送部门",prop:"b"},{default:o(()=>[e($,{placeholder:"请选择抄送部门",modelValue:t.value.shenpi.b,"onUpdate:modelValue":l[10]||(l[10]=a=>t.value.shenpi.b=a)},{default:o(()=>[e(r,{label:"总裁办",value:"1"}),e(r,{label:"运营部",value:"2"}),e(r,{label:"维修部",value:"3"}),e(r,{label:"市场部",value:"4"}),e(r,{label:"财务部",value:"5"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),"step-3":o(()=>[e(w,{model:t.value.info,rules:S,ref_key:"form3",ref:A},{default:o(()=>[e(u,{label:"负责人姓名：",prop:"person"},{default:o(()=>[e(p,{modelValue:t.value.info.person,"onUpdate:modelValue":l[11]||(l[11]=a=>t.value.info.person=a)},null,8,["modelValue"])]),_:1}),e(u,{label:"负责人电话：",prop:"tel"},{default:o(()=>[e(p,{modelValue:t.value.info.tel,"onUpdate:modelValue":l[12]||(l[12]=a=>t.value.info.tel=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["form1","form2","form3"]),e(Q,{icon:"warning",title:"设备编号：CD1001","sub-title":"该任务已催促2次，请抓紧处理"},{extra:o(()=>[e(R,{type:"primary",onClick:l[13]||(l[13]=a=>b.value=!1)},{default:o(()=>[...l[19]||(l[19]=[i("我已知晓",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{me as default};
