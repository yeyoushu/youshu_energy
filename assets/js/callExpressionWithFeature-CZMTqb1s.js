import{V as i,s as l}from"./test-DMnSxVQs.js";import{B as p,H as d,D as g,C as y}from"./quantizationUtils-DwvMSTst.js";import"./index-BJQUWR-1.js";import"./vendor-CHjNVy30.js";import"./station-DfQHTTxy.js";function P(a,r,e,n,o,t){if(a==null)return null;const s=a.references("geometry")&&t?f(r,n,t):r,c=a.repurposeFeature(s,o);try{return a.evaluate(c,e)}catch(m){return i.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",m),null}}const u=new Map;function f(a,r,e){const{transform:n,hasZ:o,hasM:t}=e;u.has(r)||u.set(r,w(r));const s=u.get(r)(a.geometry,n,o,t);return{...a,geometry:s}}function w(a){const r={};switch(a){case"esriGeometryPoint":return(e,n,o,t)=>y(n,r,e,o,t);case"esriGeometryPolygon":return(e,n,o,t)=>g(n,r,e,o,t);case"esriGeometryPolyline":return(e,n,o,t)=>d(n,r,e,o,t);case"esriGeometryMultipoint":return(e,n,o,t)=>p(n,r,e,o,t);default:return i.getLogger("esri.views.2d.support.arcadeOnDemand").error(new l("mapview-arcade",`Unable to handle geometryType: ${a}`)),e=>e}}export{P as default};
