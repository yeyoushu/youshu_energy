import{c as j}from"./operation-CtG-8mEF.js";import{j as A,r as m,q as E,y as M,a as P,e as d,f as U,o as g,w as l,g as e,c as z,F as G,n as H,l as v,h as V,t as I}from"./vendor-CHjNVy30.js";import"./index-CulM0VMq.js";const J={class:"card-header"},X=A({__name:"Total",setup(K){const f=m(""),b=m(),q={children:"children",label:"label"},k=m([]),_=m(""),y=m(),C=E({name:[{required:!0,message:"请输入模板名称",trigger:"blur"}],service:[{required:!0,message:"请输入服务费",trigger:"blur"}],parking:[{required:!0,message:"请输入停车费",trigger:"blur"}],remarks:[{required:!0,message:"请输入备注",trigger:"blur"}]}),r=m({name:"",service:"",parking:"",remarks:"",date:[{date1:"",date2:"",electricity:""}]});M(f,o=>{b.value.filter(o)}),P(async()=>{const{data:o}=await j();k.value=o,console.log("城市",o)});const F=o=>{o.children||(_.value=o.label,h())},N=(o,a)=>o?a.label.includes(o):!0,B=()=>{r.value.date.push({date1:"",date2:"",electricity:""})},R=()=>{y.value?.validate(o=>{o&&console.log(r.value)})},h=()=>{r.value={name:"",service:"",parking:"",remarks:"",date:[{date1:"",date2:"",electricity:""}]}};return(o,a)=>{const c=d("el-button"),s=d("el-input"),T=d("el-tree"),w=d("el-card"),n=d("el-col"),u=d("el-form-item"),x=d("el-time-picker"),D=d("el-form"),L=d("el-row");return g(),U(L,{gutter:20},{default:l(()=>[e(n,{span:6},{default:l(()=>[e(w,null,{default:l(()=>[e(s,{style:{width:"80%"},placeholder:"请输入关键词",modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=t=>f.value=t)},{append:l(()=>[e(c,{icon:"Search"})]),_:1},8,["modelValue"]),e(T,{ref_key:"treeRef",ref:b,style:{"max-width":"600px"},props:q,data:k.value,"filter-node-method":N,onNodeClick:F,class:"mt","show-checkbox":""},null,8,["data"])]),_:1})]),_:1}),e(n,{span:18},{default:l(()=>[e(w,null,{header:l(()=>[v("div",J,[v("h3",null,I(_.value)+":计费模板",1)])]),default:l(()=>[e(D,{ref_key:"ruleFormRef",ref:y,model:r.value,rules:C,"label-width":"auto"},{default:l(()=>[e(u,{label:"模板名称:",prop:"name"},{default:l(()=>[e(s,{modelValue:r.value.name,"onUpdate:modelValue":a[1]||(a[1]=t=>r.value.name=t),placeholder:"请输入模板名称",style:{"max-width":"200px"},disabled:!_.value},null,8,["modelValue","disabled"])]),_:1}),(g(!0),z(G,null,H(r.value.date,(t,p)=>(g(),U(u,{label:"时间区间"+(p+1)+":",key:p},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"开始时间",prop:"date."+p+".date1",rules:{required:!0,message:"时间不能为空",trigger:"blur"}},{default:l(()=>[e(x,{"value-format":"hh:mm:ss",modelValue:t.date1,"onUpdate:modelValue":i=>t.date1=i,placeholder:"选择开始时间",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),e(n,{span:1},{default:l(()=>[...a[5]||(a[5]=[v("span",{class:"ml"},"--",-1)])]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{prop:"date."+p+".date2",label:"结束时间",rules:{required:!0,message:"时间不能为空",trigger:"blur"}},{default:l(()=>[e(x,{"value-format":"hh:mm:ss",modelValue:t.date2,"onUpdate:modelValue":i=>t.date2=i,placeholder:"选择结束时间",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),e(n,{span:6},{default:l(()=>[e(u,{label:"电费",prop:"date."+p+".electricity",rules:{required:!0,message:"电费不能为空",trigger:"blur"}},{default:l(()=>[e(s,{placeholder:"请输入电费",modelValue:t.electricity,"onUpdate:modelValue":i=>t.electricity=i,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)]),_:2},1032,["label"]))),128)),e(c,{type:"primary",class:"mb",onClick:B},{default:l(()=>[...a[6]||(a[6]=[V("添加时间区间",-1)])]),_:1}),e(u,{label:"服务费：",prop:"service"},{default:l(()=>[e(s,{modelValue:r.value.service,"onUpdate:modelValue":a[2]||(a[2]=t=>r.value.service=t),style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1}),e(u,{label:"停车费：",prop:"parking"},{default:l(()=>[e(s,{modelValue:r.value.parking,"onUpdate:modelValue":a[3]||(a[3]=t=>r.value.parking=t),style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1}),e(u,{label:"特殊备注：",prop:"remarks"},{default:l(()=>[e(s,{modelValue:r.value.remarks,"onUpdate:modelValue":a[4]||(a[4]=t=>r.value.remarks=t),type:"textarea"},null,8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(c,{type:"primary",onClick:R},{default:l(()=>[...a[7]||(a[7]=[V("创建",-1)])]),_:1}),e(c,{onClick:h},{default:l(()=>[...a[8]||(a[8]=[V("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}});export{X as default};
