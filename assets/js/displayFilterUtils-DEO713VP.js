import{cH as m,dR as N,dS as s,dT as l,dU as S}from"./test-Dp3_P59c.js";function b(n,r){return{...r,filterMode:n.mode}}function p(n,r){return d(n,r).next().value??null}function y(n,r,t){const e=x(n);if(e&&(s(r,e[0])||l(t,e[1])))return"";const a=Array.from(d(n,r,t)),u=T(a,r,t)?"1=1":a.map((c=>c.where||"1=1")).reduce(((c,o)=>S(c,o)),"");return u&&u!=="1=1"?u:""}function x(n){if(I(n)==="manual")return null;const r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:e}of n.filters)r[0]=Math.max(r[0],i(t)),r[1]=Math.min(r[1],f(e));return r}function*d(n,r,t){if(I(n)==="manual"){const e=n.filters.find((a=>a.id===n.activeFilterId));e&&(yield e)}else{typeof r=="object"&&(r=r.scale);for(const e of n.filters)h(e.minScale,e.maxScale,r,t)&&(yield e)}}function T(n,r,t){if(n.length===0)return!0;const e=i(n.at(0)?.minScale),a=f(n.at(-1)?.maxScale);if(l(e,r)||s(a,t))return!0;for(let u=0;u<n.length-1;u++){const c=n[u],o=n[u+1];if(l(i(o.minScale),f(c.maxScale)))return!0}return!1}function h(n,r,t,e){return n=i(n),t=i(t),r=f(r),!(!m(t,n)&&(e??t)>n)&&!N(r,t)&&(e===void 0||!m(e,n))}function I(n){return"mode"in n?n.mode:n.filterMode}function i(n){return n||Number.POSITIVE_INFINITY}function f(n){return n||0}export{y as c,b as i,p as u};
