import{g as G,k as V,L as S,I as q,W as F,m as O,o as _,y as h,G as R,r as w,c as X,l as d,p as l,q as M,z as m,E as j}from"./vendor-BrY8b94Q.js";import{p as P,_ as E}from"./index-CWtyz5ej.js";var x={exports:{}},H=x.exports,C;function W(){return C||(C=1,(function(I,k){(function(c,p){I.exports=p()})(H,function(){function c(o){var i=[];return o.AMapUI&&i.push(p(o.AMapUI)),o.Loca&&i.push(y(o.Loca)),Promise.all(i)}function p(o){return new Promise(function(i,a){var u=[];if(o.plugins)for(var r=0;r<o.plugins.length;r+=1)n.AMapUI.plugins.indexOf(o.plugins[r])==-1&&u.push(o.plugins[r]);if(e.AMapUI===t.failed)a("前次请求 AMapUI 失败");else if(e.AMapUI===t.notload){e.AMapUI=t.loading,n.AMapUI.version=o.version||n.AMapUI.version,r=n.AMapUI.version;var v=document.body||document.head,s=document.createElement("script");s.type="text/javascript",s.src="https://webapi.amap.com/ui/"+r+"/main.js",s.onerror=function(f){e.AMapUI=t.failed,a("请求 AMapUI 失败")},s.onload=function(){if(e.AMapUI=t.loaded,u.length)window.AMapUI.loadUI(u,function(){for(var f=0,U=u.length;f<U;f++){var L=u[f].split("/").slice(-1)[0];window.AMapUI[L]=arguments[f]}for(i();A.AMapUI.length;)A.AMapUI.splice(0,1)[0]()});else for(i();A.AMapUI.length;)A.AMapUI.splice(0,1)[0]()},v.appendChild(s)}else e.AMapUI===t.loaded?o.version&&o.version!==n.AMapUI.version?a("不允许多个版本 AMapUI 混用"):u.length?window.AMapUI.loadUI(u,function(){for(var f=0,U=u.length;f<U;f++){var L=u[f].split("/").slice(-1)[0];window.AMapUI[L]=arguments[f]}i()}):i():o.version&&o.version!==n.AMapUI.version?a("不允许多个版本 AMapUI 混用"):A.AMapUI.push(function(f){f?a(f):u.length?window.AMapUI.loadUI(u,function(){for(var U=0,L=u.length;U<L;U++){var B=u[U].split("/").slice(-1)[0];window.AMapUI[B]=arguments[U]}i()}):i()})})}function y(o){return new Promise(function(i,a){if(e.Loca===t.failed)a("前次请求 Loca 失败");else if(e.Loca===t.notload){e.Loca=t.loading,n.Loca.version=o.version||n.Loca.version;var u=n.Loca.version,r=n.AMap.version.startsWith("2"),v=u.startsWith("2");if(r&&!v||!r&&v)a("JSAPI 与 Loca 版本不对应！！");else{r=n.key,v=document.body||document.head;var s=document.createElement("script");s.type="text/javascript",s.src="https://webapi.amap.com/loca?v="+u+"&key="+r,s.onerror=function(f){e.Loca=t.failed,a("请求 AMapUI 失败")},s.onload=function(){for(e.Loca=t.loaded,i();A.Loca.length;)A.Loca.splice(0,1)[0]()},v.appendChild(s)}}else e.Loca===t.loaded?o.version&&o.version!==n.Loca.version?a("不允许多个版本 Loca 混用"):i():o.version&&o.version!==n.Loca.version?a("不允许多个版本 Loca 混用"):A.Loca.push(function(f){f?a(f):a()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var t;(function(o){o.notload="notload",o.loading="loading",o.loaded="loaded",o.failed="failed"})(t||(t={}));var n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},e={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},A={AMapUI:[],Loca:[]},b=[],g=function(o){typeof o=="function"&&(e.AMap===t.loaded?o(window.AMap):b.push(o))};return{load:function(o){return new Promise(function(i,a){if(e.AMap==t.failed)a("");else if(e.AMap==t.notload){var u=o.key,r=o.version,v=o.plugins;u?(window.AMap&&location.host!=="lbs.amap.com"&&a("禁止多种API加载方式混用"),n.key=u,n.AMap.version=r||n.AMap.version,n.AMap.plugins=v||n.AMap.plugins,e.AMap=t.loading,r=document.body||document.head,window.___onAPILoaded=function(f){if(delete window.___onAPILoaded,f)e.AMap=t.failed,a(f);else for(e.AMap=t.loaded,c(o).then(function(){i(window.AMap)}).catch(a);b.length;)b.splice(0,1)[0]()},v=document.createElement("script"),v.type="text/javascript",v.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+n.AMap.version+"&key="+u+"&plugin="+n.AMap.plugins.join(","),v.onerror=function(f){e.AMap=t.failed,a(f)},r.appendChild(v)):a("请填写key")}else if(e.AMap==t.loaded)if(o.key&&o.key!==n.key)a("多个不一致的 key");else if(o.version&&o.version!==n.AMap.version)a("不允许多个版本 JSAPI 混用");else{if(u=[],o.plugins)for(r=0;r<o.plugins.length;r+=1)n.AMap.plugins.indexOf(o.plugins[r])==-1&&u.push(o.plugins[r]);u.length?window.AMap.plugin(u,function(){c(o).then(function(){i(window.AMap)}).catch(a)}):c(o).then(function(){i(window.AMap)}).catch(a)}else if(o.key&&o.key!==n.key)a("多个不一致的 key");else if(o.version&&o.version!==n.AMap.version)a("不允许多个版本 JSAPI 混用");else{var s=[];if(o.plugins)for(r=0;r<o.plugins.length;r+=1)n.AMap.plugins.indexOf(o.plugins[r])==-1&&s.push(o.plugins[r]);g(function(){s.length?window.AMap.plugin(s,function(){c(o).then(function(){i(window.AMap)}).catch(a)}):c(o).then(function(){i(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},e={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},A={AMap:[],AMapUI:[],Loca:[]}}}})})(x)),x.exports}var Z=W();const N=G(Z),T={MapList:"/mapList",params:"/addStation"},z=()=>P(T.MapList),J=I=>P(T.params,I),K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA3RJREFUWEfFl29olWUUwH8HTCapmwnOmqVzNcG5P+Fok8Yy7EOytU/VwsAyZfviUr9FCRpRgV8c6ZdFklnGxvowZGJi4B8GaUxo2u1DaneMTbZJbVdmrD9w8tz7Xvfee9/7vu/G5D7wwoV7nnN+5zznnOc8Qsilqk8AjUA9UA48BRQ42yeBIeA6cAnoFZHbYVRLkJCq1gJ7gWaTvTAG50aVsWkYnU7sXpkHhXnQtEqoWf5AY9d9wHYRuexnIyuAqi4ADgO7o1NwIgrdQ0ok5o+88TF4pUjYXgzFi+OyR4F9IvKf105PAFWtAE5EYlR23FC+isLdf4Nilfr/0kfgrWJofUYoy2cA2C4i19K1ZACoap2dYSRGfnNfsMdBWGX50FUXh7DYNYpIn3tPCoDj+aX5Mp40lAZR747EAwDnzPst7EGer3kU7HOvwXtgX7blgrDjqE7mhBvgSCTG7iDjBQth4lXv3F32nTL5TyiIoyLSZpJxTU6p/fhuv3LkN28FjUWJ7C5dApsLvWW6rROQqJbk73TJtlL4rDpudpOVaBKgMzpFc9UZ9cz2zSvg/EuBLSPF1os/KBfGM0GtOn7eKlaiXSLyhjgdbuTD+z3s4HX1dK3jOaHlaaj+Xrn6Z3Af6H9Z+PwmtP7kre9guXDAeikUGUAL0OGn3Ly3KMi33grTkXSbxL23KHgtS8hfGuIRbTWAb678wZu1Z7Mrn28As3x+i1gunTSAgQ8GtOKTSPbQ+gFYk/k6qvSOzOwPioBJvl8GH1fKNQOY2HVFC47dmj3AsRrhnRJ4vS8168MA7CyBL2pk0gC08aJy2uVBOopXBNo3CnvWJSSf7FGG/5pdBBqKoPcFYU4AH1UI+zfMGLQKisRmohAmAm6AWR/Bl7XCmsXEKyO5rPHYUdgKA+A+gjklYfNq6Hw+0ZzcxsMCuJNwTmX4aZXw3vpM42EB3GU4p0ZkiXlneibs7sQNOoL0RmTDpm8r9qqCplVwati7dIMAUlpxPGSqvpfRfHbCjMvIAbDJN+t1/PZasMzfcVkZnPK/jKw6krLHf8+U9byOHYisA4lNP4eeFV6zl0CI1TMM+65qxoTkmopSBxIHwMZw35Hs8UWwbok/wfjf8KvH6B44kjkQNo7nZihN+pXTsdwFkbuHiQsid0+zlK6Wq8dpeq4/rOf5/1pBL+HGxGXSAAAAAElFTkSuQmCC",D="/assets/jpg/station-Cf77LQol.jpg",Y={id:"container"},Q=V({__name:"MapContain",props:{refreshToken:{}},setup(I){const k=I;let c=null,p=null;const y=[];async function t(){if(c){for(;y.length;){const n=y.pop();try{n.setMap&&n.setMap(null)}catch{}}try{const{data:n}=await z();console.log("地图数据",n),n.forEach(e=>{const A=new p.Marker({position:e.position,title:e.title,icon:K});A.on("click",()=>{new p.InfoWindow({content:`<div style="display:flex;padding:10px;align-items:center">
                <div><img src="${D}" width="200px"/></div>
                <div style="width:180px;line-height:30px;margin-left:20px">
                    <h3>${e.title}</h3>
                    <p>充电桩数量：${e.count}</p>
                    <p>充电站状态：<span style="color:blue">${e.status==1?"使用中":"维护中"}</span></p>
                </div>
              </div>`,offset:new p.Pixel(0,-30)}).open(c,A.getPosition())}),A.setMap(c),y.push(A)})}catch(n){console.error("loadMarkers error",n)}}}return S(()=>{N.load({key:"c4b0f8db6005f25720d601159b3699cc",version:"1.4.15",plugins:[]}).then(n=>{p=n,c=new n.Map("container",{viewMode:"3D",zoom:6});try{c.setZoomAndCenter(6,[116.397428,39.90923])}catch{try{c.setZoom(6),c.setCenter([116.397428,39.90923])}catch{}}t(),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)}).catch(n=>{console.error(n)})}),q(()=>k.refreshToken,(n,e)=>{console.log("refreshToken changed",n,e),n!==e&&t()}),F(()=>{try{y.forEach(n=>n.setMap&&n.setMap(null))}catch{}c?.destroy()}),(n,e)=>(_(),O("div",Y))}}),$=E(Q,[["__scopeId","data-v-03c0bead"]]),ee=V({__name:"ElectronicMap",setup(I){const k=h(),c=h(0),p=h({name:"",region:"",location1:"",location2:"",now:"",remarks:"",title:""}),y=R({name:[{required:!0,message:"请输入站点名称",trigger:"blur"}],region:[{required:!0,message:"请输入站点地址",trigger:"blur"}],location1:[{required:!0,message:"请输入经度",trigger:"blur"}],location2:[{required:!0,message:"请输入维度",trigger:"blur"}]}),t=()=>{k.value?.validate(async n=>{if(n){p.value.title=p.value.name;const e=await J(p.value);console.log("res",e),e.code==200&&(p.value={name:"",region:"",location1:"",location2:"",now:"",remarks:"",title:""},c.value+=1,j({message:e.data,type:"success"}))}else console.log("error submit!!")})};return(n,e)=>{const A=w("el-card"),b=w("el-col"),g=w("el-text"),o=w("el-input"),i=w("el-form-item"),a=w("el-switch"),u=w("el-button"),r=w("el-form"),v=w("el-row");return _(),X(v,{gutter:20},{default:d(()=>[l(b,{span:18},{default:d(()=>[l(A,null,{default:d(()=>[l($,{refreshToken:c.value},null,8,["refreshToken"])]),_:1})]),_:1}),l(b,{span:6},{default:d(()=>[l(A,{class:"des"},{default:d(()=>[M("div",null,[e[7]||(e[7]=m("1.累计充电站数量：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[6]||(e[6]=[m("34个",-1)])]),_:1})]),M("div",null,[e[9]||(e[9]=m(" 2.单省份最多充电桩：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[8]||(e[8]=[m("北京(4个)",-1)])]),_:1})]),M("div",null,[e[11]||(e[11]=m("3.充电站遍及省份：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[10]||(e[10]=[m("14个",-1)])]),_:1})]),M("div",null,[e[13]||(e[13]=m("4.暂无充电站省份：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[12]||(e[12]=[m("22个",-1)])]),_:1})]),M("div",null,[e[15]||(e[15]=m("5.累计充电站：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[14]||(e[14]=[m("北京(4个)",-1)])]),_:1})]),M("div",null,[e[17]||(e[17]=m(" 6.单日营收最高：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[16]||(e[16]=[m("北京西单充电站",-1)])]),_:1})]),M("div",null,[e[19]||(e[19]=m(" 7.单日营收最低：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[18]||(e[18]=[m("南宁青秀山充电站",-1)])]),_:1})]),M("div",null,[e[21]||(e[21]=m(" 8.故障率最高：",-1)),l(g,{type:"primary"},{default:d(()=>[...e[20]||(e[20]=[m("兰州黄河桥充电站",-1)])]),_:1})])]),_:1}),l(A,{class:"mt"},{header:d(()=>[...e[22]||(e[22]=[M("div",{class:"card-header"},[M("h3",null,"新增站点地图")],-1)])]),default:d(()=>[l(r,{model:p.value,rules:y,style:{"max-width":"600px"},"label-width":"100px",ref_key:"formRef",ref:k},{default:d(()=>[l(i,{label:"站点名称：",prop:"name"},{default:d(()=>[l(o,{placeholder:"请输入站点名称",modelValue:p.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>p.value.name=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"站点地址",prop:"region"},{default:d(()=>[l(o,{placeholder:"请输入站点地址",modelValue:p.value.region,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value.region=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"经度：",prop:"location1"},{default:d(()=>[l(o,{placeholder:"请输入经度",modelValue:p.value.location1,"onUpdate:modelValue":e[2]||(e[2]=s=>p.value.location1=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"维度：",prop:"location2"},{default:d(()=>[l(o,{placeholder:"请输入维度",modelValue:p.value.location2,"onUpdate:modelValue":e[3]||(e[3]=s=>p.value.location2=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"立即使用：",prop:"now"},{default:d(()=>[l(a,{modelValue:p.value.now,"onUpdate:modelValue":e[4]||(e[4]=s=>p.value.now=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"备注",prop:"remarks"},{default:d(()=>[l(o,{placeholder:"请输入备注",type:"textarea",modelValue:p.value.remarks,"onUpdate:modelValue":e[5]||(e[5]=s=>p.value.remarks=s)},null,8,["modelValue"])]),_:1}),l(i,null,{default:d(()=>[l(u,{type:"primary",onClick:t},{default:d(()=>[...e[23]||(e[23]=[m("创建",-1)])]),_:1}),l(u,null,{default:d(()=>[...e[24]||(e[24]=[m("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}}),te=E(ee,[["__scopeId","data-v-f5d524c6"]]);export{te as default};
