import{P as p,$ as u}from"./utils-BeWH20Zb.js";import{gF as y,gI as f,gL as g,gH as t,gG as n}from"./test-Dp3_P59c.js";import"./originUtils-TS7VWtkB.js";import"./jsonContext-BGln5sw3.js";import"./saveUtils-CtKjcsNq.js";import"./index-CulM0VMq.js";import"./vendor-CHjNVy30.js";import"./station-CTe-uNfl.js";const s="Map Service",v="map-image-layer-save",I="map-image-layer-save-as";function o(r){return{isValid:r.type==="map-image"&&!r.sourceJSON?.tileInfo,errorMessage:"Layer.type should be 'map-image' and reference a dynamic (non-cached) map service"}}function m(r){const e=r.layerJSON;return Promise.resolve(e&&Object.keys(e).length?e:null)}function d(r,e){return l(r,e),Promise.resolve()}async function L(r,e){const{parsedUrl:a,title:c,fullExtent:i}=r;e.url=a.path,e.title||=c,e.extent=i?await y(i):null,f(e,t.METADATA),l(r,e)}function l(r,e){g(e,t.DYNAMIC);const a=r.sublayers?.length??0;n(e,t.MULTI_LAYER,a>1),n(e,t.SINGLE_LAYER,a===1)}async function D(r,e){return p({layer:r,itemType:s,validateLayer:o,createItemData:m,errorNamePrefix:v,setItemProperties:d},e)}async function S(r,e,a){return u({layer:r,itemType:s,validateLayer:o,createItemData:m,errorNamePrefix:I,newItem:e,setItemProperties:L},a)}export{D as save,S as saveAs};
