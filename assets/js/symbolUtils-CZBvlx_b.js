const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/visualVariableUtils-CZtJQX17.js","assets/js/test-Dp3_P59c.js","assets/js/index-CulM0VMq.js","assets/js/vendor-CHjNVy30.js","assets/css/index-DXVkK3IA.css","assets/js/station-CTe-uNfl.js","assets/css/test-D2ol9zJk.css"])))=>i.map(i=>d[i]);
import{a as A}from"./index-CulM0VMq.js";import{bx as g,lK as L,cV as O}from"./test-Dp3_P59c.js";import{L as b,M as _,N as F}from"./utils-GYScHLq5.js";import"./colorUtils-PLuV6xy5.js";import"./defaults3D-B9tjgcmU.js";var r;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(r||(r={}));const S=g("android");g("chrome")||S&&S>=4;L();r.size;r.maxSize;r.maxOutlineSize;r.lineWidth;r.tallSymbolWidth;function w(e){return e&&"opacity"in e?e.opacity*w(e.parent):1}async function P(e,i){if(!e)return;const h=e.sourceLayer,p=(i!=null&&i.useSourceLayer?h:e.layer)??h,o=i?.ignoreOpacity?1:w(p);if(e.symbol!=null&&(i==null||i.ignoreGraphicSymbol!==!0)){const l=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...i,acceptedFormats:i?.webStyleAcceptedFormats,cache:i?.webStyleCache}):e.symbol.clone();return b(l,null,o),l}const t=i?.renderer??W(p);let a=t&&"getSymbolAsync"in t?await t.getSymbolAsync(e,i):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...i,acceptedFormats:i?.webStyleAcceptedFormats,cache:i?.webStyleCache}):a.clone(),!t||!("visualVariables"in t)||!t.visualVariables?.length)return b(a,null,o),a;if("arcadeRequiredForVisualVariables"in t&&t.arcadeRequiredForVisualVariables&&i?.arcade==null){const l={...i};l.arcade=await O(),i=l}const{getColor:z,getOpacity:V,getAllSizes:x,getRotationAngle:v}=await A(()=>import("./visualVariableUtils-CZtJQX17.js").then(l=>l.b),__vite__mapDeps([0,1,2,3,4,5,6])),s=[],c=[],u=[],d=[];for(const l of t.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":c.push(l);break;case"rotation":d.push(l);break;case"size":l.target||u.push(l)}const f=!!s.length&&s[s.length-1],y=f?z(f,e,i):null,m=!!c.length&&c[c.length-1];let n=m?V(m,e,i):null;if(o!=null&&(n=n!=null?n*o:o),i?.ignoreOpacity&&(n=1),y!=null&&m&&n!=null&&(y.a=1),b(a,y,n),u.length&&i?.ignoreSizeVariables!==!0){const l=x(u,e,i);await _(a,l)}if(i?.ignoreRotationVariables!==!0)for(const l of d)F(a,v(l,e,i),l.axis);return a}function W(e){if(e)return"renderer"in e?e.renderer:void 0}export{P as x};
