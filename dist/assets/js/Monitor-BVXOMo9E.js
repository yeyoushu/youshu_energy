import{l as H,d as J}from"./chargingstation-CH2yEi0H.js";import{u as K,_ as L}from"./StationForm.vue_vue_type_script_setup_true_lang-DrKS9k9e.js";import{j as O,r as v,q as I,a as Q,e as o,s as W,c as X,o as f,g as e,w as l,h as p,v as Y,f as g,k,F as Z,E as h}from"./vendor-CHjNVy30.js";import"./index-BJQUWR-1.js";const ne=O({__name:"Monitor",setup(ee){const c=v("name"),i=I({input:"",value:1}),V=v([]),S=v(0),u=I({page:1,pageSize:10}),z=v(!1),r=async()=>{z.value=!0;const{data:{list:s,total:t}}=await H({...u,status:i.value,[c.value]:i.input});z.value=!1,V.value=s,S.value=t};Q(()=>{r()});const M=s=>{u.pageSize=s,r()},$=s=>{u.page=s,r()},A=()=>{u.page=1,u.pageSize=10,i.input="",i.value=1,c.value="name",r()},b=v(!1),B=K(),{setRowData:D}=B,E=s=>{D(s),b.value=!0},N=()=>{D({name:"",id:"",city:"",fast:"",slow:"",status:2,now:"",fault:"",person:"",tel:""}),b.value=!0},P=async s=>{const t=await J({id:s});t.code==200&&h({message:t.data,type:"success"}),r()};return(s,t)=>{const d=o("el-option"),x=o("el-select"),R=o("el-input"),m=o("el-col"),_=o("el-button"),U=o("el-row"),y=o("el-card"),w=o("el-statistic"),n=o("el-table-column"),C=o("el-tag"),j=o("el-popconfirm"),F=o("el-table"),q=o("el-pagination"),T=W("loading");return f(),X(Z,null,[e(y,null,{default:l(()=>[e(U,{gutter:20},{default:l(()=>[e(m,{span:6},{default:l(()=>[e(R,{modelValue:i.input,"onUpdate:modelValue":t[1]||(t[1]=a=>i.input=a),modelModifiers:{trim:!0},placeholder:"请输入站点名称、ID"},{append:l(()=>[e(x,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),style:{width:"115px"}},{default:l(()=>[e(d,{label:"按名称查询",value:"name"}),e(d,{label:"按ID查询",value:"id"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(m,{span:6},{default:l(()=>[e(x,{placeholder:"充电站状态",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value=a)},{default:l(()=>[e(d,{label:"全部",value:1}),e(d,{label:"使用中",value:2}),e(d,{label:"空闲中",value:3}),e(d,{label:"维护中",value:4}),e(d,{label:"待维修",value:5})]),_:1},8,["modelValue"])]),_:1}),e(m,{span:6},{default:l(()=>[e(_,{type:"primary",onClick:r},{default:l(()=>[...t[6]||(t[6]=[p("查询",-1)])]),_:1}),e(_,{onClick:A},{default:l(()=>[...t[7]||(t[7]=[p("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{class:"mt"},{default:l(()=>[e(U,null,{default:l(()=>[e(m,{span:6},{default:l(()=>[e(w,{title:"累计充电量(度)",value:268900})]),_:1}),e(m,{span:6},{default:l(()=>[e(w,{title:"累计充电次数(次)",value:1389})]),_:1}),e(m,{span:6},{default:l(()=>[e(w,{title:"服务区域(个)",value:88})]),_:1}),e(m,{span:6},{default:l(()=>[e(w,{title:"累计效益(元)",value:5622178})]),_:1})]),_:1})]),_:1}),e(y,{class:"mt"},{default:l(()=>[e(_,{type:"primary",icon:"Plus",onClick:N},{default:l(()=>[...t[8]||(t[8]=[p("新增充电站",-1)])]),_:1})]),_:1}),e(y,{class:"mt"},{default:l(()=>[Y((f(),g(F,{data:V.value,style:{width:"100%"}},{default:l(()=>[e(n,{type:"index",width:"80",label:"序号"}),e(n,{prop:"name",label:"站点名称"}),e(n,{prop:"id",label:"站点ID"}),e(n,{prop:"city",label:"所属城市"}),e(n,{prop:"fast",label:"快充数"}),e(n,{prop:"slow",label:"慢充数"}),e(n,{prop:"status",label:"充电站状态"},{default:l(a=>[a.row.status==2?(f(),g(C,{key:0,type:"primary"},{default:l(()=>[...t[9]||(t[9]=[p("使用中",-1)])]),_:1})):k("",!0),a.row.status==3?(f(),g(C,{key:1,type:"success"},{default:l(()=>[...t[10]||(t[10]=[p("空闲中",-1)])]),_:1})):k("",!0),a.row.status==4?(f(),g(C,{key:2,type:"warning"},{default:l(()=>[...t[11]||(t[11]=[p("维护中",-1)])]),_:1})):k("",!0),a.row.status==5?(f(),g(C,{key:3,type:"danger"},{default:l(()=>[...t[12]||(t[12]=[p("待维修",-1)])]),_:1})):k("",!0)]),_:1}),e(n,{prop:"now",label:"正在充电"}),e(n,{prop:"fault",label:"故障数"}),e(n,{prop:"person",label:"站点负责人"}),e(n,{prop:"tel",label:"负责人电话"}),e(n,{label:"操作",width:"160"},{default:l(a=>[e(_,{type:"primary",size:"small",onClick:G=>E(a.row)},{default:l(()=>[...t[13]||(t[13]=[p("编辑",-1)])]),_:1},8,["onClick"]),e(j,{title:"确定要删除当前站点吗？",onConfirm:G=>P(a.row.id)},{reference:l(()=>[e(_,{type:"danger",size:"small"},{default:l(()=>[...t[14]||(t[14]=[p("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[T,z.value]]),e(q,{class:"fr mt mb","current-page":u.page,"onUpdate:currentPage":t[3]||(t[3]=a=>u.page=a),"page-size":u.pageSize,"onUpdate:pageSize":t[4]||(t[4]=a=>u.pageSize=a),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total",total:S.value,onSizeChange:M,onCurrentChange:$,background:""},null,8,["current-page","page-size","total"])]),_:1}),e(L,{"dialog-visible":b.value,onClose:t[5]||(t[5]=a=>b.value=!1),onReload:r},null,8,["dialog-visible"])],64)}}});export{ne as default};
